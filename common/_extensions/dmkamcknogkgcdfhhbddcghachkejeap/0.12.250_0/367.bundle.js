"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[367],{28646:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(97790),o=r(96067),a=r(48246),i=r(91288),s=r(10423),c=r(48834).Buffer,d=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};const u=[{vendorId:a.An}],l=()=>{const{hid:e}=navigator;if(!e)throw new s.PS("navigator.hid is not supported","HIDNotSupported");return e};function h(){return d(this,void 0,void 0,(function*(){const e=yield l().requestDevice({filters:u});return Array.isArray(e)?e:[e]}))}function f(){return d(this,void 0,void 0,(function*(){return(yield l().getDevices()).filter((e=>e.vendorId===a.An))}))}class y extends n.ZP{constructor(e){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise((e=>{this.inputCallback=e})),this.onInputReport=e=>{const t=c.from(e.data.buffer);this.inputCallback?(this.inputCallback(t),this.inputCallback=null):this.inputs.push(t)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>d(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>d(this,void 0,void 0,(function*(){const{channel:t,packetSize:r}=this;(0,i.cM)("apdu","=> "+e.toString("hex"));const n=(0,o.Z)(t,r),a=n.makeBlocks(e);for(let e=0;e<a.length;e++)yield this.device.sendReport(0,a[e]);let s,c;for(;!(s=n.getReducedResult(c));){const e=yield this.read();c=n.reduceResponse(c,e)}return(0,i.cM)("apdu","<= "+s.toString("hex")),s})))).catch((e=>{if(e&&e.message&&e.message.includes("write"))throw this._emitDisconnect(e),new s.vs(e.message);throw e}))})),this.device=e,this.deviceModel="number"==typeof e.productId?(0,a.Ht)(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return d(this,void 0,void 0,(function*(){const[e]=yield h();return y.open(e)}))}static openConnected(){return d(this,void 0,void 0,(function*(){const e=yield f();return 0===e.length?null:y.open(e[0])}))}static open(e){return d(this,void 0,void 0,(function*(){yield e.open();const t=new y(e),r=n=>{e===n.device&&(l().removeEventListener("disconnect",r),t._emitDisconnect(new s.qX))};return l().addEventListener("disconnect",r),t}))}close(){return d(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()}))}setScrambleKey(){}}y.isSupported=()=>Promise.resolve(!(!window.navigator||!window.navigator.hid)),y.list=f,y.listen=e=>{let t=!1;return function(){return d(this,void 0,void 0,(function*(){const e=yield f();return e.length>0?e[0]:(yield h())[0]}))}().then((r=>{if(r){if(!t){const t="number"==typeof r.productId?(0,a.Ht)(r.productId):void 0;e.next({type:"add",descriptor:r,deviceModel:t}),e.complete()}}else e.error(new s.FB("Access denied to use Ledger device"))}),(t=>{e.error(new s.FB(t.message))})),{unsubscribe:function(){t=!0}}};const p=y},19981:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(97790),o=r(9064),a=r(21036),i=r(91288),s=r(10423),c=r(62607),d=r(48834).Buffer,u=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))};class l extends n.ZP{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=(0,a.Ht)(e.productId)}static request(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.PC)();return l.open(e)}))}static openConnected(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.yz)();return 0===e.length?null:l.open(e[0])}))}static open(e){return u(this,void 0,void 0,(function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield f(e);const t=e.configurations[0].interfaces.find((({alternates:e})=>e.some((e=>255===e.interfaceClass))));if(!t)throw new s.$u("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const r=t.interfaceNumber;try{yield e.claimInterface(r)}catch(t){throw yield e.close(),new s.$u(t.message)}const n=new l(e,r),o=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",o),n._emitDisconnect(new s.qX))};return navigator.usb.addEventListener("disconnect",o),n}))}close(){return u(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield f(this.device),yield this.device.close()}))}exchange(e){return u(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>u(this,void 0,void 0,(function*(){const{channel:t,packetSize:r}=this;(0,i.cM)("apdu","=> "+e.toString("hex"));const n=(0,o.Z)(t,r),a=n.makeBlocks(e);for(let e=0;e<a.length;e++)yield this.device.transferOut(3,a[e]);let s,c;for(;!(s=n.getReducedResult(c));){const e=yield this.device.transferIn(3,r),t=d.from(e.data.buffer);c=n.reduceResponse(c,t)}return(0,i.cM)("apdu","<= "+s.toString("hex")),s})))).catch((e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new s.vs(e.message);throw e}))}))}setScrambleKey(){}}l.isSupported=c.Gb,l.list=c.yz,l.listen=e=>{let t=!1;return(0,c.DC)().then((r=>{if(!t){const t=(0,a.Ht)(r.productId);e.next({type:"add",descriptor:r,deviceModel:t}),e.complete()}}),(t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new s.um(t.message)):e.error(new s.FB(t.message))})),{unsubscribe:function(){t=!0}}};const h=l;function f(e){return u(this,void 0,void 0,(function*(){try{yield e.reset()}catch(e){console.warn(e)}}))}},77257:(e,t,r)=>{r.d(t,{Pi:()=>i.P}),r(20580);var n=r(72615),o=r(40626),a=(r(30571),r(66065)),i=r(49839);r(22081),r(2784),r(92363),r(97432),(0,o.z0)(n.m),a.O.finalizeAllImmediately},47790:(e,t,r)=>{r.d(t,{A:()=>n.A}),r(31755);var n=r(47918)},66674:(e,t,r)=>{r(2784)},96780:(e,t,r)=>{r(2784)},86917:(e,t,r)=>{r(2784)},22201:(e,t,r)=>{r(2784)},63167:(e,t,r)=>{r.d(t,{BX:()=>n.BX,CK:()=>n.CK});var n=r(58650)},91637:(e,t,r)=>{r.d(t,{u:()=>h});var n=r(2784),o=r(63167),a=r(28316),i=r(75868),s=r(66769),c=r(71346),d=r.n(c),u=r(19410);const l=(0,i.animated)(u.Z),h=({isOpen:e,close:t,align:r,maxHeight:c,onCloseTransitionEnd:d,forceNotUseSimplebar:u,forceNotOverflowAuto:l,disableBackdrop:h,children:y})=>{const p=(0,o.BX)(e),[g,A]=(0,n.useState)(e);(0,n.useLayoutEffect)((()=>{e&&A(!0)}),[e]);const v=e||g,b=(0,n.useRef)(null),w=(0,n.useMemo)((()=>v?(b.current||(b.current=p.registerRootElement()),p.getRootElement(b.current)):(b.current&&(p.releaseRootElement(b.current),b.current=null),null)),[v]);(0,n.useEffect)((()=>()=>{b.current&&(p.releaseRootElement(b.current),b.current=null)}),[]);const m=(0,i.useSpringValue)(e?1:0,{config:s.a});return w&&(e||g)?a.createPortal(n.createElement("div",null,n.createElement(f,{transition:m,isOpen:e,close:t,align:r,maxHeight:c,onCloseTransitionEnd:()=>{A(!1),d&&d()},forceNotUseSimplebar:u,forceNotOverflowAuto:l,disableBackdrop:h},y)),w):null},f=({children:e,transition:t,align:r,maxHeight:o,isOpen:a,close:s,onCloseTransitionEnd:c,forceNotUseSimplebar:u,forceNotOverflowAuto:h,disableBackdrop:f})=>{const y=(0,n.useRef)(c);y.current=c,(0,n.useLayoutEffect)((()=>{a?t.start(1):t.start(0,{onRest:y.current})}),[t,a]);const p=(0,n.useRef)(null);return n.createElement(i.animated.div,{style:Object.assign(Object.assign({position:"absolute",top:0,bottom:0,left:0,right:0},(()=>{if("left"!==r&&"right"!==r)return{display:"flex",flexDirection:"column",justifyContent:"center"===r?"center":"flex-end"}})()),{pointerEvents:f?"none":"auto",backgroundColor:f?"rgba(0,0,0,0)":t.to((e=>d()("#000000").alpha(.55*e).string()))}),onClick:e=>{e.preventDefault(),f?p.current&&p.current!==e.target&&p.current.contains(e.target)&&e.stopPropagation():(e.stopPropagation(),p.current&&p.current!==e.target&&p.current.contains(e.target)||a&&s())}},((e,t,o)=>"left"===r||"right"===r||u?n.createElement(i.animated.div,{ref:e,style:t},o):n.createElement(l,{scrollableNodeProps:{ref:e},style:t},o))(p,Object.assign({maxHeight:"left"!==r&&"right"!==r?o||"85vh":void 0,overflow:h?void 0:"auto",pointerEvents:"auto",position:"absolute",left:0,right:0},"left"===r?{top:0,bottom:0,transform:t.to((e=>`translateX(${-100*(1-e)}%)`))}:"right"===r?{top:0,bottom:0,transform:t.to((e=>`translateX(${100*(1-e)}%)`))}:{bottom:"center"===r?t.to((e=>50*e+"%")):"auto",transform:"center"===r?t.to((e=>`translateY(${50+50*(1-e)}%)`)):t.to((e=>`translateY(${100*(1-e)}%)`))}),e))}},90879:(e,t,r)=>{r.d(t,{p:()=>a});var n=r(71893),o=r(25300);const a=(0,n.default)(o.i)`
  font-weight: 400;
  font-size: 0.875rem;
`},40602:(e,t,r)=>{r.d(t,{et:()=>n}),r(14002),r(28646),r(19981),r(47722),r(80471),r(34298),r(48834).Buffer;const n="m/2645'/1195502025'/1148870696'/0'/0'/0"},35150:(e,t,r)=>{r.d(t,{VZ:()=>n.V,ZL:()=>o.Z,nW:()=>a.n});var n=r(93043),o=r(52977),a=(r(76948),r(61139),r(90820))},64259:(e,t,r)=>{r.d(t,{H:()=>i});var n=r(50318),o=r(19981),a=r(28646);const i={tryAppOpen:(e,t)=>{return r=void 0,i=void 0,c=function*(){let r=!1;try{const o=yield(0,n.getAppInfo)(e);"No errors"===o.error_message&&o.app_name===t&&(r=!0)}catch(e){console.log(e)}try{if(!r){yield n.CosmosApp.openApp(e,t);const r=25;let i=0;for(;i<r;){e=e instanceof a.Z?yield a.Z.create():yield o.Z.create();const r=yield(0,n.getAppInfo)(e);if("No errors"===r.error_message&&r.app_name===t)break;i++,yield new Promise((e=>setTimeout(e,200)))}}}catch(e){}return e},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,o)}a((c=c.apply(r,i||[])).next())}));var r,i,s,c}}},34298:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(40409),t),o(r(91166),t),o(r(47577),t)},80471:(e,t,r)=>{r.d(t,{K:()=>o.KW,g:()=>d});var n=r(16210),o=r(33924),a=r(14002),i=r(13128),s=r(48834).Buffer,c=Object.defineProperty;class d{constructor(e){if(((e,t,r)=>{((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"transport"),this.transport=e,!e)throw new Error("Transport has not been defined")}async sendApdu(e=o.N5.GET_VERSION,t=0,r=0,n=new Uint8Array(0)){return this.transport.send(o.Ds,e,t,r,s.from(n),[o.KW.NoError,o.KW.BadCla,o.KW.BadIns,o.KW.InvalidP1P2,o.KW.UserRejected]).then((e=>{const t=e.subarray(-2),r=256*t[0]+t[1];let n=(0,o.T9)(r);return{data:e.subarray(0,-2),returnCode:r,errorMessage:n}}))}async getAppVersion(){const e=await this.sendApdu(o.N5.GET_VERSION);return{returnCode:e.returnCode,errorMessage:e.errorMessage,major:e.data[0],minor:e.data[1],patch:e.data[2]}}async getPubKey(e,t=!0){const r=(0,n.Mi)(e);try{const e=await this.sendApdu(o.N5.GET_PUB_KEY,t?1:0,0,r);return{publicKey:e.data.slice(1,65),returnCode:e.returnCode,errorMessage:e.errorMessage}}catch{return console.warn("Caught error"),{publicKey:new Uint8Array(0),returnCode:o.KW.ExecutionError,errorMessage:(0,o.T9)(o.KW.ExecutionError)}}}async getStarkKey(e,t=!0){const{publicKey:r,errorMessage:n,returnCode:a}=await this.getPubKey(e,t);return a!==o.KW.NoError?{starkKey:r,returnCode:a,errorMessage:n}:{starkKey:r.slice(0,32),returnCode:a,errorMessage:n}}async signHash(e,t){const r=(0,n.Mi)(e),a=function(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return Uint8Array.from(t)}(function(e){let t=e.replace(/^0x0*/,"");if(t.length>o.dI)throw"invalid hash length";return t="0".repeat(1+o.dI-t.length).concat(t),t}(t));try{let e=await this.sendApdu(o.N5.SIGN_HASH,0,0,r);return e=await this.sendApdu(o.N5.SIGN_HASH,1,0,a),e.returnCode!==o.KW.NoError?{returnCode:e.returnCode,errorMessage:(0,o.T9)(e.returnCode),r:new Uint8Array(0),s:new Uint8Array(0),v:0}:{returnCode:e.returnCode,errorMessage:e.errorMessage,r:e.data.subarray(1,33),s:e.data.subarray(33,65),v:e.data[65]}}catch{return{returnCode:o.KW.ExecutionError,errorMessage:(0,o.T9)(o.KW.ExecutionError),r:new Uint8Array(0),s:new Uint8Array(0),v:0}}}async signTx(e,t,r){await this.sendApdu(o.N5.SIGN_TX,0,0,(0,n.Mi)(e));const i=(0,n.Md)(r.accountAddress),s=(0,n.Md)(r.chainId),c=(0,n.Md)(r.nonce),d=(0,n.Md)(this.encodeDataAvailabilityMode(r.nonceDataAvailabilityMode,r.feeDataAvailabilityMode));let u=new Uint8Array([...i.toArray("be",32),...s.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(o.N5.SIGN_TX,1,0,u);const l=(0,n.Md)(r.tip),{l1_gas:h,l2_gas:f}=this.encodeResourceBounds(r.resourceBounds);u=new Uint8Array([...l.toArray("be",32),...h.toArray("be",32),...f.toArray("be",32)]),await this.sendApdu(o.N5.SIGN_TX,2,0,u),await this.sendApdu(o.N5.SIGN_TX,3,0,new Uint8Array(0)),await this.sendApdu(o.N5.SIGN_TX,4,0,new Uint8Array(0));let y=(0,n.Md)(t.length);u=new Uint8Array([...y.toArray("be",32)]),await this.sendApdu(o.N5.SIGN_TX,5,0,u);let p,g={returnCode:o.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=a.lx.toCalldata(e.calldata);let r=new Uint8Array(32*(3+t.length));(0,n.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>r[t]=e)),(0,n.Md)(a.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>r[32+t]=e)),(0,n.Md)(t.length).toArray("be",32).forEach(((e,t)=>r[64+t]=e)),t.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,n)=>r[96+32*t+n]=e))}));let i=[];for(let e=0;e<r.length;e+=224)i.push(r.slice(e,e+224));if(i.length>1){if(p=await this.sendApdu(o.N5.SIGN_TX,6,0,i[0]),p.returnCode!==o.KW.NoError)return g;for(const e of i.slice(1))if(p=await this.sendApdu(o.N5.SIGN_TX,6,1,e),p.returnCode!==o.KW.NoError)return g}else if(p=await this.sendApdu(o.N5.SIGN_TX,6,0,i[0]),p.returnCode!==o.KW.NoError)return g}return(null==p?void 0:p.returnCode)===o.KW.NoError?{returnCode:p.returnCode,errorMessage:p.errorMessage,h:p.data.subarray(0,32),r:p.data.subarray(33,65),s:p.data.subarray(65,97),v:p.data[97]}:g}async signTxV1(e,t,r){await this.sendApdu(o.N5.SIGN_TX_V1,0,0,(0,n.Mi)(e));const i=(0,n.Md)(r.accountAddress),s=(0,n.Md)(r.max_fee),c=(0,n.Md)(r.chainId),d=(0,n.Md)(r.nonce);let u=new Uint8Array([...i.toArray("be",32),...s.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(o.N5.SIGN_TX_V1,1,0,u);let l=(0,n.Md)(t.length);u=new Uint8Array([...l.toArray("be",32)]),await this.sendApdu(o.N5.SIGN_TX_V1,2,0,u);let h,f={returnCode:o.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=a.lx.toCalldata(e.calldata);let r=new Uint8Array(32*(3+t.length));(0,n.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>r[t]=e)),(0,n.Md)(a.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>r[32+t]=e)),(0,n.Md)(t.length).toArray("be",32).forEach(((e,t)=>r[64+t]=e)),t.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,n)=>r[96+32*t+n]=e))}));let i=[];for(let e=0;e<r.length;e+=224)i.push(r.slice(e,e+224));if(i.length>1){if(h=await this.sendApdu(o.N5.SIGN_TX_V1,3,0,i[0]),h.returnCode!==o.KW.NoError)return f;for(const e of i.slice(1))if(h=await this.sendApdu(o.N5.SIGN_TX_V1,3,1,e),h.returnCode!==o.KW.NoError)return f}else if(h=await this.sendApdu(o.N5.SIGN_TX_V1,3,0,i[0]),h.returnCode!==o.KW.NoError)return f}return(null==h?void 0:h.returnCode)===o.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:f}async signDeployAccount(e,t){await this.sendApdu(o.N5.DEPLOY_ACCOUNT,0,0,(0,n.Mi)(e));const r=(0,n.Md)(t.contractAddress),a=(0,n.Md)(t.chainId),i=(0,n.Md)(t.nonce),s=(0,n.Md)(this.encodeDataAvailabilityMode(t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode)),c=(0,n.Md)(t.class_hash),d=(0,n.Md)(t.contract_address_salt);let u=new Uint8Array([...r.toArray("be",32),...a.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(o.N5.DEPLOY_ACCOUNT,1,0,u);const l=(0,n.Md)(t.tip),{l1_gas:h,l2_gas:f}=this.encodeResourceBounds(t.resourceBounds);u=new Uint8Array([...l.toArray("be",32),...h.toArray("be",32),...f.toArray("be",32)]),await this.sendApdu(o.N5.DEPLOY_ACCOUNT,2,0,u),await this.sendApdu(o.N5.DEPLOY_ACCOUNT,3,0,new Uint8Array(0));let y=(0,n.Md)(t.constructor_calldata.length);u=new Uint8Array([...y.toArray("be",32)]),await this.sendApdu(o.N5.DEPLOY_ACCOUNT,4,0,u);let p,g={returnCode:o.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},A=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,r)=>A[32*t+r]=e))}));let v=[];for(let e=0;e<A.length;e+=224)v.push(A.slice(e,e+224));for(const e of v)if(p=await this.sendApdu(o.N5.DEPLOY_ACCOUNT,5,0,e),p.returnCode!==o.KW.NoError)return g;return(null==p?void 0:p.returnCode)===o.KW.NoError?{returnCode:p.returnCode,errorMessage:p.errorMessage,h:p.data.subarray(0,32),r:p.data.subarray(33,65),s:p.data.subarray(65,97),v:p.data[97]}:g}async signDeployAccountV1(e,t){await this.sendApdu(o.N5.DEPLOY_ACCOUNT_V1,0,0,(0,n.Mi)(e));const r=(0,n.Md)(t.contractAddress),a=(0,n.Md)(t.class_hash),i=(0,n.Md)(t.contract_address_salt),s=(0,n.Md)(t.max_fee),c=(0,n.Md)(t.chainId),d=(0,n.Md)(t.nonce);let u=new Uint8Array([...r.toArray("be",32),...a.toArray("be",32),...i.toArray("be",32),...s.toArray("be",32),...c.toArray("be",32),...d.toArray("be",32)]);await this.sendApdu(o.N5.DEPLOY_ACCOUNT_V1,1,0,u);let l=(0,n.Md)(t.constructor_calldata.length);u=new Uint8Array([...l.toArray("be",32)]),await this.sendApdu(o.N5.DEPLOY_ACCOUNT_V1,2,0,u);let h,f={returnCode:o.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},y=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,r)=>y[32*t+r]=e))}));let p=[];for(let e=0;e<y.length;e+=224)p.push(y.slice(e,e+224));for(const e of p)if(h=await this.sendApdu(o.N5.DEPLOY_ACCOUNT_V1,3,0,e),h.returnCode!==o.KW.NoError)return f;return(null==h?void 0:h.returnCode)===o.KW.NoError?{returnCode:h.returnCode,errorMessage:h.errorMessage,h:h.data.subarray(0,32),r:h.data.subarray(33,65),s:h.data.subarray(65,97),v:h.data[97]}:f}async signMessage(e,t,r){const n=a.AT.getMessageHash(t,r);return this.signHash(e,n)}encodeResourceBounds(e){const t=BigInt(64),r=BigInt(128),o=t+r,i=BigInt(a.lC.encodeShortString("L1_GAS")),s=BigInt(a.lC.encodeShortString("L2_GAS")),c=(i<<o)+(BigInt(e.l1_gas.max_amount)<<r)+BigInt(e.l1_gas.max_price_per_unit),d=(s<<o)+(BigInt(e.l2_gas.max_amount)<<r)+BigInt(e.l2_gas.max_price_per_unit);return{l1_gas:(0,n.Md)(c),l2_gas:(0,n.Md)(d)}}encodeDataAvailabilityMode(e,t){const r=BigInt(32),n=e===i.h.L1?0:1,o=t===i.h.L1?0:1;return(BigInt(n)<<r)+BigInt(o)}}}}]);