"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[841],{49113:(e,t)=>{t.g4=t.Ar=t.RJ=t.yM=void 0,t.yM=class{logEvent(){}setUserId(){}setUserProperties(){}},t.RJ=class{logEvent(){}setUserProperties(){}incrementUserProperty(){}},t.Ar=class{constructor(e,t={}){this.analyticsClient=e,this.middleware=t}setUserId(e){this.analyticsClient.setUserId(e)}setUserProperties(e){this.analyticsClient.setUserProperties(e)}logEvent(e,t){if(this.middleware.logEvent){const n=this.middleware.logEvent(e,t);e=n.eventName,t=n.eventProperties}this.analyticsClient.logEvent(e,t)}},t.g4=class{constructor(e,t={}){this.analyticsClient=e,this.middleware=t}setUserProperties(e){this.analyticsClient.setUserProperties(e)}incrementUserProperty(e,t){this.analyticsClient.incrementUserProperty(e,t)}logEvent(e,t){if(this.middleware.logEvent){const n=this.middleware.logEvent(e,t);e=n.eventName,t=n.eventProperties}this.analyticsClient.logEvent(e,t)}}},94531:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(56309),t),i(n(54737),t),i(n(75468),t),i(n(88092),t),i(n(93395),t),i(n(31289),t),i(n(90924),t)},70223:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(61364),t)},9538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebounceActionTimer=void 0;const r=n(80075);t.DebounceActionTimer=class{constructor(e,t){this.debounceMs=e,this.handler=t,this.requests=[],this.startTime=0,this.tick=()=>{let e=this.debounceMs<=0;if(this.debounceMs>0&&Date.now()-this.startTime>=this.debounceMs&&(e=!0),e){const e=this.requests.slice(),t=this.handler(e);"object"==typeof t&&"then"in t?Promise.resolve(t).then((t=>{this.handleResponses(e,t)})):this.handleResponses(e,t),this.requests=[]}else this.nextTick(this.tick)},this.handleResponses=(e,t)=>{(0,r.runInAction)((()=>{for(let n=0;n<e.length;n++){const r=e[n],i=t[n];r.action(i)}}));for(const t of e)t.resolver()}}call(e,t){return new Promise((n=>{const r=0===this.requests.length;this.requests.push({args:e,action:t,resolver:n}),r&&this.startTimer()}))}startTimer(){this.startTime=Date.now(),this.nextTick(this.tick)}nextTick(e){this.debounceMs<=0?Promise.resolve().then(e):"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,this.debounceMs)}}},83816:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toGenerator=void 0,t.toGenerator=function*(e){return yield e}},61364:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(83816),t),i(n(9538),t)},1110:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgRemoveRemoteTokenMessenger=t.MsgAddRemoteTokenMessengerResponse=t.MsgAddRemoteTokenMessenger=t.MsgUnlinkTokenPairResponse=t.MsgUnlinkTokenPair=t.MsgLinkTokenPairResponse=t.MsgLinkTokenPair=t.MsgUpdateSignatureThresholdResponse=t.MsgUpdateSignatureThreshold=t.MsgReplaceMessageResponse=t.MsgReplaceMessage=t.MsgSendMessageWithCallerResponse=t.MsgSendMessageWithCaller=t.MsgSendMessageResponse=t.MsgSendMessage=t.MsgReceiveMessageResponse=t.MsgReceiveMessage=t.MsgReplaceDepositForBurnResponse=t.MsgReplaceDepositForBurn=t.MsgDepositForBurnWithCallerResponse=t.MsgDepositForBurnWithCaller=t.MsgDepositForBurnResponse=t.MsgDepositForBurn=t.MsgSetMaxBurnAmountPerMessageResponse=t.MsgSetMaxBurnAmountPerMessage=t.MsgUpdateMaxMessageBodySizeResponse=t.MsgUpdateMaxMessageBodySize=t.MsgUnpauseSendingAndReceivingMessagesResponse=t.MsgUnpauseSendingAndReceivingMessages=t.MsgPauseSendingAndReceivingMessagesResponse=t.MsgPauseSendingAndReceivingMessages=t.MsgUnpauseBurningAndMintingResponse=t.MsgUnpauseBurningAndMinting=t.MsgPauseBurningAndMintingResponse=t.MsgPauseBurningAndMinting=t.MsgDisableAttesterResponse=t.MsgDisableAttester=t.MsgEnableAttesterResponse=t.MsgEnableAttester=t.MsgAcceptOwnerResponse=t.MsgAcceptOwner=t.MsgUpdatePauserResponse=t.MsgUpdatePauser=t.MsgUpdateTokenControllerResponse=t.MsgUpdateTokenController=t.MsgUpdateAttesterManagerResponse=t.MsgUpdateAttesterManager=t.MsgUpdateOwnerResponse=t.MsgUpdateOwner=t.protobufPackage=void 0,t.MsgRemoveRemoteTokenMessengerResponse=void 0;const i=r(n(27808)),s=r(n(73737));function o(){return{from:"",amount:"",destinationDomain:0,mintRecipient:new Uint8Array,burnToken:""}}function a(){return{from:"",amount:"",destinationDomain:0,mintRecipient:new Uint8Array,burnToken:"",destinationCaller:new Uint8Array}}function c(){return{from:"",originalMessage:new Uint8Array,originalAttestation:new Uint8Array,newDestinationCaller:new Uint8Array,newMintRecipient:new Uint8Array}}function d(){return{from:"",message:new Uint8Array,attestation:new Uint8Array}}function u(){return{from:"",destinationDomain:0,recipient:new Uint8Array,messageBody:new Uint8Array}}function l(){return{from:"",destinationDomain:0,recipient:new Uint8Array,messageBody:new Uint8Array,destinationCaller:new Uint8Array}}function h(){return{from:"",originalMessage:new Uint8Array,originalAttestation:new Uint8Array,newMessageBody:new Uint8Array,newDestinationCaller:new Uint8Array}}function p(){return{from:"",remoteDomain:0,remoteToken:new Uint8Array,localToken:""}}function f(){return{from:"",remoteDomain:0,remoteToken:new Uint8Array,localToken:""}}function g(){return{from:"",domainId:0,address:new Uint8Array}}t.protobufPackage="circle.cctp.v1",t.MsgUpdateOwner={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.newOwner&&t.uint32(18).string(e.newOwner),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",newOwner:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.newOwner=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",newOwner:O(e.newOwner)?String(e.newOwner):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.newOwner&&(t.newOwner=e.newOwner),t},fromPartial(e){var t,n;const r={from:"",newOwner:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.newOwner=null!==(n=e.newOwner)&&void 0!==n?n:"",r}},t.MsgUpdateOwnerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdateAttesterManager={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.newAttesterManager&&t.uint32(18).string(e.newAttesterManager),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",newAttesterManager:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.newAttesterManager=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",newAttesterManager:O(e.newAttesterManager)?String(e.newAttesterManager):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.newAttesterManager&&(t.newAttesterManager=e.newAttesterManager),t},fromPartial(e){var t,n;const r={from:"",newAttesterManager:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.newAttesterManager=null!==(n=e.newAttesterManager)&&void 0!==n?n:"",r}},t.MsgUpdateAttesterManagerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdateTokenController={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.newTokenController&&t.uint32(18).string(e.newTokenController),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",newTokenController:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.newTokenController=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",newTokenController:O(e.newTokenController)?String(e.newTokenController):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.newTokenController&&(t.newTokenController=e.newTokenController),t},fromPartial(e){var t,n;const r={from:"",newTokenController:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.newTokenController=null!==(n=e.newTokenController)&&void 0!==n?n:"",r}},t.MsgUpdateTokenControllerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdatePauser={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.newPauser&&t.uint32(18).string(e.newPauser),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",newPauser:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.newPauser=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",newPauser:O(e.newPauser)?String(e.newPauser):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.newPauser&&(t.newPauser=e.newPauser),t},fromPartial(e){var t,n;const r={from:"",newPauser:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.newPauser=null!==(n=e.newPauser)&&void 0!==n?n:"",r}},t.MsgUpdatePauserResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgAcceptOwner={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.from=n.string():n.skipType(7&e)}return i},fromJSON:e=>({from:O(e.from)?String(e.from):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),t},fromPartial(e){var t;const n={from:""};return n.from=null!==(t=e.from)&&void 0!==t?t:"",n}},t.MsgAcceptOwnerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgEnableAttester={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.attester&&t.uint32(18).string(e.attester),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",attester:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.attester=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",attester:O(e.attester)?String(e.attester):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.attester&&(t.attester=e.attester),t},fromPartial(e){var t,n;const r={from:"",attester:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.attester=null!==(n=e.attester)&&void 0!==n?n:"",r}},t.MsgEnableAttesterResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgDisableAttester={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.attester&&t.uint32(18).string(e.attester),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",attester:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.attester=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",attester:O(e.attester)?String(e.attester):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.attester&&(t.attester=e.attester),t},fromPartial(e){var t,n;const r={from:"",attester:""};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.attester=null!==(n=e.attester)&&void 0!==n?n:"",r}},t.MsgDisableAttesterResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgPauseBurningAndMinting={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.from=n.string():n.skipType(7&e)}return i},fromJSON:e=>({from:O(e.from)?String(e.from):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),t},fromPartial(e){var t;const n={from:""};return n.from=null!==(t=e.from)&&void 0!==t?t:"",n}},t.MsgPauseBurningAndMintingResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUnpauseBurningAndMinting={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.from=n.string():n.skipType(7&e)}return i},fromJSON:e=>({from:O(e.from)?String(e.from):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),t},fromPartial(e){var t;const n={from:""};return n.from=null!==(t=e.from)&&void 0!==t?t:"",n}},t.MsgUnpauseBurningAndMintingResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgPauseSendingAndReceivingMessages={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.from=n.string():n.skipType(7&e)}return i},fromJSON:e=>({from:O(e.from)?String(e.from):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),t},fromPartial(e){var t;const n={from:""};return n.from=null!==(t=e.from)&&void 0!==t?t:"",n}},t.MsgPauseSendingAndReceivingMessagesResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUnpauseSendingAndReceivingMessages={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.from=n.string():n.skipType(7&e)}return i},fromJSON:e=>({from:O(e.from)?String(e.from):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),t},fromPartial(e){var t;const n={from:""};return n.from=null!==(t=e.from)&&void 0!==t?t:"",n}},t.MsgUnpauseSendingAndReceivingMessagesResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdateMaxMessageBodySize={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),"0"!==e.messageSize&&t.uint32(16).uint64(e.messageSize),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",messageSize:"0"};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.messageSize=_(n.uint64());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",messageSize:O(e.messageSize)?String(e.messageSize):"0"}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.messageSize&&(t.messageSize=e.messageSize),t},fromPartial(e){var t,n;const r={from:"",messageSize:"0"};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.messageSize=null!==(n=e.messageSize)&&void 0!==n?n:"0",r}},t.MsgUpdateMaxMessageBodySizeResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgSetMaxBurnAmountPerMessage={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.localToken&&t.uint32(18).string(e.localToken),""!==e.amount&&t.uint32(26).string(e.amount),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",localToken:"",amount:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.localToken=n.string();break;case 3:i.amount=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",localToken:O(e.localToken)?String(e.localToken):"",amount:O(e.amount)?String(e.amount):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.localToken&&(t.localToken=e.localToken),void 0!==e.amount&&(t.amount=e.amount),t},fromPartial(e){var t,n,r;const i={from:"",localToken:"",amount:""};return i.from=null!==(t=e.from)&&void 0!==t?t:"",i.localToken=null!==(n=e.localToken)&&void 0!==n?n:"",i.amount=null!==(r=e.amount)&&void 0!==r?r:"",i}},t.MsgSetMaxBurnAmountPerMessageResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgDepositForBurn={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.amount&&t.uint32(18).string(e.amount),0!==e.destinationDomain&&t.uint32(24).uint32(e.destinationDomain),0!==e.mintRecipient.length&&t.uint32(34).bytes(e.mintRecipient),""!==e.burnToken&&t.uint32(42).string(e.burnToken),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=o();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.amount=n.string();break;case 3:i.destinationDomain=n.uint32();break;case 4:i.mintRecipient=n.bytes();break;case 5:i.burnToken=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",amount:O(e.amount)?String(e.amount):"",destinationDomain:O(e.destinationDomain)?Number(e.destinationDomain):0,mintRecipient:O(e.mintRecipient)?v(e.mintRecipient):new Uint8Array,burnToken:O(e.burnToken)?String(e.burnToken):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.amount&&(t.amount=e.amount),void 0!==e.destinationDomain&&(t.destinationDomain=Math.round(e.destinationDomain)),void 0!==e.mintRecipient&&(t.mintRecipient=w(void 0!==e.mintRecipient?e.mintRecipient:new Uint8Array)),void 0!==e.burnToken&&(t.burnToken=e.burnToken),t},fromPartial(e){var t,n,r,i,s;const a=o();return a.from=null!==(t=e.from)&&void 0!==t?t:"",a.amount=null!==(n=e.amount)&&void 0!==n?n:"",a.destinationDomain=null!==(r=e.destinationDomain)&&void 0!==r?r:0,a.mintRecipient=null!==(i=e.mintRecipient)&&void 0!==i?i:new Uint8Array,a.burnToken=null!==(s=e.burnToken)&&void 0!==s?s:"",a}},t.MsgDepositForBurnResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.nonce&&t.uint32(8).uint64(e.nonce),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={nonce:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.nonce=_(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({nonce:O(e.nonce)?String(e.nonce):"0"}),toJSON(e){const t={};return void 0!==e.nonce&&(t.nonce=e.nonce),t},fromPartial(e){var t;const n={nonce:"0"};return n.nonce=null!==(t=e.nonce)&&void 0!==t?t:"0",n}},t.MsgDepositForBurnWithCaller={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),""!==e.amount&&t.uint32(18).string(e.amount),0!==e.destinationDomain&&t.uint32(24).uint32(e.destinationDomain),0!==e.mintRecipient.length&&t.uint32(34).bytes(e.mintRecipient),""!==e.burnToken&&t.uint32(42).string(e.burnToken),0!==e.destinationCaller.length&&t.uint32(50).bytes(e.destinationCaller),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=a();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.amount=n.string();break;case 3:i.destinationDomain=n.uint32();break;case 4:i.mintRecipient=n.bytes();break;case 5:i.burnToken=n.string();break;case 6:i.destinationCaller=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",amount:O(e.amount)?String(e.amount):"",destinationDomain:O(e.destinationDomain)?Number(e.destinationDomain):0,mintRecipient:O(e.mintRecipient)?v(e.mintRecipient):new Uint8Array,burnToken:O(e.burnToken)?String(e.burnToken):"",destinationCaller:O(e.destinationCaller)?v(e.destinationCaller):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.amount&&(t.amount=e.amount),void 0!==e.destinationDomain&&(t.destinationDomain=Math.round(e.destinationDomain)),void 0!==e.mintRecipient&&(t.mintRecipient=w(void 0!==e.mintRecipient?e.mintRecipient:new Uint8Array)),void 0!==e.burnToken&&(t.burnToken=e.burnToken),void 0!==e.destinationCaller&&(t.destinationCaller=w(void 0!==e.destinationCaller?e.destinationCaller:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s,o;const c=a();return c.from=null!==(t=e.from)&&void 0!==t?t:"",c.amount=null!==(n=e.amount)&&void 0!==n?n:"",c.destinationDomain=null!==(r=e.destinationDomain)&&void 0!==r?r:0,c.mintRecipient=null!==(i=e.mintRecipient)&&void 0!==i?i:new Uint8Array,c.burnToken=null!==(s=e.burnToken)&&void 0!==s?s:"",c.destinationCaller=null!==(o=e.destinationCaller)&&void 0!==o?o:new Uint8Array,c}},t.MsgDepositForBurnWithCallerResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.nonce&&t.uint32(8).uint64(e.nonce),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={nonce:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.nonce=_(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({nonce:O(e.nonce)?String(e.nonce):"0"}),toJSON(e){const t={};return void 0!==e.nonce&&(t.nonce=e.nonce),t},fromPartial(e){var t;const n={nonce:"0"};return n.nonce=null!==(t=e.nonce)&&void 0!==t?t:"0",n}},t.MsgReplaceDepositForBurn={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.originalMessage.length&&t.uint32(18).bytes(e.originalMessage),0!==e.originalAttestation.length&&t.uint32(26).bytes(e.originalAttestation),0!==e.newDestinationCaller.length&&t.uint32(34).bytes(e.newDestinationCaller),0!==e.newMintRecipient.length&&t.uint32(42).bytes(e.newMintRecipient),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=c();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.originalMessage=n.bytes();break;case 3:i.originalAttestation=n.bytes();break;case 4:i.newDestinationCaller=n.bytes();break;case 5:i.newMintRecipient=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",originalMessage:O(e.originalMessage)?v(e.originalMessage):new Uint8Array,originalAttestation:O(e.originalAttestation)?v(e.originalAttestation):new Uint8Array,newDestinationCaller:O(e.newDestinationCaller)?v(e.newDestinationCaller):new Uint8Array,newMintRecipient:O(e.newMintRecipient)?v(e.newMintRecipient):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.originalMessage&&(t.originalMessage=w(void 0!==e.originalMessage?e.originalMessage:new Uint8Array)),void 0!==e.originalAttestation&&(t.originalAttestation=w(void 0!==e.originalAttestation?e.originalAttestation:new Uint8Array)),void 0!==e.newDestinationCaller&&(t.newDestinationCaller=w(void 0!==e.newDestinationCaller?e.newDestinationCaller:new Uint8Array)),void 0!==e.newMintRecipient&&(t.newMintRecipient=w(void 0!==e.newMintRecipient?e.newMintRecipient:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s;const o=c();return o.from=null!==(t=e.from)&&void 0!==t?t:"",o.originalMessage=null!==(n=e.originalMessage)&&void 0!==n?n:new Uint8Array,o.originalAttestation=null!==(r=e.originalAttestation)&&void 0!==r?r:new Uint8Array,o.newDestinationCaller=null!==(i=e.newDestinationCaller)&&void 0!==i?i:new Uint8Array,o.newMintRecipient=null!==(s=e.newMintRecipient)&&void 0!==s?s:new Uint8Array,o}},t.MsgReplaceDepositForBurnResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgReceiveMessage={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.message.length&&t.uint32(18).bytes(e.message),0!==e.attestation.length&&t.uint32(26).bytes(e.attestation),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=d();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.message=n.bytes();break;case 3:i.attestation=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",message:O(e.message)?v(e.message):new Uint8Array,attestation:O(e.attestation)?v(e.attestation):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.message&&(t.message=w(void 0!==e.message?e.message:new Uint8Array)),void 0!==e.attestation&&(t.attestation=w(void 0!==e.attestation?e.attestation:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=d();return i.from=null!==(t=e.from)&&void 0!==t?t:"",i.message=null!==(n=e.message)&&void 0!==n?n:new Uint8Array,i.attestation=null!==(r=e.attestation)&&void 0!==r?r:new Uint8Array,i}},t.MsgReceiveMessageResponse={encode:(e,t=s.default.Writer.create())=>(!0===e.success&&t.uint32(8).bool(e.success),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={success:!1};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.success=n.bool():n.skipType(7&e)}return i},fromJSON:e=>({success:!!O(e.success)&&Boolean(e.success)}),toJSON(e){const t={};return void 0!==e.success&&(t.success=e.success),t},fromPartial(e){var t;const n={success:!1};return n.success=null!==(t=e.success)&&void 0!==t&&t,n}},t.MsgSendMessage={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.destinationDomain&&t.uint32(16).uint32(e.destinationDomain),0!==e.recipient.length&&t.uint32(26).bytes(e.recipient),0!==e.messageBody.length&&t.uint32(34).bytes(e.messageBody),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=u();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.destinationDomain=n.uint32();break;case 3:i.recipient=n.bytes();break;case 4:i.messageBody=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",destinationDomain:O(e.destinationDomain)?Number(e.destinationDomain):0,recipient:O(e.recipient)?v(e.recipient):new Uint8Array,messageBody:O(e.messageBody)?v(e.messageBody):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.destinationDomain&&(t.destinationDomain=Math.round(e.destinationDomain)),void 0!==e.recipient&&(t.recipient=w(void 0!==e.recipient?e.recipient:new Uint8Array)),void 0!==e.messageBody&&(t.messageBody=w(void 0!==e.messageBody?e.messageBody:new Uint8Array)),t},fromPartial(e){var t,n,r,i;const s=u();return s.from=null!==(t=e.from)&&void 0!==t?t:"",s.destinationDomain=null!==(n=e.destinationDomain)&&void 0!==n?n:0,s.recipient=null!==(r=e.recipient)&&void 0!==r?r:new Uint8Array,s.messageBody=null!==(i=e.messageBody)&&void 0!==i?i:new Uint8Array,s}},t.MsgSendMessageResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.nonce&&t.uint32(8).uint64(e.nonce),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={nonce:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.nonce=_(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({nonce:O(e.nonce)?String(e.nonce):"0"}),toJSON(e){const t={};return void 0!==e.nonce&&(t.nonce=e.nonce),t},fromPartial(e){var t;const n={nonce:"0"};return n.nonce=null!==(t=e.nonce)&&void 0!==t?t:"0",n}},t.MsgSendMessageWithCaller={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.destinationDomain&&t.uint32(16).uint32(e.destinationDomain),0!==e.recipient.length&&t.uint32(26).bytes(e.recipient),0!==e.messageBody.length&&t.uint32(34).bytes(e.messageBody),0!==e.destinationCaller.length&&t.uint32(42).bytes(e.destinationCaller),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=l();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.destinationDomain=n.uint32();break;case 3:i.recipient=n.bytes();break;case 4:i.messageBody=n.bytes();break;case 5:i.destinationCaller=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",destinationDomain:O(e.destinationDomain)?Number(e.destinationDomain):0,recipient:O(e.recipient)?v(e.recipient):new Uint8Array,messageBody:O(e.messageBody)?v(e.messageBody):new Uint8Array,destinationCaller:O(e.destinationCaller)?v(e.destinationCaller):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.destinationDomain&&(t.destinationDomain=Math.round(e.destinationDomain)),void 0!==e.recipient&&(t.recipient=w(void 0!==e.recipient?e.recipient:new Uint8Array)),void 0!==e.messageBody&&(t.messageBody=w(void 0!==e.messageBody?e.messageBody:new Uint8Array)),void 0!==e.destinationCaller&&(t.destinationCaller=w(void 0!==e.destinationCaller?e.destinationCaller:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s;const o=l();return o.from=null!==(t=e.from)&&void 0!==t?t:"",o.destinationDomain=null!==(n=e.destinationDomain)&&void 0!==n?n:0,o.recipient=null!==(r=e.recipient)&&void 0!==r?r:new Uint8Array,o.messageBody=null!==(i=e.messageBody)&&void 0!==i?i:new Uint8Array,o.destinationCaller=null!==(s=e.destinationCaller)&&void 0!==s?s:new Uint8Array,o}},t.MsgSendMessageWithCallerResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.nonce&&t.uint32(8).uint64(e.nonce),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={nonce:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.nonce=_(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({nonce:O(e.nonce)?String(e.nonce):"0"}),toJSON(e){const t={};return void 0!==e.nonce&&(t.nonce=e.nonce),t},fromPartial(e){var t;const n={nonce:"0"};return n.nonce=null!==(t=e.nonce)&&void 0!==t?t:"0",n}},t.MsgReplaceMessage={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.originalMessage.length&&t.uint32(18).bytes(e.originalMessage),0!==e.originalAttestation.length&&t.uint32(26).bytes(e.originalAttestation),0!==e.newMessageBody.length&&t.uint32(34).bytes(e.newMessageBody),0!==e.newDestinationCaller.length&&t.uint32(42).bytes(e.newDestinationCaller),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=h();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.originalMessage=n.bytes();break;case 3:i.originalAttestation=n.bytes();break;case 4:i.newMessageBody=n.bytes();break;case 5:i.newDestinationCaller=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",originalMessage:O(e.originalMessage)?v(e.originalMessage):new Uint8Array,originalAttestation:O(e.originalAttestation)?v(e.originalAttestation):new Uint8Array,newMessageBody:O(e.newMessageBody)?v(e.newMessageBody):new Uint8Array,newDestinationCaller:O(e.newDestinationCaller)?v(e.newDestinationCaller):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.originalMessage&&(t.originalMessage=w(void 0!==e.originalMessage?e.originalMessage:new Uint8Array)),void 0!==e.originalAttestation&&(t.originalAttestation=w(void 0!==e.originalAttestation?e.originalAttestation:new Uint8Array)),void 0!==e.newMessageBody&&(t.newMessageBody=w(void 0!==e.newMessageBody?e.newMessageBody:new Uint8Array)),void 0!==e.newDestinationCaller&&(t.newDestinationCaller=w(void 0!==e.newDestinationCaller?e.newDestinationCaller:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s;const o=h();return o.from=null!==(t=e.from)&&void 0!==t?t:"",o.originalMessage=null!==(n=e.originalMessage)&&void 0!==n?n:new Uint8Array,o.originalAttestation=null!==(r=e.originalAttestation)&&void 0!==r?r:new Uint8Array,o.newMessageBody=null!==(i=e.newMessageBody)&&void 0!==i?i:new Uint8Array,o.newDestinationCaller=null!==(s=e.newDestinationCaller)&&void 0!==s?s:new Uint8Array,o}},t.MsgReplaceMessageResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdateSignatureThreshold={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.amount&&t.uint32(16).uint32(e.amount),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",amount:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.amount=n.uint32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",amount:O(e.amount)?Number(e.amount):0}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.amount&&(t.amount=Math.round(e.amount)),t},fromPartial(e){var t,n;const r={from:"",amount:0};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.amount=null!==(n=e.amount)&&void 0!==n?n:0,r}},t.MsgUpdateSignatureThresholdResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgLinkTokenPair={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.remoteDomain&&t.uint32(16).uint32(e.remoteDomain),0!==e.remoteToken.length&&t.uint32(26).bytes(e.remoteToken),""!==e.localToken&&t.uint32(34).string(e.localToken),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=p();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.remoteDomain=n.uint32();break;case 3:i.remoteToken=n.bytes();break;case 4:i.localToken=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",remoteDomain:O(e.remoteDomain)?Number(e.remoteDomain):0,remoteToken:O(e.remoteToken)?v(e.remoteToken):new Uint8Array,localToken:O(e.localToken)?String(e.localToken):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.remoteDomain&&(t.remoteDomain=Math.round(e.remoteDomain)),void 0!==e.remoteToken&&(t.remoteToken=w(void 0!==e.remoteToken?e.remoteToken:new Uint8Array)),void 0!==e.localToken&&(t.localToken=e.localToken),t},fromPartial(e){var t,n,r,i;const s=p();return s.from=null!==(t=e.from)&&void 0!==t?t:"",s.remoteDomain=null!==(n=e.remoteDomain)&&void 0!==n?n:0,s.remoteToken=null!==(r=e.remoteToken)&&void 0!==r?r:new Uint8Array,s.localToken=null!==(i=e.localToken)&&void 0!==i?i:"",s}},t.MsgLinkTokenPairResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUnlinkTokenPair={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.remoteDomain&&t.uint32(16).uint32(e.remoteDomain),0!==e.remoteToken.length&&t.uint32(26).bytes(e.remoteToken),""!==e.localToken&&t.uint32(34).string(e.localToken),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=f();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.remoteDomain=n.uint32();break;case 3:i.remoteToken=n.bytes();break;case 4:i.localToken=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",remoteDomain:O(e.remoteDomain)?Number(e.remoteDomain):0,remoteToken:O(e.remoteToken)?v(e.remoteToken):new Uint8Array,localToken:O(e.localToken)?String(e.localToken):""}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.remoteDomain&&(t.remoteDomain=Math.round(e.remoteDomain)),void 0!==e.remoteToken&&(t.remoteToken=w(void 0!==e.remoteToken?e.remoteToken:new Uint8Array)),void 0!==e.localToken&&(t.localToken=e.localToken),t},fromPartial(e){var t,n,r,i;const s=f();return s.from=null!==(t=e.from)&&void 0!==t?t:"",s.remoteDomain=null!==(n=e.remoteDomain)&&void 0!==n?n:0,s.remoteToken=null!==(r=e.remoteToken)&&void 0!==r?r:new Uint8Array,s.localToken=null!==(i=e.localToken)&&void 0!==i?i:"",s}},t.MsgUnlinkTokenPairResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgAddRemoteTokenMessenger={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.domainId&&t.uint32(16).uint32(e.domainId),0!==e.address.length&&t.uint32(26).bytes(e.address),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=g();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.domainId=n.uint32();break;case 3:i.address=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",domainId:O(e.domainId)?Number(e.domainId):0,address:O(e.address)?v(e.address):new Uint8Array}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.domainId&&(t.domainId=Math.round(e.domainId)),void 0!==e.address&&(t.address=w(void 0!==e.address?e.address:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=g();return i.from=null!==(t=e.from)&&void 0!==t?t:"",i.domainId=null!==(n=e.domainId)&&void 0!==n?n:0,i.address=null!==(r=e.address)&&void 0!==r?r:new Uint8Array,i}},t.MsgAddRemoteTokenMessengerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgRemoveRemoteTokenMessenger={encode:(e,t=s.default.Writer.create())=>(""!==e.from&&t.uint32(10).string(e.from),0!==e.domainId&&t.uint32(16).uint32(e.domainId),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={from:"",domainId:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.from=n.string();break;case 2:i.domainId=n.uint32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({from:O(e.from)?String(e.from):"",domainId:O(e.domainId)?Number(e.domainId):0}),toJSON(e){const t={};return void 0!==e.from&&(t.from=e.from),void 0!==e.domainId&&(t.domainId=Math.round(e.domainId)),t},fromPartial(e){var t,n;const r={from:"",domainId:0};return r.from=null!==(t=e.from)&&void 0!==t?t:"",r.domainId=null!==(n=e.domainId)&&void 0!==n?n:0,r}},t.MsgRemoveRemoteTokenMessengerResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})};var m=(()=>{if(void 0!==m)return m;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const y=m.atob||(e=>m.Buffer.from(e,"base64").toString("binary"));function v(e){const t=y(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const b=m.btoa||(e=>m.Buffer.from(e,"binary").toString("base64"));function w(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return b(t.join(""))}function _(e){return e.toString()}function O(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},48976:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivKey=t.PubKey=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(){return{key:new Uint8Array}}function a(){return{key:new Uint8Array}}t.protobufPackage="cosmos.crypto.secp256k1",t.PubKey={encode:(e,t=s.default.Writer.create())=>(0!==e.key.length&&t.uint32(10).bytes(e.key),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=o();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.key=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({key:p(e.key)?u(e.key):new Uint8Array}),toJSON(e){const t={};return void 0!==e.key&&(t.key=h(void 0!==e.key?e.key:new Uint8Array)),t},fromPartial(e){var t;const n=o();return n.key=null!==(t=e.key)&&void 0!==t?t:new Uint8Array,n}},t.PrivKey={encode:(e,t=s.default.Writer.create())=>(0!==e.key.length&&t.uint32(10).bytes(e.key),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=a();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.key=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({key:p(e.key)?u(e.key):new Uint8Array}),toJSON(e){const t={};return void 0!==e.key&&(t.key=h(void 0!==e.key?e.key:new Uint8Array)),t},fromPartial(e){var t;const n=a();return n.key=null!==(t=e.key)&&void 0!==t?t:new Uint8Array,n}};var c=(()=>{if(void 0!==c)return c;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const d=c.atob||(e=>c.Buffer.from(e,"base64").toString("binary"));function u(e){const t=d(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const l=c.btoa||(e=>c.Buffer.from(e,"binary").toString("base64"));function h(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return l(t.join(""))}function p(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},86404:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionOptionsWeb3Tx=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(){return{typedDataChainId:"0",feePayer:"",feePayerSig:new Uint8Array}}t.protobufPackage="ethermint.types.v1",t.ExtensionOptionsWeb3Tx={encode:(e,t=s.default.Writer.create())=>("0"!==e.typedDataChainId&&t.uint32(8).uint64(e.typedDataChainId),""!==e.feePayer&&t.uint32(18).string(e.feePayer),0!==e.feePayerSig.length&&t.uint32(26).bytes(e.feePayerSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=o();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.typedDataChainId=n.uint64().toString();break;case 2:i.feePayer=n.string();break;case 3:i.feePayerSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({typedDataChainId:l(e.typedDataChainId)?String(e.typedDataChainId):"0",feePayer:l(e.feePayer)?String(e.feePayer):"",feePayerSig:l(e.feePayerSig)?d(e.feePayerSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.typedDataChainId&&(t.typedDataChainId=e.typedDataChainId),void 0!==e.feePayer&&(t.feePayer=e.feePayer),void 0!==e.feePayerSig&&(t.feePayerSig=function(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return u(t.join(""))}(void 0!==e.feePayerSig?e.feePayerSig:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=o();return i.typedDataChainId=null!==(t=e.typedDataChainId)&&void 0!==t?t:"0",i.feePayer=null!==(n=e.feePayer)&&void 0!==n?n:"",i.feePayerSig=null!==(r=e.feePayerSig)&&void 0!==r?r:new Uint8Array,i}};var a=(()=>{if(void 0!==a)return a;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const c=a.atob||(e=>a.Buffer.from(e,"base64").toString("binary"));function d(e){const t=c(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const u=a.btoa||(e=>a.Buffer.from(e,"binary").toString("base64"));function l(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},15451:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgSetPausedStateResponse=t.MsgSetPausedState=t.MsgClaimYieldResponse=t.MsgClaimYield=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(e){return null!=e}t.protobufPackage="noble.dollar.v1",t.MsgClaimYield={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.signer=n.string():n.skipType(7&e)}return i},fromJSON:e=>({signer:o(e.signer)?String(e.signer):""}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),t},fromPartial(e){var t;const n={signer:""};return n.signer=null!==(t=e.signer)&&void 0!==t?t:"",n}},t.MsgClaimYieldResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgSetPausedState={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),!0===e.paused&&t.uint32(16).bool(e.paused),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",paused:!1};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:i.paused=n.bool();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:o(e.signer)?String(e.signer):"",paused:!!o(e.paused)&&Boolean(e.paused)}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),void 0!==e.paused&&(t.paused=e.paused),t},fromPartial(e){var t,n;const r={signer:"",paused:!1};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.paused=null!==(n=e.paused)&&void 0!==n&&n,r}},t.MsgSetPausedStateResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},64429:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.algorithmToJSON=t.algorithmFromJSON=t.Algorithm=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));var o;t.protobufPackage="noble.swap.v1",function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.STABLESWAP=1]="STABLESWAP",e[e.PERFECTPRICE=2]="PERFECTPRICE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(o=t.Algorithm||(t.Algorithm={})),t.algorithmFromJSON=function(e){switch(e){case 0:case"UNSPECIFIED":return o.UNSPECIFIED;case 1:case"STABLESWAP":return o.STABLESWAP;case 2:case"PERFECTPRICE":return o.PERFECTPRICE;default:return o.UNRECOGNIZED}},t.algorithmToJSON=function(e){switch(e){case o.UNSPECIFIED:return"UNSPECIFIED";case o.STABLESWAP:return"STABLESWAP";case o.PERFECTPRICE:return"PERFECTPRICE";default:return"UNKNOWN"}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},75090:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Swap=t.Route=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737)),o=n(58113);function a(e){return e.toString()}function c(e){return null!=e}t.protobufPackage="noble.swap.v1",t.Route={encode:(e,t=s.default.Writer.create())=>("0"!==e.poolId&&t.uint32(8).uint64(e.poolId),""!==e.denomTo&&t.uint32(18).string(e.denomTo),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={poolId:"0",denomTo:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.poolId=a(n.uint64());break;case 2:i.denomTo=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({poolId:c(e.poolId)?String(e.poolId):"0",denomTo:c(e.denomTo)?String(e.denomTo):""}),toJSON(e){const t={};return void 0!==e.poolId&&(t.poolId=e.poolId),void 0!==e.denomTo&&(t.denomTo=e.denomTo),t},fromPartial(e){var t,n;const r={poolId:"0",denomTo:""};return r.poolId=null!==(t=e.poolId)&&void 0!==t?t:"0",r.denomTo=null!==(n=e.denomTo)&&void 0!==n?n:"",r}},t.Swap={encode(e,t=s.default.Writer.create()){"0"!==e.poolId&&t.uint32(8).uint64(e.poolId),void 0!==e.in&&o.Coin.encode(e.in,t.uint32(18).fork()).ldelim(),void 0!==e.out&&o.Coin.encode(e.out,t.uint32(26).fork()).ldelim();for(const n of e.fees)o.Coin.encode(n,t.uint32(34).fork()).ldelim();return t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={poolId:"0",in:void 0,out:void 0,fees:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.poolId=a(n.uint64());break;case 2:i.in=o.Coin.decode(n,n.uint32());break;case 3:i.out=o.Coin.decode(n,n.uint32());break;case 4:i.fees.push(o.Coin.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({poolId:c(e.poolId)?String(e.poolId):"0",in:c(e.in)?o.Coin.fromJSON(e.in):void 0,out:c(e.out)?o.Coin.fromJSON(e.out):void 0,fees:Array.isArray(null==e?void 0:e.fees)?e.fees.map((e=>o.Coin.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.poolId&&(t.poolId=e.poolId),void 0!==e.in&&(t.in=e.in?o.Coin.toJSON(e.in):void 0),void 0!==e.out&&(t.out=e.out?o.Coin.toJSON(e.out):void 0),e.fees?t.fees=e.fees.map((e=>e?o.Coin.toJSON(e):void 0)):t.fees=[],t},fromPartial(e){var t,n;const r={poolId:"0",in:void 0,out:void 0,fees:[]};return r.poolId=null!==(t=e.poolId)&&void 0!==t?t:"0",r.in=void 0!==e.in&&null!==e.in?o.Coin.fromPartial(e.in):void 0,r.out=void 0!==e.out&&null!==e.out?o.Coin.fromPartial(e.out):void 0,r.fees=(null===(n=e.fees)||void 0===n?void 0:n.map((e=>o.Coin.fromPartial(e))))||[],r}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},33600:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgUnpauseByPoolIdsResponse=t.MsgUnpauseByPoolIds=t.MsgUnpauseByAlgorithmResponse=t.MsgUnpauseByAlgorithm=t.MsgPauseByPoolIdsResponse=t.MsgPauseByPoolIds=t.MsgPauseByAlgorithmResponse=t.MsgPauseByAlgorithm=t.MsgSwapResponse=t.MsgSwap=t.MsgWithdrawRewardsResponse=t.MsgWithdrawRewards=t.MsgWithdrawProtocolFeesResponse=t.MsgWithdrawProtocolFees=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737)),o=n(64429),a=n(58113),c=n(75090);function d(e){return e.toString()}function u(e){return null!=e}t.protobufPackage="noble.swap.v1",t.MsgWithdrawProtocolFees={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),""!==e.to&&t.uint32(18).string(e.to),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",to:""};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:i.to=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",to:u(e.to)?String(e.to):""}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),void 0!==e.to&&(t.to=e.to),t},fromPartial(e){var t,n;const r={signer:"",to:""};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.to=null!==(n=e.to)&&void 0!==n?n:"",r}},t.MsgWithdrawProtocolFeesResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgWithdrawRewards={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:""};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.signer=n.string():n.skipType(7&e)}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):""}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),t},fromPartial(e){var t;const n={signer:""};return n.signer=null!==(t=e.signer)&&void 0!==t?t:"",n}},t.MsgWithdrawRewardsResponse={encode(e,t=s.default.Writer.create()){for(const n of e.rewards)a.Coin.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={rewards:[]};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.rewards.push(a.Coin.decode(n,n.uint32())):n.skipType(7&e)}return i},fromJSON:e=>({rewards:Array.isArray(null==e?void 0:e.rewards)?e.rewards.map((e=>a.Coin.fromJSON(e))):[]}),toJSON(e){const t={};return e.rewards?t.rewards=e.rewards.map((e=>e?a.Coin.toJSON(e):void 0)):t.rewards=[],t},fromPartial(e){var t;const n={rewards:[]};return n.rewards=(null===(t=e.rewards)||void 0===t?void 0:t.map((e=>a.Coin.fromPartial(e))))||[],n}},t.MsgSwap={encode(e,t=s.default.Writer.create()){""!==e.signer&&t.uint32(10).string(e.signer),void 0!==e.amount&&a.Coin.encode(e.amount,t.uint32(18).fork()).ldelim();for(const n of e.routes)c.Route.encode(n,t.uint32(26).fork()).ldelim();return void 0!==e.min&&a.Coin.encode(e.min,t.uint32(34).fork()).ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",amount:void 0,routes:[],min:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:i.amount=a.Coin.decode(n,n.uint32());break;case 3:i.routes.push(c.Route.decode(n,n.uint32()));break;case 4:i.min=a.Coin.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",amount:u(e.amount)?a.Coin.fromJSON(e.amount):void 0,routes:Array.isArray(null==e?void 0:e.routes)?e.routes.map((e=>c.Route.fromJSON(e))):[],min:u(e.min)?a.Coin.fromJSON(e.min):void 0}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),void 0!==e.amount&&(t.amount=e.amount?a.Coin.toJSON(e.amount):void 0),e.routes?t.routes=e.routes.map((e=>e?c.Route.toJSON(e):void 0)):t.routes=[],void 0!==e.min&&(t.min=e.min?a.Coin.toJSON(e.min):void 0),t},fromPartial(e){var t,n;const r={signer:"",amount:void 0,routes:[],min:void 0};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.amount=void 0!==e.amount&&null!==e.amount?a.Coin.fromPartial(e.amount):void 0,r.routes=(null===(n=e.routes)||void 0===n?void 0:n.map((e=>c.Route.fromPartial(e))))||[],r.min=void 0!==e.min&&null!==e.min?a.Coin.fromPartial(e.min):void 0,r}},t.MsgSwapResponse={encode(e,t=s.default.Writer.create()){void 0!==e.result&&a.Coin.encode(e.result,t.uint32(10).fork()).ldelim();for(const n of e.swaps)c.Swap.encode(n,t.uint32(18).fork()).ldelim();return t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={result:void 0,swaps:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.result=a.Coin.decode(n,n.uint32());break;case 2:i.swaps.push(c.Swap.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({result:u(e.result)?a.Coin.fromJSON(e.result):void 0,swaps:Array.isArray(null==e?void 0:e.swaps)?e.swaps.map((e=>c.Swap.fromJSON(e))):[]}),toJSON(e){const t={};return void 0!==e.result&&(t.result=e.result?a.Coin.toJSON(e.result):void 0),e.swaps?t.swaps=e.swaps.map((e=>e?c.Swap.toJSON(e):void 0)):t.swaps=[],t},fromPartial(e){var t;const n={result:void 0,swaps:[]};return n.result=void 0!==e.result&&null!==e.result?a.Coin.fromPartial(e.result):void 0,n.swaps=(null===(t=e.swaps)||void 0===t?void 0:t.map((e=>c.Swap.fromPartial(e))))||[],n}},t.MsgPauseByAlgorithm={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),0!==e.algorithm&&t.uint32(16).int32(e.algorithm),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",algorithm:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:i.algorithm=n.int32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",algorithm:u(e.algorithm)?(0,o.algorithmFromJSON)(e.algorithm):0}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),void 0!==e.algorithm&&(t.algorithm=(0,o.algorithmToJSON)(e.algorithm)),t},fromPartial(e){var t,n;const r={signer:"",algorithm:0};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.algorithm=null!==(n=e.algorithm)&&void 0!==n?n:0,r}},t.MsgPauseByAlgorithmResponse={encode(e,t=s.default.Writer.create()){t.uint32(10).fork();for(const n of e.pausedPools)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={pausedPools:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.pausedPools.push(d(n.uint64()))}else i.pausedPools.push(d(n.uint64()));else n.skipType(7&e)}return i},fromJSON:e=>({pausedPools:Array.isArray(null==e?void 0:e.pausedPools)?e.pausedPools.map((e=>String(e))):[]}),toJSON(e){const t={};return e.pausedPools?t.pausedPools=e.pausedPools.map((e=>e)):t.pausedPools=[],t},fromPartial(e){var t;const n={pausedPools:[]};return n.pausedPools=(null===(t=e.pausedPools)||void 0===t?void 0:t.map((e=>e)))||[],n}},t.MsgPauseByPoolIds={encode(e,t=s.default.Writer.create()){""!==e.signer&&t.uint32(10).string(e.signer),t.uint32(18).fork();for(const n of e.poolIds)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",poolIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.poolIds.push(d(n.uint64()))}else i.poolIds.push(d(n.uint64()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",poolIds:Array.isArray(null==e?void 0:e.poolIds)?e.poolIds.map((e=>String(e))):[]}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),e.poolIds?t.poolIds=e.poolIds.map((e=>e)):t.poolIds=[],t},fromPartial(e){var t,n;const r={signer:"",poolIds:[]};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.poolIds=(null===(n=e.poolIds)||void 0===n?void 0:n.map((e=>e)))||[],r}},t.MsgPauseByPoolIdsResponse={encode(e,t=s.default.Writer.create()){t.uint32(10).fork();for(const n of e.pausedPools)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={pausedPools:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.pausedPools.push(d(n.uint64()))}else i.pausedPools.push(d(n.uint64()));else n.skipType(7&e)}return i},fromJSON:e=>({pausedPools:Array.isArray(null==e?void 0:e.pausedPools)?e.pausedPools.map((e=>String(e))):[]}),toJSON(e){const t={};return e.pausedPools?t.pausedPools=e.pausedPools.map((e=>e)):t.pausedPools=[],t},fromPartial(e){var t;const n={pausedPools:[]};return n.pausedPools=(null===(t=e.pausedPools)||void 0===t?void 0:t.map((e=>e)))||[],n}},t.MsgUnpauseByAlgorithm={encode:(e,t=s.default.Writer.create())=>(""!==e.signer&&t.uint32(10).string(e.signer),0!==e.algorithm&&t.uint32(16).int32(e.algorithm),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",algorithm:0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:i.algorithm=n.int32();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",algorithm:u(e.algorithm)?(0,o.algorithmFromJSON)(e.algorithm):0}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),void 0!==e.algorithm&&(t.algorithm=(0,o.algorithmToJSON)(e.algorithm)),t},fromPartial(e){var t,n;const r={signer:"",algorithm:0};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.algorithm=null!==(n=e.algorithm)&&void 0!==n?n:0,r}},t.MsgUnpauseByAlgorithmResponse={encode(e,t=s.default.Writer.create()){t.uint32(10).fork();for(const n of e.unpausedPools)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={unpausedPools:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.unpausedPools.push(d(n.uint64()))}else i.unpausedPools.push(d(n.uint64()));else n.skipType(7&e)}return i},fromJSON:e=>({unpausedPools:Array.isArray(null==e?void 0:e.unpausedPools)?e.unpausedPools.map((e=>String(e))):[]}),toJSON(e){const t={};return e.unpausedPools?t.unpausedPools=e.unpausedPools.map((e=>e)):t.unpausedPools=[],t},fromPartial(e){var t;const n={unpausedPools:[]};return n.unpausedPools=(null===(t=e.unpausedPools)||void 0===t?void 0:t.map((e=>e)))||[],n}},t.MsgUnpauseByPoolIds={encode(e,t=s.default.Writer.create()){""!==e.signer&&t.uint32(10).string(e.signer),t.uint32(18).fork();for(const n of e.poolIds)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={signer:"",poolIds:[]};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.signer=n.string();break;case 2:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.poolIds.push(d(n.uint64()))}else i.poolIds.push(d(n.uint64()));break;default:n.skipType(7&e)}}return i},fromJSON:e=>({signer:u(e.signer)?String(e.signer):"",poolIds:Array.isArray(null==e?void 0:e.poolIds)?e.poolIds.map((e=>String(e))):[]}),toJSON(e){const t={};return void 0!==e.signer&&(t.signer=e.signer),e.poolIds?t.poolIds=e.poolIds.map((e=>e)):t.poolIds=[],t},fromPartial(e){var t,n;const r={signer:"",poolIds:[]};return r.signer=null!==(t=e.signer)&&void 0!==t?t:"",r.poolIds=(null===(n=e.poolIds)||void 0===n?void 0:n.map((e=>e)))||[],r}},t.MsgUnpauseByPoolIdsResponse={encode(e,t=s.default.Writer.create()){t.uint32(10).fork();for(const n of e.unpausedPools)t.uint64(n);return t.ldelim(),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={unpausedPools:[]};for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.unpausedPools.push(d(n.uint64()))}else i.unpausedPools.push(d(n.uint64()));else n.skipType(7&e)}return i},fromJSON:e=>({unpausedPools:Array.isArray(null==e?void 0:e.unpausedPools)?e.unpausedPools.map((e=>String(e))):[]}),toJSON(e){const t={};return e.unpausedPools?t.unpausedPools=e.unpausedPools.map((e=>e)):t.unpausedPools=[],t},fromPartial(e){var t;const n={unpausedPools:[]};return n.unpausedPools=(null===(t=e.unpausedPools)||void 0===t?void 0:t.map((e=>e)))||[],n}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},180:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MsgUpdateParamsResponse=t.MsgUpdateParams=t.MsgClearAdminResponse=t.MsgClearAdmin=t.MsgUpdateAdminResponse=t.MsgUpdateAdmin=t.MsgMigrateContractResponse=t.MsgMigrateContract=t.MsgExecuteContractResponse=t.MsgExecuteContract=t.MsgInstantiateContractResponse=t.MsgInstantiateContract=t.MsgStoreCodeResponse=t.MsgStoreCode=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737)),o=n(58113),a=n(53818);function c(){return{sender:new Uint8Array,wasmByteCode:new Uint8Array,source:"",builder:""}}function d(){return{sender:new Uint8Array,callbackCodeHash:"",codeId:"0",label:"",initMsg:new Uint8Array,initFunds:[],callbackSig:new Uint8Array,admin:""}}function u(){return{address:"",data:new Uint8Array}}function l(){return{sender:new Uint8Array,contract:new Uint8Array,msg:new Uint8Array,callbackCodeHash:"",sentFunds:[],callbackSig:new Uint8Array}}function h(){return{data:new Uint8Array}}function p(){return{sender:"",contract:"",codeId:"0",msg:new Uint8Array,callbackSig:new Uint8Array,callbackCodeHash:""}}function f(){return{data:new Uint8Array}}function g(){return{sender:"",newAdmin:"",contract:"",callbackSig:new Uint8Array}}function m(){return{sender:"",contract:"",callbackSig:new Uint8Array}}t.protobufPackage="secret.compute.v1beta1",t.MsgStoreCode={encode:(e,t=s.default.Writer.create())=>(0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.wasmByteCode.length&&t.uint32(18).bytes(e.wasmByteCode),""!==e.source&&t.uint32(26).string(e.source),""!==e.builder&&t.uint32(34).string(e.builder),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=c();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.wasmByteCode=n.bytes();break;case 3:i.source=n.string();break;case 4:i.builder=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?b(e.sender):new Uint8Array,wasmByteCode:C(e.wasmByteCode)?b(e.wasmByteCode):new Uint8Array,source:C(e.source)?String(e.source):"",builder:C(e.builder)?String(e.builder):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=_(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.wasmByteCode&&(t.wasmByteCode=_(void 0!==e.wasmByteCode?e.wasmByteCode:new Uint8Array)),void 0!==e.source&&(t.source=e.source),void 0!==e.builder&&(t.builder=e.builder),t},fromPartial(e){var t,n,r,i;const s=c();return s.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,s.wasmByteCode=null!==(n=e.wasmByteCode)&&void 0!==n?n:new Uint8Array,s.source=null!==(r=e.source)&&void 0!==r?r:"",s.builder=null!==(i=e.builder)&&void 0!==i?i:"",s}},t.MsgStoreCodeResponse={encode:(e,t=s.default.Writer.create())=>("0"!==e.codeId&&t.uint32(8).uint64(e.codeId),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={codeId:"0"};for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.codeId=O(n.uint64()):n.skipType(7&e)}return i},fromJSON:e=>({codeId:C(e.codeId)?String(e.codeId):"0"}),toJSON(e){const t={};return void 0!==e.codeId&&(t.codeId=e.codeId),t},fromPartial(e){var t;const n={codeId:"0"};return n.codeId=null!==(t=e.codeId)&&void 0!==t?t:"0",n}},t.MsgInstantiateContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),""!==e.callbackCodeHash&&t.uint32(18).string(e.callbackCodeHash),"0"!==e.codeId&&t.uint32(24).uint64(e.codeId),""!==e.label&&t.uint32(34).string(e.label),0!==e.initMsg.length&&t.uint32(42).bytes(e.initMsg);for(const n of e.initFunds)o.Coin.encode(n,t.uint32(50).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),""!==e.admin&&t.uint32(66).string(e.admin),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=d();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.callbackCodeHash=n.string();break;case 3:i.codeId=O(n.uint64());break;case 4:i.label=n.string();break;case 5:i.initMsg=n.bytes();break;case 6:i.initFunds.push(o.Coin.decode(n,n.uint32()));break;case 7:i.callbackSig=n.bytes();break;case 8:i.admin=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?b(e.sender):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):"",codeId:C(e.codeId)?String(e.codeId):"0",label:C(e.label)?String(e.label):"",initMsg:C(e.initMsg)?b(e.initMsg):new Uint8Array,initFunds:Array.isArray(null==e?void 0:e.initFunds)?e.initFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:C(e.callbackSig)?b(e.callbackSig):new Uint8Array,admin:C(e.admin)?String(e.admin):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=_(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),void 0!==e.codeId&&(t.codeId=e.codeId),void 0!==e.label&&(t.label=e.label),void 0!==e.initMsg&&(t.initMsg=_(void 0!==e.initMsg?e.initMsg:new Uint8Array)),e.initFunds?t.initFunds=e.initFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.initFunds=[],void 0!==e.callbackSig&&(t.callbackSig=_(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),void 0!==e.admin&&(t.admin=e.admin),t},fromPartial(e){var t,n,r,i,s,a,c,u;const l=d();return l.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,l.callbackCodeHash=null!==(n=e.callbackCodeHash)&&void 0!==n?n:"",l.codeId=null!==(r=e.codeId)&&void 0!==r?r:"0",l.label=null!==(i=e.label)&&void 0!==i?i:"",l.initMsg=null!==(s=e.initMsg)&&void 0!==s?s:new Uint8Array,l.initFunds=(null===(a=e.initFunds)||void 0===a?void 0:a.map((e=>o.Coin.fromPartial(e))))||[],l.callbackSig=null!==(c=e.callbackSig)&&void 0!==c?c:new Uint8Array,l.admin=null!==(u=e.admin)&&void 0!==u?u:"",l}},t.MsgInstantiateContractResponse={encode:(e,t=s.default.Writer.create())=>(""!==e.address&&t.uint32(10).string(e.address),0!==e.data.length&&t.uint32(18).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=u();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.address=n.string();break;case 2:i.data=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({address:C(e.address)?String(e.address):"",data:C(e.data)?b(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.address&&(t.address=e.address),void 0!==e.data&&(t.data=_(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t,n;const r=u();return r.address=null!==(t=e.address)&&void 0!==t?t:"",r.data=null!==(n=e.data)&&void 0!==n?n:new Uint8Array,r}},t.MsgExecuteContract={encode(e,t=s.default.Writer.create()){0!==e.sender.length&&t.uint32(10).bytes(e.sender),0!==e.contract.length&&t.uint32(18).bytes(e.contract),0!==e.msg.length&&t.uint32(26).bytes(e.msg),""!==e.callbackCodeHash&&t.uint32(34).string(e.callbackCodeHash);for(const n of e.sentFunds)o.Coin.encode(n,t.uint32(42).fork()).ldelim();return 0!==e.callbackSig.length&&t.uint32(50).bytes(e.callbackSig),t},decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=l();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.bytes();break;case 2:i.contract=n.bytes();break;case 3:i.msg=n.bytes();break;case 4:i.callbackCodeHash=n.string();break;case 5:i.sentFunds.push(o.Coin.decode(n,n.uint32()));break;case 6:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?b(e.sender):new Uint8Array,contract:C(e.contract)?b(e.contract):new Uint8Array,msg:C(e.msg)?b(e.msg):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):"",sentFunds:Array.isArray(null==e?void 0:e.sentFunds)?e.sentFunds.map((e=>o.Coin.fromJSON(e))):[],callbackSig:C(e.callbackSig)?b(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=_(void 0!==e.sender?e.sender:new Uint8Array)),void 0!==e.contract&&(t.contract=_(void 0!==e.contract?e.contract:new Uint8Array)),void 0!==e.msg&&(t.msg=_(void 0!==e.msg?e.msg:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),e.sentFunds?t.sentFunds=e.sentFunds.map((e=>e?o.Coin.toJSON(e):void 0)):t.sentFunds=[],void 0!==e.callbackSig&&(t.callbackSig=_(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i,s,a;const c=l();return c.sender=null!==(t=e.sender)&&void 0!==t?t:new Uint8Array,c.contract=null!==(n=e.contract)&&void 0!==n?n:new Uint8Array,c.msg=null!==(r=e.msg)&&void 0!==r?r:new Uint8Array,c.callbackCodeHash=null!==(i=e.callbackCodeHash)&&void 0!==i?i:"",c.sentFunds=(null===(s=e.sentFunds)||void 0===s?void 0:s.map((e=>o.Coin.fromPartial(e))))||[],c.callbackSig=null!==(a=e.callbackSig)&&void 0!==a?a:new Uint8Array,c}},t.MsgExecuteContractResponse={encode:(e,t=s.default.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=h();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.data=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({data:C(e.data)?b(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.data&&(t.data=_(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const n=h();return n.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,n}},t.MsgMigrateContract={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.contract&&t.uint32(18).string(e.contract),"0"!==e.codeId&&t.uint32(24).uint64(e.codeId),0!==e.msg.length&&t.uint32(34).bytes(e.msg),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),""!==e.callbackCodeHash&&t.uint32(66).string(e.callbackCodeHash),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=p();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 2:i.contract=n.string();break;case 3:i.codeId=O(n.uint64());break;case 4:i.msg=n.bytes();break;case 7:i.callbackSig=n.bytes();break;case 8:i.callbackCodeHash=n.string();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",contract:C(e.contract)?String(e.contract):"",codeId:C(e.codeId)?String(e.codeId):"0",msg:C(e.msg)?b(e.msg):new Uint8Array,callbackSig:C(e.callbackSig)?b(e.callbackSig):new Uint8Array,callbackCodeHash:C(e.callbackCodeHash)?String(e.callbackCodeHash):""}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.codeId&&(t.codeId=e.codeId),void 0!==e.msg&&(t.msg=_(void 0!==e.msg?e.msg:new Uint8Array)),void 0!==e.callbackSig&&(t.callbackSig=_(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),void 0!==e.callbackCodeHash&&(t.callbackCodeHash=e.callbackCodeHash),t},fromPartial(e){var t,n,r,i,s,o;const a=p();return a.sender=null!==(t=e.sender)&&void 0!==t?t:"",a.contract=null!==(n=e.contract)&&void 0!==n?n:"",a.codeId=null!==(r=e.codeId)&&void 0!==r?r:"0",a.msg=null!==(i=e.msg)&&void 0!==i?i:new Uint8Array,a.callbackSig=null!==(s=e.callbackSig)&&void 0!==s?s:new Uint8Array,a.callbackCodeHash=null!==(o=e.callbackCodeHash)&&void 0!==o?o:"",a}},t.MsgMigrateContractResponse={encode:(e,t=s.default.Writer.create())=>(0!==e.data.length&&t.uint32(10).bytes(e.data),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=f();for(;n.pos<r;){const e=n.uint32();e>>>3==1?i.data=n.bytes():n.skipType(7&e)}return i},fromJSON:e=>({data:C(e.data)?b(e.data):new Uint8Array}),toJSON(e){const t={};return void 0!==e.data&&(t.data=_(void 0!==e.data?e.data:new Uint8Array)),t},fromPartial(e){var t;const n=f();return n.data=null!==(t=e.data)&&void 0!==t?t:new Uint8Array,n}},t.MsgUpdateAdmin={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.newAdmin&&t.uint32(18).string(e.newAdmin),""!==e.contract&&t.uint32(26).string(e.contract),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=g();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 2:i.newAdmin=n.string();break;case 3:i.contract=n.string();break;case 7:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",newAdmin:C(e.newAdmin)?String(e.newAdmin):"",contract:C(e.contract)?String(e.contract):"",callbackSig:C(e.callbackSig)?b(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.newAdmin&&(t.newAdmin=e.newAdmin),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.callbackSig&&(t.callbackSig=_(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r,i;const s=g();return s.sender=null!==(t=e.sender)&&void 0!==t?t:"",s.newAdmin=null!==(n=e.newAdmin)&&void 0!==n?n:"",s.contract=null!==(r=e.contract)&&void 0!==r?r:"",s.callbackSig=null!==(i=e.callbackSig)&&void 0!==i?i:new Uint8Array,s}},t.MsgUpdateAdminResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgClearAdmin={encode:(e,t=s.default.Writer.create())=>(""!==e.sender&&t.uint32(10).string(e.sender),""!==e.contract&&t.uint32(26).string(e.contract),0!==e.callbackSig.length&&t.uint32(58).bytes(e.callbackSig),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=m();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.sender=n.string();break;case 3:i.contract=n.string();break;case 7:i.callbackSig=n.bytes();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({sender:C(e.sender)?String(e.sender):"",contract:C(e.contract)?String(e.contract):"",callbackSig:C(e.callbackSig)?b(e.callbackSig):new Uint8Array}),toJSON(e){const t={};return void 0!==e.sender&&(t.sender=e.sender),void 0!==e.contract&&(t.contract=e.contract),void 0!==e.callbackSig&&(t.callbackSig=_(void 0!==e.callbackSig?e.callbackSig:new Uint8Array)),t},fromPartial(e){var t,n,r;const i=m();return i.sender=null!==(t=e.sender)&&void 0!==t?t:"",i.contract=null!==(n=e.contract)&&void 0!==n?n:"",i.callbackSig=null!==(r=e.callbackSig)&&void 0!==r?r:new Uint8Array,i}},t.MsgClearAdminResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})},t.MsgUpdateParams={encode:(e,t=s.default.Writer.create())=>(""!==e.authority&&t.uint32(10).string(e.authority),void 0!==e.params&&a.Params.encode(e.params,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={authority:"",params:void 0};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.authority=n.string();break;case 2:i.params=a.Params.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i},fromJSON:e=>({authority:C(e.authority)?String(e.authority):"",params:C(e.params)?a.Params.fromJSON(e.params):void 0}),toJSON(e){const t={};return void 0!==e.authority&&(t.authority=e.authority),void 0!==e.params&&(t.params=e.params?a.Params.toJSON(e.params):void 0),t},fromPartial(e){var t;const n={authority:"",params:void 0};return n.authority=null!==(t=e.authority)&&void 0!==t?t:"",n.params=void 0!==e.params&&null!==e.params?a.Params.fromPartial(e.params):void 0,n}},t.MsgUpdateParamsResponse={encode:(e,t=s.default.Writer.create())=>t,decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),fromPartial:e=>({})};var y=(()=>{if(void 0!==y)return y;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw"Unable to locate global object"})();const v=y.atob||(e=>y.Buffer.from(e,"base64").toString("binary"));function b(e){const t=v(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}const w=y.btoa||(e=>y.Buffer.from(e,"binary").toString("base64"));function _(e){const t=[];for(const n of e)t.push(String.fromCharCode(n));return w(t.join(""))}function O(e){return e.toString()}function C(e){return null!=e}s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},53818:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Params=t.protobufPackage=void 0;const i=r(n(27808)),s=r(n(73737));function o(e){return null!=e}t.protobufPackage="secret.compute.v1beta1",t.Params={encode:(e,t=s.default.Writer.create())=>(""!==e.compileCost&&t.uint32(10).string(e.compileCost),"0"!==e.maxContractSize&&t.uint32(16).uint64(e.maxContractSize),t),decode(e,t){const n=e instanceof s.default.Reader?e:new s.default.Reader(e);let r=void 0===t?n.len:n.pos+t;const i={compileCost:"",maxContractSize:"0"};for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.compileCost=n.string();break;case 2:i.maxContractSize=n.uint64().toString();break;default:n.skipType(7&e)}}return i},fromJSON:e=>({compileCost:o(e.compileCost)?String(e.compileCost):"",maxContractSize:o(e.maxContractSize)?String(e.maxContractSize):"0"}),toJSON(e){const t={};return void 0!==e.compileCost&&(t.compileCost=e.compileCost),void 0!==e.maxContractSize&&(t.maxContractSize=e.maxContractSize),t},fromPartial(e){var t,n;const r={compileCost:"",maxContractSize:"0"};return r.compileCost=null!==(t=e.compileCost)&&void 0!==t?t:"",r.maxContractSize=null!==(n=e.maxContractSize)&&void 0!==n?n:"0",r}},s.default.util.Long!==i.default&&(s.default.util.Long=i.default,s.default.configure())},91985:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Keplr=void 0;const s=n(47722),o=n(81880),a=n(4941),c=i(n(39714)),d=i(n(27808)),u=n(48834),l=i(n(22699));t.Keplr=class{constructor(e,t,n){this.version=e,this.mode=t,this.requester=n,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new p(this,this.requester),this.starknet=new g(this,this.requester),this.bitcoin=new m(this,this.requester)}ping(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","keplr-ping",{})}))}enable(e){return"string"==typeof e&&(e=[e]),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}isEnabled(e){return r(this,void 0,void 0,(function*(){return"string"==typeof e&&(e=[e]),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","is-enabled-access",{chainIds:e})}))}disable(e){return r(this,void 0,void 0,(function*(){return"string"==typeof e&&(e=[e]),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","disable-access",{chainIds:null!=e?e:[]}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}experimentalSuggestChain(e){return r(this,void 0,void 0,(function*(){if(e.hideInUI)throw new Error("hideInUI is not allowed");if(e.gasPriceStep){const t=Object.assign({},e.gasPriceStep);for(const n of e.feeCurrencies)n.gasPriceStep||(n.gasPriceStep=t);delete e.gasPriceStep,console.warn("The `gasPriceStep` field of the `ChainInfo` has been moved under `feeCurrencies`. This is automatically handled as of right now, but the upcoming update would potentially cause errors.")}return e.coinType&&(console.warn("The `coinType` field of the `ChainInfo` is removed. This is automatically handled as of right now, but the upcoming update would potentially cause errors."),delete e.coinType),new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","need-suggest-chain-info-interaction",{chainInfo:e}).then((i=>{i||(r=!0),(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","suggest-chain-info",{chainInfo:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}))}getKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-key",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getKeysSettled(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","get-cosmos-keys-settled",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-infos-without-endpoints",{}).then((t=>e(t.chainInfos))).catch(t).finally((()=>n=!0)),setTimeout((()=>{n||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChainInfoWithoutEndpoints(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"chains","get-chain-info-without-endpoints",{chainId:e}).then((e=>t(e.chainInfo))).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}sendTx(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.enable(e),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx","send-tx-to-background",{chainId:e,tx:t,mode:n})}))}signAmino(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let d=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino",{chainId:e,signer:t,signDoc:n,signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then(r).catch(o).finally((()=>d=!0)),setTimeout((()=>{d||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signDirect(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let u=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct",{chainId:e,signer:t,signDoc:{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},signOptions:(0,c.default)(null!==(a=this.defaultOptions.sign)&&void 0!==a?a:{},i)}).then((e=>r({signed:{bodyBytes:e.signed.bodyBytes,authInfoBytes:e.signed.authInfoBytes,chainId:e.signed.chainId,accountNumber:d.default.fromString(e.signed.accountNumber)},signature:e.signature}))).catch(o).finally((()=>u=!0)),setTimeout((()=>{u||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signDirectAux(e,t,n,i={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{var a;let u=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-direct-aux",{chainId:e,signer:t,signDoc:{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},signOptions:(0,c.default)({preferNoSetMemo:null===(a=this.defaultOptions.sign)||void 0===a?void 0:a.preferNoSetMemo},i)}).then((e=>r({signed:{bodyBytes:e.signed.bodyBytes,publicKey:e.signed.publicKey,chainId:e.signed.chainId,accountNumber:d.default.fromString(e.signed.accountNumber),sequence:d.default.fromString(e.signed.sequence)},signature:e.signature}))).catch(o).finally((()=>u=!0)),setTimeout((()=>{u||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signArbitrary(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-cosmos-sign-amino-adr-36",{chainId:e,signer:t,data:"string"==typeof n?u.Buffer.from(n):n,signOptions:{isADR36WithString:"string"==typeof n}}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}verifyArbitrary(e,t,n,i){return r(this,void 0,void 0,(function*(){return"string"==typeof n&&(n=u.Buffer.from(n)),new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","verify-cosmos-sign-amino-adr-36",{chainId:e,signer:t,data:n,signature:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signEthereum(e,t,n,i){return r(this,void 0,void 0,(function*(){return new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-sign-ethereum",{chainId:e,signer:t,message:"string"==typeof n?u.Buffer.from(n):n,signType:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{a||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signICNSAdr36(e,t,n,i,o){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{let c=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-icns-adr-36-signatures-v2",{chainId:e,contractAddress:t,owner:n,username:i,addressChainIds:o}).then(r).catch(a).finally((()=>c=!0)),setTimeout((()=>{c||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getOfflineSigner(e,t){return new a.CosmJSOfflineSigner(e,this,t)}getOfflineSignerOnlyAmino(e,t){return new a.CosmJSOfflineSignerOnlyAmino(e,this,t)}getOfflineSignerAuto(e,t){return r(this,void 0,void 0,(function*(){return(yield this.getKey(e)).isNanoLedger?new a.CosmJSOfflineSignerOnlyAmino(e,this,t):new a.CosmJSOfflineSigner(e,this,t)}))}suggestToken(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","SuggestTokenMsg",{chainId:e,contractAddress:t,viewingKey:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getSecret20ViewingKey(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-cw20","get-secret20-viewing-key",{chainId:e,contractAddress:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getEnigmaPubKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-pubkey-msg",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getEnigmaTxEncryptionKey(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","get-tx-encryption-key-msg",{chainId:e,nonce:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enigmaEncrypt(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-encrypt-msg",{chainId:e,contractCodeHash:t,msg:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enigmaDecrypt(e,t,n){return r(this,void 0,void 0,(function*(){return t&&0!==t.length?new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"secret-wasm","request-decrypt-msg",{chainId:e,cipherText:t,nonce:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)})):new Uint8Array}))}getEnigmaUtils(e){if(this.enigmaUtils.has(e))return this.enigmaUtils.get(e);const t=new o.KeplrEnigmaUtils(e,this);return this.enigmaUtils.set(e,t),t}experimentalSignEIP712CosmosTx_v0(e,t,n,i,o={}){return r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{var d;let u=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","request-sign-eip-712-cosmos-tx-v0",{chainId:e,signer:t,eip712:n,signDoc:i,signOptions:(0,c.default)(null!==(d=this.defaultOptions.sign)&&void 0!==d?d:{},o)}).then(r).catch(a).finally((()=>u=!0)),setTimeout((()=>{u||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__getAnalyticsId(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"analytics","get-analytics-id",{})}))}changeKeyRingName({defaultName:e,editable:t=!0}){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-v2","change-keyring-name-interactive",{defaultName:e,editable:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__privilageSignAminoWithdrawRewards(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoWithdrawRewards",{chainId:e,signer:t,signDoc:n})}))}__core__privilageSignAminoDelegate(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoDelegate",{chainId:e,signer:t,signDoc:n})}))}__core__privilageSignAminoExecuteCosmWasm(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-cosmos","PrivilegeCosmosSignAminoExecuteCosmWasm",{chainId:e,signer:t,signDoc:n})}))}sendEthereumTx(e,t){return r(this,void 0,void 0,(function*(){return yield this.enable(e),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"background-tx-ethereum","send-ethereum-tx-to-background",{chainId:e,tx:t})}))}suggestERC20(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"token-erc20","SuggestERC20TokenMsg",{chainId:e,contractAddress:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","injected-webpage-closed",{})}))}getStarknetKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-key",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getStarknetKeysSettled(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-starknet-keys-settled",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signStarknetTx(e,t,n){return r(this,void 0,void 0,(function*(){return new Promise(((r,i)=>{let o=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-tx",{chainId:e,transactions:t,details:n}).then(r).catch(i).finally((()=>o=!0)),setTimeout((()=>{o||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signStarknetDeployAccountTransaction(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-sign-starknet-deploy-account-tx",{chainId:e,transaction:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.protectedTryOpenSidePanelIfEnabled()}))}))}))}getBitcoinKey(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","get-bitcoin-key",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getBitcoinKeysSettled(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","get-bitcoin-keys-settled",{chainIds:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signPsbt(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbt",{chainId:e,psbtHex:t,options:n})}))}signPsbts(e,t,n){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbts",{chainId:e,psbtsHexes:t,options:n})}))}protectedTryOpenSidePanelIfEnabled(e=!1){return r(this,void 0,void 0,(function*(){let t=!1;if("undefined"!=typeof window&&!0===window.__keplr_content_script&&(t=!0),t&&(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"side-panel","GetSidePanelEnabledMsg",{})).enabled)try{return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"router-extension/src/router/extension.ts","tryOpenSidePanelIfEnabled",{})}catch(t){if(console.log(t),!e&&t.message&&t.message.includes("in response to a user gesture")&&!document.getElementById("__open_keplr_side_panel__")){if(yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}))return;const e=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring","GetIsLockedMsg",{}),t=yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"settings","GetThemeOptionMsg",{}),n=`\n                @font-face {\n                  font-family: 'Inter-SemiBold-Keplr';\n                  src: url('${chrome.runtime.getURL("/assets/Inter-SemiBold.ttf")}') format('truetype');\n                  font-weight: 600;\n                  font-style: normal;\n                }\n\n                @keyframes slide-left {\n                  0% {\n                    transform: translateY(0%) translateX(100%);\n                  }\n                  100% {\n                    transform: translateY(0%) translateX(0);\n                  }\n                }\n                    \n                @keyframes tada {\n                  0% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                  10%, 20% {\n                    transform: scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg);\n                  }\n                  30%, 50%, 70%, 90% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);\n                  }\n                  40%, 60%, 80% {\n                    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);\n                  }\n                  100% {\n                    transform: scale3d(1, 1, 1);\n                  }\n                }\n                  \n            `,r="auto"===t?!window.matchMedia("(prefers-color-scheme: dark)").matches:"light"===t,i=document.createElement("style");i.appendChild(document.createTextNode(n)),document.head.appendChild(i);const o=document.createElement("div");o.id="__open_keplr_side_panel__",o.style.boxSizing="border-box",o.style.animation="slide-left 0.5s forwards",o.style.position="fixed",o.style.right="1.5rem",o.style.top="1.5rem",o.style.padding="1rem 1.75rem 1rem 0.75rem",o.style.zIndex="2147483647",o.style.borderRadius="1rem",o.style.display="flex",o.style.alignItems="center",o.style.fontFamily="Inter-SemiBold-Keplr",o.style.fontWeight="600",o.style.background=r?"#FEFEFE":"#1D1D1F";const a=document.createElement("div");a.style.boxSizing="border-box",a.style.transform="translateY(-0.65rem)",a.style.marginRight="0.35rem",a.innerHTML=`\n                <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M30 29.7522C25.1484 31.0691 16.7109 27.1184 18.6093 18.3391C20.5078 9.55979 25.5703 11.5351 26.414 12.852C27.2578 14.1689 28.3125 22.2898 15.8672 19.2171C5.9109 16.7589 7.15625 6.04811 8 1M8 1L14 8M8 1L1 7.5" stroke="${r?"#2C4BE2":"#72747B"}"/>\n                </svg>\n              `;const c=document.createElement("div");c.style.boxSizing="border-box",c.style.position="relative",c.style.marginRight="1rem";const d=document.createElement("img"),u=chrome.runtime.getURL(`/assets/${e?"locked-keplr-logo":"icon"}-128.png`);d.src=u,d.style.boxSizing="border-box",d.style.width="3rem",d.style.height="3rem",c.appendChild(d);const l=document.createElement("img"),h=chrome.runtime.getURL("assets/icon-click-cursor.png");l.src=h,l.style.boxSizing="border-box",l.style.position="absolute",l.style.right="-0.2rem",l.style.bottom="-0.2rem",l.style.aspectRatio="78/98",l.style.height="1.375rem",c.appendChild(l);const p=document.createElement("span");if(p.style.boxSizing="border-box",p.style.fontSize="1rem",p.style.color=r?"#020202":"#FEFEFE",p.textContent=e?"Unlock Keplr to proceed":"Open Keplr to approve request(s)",o.appendChild(a),o.appendChild(c),o.appendChild(p),!document.getElementById("__open_keplr_side_panel__")){let e=!1;const t=setInterval((()=>{(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"interaction","ping-content-script-tab-has-opened-side-panel",{}).then((n=>{n&&(clearInterval(t),e||(o.remove(),e=!0))}))}),300);document.body.appendChild(o)}}}}))}};const h=["eth_signTransaction","eth_sendTransaction","personal_sign","eth_signTypedData_v3","eth_signTypedData_v4","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset"];class p extends l.default{constructor(e,t){super(),this.keplr=e,this.requester=t,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.isKeplr=!0,this.isMetaMask=!0}protectedEnableAccess(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-evm",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}protectedGetNewCurrentChainIdFromRequest(e,t){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","get-new-current-chain-id-for-evm",{method:e,params:t})}))}protectedCheckNeedEnableAccess(e){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","check-need-enable-access-for-evm",{method:e})}))}isConnected(){return!0}request({method:e,params:t,providerId:n,chainId:i}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid paramater: `method` must be a string");if(yield this.protectedCheckNeedEnableAccess(e)){const n=yield this.protectedGetNewCurrentChainIdFromRequest(e,t);yield this.protectedEnableAccess(n)}return new Promise(((r,o)=>{let a=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-ethereum","request-json-rpc-to-evm",{method:e,params:t,providerId:n,chainId:i}).then(r).catch(o).finally((()=>a=!0)),setTimeout((()=>{!a&&h.includes(e)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enable(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})}))}net_version(){return r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})}))}}const f=["wallet_watchAsset","wallet_switchStarknetChain","wallet_addInvokeTransaction","wallet_addDeclareTransaction","wallet_signTypedData"];class g{constructor(e,t){this.keplr=e,this.requester=t,this.id="",this.name="",this.version="",this.icon="",this.isConnected=!1}protectedEnableAccess(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-starknet",{chainId:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}protectedGetNewCurrentChainIdFromRequest(e,t){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","get-new-current-chain-id-for-starknet",{method:e,params:t})}))}protectedCheckNeedEnableAccess(e,t){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","check-need-enable-access-for-starknet",{method:e,params:t})}))}request({type:e,params:t}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid parameter: `type` must be a string");if(yield this.protectedCheckNeedEnableAccess(e,t)){const n=yield this.protectedGetNewCurrentChainIdFromRequest(e,t);yield this.protectedEnableAccess(n)}return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-starknet","request-json-rpc-to-starknet",{method:e,params:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{!i&&f.includes(e)&&this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}enable(e){return r(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}isPreauthorized(){throw new Error("Method not implemented.")}on(e,t){throw new Error("Method not implemented.")}off(e,t){throw new Error("Method not implemented.")}}class m extends l.default{constructor(e,t){super(),this.keplr=e,this.requester=t}protectedEnableAccess(){return r(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{let n=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"permission-interactive","enable-access-for-bitcoin",{}).then(e).catch(t).finally((()=>n=!0)),setTimeout((()=>{n||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getAccounts(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-accounts",{})}))}requestAccounts(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-request-accounts",{})}))}disconnect(){return r(this,void 0,void 0,(function*(){return yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-disconnect",{})}))}getNetwork(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-network",{})}))}switchNetwork(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-switch-network",{network:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getChain(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-chain",{})}))}switchChain(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{let r=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-switch-chain",{chainType:e}).then(t).catch(n).finally((()=>r=!0)),setTimeout((()=>{r||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getPublicKey(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-public-key",{})}))}getBalance(){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-balance",{})}))}getInscriptions(e,t){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-get-inscriptions",{offset:e,limit:t})}))}signMessage(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-message",{message:e,signType:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}sendBitcoin(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-send-bitcoin",{to:e,amount:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}pushTx(e){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-push-tx",{rawTxHex:e})}))}pushPsbt(e){return r(this,void 0,void 0,(function*(){return yield this.protectedEnableAccess(),yield(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-bitcoin-push-psbt",{psbtHex:e})}))}signPsbt(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbt",{psbtHex:e,options:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}signPsbts(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,r)=>{let i=!1;(0,s.sendSimpleMessage)(this.requester,s.BACKGROUND_PORT,"keyring-bitcoin","request-sign-bitcoin-psbts",{psbtsHexes:e,options:t}).then(n).catch(r).finally((()=>i=!0)),setTimeout((()=>{i||this.keplr.protectedTryOpenSidePanelIfEnabled()}),300)}))}))}getAddress(){return r(this,void 0,void 0,(function*(){throw new Error("This method should not be called")}))}connectWallet(){return r(this,void 0,void 0,(function*(){throw new Error("This method should not be called")}))}}},4941:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmJSOfflineSigner=t.CosmJSOfflineSignerOnlyAmino=void 0;class r{constructor(e,t,n){this.chainId=e,this.keplr=t,this.signOptions=n}getAccounts(){return n(this,void 0,void 0,(function*(){const e=yield this.keplr.getKey(this.chainId);return[{address:e.bech32Address,algo:"secp256k1",pubkey:e.pubKey}]}))}signAmino(e,t){return n(this,void 0,void 0,(function*(){if(this.chainId!==t.chain_id)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(t.chain_id)).bech32Address!==e)throw new Error("Unknown signer address");return yield this.keplr.signAmino(this.chainId,e,t,this.signOptions)}))}sign(e,t){return n(this,void 0,void 0,(function*(){return yield this.signAmino(e,t)}))}}t.CosmJSOfflineSignerOnlyAmino=r,t.CosmJSOfflineSigner=class extends r{constructor(e,t,n){super(e,t,n)}signDirect(e,t){return n(this,void 0,void 0,(function*(){if(this.chainId!==t.chainId)throw new Error("Unmatched chain id with the offline signer");if((yield this.keplr.getKey(t.chainId)).bech32Address!==e)throw new Error("Unknown signer address");return yield this.keplr.signDirect(this.chainId,e,t,this.signOptions)}))}}},81880:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeplrEnigmaUtils=void 0,t.KeplrEnigmaUtils=class{constructor(e,t){this.chainId=e,this.keplr=t}getPubkey(){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaPubKey(this.chainId)}))}getTxEncryptionKey(e){return n(this,void 0,void 0,(function*(){return yield this.keplr.getEnigmaTxEncryptionKey(this.chainId,e)}))}encrypt(e,t){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaEncrypt(this.chainId,e,t)}))}decrypt(e,t){return n(this,void 0,void 0,(function*(){return yield this.keplr.enigmaDecrypt(this.chainId,e,t)}))}}},33210:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91985),t),i(n(4941),t),i(n(81880),t),i(n(77818),t)},77818:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BitcoinProvider=t.InjectedKeplr=t.injectKeplrToWindow=void 0;const s=n(65880),o=n(47722),a=n(81880),c=n(4941),d=i(n(39714)),u=i(n(27808)),l=i(n(22699));function h(e,t,n){const r=Object.getOwnPropertyDescriptor(e,t);!r||r.writable?!r||r.configurable?Object.defineProperty(e,t,{value:n,writable:!1}):e[t]=n:console.warn(`Failed to inject ${t} from keplr. Probably, other wallet is trying to intercept Keplr`)}t.injectKeplrToWindow=function(e){h(window,"keplr",e),h(window,"getOfflineSigner",e.getOfflineSigner),h(window,"getOfflineSignerOnlyAmino",e.getOfflineSignerOnlyAmino),h(window,"getOfflineSignerAuto",e.getOfflineSignerAuto),h(window,"getEnigmaUtils",e.getEnigmaUtils),h(window,"starknet_keplr",e.starknet),h(window,"bitcoin_keplr",e.bitcoin)};class p{static startProxy(e,t,n={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},i){const s="proxy-request"+(t?`-${t}`:""),a=t=>r(this,void 0,void 0,(function*(){const a=i?i(t.data):t.data;if(a&&(a.type===s||"proxy-request"===a.type))try{if(!a.id)throw new Error("Empty id");if(a.method.startsWith("protected"))throw new Error("Rejected");if("version"===a.method)throw new Error("Version is not function");if("mode"===a.method)throw new Error("Mode is not function");if("defaultOptions"===a.method)throw new Error("DefaultOptions is not function");if(!e[a.method]||"ethereum"!==a.method&&"starknet"!==a.method&&"bitcoin"!==a.method&&"function"!=typeof e[a.method])throw new Error(`Invalid method: ${a.method}`);if("getOfflineSigner"===a.method)throw new Error("GetOfflineSigner method can't be proxy request");if("getOfflineSignerOnlyAmino"===a.method)throw new Error("GetOfflineSignerOnlyAmino method can't be proxy request");if("getOfflineSignerAuto"===a.method)throw new Error("GetOfflineSignerAuto method can't be proxy request");if("getEnigmaUtils"===a.method)throw new Error("GetEnigmaUtils method can't be proxy request");const t=a.method,i=yield(()=>r(this,void 0,void 0,(function*(){var n,i;if("signDirect"===t)return yield(()=>r(this,void 0,void 0,(function*(){const t=a.args[2],n=yield e.signDirect(a.args[0],a.args[1],{bodyBytes:t.bodyBytes,authInfoBytes:t.authInfoBytes,chainId:t.chainId,accountNumber:t.accountNumber?u.default.fromString(t.accountNumber):null},a.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,authInfoBytes:n.signed.authInfoBytes,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString()},signature:n.signature}})))();if("signDirectAux"===t)return yield(()=>r(this,void 0,void 0,(function*(){const t=a.args[2],n=yield e.signDirectAux(a.args[0],a.args[1],{bodyBytes:t.bodyBytes,publicKey:t.publicKey,chainId:t.chainId,accountNumber:t.accountNumber?u.default.fromString(t.accountNumber):null,sequence:t.sequence?u.default.fromString(t.sequence):null},a.args[3]);return{signed:{bodyBytes:n.signed.bodyBytes,publicKey:n.signed.publicKey,chainId:n.signed.chainId,accountNumber:n.signed.accountNumber.toString(),sequence:n.signed.sequence.toString()},signature:n.signature}})))();if("ethereum"===t){const t=a.ethereumProviderMethod;if(null==t?void 0:t.startsWith("protected"))throw new Error("Rejected");if("chainId"===t)throw new Error("chainId is not function");if("selectedAddress"===t)throw new Error("selectedAddress is not function");if("networkVersion"===t)throw new Error("networkVersion is not function");if("isKeplr"===t)throw new Error("isKeplr is not function");if("isMetaMask"===t)throw new Error("isMetaMask is not function");if(void 0===t||"function"!=typeof e.ethereum[t])throw new Error(`${a.ethereumProviderMethod} is not function or invalid Ethereum provider method`);const n=o.JSONUint8Array.unwrap(a.args);return"request"===t?yield e.ethereum.request("string"==typeof n?JSON.parse(n):n):yield e.ethereum[t](..."string"==typeof n?JSON.parse(n):n)}if("starknet"===t){const t=a.starknetProviderMethod;if(null==t?void 0:t.startsWith("protected"))throw new Error("Rejected");if("id"===t)throw new Error("id is not function");if("name"===t)throw new Error("name is not function");if("version"===t)throw new Error("version is not function");if("icon"===t)throw new Error("icon is not function");if("chainId"===t)throw new Error("chainId is not function");if("selectedAddress"===t)throw new Error("selectedAddress is not function");if("isConnected"===t)throw new Error("isConnected is not function");if("account"===t)throw new Error("account is not function");if("provider"===t)throw new Error("provider is not function");if(void 0===t||"function"!=typeof(null===(n=e.starknet)||void 0===n?void 0:n[t]))throw new Error(`${a.starknetProviderMethod} is not function or invalid Starknet provider method`);const r=o.JSONUint8Array.unwrap(a.args);return"request"===t?yield e.starknet.request("string"==typeof r?JSON.parse(r):r):yield e.starknet[t](..."string"==typeof r?JSON.parse(r):r)}if("bitcoin"===t){const t=a.bitcoinProviderMethod;if(null==t?void 0:t.startsWith("protected"))throw new Error("Rejected");if(void 0===t||"function"!=typeof(null===(i=e.bitcoin)||void 0===i?void 0:i[t]))throw new Error(`${a.bitcoinProviderMethod} is not function or invalid Bitcoin provider method`);const n=o.JSONUint8Array.unwrap(a.args);return yield e.bitcoin[t](..."string"==typeof n?JSON.parse(n):n)}return yield e[t](...o.JSONUint8Array.unwrap(a.args))})))(),s={type:"proxy-request-response",id:a.id,result:{return:o.JSONUint8Array.wrap(i)}};n.postMessage(s)}catch(e){const t={type:"proxy-request-response",id:a.id,result:{error:e.code&&!e.module?{code:e.code,message:e.message,data:e.data}:e.message||e.toString()}};n.postMessage(t)}}));return n.addMessageListener(a),()=>{n.removeMessageListener(a)}}requestMethod(e,t){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:e,args:o.JSONUint8Array.wrap(t)};return new Promise(((e,t)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);a?a.error?t(new Error(a.error)):e(a.return):t(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))}constructor(e,t,n,r,i,s={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},o,a,c){this.metaId=e,this.version=t,this.mode=n,this.onStarknetStateChange=r,this.onStarknetAccountChange=i,this.eventListener=s,this.parseMessage=o,this.eip6963ProviderInfo=a,this.starknetProviderInfo=c,this.enigmaUtils=new Map,this.defaultOptions={},this.ethereum=new f(this.metaId,(()=>this),this.eventListener,this.parseMessage,this.eip6963ProviderInfo),this.starknet=this.generateStarknetProvider(),this.bitcoin=new m((()=>this),this.eventListener,this.parseMessage);const d=Object.keys(this);for(const e of d)if("defaultOptions"!==e&&Object.defineProperty(this,e,{value:this[e],writable:!1}),"eventListener"===e){const e=Object.keys(this.eventListener);for(const t of e)Object.defineProperty(this.eventListener,t,{value:this.eventListener[t],writable:!1})}const u=Object.getOwnPropertyNames(p.prototype);for(const e of u)"constructor"!==e&&"function"==typeof this[e]&&Object.defineProperty(this,e,{value:this[e].bind(this),writable:!1})}ping(){return r(this,void 0,void 0,(function*(){yield this.requestMethod("ping",[])}))}enable(e){return r(this,void 0,void 0,(function*(){yield this.requestMethod("enable",[e])}))}disable(e){return r(this,void 0,void 0,(function*(){yield this.requestMethod("disable",[e])}))}experimentalSuggestChain(e){var t,n;return r(this,void 0,void 0,(function*(){if(e.hideInUI)throw new Error("hideInUI is not allowed");((null===(t=e.features)||void 0===t?void 0:t.includes("stargate"))||(null===(n=e.features)||void 0===n?void 0:n.includes("no-legacy-stdTx")))&&console.warn("“stargate”, “no-legacy-stdTx” feature has been deprecated. The launchpad is no longer supported, thus works without the two features. We would keep the aforementioned two feature for a while, but the upcoming update would potentially cause errors. Remove the two feature."),yield this.requestMethod("experimentalSuggestChain",[e])}))}getKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKey",[e])}))}getKeysSettled(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getKeysSettled",[e])}))}sendTx(e,t,n){return r(this,void 0,void 0,(function*(){return"length"in t||console.warn("Do not send legacy std tx via `sendTx` API. We now only support protobuf tx. The usage of legeacy std tx would throw an error in the near future."),yield this.requestMethod("sendTx",[e,t,n])}))}signAmino(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signAmino",[e,t,n,(0,d.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)])}))}signDirect(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirect",[e,t,{bodyBytes:n.bodyBytes,authInfoBytes:n.authInfoBytes,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null},(0,d.default)(null!==(s=this.defaultOptions.sign)&&void 0!==s?s:{},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,authInfoBytes:o.authInfoBytes,chainId:o.chainId,accountNumber:u.default.fromString(o.accountNumber)},signature:r.signature}}))}signDirectAux(e,t,n,i={}){var s;return r(this,void 0,void 0,(function*(){const r=yield this.requestMethod("signDirectAux",[e,t,{bodyBytes:n.bodyBytes,publicKey:n.publicKey,chainId:n.chainId,accountNumber:n.accountNumber?n.accountNumber.toString():null,sequence:n.sequence?n.sequence.toString():null},(0,d.default)({preferNoSetMemo:null===(s=this.defaultOptions.sign)||void 0===s?void 0:s.preferNoSetMemo},i)]),o=r.signed;return{signed:{bodyBytes:o.bodyBytes,publicKey:o.publicKey||void 0,chainId:o.chainId,accountNumber:u.default.fromString(o.accountNumber),sequence:u.default.fromString(o.sequence)},signature:r.signature}}))}signArbitrary(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signArbitrary",[e,t,n])}))}signICNSAdr36(e,t,n,r,i){return this.requestMethod("signICNSAdr36",[e,t,n,r,i])}verifyArbitrary(e,t,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("verifyArbitrary",[e,t,n,i])}))}signEthereum(e,t,n,i){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signEthereum",[e,t,n,i])}))}getOfflineSigner(e,t){return new c.CosmJSOfflineSigner(e,this,t)}getOfflineSignerOnlyAmino(e,t){return new c.CosmJSOfflineSignerOnlyAmino(e,this,t)}getOfflineSignerAuto(e,t){return r(this,void 0,void 0,(function*(){return(yield this.getKey(e)).isNanoLedger?new c.CosmJSOfflineSignerOnlyAmino(e,this,t):new c.CosmJSOfflineSigner(e,this,t)}))}suggestToken(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestToken",[e,t,n])}))}getSecret20ViewingKey(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getSecret20ViewingKey",[e,t])}))}getEnigmaPubKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaPubKey",[e])}))}getEnigmaTxEncryptionKey(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getEnigmaTxEncryptionKey",[e,t])}))}enigmaEncrypt(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaEncrypt",[e,t,n])}))}enigmaDecrypt(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("enigmaDecrypt",[e,t,n])}))}getEnigmaUtils(e){if(this.enigmaUtils.has(e))return this.enigmaUtils.get(e);const t=new a.KeplrEnigmaUtils(e,this);return this.enigmaUtils.set(e,t),t}experimentalSignEIP712CosmosTx_v0(e,t,n,i,s={}){var o;return r(this,void 0,void 0,(function*(){return yield this.requestMethod("experimentalSignEIP712CosmosTx_v0",[e,t,n,i,(0,d.default)(null!==(o=this.defaultOptions.sign)&&void 0!==o?o:{},s)])}))}getChainInfosWithoutEndpoints(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfosWithoutEndpoints",[])}))}getChainInfoWithoutEndpoints(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getChainInfoWithoutEndpoints",[e])}))}__core__getAnalyticsId(){return this.requestMethod("__core__getAnalyticsId",[])}changeKeyRingName({defaultName:e,editable:t=!0}){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("changeKeyRingName",[{defaultName:e,editable:t}])}))}__core__privilageSignAminoWithdrawRewards(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoWithdrawRewards",[e,t,n])}))}__core__privilageSignAminoDelegate(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoDelegate",[e,t,n])}))}__core__privilageSignAminoExecuteCosmWasm(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__privilageSignAminoExecuteCosmWasm",[e,t,n])}))}sendEthereumTx(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("sendEthereumTx",[e,t])}))}suggestERC20(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("suggestERC20",[e,t])}))}__core__webpageClosed(){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("__core__webpageClosed",[])}))}getStarknetKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKey",[e])}))}getStarknetKeysSettled(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getStarknetKeysSettled",[e])}))}signStarknetTx(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetTx",[e,t,n])}))}signStarknetDeployAccountTransaction(e,t){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signStarknetDeployAccountTransaction",[e,t])}))}generateStarknetProvider(){return new g(this.metaId,this.starknetProviderInfo.id,this.starknetProviderInfo.name,this.version,this.starknetProviderInfo.icon,(()=>this),this.onStarknetStateChange,this.onStarknetAccountChange,this.eventListener,this.parseMessage)}getBitcoinKey(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getBitcoinKey",[e])}))}getBitcoinKeysSettled(e){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("getBitcoinKeysSettled",[e])}))}signPsbt(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signPsbt",[e,t,n])}))}signPsbts(e,t,n){return r(this,void 0,void 0,(function*(){return yield this.requestMethod("signPsbts",[e,t,n])}))}}t.InjectedKeplr=p;class f extends l.default{constructor(e,t,n={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},i,a){if(super(),this.metaId=e,this.injectedKeplr=t,this.eventListener=n,this.parseMessage=i,this.eip6963ProviderInfo=a,this.chainId=null,this.networkVersion=null,this.selectedAddress=null,this.isKeplr=!0,this.isMetaMask=!0,this._isConnected=!1,this._currentChainId=null,this._requestMethod=(e,t)=>r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:"ethereum",args:o.JSONUint8Array.wrap(t),ethereumProviderMethod:e};return new Promise(((e,t)=>{const n=i=>{const s=this.parseMessage?this.parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this.eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const e=a.error;t(e.code&&!e.module?new o.EthereumProviderRpcError(e.code,e.message,e.data):new Error(e))}else e(a.return);else t(new Error("Result is null"))};this.eventListener.addMessageListener(n),this.eventListener.postMessage(i)}))})),this._initProviderState=()=>r(this,void 0,void 0,(function*(){const e=yield this._requestMethod("request",{method:"keplr_initProviderState"});if(e){const{currentEvmChainId:t,currentChainId:n,selectedAddress:r}=e;null!=n&&null!=t&&null!=r&&(this._handleConnect(t),this._handleChainChanged(t),this._currentChainId=n,this._handleAccountsChanged(r))}})),this._handleConnect=e=>r(this,void 0,void 0,(function*(){if(!this._isConnected){this._isConnected=!0;const t=`0x${e.toString(16)}`;this.emit("connect",{chainId:t})}})),this._handleDisconnect=()=>r(this,void 0,void 0,(function*(){this._isConnected&&(yield this._requestMethod("request",{method:"keplr_disconnect"}),this._isConnected=!1,this.chainId=null,this.selectedAddress=null,this.networkVersion=null,this.emit("disconnect"))})),this._handleChainChanged=e=>r(this,void 0,void 0,(function*(){const t=`0x${e.toString(16)}`;t!==this.chainId&&(this.chainId=t,this.networkVersion=e.toString(10),this.emit("chainChanged",t))})),this._handleAccountsChanged=e=>r(this,void 0,void 0,(function*(){this.selectedAddress!==e&&(this.selectedAddress=e,this.emit("accountsChanged",[e]))})),this.request=({method:e,params:t,chainId:n})=>r(this,void 0,void 0,(function*(){var r;if("string"!=typeof e)throw new Error("Invalid paramater: `method` must be a string");return this._isConnected||(yield this._initProviderState()),yield this._requestMethod("request",{method:e,params:t,providerId:null===(r=this.eip6963ProviderInfo)||void 0===r?void 0:r.uuid,chainId:n})})),this.enable=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"eth_requestAccounts"})})),this.net_version=()=>r(this,void 0,void 0,(function*(){return yield this.request({method:"net_version"})})),this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId&&(yield t().getChainInfoWithoutEndpoints(this._currentChainId))){const e=(yield t().getKey(this._currentChainId)).ethereumHexAddress;this._handleAccountsChanged(e)}})))),window.addEventListener("keplr_chainChanged",(e=>{if(e.detail.origin===window.location.origin){const t=e.detail.evmChainId;this._handleChainChanged(t)}})),window.addEventListener("keplr_ethSubscription",(e=>{var t;const n=e.detail.origin,r=e.detail.providerId;if(n===window.location.origin&&r===(null===(t=this.eip6963ProviderInfo)||void 0===t?void 0:t.uuid)){const t=e.detail.data;this.emit("message",{type:"eth_subscription",data:t})}})),this.eip6963ProviderInfo){const e=new CustomEvent(s.EIP6963EventNames.Announce,{detail:Object.freeze({info:this.eip6963ProviderInfo,provider:this})});window.addEventListener(s.EIP6963EventNames.Request,(()=>window.dispatchEvent(e))),window.dispatchEvent(e)}}isConnected(){return this._isConnected}}class g{constructor(e,t,n,i,s,o,a,c,d={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},u){this.metaId=e,this.id=t,this.name=n,this.version=i,this.icon=s,this._injectedKeplr=o,this.onStateChange=a,this.onAccountChange=c,this._eventListener=d,this._parseMessage=u,this.isConnected=!1,this.chainId=void 0,this.selectedAddress=void 0,this.account=void 0,this.provider=void 0,this._currentChainId=void 0,this._userWalletEvents=[],this._initProviderState(),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){if(this._currentChainId){const e=(yield this._injectedKeplr().getStarknetKey(this._currentChainId)).hexAddress;this.selectedAddress=e,this.onAccountChange({selectedAddress:e}),this._userWalletEvents.forEach((t=>{"accountsChanged"===t.type&&t.handler([e])}))}})))),window.addEventListener("keplr_starknetChainChanged",(e=>{const t=e.detail.origin,n=e.detail.starknetChainId;this.chainId=n,t===window.location.origin&&this._userWalletEvents.forEach((e=>{"networkChanged"===e.type&&e.handler(n)}))}))}_requestMethod(e,t){return r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request"+(this.metaId?`-${this.metaId}`:""),id:r,method:"starknet",args:o.JSONUint8Array.wrap(t),starknetProviderMethod:e};return new Promise(((e,t)=>{const n=i=>{const s=this._parseMessage?this._parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this._eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);if(a)if(a.error){const e=a.error;t(e.code&&!e.module?new o.EthereumProviderRpcError(e.code,e.message,e.data):new Error(e))}else e(a.return);else t(new Error("Result is null"))};this._eventListener.addMessageListener(n),this._eventListener.postMessage(i)}))}))}_initProviderState(){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t,rpc:n}=yield this.request({type:"keplr_initStarknetProviderState"});null!=e&&null!=t&&null!=n?(this.onStateChange({selectedAddress:t,chainId:e,rpc:n}),this._currentChainId=e,this.chainId=e.replace("starknet:",""),this.selectedAddress=t,this.isConnected=!0):this.onStateChange({selectedAddress:null,chainId:null,rpc:null})}))}request({type:e,params:t}){return r(this,void 0,void 0,(function*(){if("string"!=typeof e)throw new Error("Invalid parameter: `type` must be a string");return yield this._requestMethod("request",{type:e,params:t})}))}enable(e){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t,rpc:n}=yield this.request({type:"keplr_enableStarknetProvider"});return this.onStateChange({selectedAddress:t,chainId:e,rpc:n}),this._currentChainId=e,this.chainId=e.replace("starknet:",""),this.selectedAddress=t,this.isConnected=!0,[t]}))}isPreauthorized(){return r(this,void 0,void 0,(function*(){const{currentChainId:e,selectedAddress:t}=yield this.request({type:"keplr_initStarknetProviderState"});return null!=e&&null!=t}))}on(e,t){if("accountsChanged"===e)this._userWalletEvents.push({type:"accountsChanged",handler:t});else{if("networkChanged"!==e)throw new Error("Invalid event type");this._userWalletEvents.push({type:"networkChanged",handler:t})}}off(e,t){if("accountsChanged"!==e&&"networkChanged"!==e)throw new Error("Invalid event type");const n=this._userWalletEvents.findIndex((n=>n.type===e&&n.handler===t));n>=0&&this._userWalletEvents.splice(n,1)}}class m extends l.default{constructor(e,t={addMessageListener:e=>window.addEventListener("message",e),removeMessageListener:e=>window.removeEventListener("message",e),postMessage:e=>window.postMessage(e,window.location.origin)},n){super(),this._injectedKeplr=e,this._eventListener=t,this._parseMessage=n,this._handleNetworkChanged=e=>r(this,void 0,void 0,(function*(){this.emit("networkChanged",e)})),this._handleAccountsChanged=e=>r(this,void 0,void 0,(function*(){this.emit("accountChanged",[e]),this.emit("accountsChanged",[e])})),window.addEventListener("keplr_keystorechange",(()=>r(this,void 0,void 0,(function*(){const e=yield this.getAccounts();e&&e.length>0&&this._handleAccountsChanged(e[0])})))),window.addEventListener("keplr_bitcoinChainChanged",(e=>r(this,void 0,void 0,(function*(){if(e.detail.origin===window.location.origin){const t=e.detail.network,n=yield this.getAccounts();this._handleNetworkChanged(t),this._handleAccountsChanged(n[0])}})))),window.addEventListener("keplr_bitcoinAccountsChanged",(()=>r(this,void 0,void 0,(function*(){const e=yield this.getAccounts();e&&e.length>0&&this._handleAccountsChanged(e[0])}))))}_requestMethod(e,t){return r(this,void 0,void 0,(function*(){const n=new Uint8Array(8),r=Array.from(crypto.getRandomValues(n)).map((e=>e.toString(16))).join(""),i={type:"proxy-request",id:r,method:"bitcoin",args:o.JSONUint8Array.wrap(t),bitcoinProviderMethod:e};return new Promise(((e,t)=>{const n=i=>{const s=this._parseMessage?this._parseMessage(i.data):i.data;if(!s||"proxy-request-response"!==s.type)return;if(s.id!==r)return;this._eventListener.removeMessageListener(n);const a=o.JSONUint8Array.unwrap(s.result);a?a.error?t(new Error(a.error)):e(a.return):t(new Error("Result is null"))};this._eventListener.addMessageListener(n),this._eventListener.postMessage(i)}))}))}getAccounts(){return this._requestMethod("getAccounts",[])}requestAccounts(){return r(this,void 0,void 0,(function*(){return this._requestMethod("requestAccounts",[])}))}disconnect(){return r(this,void 0,void 0,(function*(){return this._requestMethod("disconnect",[])}))}getNetwork(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getNetwork",[])}))}switchNetwork(e){return r(this,void 0,void 0,(function*(){return this._requestMethod("switchNetwork",[e])}))}getChain(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getChain",[])}))}switchChain(e){return r(this,void 0,void 0,(function*(){return this._requestMethod("switchChain",[e])}))}getPublicKey(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getPublicKey",[])}))}getBalance(){return r(this,void 0,void 0,(function*(){return this._requestMethod("getBalance",[])}))}getInscriptions(e,t){return r(this,void 0,void 0,(function*(){return this._requestMethod("getInscriptions",[e,t])}))}signMessage(e,t){return r(this,void 0,void 0,(function*(){return this._requestMethod("signMessage",[e,t])}))}sendBitcoin(e,t){return r(this,void 0,void 0,(function*(){return this._requestMethod("sendBitcoin",[e,t])}))}pushTx(e){return r(this,void 0,void 0,(function*(){return this._requestMethod("pushTx",[e])}))}pushPsbt(e){return r(this,void 0,void 0,(function*(){return this._requestMethod("pushPsbt",[e])}))}signPsbt(e,t){return r(this,void 0,void 0,(function*(){return this._requestMethod("signPsbt",[e,t])}))}signPsbts(e,t){return r(this,void 0,void 0,(function*(){return this._requestMethod("signPsbts",[e,t])}))}getAddress(){return r(this,void 0,void 0,(function*(){return(yield this.getAccounts())[0]}))}connectWallet(){return r(this,void 0,void 0,(function*(){return this.requestAccounts()}))}}t.BitcoinProvider=m},4238:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BitcoinAccountBase=void 0;const c=n(65880),d=n(19731),u=n(80075),l=o(n(93392)),h=n(76314),p=n(14997),f=n(99522),g=n(16132);class m{constructor(e,t,n){this.chainGetter=e,this.chainId=t,this.getKeplr=n,this._isSendingTx=!1,this.validateAndGetAddressInfo=(e,t)=>{try{return(0,l.default)(e,t,{castTestnetTo:"signet"===t?l.Network.signet:void 0})?(0,l.getAddressInfo)(e,{castTestnetTo:"signet"===t?l.Network.signet:void 0}):null}catch(e){return null}},this.calculateTxSize=(e,t,n,r)=>{const i=Object.assign({},n);if(r){const t=`${e}_output_count`;i[t]=(i[t]||0)+1}return this._txSizeEstimator.calcTxSize(Object.assign({input_count:t,input_script:e},i))},(0,u.makeObservable)(this),this._txSizeEstimator=new g.BitcoinTxSizeEstimator}setIsSendingTx(e){this._isSendingTx=e}get isSendingTx(){return this._isSendingTx}selectUTXOs({senderAddress:e,utxos:t,outputs:n,feeRate:r,isSendMax:i=!1,prevalidatedAddressInfos:s}){if(!t.length||!n.length||r<=0)throw new Error("Invalid parameters");const[,o,a]=this.chainId.split(":"),u=c.GENESIS_HASH_TO_NETWORK[o];if(!u||"native-segwit"!==a&&"taproot"!==a)throw new Error("Invalid chain id");const l=n.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),h=new d.Dec(f.DUST_THRESHOLD);if(l.lt(h))throw new Error("Target value is less than dust threshold");if(l.gt(new d.Dec(f.MAX_BITCOIN_SUPPLY)))throw new Error(`Amount exceeds maximum Bitcoin supply (${f.MAX_BITCOIN_SUPPLY} BTC)`);const g=new Map,m=e=>{if(g.has(e))return g.get(e);if(s){const t=s.find((t=>t.address===e));if(t)return g.set(e,t),t}const t=this.validateAndGetAddressInfo(e,u);if(!t)throw new Error(`Invalid address: ${e}`);return g.set(e,t),t},y=m(e);if(!y)throw new Error("Invalid sender address");const v=n.map((({address:e})=>{try{return m(e)}catch(t){throw new Error(`Invalid recipient address: ${e}`)}})).filter(Boolean);if(v.length!==n.length)throw new Error("Outputs include invalid addresses");const b=this.calculateOutputParams(v),w=(e,t,n)=>this.calculateTxSize(y.type,e,t,n),_=e=>{const t=new d.Dec(Math.ceil(e*r));return t.lt(new d.Dec(f.MIN_RELAY_FEE))?new d.Dec(f.MIN_RELAY_FEE):t},O=e=>e.lt(h);if(i)return{selectedUtxos:t,txSize:w(t.length,b,!1),remainderStatus:p.RemainderStatus.None,remainderValue:"0"};const C=t.sort(((e,t)=>t.value-e.value)),I=this.trySingleUtxoSelection({utxos:C,targetValue:l,calculateTxSize:w,calculateFee:_,isDust:O,outputParams:b});if(I)return I;const S=this.selectMultipleUtxos({utxos:C,targetValue:l,calculateTxSize:w,calculateFee:_,isDust:O,outputParams:b,timeoutMs:f.BRANCH_AND_BOUND_TIMEOUT_MS});if(!S||0===S.size)return null;const k=t.filter((e=>S.has(`${e.txid}:${e.vout}`))),P=k.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),M=w(k.length,b,!0),R=_(M.txVBytes),A=P.sub(l).sub(R);if(A.gte(h))return{selectedUtxos:k,txSize:M,remainderStatus:p.RemainderStatus.UsedAsChange,remainderValue:A.truncate().toString()};const D=w(k.length,b,!1),T=_(D.txVBytes),x=P.sub(l).sub(T);return x.gte(new d.Dec(0))?{selectedUtxos:k,txSize:D,remainderStatus:p.RemainderStatus.AddedToFee,remainderValue:x.truncate().toString()}:{selectedUtxos:k,txSize:D,remainderStatus:p.RemainderStatus.None,remainderValue:"0"}}prepareOutputsForSingleRecipient(e,t,n){const[,r]=n.split(":"),i=c.GENESIS_HASH_TO_NETWORK[r];if(!i)throw new Error(`Unsupported network: ${r}`);const s=this.validateAndGetAddressInfo(t,i);if(!s)throw new Error("Invalid recipient address");if(e.gt(new d.Dec(f.MAX_BITCOIN_SUPPLY)))throw new Error(`Amount exceeds maximum Bitcoin supply (${f.MAX_BITCOIN_SUPPLY} BTC)`);const o=new d.Dec(f.MAX_SAFE_OUTPUT),a=[],u=new d.Dec(0);if(e.gt(o)){let n=e;for(;n.gt(u);){const e=n.gt(o)?o:n;a.push({address:t,value:e.truncate().toBigNumber().toJSNumber()}),n=n.sub(e)}}else a.push({address:t,value:e.truncate().toBigNumber().toJSNumber()});return{recipientAddressInfo:s,outputs:a}}calculateOutputParams(e){const t={};return e.forEach((e=>{const n=`${e.type}_output_count`;t[n]=(t[n]||0)+1})),t}trySingleUtxoSelection({utxos:e,targetValue:t,calculateTxSize:n,calculateFee:r,outputParams:i}){for(const s of e){const e=new d.Dec(s.value),o=n(1,i,!0),a=r(o.txVBytes),c=e.sub(t).sub(a);if(c.gte(new d.Dec(f.DUST_THRESHOLD)))return{selectedUtxos:[s],txSize:o,remainderStatus:p.RemainderStatus.UsedAsChange,remainderValue:c.truncate().toString()};const u=n(1,i,!1),l=r(u.txVBytes),h=e.sub(t).sub(l);if(h.gte(new d.Dec(0)))return{selectedUtxos:[s],txSize:u,remainderStatus:p.RemainderStatus.AddedToFee,remainderValue:h.truncate().toString()}}return null}selectMultipleUtxos(e){return this.branchAndBoundSelection(e)||this.greedySelection(e)}buildPsbt({inputs:e,outputs:t,changeAddress:n,feeRate:r,maximumFeeRate:i=1e3,isSendMax:s=!1,hasChange:o=!1,prevalidatedAddressInfos:a}){if(!e.length)throw new Error("No inputs provided for transaction, at least one input is required");if(o&&!n)throw new Error("Change address is required when change is enabled");if(r<=0||r>i)throw new Error(`Invalid fee rate: ${r}, must be between 0 and ${i}`);const[,d]=this.chainId.split(":"),u=c.GENESIS_HASH_TO_NETWORK[d];if(!u)throw new Error(`Unsupported network: ${d}`);this.validateTransactionEconomics(e,t,s);const{inputsWithAddressInfo:l,outputsWithAddressInfo:h}=this.processAddresses(e,t,n,o,u,r,a);return this.createPsbt(l,h,u,i)}validateTransactionEconomics(e,t,n){const r=e.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),i=t.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),s=r.sub(i);if(!n&&s.lt(new d.Dec(0)))throw new Error("Insufficient balance")}processAddresses(e,t,n,r,i,s,o){const a=new Map,c=e=>{if(a.has(e))return a.get(e);if(o){const t=o.find((t=>t.address===e));if(t)return a.set(e,t),t}const t=this.validateAndGetAddressInfo(e,i);if(!t)throw new Error(`Invalid address: ${e}`);return a.set(e,t),t},u=e.map((e=>{try{const t=c(e.address);return Object.assign(Object.assign({},e),{addressInfo:t})}catch(t){throw new Error(`Invalid sender address: ${e.address}`)}})),l=t.map((e=>{try{const t=c(e.address);return Object.assign(Object.assign({},e),{addressInfo:t})}catch(t){throw new Error(`Invalid recipient address: ${e.address}`)}}));if(r&&n)try{const r=c(n),i=e.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),o=t.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0)),a={};l.forEach((e=>{const t=`${e.addressInfo.type}_output_count`;a[t]=(a[t]||0)+1}));const h=`${r.type}_output_count`;a[h]=(a[h]||0)+1;const p={};u.forEach((e=>{p[e.addressInfo.type]=(p[e.addressInfo.type]||0)+1}));let g="p2tr",m=0;Object.entries(p).forEach((([e,t])=>{t>m&&(m=t,g=e)}));const{txVBytes:y}=this._txSizeEstimator.calcTxSize(Object.assign({input_count:e.length,input_script:g},a)),v=new d.Dec(Math.ceil(y*s)),b=v.lt(new d.Dec(f.MIN_RELAY_FEE))?new d.Dec(f.MIN_RELAY_FEE):v,w=i.sub(o).sub(b);w.gte(new d.Dec(f.DUST_THRESHOLD))?l.push({address:n,value:w.truncate().toBigNumber().toJSNumber(),addressInfo:r}):console.warn("Change amount is less than dust threshold")}catch(e){throw new Error("Invalid change address")}return{inputsWithAddressInfo:u,outputsWithAddressInfo:l}}createPsbt(e,t,n,r){const i="mainnet"===n?h.networks.bitcoin:h.networks.testnet;try{const n=new h.Psbt({network:i});for(const t of e)this.addInputToPsbt(n,t,i);for(const e of t)n.addOutput({address:e.address,value:e.value});return n.setMaximumFeeRate(r),n.toHex()}catch(e){if(console.error("Error creating PSBT:",e),e instanceof Error)throw new Error(`Failed to build PSBT: ${e.message}`);throw new Error("Failed to build PSBT: Unknown error")}}addInputToPsbt(e,t,n){const r={hash:t.txid,index:t.vout,sequence:4294967293};if("p2pkh"===t.addressInfo.type){if(!t.nonWitnessUtxo)throw new Error("Non-witness UTXO is required for p2pkh inputs");t.bip32Derivation&&(r.bip32Derivation=t.bip32Derivation),e.addInput(Object.assign(Object.assign({},r),{nonWitnessUtxo:t.nonWitnessUtxo}))}else if("p2wpkh"===t.addressInfo.type)t.bip32Derivation&&(r.bip32Derivation=t.bip32Derivation),e.addInput(Object.assign(Object.assign({},r),{witnessUtxo:{script:h.address.toOutputScript(t.address,n),value:t.value}}));else if("p2tr"===t.addressInfo.type){if(!t.tapInternalKey&&!t.tapBip32Derivation)throw new Error("Tap internal key or bip32 derivation is required for p2tr inputs");t.tapInternalKey&&(r.tapInternalKey=t.tapInternalKey),t.tapBip32Derivation&&(r.tapBip32Derivation=t.tapBip32Derivation),e.addInput(Object.assign(Object.assign({},r),{witnessUtxo:{script:h.address.toOutputScript(t.address,n),value:t.value}}))}}signPsbt(e){return a(this,void 0,void 0,(function*(){const{getKeplr:t}=this,n=yield t();if(!n)throw new Error("Keplr not found");return n.signPsbt(this.chainId,e)}))}branchAndBoundSelection({utxos:e,targetValue:t,calculateTxSize:n,calculateFee:r,isDust:i,outputParams:s,timeoutMs:o}){const a=null!=o?o:f.BRANCH_AND_BOUND_TIMEOUT_MS,c=Date.now(),u=e.reduce(((e,t)=>e.add(new d.Dec(t.value))),new d.Dec(0));if(t.gt(u))return null;const l=(o,u,h,p,f=!1)=>{if(Date.now()-c>a)return null;const g=((e,t)=>{const i=n(e.size,s,!0);return r(i.txVBytes)})(u),m=h.sub(g);let y=null;if(m.gte(t)){const e=m.sub(t);i(e),y={utxoIds:new Set(u),totalValue:h,effectiveValue:m,wastage:e}}if(o>=e.length||f)return y;const v=e[o],b=`${v.txid}:${v.vout}`,w=new d.Dec(v.value);if(m.add(p).lt(t))return y;if(y&&m.gte(t)&&m.sub(t).lt(y.wastage))return y;u.add(b);const _=p.sub(w),O=l(o+1,new Set(u),h.add(w),_);u.delete(b);const C=l(o+1,new Set(u),h,_);if(!O)return C;if(!C)return O;const I=i(O.wastage),S=i(C.wastage);return!I&&S?O:I&&!S?C:O.wastage.lt(C.wastage)?O:C},h=l(0,new Set,new d.Dec(0),u);return h?h.utxoIds:null}greedySelection({utxos:e,targetValue:t,calculateTxSize:n,calculateFee:r,isDust:i,outputParams:s}){const o=new Set;let a=new d.Dec(0);for(const c of e){const e=`${c.txid}:${c.vout}`;o.add(e),a=a.add(new d.Dec(c.value));const u=r(n(o.size,s,!0).txVBytes),l=i(a.sub(t).sub(u));if(a.gte(t)&&!l)break}let c=n(o.size,s,!0),u=r(c.txVBytes),l=a.sub(t).sub(u);if(l.lt(new d.Dec(0)))for(const i of e){const e=`${i.txid}:${i.vout}`;if(!o.has(e)&&(o.add(e),a=a.add(new d.Dec(i.value)),c=n(o.size,s,!0),u=r(c.txVBytes),l=a.sub(t).sub(u),l.gte(new d.Dec(0))))break}if(i(l)&&l.gt(new d.Dec(0)))for(const c of e){const e=`${c.txid}:${c.vout}`;if(o.has(e))continue;o.add(e);const u=a.add(new d.Dec(c.value)),l=r(n(o.size,s,!0).txVBytes),h=u.sub(t).sub(l);if(!i(h)&&h.gt(new d.Dec(0))){a=u;break}o.delete(e)}return o}}s([u.observable],m.prototype,"_isSendingTx",void 0),s([u.action],m.prototype,"setIsSendingTx",null),t.BitcoinAccountBase=m},99522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_BITCOIN_SUPPLY=t.MAX_SAFE_OUTPUT=t.MIN_RELAY_FEE=t.BRANCH_AND_BOUND_TIMEOUT_MS=t.DUST_THRESHOLD=void 0,t.DUST_THRESHOLD=546,t.BRANCH_AND_BOUND_TIMEOUT_MS=1e3,t.MIN_RELAY_FEE=157,t.MAX_SAFE_OUTPUT=Math.pow(2,53)-1,t.MAX_BITCOIN_SUPPLY=21e13},17431:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4238),t),i(n(44136),t),i(n(14997),t),i(n(99522),t)},44136:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BitcoinAccountStore=void 0;const r=n(11169),i=n(4238);class s extends r.HasMapStore{constructor(e,t){super((n=>new i.BitcoinAccountBase(e,n,t))),this.chainGetter=e,this.getKeplr=t}getAccount(e){const t=this.chainGetter.getModularChain(e);if(!("bitcoin"in t))throw new Error(`${e} is not bitcoin chain`);return this.get(t.chainId)}}t.BitcoinAccountStore=s},16132:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BitcoinTxSizeEstimator=void 0;const r=n(19731);t.BitcoinTxSizeEstimator=class{constructor(){this.P2PKH_IN_SIZE=148,this.P2PKH_OUT_SIZE=34,this.P2SH_OUT_SIZE=32,this.P2SH_P2WPKH_OUT_SIZE=32,this.P2SH_P2WSH_OUT_SIZE=32,this.P2SH_P2WPKH_IN_SIZE=91,this.P2WPKH_IN_SIZE=67.75,this.P2WPKH_OUT_SIZE=31,this.P2WSH_OUT_SIZE=43,this.P2TR_OUT_SIZE=43,this.P2TR_IN_SIZE=57.25,this.PUBKEY_SIZE=33,this.SIGNATURE_SIZE=72,this.SUPPORTED_INPUT_SCRIPT_TYPES=["p2pkh","p2sh","p2sh-p2wpkh","p2sh-p2wsh","p2wpkh","p2wsh","p2tr"],this.defaultParams={input_count:0,input_script:"p2wpkh",input_m:0,input_n:0,p2pkh_output_count:0,p2sh_output_count:0,p2sh_p2wpkh_output_count:0,p2sh_p2wsh_output_count:0,p2wpkh_output_count:0,p2wsh_output_count:0,p2tr_output_count:0},this.params=Object.assign({},this.defaultParams)}getSizeOfScriptLengthElement(e){if(e<75)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=4294967295)return 5;throw new Error("Size of redeem script is too large")}getSizeOfVarInt(e){if(e<253)return 1;if(e<65535)return 3;if(e<4294967295)return 5;if(new r.Int(e).lt(new r.Int("18446744073709551615")))return 9;throw new Error("Invalid let int")}getTxOverheadVBytes(e,t,n){let r;return r="p2pkh"===e||"p2sh"===e?0:.5+this.getSizeOfVarInt(t)/4,4+this.getSizeOfVarInt(t)+this.getSizeOfVarInt(n)+4+r}getTxOverheadExtraRawBytes(e,t){let n;return n="p2pkh"===e||"p2sh"===e?0:.5+this.getSizeOfVarInt(t)/4,3*n}prepareParams(e){const t=(e=e||Object.assign(this.defaultParams)).input_count||this.defaultParams.input_count;if(!Number.isInteger(t)||t<0)throw new Error("expecting positive input count, got: "+t);const n=e.input_script||this.defaultParams.input_script;if(-1===this.SUPPORTED_INPUT_SCRIPT_TYPES.indexOf(n))throw new Error("Not supported input script type");const r=e.input_m||this.defaultParams.input_m;if(!Number.isInteger(r)||r<0)throw new Error("expecting positive signature count");const i=e.input_n||this.defaultParams.input_n;if(!Number.isInteger(i)||i<0)throw new Error("expecting positive pubkey count");const s=e.p2pkh_output_count||this.defaultParams.p2pkh_output_count;if(!Number.isInteger(s)||s<0)throw new Error("expecting positive p2pkh output count");const o=e.p2sh_output_count||this.defaultParams.p2sh_output_count;if(!Number.isInteger(o)||o<0)throw new Error("expecting positive p2sh output count");const a=e.p2sh_p2wpkh_output_count||this.defaultParams.p2sh_p2wpkh_output_count;if(!Number.isInteger(a)||a<0)throw new Error("expecting positive p2sh-p2wpkh output count");const c=e.p2sh_p2wsh_output_count||this.defaultParams.p2sh_p2wsh_output_count;if(!Number.isInteger(c)||c<0)throw new Error("expecting positive p2sh-p2wsh output count");const d=e.p2wpkh_output_count||this.defaultParams.p2wpkh_output_count;if(!Number.isInteger(d)||d<0)throw new Error("expecting positive p2wpkh output count");const u=e.p2wsh_output_count||this.defaultParams.p2wsh_output_count;if(!Number.isInteger(u)||u<0)throw new Error("expecting positive p2wsh output count");const l=e.p2tr_output_count||this.defaultParams.p2tr_output_count;if(!Number.isInteger(l)||l<0)throw new Error("expecting positive p2tr output count");return this.params={input_count:t,input_script:n,input_m:r,input_n:i,p2pkh_output_count:s,p2sh_output_count:o,p2sh_p2wpkh_output_count:a,p2sh_p2wsh_output_count:c,p2wpkh_output_count:d,p2wsh_output_count:u,p2tr_output_count:l},this.params}getOutputCount(){return this.params.p2pkh_output_count+this.params.p2sh_output_count+this.params.p2sh_p2wpkh_output_count+this.params.p2sh_p2wsh_output_count+this.params.p2wpkh_output_count+this.params.p2wsh_output_count+this.params.p2tr_output_count}getSizeBasedOnInputType(){let e,t=0,n=0;switch(this.params.input_script){case"p2pkh":t=this.P2PKH_IN_SIZE;break;case"p2sh-p2wpkh":t=this.P2SH_P2WPKH_IN_SIZE,n=107;break;case"p2wpkh":t=this.P2WPKH_IN_SIZE,n=107;break;case"p2tr":t=this.P2TR_IN_SIZE,n=65;break;case"p2sh":e=1+this.params.input_n*(1+this.PUBKEY_SIZE)+1+1;const r=1+this.params.input_m*(1+this.SIGNATURE_SIZE)+this.getSizeOfScriptLengthElement(e)+e;t=36+this.getSizeOfVarInt(r)+r+4;break;case"p2sh-p2wsh":case"p2wsh":e=1+this.params.input_n*(1+this.PUBKEY_SIZE)+1+1,n=1+this.params.input_m*(1+this.SIGNATURE_SIZE)+this.getSizeOfScriptLengthElement(e)+e,t=36+n/4+4,"p2sh-p2wsh"===this.params.input_script&&(t+=35);break;default:throw new Error("Not supported input script type")}return{inputSize:t,inputWitnessSize:n}}calcTxSize(e){this.prepareParams(e);const t=this.getOutputCount(),{inputSize:n,inputWitnessSize:r}=this.getSizeBasedOnInputType(),i=this.getTxOverheadVBytes(this.params.input_script,this.params.input_count,t)+n*this.params.input_count+this.P2PKH_OUT_SIZE*this.params.p2pkh_output_count+this.P2SH_OUT_SIZE*this.params.p2sh_output_count+this.P2SH_P2WPKH_OUT_SIZE*this.params.p2sh_p2wpkh_output_count+this.P2SH_P2WSH_OUT_SIZE*this.params.p2sh_p2wsh_output_count+this.P2WPKH_OUT_SIZE*this.params.p2wpkh_output_count+this.P2WSH_OUT_SIZE*this.params.p2wsh_output_count+this.P2TR_OUT_SIZE*this.params.p2tr_output_count;return{txVBytes:i,txBytes:this.getTxOverheadExtraRawBytes(this.params.input_script,this.params.input_count)+i+r*this.params.input_count,txWeight:4*i}}estimateFee(e,t){if(isNaN(e)||isNaN(t))throw new Error("Parameters should be numbers");return e*t}formatFeeRange(e,t){if(isNaN(e)||isNaN(t))throw new Error("Parameters should be numbers");if(t<0)throw new Error("Multiplier cant be negative");const n=e*t;return e-n+" - "+(e+n)}}},14997:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RemainderStatus=void 0,(n=t.RemainderStatus||(t.RemainderStatus={})).UsedAsChange="used_as_change",n.AddedToFee="added_to_fee",n.None="none"},85522:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17431),t),i(n(85285),t)},3581:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableBitcoinIndexerQuery=void 0;const r=n(11169);class i extends r.ObservableQuery{constructor(e,t,n,r,i){let s="";const o=n.getModularChain(t);"bitcoin"in o&&(s=o.bitcoin.rest),super(e,s,r,i),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableBitcoinIndexerQuery=i},85285:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BitcoinQueriesStore=void 0;const r=n(67759);t.BitcoinQueriesStore=class{constructor(e,t){this.sharedContext=e,this.chainGetter=t,this.map=new Map}get(e){const t=this.map.get(e);if(t)return t;const n=new i(this.sharedContext,e,this.chainGetter);return this.map.set(e,n),n}};class i{constructor(e,t,n){this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.queryBitcoinBalance=new r.ObservableQueryBitcoinBalance(e),this.queryBitcoinUTXOs=new r.ObservableQueryBitcoinUTXOs(e),this.queryBitcoinTx=new r.ObservableQueryBitcoinTx(e),this.queryBitcoinAddressTxs=new r.ObservableQueryBitcoinAddressTxs(e),this.queryBitcoinFeeEstimates=new r.ObservableQueryBitcoinFeeEstimates(e,t,n)}}},78556:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBitcoinAddressTxs=t.ObservableQueryBitcoinAddressTxsImpl=void 0;const r=n(3581),i=n(80075);class s extends r.ObservableBitcoinIndexerQuery{constructor(e,t,n,r,s){super(e,t,n,s?`address/${r}/txs/chain/${s}`:`address/${r}/txs`),this.address=r,this.lastSeenTxId=s,(0,i.makeObservable)(this)}get txs(){var e;return null===(e=this.response)||void 0===e?void 0:e.data}}t.ObservableQueryBitcoinAddressTxsImpl=s,t.ObservableQueryBitcoinAddressTxs=class{constructor(e){this.sharedContext=e,this.map=new Map}getTxs(e,t,n){const r=`${e}/${n}`,i=this.map.get(r);if(i)return i;if(!("bitcoin"in t.getModularChain(e)))return;const o=new s(this.sharedContext,e,t,n);return this.map.set(r,o),o}}},62349:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBitcoinBalance=t.ObservableQueryBitcoinBalanceImpl=void 0;const i=n(80075),s=n(89642),o=n(19731),a=n(3581);class c extends a.ObservableBitcoinIndexerQuery{constructor(e,t,n,r,s){super(e,t,n,`address/${s}`),this.denomHelper=r,this.address=s,(0,i.makeObservable)(this)}get balance(){if(!this.response||!this.response.data)return new o.CoinPretty(this.currency,new o.Dec(0));const e=this.response.data;return new o.CoinPretty(this.currency,new o.Dec(e.chain_stats.funded_txo_sum-e.chain_stats.spent_txo_sum))}get currency(){const e=this.denomHelper.denom;if(!("bitcoin"in this.chainGetter.getModularChain(this.chainId)))throw new Error(`${this.chainId} is not bitcoin chain`);const t=this.chainGetter.getModularChainInfoImpl(this.chainId).getCurrencies("bitcoin").find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${e}`);return t}}r([i.computed],c.prototype,"balance",null),r([i.computed],c.prototype,"currency",null),t.ObservableQueryBitcoinBalanceImpl=c,t.ObservableQueryBitcoinBalance=class{constructor(e){this.sharedContext=e,this.map=new Map}getBalance(e,t,n,r){const i=`${e}/${n}/${r}`,o=this.map.get(i);if(o)return o;const a=new s.DenomHelper(r);if(!("bitcoin"in t.getModularChain(e)))return;const d=new c(this.sharedContext,e,t,a,n);return this.map.set(i,d),d}}},2149:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBitcoinFeeEstimates=void 0;const r=n(3581),i=n(80075);class s extends r.ObservableBitcoinIndexerQuery{constructor(e,t,n){super(e,t,n,"fee-estimates"),(0,i.makeObservable)(this)}get fees(){const e={fastestFee:5,halfHourFee:4,hourFee:3,economyFee:2,minimumFee:1};if(!this.response||!this.response.data)return e;const t=this.response.data,n=Object.keys(t).map(Number).sort(((e,t)=>e-t));if(0===n.length)return e;const r=e=>{if(t[e.toString()])return t[e.toString()];if(0===n.length)return 1;let r=n[0];for(const t of n)Math.abs(t-e)<Math.abs(r-e)&&(r=t);return t[r.toString()]},i=n.length>0?t[n[n.length-1].toString()]:1;return{fastestFee:r(1),halfHourFee:r(3),hourFee:r(6),economyFee:r(12),minimumFee:i}}}t.ObservableQueryBitcoinFeeEstimates=s},67759:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(78556),t),i(n(62349),t),i(n(2149),t),i(n(21994),t),i(n(72640),t)},21994:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBitcoinTx=t.ObservableQueryBitcoinTxImpl=void 0;const r=n(3581),i=n(80075),s=n(76314);class o extends r.ObservableBitcoinIndexerQuery{constructor(e,t,n,r){super(e,t,n,`tx/${r}/hex`),this.txid=r,(0,i.makeObservable)(this)}get txHex(){var e;return null===(e=this.response)||void 0===e?void 0:e.data}get tx(){if(this.txHex)return s.Transaction.fromHex(this.txHex)}}t.ObservableQueryBitcoinTxImpl=o,t.ObservableQueryBitcoinTx=class{constructor(e){this.sharedContext=e,this.map=new Map}getTx(e,t,n){const r=`${e}/${n}`,i=this.map.get(r);if(i)return i;if(!("bitcoin"in t.getModularChain(e)))return;const s=new o(this.sharedContext,e,t,n);return this.map.set(r,s),s}}},72640:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBitcoinUTXOs=t.ObservableQueryBitcoinUTXOsImpl=void 0;const r=n(3581),i=n(80075);class s extends r.ObservableBitcoinIndexerQuery{constructor(e,t,n,r){super(e,t,n,`address/${r}/utxo`),this.address=r,(0,i.makeObservable)(this)}get UTXOs(){var e;return null===(e=this.response)||void 0===e?void 0:e.data}get confirmedUTXOs(){var e;return null===(e=this.UTXOs)||void 0===e?void 0:e.filter((e=>e.status.confirmed))}}t.ObservableQueryBitcoinUTXOsImpl=s,t.ObservableQueryBitcoinUTXOs=class{constructor(e){this.sharedContext=e,this.map=new Map}getUTXOs(e,t,n){const r=`${e}/${n}`,i=this.map.get(r);if(i)return i;if(!("bitcoin"in t.getModularChain(e)))return;const o=new s(this.sharedContext,e,t,n);return this.map.set(r,o),o}}},25472:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(43705),t),i(n(35263),t),i(n(73659),t),i(n(15915),t)},45993:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignBitcoinMessageInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-bitcoin-message")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{message:t,signature:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-bitcoin-message")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignBitcoinMessageInteractionStore=o},50636:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignBitcoinTxInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-bitcoin-psbt")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{psbtSignData:t,signedPsbtsHexes:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-bitcoin-psbt")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignBitcoinTxInteractionStore=o},74484:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ChainSuggestStore=void 0;const s=n(33783),o=n(80075),a=n(94531),c=n(89642),d=n(86693);class u{constructor(e,t){this.interactionStore=e,this.communityChainInfoRepo=t,this.communityChainInfo=new Map,(0,o.makeObservable)(this)}get waitingSuggestedChainInfo(){const e=this.interactionStore.getAllData(s.SuggestChainInfoMsg.type());if(e.length>0)return e[0]}get waitingSuggestedChainInfos(){return this.interactionStore.getAllData(s.SuggestChainInfoMsg.type())}get communityChainInfoRepoUrl(){return`https://github.com/${this.communityChainInfoRepo.organizationName}/${this.communityChainInfoRepo.repoName}`}getCommunityChainInfoUrl(e){const t=e.startsWith("eip155:"),n=a.ChainIdHelper.parse(e);return`${this.communityChainInfoRepoUrl}/blob/${this.communityChainInfoRepo.branchName}/${t?"evm":"cosmos"}/${n.identifier}.json`}getCommunityChainInfo(e){const t=a.ChainIdHelper.parse(e).identifier;return this.communityChainInfo.has(t)||this.fetchCommunityChainInfo(e),this.communityChainInfo.get(t)}*fetchCommunityChainInfo(e){var t;const n=a.ChainIdHelper.parse(e).identifier;if(!this.communityChainInfo.get(n)){this.communityChainInfo.set(n,{isLoading:!0,chainInfo:void 0});try{const r=e.startsWith("eip155:"),i=yield*(0,c.toGenerator)((0,d.simpleFetch)(this.communityChainInfoRepo.alternativeURL?this.communityChainInfoRepo.alternativeURL.replace("{chain_identifier}",n).replace("/cosmos/",r?"/evm/":"/cosmos/"):`https://raw.githubusercontent.com/${this.communityChainInfoRepo.organizationName}/${this.communityChainInfoRepo.repoName}/${this.communityChainInfoRepo.branchName}/${r?"evm":"cosmos"}/${n}.json`)),s="rest"in i.data&&!r?i.data:Object.assign(Object.assign({},i.data),{rest:i.data.rpc,evm:Object.assign({chainId:parseInt(i.data.chainId.replace("eip155:",""),10),rpc:i.data.rpc},"websocket"in i.data&&{websocket:i.data.websocket}),features:["eth-address-gen","eth-key-sign"].concat(null!==(t=i.data.features)&&void 0!==t?t:[])});if(a.ChainIdHelper.parse(i.data.chainId).identifier!==n)throw new Error(`Invalid chain identifier: (expected: ${n}, actual: ${a.ChainIdHelper.parse(i.data.chainId).identifier})`);this.communityChainInfo.set(n,{isLoading:!1,chainInfo:s})}catch(e){console.log(e),this.communityChainInfo.set(n,{isLoading:!1,chainInfo:void 0})}}}approveWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,t,n)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.SuggestChainInfoMsg.type())}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([o.observable.shallow],u.prototype,"communityChainInfo",void 0),r([o.flow],u.prototype,"fetchCommunityChainInfo",null),t.ChainSuggestStore=u},20833:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignEthereumInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-ethereum")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{signingData:t,signature:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-ethereum")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignEthereumInteractionStore=o},23782:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ICNSInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-icns-adr36")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{},t)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-icns-adr36")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.ICNSInteractionStore=o},43705:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(83769),t),i(n(45685),t),i(n(76942),t),i(n(74484),t),i(n(23782),t),i(n(20833),t),i(n(79499),t),i(n(28001),t),i(n(50636),t),i(n(45993),t)},83769:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionStore=void 0;const s=n(47722),o=n(33783),a=n(80075),c=n(58242);class d{constructor(e,t,n,r,i,s,d){this.router=e,this.msgRequester=t,this.afterInteraction=n,this.onDataReceived=r,this.onDataChanged=i,this.pingHandler=s,this.interactionIdPingHandler=d,this._isInitialized=!1,this.data=[],this.obsoleteData=new Map,this.getAllData=(0,c.computedFn)((e=>(0,a.toJS)(this.data.filter((t=>t.type===e))))),this.getData=(0,c.computedFn)((e=>this.data.find((t=>t.id===e)))),(0,a.makeObservable)(this);const u=new o.InteractionForegroundService(this,s,d);(0,o.interactionForegroundInit)(e,u),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshData(),(0,a.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}refreshData(){return i(this,void 0,void 0,(function*(){const e=this.data.map((e=>e.id)).join("/");let t=yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.GetInteractionWaitingDataArrayMsg);if(this.onDataReceived&&(t=yield this.onDataReceived(t)),e!==t.map((e=>e.id)).join("/")){const e=this.data.slice();(0,a.runInAction)((()=>{this.data=t})),this.onDataChanged&&this.onDataChanged(e,t.slice())}}))}onInteractionDataReceived(){this.refreshData()}onEventDataReceived(){}*approveWithProceedNext(e,t,n){if(this.getData(e)&&!this.isObsoleteInteraction(e)&&(this.markAsObsolete(e,!0),yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.ApproveInteractionMsg(e,t)),yield this.delay(100),yield n(this.hasOtherData(e)),this.removeData(e),this.afterInteraction)){const e=this.data[0];this.afterInteraction(e)}}*approveWithProceedNextV2(e,t,n,r={}){var i;"string"==typeof e&&(e=[e]);const a=[];for(const t of e)this.getData(t)&&!this.isObsoleteInteraction(t)&&(this.markAsObsolete(t,!0),a.push(t));r.preDelay&&r.preDelay>0&&(yield new Promise((e=>setTimeout(e,r.preDelay))));const c=[];for(const e of a)c.push(this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.ApproveInteractionV2Msg(e,t)));if(yield Promise.all(c),(null==r.postDelay||r.postDelay>0)&&(yield this.delay(null!==(i=r.postDelay)&&void 0!==i?i:50)),yield n(this.hasOtherData(e)),this.removeData(e),this.afterInteraction){const e=this.data[0];this.afterInteraction(e)}}*rejectWithProceedNext(e,t){if(this.getData(e)&&!this.isObsoleteInteraction(e)&&(this.markAsObsolete(e),yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionMsg(e)),yield this.delay(100),yield t(this.hasOtherData(e)),this.removeData(e),this.afterInteraction)){const e=this.data[0];this.afterInteraction(e)}}*rejectWithProceedNextV2(e,t){"string"==typeof e&&(e=[e]);const n=[];for(const t of e)this.getData(t)&&!this.isObsoleteInteraction(t)&&(this.markAsObsolete(t),n.push(t));const r=[];for(const e of n)r.push(this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionV2Msg(e)));if(yield Promise.all(r),yield this.delay(50),yield t(this.hasOtherData(e)),this.removeData(e),this.afterInteraction){const e=this.data[0];this.afterInteraction(e)}}delay(e){return new Promise((t=>{setTimeout(t,e)}))}*rejectAll(e){const t=this.getAllData(e);for(const e of t)this.isObsoleteInteraction(e.id)||(yield this.msgRequester.sendMessage(s.BACKGROUND_PORT,new o.RejectInteractionMsg(e.id)),this.removeData(e.id))}isObsoleteInteraction(e){var t,n;return!!e&&null!==(n=null===(t=this.obsoleteData.get(e))||void 0===t?void 0:t.obsolete)&&void 0!==n&&n}isObsoleteInteractionApproved(e){if(!e)return!1;const t=this.obsoleteData.get(e);return!!t&&t.obsolete&&t.approved}removeData(e){"string"==typeof e&&(e=[e]);for(const t of e)this.data=this.data.filter((e=>e.id!==t)),this.obsoleteData.delete(t)}markAsObsolete(e,t=!1){this.getData(e)&&this.obsoleteData.set(e,{obsolete:!0,approved:t})}hasOtherData(e){return"string"==typeof e&&(e=[e]),!!this.data.find((t=>!e.includes(t.id)))}}r([a.observable],d.prototype,"_isInitialized",void 0),r([a.observable.shallow],d.prototype,"data",void 0),r([a.observable.shallow],d.prototype,"obsoleteData",void 0),r([a.action],d.prototype,"onInteractionDataReceived",null),r([a.action],d.prototype,"onEventDataReceived",null),r([a.flow],d.prototype,"approveWithProceedNext",null),r([a.flow],d.prototype,"approveWithProceedNextV2",null),r([a.flow],d.prototype,"rejectWithProceedNext",null),r([a.flow],d.prototype,"rejectWithProceedNextV2",null),r([a.flow],d.prototype,"rejectAll",null),r([a.action],d.prototype,"removeData",null),r([a.action],d.prototype,"markAsObsolete",null),t.InteractionStore=d},45685:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionStore=void 0;const s=n(33783),o=n(47722),a=n(80075);class c{constructor(e,t,n){this.interactionStore=e,this.permissionManagerStore=t,this.requester=n,(0,a.makeObservable)(this)}get waitingPermissionData(){if(this.waitingPermissionDatas.length>0)return this.waitingPermissionDatas[0]}get waitingPermissionDatas(){return this.interactionStore.getAllData(s.INTERACTION_TYPE_PERMISSION)}get waitingPermissionMergedData(){const e=this.waitingPermissionDatas.filter((e=>{var t,n,r;return!(null===(t=e.data.options)||void 0===t?void 0:t.isForEVM)&&!(null===(n=e.data.options)||void 0===n?void 0:n.isForStarknet)&&!(null===(r=e.data.options)||void 0===r?void 0:r.isForBitcoin)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingPermissionMergedDataForEVM(){const e=this.waitingPermissionDatas.filter((e=>{var t;return!!(null===(t=e.data.options)||void 0===t?void 0:t.isForEVM)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingPermissionMergedDataForStarknet(){const e=this.waitingPermissionDatas.filter((e=>{var t;return!!(null===(t=e.data.options)||void 0===t?void 0:t.isForStarknet)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingPermissionMergedDataForBitcoin(){const e=this.waitingPermissionDatas.filter((e=>{var t;return!!(null===(t=e.data.options)||void 0===t?void 0:t.isForBitcoin)}));if(0===e.length)return;const t=e[0],n={ids:[t.id],chainIds:t.data.chainIds,type:t.data.type,origins:t.data.origins,options:t.data.options};for(let r=1;r<e.length;r++){const i=e[r];if(i.data.type!==t.data.type)break;if(i.data.origins.join(",")!==t.data.origins.join(","))break;n.ids.push(i.id),n.chainIds.push(...i.data.chainIds)}return n.chainIds=[...new Set(n.chainIds)],n}get waitingGlobalPermissionData(){if(this.waitingGlobalPermissionDatas.length>0)return this.waitingGlobalPermissionDatas[0]}get waitingGlobalPermissionDatas(){return this.interactionStore.getAllData(s.INTERACTION_TYPE_GLOBAL_PERMISSION)}approvePermissionWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,n,t),yield this.permissionManagerStore.syncPermissionsFromBackground()}))}rejectPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectPermissionAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.INTERACTION_TYPE_PERMISSION)}))}approveGlobalPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{},t),yield this.permissionManagerStore.syncPermissionsFromBackground()}))}rejectGlobalPermissionWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNextV2(e,t)}))}rejectGlobalPermissionAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll(s.INTERACTION_TYPE_GLOBAL_PERMISSION)}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}getOriginPermittedChains(e,t){return i(this,void 0,void 0,(function*(){return yield this.requester.sendMessage(o.BACKGROUND_PORT,new s.GetOriginPermittedChainsMsg(e,t))}))}}r([a.computed],c.prototype,"waitingPermissionMergedData",null),r([a.computed],c.prototype,"waitingPermissionMergedDataForEVM",null),r([a.computed],c.prototype,"waitingPermissionMergedDataForStarknet",null),r([a.computed],c.prototype,"waitingPermissionMergedDataForBitcoin",null),t.PermissionStore=c},76942:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignInteractionStore=void 0;const s=n(80075),o=n(94531);class a{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-cosmos").map((e=>{const t="amino"===e.data.mode?o.SignDocWrapper.fromAminoSignDoc(e.data.signDoc):e.data.isDirectAux?o.SignDocWrapper.fromDirectAuxSignDocBytes(e.data.signDocBytes):o.SignDocWrapper.fromDirectSignDocBytes(e.data.signDocBytes);return{id:e.id,type:e.type,isInternal:e.isInternal,data:Object.assign(Object.assign({},e.data),{signDocWrapper:t})}}))}get waitingData(){const e=this.waitingDatas;if(0===e.length)return;const t=e[0],n="amino"===t.data.mode?o.SignDocWrapper.fromAminoSignDoc(t.data.signDoc):t.data.isDirectAux?o.SignDocWrapper.fromDirectAuxSignDocBytes(t.data.signDocBytes):o.SignDocWrapper.fromDirectSignDocBytes(t.data.signDocBytes);return{id:t.id,type:t.type,isInternal:t.isInternal,data:Object.assign(Object.assign({},t.data),{signDocWrapper:n})}}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){const i="amino"===t.mode?{newSignDoc:t.aminoSignDoc}:{newSignDocBytes:t.protoSignDoc.toBytes()};yield this.interactionStore.approveWithProceedNextV2(e,Object.assign(Object.assign({},i),{signature:n}),r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-cosmos")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],a.prototype,"waitingDatas",null),r([s.computed],a.prototype,"waitingData",null),t.SignInteractionStore=a},28001:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignStarknetMessageInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-starknet-message")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{message:t,signature:n},r,s)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-starknet-message")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignStarknetMessageInteractionStore=o},79499:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SignStarknetTxInteractionStore=void 0;const s=n(80075);class o{constructor(e){this.interactionStore=e,(0,s.makeObservable)(this)}get waitingDatas(){return this.interactionStore.getAllData("request-sign-starknet-tx")}get waitingData(){const e=this.waitingDatas;if(0!==e.length)return e[0]}approveWithProceedNext(e,t,n,r,s,o={}){return i(this,void 0,void 0,(function*(){yield this.interactionStore.approveWithProceedNextV2(e,{transactions:t,details:n,signature:r},s,o)}))}rejectWithProceedNext(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAll(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("request-sign-starknet-tx")}))}isObsoleteInteraction(e){return this.interactionStore.isObsoleteInteraction(e)}isObsoleteInteractionApproved(e){return this.interactionStore.isObsoleteInteractionApproved(e)}}r([s.computed],o.prototype,"waitingData",null),t.SignStarknetTxInteractionStore=o},35263:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyRingStore=void 0;const s=n(47722),o=n(80075),a=n(89642),c=n(33783),d=n(94531);class u{constructor(e,t){this.eventDispatcher=e,this.requester=t,this._isInitialized=!1,this._status="not-loaded",this._needMigration=!1,this._isMigrating=!1,this._keyInfos=[],(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshKeyRingStatus(),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get needMigration(){return this._needMigration}get isMigrating(){return this._isMigrating}get isInitialized(){return this._isInitialized}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,o.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}get status(){return this._status}get keyInfos(){return this._keyInfos}fetchKeyRingStatus(){return i(this,void 0,void 0,(function*(){const e=new c.GetKeyRingStatusOnlyMsg;return(yield this.requester.sendMessage(s.BACKGROUND_PORT,e)).status}))}get selectedKeyInfo(){return this._keyInfos.find((e=>e.isSelected))}get isEmpty(){return"empty"===this._status}*refreshKeyRingStatus(){const e=new c.GetKeyRingStatusMsg,t=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,e));this._status=t.status,this._keyInfos=t.keyInfos,this._needMigration=t.needMigration,this._isMigrating=t.isMigrating}*selectKeyRing(e){const t=new c.SelectKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._status=n.status,this._keyInfos=n.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}needKeyCoinTypeFinalize(e,t){const n=this.keyInfos.find((t=>t.id===e));if(!n)return!1;if("mnemonic"!==n.type&&"keystone"!==n.type)return!1;const r=`keyRing-${d.ChainIdHelper.parse(t.chainId).identifier}-coinType`;return null==n.insensitive[r]}computeNotFinalizedKeyAddresses(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ComputeNotFinalizedKeyAddressesMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}showKeyRing(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ShowSensitiveKeyRingDataMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}*finalizeKeyCoinType(e,t,n){const r=new c.FinalizeKeyCoinTypeMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*newMnemonicKey(e,t,n,r,i){const o=new c.NewMnemonicKeyMsg(e,t,n,r,i),d=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,o));return this._status=d.status,this._keyInfos=d.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),d.vaultId}*newLedgerKey(e,t,n,r,i){const o=new c.NewLedgerKeyMsg(e,t,n,r,i),d=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,o));return this._status=d.status,this._keyInfos=d.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),d.vaultId}*appendLedgerKeyApp(e,t,n){const r=new c.AppendLedgerKeyAppMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*appendLedgerExtendedKeys(e,t,n){const r=new c.AppendLedgerExtendedKeysMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*newKeystoneKey(e,t,n){const r=new c.NewKeystoneKeyMsg(e,t,n),i=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,r));return this._status=i.status,this._keyInfos=i.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),i.vaultId}*newPrivateKeyKey(e,t,n,r){const i=new c.NewPrivateKeyKeyMsg(e,t,n,r),o=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,i));return this._status=o.status,this._keyInfos=o.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange"),o.vaultId}*lock(){const e=new c.LockKeyRingMsg,t=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,e));this._status=t.status}*unlock(e){this._needMigration&&(this._isMigrating=!0);try{const t=new c.UnlockKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._status=n.status,this._keyInfos=n.keyInfos,this._needMigration=!1}finally{this._isMigrating=!1}}*unlockWithoutSyncStatus(e){this._needMigration&&(this._isMigrating=!0);try{const t=new c.UnlockKeyRingMsg(e),n=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,t));this._keyInfos=n.keyInfos,this._needMigration=!1}finally{this._isMigrating=!1}}*changeKeyRingName(e,t){const n=new c.ChangeKeyRingNameMsg(e,t),r=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,n));this._status=r.status,this._keyInfos=r.keyInfos,this.eventDispatcher.dispatchEvent("keplr_keystorechange")}*deleteKeyRing(e,t){const n=new c.DeleteKeyRingMsg(e,t),r=yield*(0,a.toGenerator)(this.requester.sendMessage(s.BACKGROUND_PORT,n));this._status=r.status,this._keyInfos=r.keyInfos,r.wasSelected&&"unlocked"===r.status&&this.eventDispatcher.dispatchEvent("keplr_keystorechange")}changeUserPassword(e,t){return i(this,void 0,void 0,(function*(){const n=new c.ChangeUserPasswordMsg(e,t);return yield this.requester.sendMessage(s.BACKGROUND_PORT,n)}))}checkLegacyKeyRingPassword(e){return i(this,void 0,void 0,(function*(){const t=new c.CheckLegacyKeyRingPasswordMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}checkPassword(e){return i(this,void 0,void 0,(function*(){const t=new c.CheckPasswordMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}searchKeyRings(e){return i(this,void 0,void 0,(function*(){const t=new c.SearchKeyRingsMsg(e);return yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}))}}r([o.observable],u.prototype,"_isInitialized",void 0),r([o.observable],u.prototype,"_status",void 0),r([o.observable],u.prototype,"_needMigration",void 0),r([o.observable],u.prototype,"_isMigrating",void 0),r([o.observable.ref],u.prototype,"_keyInfos",void 0),r([o.computed],u.prototype,"selectedKeyInfo",null),r([o.flow],u.prototype,"refreshKeyRingStatus",null),r([o.flow],u.prototype,"selectKeyRing",null),r([o.flow],u.prototype,"finalizeKeyCoinType",null),r([o.flow],u.prototype,"newMnemonicKey",null),r([o.flow],u.prototype,"newLedgerKey",null),r([o.flow],u.prototype,"appendLedgerKeyApp",null),r([o.flow],u.prototype,"appendLedgerExtendedKeys",null),r([o.flow],u.prototype,"newKeystoneKey",null),r([o.flow],u.prototype,"newPrivateKeyKey",null),r([o.flow],u.prototype,"lock",null),r([o.flow],u.prototype,"unlock",null),r([o.flow],u.prototype,"unlockWithoutSyncStatus",null),r([o.flow],u.prototype,"changeKeyRingName",null),r([o.flow],u.prototype,"deleteKeyRing",null),t.KeyRingStore=u},15915:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionManagerStore=void 0;const s=n(47722),o=n(80075),a=n(33783),c=n(94531);class d{constructor(e){this.requester=e,this._isInitialized=!1,this._permissionData={},(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e=new a.GetAllPermissionDataPerOriginMsg,t=yield this.requester.sendMessage(s.BACKGROUND_PORT,e);(0,o.runInAction)((()=>{this._permissionData=t})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}get permissionData(){const e={};for(const[t,n]of Object.entries(this._permissionData))n&&(n.permissions.length>0||n.globalPermissions.length>0)&&(e[t]=n);return e}syncPermissionsFromBackground(){return i(this,void 0,void 0,(function*(){const e=new a.GetAllPermissionDataPerOriginMsg,t=yield this.requester.sendMessage(s.BACKGROUND_PORT,e);(0,o.runInAction)((()=>{this._permissionData=t}))}))}clearAllPermissions(){return i(this,void 0,void 0,(function*(){(0,o.runInAction)((()=>{this._permissionData={}}));const e=new a.ClearAllPermissionsMsg;yield this.requester.sendMessage(s.BACKGROUND_PORT,e)}))}clearOrigin(e){return i(this,void 0,void 0,(function*(){if(this._permissionData[e]){(0,o.runInAction)((()=>{delete this._permissionData[e]}));const t=new a.ClearOriginPermissionMsg(e);yield this.requester.sendMessage(s.BACKGROUND_PORT,t)}}))}removePermission(e,t,n){return i(this,void 0,void 0,(function*(){const r=c.ChainIdHelper.parse(t).identifier,i=this._permissionData[e],d=i?i.permissions.findIndex((e=>e.chainIdentifier===r&&e.type===n)):-1;if(d>=0&&i){(0,o.runInAction)((()=>{i.permissions.splice(d,1)}));const r=new a.RemovePermissionOrigin(t,n,e);yield this.requester.sendMessage(s.BACKGROUND_PORT,r)}}))}removeGlobalPermission(e,t){return i(this,void 0,void 0,(function*(){const n=this._permissionData[e],r=n?n.globalPermissions.findIndex((e=>e.type===t)):-1;if(r>=0&&n){(0,o.runInAction)((()=>{n.globalPermissions.splice(r,1)}));const i=new a.RemoveGlobalPermissionOriginMsg(t,e);yield this.requester.sendMessage(s.BACKGROUND_PORT,i)}}))}}r([o.observable],d.prototype,"_isInitialized",void 0),r([o.observable],d.prototype,"_permissionData",void 0),r([o.computed],d.prototype,"permissionData",null),t.PermissionManagerStore=d},73659:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TokensStore=void 0;const s=n(47722),o=n(33783),a=n(80075),c=n(94531),d=n(48834);class u{constructor(e,t,n,r,i,s){this.eventListener=e,this.requester=t,this.chainStore=n,this.accountStore=r,this.keyRingStore=i,this.interactionStore=s,this._isInitialized=!1,this.tokenMap=new Map,this.prevTokenMap=new Map,(0,a.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){yield this.refreshTokens(),this.eventListener.addEventListener("keplr_keystorechange",(()=>{this.clearTokensFromChainInfos(),this.refreshTokens()})),(0,a.autorun)((()=>{this.updateChainInfos()})),(0,a.runInAction)((()=>{this._isInitialized=!0}))}))}refreshTokens(){return i(this,void 0,void 0,(function*(){const e=new o.GetAllTokenInfosMsg,t=new o.GetAllERC20TokenInfosMsg,n=yield this.requester.sendMessage(s.BACKGROUND_PORT,e),r=yield this.requester.sendMessage(s.BACKGROUND_PORT,t);(0,a.runInAction)((()=>{const e=new Map;for(const[t,i]of Object.entries(n).concat(Object.entries(r)))i&&e.set(t,i);this.tokenMap=e}))}))}clearTokensFromChainInfos(){var e,t;const n=this.chainStore.chainInfos;for(const t of n){const n=c.ChainIdHelper.parse(t.chainId),r=null!==(e=this.prevTokenMap.get(n.identifier))&&void 0!==e?e:[];t.removeCurrencies(...r.map((e=>e.currency.coinMinimalDenom)))}const r=this.chainStore.modularChainInfoImpls;for(const e of r){const n=c.ChainIdHelper.parse(e.chainId),r=null!==(t=this.prevTokenMap.get(n.identifier))&&void 0!==t?t:[];"starknet"in e&&null!=e.starknet&&e.removeCurrencies("starknet",...r.map((e=>e.currency.coinMinimalDenom)))}}updateChainInfos(){var e,t;const n=this.chainStore.modularChainInfoImpls;for(const r of n)if("cosmos"in r.embedded){const t=c.ChainIdHelper.parse(r.chainId),n=null!==(e=this.tokenMap.get(t.identifier))&&void 0!==e?e:[],i=[];for(const e of n)e.associatedAccountAddress?"unlocked"===this.keyRingStore.status&&this.accountStore.getAccount(r.chainId).bech32Address&&d.Buffer.from(c.Bech32Address.fromBech32(this.accountStore.getAccount(r.chainId).bech32Address).address).toString("hex")===e.associatedAccountAddress&&i.push(e.currency):i.push(e.currency);this.chainStore.getChain(r.chainId).addCurrencies(...i)}else if("starknet"in r.embedded&&"starknet"in r.embedded){const e=c.ChainIdHelper.parse(r.chainId),n=null!==(t=this.tokenMap.get(e.identifier))&&void 0!==t?t:[],i=[];for(const e of n)i.push(e.currency);r.addCurrencies("starknet",...i)}this.prevTokenMap=this.tokenMap}get isInitialized(){return this._isInitialized}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,a.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}getTokens(e){var t,n;const r=this.accountStore.getAccount(e).bech32Address,i=this.chainStore.getModularChain(e);if("cosmos"in i){const n=this.chainStore.getChain(e),i=null!=n.bech32Config&&r?d.Buffer.from(c.Bech32Address.fromBech32(r,n.bech32Config.bech32PrefixAccAddr).address).toString("hex"):void 0;return(null!==(t=this.tokenMap.get(c.ChainIdHelper.parse(e).identifier))&&void 0!==t?t:[]).filter((e=>!e.associatedAccountAddress||!i||e.associatedAccountAddress===i))}if("starknet"in i)return null!==(n=this.tokenMap.get(e))&&void 0!==n?n:[];throw new Error(`Unsupported chain: ${e}`)}addToken(e,t){return i(this,void 0,void 0,(function*(){const n=this.chainStore.getModularChain(e);if("cosmos"in n){const n=this.accountStore.getAccount(e).bech32Address;if(!n)throw new Error("Account not initialized");const r=this.chainStore.getChain(e),i=null!=r.evm,u=null!=r.bech32Config?d.Buffer.from(c.Bech32Address.fromBech32(n,r.bech32Config.bech32PrefixAccAddr).address).toString("hex"):"",l=i?new o.AddERC20TokenMsg(e,t):new o.AddTokenMsg(e,u,t),h=yield this.requester.sendMessage(s.BACKGROUND_PORT,l);(0,a.runInAction)((()=>{const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(r.chainId),n=h[t.identifier];n&&e.set(t.identifier,n),this.tokenMap=e}))}else{if(!("starknet"in n))throw new Error(`Unsupported chain: ${e}`);{const r=new o.AddERC20TokenMsg(e,t),i=yield this.requester.sendMessage(s.BACKGROUND_PORT,r);(0,a.runInAction)((()=>{const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(n.chainId),r=i[t.identifier];r&&e.set(t.identifier,r),this.tokenMap=e}))}}}))}removeToken(e,t){var n;return i(this,void 0,void 0,(function*(){const r=(()=>{if("contractAddress"in t.currency)return t.currency.contractAddress;throw new Error("Token info is not for contract")})(),i=this.chainStore.getModularChain(e);if("cosmos"in i){const i=this.chainStore.getChain(e),d=void 0!==i.evm?new o.RemoveERC20TokenMsg(e,r):new o.RemoveTokenMsg(e,null!==(n=t.associatedAccountAddress)&&void 0!==n?n:"",r),u=yield this.requester.sendMessage(s.BACKGROUND_PORT,d);(0,a.runInAction)((()=>{this.clearTokensFromChainInfos();const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(i.chainId),n=u[t.identifier];n&&e.set(t.identifier,n),this.tokenMap=e}))}else{if(!("starknet"in i))throw new Error(`Unsupported chain: ${e}`);{const t=new o.RemoveERC20TokenMsg(e,r),n=yield this.requester.sendMessage(s.BACKGROUND_PORT,t);(0,a.runInAction)((()=>{this.clearTokensFromChainInfos();const e=new Map(this.tokenMap),t=c.ChainIdHelper.parse(i.chainId),r=n[t.identifier];r&&e.set(t.identifier,r),this.tokenMap=e}))}}}))}get waitingSuggestedToken(){const e=this.interactionStore.getAllData("suggest-token-cw20");if(e.length>0)return e[0];const t=this.interactionStore.getAllData("suggest-token-erc20");return t.length>0?t[0]:void 0}approveSuggestedTokenWithProceedNext(e,t,n){return i(this,void 0,void 0,(function*(){this.interactionStore.getData(e)&&(yield this.interactionStore.approveWithProceedNext(e,t,n),this.refreshTokens())}))}rejectSuggestedToken(e,t){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectWithProceedNext(e,t)}))}rejectAllSuggestedTokens(){return i(this,void 0,void 0,(function*(){yield this.interactionStore.rejectAll("suggest-token-cw20"),yield this.interactionStore.rejectAll("suggest-token-erc20")}))}}r([a.observable],u.prototype,"_isInitialized",void 0),r([a.observable.ref],u.prototype,"tokenMap",void 0),r([a.action],u.prototype,"clearTokensFromChainInfos",null),t.TokensStore=u},30935:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(25472),t)},80412:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AxelarEVMBridgeCurrencyRegistrar=void 0;const s=n(80075);class o{constructor(e,t=864e5,n,r,i){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this.mainChain=i,this._isInitialized=!1,this.cacheMetadata=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,s.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cacheMetadata",t=yield this.kvStore.get(e);t&&(0,s.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheMetadata.set(e,n)})),(0,s.autorun)((()=>{const t=(0,s.toJS)(this.cacheMetadata),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,s.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=this.chainStore.getChain(e);if(!n.features||!n.features.includes("axelar-evm-bridge"))return;const r=`${e}/${t}`,i=this.cacheMetadata.get(r);if(i){if(Date.now()-i.timestamp<this.cacheDuration)return{value:{coinMinimalDenom:t,coinDenom:i.symbol,coinDecimals:i.decimals},done:!0};(0,s.runInAction)((()=>{this.cacheMetadata.delete(r)}))}const o=this.queriesStore.get(e).keplrETC.queryEVMTokenInfo.getAsset(this.mainChain,t);return o.symbol&&null!=o.decimals&&o.isConfirmed?(o.isFetching||(0,s.runInAction)((()=>{this.cacheMetadata.set(r,{symbol:o.symbol,decimals:o.decimals,timestamp:Date.now()})})),{value:{coinMinimalDenom:t,coinDenom:o.symbol,coinDecimals:o.decimals},done:!o.isFetching}):o.isFetching?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([s.observable],o.prototype,"_isInitialized",void 0),r([s.observable.shallow],o.prototype,"cacheMetadata",void 0),t.AxelarEVMBridgeCurrencyRegistrar=o},17966:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(80412),t),i(n(65652),t)},65652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEVMTokenInfo=t.ObservableQueryEVMTokenInfoInner=void 0;const r=n(11169);class i extends r.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/axelar/evm/v1beta1/token_info/${r}?asset=${i}`),this._chain=r,this._denom=i}get chain(){return this._chain}get denom(){return this._denom}get tokenName(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.token_name}get symbol(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.symbol}get decimals(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.details.decimals}get isConfirmed(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.confirmed}get isExternal(){var e;return null===(e=this.response)||void 0===e?void 0:e.data.is_external}}t.ObservableQueryEVMTokenInfoInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=e.indexOf("/"),n=e.slice(0,t),r=e.slice(t+1);return new i(this.sharedContext,this.chainId,this.chainGetter,n,r)}))}getAsset(e,t){return this.get(`${e}/${t}`)}}t.ObservableQueryEVMTokenInfo=s},5524:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(45323),t)},45323:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryERC20Metadata=t.ObservableQueryERC20MetadataInner=t.ObservableQueryERC20MetadataDecimals=t.ObservableQueryERC20MetadataSymbol=t.ObservableQueryERC20MetadataName=void 0;const i=n(11169),s=n(19370),o=n(80075),a=new s.Interface([{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"}]);class c extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("name")},"latest"]),(0,o.makeObservable)(this)}get name(){if(this.response)try{return a.decodeFunctionResult("name",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],c.prototype,"name",null),t.ObservableQueryERC20MetadataName=c;class d extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("symbol")},"latest"]),(0,o.makeObservable)(this)}get symbol(){if(this.response)try{return a.decodeFunctionResult("symbol",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],d.prototype,"symbol",null),t.ObservableQueryERC20MetadataSymbol=d;class u extends i.ObservableJsonRPCQuery{constructor(e,t,n){super(e,t,"","eth_call",[{to:n,data:a.encodeFunctionData("decimals")},"latest"]),(0,o.makeObservable)(this)}get decimals(){if(this.response)try{return a.decodeFunctionResult("decimals",this.response.data)[0]}catch(e){console.log(e)}}}r([o.computed],u.prototype,"decimals",null),t.ObservableQueryERC20MetadataDecimals=u;class l{constructor(e,t,n){this.sharedContext=e,this._queryName=new c(e,t,n),this._querySymbol=new d(e,t,n),this._queryDecimals=new u(e,t,n)}get queryName(){return this._queryName}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get name(){return this._queryName.name}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryERC20MetadataInner=l;class h extends i.HasMapStore{constructor(e,t){super((e=>new l(this.sharedContext,this.ethereumURL,e))),this.sharedContext=e,this.ethereumURL=t}get(e){return super.get(e)}}t.ObservableQueryERC20Metadata=h},51292:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GravityBridgeCurrencyRegistrar=void 0;const s=n(89642),o=n(80075);class a{constructor(e,t=864e5,n,r){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this._isInitialized=!1,this.cacheERC20Metadata=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cacheERC20Metadata",t=yield this.kvStore.get(e);t&&(0,o.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.cacheERC20Metadata.set(e,n)})),(0,o.autorun)((()=>{const t=(0,o.toJS)(this.cacheERC20Metadata),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=new s.DenomHelper(t);if("native"!==n.type||!n.denom.startsWith("gravity0x"))return;const r=this.queriesStore.get(e),i=n.denom.replace("gravity",""),a=this.cacheERC20Metadata.get(i);if(a){if(Date.now()-a.timestamp<this.cacheDuration)return{value:{coinMinimalDenom:n.denom,coinDenom:a.symbol,coinDecimals:a.decimals},done:!0};(0,o.runInAction)((()=>{this.cacheERC20Metadata.delete(i)}))}const c=r.keplrETC.queryERC20Metadata.get(i);return c.symbol&&null!=c.decimals?(c.querySymbol.isFetching||c.queryDecimals.isFetching||(0,o.runInAction)((()=>{this.cacheERC20Metadata.set(i,{symbol:c.symbol,decimals:c.decimals,timestamp:Date.now()})})),{value:{coinMinimalDenom:n.denom,coinDenom:c.symbol,coinDecimals:c.decimals},done:!c.querySymbol.isFetching&&!c.queryDecimals.isFetching}):c.querySymbol.isFetching||c.queryDecimals.isFetching?{value:void 0,done:!1}:{value:void 0,done:!0}}}r([o.observable],a.prototype,"_isInitialized",void 0),r([o.observable.shallow],a.prototype,"cacheERC20Metadata",void 0),t.GravityBridgeCurrencyRegistrar=a},82510:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(51292),t)},4136:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(14036),t),i(n(5524),t),i(n(82510),t),i(n(17966),t),i(n(20079),t),i(n(84854),t)},22449:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryInitiaDynamicFee=void 0;const i=n(11169),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/initia/dynamicfee/v1/params"),(0,s.makeObservable)(this)}get baseGasPrice(){if(!this.response)return;if(!this.response.data.params)return;const e=parseFloat(this.response.data.params.base_gas_price);return Number.isNaN(e)?void 0:e}}r([s.computed],o.prototype,"baseGasPrice",null),t.ObservableQueryInitiaDynamicFee=o},14036:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeplrETCQueriesImpl=t.KeplrETCQueries=void 0;const r=n(5524),i=n(17966),s=n(20079),o=n(84854),a=n(22449);t.KeplrETCQueries={use:e=>(t,n,r,i)=>({keplrETC:new c(t,n,r,i,e.ethereumURL,e.skipTokenInfoBaseURL,e.skipTokenInfoAPIURI)})};class c{constructor(e,t,n,c,d,u,l){this.queryERC20Metadata=new r.ObservableQueryERC20Metadata(t,d),this.queryEVMTokenInfo=new i.ObservableQueryEVMTokenInfo(t,n,c),this.querySkipTokenInfo=new o.ObservableQuerySkipTokenInfo(t,n,c,u,l),this.queryTerraClassicTaxRate=new s.ObservableQueryTaxRate(t,n,c),this.queryTerraClassicTaxCaps=new s.ObservableQueryTaxCaps(t,n,c),this.queryInitiaDynamicFee=new a.ObservableQueryInitiaDynamicFee(t,n,c)}}t.KeplrETCQueriesImpl=c},20079:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(32655),t)},32655:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTaxRate=t.ObservableQueryTaxCaps=void 0;const i=n(11169),s=n(80075),o=n(19731),a=n(58242);class c extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/terra/treasury/v1beta1/tax_caps"),this.getTaxCaps=(0,a.computedFn)((e=>{if(!this.response||!this.response.data.tax_caps)return;const t=this.response.data.tax_caps.find((t=>t.denom===e));return t?new o.Int(t.tax_cap):void 0})),(0,s.makeObservable)(this)}}t.ObservableQueryTaxCaps=c;class d extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/terra/treasury/v1beta1/tax_rate"),(0,s.makeObservable)(this)}get taxRate(){if(this.response)return new o.RatePretty(this.response.data.tax_rate)}}r([s.computed],d.prototype,"taxRate",null),t.ObservableQueryTaxRate=d},84854:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(66405),t)},66405:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySkipTokenInfo=t.ObservableQuerySkipTokenInfoInner=void 0;const r=n(11169),i=n(80075);class s extends r.ObservableQuery{constructor(e,t,n,r,s){super(e,t,n.replace("{chainId}",r).replace("{coinMinimalDenom}",s)),(0,i.makeObservable)(this)}get currency(){var e;return null===(e=this.response)||void 0===e?void 0:e.data}}t.ObservableQuerySkipTokenInfoInner=s;class o extends r.HasMapStore{constructor(e,t,n,r,i){super((e=>new s(this.sharedContext,this.baseURL,this.apiURI,this.chainId,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.baseURL=r,this.apiURI=i}getQueryCoinMinimalDenom(e){return this.get(e)}}t.ObservableQuerySkipTokenInfo=o},19370:(e,t,n)=>{n.r(t),n.d(t,{AbiCoder:()=>nt,ConstructorFragment:()=>oe,ErrorFragment:()=>de,EventFragment:()=>ne,FormatTypes:()=>Y,Fragment:()=>te,FunctionFragment:()=>ae,Indexed:()=>dt,Interface:()=>ht,LogDescription:()=>ot,ParamType:()=>X,TransactionDescription:()=>at,checkResultErrors:()=>ge,defaultAbiCoder:()=>rt});var r=n(62197),i=n.n(r);let s=!1,o=!1;const a={debug:1,default:2,info:2,warning:3,error:4,off:5};let c=a.default,d=null;const u=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(n){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var l,h;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(l||(l={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(h||(h={}));const p="0123456789abcdef";class f{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();null==a[n]&&this.throwArgumentError("invalid log level name","logLevel",e),c>a[n]||console.log.apply(console,t)}debug(...e){this._log(f.levels.DEBUG,e)}info(...e){this._log(f.levels.INFO,e)}warn(...e){this._log(f.levels.WARNING,e)}makeError(e,t,n){if(o)return this.makeError("censored error",t,{});t||(t=f.errors.UNKNOWN_ERROR),n||(n={});const r=[];Object.keys(n).forEach((e=>{const t=n[e];try{if(t instanceof Uint8Array){let n="";for(let e=0;e<t.length;e++)n+=p[t[e]>>4],n+=p[15&t[e]];r.push(e+"=Uint8Array(0x"+n+")")}else r.push(e+"="+JSON.stringify(t))}catch(t){r.push(e+"="+JSON.stringify(n[e].toString()))}})),r.push(`code=${t}`),r.push(`version=${this.version}`);const i=e;let s="";switch(t){case h.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case h.CALL_EXCEPTION:case h.INSUFFICIENT_FUNDS:case h.MISSING_NEW:case h.NONCE_EXPIRED:case h.REPLACEMENT_UNDERPRICED:case h.TRANSACTION_REPLACED:case h.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),r.length&&(e+=" ("+r.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=t,Object.keys(n).forEach((function(e){a[e]=n[e]})),a}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,f.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,r){e||this.throwError(t,n,r)}assertArgument(e,t,n,r){e||this.throwArgumentError(t,n,r)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),u&&this.throwError("platform missing String.prototype.normalize",f.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:u})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,f.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,f.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,f.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",f.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",f.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",f.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return d||(d=new f("logger/5.6.0")),d}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),s){if(!e)return;this.globalLogger().throwError("error censorship permanent",f.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}o=!!e,s=!!t}static setLogLevel(e){const t=a[e.toLowerCase()];null!=t?c=t:f.globalLogger().warn("invalid log level - "+e)}static from(e){return new f(e)}}f.errors=h,f.levels=l;const g=new f("bytes/5.6.1");function m(e){return!!e.toHexString}function y(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return y(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function v(e){return"number"==typeof e&&e==e&&e%1==0}function b(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!v(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const n=e[t];if(!v(n)||n<0||n>=256)return!1}return!0}function w(e,t){if(t||(t={}),"number"==typeof e){g.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),y(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),m(e)&&(e=e.toHexString()),O(e)){let n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":g.throwArgumentError("hex data is odd-length","value",e));const r=[];for(let e=0;e<n.length;e+=2)r.push(parseInt(n.substring(e,e+2),16));return y(new Uint8Array(r))}return b(e)?y(new Uint8Array(e)):g.throwArgumentError("invalid arrayify value","value",e)}function _(e){const t=e.map((e=>w(e))),n=t.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(n);return t.reduce(((e,t)=>(r.set(t,e),e+t.length)),0),y(r)}function O(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const C="0123456789abcdef";function I(e,t){if(t||(t={}),"number"==typeof e){g.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=C[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),m(e))return e.toHexString();if(O(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":g.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(b(e)){let t="0x";for(let n=0;n<e.length;n++){let r=e[n];t+=C[(240&r)>>4]+C[15&r]}return t}return g.throwArgumentError("invalid hexlify value","value",e)}function S(e,t){for("string"!=typeof e?e=I(e):O(e)||g.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&g.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var k=i().BN;const P=new f("bignumber/5.6.0"),M={},R=9007199254740991;let A=!1;class D{constructor(e,t){P.checkNew(new.target,D),e!==M&&P.throwError("cannot call constructor directly; use BigNumber.from",f.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return x(E(this).fromTwos(e))}toTwos(e){return x(E(this).toTwos(e))}abs(){return"-"===this._hex[0]?D.from(this._hex.substring(1)):this}add(e){return x(E(this).add(E(e)))}sub(e){return x(E(this).sub(E(e)))}div(e){return D.from(e).isZero()&&N("division-by-zero","div"),x(E(this).div(E(e)))}mul(e){return x(E(this).mul(E(e)))}mod(e){const t=E(e);return t.isNeg()&&N("division-by-zero","mod"),x(E(this).umod(t))}pow(e){const t=E(e);return t.isNeg()&&N("negative-power","pow"),x(E(this).pow(t))}and(e){const t=E(e);return(this.isNegative()||t.isNeg())&&N("unbound-bitwise-result","and"),x(E(this).and(t))}or(e){const t=E(e);return(this.isNegative()||t.isNeg())&&N("unbound-bitwise-result","or"),x(E(this).or(t))}xor(e){const t=E(e);return(this.isNegative()||t.isNeg())&&N("unbound-bitwise-result","xor"),x(E(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&N("negative-width","mask"),x(E(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&N("negative-width","shl"),x(E(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&N("negative-width","shr"),x(E(this).shrn(e))}eq(e){return E(this).eq(E(e))}lt(e){return E(this).lt(E(e))}lte(e){return E(this).lte(E(e))}gt(e){return E(this).gt(E(e))}gte(e){return E(this).gte(E(e))}isNegative(){return"-"===this._hex[0]}isZero(){return E(this).isZero()}toNumber(){try{return E(this).toNumber()}catch(e){N("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return P.throwError("this platform does not support BigInt",f.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?A||(A=!0,P.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?P.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",f.errors.UNEXPECTED_ARGUMENT,{}):P.throwError("BigNumber.toString does not accept parameters",f.errors.UNEXPECTED_ARGUMENT,{})),E(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof D)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new D(M,T(e)):e.match(/^-?[0-9]+$/)?new D(M,T(new k(e))):P.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&N("underflow","BigNumber.from",e),(e>=R||e<=-R)&&N("overflow","BigNumber.from",e),D.from(String(e));const t=e;if("bigint"==typeof t)return D.from(t.toString());if(b(t))return D.from(I(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return D.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(O(e)||"-"===e[0]&&O(e.substring(1))))return D.from(e)}return P.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function T(e){if("string"!=typeof e)return T(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&P.throwArgumentError("invalid hex","value",e),"0x00"===(e=T(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function x(e){return D.from(T(e))}function E(e){const t=D.from(e).toHexString();return"-"===t[0]?new k("-"+t.substring(3),16):new k(t.substring(2),16)}function N(e,t,n){const r={fault:e,operation:t};return null!=n&&(r.value=n),P.throwError(e,f.errors.NUMERIC_FAULT,r)}const B=new f("properties/5.6.0");function j(e,t,n){Object.defineProperty(e,t,{enumerable:!0,value:n,writable:!1})}function U(e,t){for(let n=0;n<32;n++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}const F={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function q(e){if(null==e||F[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let n=0;n<t.length;n++){let r=null;try{r=e[t[n]]}catch(e){continue}if(!q(r))return!1}return!0}return B.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Q(e){if(q(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>G(e))));if("object"==typeof e){const t={};for(const n in e){const r=e[n];void 0!==r&&j(t,n,G(r))}return t}return B.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function G(e){return Q(e)}class K{constructor(e){for(const t in e)this[t]=G(e[t])}}const W="abi/5.6.0",H=new f(W),J={};let L={calldata:!0,memory:!0,storage:!0},V={calldata:!0,memory:!0};function $(e,t){if("bytes"===e||"string"===e){if(L[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&V[t])return!0;return(L[t]||"payable"===t)&&H.throwArgumentError("invalid modifier","name",t),!1}function z(e,t){for(let n in t)j(e,n,t[n])}const Y=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Z=new RegExp(/^(.*)\[([0-9]*)\]$/);class X{constructor(e,t){e!==J&&H.throwError("use fromString",f.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),z(this,t);let n=this.type.match(Z);z(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:X.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Y.sighash),Y[e]||H.throwArgumentError("invalid format type","format",e),e===Y.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Y.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===Y.full?", ":",")+")"):t+=this.type,e!==Y.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Y.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?X.fromString(e,t):X.fromObject(e)}static fromObject(e){return X.isParamType(e)?e:new X(J,{name:e.name||null,type:ue(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(X.fromObject):null})}static fromString(e,t){return n=function(e,t){let n=e;function r(t){H.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let n={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(n.indexed=!1),n}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let n=0;n<e.length;n++){let s=e[n];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||r(n),o.state.allowType=!1,o.type=ue(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||r(n),o.indexed=!0,o.name=""),$(o.type,o.name)&&(o.name=""),o.type=ue(o.type);let e=o;o=o.parent,o||r(n),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||r(n),o.indexed=!0,o.name=""),$(o.type,o.name)&&(o.name=""),o.type=ue(o.type);let a=i(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=ue(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||r(n),o.indexed&&r(n),o.indexed=!0,o.name=""):$(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(n),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(n),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:r(n)}}return o.parent&&H.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===o.name?(t||r(n.length-7),o.indexed&&r(n.length-7),o.indexed=!0,o.name=""):$(o.type,o.name)&&(o.name=""),s.type=ue(s.type),s}(e,!!t),X.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}static isParamType(e){return!(null==e||!e._isParamType)}}function ee(e,t){return function(e){e=e.trim();let t=[],n="",r=0;for(let i=0;i<e.length;i++){let s=e[i];","===s&&0===r?(t.push(n),n=""):(n+=s,"("===s?r++:")"===s&&(r--,-1===r&&H.throwArgumentError("unbalanced parenthesis","value",e)))}return n&&t.push(n),t}(e).map((e=>X.fromString(e,t)))}class te{constructor(e,t){e!==J&&H.throwError("use a static from method",f.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),z(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return te.isFragment(e)?e:"string"==typeof e?te.fromString(e):te.fromObject(e)}static fromObject(e){if(te.isFragment(e))return e;switch(e.type){case"function":return ae.fromObject(e);case"event":return ne.fromObject(e);case"constructor":return oe.fromObject(e);case"error":return de.fromObject(e);case"fallback":case"receive":return null}return H.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?ne.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?ae.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?oe.fromString(e.trim()):"error"===e.split(" ")[0]?de.fromString(e.substring(5).trim()):H.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class ne extends te{format(e){if(e||(e=Y.sighash),Y[e]||H.throwArgumentError("invalid format type","format",e),e===Y.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Y.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Y.full?", ":",")+") ",e!==Y.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?ne.fromString(e):ne.fromObject(e)}static fromObject(e){if(ne.isEventFragment(e))return e;"event"!==e.type&&H.throwArgumentError("invalid event object","value",e);const t={name:he(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(X.fromObject):[],type:"event"};return new ne(J,t)}static fromString(e){let t=e.match(pe);t||H.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:H.warn("unknown modifier: "+e)}})),ne.fromObject({name:t[1].trim(),anonymous:n,inputs:ee(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function re(e,t){t.gas=null;let n=e.split("@");return 1!==n.length?(n.length>2&&H.throwArgumentError("invalid human-readable ABI signature","value",e),n[1].match(/^[0-9]+$/)||H.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=D.from(n[1]),n[0]):e}function ie(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function se(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&H.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&H.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||H.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&H.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&H.throwArgumentError("unable to determine stateMutability","value",e),t}class oe extends te{format(e){if(e||(e=Y.sighash),Y[e]||H.throwArgumentError("invalid format type","format",e),e===Y.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===Y.sighash&&H.throwError("cannot format a constructor for sighash",f.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===Y.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?oe.fromString(e):oe.fromObject(e)}static fromObject(e){if(oe.isConstructorFragment(e))return e;"constructor"!==e.type&&H.throwArgumentError("invalid constructor object","value",e);let t=se(e);t.constant&&H.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(X.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new oe(J,n)}static fromString(e){let t={type:"constructor"},n=(e=re(e,t)).match(pe);return n&&"constructor"===n[1].trim()||H.throwArgumentError("invalid constructor string","value",e),t.inputs=ee(n[2].trim(),!1),ie(n[3].trim(),t),oe.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class ae extends oe{format(e){if(e||(e=Y.sighash),Y[e]||H.throwArgumentError("invalid format type","format",e),e===Y.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Y.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Y.full?", ":",")+") ",e!==Y.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?ae.fromString(e):ae.fromObject(e)}static fromObject(e){if(ae.isFunctionFragment(e))return e;"function"!==e.type&&H.throwArgumentError("invalid function object","value",e);let t=se(e);const n={type:e.type,name:he(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(X.fromObject):[],outputs:e.outputs?e.outputs.map(X.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?D.from(e.gas):null};return new ae(J,n)}static fromString(e){let t={type:"function"},n=(e=re(e,t)).split(" returns ");n.length>2&&H.throwArgumentError("invalid function string","value",e);let r=n[0].match(pe);if(r||H.throwArgumentError("invalid function signature","value",e),t.name=r[1].trim(),t.name&&he(t.name),t.inputs=ee(r[2],!1),ie(r[3].trim(),t),n.length>1){let r=n[1].match(pe);""==r[1].trim()&&""==r[3].trim()||H.throwArgumentError("unexpected tokens","value",e),t.outputs=ee(r[2],!1)}else t.outputs=[];return ae.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function ce(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||H.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class de extends te{format(e){if(e||(e=Y.sighash),Y[e]||H.throwArgumentError("invalid format type","format",e),e===Y.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==Y.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===Y.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?de.fromString(e):de.fromObject(e)}static fromObject(e){if(de.isErrorFragment(e))return e;"error"!==e.type&&H.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:he(e.name),inputs:e.inputs?e.inputs.map(X.fromObject):[]};return ce(new de(J,t))}static fromString(e){let t={type:"error"},n=e.match(pe);return n||H.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&he(t.name),t.inputs=ee(n[2],!1),ce(de.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function ue(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const le=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function he(e){return e&&e.match(le)||H.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const pe=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),fe=new f(W);function ge(e){const t=[],n=function(e,r){if(Array.isArray(r))for(let i in r){const s=e.slice();s.push(i);try{n(s,r[i])}catch(e){t.push({path:s,error:e})}}};return n([],e),t}class me{constructor(e,t,n,r){this.name=e,this.type=t,this.localName=n,this.dynamic=r}_throwError(e,t){fe.throwArgumentError(e,this.localName,t)}}class ye{constructor(e){j(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return function(e){let t="0x";return e.forEach((e=>{t+=I(e).substring(2)})),t}(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(_(e._data))}writeBytes(e){let t=w(e);const n=t.length%this.wordSize;return n&&(t=_([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=w(D.from(e));return t.length>this.wordSize&&fe.throwError("value out-of-bounds",f.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=_([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ve{constructor(e,t,n,r){j(this,"_data",w(e)),j(this,"wordSize",t||32),j(this,"_coerceFunc",n),j(this,"allowLoose",r),this._offset=0}get data(){return I(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ve.coerce(e,t)}_peekBytes(e,t,n){let r=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?r=t:fe.throwError("data out-of-bounds",f.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}subReader(e){return new ve(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return D.from(this.readBytes(this.wordSize))}}var be=n(83669),we=n.n(be);function _e(e){return"0x"+we().keccak_256(w(e))}const Oe=new f("address/5.6.0");function Ce(e){O(e,20)||Oe.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const r=w(_e(n));for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&r[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Ie={};for(let e=0;e<10;e++)Ie[String(e)]=String(e);for(let e=0;e<26;e++)Ie[String.fromCharCode(65+e)]=String(10+e);const Se=Math.floor((ke=9007199254740991,Math.log10?Math.log10(ke):Math.log(ke)/Math.LN10));var ke;function Pe(e){let t=null;if("string"!=typeof e&&Oe.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Ce(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Oe.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Ie[e])).join("");for(;t.length>=Se;){let e=t.substring(0,Se);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}(e)&&Oe.throwArgumentError("bad icap checksum","address",e),n=e.substring(4),t=new k(n,36).toString(16);t.length<40;)t="0"+t;t=Ce("0x"+t)}else Oe.throwArgumentError("invalid address","address",e);var n;return t}class Me extends me{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Pe(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Pe(S(e.readValue().toHexString(),20))}}class Re extends me{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Ae=new f(W);function De(e,t,n){let r=null;if(Array.isArray(n))r=n;else if(n&&"object"==typeof n){let e={};r=t.map((t=>{const r=t.localName;return r||Ae.throwError("cannot encode object for signature with missing names",f.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]&&Ae.throwError("cannot encode object for signature with duplicate names",f.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),e[r]=!0,n[r]}))}else Ae.throwArgumentError("invalid tuple value","tuple",n);t.length!==r.length&&Ae.throwArgumentError("types/value length mismatch","tuple",n);let i=new ye(e.wordSize),s=new ye(e.wordSize),o=[];t.forEach(((e,t)=>{let n=r[t];if(e.dynamic){let t=s.length;e.encode(s,n);let r=i.writeUpdatableValue();o.push((e=>{r(e+t)}))}else e.encode(i,n)})),o.forEach((e=>{e(i.length)}));let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function Te(e,t){let n=[],r=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let n=e.readValue(),s=r.subReader(n.toNumber());try{i=t.decode(s)}catch(e){if(e.code===f.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===f.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&n.push(i)}));const i=t.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});t.forEach(((e,t)=>{let r=e.localName;if(!r||1!==i[r])return;if("length"===r&&(r="_length"),null!=n[r])return;const s=n[t];s instanceof Error?Object.defineProperty(n,r,{enumerable:!0,get:()=>{throw s}}):n[r]=s}));for(let e=0;e<n.length;e++){const t=n[e];t instanceof Error&&Object.defineProperty(n,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(n)}class xe extends me{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;-1===n&&(n=t.length,e.writeValue(t.length)),Ae.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let r=[];for(let e=0;e<t.length;e++)r.push(this.coder);return De(e,r,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Ae.throwError("insufficient data length",f.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let e=0;e<t;e++)n.push(new Re(this.coder));return e.coerce(this.name,Te(e,n))}}class Ee extends me{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ne extends me{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=w(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Be extends Ne{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,I(super.decode(e)))}}class je extends me{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=w(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,I(e.readBytes(this.size)))}}class Ue extends me{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Fe=D.from(-1),qe=D.from(0),Qe=D.from(1),Ge=D.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ke extends me{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=D.from(t),r=Ge.mask(8*e.wordSize);if(this.signed){let e=r.mask(8*this.size-1);(n.gt(e)||n.lt(e.add(Qe).mul(Fe)))&&this._throwError("value out-of-bounds",t)}else(n.lt(qe)||n.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(8*this.size).mask(8*this.size),this.signed&&(n=n.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const We=new f("strings/5.6.0");var He,Je;function Le(e,t,n,r,i){if(e===Je.BAD_PREFIX||e===Je.UNEXPECTED_CONTINUE){let e=0;for(let r=t+1;r<n.length&&n[r]>>6==2;r++)e++;return e}return e===Je.OVERRUN?n.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(He||(He={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Je||(Je={}));const Ve=Object.freeze({error:function(e,t,n,r,i){return We.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",n)},ignore:Le,replace:function(e,t,n,r,i){return e===Je.OVERLONG?(r.push(i),0):(r.push(65533),Le(e,t,n))}});function $e(e,t=He.current){t!=He.current&&(We.checkNormalize(),e=e.normalize(t));let n=[];for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(63&r|128);else if(55296==(64512&r)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&r)<<10)+(1023&i);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)}return w(n)}function ze(e,t){return function(e,t){null==t&&(t=Ve.error),e=w(e);const n=[];let r=0;for(;r<e.length;){const i=e[r++];if(i>>7==0){n.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){r+=t(128==(192&i)?Je.UNEXPECTED_CONTINUE:Je.BAD_PREFIX,r-1,e,n);continue}s=3,o=65535}if(r-1+s>=e.length){r+=t(Je.OVERRUN,r-1,e,n);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[r];if(128!=(192&i)){r+=t(Je.MISSING_CONTINUE,r,e,n),a=null;break}a=a<<6|63&i,r++}null!==a&&(a>1114111?r+=t(Je.OUT_OF_RANGE,r-1-s,e,n,a):a>=55296&&a<=57343?r+=t(Je.UTF16_SURROGATE,r-1-s,e,n,a):a<=o?r+=t(Je.OVERLONG,r-1-s,e,n,a):n.push(a))}return n}(e,t).map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}class Ye extends Ne{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,$e(t))}decode(e){return ze(super.decode(e))}}class Ze extends me{constructor(e,t){let n=!1;const r=[];e.forEach((e=>{e.dynamic&&(n=!0),r.push(e.type)})),super("tuple","tuple("+r.join(",")+")",t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e}),{});return this.coders.forEach(((n,r)=>{let i=n.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[r]))})),Object.freeze(e)}encode(e,t){return De(e,this.coders,t)}decode(e){return e.coerce(this.name,Te(e,this.coders))}}const Xe=new f(W),et=new RegExp(/^bytes([0-9]*)$/),tt=new RegExp(/^(u?int)([0-9]*)$/);class nt{constructor(e){Xe.checkNew(new.target,nt),j(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Me(e.name);case"bool":return new Ee(e.name);case"string":return new Ye(e.name);case"bytes":return new Be(e.name);case"array":return new xe(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Ze((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new Ue(e.name)}let t=e.type.match(tt);if(t){let n=parseInt(t[2]||"256");return(0===n||n>256||n%8!=0)&&Xe.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Ke(n/8,"int"===t[1],e.name)}if(t=e.type.match(et),t){let n=parseInt(t[1]);return(0===n||n>32)&&Xe.throwArgumentError("invalid bytes length","param",e),new je(n,e.name)}return Xe.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ve(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new ye(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(X.from(e))));return new Ze(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Xe.throwError("types/values length mismatch",f.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map((e=>this._getCoder(X.from(e)))),r=new Ze(n,"_"),i=this._getWriter();return r.encode(i,t),i.data}decode(e,t,n){const r=e.map((e=>this._getCoder(X.from(e))));return new Ze(r,"_").decode(this._getReader(w(t),n))}}const rt=new nt;function it(e){return _e($e(e))}const st=new f(W);class ot extends K{}class at extends K{}class ct extends K{}class dt extends K{static isIndexed(e){return!(!e||!e._isIndexed)}}const ut={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function lt(e,t){const n=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return n.error=t,n}class ht{constructor(e){st.checkNew(new.target,ht);let t=[];t="string"==typeof e?JSON.parse(e):e,j(this,"fragments",t.map((e=>te.from(e))).filter((e=>null!=e))),j(this,"_abiCoder",U(new.target,"getAbiCoder")()),j(this,"functions",{}),j(this,"errors",{}),j(this,"events",{}),j(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void st.warn("duplicate definition - constructor"):void j(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let n=e.format();t[n]?st.warn("duplicate definition - "+n):t[n]=e})),this.deploy||j(this,"deploy",oe.from({payable:!1,type:"constructor"})),j(this,"_isInterface",!0)}format(e){e||(e=Y.full),e===Y.sighash&&st.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===Y.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return rt}static getAddress(e){return Pe(e)}static getSighash(e){return n=0,4,"string"!=typeof(t=it(e.format()))?t=I(t):(!O(t)||t.length%2)&&g.throwArgumentError("invalid hexData","value",t),n=2+2*n,"0x"+t.substring(n,10);var t,n}static getEventTopic(e){return it(e.format())}getFunction(e){if(O(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];st.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching function","name",t):n.length>1&&st.throwArgumentError("multiple matching functions","name",t),this.functions[n[0]]}const t=this.functions[ae.fromString(e).format()];return t||st.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(O(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];st.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching event","name",t):n.length>1&&st.throwArgumentError("multiple matching events","name",t),this.events[n[0]]}const t=this.events[ne.fromString(e).format()];return t||st.throwArgumentError("no matching event","signature",e),t}getError(e){if(O(e)){const t=U(this.constructor,"getSighash");for(const n in this.errors)if(e===t(this.errors[n]))return this.errors[n];st.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),n=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===n.length?st.throwArgumentError("no matching error","name",t):n.length>1&&st.throwArgumentError("multiple matching errors","name",t),this.errors[n[0]]}const t=this.errors[ae.fromString(e).format()];return t||st.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return U(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),U(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const n=w(t);return I(n.slice(0,4))!==this.getSighash(e)&&st.throwArgumentError(`data signature does not match error ${e.name}.`,"data",I(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),I(_([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const n=w(t);return I(n.slice(0,4))!==this.getSighash(e)&&st.throwArgumentError(`data signature does not match function ${e.name}.`,"data",I(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),I(_([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let n=w(t),r=null,i=null,s=null,o=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch(e){}break;case 4:{const e=I(n.slice(0,4)),t=ut[e];if(t)i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,o=t.signature,t.reason&&(r=i[0]);else try{const t=this.getError(e);i=this._abiCoder.decode(t.inputs,n.slice(4)),s=t.name,o=t.format()}catch(e){}break}}return st.throwError("call revert exception",f.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:i,errorName:s,errorSignature:o,reason:r})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),I(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&st.throwError("too many arguments for "+e.format(),f.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const r=(e,t)=>"string"===e.type?it(t):"bytes"===e.type?_e(I(t)):("address"===e.type&&this._abiCoder.encode(["address"],[t]),S(I(t),32));for(t.forEach(((t,i)=>{let s=e.inputs[i];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?st.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map((e=>r(s,e)))):n.push(r(s,t)):null!=t&&st.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const n=[],r=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&st.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,s)=>{const o=t[s];if(e.indexed)if("string"===e.type)n.push(it(o));else if("bytes"===e.type)n.push(_e(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(this._abiCoder.encode([e.type],[o]))}else r.push(e),i.push(o)})),{data:this._abiCoder.encode(r,i),topics:n}}decodeEventLog(e,t,n){if("string"==typeof e&&(e=this.getEvent(e)),null!=n&&!e.anonymous){let t=this.getEventTopic(e);O(n[0],32)&&n[0].toLowerCase()===t||st.throwError("fragment/topic mismatch",f.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:n[0]}),n=n.slice(1)}let r=[],i=[],s=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(X.fromObject({type:"bytes32",name:e.name})),s.push(!0)):(r.push(e),s.push(!1)):(i.push(e),s.push(!1))}));let o=null!=n?this._abiCoder.decode(r,_(n)):null,a=this._abiCoder.decode(i,t,!0),c=[],d=0,u=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==o)c[t]=new dt({_isIndexed:!0,hash:null});else if(s[t])c[t]=new dt({_isIndexed:!0,hash:o[u++]});else try{c[t]=o[u++]}catch(e){c[t]=e}else try{c[t]=a[d++]}catch(e){c[t]=e}if(e.name&&null==c[e.name]){const n=c[t];n instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:()=>{throw lt(`property ${JSON.stringify(e.name)}`,n)}}):c[e.name]=n}}));for(let e=0;e<c.length;e++){const t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:()=>{throw lt(`index ${e}`,t)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new at({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:D.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new ot({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=I(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new ct({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!(!e||!e._isInterface)}}},33122:function(e,t,n){var r=n(48834).Buffer,i=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumAccountBase=void 0;const o=n(65880),a=n(89642),c=n(76181),d=n(97750),u=n(37472),l=n(75960),h=n(63523),p=n(80075),f=new(n(65575).Interface)([{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]);class g{constructor(e,t,n){this.chainGetter=e,this.chainId=t,this.getKeplr=n,this._isSendingTx=!1,(0,p.makeObservable)(this)}setIsSendingTx(e){this._isSendingTx=e}get isSendingTx(){return this._isSendingTx}simulateGas(e,t){return s(this,void 0,void 0,(function*(){if(!this.chainGetter.getChain(this.chainId).evm)throw new Error("No EVM chain info provided");const{to:n,value:r,data:i}=t,s=yield this.getKeplr(),o=yield s.ethereum.request({method:"eth_estimateGas",params:[{from:e,to:n,value:r,data:i}],chainId:this.chainId});if(!o)throw new Error("Failed to estimate gas");return{gasUsed:parseInt(o)}}))}simulateGasForSendTokenTx({currency:e,amount:t,sender:n,recipient:r}){return s(this,void 0,void 0,(function*(){const i=g.isEthereumHexAddressWithChecksum(r)?r:n,s=(0,u.parseUnits)(t,e.coinDecimals),o=new a.DenomHelper(e.coinMinimalDenom),l="erc20"===o.type?{to:o.contractAddress,value:"0x0",data:c.erc20ContractInterface.encodeFunctionData("transfer",[i,(0,d.hexValue)(s)])}:{to:i,value:(0,d.hexValue)(s)};return this.simulateGas(n,l)}))}simulateOpStackL1Fee(e){return s(this,void 0,void 0,(function*(){const t=this.chainGetter.getChain(this.chainId);if(!t.features.includes("op-stack-l1-data-fee"))throw new Error("The chain isn't built with OP Stack");if(!t.evm)throw new Error("No EVM chain info provided");const n=yield this.getKeplr();return yield n.ethereum.request({method:"eth_call",params:[{to:"0x420000000000000000000000000000000000000F",data:f.encodeFunctionData("getL1Fee",[(0,l.serialize)(e)])},"latest"],chainId:this.chainId})}))}makeSendTokenTx({currency:e,amount:t,to:n,gasLimit:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:o}){const l=(0,u.parseUnits)(t,e.coinDecimals),h=new a.DenomHelper(e.coinMinimalDenom),p=i&&s?{maxFeePerGas:(0,d.hexValue)(Number(i)),maxPriorityFeePerGas:(0,d.hexValue)(Number(s)),gasLimit:(0,d.hexValue)(r)}:{gasPrice:(0,d.hexValue)(Number(null!=o?o:"0")),gasLimit:(0,d.hexValue)(r)};return(()=>"erc20"===h.type?Object.assign(Object.assign({},this.makeTx(h.contractAddress,"0x0",c.erc20ContractInterface.encodeFunctionData("transfer",[n,(0,d.hexValue)(l)]))),p):Object.assign(Object.assign({},this.makeTx(n,(0,d.hexValue)(l))),p))()}makeErc20ApprovalTx(e,t,n){const r=(0,u.parseUnits)(n,e.coinDecimals);return this.makeTx(e.contractAddress,"0x0",c.erc20ContractInterface.encodeFunctionData("approve",[t,(0,d.hexValue)(r)]))}makeTx(e,t,n){const r=this.chainGetter.getChain(this.chainId).evm;if(!r)throw new Error("No EVM chain info provided");return{chainId:r.chainId,to:e,value:t,data:n}}sendEthereumTx(e,t,n,i){return s(this,void 0,void 0,(function*(){try{if(!this.chainGetter.getChain(this.chainId).evm)throw new Error("No EVM info provided");const c=yield this.getKeplr(),d=yield c.ethereum.request({method:"eth_getTransactionCount",params:[e,"pending"],chainId:this.chainId});t=Object.assign(Object.assign({},t),{nonce:parseInt(d)});const u=c.signEthereum.bind(c),h=yield u(this.chainId,e,JSON.stringify(t),o.EthSignType.TRANSACTION);(t.maxFeePerGas||t.maxPriorityFeePerGas)&&(t.type=l.TransactionTypes.eip1559);const p=r.from((0,l.serialize)(t,h).replace("0x",""),"hex"),f=c.sendEthereumTx.bind(c),g=(null==i?void 0:i.sendTx)?yield i.sendTx(this.chainId,p):yield f(this.chainId,p);if(!g)throw new Error("No tx hash responded");return(null==n?void 0:n.onBroadcasted)&&n.onBroadcasted(g),(0,a.retry)((()=>new Promise(((e,t)=>s(this,void 0,void 0,(function*(){var r;const i=yield c.ethereum.request({method:"eth_getTransactionReceipt",params:[g],chainId:this.chainId});i&&(null===(r=null==n?void 0:n.onFulfill)||void 0===r||r.call(n,i),e()),t()}))))),{maxRetries:10,waitMsAfterError:500,maxWaitMsAfterError:4e3}),g}catch(e){throw(null==n?void 0:n.onBroadcastFailed)&&n.onBroadcastFailed(e),e}}))}static isEthereumHexAddressWithChecksum(e){const t=!!e.match(/^0x[0-9A-Fa-f]*$/),n=!!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/);if(!t||42!==e.length)return!1;const r=(0,h.getAddress)(e.toLowerCase());return!n||r===e}}i([p.observable],g.prototype,"_isSendingTx",void 0),i([p.action],g.prototype,"setIsSendingTx",null),t.EthereumAccountBase=g},21554:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(33122),t),i(n(34686),t)},34686:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumAccountStore=void 0;const r=n(11169),i=n(33122);class s extends r.HasMapStore{constructor(e,t){super((n=>new i.EthereumAccountBase(e,n,t))),this.chainGetter=e,this.getKeplr=t}getAccount(e){return this.get(this.chainGetter.getChain(e).chainId)}}t.EthereumAccountStore=s},76181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.erc20ContractInterface=void 0;const r=n(65575);t.erc20ContractInterface=new r.Interface([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"usr",type:"address"}],name:"Deny",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"usr",type:"address"}],name:"Rely",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"usr",type:"address"}],name:"deny",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deploymentChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"usr",type:"address"}],name:"rely",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"wards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}])},62233:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ERC20CurrencyRegistrar=void 0;const o=n(89642),a=n(80075),c=s(n(80594));class d{constructor(e,t=864e5,n=36e5,r,i){this.kvStore=e,this.cacheDuration=t,this.failedCacheDuration=n,this.chainStore=r,this.queriesStore=i,this._isInitialized=!1,this.cacheERC20Metadata=new Map,this.staledERC20Metadata=new Map,this.debouncedSetCacheERC20MetadataToDB=(0,c.default)(this.setCacheERC20MetadataToDB.bind(this),1e3),this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,a.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e=yield this.kvStore.get("cacheERC20Metadata-v2");if(e)for(const[t,n]of Object.entries(e))this.cacheERC20Metadata.set(t,n);(0,a.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.chainStore.hasChain(e))return;const n=new o.DenomHelper(t);if("erc20"!==n.type)return;if(!this.isInitialized)return{value:void 0,done:!1};const r=n.denom.replace("erc20:","");let i=!1;const s=this.getERC20Metadata(e,r);s.isFetching&&(i=!0);const a=s.res?{type:"erc20",coinMinimalDenom:n.denom,contractAddress:r,coinDenom:s.res.coinDenom,coinImageUrl:s.res.coinImageUrl,coinGeckoId:s.res.coingeckoId,coinDecimals:s.res.decimals}:void 0;return s.isFetching||s.fromCache||(a?this.setCacheERC20Metadata(e,r,{notFound:void 0,symbol:a.coinDenom,decimals:a.coinDecimals,coingeckoId:a.coinGeckoId,logoURI:a.coinImageUrl,timestamp:Date.now()}):s.notFound&&this.setCacheERC20Metadata(e,r,{notFound:!0,timestamp:Date.now()})),a?{value:Object.assign({},a),done:!i}:{value:void 0,done:!i}}getERC20Metadata(e,t){var n,r,i;const{res:s,staled:o}=this.getCacheERC20Metadata(e,t);if(s){if(s.notFound)return{res:void 0,isFetching:!1,fromCache:!0,notFound:!0};if(!o)return{res:{coinDenom:s.symbol,decimals:s.decimals,coingeckoId:s.coingeckoId,coinImageUrl:s.logoURI},isFetching:!1,fromCache:!0,notFound:!1}}const a=this.queriesStore.get(e);let c=!1;if(a.ethereum){const e=a.ethereum.queryEthereumCoingeckoTokenInfo.getQueryContract(t);if(e){const o=s?{coinDenom:s.symbol,decimals:s.decimals,coingeckoId:s.coingeckoId,coinImageUrl:s.logoURI}:void 0;if(e.isFetching&&(c=!0),null!=e.symbol&&null!=e.decimals)return{res:{coinDenom:e.symbol,decimals:e.decimals,coingeckoId:e.coingeckoId,coinImageUrl:e.logoURI},isFetching:c,fromCache:!1,notFound:!1};{const s=404===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.status);if(s){const e=a.keplrETC.querySkipTokenInfo.getQueryCoinMinimalDenom(`erc20:${t}`);return e.isFetching&&(c=!0),e.currency?{res:{coinDenom:e.currency.coinDenom,decimals:e.currency.coinDecimals,coingeckoId:e.currency.coinGeckoId,coinImageUrl:e.currency.coinImageUrl},isFetching:c,fromCache:!1,notFound:!1}:{res:404===(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.status)?void 0:o,isFetching:c,fromCache:!1,notFound:404===(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.status)}}return{res:o,isFetching:c,fromCache:!1,notFound:s}}}return{res:void 0,isFetching:!1,fromCache:!1,notFound:!1}}return{res:void 0,isFetching:!1,fromCache:!1,notFound:!1}}getCacheERC20Metadata(e,t){const n=`${e}/${t}`;let r=this.cacheERC20Metadata.get(n)||this.staledERC20Metadata.get(n),i=!1;return r&&(r.notFound?Date.now()-r.timestamp>this.failedCacheDuration&&(this.cacheERC20Metadata.delete(n),this.debouncedSetCacheERC20MetadataToDB(),r=void 0,i=!1):Date.now()-r.timestamp>this.cacheDuration&&(this.cacheERC20Metadata.delete(n),this.staledERC20Metadata.has(n)||(this.debouncedSetCacheERC20MetadataToDB(),this.staledERC20Metadata.set(n,r)),i=!0)),{res:r,staled:i}}setCacheERC20Metadata(e,t,n){const r=`${e}/${t}`;this.cacheERC20Metadata.set(r,n),this.debouncedSetCacheERC20MetadataToDB(),this.staledERC20Metadata.has(r)&&this.staledERC20Metadata.set(r,n)}setCacheERC20MetadataToDB(){const e=Object.fromEntries(this.cacheERC20Metadata);this.kvStore.set("cacheERC20Metadata-v2",e)}}r([a.observable],d.prototype,"_isInitialized",void 0),t.ERC20CurrencyRegistrar=d},80151:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(54481),t),i(n(21554),t),i(n(76181),t),i(n(62233),t),i(n(33303),t)},21058:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthAccountBalanceRegistry=t.ObservableQueryEthAccountBalanceImpl=void 0;const i=n(89642),s=n(19731),o=n(80075),a=n(21554),c=n(39289);class d extends c.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,i){super(e,t,n,"eth_getBalance",[i,"latest"]),this.denomHelper=r,this.ethereumHexAddress=i,(0,o.makeObservable)(this)}canFetch(){return this.ethereumHexAddress.length>0}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data?new s.CoinPretty(t,new s.Int(BigInt(this.response.data))):new s.CoinPretty(t,new s.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([o.computed],d.prototype,"balance",null),r([o.computed],d.prototype,"currency",null),t.ObservableQueryEthAccountBalanceImpl=d,t.ObservableQueryEthAccountBalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const s=new i.DenomHelper(r),o=t.getChain(e),c=a.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if("native"===s.type&&c&&null!=o.evm)return new d(this.sharedContext,e,t,s,n)}}},54040:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumBlock=t.ObservableQueryEthereumBlockInner=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_getBlockByNumber",[r,!0]),(0,i.makeObservable)(this)}get block(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"block",null),t.ObservableQueryEthereumBlockInner=o;class a extends s.ObservableEvmChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryByBlockNumberOrTag(e){const t="number"==typeof e?`0x${Number(e).toString(16)}`:e;return this.get(null!=t?t:"latest")}}t.ObservableQueryEthereumBlock=a},83962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCoingeckoTokenInfo=t.ObservableQueryCoingeckoTokenInfoInner=void 0;const r=n(11169),i=n(80075);class s extends r.ObservableQuery{constructor(e,t,n,r,s){super(e,t,n.replace("{coingeckoChainId}",r).replace("{contractAddress}",s)),this.coingeckoChainId=r,(0,i.makeObservable)(this)}get symbol(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.symbol}get decimals(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.decimals}get coingeckoId(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.coingecko_coin_id}get logoURI(){var e,t;return null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.image_url}}t.ObservableQueryCoingeckoTokenInfoInner=s;class o extends r.HasMapStore{constructor(e,t,n,r,i){const o=a[t];super((e=>{if(null!=o)return new s(this.sharedContext,r,i,o,e)})),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.coingeckoAPIBaseURL=r,this.coingeckoAPIURI=i}getQueryContract(e){return this.get(e)}}t.ObservableQueryCoingeckoTokenInfo=o;const a={"eip155:1":"eth","eip155:10":"optimism","eip155:137":"polygon_pos","eip155:8453":"base","eip155:42161":"arbitrum","eip155:56":"bsc","eip155:43114":"avax"}},62826:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumERC20BalanceRegistry=t.ObservableQueryEthereumERC20BalanceImpl=void 0;const s=n(19731),o=n(80075),a=i(n(48166)),c=n(76181),d=n(89642),u=n(21554),l=n(39289);class h extends l.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,i,s){super(e,t,n,"eth_call",[{to:s,data:c.erc20ContractInterface.encodeFunctionData("balanceOf",[i])},"latest"]),this.denomHelper=r,this.ethereumHexAddress=i,this.contractAddress=s,(0,o.makeObservable)(this)}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${this.contractAddress}`);return this.response&&this.response.data?new s.CoinPretty(t,new s.Int((0,a.default)(this.response.data.replace("0x",""),16).toString())):new s.CoinPretty(t,new s.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([o.computed],h.prototype,"balance",null),r([o.computed],h.prototype,"currency",null),t.ObservableQueryEthereumERC20BalanceImpl=h,t.ObservableQueryEthereumERC20BalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const i=new d.DenomHelper(r),s=t.getChain(e),o=u.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if("erc20"===i.type&&o&&null!=s.evm)return new h(this.sharedContext,e,t,i,n,i.contractAddress)}}},19542:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryThirdpartyERC20BalanceRegistry=t.ObservableQueryThirdpartyERC20BalancesImpl=t.ObservableQueryThirdpartyERC20BalancesImplParent=void 0;const s=n(89642),o=n(80075),a=n(19731),c=n(11169),d=n(21554),u={"eip155:1":"eth","eip155:10":"opt","eip155:137":"polygon","eip155:8453":"base","eip155:42161":"arb"};class l extends c.ObservableJsonRPCQuery{constructor(e,t,n,r){super(e,`https://evm-${t.replace("eip155:","")}.keplr.app/api`,"","alchemy_getTokenBalances",[r,"erc20",{maxCount:100}]),this.chainId=t,this.chainGetter=n,this.ethereumHexAddress=r,(0,o.makeObservable)(this)}canFetch(){return this.ethereumHexAddress.length>0&&null!=u[this.chainId]}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.tokenBalances.filter((e=>null!=e.tokenBalance&&BigInt(e.tokenBalance)>0)).map((e=>`erc20:${e.contractAddress}`));n&&t.addUnknownDenoms(...n)}}t.ObservableQueryThirdpartyERC20BalancesImplParent=l;class h{constructor(e,t,n,r){this.parent=e,this.chainId=t,this.chainGetter=n,this.denomHelper=r,(0,o.makeObservable)(this)}get balance(){const e=this.currency;if(!this.response)return new a.CoinPretty(e,new a.Int(0)).ready(!1);const t=this.response.data.tokenBalances.find((e=>s.DenomHelper.normalizeDenom(`erc20:${e.contractAddress}`)===s.DenomHelper.normalizeDenom(this.denomHelper.denom)));return null==(null==t?void 0:t.tokenBalance)?new a.CoinPretty(e,new a.Int(0)).ready(!1):new a.CoinPretty(e,new a.Int(BigInt(t.tokenBalance)))}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}get error(){return this.parent.error}get isFetching(){return this.parent.isFetching}get isObserved(){return this.parent.isObserved}get isStarted(){return this.parent.isStarted}get response(){return this.parent.response}fetch(){return this.parent.duplicatedFetchResolver||(this.parent.duplicatedFetchResolver=new Promise(((e,t)=>{(()=>{i(this,void 0,void 0,(function*(){try{yield this.parent.fetch(),this.parent.duplicatedFetchResolver=void 0,e()}catch(e){this.parent.duplicatedFetchResolver=void 0,t(e)}}))})()}))),this.parent.duplicatedFetchResolver}waitFreshResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitFreshResponse()}))}waitResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitResponse()}))}}r([o.computed],h.prototype,"balance",null),r([o.computed],h.prototype,"currency",null),t.ObservableQueryThirdpartyERC20BalancesImpl=h,t.ObservableQueryThirdpartyERC20BalanceRegistry=class{constructor(e){this.sharedContext=e,this.parentMap=new Map}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r),o=t.getChain(e),a=d.EthereumAccountBase.isEthereumHexAddressWithChecksum(n);if(!Object.keys(u).includes(e)||"erc20"!==i.type||!a||!o.evm)return;const c=`${e}/${n}`;return this.parentMap.has(c)||this.parentMap.set(c,new l(this.sharedContext,e,t,n)),new h(this.parentMap.get(c),e,t,i)}}},36111:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryERC20ContractInfo=t.ObservableQueryERC20ContactInfoInner=void 0;const i=n(11169),s=n(50898),o=n(80075);class a extends s.ObservableQueryEVMChainERC20MetadataInner{constructor(e,t,n,r){super(e,t,n,r),this.contractAddress=r}get tokenInfo(){if(void 0!==this.symbol&&void 0!==this.decimals)return{decimals:this.decimals,symbol:this.symbol}}get isFetching(){return this._querySymbol.isFetching||this._queryDecimals.isFetching}get error(){return this._querySymbol.error||this._queryDecimals.error}get notFound(){var e;return!this._querySymbol.isFetching&&null==this._querySymbol.error&&"0x0"===(null===(e=this._querySymbol.response)||void 0===e?void 0:e.data)}}r([o.computed],a.prototype,"tokenInfo",null),t.ObservableQueryERC20ContactInfoInner=a;class c extends i.HasMapStore{constructor(e,t,n){super((e=>new a(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}getQueryContract(e){return this.get(e)}}t.ObservableQueryERC20ContractInfo=c},50898:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEVMChainERC20Metadata=t.ObservableQueryEVMChainERC20MetadataInner=t.ObservableQueryEVMChainERC20MetadataDecimals=t.ObservableQueryEVMChainERC20MetadataSymbol=void 0;const i=n(11169),s=n(80075),o=n(39289),a=n(76181);class c extends o.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_call",[{to:r,data:a.erc20ContractInterface.encodeFunctionData("symbol")},"latest"]),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get symbol(){if(this.response)try{return a.erc20ContractInterface.decodeFunctionResult("symbol",this.response.data)[0]}catch(e){console.log(e)}}}r([s.computed],c.prototype,"symbol",null),t.ObservableQueryEVMChainERC20MetadataSymbol=c;class d extends o.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"eth_call",[{to:r,data:a.erc20ContractInterface.encodeFunctionData("decimals")},"latest"]),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get decimals(){if(this.response)try{return a.erc20ContractInterface.decodeFunctionResult("decimals",this.response.data)[0]}catch(e){console.log(e)}}}r([s.computed],d.prototype,"decimals",null),t.ObservableQueryEVMChainERC20MetadataDecimals=d;class u{constructor(e,t,n,r){this.sharedContext=e,this._querySymbol=new c(e,t,n,r),this._queryDecimals=new d(e,t,n,r)}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryEVMChainERC20MetadataInner=u;class l extends i.HasMapStore{constructor(e,t,n){super((e=>new u(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}get(e){return super.get(e)}}t.ObservableQueryEVMChainERC20Metadata=l},39289:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableEvmChainJsonRpcQueryMap=t.ObservableEvmChainJsonRpcQuery=void 0;const i=n(11169);class s extends i.ObservableJsonRPCQuery{constructor(e,t,n,r,i){var s,o;super(e,null!==(o=null===(s=n.getChain(t).evm)||void 0===s?void 0:s.rpc)&&void 0!==o?o:"","",r,i),this._chainId=t,this.chainGetter=n}fetchResponse(){return r(this,void 0,void 0,(function*(){const e=yield(0,i.getKeplrFromWindow)();return{headers:{},data:yield null==e?void 0:e.ethereum.request({method:this.method,params:this.params,chainId:this._chainId})}}))}get chainId(){return this._chainId}}t.ObservableEvmChainJsonRpcQuery=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableEvmChainJsonRpcQueryMap=o},12778:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumFeeHistory=t.ObservableQueryEthereumFeeHistoryInner=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n,r,s,o){super(e,t,n,"eth_feeHistory",["string"==typeof r?r:`0x${r.toString(16)}`,s,o]),(0,i.makeObservable)(this)}get feeHistory(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"feeHistory",null),t.ObservableQueryEthereumFeeHistoryInner=o;class a extends s.ObservableEvmChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=(()=>{try{return JSON.parse(e)}catch(e){throw new Error("Invalid JSON RPC params")}})(),n=t[0],r=t[1],i=t[2];return new o(this.sharedContext,this.chainId,this.chainGetter,n,r,i)}))}getQueryByFeeHistoryParams(e,t,n){const r=JSON.stringify([e,t,n]);return this.get(r)}}t.ObservableQueryEthereumFeeHistory=a},6938:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumGasPrice=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"eth_gasPrice",[]),(0,i.makeObservable)(this)}get gasPrice(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"gasPrice",null),t.ObservableQueryEthereumGasPrice=o},54481:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumQueriesImpl=t.EthereumQueries=void 0;const r=n(21058),i=n(54040),s=n(12778),o=n(50898),a=n(36111),c=n(20994),d=n(19542),u=n(83962),l=n(62826),h=n(6938);t.EthereumQueries={use:e=>(t,n,r,i)=>({ethereum:new p(t,n,r,i,e.coingeckoAPIBaseURL,e.coingeckoAPIURI)})};class p{constructor(e,t,n,p,f,g){this.chainId=n,this.chainGetter=p,this.coingeckoAPIBaseURL=f,this.coingeckoAPIURI=g,e.queryBalances.addBalanceRegistry(new l.ObservableQueryEthereumERC20BalanceRegistry(t)),e.queryBalances.addBalanceRegistry(new d.ObservableQueryThirdpartyERC20BalanceRegistry(t)),e.queryBalances.addBalanceRegistry(new r.ObservableQueryEthAccountBalanceRegistry(t)),this.queryEthereumBlock=new i.ObservableQueryEthereumBlock(t,n,p),this.queryEthereumFeeHistory=new s.ObservableQueryEthereumFeeHistory(t,n,p),this.queryEthereumERC20Metadata=new o.ObservableQueryEVMChainERC20Metadata(t,n,p),this.queryEthereumERC20ContractInfo=new a.ObservableQueryERC20ContractInfo(t,n,p),this.queryEthereumMaxPriorityFee=new c.ObservableQueryEthereumMaxPriorityFee(t,n,p),this.queryEthereumCoingeckoTokenInfo=new u.ObservableQueryCoingeckoTokenInfo(t,n,p,f,g),this.queryEthereumGasPrice=new h.ObservableQueryEthereumGasPrice(t,n,p)}}t.EthereumQueriesImpl=p},20994:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryEthereumMaxPriorityFee=void 0;const i=n(80075),s=n(39289);class o extends s.ObservableEvmChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"eth_maxPriorityFeePerGas",[]),(0,i.makeObservable)(this)}get maxPriorityFeePerGas(){if(this.response)return this.response.data}}r([i.computed],o.prototype,"maxPriorityFeePerGas",null),t.ObservableQueryEthereumMaxPriorityFee=o},33303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},82454:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IBCChannelStore=void 0;const s=n(89642),o=n(80075),a=n(58242),c=n(94531);class d{constructor(e,t){this.kvStore=e,this.chainStore=t,this.channelMap=new Map,this.isInitialized=!1,this.getChannels=(0,a.computedFn)(((e,t)=>{const n=this.channelMap.get(c.ChainIdHelper.parse(e).identifier);if(!n)return[];const r=[];for(const[e,i]of n.entries())e.startsWith(`${t}/`)&&r.push(i);return r})),this.getChannel=(0,a.computedFn)(((e,t,n)=>{const r=this.channelMap.get(c.ChainIdHelper.parse(e).identifier);if(r)return r.get(`${t}/${n}`)})),this.legacyKVStore=e,this.kvStore=new s.PrefixKVStore(e,"v2"),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){if(this.chainStore.waitUntilInitialized&&(yield this.chainStore.waitUntilInitialized()),!(yield this.kvStore.get("migrate/v1"))){const e=new Map;for(const t of this.chainStore.chainInfos){const n=c.ChainIdHelper.parse(t.chainId),r=`${n.identifier}-channels`,i=yield this.legacyKVStore.get(r);if(i)for(const t of Object.keys(i)){const r=i[t];if(r)for(const t of Object.keys(r)){e.has(n.identifier)||e.set(n.identifier,new Map);const i=e.get(n.identifier),s=r[t];s&&i.set(`${s.portId}/${s.channelId}`,s)}}}(0,o.runInAction)((()=>{this.channelMap=e})),yield this.kvStore.set("migrate/v1",!0)}const e=yield this.kvStore.get("channelMap");e&&(0,o.runInAction)((()=>{for(const[t,n]of Object.entries(e)){const e=new Map;if(n)for(const[t,r]of Object.entries(n))r&&e.set(t,r);this.channelMap.set(t,e)}})),(0,o.autorun)((()=>{const e={};for(const[t,n]of this.channelMap.entries()){const r={};for(const[e,t]of n.entries())r[e]=t;e[t]=r}this.kvStore.set("channelMap",e)})),(0,o.autorun)((()=>{const t=new Set(Object.keys(null!=e?e:{})),n=[];for(const e of t)this.chainStore.hasChain(e)||n.push(e);n.length>0&&(0,o.runInAction)((()=>{for(const e of n)this.channelMap.delete(e)}))})),(0,o.runInAction)((()=>{this.isInitialized=!0}))}))}getTransferChannels(e){return this.getChannels(e,"transfer")}addChannel(e,t){const n=c.ChainIdHelper.parse(e).identifier;this.channelMap.has(n)||this.channelMap.set(n,new Map),this.channelMap.get(n).set(`${t.portId}/${t.channelId}`,t)}}r([o.observable],d.prototype,"channelMap",void 0),r([o.observable],d.prototype,"isInitialized",void 0),r([o.action],d.prototype,"addChannel",null),t.IBCChannelStore=d},75319:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IBCCurrencyRegistrar=void 0;const o=n(80075),a=n(89642),c=n(94531),d=s(n(80594));class u{static defaultCoinDenomGenerator(e,t,n,r){return r?`${r.coinDenom} (${n?n.chainName:"Unknown"}/${e.paths[0].channelId})`:`${e.denom} (${n?n.chainName:"Unknown"}/${e.paths[0].channelId})`}constructor(e,t=864e5,n=36e5,r,i,s,a=u.defaultCoinDenomGenerator){this.kvStore=e,this.cacheDuration=t,this.failedCacheDuration=n,this.chainStore=r,this.accountStore=i,this.queriesStore=s,this.coinDenomGenerator=a,this.cacheDenomTracePaths=new Map,this.staledDenomTracePaths=new Map,this.cacheTokenInfoMetadata=new Map,this.staledTokenInfoMetadata=new Map,this.isInitialized=!1,this.debouncedSetCacheTokenInfoToDB=(0,d.default)(this.setCacheTokenInfoToDB.bind(this),1e3),this.debouncedSetCacheDenomTracePathsToDB=(0,d.default)(this.setCacheDenomTracePathsToDB.bind(this),1e3),this.chainStore.registerCurrencyRegistrar(this.ibcCurrencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){{const e="cache-ibc-denom-trace-paths-v3",t=yield this.kvStore.get(e);if(t)for(const[e,n]of Object.entries(t))this.cacheDenomTracePaths.set(e,n)}{const e="cache-token-info-2",t=yield this.kvStore.get(e);if(t)for(const[e,n]of Object.entries(t))this.cacheTokenInfoMetadata.set(e,n)}(0,o.runInAction)((()=>{this.isInitialized=!0}))}))}ibcCurrencyRegistrar(e,t){var n;if(!this.chainStore.hasChain(e))return;const r=new a.DenomHelper(t);if("native"===r.type&&r.denom.startsWith("ibc/")){if(!this.isInitialized)return{value:void 0,done:!1};try{const t=this.queriesStore.get(e),i=r.denom.replace("ibc/","");let s,o,a,c=!1,d=!1,{res:u,staled:l}=this.getCacheIBCDenomData(e,i);if(u)if(u.denomTrace.paths.some((e=>!e.clientChainId||!this.chainStore.hasChain(e.clientChainId))))if(l)u=void 0,d=!1,l=!1,this.removeCacheIBCDenomData(e,i);else{if(!(u.originChainId&&this.chainStore.hasChain(u.originChainId)&&u.originChainUnknown||u.counterpartyChainId&&this.chainStore.hasChain(u.counterpartyChainId)&&u.counterpartyChainUnknown))return{value:void 0,done:!0};u=void 0,d=!1,l=!1,this.removeCacheIBCDenomData(e,i)}else d=!0,a=u.denomTrace,u.originChainId&&this.chainStore.hasChain(u.originChainId)&&(o=this.chainStore.getChain(u.originChainId)),u.counterpartyChainId&&this.chainStore.hasChain(u.counterpartyChainId)&&(s=this.chainStore.getChain(u.counterpartyChainId)),(o&&u.originChainUnknown||s&&u.counterpartyChainUnknown)&&(u=void 0,d=!1,l=!1,this.removeCacheIBCDenomData(e,i),a=void 0,o=void 0,s=void 0);if(!d||l){let n=!1;const r=t.cosmos.queryIBCDenomTrace.getDenomTrace(i);if(a=r.denomTrace,r.isFetching&&(n=!0,c=!0),a){let t,r;const d=a.paths;let u=e;for(let e=0;e<d.length;e++){const i=d[e];if(e===d.length-1&&this.chainStore.getChain(u).hasFeature("ibc-v2")&&a.denom.startsWith("0x")){const e=this.queriesStore.get(u).cosmos.queryIBCClientStateV2.getClientState(i.channelId);if(e.isFetching&&(n=!0),e.clientChainId&&!Number.isNaN(parseInt(e.clientChainId))){const n=`eip155:${e.clientChainId}`;t=n,r||(r=n),this.chainStore.hasChain(n)?(i.clientChainId=n,u=n,o=this.chainStore.getChain(n),s||(s=this.chainStore.getChain(n))):(o=void 0,t=void 0);break}}const c=this.queriesStore.get(u).cosmos.queryIBCClientState.getClientState(i.portId,i.channelId);c.isFetching&&(n=!0);const l=this.queriesStore.get(u).cosmos.queryIBCChannel.getChannel(i.portId,i.channelId);if(l.isFetching&&(n=!0),l.response&&(i.counterpartyChannelId=l.response.data.channel.counterparty.channel_id,i.counterpartyPortId=l.response.data.channel.counterparty.port_id),c.clientChainId&&(t=c.clientChainId,r||(r=c.clientChainId)),!c.clientChainId||!this.chainStore.hasChain(c.clientChainId)){o=void 0,t=void 0;break}i.clientChainId=c.clientChainId,u=c.clientChainId,o=this.chainStore.getChain(c.clientChainId),s||(s=this.chainStore.getChain(c.clientChainId))}n&&(c=!0),n||this.setCacheIBCDenomData(e,i,{denomTrace:a,originChainId:t,originChainUnknown:!o,counterpartyChainId:r,counterpartyChainUnknown:!s,timestamp:Date.now()})}c&&l&&u&&(a||(a=u.denomTrace),!o&&u.originChainId&&this.chainStore.hasChain(u.originChainId)&&(o=this.chainStore.getChain(u.originChainId)),!s&&u.counterpartyChainId&&this.chainStore.hasChain(u.counterpartyChainId)&&(s=this.chainStore.getChain(u.counterpartyChainId)))}if(o&&a){if(this.chainStore.isEvmOnlyChain(o.chainId)){const e=o.currencies.find((e=>e.coinMinimalDenom===`erc20:${a.denom}`));if(e)return{value:{coinDecimals:e.coinDecimals,coinGeckoId:e.coinGeckoId,coinImageUrl:e.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,e),paths:a.paths,originChainId:o.chainId,originCurrency:e},done:!c};const t=this.getERC20TokenInfo(o.chainId,a.denom);t.isFetching&&(c=!0);const n=t.res?{type:"erc20",coinMinimalDenom:`erc20:${a.denom}`,contractAddress:a.denom,coinDenom:t.res.coinDenom,coinDecimals:t.res.decimals,coinGeckoId:t.res.coingeckoId,coinImageUrl:t.res.coinImageUrl}:void 0;return t.isFetching||t.fromCache||(n?this.setCacheTokenInfo(o.chainId,a.denom,{notFound:void 0,coinDenom:n.coinDenom,coinDecimals:n.coinDecimals,coinGeckoId:n.coinGeckoId,coinImageUrl:n.coinImageUrl,timestamp:Date.now()}):t.notFound&&this.setCacheTokenInfo(o.chainId,a.denom,{notFound:!0,timestamp:Date.now()})),n?{value:{coinDecimals:n.coinDecimals,coinGeckoId:n.coinGeckoId,coinImageUrl:n.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,n),paths:a.paths,originChainId:o.chainId,originCurrency:n},done:!c}:{value:void 0,done:!c}}{const e=4===a.denom.split(/^(cw20):(\w+)$/).length,t=4===a.denom.split(/^(erc20)\/(\w+)$/).length;switch(!0){case e:if(null===(n=o.features)||void 0===n?void 0:n.includes("secretwasm")){let e=!1,t=o.currencies.find((e=>a&&e.coinMinimalDenom.startsWith(a.denom)));if(!t&&this.chainStore.hasChain(o.chainId)){const n=this.queriesStore.get(o.chainId);if(n.secret){const r=a.denom.replace("cw20:",""),i=n.secret.querySecret20ContractInfo.getQueryContract(r);e=i.isFetching,i.response&&(t={type:"secret20",contractAddress:r,coinDecimals:i.response.data.token_info.decimals,coinDenom:i.response.data.token_info.symbol,coinMinimalDenom:`secret20:${r}:${i.response.data.token_info.name}`})}}if(t)return{value:{coinDecimals:t.coinDecimals,coinGeckoId:t.coinGeckoId,coinImageUrl:t.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,t),paths:a.paths,originChainId:o.chainId,originCurrency:t},done:d&&!e}}else{let e=!1,t=o.currencies.find((e=>a&&e.coinMinimalDenom.startsWith(a.denom)));if(!t&&this.chainStore.hasChain(o.chainId)){const n=this.queriesStore.get(o.chainId);if(n.cosmwasm){const r=a.denom.replace("cw20:",""),i=n.cosmwasm.querycw20ContractInfo.getQueryContract(r);e=i.isFetching,i.response&&(t={type:"cw20",contractAddress:r,coinDecimals:i.response.data.decimals,coinDenom:i.response.data.symbol,coinMinimalDenom:`cw20:${r}:${i.response.data.name}`})}}if(t)return{value:{coinDecimals:t.coinDecimals,coinGeckoId:t.coinGeckoId,coinImageUrl:t.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,t),paths:a.paths,originChainId:o.chainId,originCurrency:t},done:d&&!e}}break;case t:let i=!1,u=o.currencies.find((e=>a&&e.coinMinimalDenom.startsWith(a.denom)));if(!u&&this.chainStore.hasChain(o.chainId)){const e=this.queriesStore.get(o.chainId);if(e.ethereum){const t=a.denom.replace("erc20/",""),n=e.ethereum.queryEthereumERC20ContractInfo.getQueryContract(t);i=n.isFetching,n.tokenInfo&&(u={type:"erc20",contractAddress:t,coinDecimals:n.tokenInfo.decimals,coinDenom:n.tokenInfo.symbol,coinMinimalDenom:`erc20:${t}`})}}if(u)return{value:{coinDecimals:u.coinDecimals,coinGeckoId:u.coinGeckoId,coinImageUrl:u.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,u),paths:a.paths,originChainId:o.chainId,originCurrency:u},done:d&&!i};break;default:const l=o.findCurrency(a.denom);if(o.isCurrencyRegistrationInProgress(a.denom)&&(c=!0),l&&!("paths"in l))return{value:{coinDecimals:l.coinDecimals,coinGeckoId:l.coinGeckoId,coinImageUrl:l.coinImageUrl,coinMinimalDenom:r.denom,coinDenom:this.coinDenomGenerator(a,o,s,l),paths:a.paths,originChainId:o.chainId,originCurrency:l},done:!c}}return{value:void 0,done:!1}}}return{value:void 0,done:!1}}catch(t){console.log("Error in IBC currency registrar",t);const n=r.denom.replace("ibc/","");return this.removeCacheIBCDenomData(e,n),{value:void 0,done:!0}}}}getERC20TokenInfo(e,t){var n,r;const{res:i,staled:s}=this.getCacheTokenInfo(e,t);if(i){if(i.notFound)return{res:void 0,isFetching:!1,fromCache:!0,notFound:!0};if(!s)return{res:{coinDenom:i.coinDenom,decimals:i.coinDecimals,coingeckoId:i.coinGeckoId,coinImageUrl:i.coinImageUrl},isFetching:!1,fromCache:!0,notFound:!1}}const o=this.queriesStore.get(e);if("eip155:1"===e){if("0xf6718b2701d4a6498ef77d7c152b2137ab28b8a3"===t)return{res:{coinDenom:"stBTC",decimals:18,coingeckoId:void 0,coinImageUrl:void 0},isFetching:!1,fromCache:!1,notFound:!1};if("0x09def5abc67e967d54e8233a4b5ebbc1b3fbe34b"===t)return{res:{coinDenom:"waBTC",decimals:18,coingeckoId:void 0,coinImageUrl:void 0},isFetching:!1,fromCache:!1,notFound:!1}}if(o.ethereum){const e=o.ethereum.queryEthereumCoingeckoTokenInfo.getQueryContract(t);if(e){const t=e.isFetching;return null!=e.symbol&&null!=e.decimals?{res:{coinDenom:e.symbol,decimals:e.decimals,coingeckoId:e.coingeckoId,coinImageUrl:e.logoURI},isFetching:t,fromCache:!1,notFound:!1}:{res:404===(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.status)?void 0:i?{coinDenom:i.coinDenom,decimals:i.coinDecimals,coingeckoId:i.coinGeckoId,coinImageUrl:i.coinImageUrl}:void 0,isFetching:t,fromCache:!1,notFound:404===(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.status)}}return{res:void 0,isFetching:!1,fromCache:!1,notFound:!1}}return{res:void 0,isFetching:!1,fromCache:!1,notFound:!1}}getCacheIBCDenomData(e,t){const n=`${c.ChainIdHelper.parse(e).identifier}/${t}`,r=this.cacheDenomTracePaths.get(n)||this.staledDenomTracePaths.get(n);let i=!1;return r&&Date.now()-r.timestamp>this.cacheDuration&&(this.cacheDenomTracePaths.delete(n),this.staledDenomTracePaths.has(n)||(this.debouncedSetCacheDenomTracePathsToDB(),this.staledDenomTracePaths.set(n,r)),i=!0),{res:r,staled:i}}setCacheIBCDenomData(e,t,n){const r=`${c.ChainIdHelper.parse(e).identifier}/${t}`;this.cacheDenomTracePaths.set(r,n),this.debouncedSetCacheDenomTracePathsToDB(),this.staledDenomTracePaths.has(r)&&this.staledDenomTracePaths.set(r,n)}removeCacheIBCDenomData(e,t){const n=`${c.ChainIdHelper.parse(e).identifier}/${t}`;this.cacheDenomTracePaths.delete(n),this.debouncedSetCacheDenomTracePathsToDB(),this.staledDenomTracePaths.delete(n)}getCacheTokenInfo(e,t){const n=`${c.ChainIdHelper.parse(e).identifier}/${t}`;let r=this.cacheTokenInfoMetadata.get(n)||this.staledTokenInfoMetadata.get(n),i=!1;return r&&(r.notFound?Date.now()-r.timestamp>this.failedCacheDuration&&(this.cacheTokenInfoMetadata.delete(n),this.debouncedSetCacheTokenInfoToDB(),r=void 0):Date.now()-r.timestamp>this.cacheDuration&&(this.cacheTokenInfoMetadata.delete(n),this.staledTokenInfoMetadata.has(n)&&(this.debouncedSetCacheTokenInfoToDB(),this.staledTokenInfoMetadata.set(n,r)),i=!0)),{res:r,staled:i}}setCacheTokenInfo(e,t,n){const r=`${c.ChainIdHelper.parse(e).identifier}/${t}`;this.cacheTokenInfoMetadata.set(r,n),this.debouncedSetCacheTokenInfoToDB(),this.staledTokenInfoMetadata.has(r)&&this.staledTokenInfoMetadata.set(r,n)}setCacheTokenInfoToDB(){const e=Object.fromEntries(this.cacheTokenInfoMetadata);this.kvStore.set("cache-token-info-2",e)}setCacheDenomTracePathsToDB(){const e=Object.fromEntries(this.cacheDenomTracePaths);this.kvStore.set("cache-ibc-denom-trace-paths-v3",e)}}r([o.observable],u.prototype,"isInitialized",void 0),t.IBCCurrencyRegistrar=u},84227:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(82454),t),i(n(75319),t)},1300:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetAccountBase=void 0;const s=n(80075),o=n(11047),a=n(49096),c=n(19731);class d{constructor(e,t,n){this.chainGetter=e,this.chainId=t,this.getKeplr=n,this._isSendingTx=!1,this._isDeployingAccount=!1,(0,s.makeObservable)(this)}setIsSendingTx(e){this._isSendingTx=e}get isSendingTx(){return this._isSendingTx}setIsDeployingAccount(e){this._isDeployingAccount=e}get isDeployingAccount(){return this._isDeployingAccount}estimateDeployAccount(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const s=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);return yield s.estimateAccountDeployFee({classHash:t,constructorCalldata:n,addressSalt:r})}))}deployAccount(e,t,n,r,{onFulfilled:s,onBroadcastFailed:o}={}){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const c=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);try{const e=yield c.deployAccount({classHash:t,constructorCalldata:n,addressSalt:r});null==s||s(e)}catch(e){null==o||o(e)}}))}deployAccountWithFee(e,t,n,r,s,o){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const c=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);try{return yield c.deployAccountWithFee({classHash:t,constructorCalldata:n,addressSalt:r},s,o)}catch(e){throw e}}))}estimateInvokeFee(e,t){return i(this,void 0,void 0,(function*(){const n=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in n))throw new Error(`${this.chainId} is not starknet chain`);const r=new a.StoreAccount(n.starknet.rpc,e,this.chainId,this.getKeplr);return yield r.estimateInvokeFee(t)}))}estimateInvokeFeeForSendTokenTx({currency:e,amount:t,sender:n,recipient:r}){return i(this,void 0,void 0,(function*(){const i=(()=>{let n=new c.Dec(t);return n=n.mul(c.DecUtils.getTenExponentNInPrecisionRange(e.coinDecimals)),n.truncate().toString()})(),s=o.uint256.bnToUint256(i),a=[{contractAddress:e.contractAddress,calldata:[""===r?n:r,s],entrypoint:"transfer"}];return yield this.estimateInvokeFee(n,a)}))}execute(e,t,n,r){return i(this,void 0,void 0,(function*(){const i=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in i))throw new Error(`${this.chainId} is not starknet chain`);const s=new a.StoreAccount(i.starknet.rpc,e,this.chainId,this.getKeplr);return yield s.executeWithFee(t,n,r)}))}executeForSendTokenTx(e,t,n,r,s){return i(this,void 0,void 0,(function*(){const i=(()=>{let e=new c.Dec(t);return e=e.mul(c.DecUtils.getTenExponentNInPrecisionRange(n.coinDecimals)),e.truncate().toString()})(),a=o.uint256.bnToUint256(i),d=[{contractAddress:n.contractAddress,calldata:[r,a],entrypoint:"transfer"}];return yield this.execute(e,d,s)}))}getNonce(e){return i(this,void 0,void 0,(function*(){const t=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in t))throw new Error(`${this.chainId} is not starknet chain`);const n=new a.StoreAccount(t.starknet.rpc,e,this.chainId,this.getKeplr);return new c.Int(o.num.toBigInt(yield n.getNonce()))}))}}r([s.observable],d.prototype,"_isSendingTx",void 0),r([s.observable],d.prototype,"_isDeployingAccount",void 0),r([s.action],d.prototype,"setIsSendingTx",null),r([s.action],d.prototype,"setIsDeployingAccount",null),t.StarknetAccountBase=d},14543:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1300),t),i(n(42153),t)},49096:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StoreAccount=void 0;const i=n(11047);class s extends i.Account{constructor(e,t,n,r){super({nodeUrl:e,specVersion:"0.8.1"},t,"","1",i.ETransactionVersion.V3),this.rpc=e,this.address=t,this.keplrChainId=n,this.getKeplr=r}deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:n=0,contractAddress:s},o={}){return r(this,void 0,void 0,(function*(){const r=o.version;if(r!==i.ETransactionVersion.V3)throw new Error(`Invalid version: ${r}`);const a=yield this.getChainId(),c=null!=s?s:i.hash.calculateContractAddressFromHash(n,e,t,0),d=yield this.getUniversalSuggestedFee(r,{type:i.TransactionType.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:t,addressSalt:n,contractAddress:c}},o),u=yield this.getKeplr();if(!u)throw new Error("Keplr is not initialized");const{transaction:l,signature:h}=yield u.signStarknetDeployAccountTransaction(this.keplrChainId,Object.assign(Object.assign({},i.stark.v3Details(o,"0.8.1")),{classHash:e,constructorCalldata:t,contractAddress:c,addressSalt:n,chainId:a,resourceBounds:d.resourceBounds,version:r,nonce:0}));return this.deployAccountContract({classHash:e,addressSalt:n,constructorCalldata:t,signature:h},Object.assign(Object.assign({},i.stark.v3Details(l,"0.8.1")),l))}))}deployAccountWithFee({classHash:e,constructorCalldata:t=[],addressSalt:n=0,contractAddress:s},o,a){var c,d;return r(this,void 0,void 0,(function*(){if(a){const{transaction:{classHash:e,addressSalt:t,constructorCalldata:n},signature:r}=a;return this.deployAccountContract({classHash:e,addressSalt:t,constructorCalldata:n,signature:r},a.transaction)}const r=yield this.getChainId(),u=null!=s?s:i.hash.calculateContractAddressFromHash(n,e,t,0),l=Object.assign(Object.assign({},i.stark.v3Details({},"0.8.1")),{classHash:e,constructorCalldata:t,contractAddress:u,addressSalt:n,version:i.ETransactionVersion.V3,nonce:0,chainId:r,resourceBounds:{l1_gas:{max_amount:i.num.toHex(o.l1MaxGas),max_price_per_unit:i.num.toHex(o.l1MaxGasPrice)},l2_gas:{max_amount:i.num.toHex(null!==(c=o.l2MaxGas)&&void 0!==c?c:"0"),max_price_per_unit:i.num.toHex(null!==(d=o.l2MaxGasPrice)&&void 0!==d?d:"0")},l1_data_gas:{max_amount:i.num.toHex(o.l1MaxDataGas),max_price_per_unit:i.num.toHex(o.l1MaxDataGasPrice)}}}),h=yield this.getKeplr();if(!h)throw new Error("Keplr is not initialized");const{transaction:p,signature:f}=yield h.signStarknetDeployAccountTransaction(this.keplrChainId,l);return this.deployAccountContract({classHash:e,addressSalt:n,constructorCalldata:t,signature:f},Object.assign(Object.assign({},i.stark.v3Details(p,"0.8.1")),p))}))}execute(e,t,n={}){var s;return r(this,void 0,void 0,(function*(){const r=void 0===t||Array.isArray(t)?n:t,o=Array.isArray(e)?e:[e],a=i.num.toBigInt(null!==(s=r.nonce)&&void 0!==s?s:yield this.getNonce()),c=r.version;if(c!==i.ETransactionVersion.V3)throw new Error(`Invalid version: ${c}`);const d=yield this.getUniversalSuggestedFee(c,{type:i.TransactionType.INVOKE,payload:e},Object.assign(Object.assign({},r),{version:c})),u=yield this.getChainId(),l=Object.assign(Object.assign({},i.stark.v3Details(r,"0.8.1")),{resourceBounds:d.resourceBounds,walletAddress:this.address,nonce:a,version:c,chainId:u,cairoVersion:yield this.getCairoVersion()}),h=yield this.getKeplr();if(!h)throw new Error("Keplr is not initialized");const{transactions:p,details:f,signature:g}=yield h.signStarknetTx(this.keplrChainId,o,l),m=i.transaction.getExecuteCalldata(p,yield this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:m,signature:g},f)}))}executeWithFee(e,t,n){var s,o;return r(this,void 0,void 0,(function*(){const r=yield this.getNonce(),a=yield this.getChainId(),c=Object.assign(Object.assign({},i.stark.v3Details({},"0.8.1")),{version:i.ETransactionVersion.V3,walletAddress:this.address,nonce:r,chainId:a,cairoVersion:this.cairoVersion,skipValidate:!1,resourceBounds:{l1_gas:{max_amount:i.num.toHex(t.l1MaxGas),max_price_per_unit:i.num.toHex(t.l1MaxGasPrice)},l2_gas:{max_amount:i.num.toHex(null!==(s=t.l2MaxGas)&&void 0!==s?s:"0"),max_price_per_unit:i.num.toHex(null!==(o=t.l2MaxGasPrice)&&void 0!==o?o:"0")},l1_data_gas:{max_amount:i.num.toHex(t.l1MaxDataGas),max_price_per_unit:i.num.toHex(t.l1MaxDataGasPrice)}}});let d,u,l;if(n){const t=yield n(this.keplrChainId,e,c);d=t.transactions,u=t.details,l=t.signature}else{const t=yield this.getKeplr();if(!t)throw new Error("Keplr is not initialized");const n=yield t.signStarknetTx(this.keplrChainId,e,c);d=n.transactions,u=n.details,l=n.signature}const h=i.transaction.getExecuteCalldata(d,yield this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:h,signature:l},u)}))}}t.StoreAccount=s},42153:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetAccountStore=void 0;const r=n(11169),i=n(1300);class s extends r.HasMapStore{constructor(e,t){super((n=>new i.StarknetAccountBase(e,n,t))),this.chainGetter=e,this.getKeplr=t}getAccount(e){const t=this.chainGetter.getModularChain(e);if(!("starknet"in t))throw new Error(`${e} is not starknet chain`);return this.get(t.chainId)}}t.StarknetAccountStore=s},34310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.starknetERC20ContractABI=void 0,t.starknetERC20ContractABI=[{members:[{name:"low",offset:0,type:"felt"},{name:"high",offset:1,type:"felt"}],name:"Uint256",size:2,type:"struct"},{inputs:[{name:"name",type:"felt"},{name:"symbol",type:"felt"},{name:"recipient",type:"felt"}],name:"constructor",outputs:[],type:"constructor"},{inputs:[],name:"name",outputs:[{name:"name",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{name:"symbol",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{name:"totalSupply",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{name:"decimals",type:"felt"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"felt"}],name:"balanceOf",outputs:[{name:"balance",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"felt"},{name:"spender",type:"felt"}],name:"allowance",outputs:[{name:"remaining",type:"Uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"transfer",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"sender",type:"felt"},{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"transferFrom",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"amount",type:"Uint256"}],name:"approve",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"added_value",type:"Uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"spender",type:"felt"},{name:"subtracted_value",type:"Uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"felt"}],type:"function"},{inputs:[{name:"recipient",type:"felt"},{name:"amount",type:"Uint256"}],name:"mint",outputs:[],type:"function"},{inputs:[{name:"user",type:"felt"},{name:"amount",type:"Uint256"}],name:"burn",outputs:[],type:"function"}]},19702:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28051),t),i(n(34310),t),i(n(14543),t)},18039:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAccountNonce=t.ObservableQueryAccountNonceInner=void 0;const r=n(75137);class i extends r.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_getNonce",{contract_address:r}),this.address=r}}t.ObservableQueryAccountNonceInner=i;class s extends r.ObservableStarknetChainJsonRpcQueryMap{constructor(e,t,n){super(e,t,n,(r=>new i(e,t,n,r)))}getNonce(e){return this.get(e)}}t.ObservableQueryAccountNonce=s},79254:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStarknetERC20Balance=t.ObservableQueryStarknetERC20BalanceImpl=void 0;const i=n(19731),s=n(80075),o=n(89642),a=n(75137),c=n(11047);class d extends a.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r,i,o){super(e,t,n,"starknet_call",{request:{contract_address:o,calldata:[i],entry_point_selector:"0x2e4263afad30923c891518314c3c95dbe830a16874e8abc5777a9a20b54c76e"}}),this.denomHelper=r,this.starknetHexAddress=i,this.contractAddress=o,(0,s.makeObservable)(this)}get balance(){const e=this.currency;return this.response&&this.response.data?new i.CoinPretty(e,new i.Int(new c.CairoUint256({low:this.response.data[0],high:this.response.data[1]}).toBigInt())):new i.CoinPretty(e,new i.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;if(!("starknet"in this.chainGetter.getModularChain(this.chainId)))throw new Error(`The chain (${this.chainId}) doesn't support starknet`);const t=this.chainGetter.getModularChainInfoImpl(this.chainId).getCurrencies("starknet").find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${this.contractAddress}`);return t}}r([s.computed],d.prototype,"balance",null),r([s.computed],d.prototype,"currency",null),t.ObservableQueryStarknetERC20BalanceImpl=d,t.ObservableQueryStarknetERC20Balance=class{constructor(e){this.sharedContext=e,this.map=new Map}getBalance(e,t,n,r){const i=`${e}/${n}/${r}`,s=this.map.get(i);if(s)return s;const a=new o.DenomHelper(r),c=t.getModularChain(e);if("erc20"!==a.type||!("starknet"in c))return;const u=new d(this.sharedContext,e,t,a,n,a.contractAddress);return this.map.set(i,u),u}}},28450:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStarknetERC20ContractInfo=t.ObservableQueryStarknetERC20ContactInfoInner=t.ObservableQueryStarknetERC20Metadata=t.ObservableQueryStarknetERC20MetadataInner=t.ObservableQueryStarknetERC20MetadataDecimals=t.ObservableQueryStarknetERC20MetadataSymbol=void 0;const i=n(11169),s=n(80075),o=n(75137),a=n(11047);class c extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_call",{request:{contract_address:r,calldata:[],entry_point_selector:"0x216b05c387bab9ac31918a3e61672f4618601f3c598a2f3f2710f37053e1ea4"}}),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get symbol(){if(this.response)try{let e=this.response.data[0];return this.response.data.length>1&&(e="0x"+this.response.data.map((e=>{const t=e.slice(2);return t.length%2==1?"0"+t:t})).join("")),a.shortString.decodeShortString(e)}catch(e){console.log(e)}}}r([s.computed],c.prototype,"symbol",null),t.ObservableQueryStarknetERC20MetadataSymbol=c;class d extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r){super(e,t,n,"starknet_call",{request:{contract_address:r,calldata:[],entry_point_selector:"0x4c4fb1ab068f6039d5780c68dd0fa2f8742cceb3426d19667778ca7f3518a9"}}),this.contractAddress=r,(0,s.makeObservable)(this)}canFetch(){return super.canFetch()&&""!==this.contractAddress}get decimals(){if(this.response)try{return parseInt(this.response.data[0])}catch(e){console.log(e)}}}r([s.computed],d.prototype,"decimals",null),t.ObservableQueryStarknetERC20MetadataDecimals=d;class u{constructor(e,t,n,r){this.sharedContext=e,this._querySymbol=new c(e,t,n,r),this._queryDecimals=new d(e,t,n,r)}get querySymbol(){return this._querySymbol}get queryDecimals(){return this._queryDecimals}get symbol(){return this._querySymbol.symbol}get decimals(){return this._queryDecimals.decimals}}t.ObservableQueryStarknetERC20MetadataInner=u;class l extends i.HasMapStore{constructor(e,t,n){super((e=>new u(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}get(e){return super.get(e)}}t.ObservableQueryStarknetERC20Metadata=l;class h extends u{constructor(e,t,n,r){super(e,t,n,r),this.contractAddress=r}get tokenInfo(){if(void 0!==this.symbol&&void 0!==this.decimals)return{decimals:this.decimals,symbol:this.symbol}}get isFetching(){return this._querySymbol.isFetching||this._queryDecimals.isFetching}get error(){return this._querySymbol.error||this._queryDecimals.error}}r([s.computed],h.prototype,"tokenInfo",null),t.ObservableQueryStarknetERC20ContactInfoInner=h;class p extends i.HasMapStore{constructor(e,t,n){super((e=>new h(this.sharedContext,this.chainId,this.chainGetter,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n}getQueryContract(e){return this.get(e)}}t.ObservableQueryStarknetERC20ContractInfo=p},28051:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetQueriesStore=void 0;const r=n(79254),i=n(28450),s=n(23816),o=n(18039),a=n(94916);t.StarknetQueriesStore=class{constructor(e,t,n){this.sharedContext=e,this.chainGetter=t,this.tokenContractListURL=n,this.map=new Map}get(e){const t=this.map.get(e);if(t)return t;const n=new c(this.sharedContext,e,this.chainGetter,this.tokenContractListURL);return this.map.set(e,n),n}};class c{constructor(e,t,n,c){this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.tokenContractListURL=c,this.queryStarknetERC20Balance=new r.ObservableQueryStarknetERC20Balance(e),this.queryStarknetERC20ContractInfo=new i.ObservableQueryStarknetERC20ContractInfo(e,t,n),this.queryTokenContracts=new s.ObservableQueryTokenContracts(e,t,c),this.queryAccountNonce=new o.ObservableQueryAccountNonce(e,t,n),this.queryValidators=new a.ObservableQueryValidators(e,t,n),this.queryStakingApr=new a.ObservableQueryStakingApr(e,t,n),this.stakingInfoManager=new a.StakingInfoManager(e,t,n,this.queryValidators)}}},84285:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStakingApr=t.ObservableQueryTotalStake=t.ObservableQueryYearlyMint=void 0;const i=n(19731),s=n(80075),o=n(75137);class a extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"starknet_call",{request:{contract_address:"0x00ca1705e74233131dbcdee7f1b8d2926bf262168c7df339004b3f46015b6984",calldata:[],entry_point_selector:"0x02e4624c78f168ac6115cadd7f1e6fe304cb84479579b0c5b3ec352d41adc2f4"}}),(0,s.makeObservable)(this)}canFetch(){return"starknet:SN_SEPOLIA"!==this.chainId&&super.canFetch()}get yearlyMint(){if(!this.response||!this.response.data)return;if(this.response.data.length<1)return;const e=this.response.data[0];return new i.Dec(BigInt(e))}}r([s.computed],a.prototype,"yearlyMint",null),t.ObservableQueryYearlyMint=a;class c extends o.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n){super(e,t,n,"starknet_call",{request:{contract_address:"0x00ca1702e64c81d9a07b86bd2c540188d92a2c73cf5cc0e508d949015e7e84a7",calldata:[],entry_point_selector:"0x0226ffc5db8f68325947f4c4fcbea7117624ed26d4a1354693f63de203c453c8"}}),(0,s.makeObservable)(this)}canFetch(){return"starknet:SN_MAIN"===this.chainId}get totalStake(){if(!this.response||!this.response.data)return;if(this.response.data.length<1)return;const e=this.response.data[0],t=new i.Dec(BigInt(e));return t.isZero()?void 0:t}}r([s.computed],c.prototype,"totalStake",null),t.ObservableQueryTotalStake=c;class d{constructor(e,t,n){this.yearlyMint=new a(e,t,n),this.totalStake=new c(e,t,n)}get apr(){if(this.yearlyMint.yearlyMint&&this.totalStake.totalStake)return this.yearlyMint.yearlyMint.mul(new i.Dec(100)).quo(this.totalStake.totalStake)}}r([s.observable.shallow],d.prototype,"yearlyMint",void 0),r([s.observable.shallow],d.prototype,"totalStake",void 0),r([s.computed],d.prototype,"apr",null),t.ObservableQueryStakingApr=d},94916:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90503),t),i(n(55247),t),i(n(80078),t),i(n(84285),t)},55247:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StakingInfoManager=t.ObservableQueryStakingInfo=t.ObservableQueryPoolMemberInfo=void 0;const s=n(19731),o=n(80075),a=n(75137),c=n(11047),d=n(58242);class u extends a.ObservableStarknetChainJsonRpcQuery{constructor(e,t,n,r,i){super(e,t,n,"starknet_call",{request:{contract_address:r,calldata:[i],entry_point_selector:c.selector.getSelectorFromName("pool_member_info_v1")}}),(0,o.makeObservable)(this)}canFetch(){return"starknet:SN_SEPOLIA"!==this.chainId&&super.canFetch()}get stakedAmount(){const e=this.stakingCurrency;if(!e)return;if(!this.response||!this.response.data)return new s.CoinPretty(e,new s.Int(0)).ready(!1);if(this.response.data.length<6)return new s.CoinPretty(e,new s.Int(0)).ready(!1);const t=new c.CairoUint256({low:this.response.data[1],high:0});return new s.CoinPretty(e,new s.Int(t.toBigInt()))}get unclaimedRewards(){const e=this.stakingCurrency;if(!e)return;if(!this.response||!this.response.data)return new s.CoinPretty(e,new s.Int(0)).ready(!1);if(this.response.data.length<6)return new s.CoinPretty(e,new s.Int(0)).ready(!1);const t=new c.CairoUint256({low:this.response.data[2],high:0});return new s.CoinPretty(e,new s.Int(t.toBigInt()))}get unpoolAmount(){const e=this.stakingCurrency;if(!e)return;if(!this.response||!this.response.data)return new s.CoinPretty(e,new s.Int(0)).ready(!1);if(this.response.data.length<6)return new s.CoinPretty(e,new s.Int(0)).ready(!1);const t=new c.CairoUint256({low:this.response.data[4],high:0});return new s.CoinPretty(e,new s.Int(t.toBigInt()))}get unpoolTime(){if("starknet"in this.chainGetter.getModularChain(this.chainId)&&this.response&&this.response.data&&!(this.response.data.length<6))return"0x0"===this.response.data[5]?parseInt(this.response.data[6],16):void 0}get commission(){if("starknet"in this.chainGetter.getModularChain(this.chainId)&&this.response&&this.response.data&&!(this.response.data.length<6))return parseInt(this.response.data[3],16)/100}get stakingCurrency(){const e=this.chainGetter.getModularChain(this.chainId);if("starknet"in e)return e.starknet.currencies.find((t=>t.coinMinimalDenom===`erc20:${e.starknet.strkContractAddress}`))}}r([o.computed],u.prototype,"stakedAmount",null),r([o.computed],u.prototype,"unclaimedRewards",null),r([o.computed],u.prototype,"unpoolAmount",null),r([o.computed],u.prototype,"unpoolTime",null),r([o.computed],u.prototype,"commission",null),t.ObservableQueryPoolMemberInfo=u;class l extends a.ObservableStarknetChainJsonRpcQueryMap{constructor(e,t,n,r,i){super(e,t,n,(i=>new u(e,t,n,i,r))),this.getQueryPoolAddress=(0,d.computedFn)((e=>this.get(e))),this.getDescendingPendingClaimableRewards=(0,d.computedFn)((e=>{const t=this.claimableRewards;if(!t)return[];const n=t.claimableRewards.slice();return n.sort(((e,t)=>t.amount.toDec().gt(e.amount.toDec())?1:-1)),n.slice(0,e)})),(0,o.makeObservable)(this),this.starknetHexAddress=r,this.queryValidators=i}waitFreshResponse(){return i(this,void 0,void 0,(function*(){(yield this.queryValidators.waitFreshResponse())&&(yield Promise.all(this.queryValidators.validators.map((e=>{if(!e.pool_contract_address)return Promise.resolve(void 0);const t=this.getQueryPoolAddress(e.pool_contract_address);return t?t.waitFreshResponse():Promise.resolve(void 0)}))))}))}get isFetching(){var e;if(this.queryValidators.isFetching)return!0;const t=this.queryValidators.validators;return 0!==t.length&&null!==(e=t.some((e=>{if(!e.pool_contract_address)return!1;const t=this.getQueryPoolAddress(e.pool_contract_address);return null==t?void 0:t.isFetching})))&&void 0!==e&&e}get error(){if(this.queryValidators.error)return this.queryValidators.error}get totalStakedAmount(){const e=this.stakingCurrency;if(!e)return;let t=new s.CoinPretty(e,new s.Int(0));const n=this.queryValidators.validators;for(const e of n){if(!e.pool_contract_address)continue;const n=this.getQueryPoolAddress(e.pool_contract_address);if(!n)continue;const r=n.stakedAmount;r&&(t=t.add(r))}return t}get totalClaimableRewardAmount(){const e=this.stakingCurrency;if(!e)return;let t=new s.CoinPretty(e,new s.Int(0));const n=this.queryValidators.validators;for(const e of n){if(!e.pool_contract_address)continue;const n=this.getQueryPoolAddress(e.pool_contract_address);if(!n)continue;const r=n.unclaimedRewards;r&&(t=t.add(r))}return t}get claimableRewards(){const e=this.stakingCurrency;if(!e)return;const t=[];let n=new s.CoinPretty(e,new s.Int(0));const r=this.queryValidators.validators;if(0!==r.length){for(const e of r){if(!e.pool_contract_address)continue;const r=this.getQueryPoolAddress(e.pool_contract_address);if(!r)continue;const i=r.unclaimedRewards;i&&i.toDec().gt(new s.Dec(0))&&(t.push({validatorAddress:e.operational_address,poolAddress:e.pool_contract_address,rewardAddress:e.reward_address,amount:i}),n=n.add(i))}return{claimableRewards:t,totalClaimableRewardAmount:n}}}get unbondings(){const e=this.stakingCurrency;if(!e)return;const t=[];let n=new s.CoinPretty(e,new s.Int(0));const r=this.queryValidators.validators;if(0!==r.length){for(const e of r){if(!e.pool_contract_address)continue;const r=this.getQueryPoolAddress(e.pool_contract_address);if(!r)continue;const i=r.unpoolTime,o=r.unpoolAmount;!i||!o||o.toDec().lte(new s.Dec(0))||i<Date.now()/1e3||(t.push({validatorAddress:e.operational_address,poolAddress:e.pool_contract_address,rewardAddress:e.reward_address,amount:o,completeTime:i}),n=n.add(o))}return{unbondings:t,totalUnbondingAmount:n}}}get stakingCurrency(){const e=this.chainGetter.getModularChain(this.chainId);if("starknet"in e)return e.starknet.currencies.find((t=>t.coinMinimalDenom===`erc20:${e.starknet.strkContractAddress}`))}}r([o.observable.shallow],l.prototype,"queryValidators",void 0),r([o.computed],l.prototype,"totalClaimableRewardAmount",null),r([o.computed],l.prototype,"unbondings",null),t.ObservableQueryStakingInfo=l;class h{constructor(e,t,n,r){this.stakingInfoByStarknetHexAddress=new Map,this.getStakingInfo=(0,d.computedFn)((e=>(this.stakingInfoByStarknetHexAddress.has(e)||(0,o.runInAction)((()=>{const t=new l(this.sharedContext,this.chainId,this.chainGetter,e,this.queryValidators);this.stakingInfoByStarknetHexAddress.set(e,t)})),this.stakingInfoByStarknetHexAddress.get(e)))),(0,o.makeObservable)(this),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.queryValidators=r}}r([o.observable.shallow],h.prototype,"stakingInfoByStarknetHexAddress",void 0),r([o.observable.shallow],h.prototype,"queryValidators",void 0),t.StakingInfoManager=h},80078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},90503:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryValidators=void 0;const i=n(11169),s=n(80075);class o extends i.ObservableQuery{constructor(e,t,n){super(e,"https://api.dashboard.endur.fi/api/","validators"),(0,s.makeObservable)(this),this.chainId=t,this.chainGetter=n}canFetch(){return"starknet:SN_SEPOLIA"!==this.chainId&&super.canFetch()}get validators(){return this.response&&this.response.data&&Array.isArray(this.response.data.validators)?this.response.data.validators:[]}}r([s.computed],o.prototype,"validators",null),t.ObservableQueryValidators=o},75137:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStarknetChainJsonRpcQueryMap=t.ObservableStarknetChainJsonRpcQuery=void 0;const r=n(11169);class i extends r.ObservableJsonRPCQuery{constructor(e,t,n,r,i){let s="";const o=n.getModularChain(t);"starknet"in o&&(s=o.starknet.rpc),super(e,s,"",r,Object.assign({block_id:"latest"},i)),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableStarknetChainJsonRpcQuery=i;class s extends r.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableStarknetChainJsonRpcQueryMap=s},23816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTokenContracts=void 0;const r=n(11169);class i extends r.ObservableQuery{constructor(e,t,n){super(e,n,`/tokens/${t}`)}get tokenContracts(){return this.response&&this.response.data?this.response.data:[]}}t.ObservableQueryTokenContracts=i},43879:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BabylonAccountImpl=t.BabylonAccount=void 0;const r=n(19731),i=n(91533),s=n(94531);t.BabylonAccount={use:e=>(t,n,r)=>({babylon:new o(t,n,r,e.queriesStore)})};class o{constructor(e,t,n,r){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r}makeDelegateTx(e,t){var n;s.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const o=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!o)throw new Error("Stake currency is null");let a=new r.Dec(e);a=a.mulTruncate(r.DecUtils.getPrecisionDec(o.coinDecimals));const c={type:"/babylon.epoching.v1.MsgWrappedDelegate",value:{msg:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:o.coinMinimalDenom,amount:a.truncate().toString()}}}};return this.base.cosmos.makeTx("delegate",{aminoMsgs:[c],protoMsgs:[{typeUrl:c.type,value:i.MsgWrappedDelegate.encode({msg:{delegatorAddress:c.value.msg.delegator_address,validatorAddress:c.value.msg.validator_address,amount:c.value.msg.amount}}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.babylon.queryLastEpochMsgs.getQuery().fetch()}))}makeUndelegateTx(e,t){var n;s.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const o=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!o)throw new Error("Stake currency is null");let a=new r.Dec(e);a=a.mulTruncate(r.DecUtils.getPrecisionDec(o.coinDecimals));const c={type:"/babylon.epoching.v1.MsgWrappedUndelegate",value:{msg:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:o.coinMinimalDenom,amount:a.truncate().toString()}}}};return this.base.cosmos.makeTx("undelegate",{aminoMsgs:[c],protoMsgs:[{typeUrl:c.type,value:i.MsgWrappedUndelegate.encode({msg:{delegatorAddress:c.value.msg.delegator_address,validatorAddress:c.value.msg.validator_address,amount:c.value.msg.amount}}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.babylon.queryLastEpochMsgs.getQuery().fetch()}))}makeBeginRedelegateTx(e,t,n){var o,a;s.Bech32Address.validate(t,null===(o=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===o?void 0:o.bech32PrefixValAddr),s.Bech32Address.validate(n,null===(a=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===a?void 0:a.bech32PrefixValAddr);const c=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!c)throw new Error("Stake currency is null");let d=new r.Dec(e);d=d.mulTruncate(r.DecUtils.getPrecisionDec(c.coinDecimals));const u={type:"/babylon.epoching.v1.MsgWrappedBeginRedelegate",value:{msg:{delegator_address:this.base.bech32Address,validator_src_address:t,validator_dst_address:n,amount:{denom:c.coinMinimalDenom,amount:d.truncate().toString()}}}};return this.base.cosmos.makeTx("redelegate",{aminoMsgs:[u],protoMsgs:[{typeUrl:u.type,value:i.MsgWrappedBeginRedelegate.encode({msg:{delegatorAddress:u.value.msg.delegator_address,validatorSrcAddress:u.value.msg.validator_src_address,validatorDstAddress:u.value.msg.validator_dst_address,amount:u.value.msg.amount}}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.babylon.queryLastEpochMsgs.getQuery().fetch()}))}get queries(){return this.queriesStore.get(this.chainId)}}t.BabylonAccountImpl=o},21330:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSetBaseSuper=t.AccountSetBase=t.WalletStatus=void 0;const s=n(80075),o=n(89642);var a;!function(e){e.NotInit="NotInit",e.Loading="Loading",e.Loaded="Loaded",e.NotExist="NotExist",e.Rejected="Rejected"}(a=t.WalletStatus||(t.WalletStatus={}));class c{constructor(e,t,n,r,i){this.eventListener=e,this.chainGetter=t,this.chainId=n,this.sharedContext=r,this.opts=i,this._walletVersion=void 0,this._walletStatus=a.NotInit,this._rejectionReason=void 0,this._name="",this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._bitcoinAddress=void 0,this._isNanoLedger=!1,this._isKeystone=!1,this._txTypeInProgress="",this.hasInited=!1,this.makeSendTokenTxFns=[],this.handleInit=()=>this.init(),(0,s.makeObservable)(this),this._pubKey=new Uint8Array,i.autoInit&&this.init()}getKeplr(){return this.sharedContext.getKeplr()}registerMakeSendTokenFn(e){this.makeSendTokenTxFns.push(e)}enable(e){return i(this,void 0,void 0,(function*(){if("cosmos"in this.chainGetter.getModularChain(e)&&this.opts.suggestChain){const t=yield this.sharedContext.getKeplr();this.opts.suggestChainFn?yield this.sharedContext.suggestChain((()=>i(this,void 0,void 0,(function*(){t&&this.opts.suggestChainFn&&(yield this.opts.suggestChainFn(t,this.chainGetter.getChain(e)))})))):yield this.sharedContext.suggestChain((()=>i(this,void 0,void 0,(function*(){t&&(yield t.experimentalSuggestChain(this.chainGetter.getChain(e).embedded))}))))}yield this.sharedContext.enable(e)}))}*init(){if(this.walletStatus===a.NotExist)return;this.hasInited||this.eventListener.addEventListener("keplr_keystorechange",this.handleInit),this.hasInited=!0,this._walletStatus=a.Loading;const e=yield*(0,o.toGenerator)(this.sharedContext.getKeplr());if(!e)return void(this._walletStatus=a.NotExist);this._walletVersion=e.version;try{yield this.enable(this.chainId)}catch(e){return console.log(e),this._walletStatus=a.Rejected,void(this._rejectionReason=e)}const t="starknet"in this.chainGetter.getModularChain(this.chainId),n="bitcoin"in this.chainGetter.getModularChain(this.chainId);yield this.sharedContext.getKeyMixed(this.chainId,t,n,(e=>{if("fulfilled"===e.status){const t=e.value;"bech32Address"in t?(this._bech32Address=t.bech32Address,this._ethereumHexAddress=t.ethereumHexAddress,this._starknetHexAddress="",this._bitcoinAddress=void 0,this._isNanoLedger=t.isNanoLedger,this._isKeystone=t.isKeystone,this._name=t.name,this._pubKey=t.pubKey):"paymentType"in t?(this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._bitcoinAddress={bech32Address:t.address,paymentType:t.paymentType,masterFingerprintHex:t.masterFingerprintHex,derivationPath:t.derivationPath},this._isNanoLedger=t.isNanoLedger,this._isKeystone=!1,this._name=t.name,this._pubKey=t.pubKey):(this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress=t.hexAddress,this._bitcoinAddress=void 0,this._isNanoLedger=t.isNanoLedger,this._isKeystone=!1,this._name=t.name,this._pubKey=t.pubKey),this._walletStatus=a.Loaded}else this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._bitcoinAddress=void 0,this._isNanoLedger=!1,this._isKeystone=!1,this._name="",this._pubKey=new Uint8Array(0),this._walletStatus=a.Rejected,this._rejectionReason=e.reason;this._walletStatus!==a.Rejected&&(this._rejectionReason=void 0)}))}disconnect(){this._walletStatus=a.NotInit,this.hasInited=!1,this.eventListener.removeEventListener("keplr_keystorechange",this.handleInit),this._bech32Address="",this._ethereumHexAddress="",this._starknetHexAddress="",this._isNanoLedger=!1,this._isKeystone=!1,this._name="",this._pubKey=new Uint8Array(0),this._rejectionReason=void 0}get walletVersion(){return this._walletVersion}get isReadyToSendTx(){return this.walletStatus===a.Loaded&&""!==this.bech32Address}get isReadyToSendMsgs(){return this.walletStatus===a.Loaded&&""!==this.bech32Address}makeSendTokenTx(e,t,n){for(let r=0;r<this.makeSendTokenTxFns.length;r++){const i=(0,this.makeSendTokenTxFns[r])(e,t,n);if(i)return i}const r=new o.DenomHelper(t.coinMinimalDenom);throw new Error(`Unsupported type of currency (${r.type})`)}get walletStatus(){return this._walletStatus}get rejectionReason(){return this._rejectionReason}get name(){return this._name}get bech32Address(){return this._bech32Address}get pubKey(){return this._pubKey.slice()}get isNanoLedger(){return this._isNanoLedger}get isKeystone(){return this._isKeystone}get txTypeInProgress(){return this._txTypeInProgress}get isSendingMsg(){return this.txTypeInProgress}get hasEthereumHexAddress(){var e,t;const n=this.chainGetter.getChain(this.chainId);return null!=n.evm||60===n.bip44.coinType||!!(null===(e=n.features)||void 0===e?void 0:e.includes("eth-address-gen"))||!!(null===(t=n.features)||void 0===t?void 0:t.includes("eth-key-sign"))}get ethereumHexAddress(){return this._ethereumHexAddress}get starknetHexAddress(){return this._starknetHexAddress}get bitcoinAddress(){return this._bitcoinAddress}}r([s.observable],c.prototype,"_walletVersion",void 0),r([s.observable],c.prototype,"_walletStatus",void 0),r([s.observable.ref],c.prototype,"_rejectionReason",void 0),r([s.observable],c.prototype,"_name",void 0),r([s.observable],c.prototype,"_bech32Address",void 0),r([s.observable],c.prototype,"_ethereumHexAddress",void 0),r([s.observable],c.prototype,"_starknetHexAddress",void 0),r([s.observable],c.prototype,"_bitcoinAddress",void 0),r([s.observable],c.prototype,"_isNanoLedger",void 0),r([s.observable],c.prototype,"_isKeystone",void 0),r([s.observable],c.prototype,"_txTypeInProgress",void 0),r([s.flow],c.prototype,"init",null),r([s.action],c.prototype,"disconnect",null),r([s.computed],c.prototype,"isReadyToSendTx",null),r([s.computed],c.prototype,"isReadyToSendMsgs",null),t.AccountSetBase=c;class d extends c{constructor(...e){super(...e),(0,s.makeObservable)(this)}setTxTypeInProgress(e){this._txTypeInProgress=e}}r([s.action],d.prototype,"setTxTypeInProgress",null),t.AccountSetBaseSuper=d},25009:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSharedContext=void 0;const i=n(70223);t.AccountSharedContext=class{constructor(e){this._getKeplr=e,this.suggestChainDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=[];for(const n of e)try{yield n.args[0](),t.push({status:"fulfilled",value:void 0})}catch(e){t.push({status:"rejected",reason:e})}return t})))),this.enableDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=new Set(e.map((e=>e.args[0]))),r=Array.from(n);try{return yield t.enable(r),e.map((()=>({status:"fulfilled",value:void 0})))}catch(t){return e.map((()=>({status:"rejected",reason:t})))}})))),this.getKeyDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=new Set(e.map((e=>e.args[0]))),r=Array.from(n),i=yield t.getKeysSettled(r),s=new Map;for(let e=0;e<r.length;e++){const t=r[e],n=i[e];s.set(t,n)}return e.map((e=>s.get(e.args[0])))})))),this.getKeyMixedDebounceTimer=new i.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=yield this.getKeplr();if(!t)return e.map((()=>({status:"rejected",reason:new Error("Keplr is not installed")})));const n=e.filter((e=>!e.args[1]&&!e.args[2])),r=e.filter((e=>e.args[1]&&!e.args[2])),i=e.filter((e=>!e.args[1]&&e.args[2])),s=new Set(n.map((e=>e.args[0]))),o=Array.from(s),a=new Set(r.map((e=>e.args[0]))),c=Array.from(a),d=new Set(i.map((e=>e.args[0]))),u=Array.from(d),l=new Map;if(o.length>0){const e=yield t.getKeysSettled(o);for(let t=0;t<o.length;t++){const n=o[t],r=e[t];l.set(n,r)}}if(c.length>0){const e=yield t.getStarknetKeysSettled(c);for(let t=0;t<c.length;t++){const n=c[t],r=e[t];l.set(n,r)}}if(u.length>0){const e=yield t.getBitcoinKeysSettled(u);for(let t=0;t<u.length;t++){const n=u[t],r=e[t];l.set(n,r)}}return e.map((e=>l.get(e.args[0])))}))))}getKeplr(){return r(this,void 0,void 0,(function*(){if(this.promiseGetKeplr)return this.promiseGetKeplr;const e=new Promise(((e,t)=>{this._getKeplr().then((t=>{this.promiseGetKeplr=void 0,e(t)})).catch((e=>{this.promiseGetKeplr=void 0,t(e)}))}));return this.promiseGetKeplr=e}))}suggestChain(e){return new Promise(((t,n)=>{this.suggestChainDebounceTimer.call([e],(e=>{"fulfilled"===e.status?t():n(e.reason)}))}))}enable(e){return new Promise(((t,n)=>{this.enableDebounceTimer.call([e],(e=>{"fulfilled"===e.status?t():n(e.reason)}))}))}getKey(e,t){return this.getKeyDebounceTimer.call([e],t)}getKeyMixed(e,t,n,r){return this.getKeyMixedDebounceTimer.call([e,t,n],r)}}},84713:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmosAccountImpl=t.defaultCosmosMsgOpts=t.CosmosAccount=void 0;const s=n(21330),o=n(89642),a=n(19731),c=n(3542),d=n(30899),u=n(48976),l=n(22062),h=n(94465),p=n(18436),f=n(83612),g=n(94531),m=n(97021),y=i(n(39714)),v=n(48834),b=n(40515),w=n(86404),_=n(91428),O=n(86693),C=i(n(27808)),I=n(80075),S=n(1110),k=n(74578);t.CosmosAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{cosmos:new P(n,r,i,e.queriesStore,(0,y.default)(t.defaultCosmosMsgOpts,s||{}),e)}}},t.defaultCosmosMsgOpts={send:{native:{type:"cosmos-sdk/MsgSend",gas:8e4}},ibcTransfer:{type:"cosmos-sdk/MsgTransfer",gas:45e4},delegate:{type:"cosmos-sdk/MsgDelegate",gas:25e4},undelegate:{type:"cosmos-sdk/MsgUndelegate",gas:25e4},redelegate:{type:"cosmos-sdk/MsgBeginRedelegate",gas:25e4},withdrawRewards:{type:"cosmos-sdk/MsgWithdrawDelegationReward",gas:14e4},govVote:{type:"cosmos-sdk/MsgVote",gas:25e4}};class P{constructor(e,t,n,r,i,s){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.txOpts=s,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("native"===new o.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new a.Dec(e);return n=n.mul(a.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();g.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr);const s=this.chainId.startsWith("thorchain-"),o={type:this.msgOpts.send.native.type,value:{from_address:this.base.bech32Address,to_address:n,amount:[{denom:t.coinMinimalDenom,amount:i}]}};return this.makeTx("send",{aminoMsgs:[o],protoMsgs:[{typeUrl:s?"/types.MsgSend":"/cosmos.bank.v1beta1.MsgSend",value:s?k.MsgSend.encode({fromAddress:g.Bech32Address.fromBech32(o.value.from_address).address,toAddress:g.Bech32Address.fromBech32(o.value.to_address).address,amount:o.value.amount}).finish():l.MsgSend.encode({fromAddress:o.value.from_address,toAddress:o.value.to_address,amount:o.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"from_address",type:"string"},{name:"to_address",type:"string"},{name:"amount",type:"TypeAmount[]"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}sendMsgs(e,t,n="",i,s,o){var a,d;return r(this,void 0,void 0,(function*(){let r,u,l,h;this.base.setTxTypeInProgress(e);try{"function"==typeof t&&(t=yield t());const e=yield this.broadcastMsgs(t,i,n,s);r=e.txHash,u=e.signDoc}catch(e){throw this.base.setTxTypeInProgress(""),(null===(a=this.txOpts.preTxEvents)||void 0===a?void 0:a.onBroadcastFailed)&&this.txOpts.preTxEvents.onBroadcastFailed(this.chainId,e),o&&"onBroadcastFailed"in o&&o.onBroadcastFailed&&o.onBroadcastFailed(e),e}o&&("function"==typeof o?h=o:(l=o.onBroadcasted,h=o.onFulfill)),(null===(d=this.txOpts.preTxEvents)||void 0===d?void 0:d.onBroadcasted)&&this.txOpts.preTxEvents.onBroadcasted(this.chainId,r),l&&l(r);const p=new g.TendermintTxTracer(this.chainGetter.getChain(this.chainId).rpc,"/websocket",{wsObject:this.txOpts.wsObject});p.traceTx(r).then((e=>{var t;p.close(),this.base.setTxTypeInProgress("");const n=(()=>{var e,t;return"fee"in u?u.fee.amount.map((e=>e.denom)):"authInfoBytes"in u&&null!==(t=null===(e=c.AuthInfo.decode(u.authInfoBytes).fee)||void 0===e?void 0:e.amount.map((e=>e.denom)))&&void 0!==t?t:[]})();for(const e of n){const t=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((t=>t.currency.coinMinimalDenom===e));t&&t.fetch()}e&&!e.hash&&(e.hash=v.Buffer.from(r).toString("hex")),(null===(t=this.txOpts.preTxEvents)||void 0===t?void 0:t.onFulfill)&&this.txOpts.preTxEvents.onFulfill(this.chainId,e),h&&h(e)}))}))}broadcastMsgs(e,t,n="",i){var a;return r(this,void 0,void 0,(function*(){if(this.base.walletStatus!==s.WalletStatus.Loaded)throw new Error(`Wallet is not loaded: ${this.base.walletStatus}`);const l=!e.aminoMsgs||0===e.aminoMsgs.length,h=e.aminoMsgs||[],p=e.protoMsgs;if(0===p.length)throw new Error("There is no msg to send");if(!l&&h.length!==p.length)throw new Error("The length of aminoMsgs and protoMsgs are different");const f=yield g.BaseAccount.fetchFromRest(this.chainGetter.getChain(this.chainId).rest,this.base.bech32Address,!0),m=!0===(null===(a=this.chainGetter.getChain(this.chainId).features)||void 0===a?void 0:a.includes("eth-key-sign")),y=m&&this.base.isNanoLedger;if(y&&!e.rlpTypes)throw new Error("RLP types information is needed for signing tx for ethermint chain with ledger");if(y&&l)throw new Error("EIP712 signing is not supported for proto signing");const _=yield this.base.getKeplr(),O=yield(()=>r(this,void 0,void 0,(function*(){if(l)return yield this.createSignedTxWithDirectSign(_,f,e.protoMsgs,t,n,i);{const s={chain_id:this.chainId,account_number:f.getAccountNumber().toString(),sequence:f.getSequence().toString(),fee:t,msgs:h,memo:(0,o.escapeHTML)(n)},a=this.chainGetter.getChain(this.chainId),l=this.chainId.startsWith("injective"),O=this.chainId.startsWith("stratos"),C=a.features&&a.features.includes("evm-ledger-sign-plain-json");y&&(l?s.timeout_height=Number.MAX_SAFE_INTEGER.toString():s.fee=Object.assign(Object.assign({},s.fee),(()=>C?{}:{feePayer:this.base.bech32Address})()));const I=(0,o.sortObjectByKey)(s);let S=_.signAmino.bind(_);(null==i?void 0:i.signAmino)&&(S=i.signAmino);let k=_.experimentalSignEIP712CosmosTx_v0.bind(_);(null==i?void 0:i.experimentalSignEIP712CosmosTx_v0)&&(k=i.experimentalSignEIP712CosmosTx_v0);const P=yield(()=>r(this,void 0,void 0,(function*(){return y?yield k(this.chainId,this.base.bech32Address,(0,b.getEip712TypedDataBasedOnChainInfo)(this.chainGetter.getChain(this.chainId),e),I,i):yield S(this.chainId,this.base.bech32Address,I,i)})))();return{tx:c.TxRaw.encode({bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:p,timeoutHeight:P.signed.timeout_height,memo:P.signed.memo,extensionOptions:y&&!C?[{typeUrl:l?"/injective.types.v1beta1.ExtensionOptionsWeb3Tx":"/ethermint.types.v1.ExtensionOptionsWeb3Tx",value:w.ExtensionOptionsWeb3Tx.encode(w.ExtensionOptionsWeb3Tx.fromPartial({typedDataChainId:g.EthermintChainIdHelper.parse(this.chainId).ethChainId.toString(),feePayer:l?void 0:P.signed.fee.feePayer,feePayerSig:l?void 0:v.Buffer.from(P.signature.signature,"base64")})).finish()}]:void 0})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[{publicKey:{typeUrl:m?l?"/injective.crypto.v1beta1.ethsecp256k1.PubKey":O?"/stratos.crypto.v1.ethsecp256k1.PubKey":a.hasFeature("eth-secp256k1-cosmos")?"/cosmos.evm.crypto.v1.ethsecp256k1.PubKey":a.hasFeature("eth-secp256k1-initia")?"/initia.crypto.v1beta1.ethsecp256k1.PubKey":"/ethermint.crypto.v1.ethsecp256k1.PubKey":"/cosmos.crypto.secp256k1.PubKey",value:u.PubKey.encode({key:v.Buffer.from(P.signature.pub_key.value,"base64")}).finish()},modeInfo:{single:{mode:y&&C?d.SignMode.SIGN_MODE_EIP_191:d.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},multi:void 0},sequence:P.signed.sequence}],fee:c.Fee.fromPartial({amount:P.signed.fee.amount,gasLimit:P.signed.fee.gas,payer:!y||l||C?void 0:P.signed.fee.feePayer})}).finish(),signatures:!y||l||C?[v.Buffer.from(P.signature.signature,"base64")]:[new Uint8Array(0)]}).finish(),signDoc:P.signed}}})))();let C=_.sendTx.bind(_);return(null==i?void 0:i.sendTx)&&(C=i.sendTx),{txHash:yield C(this.chainId,O.tx,"sync"),signDoc:O.signDoc}}))}createSignedTxWithDirectSign(e,t,n,i,s,o){var a;return r(this,void 0,void 0,(function*(){const r=!0===(null===(a=this.chainGetter.getChain(this.chainId).features)||void 0===a?void 0:a.includes("eth-key-sign")),l=this.chainId.startsWith("injective"),h=this.chainId.startsWith("stratos");let p=e.signDirect.bind(e);(null==o?void 0:o.signDirect)&&(p=o.signDirect);const f=yield p(this.chainId,this.base.bech32Address,{bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:n,memo:s})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[{publicKey:{typeUrl:(()=>r?l?"/injective.crypto.v1beta1.ethsecp256k1.PubKey":h?"/stratos.crypto.v1.ethsecp256k1.PubKey":this.chainGetter.getChain(this.chainId).hasFeature("eth-secp256k1-cosmos")?"/cosmos.evm.crypto.v1.ethsecp256k1.PubKey":this.chainGetter.getChain(this.chainId).hasFeature("eth-secp256k1-initia")?"/initia.crypto.v1beta1.ethsecp256k1.PubKey":"/ethermint.crypto.v1.ethsecp256k1.PubKey":"/cosmos.crypto.secp256k1.PubKey")(),value:u.PubKey.encode({key:this.base.pubKey}).finish()},modeInfo:{single:{mode:d.SignMode.SIGN_MODE_DIRECT},multi:void 0},sequence:t.getSequence().toString()}],fee:c.Fee.fromPartial({amount:i.amount.map((e=>({denom:e.denom,amount:e.amount.toString()}))),gasLimit:i.gas})}).finish(),chainId:this.chainId,accountNumber:C.default.fromString(t.getAccountNumber().toString())},o);return{tx:c.TxRaw.encode({bodyBytes:f.signed.bodyBytes,authInfoBytes:f.signed.authInfoBytes,signatures:[v.Buffer.from(f.signature.signature,"base64")]}).finish(),signDoc:f.signed}}))}simulateTx(e,t,n=""){return r(this,void 0,void 0,(function*(){const r=yield g.BaseAccount.fetchFromRest(this.chainGetter.getChain(this.chainId).rest,this.base.bech32Address,!0),i=c.TxRaw.encode({bodyBytes:c.TxBody.encode(c.TxBody.fromPartial({messages:e,memo:n})).finish(),authInfoBytes:c.AuthInfo.encode({signerInfos:[c.SignerInfo.fromPartial({modeInfo:{single:{mode:d.SignMode.SIGN_MODE_LEGACY_AMINO_JSON},multi:void 0},sequence:r.getSequence().toString()})],fee:c.Fee.fromPartial({amount:t.amount.map((e=>({amount:e.amount,denom:e.denom})))})}).finish(),signatures:[new Uint8Array(64)]}).finish(),s=yield(0,O.simpleFetch)(this.chainGetter.getChain(this.chainId).rest,"/cosmos/tx/v1beta1/simulate",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({tx_bytes:v.Buffer.from(i).toString("base64")})}),o=parseInt(s.data.gas_info.gas_used);if(Number.isNaN(o))throw new Error(`Invalid integer gas: ${s.data.gas_info.gas_used}`);return{gasUsed:o}}))}makeTx(e,t,n){let i=e;const s=(e={},n="")=>r(this,void 0,void 0,(function*(){var r;return"function"==typeof t&&(t=yield t()),this.simulateTx(t.protoMsgs,{amount:null!==(r=e.amount)&&void 0!==r?r:[]},n)})),o=(e,s="",o,c)=>r(this,void 0,void 0,(function*(){if(e.gas<0)throw new Error("Gas is zero or negative");const r={gas:e.gas.toString(),amount:e.gasPrice?[{denom:e.gasPrice.denom,amount:e.gasPrice.amount.mul(new a.Dec(e.gas)).truncate().toString()}]:[]};return this.sendMsgs(i,t,s,r,o,(0,b.txEventsWithPreOnFulfill)(c,n))}));return{ui:{type:()=>i,overrideType:e=>{i=e}},msgs:()=>r(this,void 0,void 0,(function*(){return"function"==typeof t&&(t=yield t()),t})),simulate:s,simulateAndSend:(e,t="",n,a)=>r(this,void 0,void 0,(function*(){this.base.setTxTypeInProgress(i);try{const{gasUsed:r}=yield s({},t);if(r<0)throw new Error("Gas estimated is zero or negative");const i=Math.floor(e.gasAdjustment*r);return o({gas:i,gasPrice:e.gasPrice},t,n,a)}catch(e){throw this.base.setTxTypeInProgress(""),e}})),send:(e,s="",o,a)=>r(this,void 0,void 0,(function*(){return this.sendMsgs(i,t,s,e,o,(0,b.txEventsWithPreOnFulfill)(a,n))})),sendWithGasPrice:o}}makePacketForwardIBCTransferTx(e,t,n,i,o){var a;if(0===t.length)throw new Error("No channels");const c=t[t.length-1].counterpartyChainId,d=this.chainGetter.getChain(c);if(g.Bech32Address.validate(o,null===(a=d.bech32Config)||void 0===a?void 0:a.bech32PrefixAccAddr),null==this.chainGetter.getChain(t[0].counterpartyChainId).bech32Config)throw new Error("Counterparty chain bech32 config is not set");return this.makeIBCTransferTxWithAsyncMemoConstructor(t[0],n,i,(()=>r(this,void 0,void 0,(function*(){if(1===t.length){const e=this.chainGetter.getChain(t[0].counterpartyChainId);if(!e.bech32Config)throw new Error("Bech32 config is not set");return g.Bech32Address.fromBech32(o).toBech32(e.bech32Config.bech32PrefixAccAddr)}const n=t[0],r=this.chainGetter.getChain(n.counterpartyChainId),i=e.getAccount(r.chainId);if(i.walletStatus!==s.WalletStatus.Loaded&&i.init(),i.walletStatus===s.WalletStatus.Loading&&(yield new Promise((e=>{i.walletStatus!==s.WalletStatus.Loaded?(0,I.autorun)((()=>{i.walletStatus===s.WalletStatus.Loaded&&e()})):e()}))),i.walletStatus!==s.WalletStatus.Loaded)throw new Error(`The account of ${r.chainId} is not loaded: ${i.walletStatus}`);return i.bech32Address}))),(()=>r(this,void 0,void 0,(function*(){const n={};let r;if(t.length>1){const i=t.slice(1);for(let t=0;t<i.length;t++){const a=i[t];if(t===i.length-1){const e=this.chainGetter.getChain(a.counterpartyChainId);if(!e.bech32Config)throw new Error("Bech32 config is not set");g.Bech32Address.validate(o,e.bech32Config.bech32PrefixAccAddr);const t={receiver:o,port:a.portId,channel:a.channelId};r?r.next={forward:t}:n.forward=t,r=t}else{const t=this.chainGetter.getChain(a.counterpartyChainId),i=e.getAccount(t.chainId);if(i.walletStatus!==s.WalletStatus.Loaded&&i.init(),i.walletStatus===s.WalletStatus.Loading&&(yield new Promise((e=>{i.walletStatus!==s.WalletStatus.Loaded?(0,I.autorun)((()=>{i.walletStatus===s.WalletStatus.Loaded&&e()})):e()}))),i.walletStatus!==s.WalletStatus.Loaded)throw new Error(`The account of ${t.chainId} is not loaded: ${i.walletStatus}`);const o={receiver:i.bech32Address,port:a.portId,channel:a.channelId};r?r.next={forward:o}:n.forward=o,r=o}}}return Object.keys(n).length>0?JSON.stringify(n):void 0}))))}makeIBCTransferTx(e,t,n,i,s){return this.makeIBCTransferTxWithAsyncMemoConstructor(e,t,n,i,(()=>r(this,void 0,void 0,(function*(){return s}))))}makeIBCTransferTxWithAsyncMemoConstructor(e,t,n,i,s){if("native"!==new o.DenomHelper(n.coinMinimalDenom).type)throw new Error("Only native token can be sent via IBC");const c=(()=>{let e=new a.Dec(t);return e=e.mul(a.DecUtils.getPrecisionDec(n.coinDecimals)),e.truncate().toString()})(),d=this.queriesStore.get(e.counterpartyChainId).cosmos.queryRPCStatus;return this.makeTx("ibcTransfer",(()=>r(this,void 0,void 0,(function*(){var t;if(yield d.waitFreshResponse(),!d.network)throw new Error(`Failed to fetch the network chain id of ${e.counterpartyChainId}`);if(g.ChainIdHelper.parse(d.network).identifier!==g.ChainIdHelper.parse(e.counterpartyChainId).identifier)throw new Error(`Fetched the network chain id is different with counterparty chain id (${d.network}, ${e.counterpartyChainId})`);if(!d.latestBlockHeight||d.latestBlockHeight.equals(new a.Int("0")))throw new Error(`Failed to fetch the latest block of ${e.counterpartyChainId}`);const r=!0===(null===(t=this.chainGetter.getChain(this.chainId).features)||void 0===t?void 0:t.includes("eth-key-sign"))&&this.base.isNanoLedger,o=this.chainId.startsWith("injective");let u=yield s();"function"==typeof i&&(i=yield i()),r&&o&&(u||(u="IBC Transfer"));const l=r?"18446744073709551615":"0",p={type:this.msgOpts.ibcTransfer.type,value:{source_port:e.portId,source_channel:e.channelId,token:{denom:n.coinMinimalDenom,amount:c},sender:this.base.bech32Address,receiver:i,timeout_height:{revision_number:g.ChainIdHelper.parse(d.network).version.toString(),revision_height:d.latestBlockHeight.add(new a.Int("150")).toString()},timeout_timestamp:l,memo:u}};return"0"===p.value.timeout_height.revision_number&&delete p.value.timeout_height.revision_number,"0"===p.value.timeout_timestamp&&delete p.value.timeout_timestamp,u||delete p.value.memo,{aminoMsgs:(()=>!(this.base.isNanoLedger||!(this.chainId.startsWith("injective")||this.chainId.startsWith("stride")||this.chainGetter.getChain(this.chainId).hasFeature("ibc-go-v7-hot-fix"))))()?void 0:[p],protoMsgs:[{typeUrl:"/ibc.applications.transfer.v1.MsgTransfer",value:h.MsgTransfer.encode(h.MsgTransfer.fromPartial({sourcePort:p.value.source_port,sourceChannel:p.value.source_channel,token:p.value.token,sender:p.value.sender,receiver:p.value.receiver,timeoutHeight:{revisionNumber:p.value.timeout_height.revision_number?p.value.timeout_height.revision_number:"0",revisionHeight:p.value.timeout_height.revision_height},timeoutTimestamp:p.value.timeout_timestamp,memo:p.value.memo})).finish()}],rlpTypes:{MsgValue:[{name:"source_port",type:"string"},{name:"source_channel",type:"string"},{name:"token",type:"TypeToken"},{name:"sender",type:"string"},{name:"receiver",type:"string"},{name:"timeout_height",type:"TypeTimeoutHeight"},{name:"timeout_timestamp",type:"uint64"},...null!=u?[{name:"memo",type:"string"}]:[]],TypeToken:[{name:"denom",type:"string"},{name:"amount",type:"string"}],TypeTimeoutHeight:[{name:"revision_number",type:"uint64"},{name:"revision_height",type:"uint64"}]}}}))),(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===n.coinMinimalDenom));e&&e.fetch()}}))}sendIBCTransferMsg(e,t,n,i,s="",c={},d,u){var l,p;return r(this,void 0,void 0,(function*(){if("native"!==new o.DenomHelper(n.coinMinimalDenom).type)throw new Error("Only native token can be sent via IBC");const f=(()=>{let e=new a.Dec(t);return e=e.mul(a.DecUtils.getPrecisionDec(n.coinDecimals)),e.truncate().toString()})(),m=this.queriesStore.get(e.counterpartyChainId).cosmos.queryRPCStatus;yield this.sendMsgs("ibcTransfer",(()=>r(this,void 0,void 0,(function*(){if(yield m.waitFreshResponse(),!m.network)throw new Error(`Failed to fetch the network chain id of ${e.counterpartyChainId}`);if(g.ChainIdHelper.parse(m.network).identifier!==g.ChainIdHelper.parse(e.counterpartyChainId).identifier)throw new Error(`Fetched the network chain id is different with counterparty chain id (${m.network}, ${e.counterpartyChainId})`);if(!m.latestBlockHeight||m.latestBlockHeight.equals(new a.Int("0")))throw new Error(`Failed to fetch the latest block of ${e.counterpartyChainId}`);const t={type:this.msgOpts.ibcTransfer.type,value:{source_port:e.portId,source_channel:e.channelId,token:{denom:n.coinMinimalDenom,amount:f},sender:this.base.bech32Address,receiver:i,timeout_height:{revision_number:g.ChainIdHelper.parse(m.network).version.toString(),revision_height:m.latestBlockHeight.add(new a.Int("150")).toString()}}};return"0"===t.value.timeout_height.revision_number&&delete t.value.timeout_height.revision_number,{aminoMsgs:[t],protoMsgs:[{typeUrl:"/ibc.applications.transfer.v1.MsgTransfer",value:h.MsgTransfer.encode(h.MsgTransfer.fromPartial({sourcePort:t.value.source_port,sourceChannel:t.value.source_channel,token:t.value.token,sender:t.value.sender,receiver:t.value.receiver,timeoutHeight:{revisionNumber:t.value.timeout_height.revision_number?t.value.timeout_height.revision_number:"0",revisionHeight:t.value.timeout_height.revision_height}})).finish()}]}}))),s,{amount:null!==(l=c.amount)&&void 0!==l?l:[],gas:null!==(p=c.gas)&&void 0!==p?p:this.msgOpts.ibcTransfer.gas.toString()},d,(0,b.txEventsWithPreOnFulfill)(u,(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===n.coinMinimalDenom));e&&e.fetch()}})))}))}makeRevokeMsg(e,t){var n;g.Bech32Address.validate(e,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixAccAddr);const r=this.chainGetter.getChain(this.chainId),i="osmosis"===r.chainIdentifier||r.hasFeature("authz-msg-revoke-fixed")?{type:"cosmos-sdk/MsgRevoke",value:{granter:this.base.bech32Address,grantee:e,msg_type_url:t}}:{granter:this.base.bech32Address,grantee:e,msg_type_url:t};return this.makeTx("revoke",{aminoMsgs:[i],protoMsgs:[{typeUrl:"/cosmos.authz.v1beta1.MsgRevoke",value:_.MsgRevoke.encode({granter:this.base.bech32Address,grantee:e,msgTypeUrl:t}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.cosmos.queryAuthZGranter.getGranter(this.base.bech32Address).fetch()}))}makeDelegateTx(e,t){var n;g.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let i=new a.Dec(e);i=i.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const s={type:this.chainId.startsWith("interwoven-")?"mstaking/MsgDelegate":this.msgOpts.delegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:this.chainId.startsWith("interwoven-")?[{denom:r.coinMinimalDenom,amount:i.truncate().toString()}]:{denom:r.coinMinimalDenom,amount:i.truncate().toString()}}};return this.makeTx("delegate",{aminoMsgs:[s],protoMsgs:[{typeUrl:this.chainId.startsWith("interwoven-")?"/initia.mstaking.v1.MsgDelegate":"/cosmos.staking.v1beta1.MsgDelegate",value:p.MsgDelegate.encode({delegatorAddress:s.value.delegator_address,validatorAddress:s.value.validator_address,amount:Array.isArray(s.value.amount)?s.value.amount[0]:s.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.chainId.startsWith("interwoven-")?(this.queries.cosmos.queryInitiaValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryInitiaDelegations.getQueryBech32Address(this.base.bech32Address).fetch()):(this.queries.cosmos.queryValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch()),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}sendDelegateMsg(e,t,n="",i={},s,o){var c,d;return r(this,void 0,void 0,(function*(){const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let u=new a.Dec(e);u=u.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const l={type:this.msgOpts.delegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:{denom:r.coinMinimalDenom,amount:u.truncate().toString()}}};yield this.sendMsgs("delegate",{aminoMsgs:[l],protoMsgs:[{typeUrl:"/cosmos.staking.v1beta1.MsgDelegate",value:p.MsgDelegate.encode({delegatorAddress:l.value.delegator_address,validatorAddress:l.value.validator_address,amount:l.value.amount}).finish()}]},n,{amount:null!==(c=i.amount)&&void 0!==c?c:[],gas:null!==(d=i.gas)&&void 0!==d?d:this.msgOpts.delegate.gas.toString()},s,(0,b.txEventsWithPreOnFulfill)(o,(e=>{null!=e.code&&0!==e.code||(this.queries.cosmos.queryValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())})))}))}makeUndelegateTx(e,t){var n;g.Bech32Address.validate(t,null===(n=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr);const r=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!r)throw new Error("Stake currency is null");let i=new a.Dec(e);i=i.mulTruncate(a.DecUtils.getPrecisionDec(r.coinDecimals));const s={type:this.chainId.startsWith("interwoven-")?"mstaking/MsgUndelegate":this.msgOpts.undelegate.type,value:{delegator_address:this.base.bech32Address,validator_address:t,amount:this.chainId.startsWith("interwoven-")?[{denom:r.coinMinimalDenom,amount:i.truncate().toString()}]:{denom:r.coinMinimalDenom,amount:i.truncate().toString()}}};return this.makeTx("undelegate",{aminoMsgs:[s],protoMsgs:[{typeUrl:this.chainId.startsWith("interwoven-")?"/initia.mstaking.v1.MsgUndelegate":"/cosmos.staking.v1beta1.MsgUndelegate",value:p.MsgUndelegate.encode({delegatorAddress:s.value.delegator_address,validatorAddress:s.value.validator_address,amount:Array.isArray(s.value.amount)?s.value.amount[0]:s.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.chainId.startsWith("interwoven-")?(this.queries.cosmos.queryInitiaValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryInitiaDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryInitiaUnbondingDelegations.getQueryBech32Address(this.base.bech32Address).fetch()):(this.queries.cosmos.queryValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch(),this.queries.cosmos.queryUnbondingDelegations.getQueryBech32Address(this.base.bech32Address).fetch()),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}makeBeginRedelegateTx(e,t,n){var r,i;g.Bech32Address.validate(t,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixValAddr),g.Bech32Address.validate(n,null===(i=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===i?void 0:i.bech32PrefixValAddr);const s=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!s)throw new Error("Stake currency is null");let o=new a.Dec(e);o=o.mulTruncate(a.DecUtils.getPrecisionDec(s.coinDecimals));const c={type:this.chainId.startsWith("interwoven-")?"mstaking/MsgBeginRedelegate":this.msgOpts.redelegate.type,value:{delegator_address:this.base.bech32Address,validator_src_address:t,validator_dst_address:n,amount:this.chainId.startsWith("interwoven-")?[{denom:s.coinMinimalDenom,amount:o.truncate().toString()}]:{denom:s.coinMinimalDenom,amount:o.truncate().toString()}}};return this.makeTx("redelegate",{aminoMsgs:[c],protoMsgs:[{typeUrl:this.chainId.startsWith("interwoven-")?"/initia.mstaking.v1.MsgBeginRedelegate":"/cosmos.staking.v1beta1.MsgBeginRedelegate",value:p.MsgBeginRedelegate.encode({delegatorAddress:c.value.delegator_address,validatorSrcAddress:c.value.validator_src_address,validatorDstAddress:c.value.validator_dst_address,amount:Array.isArray(c.value.amount)?c.value.amount[0]:c.value.amount}).finish()}],rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_src_address",type:"string"},{name:"validator_dst_address",type:"string"},{name:"amount",type:"TypeAmount"}],TypeAmount:[{name:"denom",type:"string"},{name:"amount",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||(this.chainId.startsWith("interwoven-")?(this.queries.cosmos.queryInitiaValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryInitiaDelegations.getQueryBech32Address(this.base.bech32Address).fetch()):(this.queries.cosmos.queryValidators.getQueryStatus(m.BondStatus.Bonded).fetch(),this.queries.cosmos.queryDelegations.getQueryBech32Address(this.base.bech32Address).fetch()),this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch())}))}makeWithdrawDelegationRewardTx(e){var t;for(const n of e)g.Bech32Address.validate(n,null===(t=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===t?void 0:t.bech32PrefixValAddr);const n=e.map((e=>({type:this.msgOpts.withdrawRewards.type,value:{delegator_address:this.base.bech32Address,validator_address:e}})));return this.makeTx("withdrawRewards",{aminoMsgs:n,protoMsgs:n.map((e=>({typeUrl:"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward",value:f.MsgWithdrawDelegatorReward.encode({delegatorAddress:e.value.delegator_address,validatorAddress:e.value.validator_address}).finish()}))),rlpTypes:{MsgValue:[{name:"delegator_address",type:"string"},{name:"validator_address",type:"string"}]}},(e=>{null!=e.code&&0!==e.code||this.queries.cosmos.queryRewards.getQueryBech32Address(this.base.bech32Address).fetch()}))}makeCCTPTx(e,t){const n=JSON.parse(e),r={type:"cctp/DepositForBurnWithCaller",value:{from:n.from,amount:n.amount,destination_domain:n.destination_domain,mint_recipient:n.mint_recipient,burn_token:n.burn_token,destination_caller:n.destination_caller}},i=JSON.parse(t),s={type:this.msgOpts.send.native.type,value:{from_address:i.from_address,to_address:i.to_address,amount:i.amount}};return this.makeTx("cctp",{aminoMsgs:[r,s],protoMsgs:[{typeUrl:"/circle.cctp.v1.MsgDepositForBurnWithCaller",value:S.MsgDepositForBurnWithCaller.encode({from:r.value.from,amount:r.value.amount,destinationDomain:r.value.destination_domain,mintRecipient:r.value.mint_recipient,burnToken:r.value.burn_token,destinationCaller:r.value.destination_caller}).finish()},{typeUrl:"/cosmos.bank.v1beta1.MsgSend",value:l.MsgSend.encode({fromAddress:s.value.from_address,toAddress:s.value.to_address,amount:s.value.amount}).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.forEach((e=>e.fetch()))}))}get queries(){return this.queriesStore.get(this.chainId)}}t.CosmosAccountImpl=P},66263:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmwasmAccountImpl=t.defaultCosmwasmMsgOpts=t.CosmwasmAccount=void 0;const i=n(89642),s=n(19731),o=n(78566),a=n(48834),c=r(n(39714)),d=n(94531);t.CosmwasmAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{cosmwasm:new u(n,r,i,e.queriesStore,(0,c.default)(t.defaultCosmwasmMsgOpts,s||{}))}}},t.defaultCosmwasmMsgOpts={send:{cw20:{gas:15e4}},executeWasm:{type:"wasm/MsgExecuteContract"}};class u{constructor(e,t,n,r,i){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("cw20"===new i.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new s.Dec(e);return n=n.mul(s.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();if(!("type"in t)||"cw20"!==t.type)throw new Error("Currency is not cw20");return d.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr),this.makeExecuteContractTx("send",t.contractAddress,{transfer:{recipient:n,amount:i}},[],(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}makeExecuteContractTx(e="executeWasm",t,n,r,i){var s;d.Bech32Address.validate(t,null===(s=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===s?void 0:s.bech32PrefixAccAddr);const c={type:this.msgOpts.executeWasm.type,value:{sender:this.base.bech32Address,contract:t,msg:n,funds:r}};return this.base.cosmos.makeTx(e,{aminoMsgs:[c],protoMsgs:[{typeUrl:"/cosmwasm.wasm.v1.MsgExecuteContract",value:o.MsgExecuteContract.encode({sender:c.value.sender,contract:c.value.contract,msg:a.Buffer.from(JSON.stringify(c.value.msg)),funds:c.value.funds}).finish()}]},i)}get queries(){return this.queriesStore.get(this.chainId)}}t.CosmwasmAccountImpl=u},28911:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeplrFromWindow=void 0,t.getKeplrFromWindow=()=>n(void 0,void 0,void 0,(function*(){if("undefined"!=typeof window)return window.keplr||"complete"===document.readyState?window.keplr:new Promise((e=>{const t=n=>{n.target&&"complete"===n.target.readyState&&(e(window.keplr),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}))}))},5177:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67364),t),i(n(21330),t),i(n(84713),t),i(n(28911),t),i(n(42164),t),i(n(35966),t),i(n(66263),t),i(n(40515),t),i(n(25009),t),i(n(98507),t),i(n(43879),t)},98507:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NobleAccountImpl=t.NobleAccount=void 0;const r=n(19731),i=n(33600),s=n(15451);t.NobleAccount={use:e=>(t,n,r)=>({noble:new o(t,n,r,e.queriesStore)})};class o{constructor(e,t,n,r){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r}makeSwapTx(e="noble-swap",t,n,s,o,a){const c=(()=>{let e=new r.Dec(t);return e=e.mul(r.DecUtils.getPrecisionDec(n.coinDecimals)),e.truncate().toString()})(),d=(()=>{let e=new r.Dec(s);return e=e.mul(r.DecUtils.getPrecisionDec(o.coinDecimals)),e.truncate().toString()})(),u={type:"swap/Swap",value:{signer:this.base.bech32Address,amount:{denom:n.coinMinimalDenom,amount:c},routes:a.map((e=>({pool_id:e.poolId,denom_to:e.denomTo}))),min:{denom:o.coinMinimalDenom,amount:d}}};return this.base.cosmos.makeTx(e,{aminoMsgs:[{type:u.type,value:Object.assign(Object.assign({},u.value),{routes:u.value.routes.map((e=>"0"===e.pool_id?{denom_to:e.denom_to}:{pool_id:e.pool_id,denom_to:e.denom_to}))})}],protoMsgs:[{typeUrl:"/noble.swap.v1.MsgSwap",value:i.MsgSwap.encode(i.MsgSwap.fromPartial({signer:u.value.signer,amount:u.value.amount,routes:u.value.routes.map((e=>({poolId:e.pool_id,denomTo:e.denom_to}))),min:u.value.min})).finish()}]},(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.filter((e=>e.currency.coinMinimalDenom===n.coinMinimalDenom||e.currency.coinMinimalDenom===o.coinMinimalDenom));for(const t of e)t.fetch()}}))}makeClaimYieldTx(e="noble-claim-yield"){const t={type:"dollar/ClaimYield",value:{signer:this.base.bech32Address}};return this.base.cosmos.makeTx(e,{aminoMsgs:[t],protoMsgs:[{typeUrl:"/noble.dollar.v1.MsgClaimYield",value:s.MsgClaimYield.encode(s.MsgClaimYield.fromPartial({signer:t.value.signer})).finish()}]},(e=>{null!=e.code&&0!==e.code||this.queries.noble.queryYield.getQueryBech32Address(this.base.bech32Address).fetch()}))}get queries(){return this.queriesStore.get(this.chainId)}}t.NobleAccountImpl=o},42164:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretAccountImpl=t.defaultSecretMsgOpts=t.SecretAccount=void 0;const s=n(48834),o=n(89642),a=n(180),c=n(94531),d=n(19731),u=i(n(39714));t.SecretAccount={use:e=>(n,r,i)=>{const s=e.msgOptsCreator?e.msgOptsCreator(i):void 0;return{secret:new l(n,r,i,e.queriesStore,(0,u.default)(t.defaultSecretMsgOpts,s||{}))}}},t.defaultSecretMsgOpts={send:{secret20:{gas:25e4}},createSecret20ViewingKey:{gas:15e4},executeSecretWasm:{type:"wasm/MsgExecuteContract"}};class l{constructor(e,t,n,r,i){this.base=e,this.chainGetter=t,this.chainId=n,this.queriesStore=r,this._msgOpts=i,this.base.registerMakeSendTokenFn(this.processMakeSendTokenTx.bind(this))}get msgOpts(){return this._msgOpts}processMakeSendTokenTx(e,t,n){var r;if("secret20"===new o.DenomHelper(t.coinMinimalDenom).type){const i=(()=>{let n=new d.Dec(e);return n=n.mul(d.DecUtils.getPrecisionDec(t.coinDecimals)),n.truncate().toString()})();if(!("type"in t)||"secret20"!==t.type)throw new Error("Currency is not secret20");return c.Bech32Address.validate(n,null===(r=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===r?void 0:r.bech32PrefixAccAddr),this.makeExecuteSecretContractTx("send",t.contractAddress,{transfer:{recipient:n,amount:i}},[],(e=>{if(null==e.code||0===e.code){const e=this.queries.queryBalances.getQueryBech32Address(this.base.bech32Address).balances.find((e=>e.currency.coinMinimalDenom===t.coinMinimalDenom));e&&e.fetch()}}))}}createSecret20ViewingKey(e,t="",n={},i,o){var a,c;return r(this,void 0,void 0,(function*(){const r=new Uint8Array(32);crypto.getRandomValues(r);const d=s.Buffer.from(r).toString("hex");yield this.makeExecuteSecretContractTx("createSecret20ViewingKey",e,{set_viewing_key:{key:d}},[]).send({amount:null!==(a=n.amount)&&void 0!==a?a:[],gas:null!==(c=n.gas)&&void 0!==c?c:this.msgOpts.createSecret20ViewingKey.gas.toString()},t,i,(e=>{let t="";null!=e.code&&0!==e.code||(t=d),o&&o(e,t)}))}))}makeExecuteSecretContractTx(e="executeSecretWasm",t,n,i,o){var d;let u;return c.Bech32Address.validate(t,null===(d=this.chainGetter.getChain(this.chainId).bech32Config)||void 0===d?void 0:d.bech32PrefixAccAddr),this.base.cosmos.makeTx(e,(()=>r(this,void 0,void 0,(function*(){u=yield this.encryptSecretContractMsg(t,n);const e={type:this.msgOpts.executeSecretWasm.type,value:{sender:s.Buffer.from(c.Bech32Address.fromBech32(this.base.bech32Address).address).toString("base64"),contract:s.Buffer.from(c.Bech32Address.fromBech32(t).address).toString("base64"),msg:s.Buffer.from(u).toString("base64"),sent_funds:i}};return{aminoMsgs:[e],protoMsgs:[{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:a.MsgExecuteContract.encode(a.MsgExecuteContract.fromPartial({sender:s.Buffer.from(e.value.sender,"base64"),contract:s.Buffer.from(e.value.contract,"base64"),msg:s.Buffer.from(e.value.msg,"base64"),sentFunds:e.value.sent_funds})).finish()}]}}))),o)}sendExecuteSecretContractMsg(e="executeSecretWasm",t,n,i,o="",d,u,l){var h;return r(this,void 0,void 0,(function*(){let p;return yield this.base.cosmos.sendMsgs(e,(()=>r(this,void 0,void 0,(function*(){p=yield this.encryptSecretContractMsg(t,n);const e={type:this.msgOpts.executeSecretWasm.type,value:{sender:s.Buffer.from(c.Bech32Address.fromBech32(this.base.bech32Address).address).toString("base64"),contract:s.Buffer.from(c.Bech32Address.fromBech32(t).address).toString("base64"),msg:s.Buffer.from(p).toString("base64"),sent_funds:i}};return{aminoMsgs:[e],protoMsgs:[{typeUrl:"/secret.compute.v1beta1.MsgExecuteContract",value:a.MsgExecuteContract.encode(a.MsgExecuteContract.fromPartial({sender:s.Buffer.from(e.value.sender,"base64"),contract:s.Buffer.from(e.value.contract,"base64"),msg:s.Buffer.from(e.value.msg,"base64"),sentFunds:e.value.sent_funds})).finish()}]}}))),o,{amount:null!==(h=d.amount)&&void 0!==h?h:[],gas:d.gas},u,l),p}))}encryptSecretContractMsg(e,t){return r(this,void 0,void 0,(function*(){const n=yield this.queries.secret.querySecretContractCodeHash.getQueryContract(e).waitResponse();if(!n)throw new Error(`Can't get the code hash of the contract (${e})`);const r=n.data.code_hash,i=yield this.base.getKeplr();if(!i)throw new Error("Can't get the Keplr API");const s=i.getEnigmaUtils(this.chainId);return yield s.encrypt(r,t)}))}get queries(){return this.queriesStore.get(this.chainId)}}t.SecretAccountImpl=l},35966:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountStore=void 0;const r=n(5136),i=n(21330),s=n(25009);class o extends r.HasMapStore{constructor(e,t,n,o,...a){const c=new s.AccountSharedContext(n);super((n=>{const s=new i.AccountSetBaseSuper(e,t,n,c,o(n));return(0,r.mergeStores)(s,[this.chainGetter,n],...this.accountSetCreators)})),this.eventListener=e,this.chainGetter=t,this.getKeplr=n,this.storeOptsCreator=o,this.accountSetCreators=a}getAccount(e){return this.chainGetter.hasChain(e)?this.get(this.chainGetter.getChain(e).chainId):this.get(e)}hasAccount(e){return this.chainGetter.hasChain(e)?this.has(this.chainGetter.getChain(e).chainId):this.has(e)}}t.AccountStore=o},67364:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},40515:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEip712TypedDataBasedOnChainInfo=t.txEventsWithPreOnFulfill=void 0;const r=n(94531);t.txEventsWithPreOnFulfill=function(e,t){const n=e?"function"==typeof e?void 0:e.onBroadcasted:void 0,r=e?"function"==typeof e?e:e.onFulfill:void 0,i=t?"function"==typeof t?void 0:t.onBroadcasted:void 0,s=t?"function"==typeof t?t:t.onFulfill:void 0;return{onBroadcastFailed:"function"==typeof t||null==t?void 0:t.onBroadcastFailed,onBroadcasted:n||i?e=>{i&&i(e),n&&n(e)}:void 0,onFulfill:r||s?e=>{s&&s(e),r&&r(e)}:void 0}},t.getEip712TypedDataBasedOnChainInfo=(e,t)=>{const n=e.chainId,i=n.startsWith("injective"),s=e.features&&e.features.includes("evm-ledger-sign-plain-json"),o={types:Object.assign({EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"string"},{name:"salt",type:"string"}],Tx:[{name:"account_number",type:"string"},{name:"chain_id",type:"string"},{name:"fee",type:"Fee"},{name:"memo",type:"string"},{name:"msgs",type:"Msg[]"},{name:"sequence",type:"string"}],Fee:[...s?[]:[{name:"feePayer",type:"string"}],{name:"amount",type:"Coin[]"},{name:"gas",type:"string"}],Coin:[{name:"denom",type:"string"},{name:"amount",type:"string"}],Msg:[{name:"type",type:"string"},{name:"value",type:"MsgValue"}]},t.rlpTypes),domain:{name:"Cosmos Web3",version:"1.0.0",chainId:s?9999:r.EthermintChainIdHelper.parse(n).ethChainId.toString(),verifyingContract:"cosmos",salt:"0"},primaryType:"Tx"};return i?(o.types.Tx=[...o.types.Tx,{name:"timeout_height",type:"string"}],o.domain.name="Injective Web3",o.domain.chainId="0x"+r.EthermintChainIdHelper.parse(n).ethChainId.toString(16),o.types.Fee=[{name:"amount",type:"Coin[]"},{name:"gas",type:"string"}],o):o}},49246:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ChainStore=t.ModularChainInfoImpl=t.ChainInfoImpl=void 0;const i=n(80075),s=n(94531),o=n(58242),a=n(89642),c=new Map;class d{constructor(e,t){this.currencyRegistry=t,this.unknownDenoms=[],this.registeredCurrencies=[],this.registeredCurrenciesNoReaction=[],this.registrationInProgressCurrencyMap=new Map,this._embedded=e,(0,i.makeObservable)(this),(0,o.keepAlive)(this,"currencyMap"),(0,o.keepAlive)(this,"unknownDenomMap")}addUnknownDenoms(...e){this.addUnknownDenomsImpl(e,!0)}addUnknownDenomsWithoutReaction(...e){this.addUnknownDenomsImpl(e,!1)}addUnknownDenomsImpl(e,t){for(const n of e){const e=a.DenomHelper.normalizeDenom(n);let r=!1;const s=this.unknownDenomMap.get(e);if(s){if(s.reaction===t)continue;t&&(r=!0,s.reaction=t)}if(this.currencyMap.has(e))continue;if(this.currencyNoReactionMap.has(e))continue;r||(0,i.runInAction)((()=>{this.unknownDenoms.push({denom:e,reaction:t}),this.unknownDenoms=this.unknownDenoms.slice(),this.registrationInProgressCurrencyMap.set(e,!0)}));let o=0,c=!1;const d=(0,i.autorun)((()=>{o++;const t=()=>{c=!0,1===o?setTimeout((()=>{d&&d()}),1):d&&d()};if(c)return;const n=this.currencyRegistry.getCurrencyRegistrar(this.chainId,e);if(n){const r=n.value;(0,i.runInAction)((()=>{if(n.done||this.registrationInProgressCurrencyMap.set(e,!0),r){const t=this.unknownDenoms.findIndex((t=>t.denom===e));let i;t>=0&&(i=this.unknownDenoms[t],n.done&&(this.unknownDenoms.splice(t,1),this.unknownDenoms=this.unknownDenoms.slice())),!i||i.reaction?this.addOrReplaceCurrency(r):this.addOrReplaceCurrencyNoReaction(r)}n.done&&this.registrationInProgressCurrencyMap.delete(e)})),n.done&&t()}else this.registrationInProgressCurrencyMap.get(e)&&(0,i.runInAction)((()=>{this.registrationInProgressCurrencyMap.delete(e)})),t()}))}}get embedded(){return this._embedded}get chainId(){return this._embedded.chainId}get chainIdentifier(){return s.ChainIdHelper.parse(this.chainId).identifier}get currencies(){return this._embedded.currencies.concat(this.registeredCurrencies)}get currencyMap(){const e=new Map;for(const t of this.currencies)e.set(t.coinMinimalDenom,t);return e}get currencyNoReactionMap(){const e=new Map;for(const t of this.registeredCurrenciesNoReaction)e.set(t.coinMinimalDenom,t);return e}moveNoReactionCurrencyToReaction(e){const t=this.registeredCurrenciesNoReaction.findIndex((t=>t.coinMinimalDenom===e));if(t>=0){const e=this.registeredCurrenciesNoReaction[t];this.registeredCurrenciesNoReaction.splice(t,1),this.registeredCurrenciesNoReaction=this.registeredCurrenciesNoReaction.slice(),this.registeredCurrencies.push(e),this.registeredCurrencies=this.registeredCurrencies.slice()}}get unknownDenomMap(){const e=new Map;for(const t of this.unknownDenoms)e.set(t.denom,t);return e}addCurrencies(...e){if(0===e.length)return;const t=this.currencyMap;for(const n of e){const e=a.DenomHelper.normalizeDenom(n.coinMinimalDenom);t.has(e)||(this.registeredCurrencies.push(Object.assign(Object.assign({},n),{coinMinimalDenom:e})),this.registeredCurrencies=this.registeredCurrencies.slice())}}removeCurrencies(...e){if(0===e.length)return;const t=new Map;for(const n of e){const e=a.DenomHelper.normalizeDenom(n);t.set(e,!0)}this.registeredCurrencies=this.registeredCurrencies.filter((e=>!t.get(a.DenomHelper.normalizeDenom(e.coinMinimalDenom))))}findCurrency(e){const t=a.DenomHelper.normalizeDenom(e);return this.currencyMap.has(t)?this.currencyMap.get(t):this.currencyNoReactionMap.has(t)?(this.moveNoReactionCurrencyToReaction(t),this.currencyNoReactionMap.get(t)):(this.addUnknownDenoms(t),this.currencyMap.has(t)?this.currencyMap.get(t):this.currencyNoReactionMap.has(t)?(this.moveNoReactionCurrencyToReaction(t),this.currencyNoReactionMap.get(t)):void 0)}findCurrencyWithoutReaction(e){const t=a.DenomHelper.normalizeDenom(e);return this.currencyMap.has(t)?this.currencyMap.get(t):this.currencyNoReactionMap.has(t)?this.currencyNoReactionMap.get(t):(this.addUnknownDenomsWithoutReaction(t),this.currencyMap.has(t)?this.currencyMap.get(t):this.currencyNoReactionMap.has(t)?this.currencyNoReactionMap.get(t):void 0)}findCurrencyAsync(e){const t=a.DenomHelper.normalizeDenom(e);if(this.currencyMap.has(t))return Promise.resolve(this.currencyMap.get(t));let n;return this.addUnknownDenoms(t),new Promise((e=>{n=(0,i.autorun)((()=>{this.registrationInProgressCurrencyMap.get(t)||e(this.currencyMap.get(t))}))})).finally((()=>{n&&n()}))}forceFindCurrency(e){const t=a.DenomHelper.normalizeDenom(e),n=this.findCurrency(t);if(!n){if(c.has(t))return c.get(t);const e={coinMinimalDenom:t,coinDenom:t,coinDecimals:0};return c.set(t,e),e}return n}forceFindCurrencyWithoutReaction(e){const t=a.DenomHelper.normalizeDenom(e),n=this.findCurrencyWithoutReaction(t);if(!n){if(c.has(t))return c.get(t);const e={coinMinimalDenom:t,coinDenom:t,coinDecimals:0};return c.set(t,e),e}return n}addOrReplaceCurrency(e){const t=a.DenomHelper.normalizeDenom(e.coinMinimalDenom);if(this.currencyMap.has(t)){const n=this.registeredCurrencies.findIndex((e=>e.coinMinimalDenom===t));if(n>=0){const t=this.registeredCurrencies[n];(0,a.sortedJsonByKeyStringify)(t)!==(0,a.sortedJsonByKeyStringify)(e)&&(this.registeredCurrencies.splice(n,1,e),this.registeredCurrencies=this.registeredCurrencies.slice())}}else this.registeredCurrencies.push(e),this.registeredCurrencies=this.registeredCurrencies.slice()}addOrReplaceCurrencyNoReaction(e){const t=a.DenomHelper.normalizeDenom(e.coinMinimalDenom);if(this.currencyNoReactionMap.has(t)){const n=this.registeredCurrenciesNoReaction.findIndex((e=>e.coinMinimalDenom===t));if(n>=0){const t=this.registeredCurrenciesNoReaction[n];(0,a.sortedJsonByKeyStringify)(t)!==(0,a.sortedJsonByKeyStringify)(e)&&(this.registeredCurrenciesNoReaction.splice(n,1,e),this.registeredCurrenciesNoReaction=this.registeredCurrenciesNoReaction.slice())}}else this.registeredCurrenciesNoReaction.push(e),this.registeredCurrenciesNoReaction=this.registeredCurrenciesNoReaction.slice()}get stakeCurrency(){return this._embedded.stakeCurrency}get alternativeBIP44s(){return this._embedded.alternativeBIP44s}get bech32Config(){return this._embedded.bech32Config}get beta(){return this._embedded.beta}get bip44(){return this._embedded.bip44}get chainName(){return this._embedded.chainName}get features(){var e;return null!==(e=this._embedded.features)&&void 0!==e?e:[]}get feeCurrencies(){return this._embedded.feeCurrencies}get rest(){return this._embedded.rest}get rpc(){return this._embedded.rpc}get walletUrl(){return this._embedded.walletUrl}get walletUrlForStaking(){return this._embedded.walletUrlForStaking}get chainSymbolImageUrl(){return this._embedded.chainSymbolImageUrl}get evm(){return this._embedded.evm}get hideInUI(){return this._embedded.hideInUI}get isTestnet(){return this._embedded.isTestnet}hasFeature(e){return!(!this._embedded.features||!this._embedded.features.includes(e))}setEmbeddedChainInfo(e){this._embedded=e}isCurrencyRegistrationInProgress(e){return this.registrationInProgressCurrencyMap.get(e)||!1}}r([i.observable.ref],d.prototype,"_embedded",void 0),r([i.observable.shallow],d.prototype,"unknownDenoms",void 0),r([i.observable.shallow],d.prototype,"registeredCurrencies",void 0),r([i.observable.shallow],d.prototype,"registeredCurrenciesNoReaction",void 0),r([i.observable.shallow],d.prototype,"registrationInProgressCurrencyMap",void 0),r([i.computed],d.prototype,"chainIdentifier",null),r([i.computed],d.prototype,"currencies",null),r([i.computed],d.prototype,"currencyMap",null),r([i.computed],d.prototype,"currencyNoReactionMap",null),r([i.action],d.prototype,"moveNoReactionCurrencyToReaction",null),r([i.computed],d.prototype,"unknownDenomMap",null),r([i.action],d.prototype,"addCurrencies",null),r([i.action],d.prototype,"removeCurrencies",null),r([i.action],d.prototype,"addOrReplaceCurrency",null),r([i.action],d.prototype,"addOrReplaceCurrencyNoReaction",null),r([i.action],d.prototype,"setEmbeddedChainInfo",null),t.ChainInfoImpl=d;class u{constructor(e,t){this.currencyRegistry=t,this.registeredCosmosCurrencies=[],this.registeredStarkentCurrencies=[],this.registeredBitcoinCurrencies=[],this._embedded=e,(0,i.makeObservable)(this),(0,o.keepAlive)(this,"cosmosCurrencyMap"),(0,o.keepAlive)(this,"starknetCurrencyMap"),(0,o.keepAlive)(this,"bitcoinCurrencyMap")}get embedded(){return this._embedded}setEmbeddedModularChainInfo(e){this._embedded=e}get chainId(){return this._embedded.chainId}getCurrencies(e){switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);return this._embedded.cosmos.currencies.concat(this.registeredCosmosCurrencies);case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);return this._embedded.starknet.currencies.concat(this.registeredStarkentCurrencies);case"bitcoin":if(!("bitcoin"in this._embedded))throw new Error(`No bitcoin module for this chain: ${this.chainId}`);return this._embedded.bitcoin.currencies.concat(this.registeredBitcoinCurrencies);default:throw new Error(`Unknown module: ${e}`)}}addCurrencies(e,...t){if(0!==t.length)switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);for(const e of t){const t=a.DenomHelper.normalizeDenom(e.coinMinimalDenom);this.cosmosCurrencyMap.has(t)||this.registeredCosmosCurrencies.push(e)}break;case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);for(const e of t){const t=a.DenomHelper.normalizeDenom(e.coinMinimalDenom);!this.starknetCurrencyMap.has(t)&&"type"in e&&"erc20"===e.type&&this.registeredStarkentCurrencies.push(e)}break;case"bitcoin":if(!("bitcoin"in this._embedded))throw new Error(`No bitcoin module for this chain: ${this.chainId}`);for(const e of t){const t=a.DenomHelper.normalizeDenom(e.coinMinimalDenom);this.bitcoinCurrencyMap.has(t)||this.registeredBitcoinCurrencies.push(e)}break;default:throw new Error(`Unknown module: ${e}`)}}removeCurrencies(e,...t){if(0===t.length)return;const n=new Map;for(const e of t)n.set(e,!0);switch(e){case"cosmos":if(!("cosmos"in this._embedded))throw new Error(`No cosmos module for this chain: ${this.chainId}`);this.registeredCosmosCurrencies=this.registeredCosmosCurrencies.filter((e=>!n.get(e.coinMinimalDenom)));break;case"starknet":if(!("starknet"in this._embedded))throw new Error(`No starknet module for this chain: ${this.chainId}`);this.registeredStarkentCurrencies=this.registeredStarkentCurrencies.filter((e=>!n.get(e.coinMinimalDenom)));break;case"bitcoin":if(!("bitcoin"in this._embedded))throw new Error(`No bitcoin module for this chain: ${this.chainId}`);this.registeredBitcoinCurrencies=this.registeredBitcoinCurrencies.filter((e=>!n.get(e.coinMinimalDenom)));break;default:throw new Error(`Unknown module: ${e}`)}}get cosmosCurrencyMap(){const e=new Map;if("cosmos"in this._embedded)for(const t of this._embedded.cosmos.currencies)e.set(t.coinMinimalDenom,t);return e}get starknetCurrencyMap(){const e=new Map;if("starknet"in this._embedded)for(const t of this._embedded.starknet.currencies)e.set(t.coinMinimalDenom,t);return e}get bitcoinCurrencyMap(){const e=new Map;if("bitcoin"in this._embedded)for(const t of this._embedded.bitcoin.currencies)e.set(t.coinMinimalDenom,t);return e}}r([i.observable.ref],u.prototype,"_embedded",void 0),r([i.observable.shallow],u.prototype,"registeredCosmosCurrencies",void 0),r([i.observable.shallow],u.prototype,"registeredStarkentCurrencies",void 0),r([i.observable.shallow],u.prototype,"registeredBitcoinCurrencies",void 0),r([i.action],u.prototype,"setEmbeddedModularChainInfo",null),r([i.action],u.prototype,"addCurrencies",null),r([i.action],u.prototype,"removeCurrencies",null),r([i.computed],u.prototype,"cosmosCurrencyMap",null),r([i.computed],u.prototype,"starknetCurrencyMap",null),r([i.computed],u.prototype,"bitcoinCurrencyMap",null),t.ModularChainInfoImpl=u;class l{constructor(e){this._chainInfos=[],this._modularChainInfos=[],this._modularChainInfoImpls=[],this.currencyRegistrars=[],(0,i.makeObservable)(this),this.setEmbeddedChainInfos(e),(0,o.keepAlive)(this,"chainInfoMap"),(0,o.keepAlive)(this,"modularChainInfoMap")}get chainInfos(){return this._chainInfos}get modularChainInfos(){return this._modularChainInfos}get modularChainInfoImpls(){return this._modularChainInfoImpls}get chainInfoMap(){const e=new Map;for(const t of this._chainInfos)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getChain(e){const t=s.ChainIdHelper.parse(e),n=this.chainInfoMap.get(t.identifier);if(!n)throw new Error(`Unknown chain info: ${e}`);return n}hasChain(e){const t=s.ChainIdHelper.parse(e);return this.chainInfoMap.has(t.identifier)}get modularChainInfoMap(){const e=new Map;for(const t of this._modularChainInfos)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getModularChain(e){const t=s.ChainIdHelper.parse(e),n=this.modularChainInfoMap.get(t.identifier);if(!n)throw new Error(`Unknown modular chain info: ${e}`);return n}hasModularChain(e){const t=s.ChainIdHelper.parse(e);return this.modularChainInfoMap.has(t.identifier)}get modularChainInfoImplMap(){const e=new Map;for(const t of this._modularChainInfoImpls)e.set(s.ChainIdHelper.parse(t.chainId).identifier,t);return e}getModularChainInfoImpl(e){const t=s.ChainIdHelper.parse(e),n=this.modularChainInfoImplMap.get(t.identifier);if(!n)throw new Error(`Unknown modular chain info: ${e}`);return n}setEmbeddedChainInfos(e){this._chainInfos=e.filter((e=>"currencies"in e||"cosmos"in e)).map((e=>{if("cosmos"in e&&(e=e.cosmos),!("currencies"in e))throw new Error("Can't happen");const t=this.chainInfoMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return t?(t.setEmbeddedChainInfo(e),t):new d(e,this)})),this._modularChainInfos=e.map((e=>"currencies"in e?{chainId:e.chainId,chainName:e.chainName,chainSymbolImageUrl:e.chainSymbolImageUrl,cosmos:e}:e)),this._modularChainInfoImpls=e.map((e=>{const t="currencies"in e?{chainId:e.chainId,chainName:e.chainName,chainSymbolImageUrl:e.chainSymbolImageUrl,cosmos:e}:e,n=this.modularChainInfoImplMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return n?(n.setEmbeddedModularChainInfo(t),n):new u(t,this)}))}setEmbeddedChainInfosV2(e){this._chainInfos=e.chainInfos.map((e=>{const t=this.chainInfoMap.get(s.ChainIdHelper.parse(e.chainId).identifier);return t?(t.setEmbeddedChainInfo(e),t):new d(e,this)})),this._modularChainInfos=e.modulrChainInfos.map((t=>{if("currencies"in t){const n=e.chainInfos.find((e=>e.chainId===t.chainId));if(!n)throw new Error("Can't find cosmos chain info");return{chainId:n.chainId,chainName:n.chainName,chainSymbolImageUrl:n.chainSymbolImageUrl,cosmos:n}}return t})),this._modularChainInfoImpls=e.modulrChainInfos.map((t=>{const n=(()=>{if("currencies"in t){const n=e.chainInfos.find((e=>e.chainId===t.chainId));if(!n)throw new Error("Can't find cosmos chain info");return{chainId:n.chainId,chainName:n.chainName,chainSymbolImageUrl:n.chainSymbolImageUrl,cosmos:n}}return t})(),r=this.modularChainInfoImplMap.get(s.ChainIdHelper.parse(t.chainId).identifier);return r?(r.setEmbeddedModularChainInfo(n),r):new u(n,this)}))}getCurrencyRegistrar(e,t){for(let n=0;n<this.currencyRegistrars.length;n++){const r=(0,this.currencyRegistrars[n])(e,t);if(r)return r}}registerCurrencyRegistrar(e){this.currencyRegistrars.push(e)}isEvmChain(e){return null!=this.getChain(e).evm}isEvmOnlyChain(e){const t=e.split(":");return this.isEvmChain(e)&&2===t.length&&"eip155"===t[0]}}r([i.observable.ref],l.prototype,"_chainInfos",void 0),r([i.observable.ref],l.prototype,"_modularChainInfos",void 0),r([i.observable.ref],l.prototype,"_modularChainInfoImpls",void 0),r([i.observable],l.prototype,"currencyRegistrars",void 0),r([i.computed],l.prototype,"chainInfoMap",null),r([i.computed],l.prototype,"modularChainInfoMap",null),r([i.computed],l.prototype,"modularChainInfoImplMap",null),r([i.action],l.prototype,"setEmbeddedChainInfos",null),r([i.action],l.prototype,"setEmbeddedChainInfosV2",null),r([i.action],l.prototype,"registerCurrencyRegistrar",null),t.ChainStore=l},59324:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7901),t),i(n(49246),t)},7901:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5136:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(6074),t),i(n(77267),t),i(n(33354),t),i(n(4595),t),i(n(96180),t)},6074:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.HasMapStore=void 0;const i=n(80075);class s{constructor(e){this.creater=e,this.map=new Map,(0,i.makeObservable)(this)}get(e){if(!this.map.has(e)){const t=this.creater(e);(0,i.runInAction)((()=>{this.map.set(e,t)}))}return this.map.get(e)}has(e){return this.map.has(e)}}r([i.observable.shallow],s.prototype,"map",void 0),t.HasMapStore=s},96180:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStores=void 0,t.mergeStores=(e,t,...n)=>{for(let r=0;r<n.length;r++){const i=(0,n[r])(e,...t);for(const t of Object.keys(i)){if(e[t])throw new Error(`${t} is already merged`);e[t]=i[t]}}return e}},91044:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.QuerySharedContext=void 0;const i=n(89642),s=n(70223);t.QuerySharedContext=class{constructor(e,t){this.kvStore=e,this.options=t,this.multiGetStore="multiGet"in e?e:new i.WrapMultiGetKVStore(e),this.storeDebounceTimer=new s.DebounceActionTimer(0,(e=>r(this,void 0,void 0,(function*(){const t=Array.from(new Set(e.map((e=>e.args[0])))),n=yield this.multiGetStore.multiGet(t);return e.map((e=>({status:"fulfilled",value:n[e.args[0]]})))})))),this.handleResponseDebounceTimer=new s.DebounceActionTimer(this.options.responseDebounceMs,(e=>e.map((()=>({status:"fulfilled",value:void 0})))))}loadStore(e,t){return this.storeDebounceTimer.call([e],t)}handleResponse(e){return this.handleResponseDebounceTimer.call([],e)}saveResponse(e,t){return r(this,void 0,void 0,(function*(){yield this.kvStore.set(e,t)}))}}},77267:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28360),t),i(n(75261),t),i(n(91044),t)},75261:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableJsonRPCQueryMap=t.ObservableJsonRPCQuery=void 0;const s=n(28360),o=n(80075),a=n(34298),c=n(48834),d=n(6074),u=n(86693);class l extends s.ObservableQuery{constructor(e,t,n,r,i,s={}){super(e,t,n,s),this.method=r,this._params=i,(0,o.makeObservable)(this)}get params(){return this._params}setParams(e){this._params=e,this.fetch()}fetchResponse(e){return i(this,void 0,void 0,(function*(){const t=yield(0,u.simpleFetch)(this.baseURL,this.url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"1",method:this.method,params:this.params}),signal:e.signal});if(t.data.error&&t.data.error.message)throw new Error(t.data.error.message);if(!t.data.result)throw new Error("Unknown error");return{headers:t.headers,data:t.data.result}}))}getCacheKey(){const e=c.Buffer.from(a.Hash.sha256(c.Buffer.from(JSON.stringify(this.params))).slice(0,8)).toString("hex");return`${super.getCacheKey()}-${this.method}-${e}`}}r([o.observable.ref],l.prototype,"_params",void 0),r([o.action],l.prototype,"setParams",null),t.ObservableJsonRPCQuery=l;class h extends d.HasMapStore{constructor(e){super(e)}}t.ObservableJsonRPCQueryMap=h},28360:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryMap=t.ObservableQuery=t.defaultOptions=void 0;const s=n(80075),o=n(89642),a=n(6074),c=n(86693),d=n(48834);t.defaultOptions={cacheMaxAge:0,fetchingInterval:0};class u extends Error{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}}class l{constructor(){this.rejectors=[]}get hasCancelable(){return this.rejectors.length>0}cancel(e){for(;this.rejectors.length>0;){const t=this.rejectors.shift();t&&(t.reject(new u(e)),t.onCancel&&t.onCancel())}}callOrCanceledWithPromise(e,t){return new Promise(((n,r)=>{this.rejectors.push({reject:r,onCancel:t}),e.then((e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),n(e)}),(e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),r(e)}))}))}callOrCanceled(e,t){return new Promise(((n,r)=>{this.rejectors.push({reject:r,onCancel:t}),Promise.resolve().then((()=>{this.rejectors.find((e=>e.reject===r))&&e().then((e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),n(e)}),(e=>{const t=this.rejectors.findIndex((e=>e.reject===r));t>=0&&this.rejectors.splice(t,1),r(e)}))}))}))}}class h{constructor(){this.queue=[],this.isPendingPromise=!1}enqueue(e){this.queue.push(e),this.handleQueue()}handleQueue(){if(!this.isPendingPromise&&this.queue.length>0){const e=this.queue.shift();if(e){const t=e();"object"==typeof t&&"then"in t?(this.isPendingPromise=!0,t.then((()=>{this.isPendingPromise=!1,this.handleQueue()}))):this.handleQueue()}}}}class p{static guessResponseTruncated(e,t){return e&&"get"in e&&"function"==typeof e.get&&(e.get("content-type")||"").startsWith("application/json")&&t.startsWith("{")}constructor(e,n,r,i={}){this.sharedContext=e,this._response=void 0,this._isFetching=!1,this._error=void 0,this._isStarted=!1,this.stateQueue=new h,this.pendingOnStart=!1,this.observedCount=0,this.intervalId=void 0,this._url="",this.becomeObserved=()=>{0===this.observedCount&&this.start(),this.observedCount++},this.becomeUnobserved=()=>{this.observedCount--,0===this.observedCount&&this.stop()},this.intervalFetch=()=>{this.isFetching||this.fetch()},this.options=Object.assign(Object.assign({},t.defaultOptions),i),this.baseURL=n,this.queryCanceler=new l,(0,s.makeObservable)(this),this.setUrl(r),(0,s.onBecomeObserved)(this,"_response",this.becomeObserved),(0,s.onBecomeObserved)(this,"_isFetching",this.becomeObserved),(0,s.onBecomeObserved)(this,"_error",this.becomeObserved),(0,s.onBecomeUnobserved)(this,"_response",this.becomeUnobserved),(0,s.onBecomeUnobserved)(this,"_isFetching",this.becomeUnobserved),(0,s.onBecomeUnobserved)(this,"_error",this.becomeUnobserved)}get isObserved(){return this.observedCount>0}start(){this._isStarted||(this._isStarted=!0,this._isFetching=!0,this.pendingOnStart=!0,this.stateQueue.enqueue((()=>this.onStart())),this.stateQueue.enqueue((()=>{this.pendingOnStart=!1})),this.stateQueue.enqueue((()=>this.postStart())))}stop(){this._isStarted&&(this.isFetching&&this.queryCanceler.hasCancelable&&this.cancel(),this._isFetching=!1,null!=this.intervalId&&clearInterval(this.intervalId),this.intervalId=void 0,this.stateQueue.enqueue((()=>this.onStop())),this._isStarted=!1)}get isStarted(){return this._isStarted}postStart(){this.fetch(),this.options.fetchingInterval>0&&(this.intervalId=setInterval(this.intervalFetch,this.options.fetchingInterval))}onStart(){}onStop(){}canFetch(){return!0}get isFetching(){return this._isFetching}*fetch(){var e,t;if(!this.isStarted||this.pendingOnStart)return;if(!this.canFetch())return void(this._isFetching&&(this._isFetching=!1));if(this.isFetching&&this.queryCanceler.hasCancelable&&this.cancel("__fetching__proceed__next__"),this._response){if(this.options.cacheMaxAge>0&&this._response.timestamp>Date.now()-this.options.cacheMaxAge)return void(this._isFetching=!1);this._isFetching=!0,this.setResponse(Object.assign(Object.assign({},this._response),{staled:!0}))}else{this._isFetching=!0;let e=!1;const t=this.loadStabledResponse().then((t=>{e=t}));if(this.options.cacheMaxAge<=0);else if(yield t,e)return void(this._isFetching=!1)}const n=new AbortController;try{let e=!1,{data:t,headers:r}=yield*(0,o.toGenerator)(this.queryCanceler.callOrCanceled((()=>(e=!0,this.fetchResponse(n))),(()=>{e&&n.abort()})));if(t&&"string"==typeof t&&(t.startsWith("stream was reset:")||p.suspectedResponseDatasWithInvalidValue.includes(t)||p.guessResponseTruncated(r,t))){if(n.signal.aborted)return;console.log("There is an unknown problem to the response. Request one more time.");let e=!1;const i=yield*(0,o.toGenerator)(this.queryCanceler.callOrCanceled((()=>(e=!0,this.fetchResponse(n))),(()=>{e&&n.abort()})));if(t=i.data,r=i.headers,t&&"string"==typeof t){if(t.startsWith("stream was reset:")||p.suspectedResponseDatasWithInvalidValue.includes(t))throw new Error(t);if(p.guessResponseTruncated(r,t))throw new Error("The response data seems to be truncated")}}const i={data:t,staled:!1,local:!1,timestamp:Date.now()};this.saveResponse(i),this.onReceiveResponse(i),yield this.sharedContext.handleResponse((()=>{this.setResponse(i),this.setError(void 0),this._isFetching=!1}))}catch(n){let r=!1;if(n instanceof u)return void("__fetching__proceed__next__"===n.message&&(r=!0));if(n.response){let i=n.response.statusText;const s=n.response.headers&&n.response.headers.get("content-type")||"";s.startsWith("text/plain")&&"string"==typeof n.response.data&&(i=n.response.data),s.startsWith("application/json")&&(null===(e=n.response.data)||void 0===e?void 0:e.message)&&"string"==typeof(null===(t=n.response.data)||void 0===t?void 0:t.message)&&(i=n.response.data.message);const o={status:n.response.status,statusText:n.response.statusText,message:i,data:n.response.data};yield this.sharedContext.handleResponse((()=>{this.setError(o),r||(this._isFetching=!1)}))}else if(n.request){const e={status:0,statusText:"Failed to get response",message:"Failed to get response"};yield this.sharedContext.handleResponse((()=>{this.setError(e),r||(this._isFetching=!1)}))}else{const e={status:0,statusText:n.message,message:n.message,data:n};yield this.sharedContext.handleResponse((()=>{this.setError(e),r||(this._isFetching=!1)}))}}}get response(){return this._response}get error(){return this._error}loadStabledResponse(){return new Promise((e=>{this.sharedContext.loadStore(this.getCacheKey(),(t=>{if("rejected"===t.status)console.warn("Failed to get the last response from disk."),e(!1);else{const n=t.value;if(n&&!this._response&&(this.options.cacheMaxAge<=0||n.timestamp>Date.now()-this.options.cacheMaxAge)){const t=Object.assign(Object.assign({},n),{staled:!0,local:!0});return this.onReceiveResponse(t),this.setResponse(t),void e(!0)}e(!1)}}))}))}setResponse(e){this._response=e}setError(e){this._error=e}onReceiveResponse(e){}cancel(e){this.queryCanceler.cancel(e)}get url(){return this._url}setUrl(e){this._url!==e&&(this._url=e,this.fetch())}waitResponse(){if(this.response)return Promise.resolve(this.response);const e=[];let t=!1;return e.push((0,s.reaction)((()=>this.isFetching),(()=>{t||(this.isFetching||this.fetch(),t=!0)}),{fireImmediately:!0})),new Promise((t=>{const n=(0,s.autorun)((()=>{this.isFetching||t(this.response)}));e.push(n)})).finally((()=>{for(const t of e)t()}))}waitFreshResponse(){const e=[];let t=!1;return e.push((0,s.reaction)((()=>this.isFetching),(()=>{t||(this.isFetching||this.fetch(),t=!0)}),{fireImmediately:!0})),new Promise((t=>{const n=(0,s.autorun)((()=>{this.isFetching||t(this.response)}));e.push(n)})).finally((()=>{for(const t of e)t()}))}getCacheKey(){try{return(0,c.makeURL)(this.baseURL,this.url)}catch(e){console.log("Failed to make URL",this.baseURL,this.url,e);const t=new Uint8Array(32);return crypto.getRandomValues(t),d.Buffer.from(t).toString("hex")}}fetchResponse(e){return i(this,void 0,void 0,(function*(){const t=yield(0,c.simpleFetch)(this.baseURL,this.url,{signal:e.signal});return{headers:t.headers,data:t.data}}))}saveResponse(e){return i(this,void 0,void 0,(function*(){const t=this.getCacheKey();yield this.sharedContext.saveResponse(t,e)}))}}p.suspectedResponseDatasWithInvalidValue=["The network connection was lost.","The request timed out."],r([s.observable.ref],p.prototype,"_response",void 0),r([s.observable],p.prototype,"_isFetching",void 0),r([s.observable.ref],p.prototype,"_error",void 0),r([s.observable],p.prototype,"_isStarted",void 0),r([s.observable],p.prototype,"baseURL",void 0),r([s.observable],p.prototype,"_url",void 0),r([s.action],p.prototype,"start",null),r([s.action],p.prototype,"stop",null),r([s.flow],p.prototype,"fetch",null),r([s.action],p.prototype,"setResponse",null),r([s.action],p.prototype,"setError",null),r([s.action],p.prototype,"setUrl",null),t.ObservableQuery=p;class f extends a.HasMapStore{constructor(e){super(e)}}t.ObservableQueryMap=f},4595:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},33354:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoreUtils=void 0;const r=n(19731);class i{static toCoinPretties(e,t){const n=[];for(const i of t){const t=e.findCurrency(i.denom);if(t){const e=new r.Dec(i.amount);e.truncate().gt(new r.Int(0))&&n.push(new r.CoinPretty(t,e))}}return n}static getBalancesFromCurrencies(e,t){const n=[];for(const i of t){const t=e[i.denom];if(t){const e=new r.Dec(i.amount);e.truncate().gt(new r.Int(0))&&n.push(new r.CoinPretty(t,e))}}return n}static getBalanceFromCurrency(e,t){const n=i.getBalancesFromCurrencies({[e.coinMinimalDenom]:e},t);return 1===n.length?n[0]:new r.CoinPretty(e,new r.Int(0)).ready(!1)}}t.StoreUtils=i},11169:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5177),t),i(n(5136),t),i(n(48338),t),i(n(42369),t),i(n(59324),t),i(n(96312),t),i(n(32262),t)},38878:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LSMCurrencyRegistrar=void 0;const s=n(80075),o=n(89642),a=n(94531),c=n(97021);class d{constructor(e,t=864e5,n,r){this.kvStore=e,this.cacheDuration=t,this.chainStore=n,this.queriesStore=r,this.lsmDenomCacheData=new Map,this.isInitialized=!1,this.chainStore.registerCurrencyRegistrar(this.lsmCurrencyRegistrar.bind(this)),(0,s.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e="cache-lsm-denom-data",t=yield this.kvStore.get(e);t&&(0,s.runInAction)((()=>{for(const[e,n]of Object.entries(t))Date.now()-n.timestamp<this.cacheDuration&&this.lsmDenomCacheData.set(e,n)})),(0,s.autorun)((()=>{const t=(0,s.toJS)(this.lsmDenomCacheData),n=Object.fromEntries(t);this.kvStore.set(e,n)})),(0,s.runInAction)((()=>{this.isInitialized=!0}))}))}lsmCurrencyRegistrar(e,t){var n;if(!this.chainStore.hasChain(e))return;if("native"!==new o.DenomHelper(t).type)return;const r=this.chainStore.getChain(e);if(!r.stakeCurrency)return;if(!r.bech32Config||!t.startsWith(r.bech32Config.bech32PrefixValAddr))return;const i=t.indexOf("/");if(i<0)return;const d=t.slice(0,i);try{a.Bech32Address.validate(d,null===(n=r.bech32Config)||void 0===n?void 0:n.bech32PrefixValAddr)}catch(e){return}const u=parseInt(t.slice(i+1));if(u.toString()!==t.slice(i+1))return;const l=this.queriesStore.get(e),h=(()=>{const n=this.lsmDenomCacheData.get(`${a.ChainIdHelper.parse(e).identifier}/${t}`);if(n&&Date.now()-n.timestamp<this.cacheDuration)return{moniker:n.moniker,thumbnail:n.thumbnail,isFetching:!1,fromCache:!0};const r=[l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Bonded),l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Unbonded),l.cosmos.queryValidators.getQueryStatus(c.BondStatus.Unbonding)];for(const e of r){const t=e.getValidator(d),n=e.getQueryValidatorThumbnail(d);if(t)return{moniker:t.description.moniker,thumbnail:n&&n.thumbnail?n.thumbnail:void 0,isFetching:e.isFetching||!!n&&n.isFetching,fromCache:!1};if(e.isFetching)return}})();return h?(h.fromCache||h.isFetching||(0,s.runInAction)((()=>{this.lsmDenomCacheData.set(`${a.ChainIdHelper.parse(e).identifier}/${t}`,{moniker:h.moniker,thumbnail:h.thumbnail,timestamp:Date.now()})})),{value:{coinMinimalDenom:t,coinDenom:`${(()=>{if(h.moniker){let e=h.moniker;return e.length>=10&&(e=e.slice(0,7)+"..."),e}return"Unknown"})()}/${u}`,coinDecimals:r.stakeCurrency.coinDecimals,coinImageUrl:h.thumbnail||void 0},done:!h.isFetching}):{value:void 0,done:!1}}}r([s.observable.shallow],d.prototype,"lsmDenomCacheData",void 0),r([s.observable],d.prototype,"isInitialized",void 0),t.LSMCurrencyRegistrar=d},96312:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38878),t)},48338:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinGeckoPriceStore=void 0;const o=n(5136),a=n(19731),c=s(n(39714)),d=n(80075),u=n(86693);class l{constructor(e){this.duration=e,this.fns=[],this.callback=()=>{null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.fns.length>0&&((0,this.fns[this.fns.length-1])(),this.fns=[])}}call(e){this.duration<=0?e():(this.fns.push(e),null!=this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.callback,this.duration))}}class h{constructor(e,t,n=0){if(this.array=[],this.map={},this.restored={},this.isRestored=!1,this.storeKey="",!t)throw new Error("Empty store key");this.kvStore=e,this.storeKey=t,this.throttler=new l(n)}has(e){return!0===this.map[e]}add(...e){let t=!1,n=[];for(const r of e)this.isRestored&&this.restored[r]&&(t=!0,delete this.restored[r]),this.has(r)||n.push(r);if(0===n.length)return this.isRestored&&t&&this.throttler.call((()=>this.save())),!1;n=[...new Set(n)];for(const e of n)this.map[e]=!0;let r=this.array.slice().concat(n);return r=r.sort(((e,t)=>e<t?-1:1)),this.array=r,this.isRestored&&this.throttler.call((()=>this.save())),!0}get values(){return this.array.slice()}save(){return i(this,void 0,void 0,(function*(){yield this.kvStore.set(this.storeKey,this.array.filter((e=>!this.restored[e])))}))}restore(){return i(this,void 0,void 0,(function*(){const e=yield this.kvStore.get(this.storeKey);if(e){for(const t of e)this.restored[t]=!0;for(const e of this.array)this.restored[e]&&delete this.restored[e];this.add(...e)}this.isRestored=!0}))}}class p extends o.ObservableQuery{constructor(e,t,n,r={}){var i;super(new o.QuerySharedContext(e,{responseDebounceMs:0}),r.baseURL||"https://api.coingecko.com/api/v3",r.uri||"/simple/price"),this.kvStore=e,this._optionUri=r.uri||"/simple/price",this._isInitialized=!1;const s=null!==(i=r.throttleDuration)&&void 0!==i?i:250;this._coinIds=new h(e,"__coin_ids",s),this._vsCurrencies=new h(e,"__vs_currencies",s),this._defaultVsCurrency=n,this._supportedVsCurrencies=t,this._throttler=new l(s),(0,d.makeObservable)(this),this.init()}onStart(){return super.onStart(),this.waitUntilInitialized()}init(){return i(this,void 0,void 0,(function*(){this._isInitialized||(yield this.loadStabledResponse(),yield Promise.all([this._coinIds.restore(),this._vsCurrencies.restore()]),this._coinIds.save(),this._vsCurrencies.save(),this.updateURL([],[],!0),this._isInitialized=!0)}))}waitUntilInitialized(){return i(this,void 0,void 0,(function*(){if(!this.isInitialized)return new Promise((e=>{const t=(0,d.autorun)((()=>{this.isInitialized&&(e(),t&&t())}))}))}))}get isInitialized(){return this._isInitialized}get defaultVsCurrency(){return this._defaultVsCurrency}setDefaultVsCurrency(e){this._defaultVsCurrency=e}get supportedVsCurrencies(){return this._supportedVsCurrencies}getFiatCurrency(e){return this._supportedVsCurrencies[e]}canFetch(){return this._coinIds.values.length>0&&this._vsCurrencies.values.length>0}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return i(this,void 0,void 0,(function*(){const{data:n,headers:r}=yield t.fetchResponse.call(this,e);return{headers:r,data:(0,c.default)(this.response?this.response.data:{},n)}}))}updateURL(e,t,n=!1){const r=this._coinIds.add(...e),i=this._vsCurrencies.add(...t,"usd");if(r||i||n){const e=`${this._optionUri}?ids=${this._coinIds.values.join(",")}&vs_currencies=${this._vsCurrencies.values.join(",")}`;this._isInitialized?this._throttler.call((()=>this.setUrl(e))):this.setUrl(e)}}getCacheKey(){return(0,u.makeURL)(this.baseURL,this._optionUri)}getPrice(e,t){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return;if(this.updateURL([e],[t]),!this.response)return;const n=this.response.data[e];return n?n[t]:void 0}calculatePrice(e,t){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=this.getPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}waitPrice(e,t){var n,r;return i(this,void 0,void 0,(function*(){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return Promise.resolve(void 0);if((null===(n=this.response)||void 0===n?void 0:n.data[e])&&this.response.data[e][t])return Promise.resolve(this.response.data[e][t]);this.updateURL([e],[t]),yield this.waitResponse();const i=null===(r=this.response)||void 0===r?void 0:r.data[e];return i?i[t]:void 0}))}waitFreshPrice(e,t){var n;return i(this,void 0,void 0,(function*(){if(t||(t=this.defaultVsCurrency),!this.supportedVsCurrencies[t])return Promise.resolve(void 0);this.updateURL([e],[t]),yield this.waitFreshResponse();const r=null===(n=this.response)||void 0===n?void 0:n.data[e];return r?r[t]:void 0}))}waitCalculatePrice(e,t){return i(this,void 0,void 0,(function*(){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=yield this.waitPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}))}waitFreshCalculatePrice(e,t){return i(this,void 0,void 0,(function*(){if(!e.currency.coinGeckoId)return;t||(t=this.defaultVsCurrency);const n=this.supportedVsCurrencies[t];if(!n)return;if(e.toDec().isZero())return new a.PricePretty(n,0);const r=yield this.waitFreshPrice(e.currency.coinGeckoId,t);if(void 0===r)return new a.PricePretty(n,new a.Int(0)).ready(!1);const i=e.toDec(),s=new a.Dec(r.toString());return new a.PricePretty(n,i.mul(s))}))}}r([d.observable],p.prototype,"_defaultVsCurrency",void 0),r([d.action],p.prototype,"setDefaultVsCurrency",null),t.CoinGeckoPriceStore=p},69081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBoardAux=void 0;const r=n(80075),i=n(27932);class s extends i.ObservableChainQuery{constructor(e,t,n,i){super(e,t,n,`/agoric/vstorage/data/published.boardAux.${i}`),(0,r.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}class o extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new s(this.sharedContext,this.chainId,this.chainGetter,e)))}getBoardAux(e){return this.get(e)}}t.ObservableQueryBoardAux=o},95081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBrands=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/agoric/vstorage/data/published.agoricNames.brand"),(0,i.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}t.ObservableQueryBrands=s},4957:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(46655),t)},46655:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AgoricQueriesImpl=t.AgoricQueries=void 0;const r=n(69081),i=n(95081),s=n(28468);t.AgoricQueries={use:()=>(e,t,n,r)=>({agoric:new o(e,t,n,r)})};class o{constructor(e,t,n,o){this.queryBoardAux=new r.ObservableQueryBoardAux(t,n,o),this.queryBrands=new i.ObservableQueryBrands(t,n,o),this.queryVbankAssets=new s.ObservableQueryVbankAssets(t,n,o)}}t.AgoricQueriesImpl=o},28468:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryVbankAssets=void 0;const r=n(80075),i=n(27932);class s extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/agoric/vstorage/data/published.agoricNames.vbankAsset"),(0,r.makeObservable)(this)}get data(){if(!this.response)return;const{value:e}=this.response.data,t=JSON.parse(e),n="values"in t?t.values[t.values.length-1]:t;return JSON.parse(n)}}t.ObservableQueryVbankAssets=s},75074:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(10463),t)},10463:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBabylonLastEpochMsgs=t.ObservableQueryBabylonLastEpochMsgsInner=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/babylon/epoching/v1/epochs:latest/messages?epoch_count=1"),(0,s.makeObservable)(this)}get msgs(){return this.response&&this.response.data.latest_epoch_msgs?this.response.data.latest_epoch_msgs[0].msgs:[]}}r([s.computed],o.prototype,"msgs",null),t.ObservableQueryBabylonLastEpochMsgsInner=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(()=>new o(this.sharedContext,this.chainId,this.chainGetter)))}getQuery(){return this.get("babylon-last-epoch-msgs")}}t.ObservableQueryBabylonLastEpochMsgs=a},37738:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(11081),t),i(n(75074),t)},11081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BabylonQueriesImpl=t.BabylonQueries=void 0;const r=n(75074);t.BabylonQueries={use:()=>(e,t,n,r)=>({babylon:new i(e,t,n,r)})};class i{constructor(e,t,n,i){this.queryLastEpochMsgs=new r.ObservableQueryBabylonLastEpochMsgs(t,n,i)}}t.BabylonQueriesImpl=i},51787:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBalances=t.ObservableQueryBalancesImplMap=void 0;const i=n(89642),s=n(80075),o=n(19731),a=n(5136),c=n(58242);class d{constructor(e,t,n,r,i){this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.balanceRegistries=r,this.balanceImplMap=new Map,this.getBalanceFromCurrency=(0,c.computedFn)((e=>{const t=this.balances.find((t=>t.currency.coinMinimalDenom===e.coinMinimalDenom));return t?t.balance:new o.CoinPretty(e,new o.Int(0))})),this.getBalance=(0,c.computedFn)((e=>{const t=this.balances.find((t=>t.currency.coinMinimalDenom===e.coinMinimalDenom));if(t)return t})),(0,s.makeObservable)(this),this.address=i}fetch(){this.balanceImplMap.forEach((e=>e.fetch()))}getBalanceInner(e){let t=e.coinMinimalDenom;return"type"in e&&"secret20"===e.type&&(t=e.coinMinimalDenom+"/"+e.viewingKey),this.balanceImplMap.has(t)||(0,s.runInAction)((()=>{this.balanceRegistries.forEach((n=>{const r=n.getBalanceImpl(this.chainId,this.chainGetter,this.address,e.coinMinimalDenom);r&&this.balanceImplMap.set(t,r)}))})),this.balanceImplMap.get(t)}get stakable(){const e=this.chainGetter.getChain(this.chainId);if(e.stakeCurrency)return this.getBalanceInner(e.stakeCurrency)}get balances(){const e=this.chainGetter.getChain(this.chainId),t=[];for(let n=0;n<e.currencies.length;n++){const r=e.currencies[n],i=this.getBalanceInner(r);i&&t.push(i)}return t}get positiveBalances(){return this.balances.filter((e=>e.balance.toDec().gt(new o.Dec(0))))}get nonNativeBalances(){return this.balances.filter((e=>"native"!==new i.DenomHelper(e.currency.coinMinimalDenom).type))}get positiveNativeUnstakables(){const e=this.chainGetter.getChain(this.chainId);return this.balances.filter((t=>{var n;return"native"===new i.DenomHelper(t.currency.coinMinimalDenom).type&&t.balance.toDec().gt(new o.Dec(0))&&t.currency.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}))}get unstakables(){const e=this.chainGetter.getChain(this.chainId),t=e.currencies.filter((t=>{var n;return t.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)})),n=[];for(let e=0;e<t.length;e++){const r=t[e],i=this.getBalanceInner(r);i&&n.push(i)}return n}}r([s.observable.shallow],d.prototype,"balanceImplMap",void 0),r([s.computed],d.prototype,"stakable",null),r([s.computed],d.prototype,"balances",null),r([s.computed],d.prototype,"positiveBalances",null),r([s.computed],d.prototype,"nonNativeBalances",null),r([s.computed],d.prototype,"positiveNativeUnstakables",null),r([s.computed],d.prototype,"unstakables",null),t.ObservableQueryBalancesImplMap=d;class u extends a.HasMapStore{constructor(e,t,n){super((e=>new d(this.sharedContext,this.chainId,this.chainGetter,this.balanceRegistries,e))),this.sharedContext=e,this.chainId=t,this.chainGetter=n,this.balanceRegistries=[]}addBalanceRegistry(e){this.balanceRegistries.push(e)}getQueryBech32Address(e){return this.get(e)}getQueryEthereumHexAddress(e){return this.get(e)}}t.ObservableQueryBalances=u},27932:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableChainQueryMap=t.ObservableChainQuery=void 0;const r=n(5136),i=n(5136);class s extends r.ObservableQuery{constructor(e,t,n,r){super(e,n.getChain(t).rest,r),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableChainQuery=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableChainQueryMap=o},80008:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableChainQueryRPCMap=t.ObservableChainQueryRPC=void 0;const r=n(5136),i=n(5136);class s extends r.ObservableQuery{constructor(e,t,n,r){super(e,n.getChain(t).rpc,r),this._chainId=t,this.chainGetter=n}get chainId(){return this._chainId}}t.ObservableChainQueryRPC=s;class o extends i.HasMapStore{constructor(e,t,n,r){super(r),this.sharedContext=e,this.chainId=t,this.chainGetter=n}}t.ObservableChainQueryRPCMap=o},57428:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAccount=t.ObservableQueryAccountInner=void 0;const i=n(27932),s=n(80075),o=n(94531);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/auth/v1beta1/accounts/${r}`),this.bech32Address=r,(0,s.makeObservable)(this)}canFetch(){return this.bech32Address.length>0}get sequence(){if(!this.response)return"0";try{return o.BaseAccount.fromProtoJSON(this.response.data,this.bech32Address).getSequence().toString()}catch(e){return"0"}}get isVestingAccount(){var e;return!!this.response&&!!(null===(e=this.response.data)||void 0===e?void 0:e.account.base_vesting_account)}}r([s.computed],a.prototype,"sequence",null),r([s.computed],a.prototype,"isVestingAccount",null),t.ObservableQueryAccountInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryAccount=c},21239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},19682:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryAuthZGranter=t.ObservableQueryAuthZGranterInner=void 0;const r=n(27932);class i extends r.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/authz/v1beta1/grants/granter/${r}?pagination.limit=1000`),this.granter=r}canFetch(){return this.granter.length>0}}t.ObservableQueryAuthZGranterInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new i(this.sharedContext,this.chainId,this.chainGetter,e)))}getGranter(e){return this.get(e)}}t.ObservableQueryAuthZGranter=s},22756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7104:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCosmosBalanceRegistry=t.ObservableQueryCosmosBalancesImpl=t.ObservableQueryCosmosBalancesImplParent=void 0;const s=n(89642),o=n(5136),a=n(80075),c=n(19731),d=n(27932),u=n(94531);class l extends d.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/bank/v1beta1/balances/${r}?pagination.limit=1000`),this.bech32Address=r,(0,a.makeObservable)(this)}canFetch(){return this.bech32Address.length>0}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.balances.map((e=>e.denom));t.addUnknownDenoms(...n)}}t.ObservableQueryCosmosBalancesImplParent=l;class h{constructor(e,t,n,r){this.parent=e,this.chainId=t,this.chainGetter=n,this.denomHelper=r,(0,a.makeObservable)(this)}get balance(){const e=this.currency;return this.response?o.StoreUtils.getBalanceFromCurrency(e,this.response.data.balances):new c.CoinPretty(e,new c.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}get error(){return this.parent.error}get isFetching(){return this.parent.isFetching}get isObserved(){return this.parent.isObserved}get isStarted(){return this.parent.isStarted}get response(){return this.parent.response}fetch(){return this.parent.duplicatedFetchResolver||(this.parent.duplicatedFetchResolver=new Promise(((e,t)=>{(()=>{i(this,void 0,void 0,(function*(){try{yield this.parent.fetch(),this.parent.duplicatedFetchResolver=void 0,e()}catch(e){this.parent.duplicatedFetchResolver=void 0,t(e)}}))})()}))),this.parent.duplicatedFetchResolver}waitFreshResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitFreshResponse()}))}waitResponse(){return i(this,void 0,void 0,(function*(){return yield this.parent.waitResponse()}))}}r([a.computed],h.prototype,"balance",null),r([a.computed],h.prototype,"currency",null),t.ObservableQueryCosmosBalancesImpl=h,t.ObservableQueryCosmosBalanceRegistry=class{constructor(e){this.sharedContext=e,this.parentMap=new Map}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r);if("native"!==i.type)return;try{u.Bech32Address.validate(n)}catch(e){return}const o=`${e}/${n}`;return this.parentMap.has(o)||this.parentMap.set(o,new l(this.sharedContext,e,t,n)),new h(this.parentMap.get(o),e,t,i)}}},24789:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7104),t),i(n(87228),t)},87228:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySpendableBalances=t.ObservableChainQuerySpendableBalances=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/bank/v1beta1/spendable_balances/${r}`)}get balances(){if(!this.response)return[];const e=[],t=this.chainGetter.getChain(this.chainId);for(const n of this.response.data.balances){const r=t.findCurrency(n.denom);r&&e.push(new s.CoinPretty(r,n.amount))}return e}}r([o.computed],a.prototype,"balances",null),t.ObservableChainQuerySpendableBalances=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQuerySpendableBalances=c},9109:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},73453:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(66598),t)},66598:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDistributionParams=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/cosmos/distribution/v1beta1/params"),(0,s.makeObservable)(this)}get communityTax(){return this.response?new o.RatePretty(this.response.data.params.community_tax):new o.RatePretty(0)}}r([s.computed],a.prototype,"communityTax",null),t.ObservableQueryDistributionParams=a},36513:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryFeeMarketGasPrices=void 0;const r=n(27932),i=n(80075),s=n(19731);class o extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/feemarket/v1/gas_prices"),(0,i.makeObservable)(this)}get gasPrices(){return this.response&&this.response.data.prices?this.response.data.prices.map((e=>({denom:e.denom,amount:new s.Dec(e.amount)}))):[]}}t.ObservableQueryFeeMarketGasPrices=o},41909:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryIBCChannel=t.ObservableChainQueryIBCChannel=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/ibc/core/channel/v1beta1/channels/${i}/ports/${r}`),this.portId=r,this.channelId=i}onStart(){super.onStart(),this.disposer=(0,i.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("ibc-go")&&this.setUrl(`/ibc/core/channel/v1/channels/${this.channelId}/ports/${this.portId}`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}}t.ObservableChainQueryIBCChannel=s;class o extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=JSON.parse(e);return new s(this.sharedContext,this.chainId,this.chainGetter,t.portId,t.channelId)}))}getTransferChannel(e){return this.getChannel("transfer",e)}getChannel(e,t){const n=JSON.stringify({portId:e,channelId:t});return this.get(n)}}t.ObservableQueryIBCChannel=o},59375:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryIBCClientStateV2=t.ObservableChainQueryClientStateV2=void 0;const i=n(27932),s=n(80075),o=n(48834);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/ibc/core/client/v1/client_states/${r}`),this.channelId=r}get clientChainId(){if(this.response)try{const e=o.Buffer.from(this.response.data.client_state.data,"base64").toString(),t=JSON.parse(e);if(t.chain_id)return t.chain_id}catch(e){return void console.log(e)}}}r([s.computed],a.prototype,"clientChainId",null),t.ObservableChainQueryClientStateV2=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getClientState(e){return this.get(e)}}t.ObservableQueryIBCClientStateV2=c},56864:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryIBCClientState=t.ObservableChainQueryClientState=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,`/ibc/core/channel/v1beta1/channels/${i}/ports/${r}/client_state`),this.portId=r,this.channelId=i}onStart(){super.onStart(),this.disposer=(0,s.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("ibc-go")&&this.setUrl(`/ibc/core/channel/v1/channels/${this.channelId}/ports/${this.portId}/client_state`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}get clientChainId(){var e,t;if(this.response)return null===(t=null===(e=this.response.data.identified_client_state)||void 0===e?void 0:e.client_state)||void 0===t?void 0:t.chain_id}}r([s.computed],o.prototype,"clientChainId",null),t.ObservableChainQueryClientState=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=JSON.parse(e);return new o(this.sharedContext,this.chainId,this.chainGetter,t.portId,t.channelId)}))}getClientStateOnTransferPort(e){return this.getClientState("transfer",e)}getClientState(e,t){const n=JSON.stringify({portId:e,channelId:t});return this.get(n)}}t.ObservableQueryIBCClientState=a},62595:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDenomTrace=t.ObservableChainQueryDenomTrace=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/ibc/applications/transfer/v1beta1/denom_traces/${r}`),this.hash=r}onStart(){super.onStart(),this.disposer=(0,s.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&(e.features.includes("ibc-v2")?this.setUrl(`/ibc/apps/transfer/v1/denoms/${this.hash}`):e.features.includes("ibc-go")&&this.setUrl(`/ibc/apps/transfer/v1/denom_traces/${this.hash}`))}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}get paths(){if(!this.response)return[];if("denom"in this.response.data)return this.response.data.denom.trace.map((e=>({portId:e.port_id,channelId:e.channel_id})));const e=this.response.data.denom_trace.path.split("/");if(e.length%2!=0)return console.log("Failed to parse paths",e),[];const t=[];for(let n=0;n<e.length;n+=2)t.push(e.slice(n,n+2));const n=this.response.data.denom_trace.base_denom.split("/");if(n.length%2==1)for(let e=0;e<n.length;e+=2)"transfer"===n[e]&&e+1<n.length&&t.push(n.slice(e,e+2));return t.map((e=>({portId:e[0],channelId:e[1]})))}get denom(){if(!this.response)return;if("denom"in this.response.data)return this.response.data.denom.base;const e=this.response.data.denom_trace.base_denom.split("/");if(e.length%2==1){for(let t=0;t<e.length;t+=2)"transfer"===e[t]&&t+1<e.length&&(e.shift(),e.shift());if(1===e.length&&e[0])return e[0]}return this.response.data.denom_trace.base_denom}get denomTrace(){if(this.response&&this.denom)return{denom:this.denom,paths:this.paths}}}r([s.computed],o.prototype,"paths",null),r([s.computed],o.prototype,"denomTrace",null),t.ObservableChainQueryDenomTrace=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getDenomTrace(e){return this.get(e)}}t.ObservableQueryDenomTrace=a},94222:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(41909),t),i(n(56864),t),i(n(62595),t)},44213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},18247:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthZ=t.Balance=t.IBC=t.Account=t.Staking=void 0,s(n(81918),t),s(n(57428),t),s(n(94222),t),s(n(24789),t),s(n(19682),t),t.Staking=o(n(97021)),t.Account=o(n(21239)),t.IBC=o(n(44213)),t.Balance=o(n(9109)),t.AuthZ=o(n(22756)),s(n(92775),t)},92775:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CosmosQueriesImpl=t.CosmosQueries=void 0;const r=n(57428),i=n(81918),s=n(94222),o=n(24789),a=n(73453),c=n(37527),d=n(19682),u=n(36513),l=n(59375),h=n(95245),p=n(14814),f=n(16539);t.CosmosQueries={use:()=>(e,t,n,r)=>({cosmos:new g(e,t,n,r)})};class g{constructor(e,t,n,g){this.queryRPCStatus=new c.ObservableQueryRPCStatus(t,n,g),e.queryBalances.addBalanceRegistry(new o.ObservableQueryCosmosBalanceRegistry(t)),this.queryAccount=new r.ObservableQueryAccount(t,n,g),this.querySpendableBalances=new o.ObservableQuerySpendableBalances(t,n,g),this.queryPool=new i.ObservableQueryStakingPool(t,n,g),this.queryStakingParams=new i.ObservableQueryStakingParams(t,n,g),this.queryDistributionParams=new a.ObservableQueryDistributionParams(t,n,g),this.queryRewards=new i.ObservableQueryRewards(t,n,g),this.queryDelegations=new i.ObservableQueryDelegations(t,n,g),this.queryInitiaDelegations=new p.ObservableQueryInitiaDelegations(t,n,g),this.queryUnbondingDelegations=new i.ObservableQueryUnbondingDelegations(t,n,g),this.queryInitiaUnbondingDelegations=new h.ObservableQueryInitiaUnbondingDelegations(t,n,g),this.queryValidators=new i.ObservableQueryValidators(t,n,g),this.queryBabylonBtcDelegationReward=new i.ObservableQueryBabylonBtcDelegationReward(t,n,g),this.queryInitiaValidators=new f.ObservableQueryInitiaValidators(t,n,g),this.queryIBCClientState=new s.ObservableQueryIBCClientState(t,n,g),this.queryIBCClientStateV2=new l.ObservableQueryIBCClientStateV2(t,n,g),this.queryIBCChannel=new s.ObservableQueryIBCChannel(t,n,g),this.queryIBCDenomTrace=new s.ObservableQueryDenomTrace(t,n,g),this.queryAuthZGranter=new d.ObservableQueryAuthZGranter(t,n,g),this.queryFeeMarketGasPrices=new u.ObservableQueryFeeMarketGasPrices(t,n,g)}}t.CosmosQueriesImpl=g},2906:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBabylonBtcDelegationReward=t.ObservableQueryBabylonBtcDelegationRewardInner=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/babylon/incentive/address/${r}/reward_gauge`),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return this.bech32Address.length>0||null!=this.chainGetter.getChain(this.chainId).stakeCurrency}get claimable(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);const t=this.response.data.reward_gauges.BTC_STAKER,n=t.coins.find((t=>t.denom===e.coinMinimalDenom)),r=t.withdrawn_coins.find((t=>t.denom===e.coinMinimalDenom));if(!n||!r)return new s.CoinPretty(e,new s.Int(0)).ready(!1);const i=new s.Int(n.amount).sub(new s.Int(r.amount));return new s.CoinPretty(e,i)}}r([o.computed],a.prototype,"claimable",null),t.ObservableQueryBabylonBtcDelegationRewardInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryBabylonBtcDelegationReward=c},44322:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryDelegations=t.ObservableQueryDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075),a=n(58242);class c extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/staking/v1beta1/delegations/${r}?pagination.limit=1000`),this.getDelegationTo=(0,a.computedFn)((e=>{const t=this.delegations,n=this.chainGetter.getChain(this.chainId).stakeCurrency;if(n){if(!this.response)return new s.CoinPretty(n,new s.Int(0)).ready(!1);for(const r of t)if(r.delegation.validator_address===e)return new s.CoinPretty(n,new s.Int(r.balance.amount));return new s.CoinPretty(n,new s.Int(0))}})),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return this.bech32Address.length>0||null!=this.chainGetter.getChain(this.chainId).stakeCurrency}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.delegation_responses){const n=new s.Int(e.balance.amount);n.gt(new s.Int(0))&&(t=t.add(n))}return new s.CoinPretty(e,t)}get delegationBalances(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return[];const t=[];for(const n of this.response.data.delegation_responses){const r=new s.CoinPretty(e,new s.Int(n.balance.amount));r.toDec().gt(new s.Dec(0))&&t.push({validatorAddress:n.delegation.validator_address,balance:r})}return t}get delegations(){return this.response?this.response.data.delegation_responses.filter((e=>new s.Int(e.balance.amount).gt(new s.Int(0)))):[]}}r([o.computed],c.prototype,"total",null),r([o.computed],c.prototype,"delegationBalances",null),r([o.computed],c.prototype,"delegations",null),t.ObservableQueryDelegationsInner=c;class d extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new c(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryDelegations=d},61767:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENDPOINT_BY_CHAIN_ID=void 0,t.ENDPOINT_BY_CHAIN_ID={"interwoven-1":{pool:"/initia/mstaking/v1/pool",params:"/initia/mstaking/v1/params",validators:"/initia/mstaking/v1/validators"}}},81918:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44322),t),i(n(55121),t),i(n(88115),t),i(n(4741),t),i(n(43780),t),i(n(66979),t),i(n(2906),t)},14814:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryInitiaDelegations=t.ObservableQueryInitiaDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075),a=n(58242);class c extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/initia/mstaking/v1/delegations/${r}`),this.getDelegationTo=(0,a.computedFn)((e=>{const t=this.delegations,n=this.chainGetter.getChain(this.chainId).stakeCurrency;if(n){if(!this.response)return new s.CoinPretty(n,new s.Int(0)).ready(!1);for(const r of t)if(r.delegation.validator_address===e)return new s.CoinPretty(n,new s.Int(r.balance.amount));return new s.CoinPretty(n,new s.Int(0))}})),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return this.bech32Address.length>0||null!=this.chainGetter.getChain(this.chainId).stakeCurrency}getAmountFromBalanceArray(e){var t,n;const r=null===(t=this.chainGetter.getChain(this.chainId).stakeCurrency)||void 0===t?void 0:t.coinMinimalDenom;if(!r)return"0";const i=e.find((e=>e.denom===r));return null!==(n=null==i?void 0:i.amount)&&void 0!==n?n:"0"}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.delegation_responses){const n=this.getAmountFromBalanceArray(e.balance),r=new s.Int(n);r.gt(new s.Int(0))&&(t=t.add(r))}return new s.CoinPretty(e,t)}get delegationBalances(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return[];const t=[];for(const n of this.response.data.delegation_responses){const r=this.getAmountFromBalanceArray(n.balance),i=new s.CoinPretty(e,new s.Int(r));i.toDec().gt(new s.Dec(0))&&t.push({validatorAddress:n.delegation.validator_address,balance:i})}return t}get delegations(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;return this.response.data.delegation_responses.filter((e=>{const t=this.getAmountFromBalanceArray(e.balance);return new s.Int(t).gt(new s.Int(0))})).map((t=>Object.assign(Object.assign({},t),{balance:{denom:null==e?void 0:e.coinMinimalDenom,amount:this.getAmountFromBalanceArray(t.balance)}})))}}r([o.computed],c.prototype,"total",null),r([o.computed],c.prototype,"delegationBalances",null),r([o.computed],c.prototype,"delegations",null),t.ObservableQueryInitiaDelegationsInner=c;class d extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new c(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryInitiaDelegations=d},95245:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryInitiaUnbondingDelegations=t.ObservableQueryInitiaUnbondingDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/initia/mstaking/v1/delegators/${r}/unbonding_delegations?pagination.limit=1000`),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&this.bech32Address.length>0}getAmountFromBalanceArray(e){var t,n;const r=null===(t=this.chainGetter.getChain(this.chainId).stakeCurrency)||void 0===t?void 0:t.coinMinimalDenom;if(!r)return"0";const i=e.find((e=>e.denom===r));return null!==(n=null==i?void 0:i.amount)&&void 0!==n?n:"0"}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.unbonding_responses)for(const n of e.entries){const e=this.getAmountFromBalanceArray(n.balance),r=new s.Int(e);r.gt(new s.Int(0))&&(t=t.add(r))}return new s.CoinPretty(e,t)}get unbondingBalances(){const e=this.unbondings,t=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!t)return[];const n=[];for(const r of e){const e=[];for(const n of r.entries){const r=new s.CoinPretty(t,new s.Int(n.balance));r.toDec().gt(new s.Dec(0))&&e.push({creationHeight:new s.Int(n.creation_height),completionTime:n.completion_time,balance:r})}e.length>0&&n.push({validatorAddress:r.validator_address,entries:e})}return n}get unbondings(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;return this.response.data.unbonding_responses.map((t=>{const n=t.entries.filter((t=>t.balance.some((t=>t.denom===(null==e?void 0:e.coinMinimalDenom))))).map((e=>Object.assign(Object.assign({},e),{balance:this.getAmountFromBalanceArray(e.balance)})));return Object.assign(Object.assign({},t),{entries:n})}))}}r([o.computed],a.prototype,"total",null),r([o.computed],a.prototype,"unbondingBalances",null),r([o.computed],a.prototype,"unbondings",null),t.ObservableQueryInitiaUnbondingDelegationsInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryInitiaUnbondingDelegations=c},16539:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryInitiaValidators=t.ObservableQueryInitiaValidatorsInner=void 0;const i=n(19731),s=n(80075),o=n(58242),a=n(97021),c=n(4741),d=n(27932);class u extends d.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/initia/mstaking/v1/validators?pagination.limit=1000&status=${(()=>{switch(r){case a.BondStatus.Bonded:return"BOND_STATUS_BONDED";case a.BondStatus.Unbonded:return"BOND_STATUS_UNBONDED";case a.BondStatus.Unbonding:return"BOND_STATUS_UNBONDING";default:return"BOND_STATUS_UNSPECIFIED"}})()}`),this.thumbnailMap=new Map,this.getValidator=(0,o.computedFn)((e=>this.validators.find((t=>t.operator_address===e)))),this.getValidatorThumbnail=(0,o.computedFn)((e=>{const t=this.getQueryValidatorThumbnail(e);return t?t.thumbnail:""})),this.getQueryValidatorThumbnail=(0,o.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;if(!t.description.identity)return;const n=t.description.identity;return this.thumbnailMap.has(n)||(0,s.runInAction)((()=>{this.thumbnailMap.set(n,new c.ObservableQueryValidatorThumbnail(this.sharedContext,t))})),this.thumbnailMap.get(n)})),this.getValidatorShare=(0,o.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;const n=this.chainGetter.getChain(this.chainId).stakeCurrency;return n?new i.CoinPretty(n,t.tokens):void 0})),(0,s.makeObservable)(this)}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&super.canFetch()}get validators(){if(!this.response)return[];const e=this.chainGetter.getChain(this.chainId).stakeCurrency;return e?this.response.data.validators.map((t=>{var n,r;return Object.assign(Object.assign({},t),{tokens:null!==(r=null===(n=t.tokens.find((t=>t.denom===e.coinMinimalDenom)))||void 0===n?void 0:n.amount)&&void 0!==r?r:"0",delegator_shares:t.voting_power})})):[]}get validatorsSortedByVotingPower(){return this.validators.sort(((e,t)=>new i.Dec(e.tokens).gt(new i.Dec(t.tokens))?-1:1))}}r([s.observable.shallow],u.prototype,"thumbnailMap",void 0),r([s.computed],u.prototype,"validators",null),r([s.computed],u.prototype,"validatorsSortedByVotingPower",null),t.ObservableQueryInitiaValidatorsInner=u;class l extends d.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new u(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryStatus(e=a.BondStatus.Bonded){return this.get(e)}}t.ObservableQueryInitiaValidators=l},66979:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStakingParams=void 0;const i=n(27932),s=n(80075),o=n(61767);class a extends i.ObservableChainQuery{constructor(e,t,n){var r,i;super(e,t,n,null!==(i=null===(r=o.ENDPOINT_BY_CHAIN_ID[t])||void 0===r?void 0:r.params)&&void 0!==i?i:"/cosmos/staking/v1beta1/params"),(0,s.makeObservable)(this)}get unbondingTimeSec(){return this.response?parseInt(this.response.data.params.unbonding_time.replace("s","")):0}get maxValidators(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.max_validators)&&void 0!==t?t:0}get maxEntries(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.max_entries)&&void 0!==t?t:0}get historicalEntries(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.historical_entries)&&void 0!==t?t:0}get bondDenom(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.params.bond_denom)&&void 0!==t?t:""}}r([s.computed],a.prototype,"unbondingTimeSec",null),t.ObservableQueryStakingParams=a},43780:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryStakingPool=void 0;const i=n(27932),s=n(80075),o=n(19731),a=n(61767);class c extends i.ObservableChainQuery{constructor(e,t,n){var r,i;super(e,t,n,null!==(i=null===(r=a.ENDPOINT_BY_CHAIN_ID[t])||void 0===r?void 0:r.pool)&&void 0!==i?i:"/cosmos/staking/v1beta1/pool"),(0,s.makeObservable)(this)}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&super.canFetch()}get notBondedTokens(){var e;const t=this.chainGetter.getChain(this.chainId);if(!t.stakeCurrency)return;if(!this.response)return new o.CoinPretty(t.stakeCurrency,0);const n=Array.isArray(this.response.data.pool.not_bonded_tokens)?(null===(e=this.response.data.pool.not_bonded_tokens.find((e=>{var n;return e.denom===(null===(n=t.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)})))||void 0===e?void 0:e.amount)||"0":this.response.data.pool.not_bonded_tokens;return new o.CoinPretty(t.stakeCurrency,n)}get bondedTokens(){var e;const t=this.chainGetter.getChain(this.chainId);if(!t.stakeCurrency)return;if(!this.response)return new o.CoinPretty(t.stakeCurrency,0);const n=Array.isArray(this.response.data.pool.bonded_tokens)?(null===(e=this.response.data.pool.bonded_tokens.find((e=>{var n;return e.denom===(null===(n=t.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)})))||void 0===e?void 0:e.amount)||"0":this.response.data.pool.bonded_tokens;return new o.CoinPretty(t.stakeCurrency,n)}}r([s.computed],c.prototype,"notBondedTokens",null),r([s.computed],c.prototype,"bondedTokens",null),t.ObservableQueryStakingPool=c},55121:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryRewards=t.ObservableQueryRewardsInner=void 0;const i=n(27932),s=n(80075),o=n(19731),a=n(5136),c=n(58242);class d extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/distribution/v1beta1/delegators/${r}/rewards`),this.getRewardsOf=(0,c.computedFn)((e=>{var t,n;const r=this.chainGetter.getChain(this.chainId),i=null===(n=null===(t=this.response)||void 0===t?void 0:t.data.rewards)||void 0===n?void 0:n.find((t=>t.validator_address===e));if(!i||!i.reward)return[];const s=new Map;for(const e of i.reward){const t=new o.Dec(e.amount).truncate();if(!t.gt(new o.Int(0)))continue;const n=s.get(e.denom);n?n.amount=new o.Int(n.amount).add(t).toString():s.set(e.denom,{denom:e.denom,amount:t.toString()})}return a.StoreUtils.toCoinPretties(r,Array.from(s.values()))})),this.getStakableRewardOf=(0,c.computedFn)((e=>{const t=this.chainGetter.getChain(this.chainId);if(!t.stakeCurrency)return;const n=this.getRewardsOf(e).find((e=>{var n;return e.currency.coinMinimalDenom===(null===(n=t.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}));return null!=n?n:new o.CoinPretty(t.stakeCurrency,new o.Int(0))})),this.getUnstakableRewardsOf=(0,c.computedFn)((e=>this.getRewardsOf(e).filter((e=>{var t;return e.currency.coinMinimalDenom!==(null===(t=this.chainGetter.getChain(this.chainId).stakeCurrency)||void 0===t?void 0:t.coinMinimalDenom)})))),this.getDescendingPendingRewardValidatorAddresses=(0,c.computedFn)((e=>{var t,n;if(!this.response)return[];const r=this.chainGetter.getChain(this.chainId);if(!r.stakeCurrency)return[];const i=null!==(n=null===(t=this.response.data.rewards)||void 0===t?void 0:t.slice())&&void 0!==n?n:[];return i.sort(((e,t)=>{var n,i;const s=a.StoreUtils.getBalanceFromCurrency(r.stakeCurrency,null!==(n=e.reward)&&void 0!==n?n:[]),o=a.StoreUtils.getBalanceFromCurrency(r.stakeCurrency,null!==(i=t.reward)&&void 0!==i?i:[]);return s.toDec().gt(o.toDec())?-1:1})),i.filter((e=>{if(e.reward)for(const t of e.reward)if(new o.Dec(t.amount).truncate().gt(new o.Int(0)))return!0;return!1})).slice(0,e).map((e=>e.validator_address))})),(0,s.makeObservable)(this),this.bech32Address=r}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&this.bech32Address.length>0}get rewards(){var e;const t=this.chainGetter.getChain(this.chainId);if(!this.response||!this.response.data.rewards)return[];const n=new Map;for(const t of this.response.data.rewards)for(const r of null!==(e=t.reward)&&void 0!==e?e:[]){const e=new o.Dec(r.amount).truncate();if(!e.gt(new o.Int(0)))continue;const t=n.get(r.denom);t?t.amount=new o.Int(t.amount).add(e).toString():n.set(r.denom,{denom:r.denom,amount:e.toString()})}return a.StoreUtils.toCoinPretties(t,Array.from(n.values()))}get stakableReward(){const e=this.chainGetter.getChain(this.chainId);if(!e.stakeCurrency)return;const t=this.rewards.find((t=>{var n;return t.currency.coinMinimalDenom===(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}));return null!=t?t:new o.CoinPretty(e.stakeCurrency,new o.Int(0))}get unstakableRewards(){const e=this.chainGetter.getChain(this.chainId);return this.rewards.filter((t=>{var n;return t.currency.coinMinimalDenom!==(null===(n=e.stakeCurrency)||void 0===n?void 0:n.coinMinimalDenom)}))}get pendingRewardValidatorAddresses(){var e;if(!this.response)return[];const t=[];for(const n of null!==(e=this.response.data.rewards)&&void 0!==e?e:[])if(n.reward)for(const e of n.reward)if(new o.Dec(e.amount).truncate().gt(new o.Int(0))){t.push(n.validator_address);break}return t}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.total.map((e=>e.denom));t.addUnknownDenoms(...n)}}r([s.computed],d.prototype,"rewards",null),r([s.computed],d.prototype,"stakableReward",null),r([s.computed],d.prototype,"unstakableRewards",null),r([s.computed],d.prototype,"pendingRewardValidatorAddresses",null),t.ObservableQueryRewardsInner=d;class u extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new d(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryRewards=u},97021:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BondStatus=void 0,(n=t.BondStatus||(t.BondStatus={})).Unbonded="Unbonded",n.Unbonding="Unbonding",n.Bonded="Bonded",n.Unspecified="Unspecified"},88115:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryUnbondingDelegations=t.ObservableQueryUnbondingDelegationsInner=void 0;const i=n(27932),s=n(19731),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/cosmos/staking/v1beta1/delegators/${r}/unbonding_delegations?pagination.limit=1000`),(0,o.makeObservable)(this),this.bech32Address=r}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&this.bech32Address.length>0}get total(){const e=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!e)return;if(!this.response)return new s.CoinPretty(e,new s.Int(0)).ready(!1);let t=new s.Int(0);for(const e of this.response.data.unbonding_responses)for(const n of e.entries){const e=new s.Int(n.balance);e.gt(new s.Int(0))&&(t=t.add(e))}return new s.CoinPretty(e,t)}get unbondingBalances(){const e=this.unbondings,t=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!t)return[];const n=[];for(const r of e){const e=[];for(const n of r.entries){const r=new s.CoinPretty(t,new s.Int(n.balance));r.toDec().gt(new s.Dec(0))&&e.push({creationHeight:new s.Int(n.creation_height),completionTime:n.completion_time,balance:r})}e.length>0&&n.push({validatorAddress:r.validator_address,entries:e})}return n}get unbondings(){if(!this.response)return[];const e=[];for(const t of this.response.data.unbonding_responses){const n=Object.assign({},t);n.entries=n.entries.filter((e=>new s.Int(e.balance).gt(new s.Int(0)))),e.push(n)}return e}}r([o.computed],a.prototype,"total",null),r([o.computed],a.prototype,"unbondingBalances",null),r([o.computed],a.prototype,"unbondings",null),t.ObservableQueryUnbondingDelegationsInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryUnbondingDelegations=c},4741:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryValidators=t.ObservableQueryValidatorsInner=t.ObservableQueryValidatorThumbnail=void 0;const o=n(27932),a=n(97021),c=n(80075),d=n(5136),u=s(n(10978)),l=n(19731),h=n(58242),p=n(61767);class f extends d.ObservableQuery{constructor(e,t){super(e,"https://keybase.io/",`_/api/1.0/user/lookup.json?fields=pictures&key_suffix=${t.description.identity}`),(0,c.makeObservable)(this),this.validator=t}canFetch(){return""!==this.validator.description.identity}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return i(this,void 0,void 0,(function*(){return yield f.fetchingThumbnailQueue.add((()=>t.fetchResponse.call(this,e)))}))}get thumbnail(){var e,t,n,r;return 0===(null===(e=this.response)||void 0===e?void 0:e.data.status.code)&&this.response.data.them&&this.response.data.them.length>0&&null!==(r=null===(n=null===(t=this.response.data.them[0].pictures)||void 0===t?void 0:t.primary)||void 0===n?void 0:n.url)&&void 0!==r?r:""}}f.fetchingThumbnailQueue=new u.default({concurrency:3}),r([c.computed],f.prototype,"thumbnail",null),t.ObservableQueryValidatorThumbnail=f;class g extends o.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,r),this.thumbnailMap=new Map,this.getValidator=(0,h.computedFn)((e=>this.validators.find((t=>t.operator_address===e)))),this.getValidatorThumbnail=(0,h.computedFn)((e=>{const t=this.getQueryValidatorThumbnail(e);return t?t.thumbnail:""})),this.getQueryValidatorThumbnail=(0,h.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;if(!t.description.identity)return;const n=t.description.identity;return this.thumbnailMap.has(n)||(0,c.runInAction)((()=>{this.thumbnailMap.set(n,new f(this.sharedContext,t))})),this.thumbnailMap.get(n)})),this.getValidatorShare=(0,h.computedFn)((e=>{const t=this.validators.find((t=>t.operator_address===e));if(!t)return;const n=this.chainGetter.getChain(this.chainId).stakeCurrency;if(!n)return;const r=new l.Dec(t.tokens).truncate();return new l.CoinPretty(n,r)})),(0,c.makeObservable)(this)}canFetch(){return!!this.chainGetter.getChain(this.chainId).stakeCurrency&&super.canFetch()}get validators(){return this.response?this.response.data.validators:[]}get validatorsSortedByVotingPower(){return this.validators.sort(((e,t)=>new l.Dec(e.tokens).gt(new l.Dec(t.tokens))?-1:1))}}r([c.observable.shallow],g.prototype,"thumbnailMap",void 0),r([c.computed],g.prototype,"validators",null),r([c.computed],g.prototype,"validatorsSortedByVotingPower",null),t.ObservableQueryValidatorsInner=g;class m extends o.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new g(this.sharedContext,this.chainId,this.chainGetter,(e=>{var n,r;return(null!==(r=null===(n=p.ENDPOINT_BY_CHAIN_ID[t])||void 0===n?void 0:n.validators)&&void 0!==r?r:"/cosmos/staking/v1beta1/validators")+`?pagination.limit=1000&status=${(()=>{switch(e){case a.BondStatus.Bonded:return"BOND_STATUS_BONDED";case a.BondStatus.Unbonded:return"BOND_STATUS_UNBONDED";case a.BondStatus.Unbonding:return"BOND_STATUS_UNBONDING";default:return"BOND_STATUS_UNSPECIFIED"}})()}`})(e))))}getQueryStatus(e=a.BondStatus.Bonded){return this.get(e)}}t.ObservableQueryValidators=m},37527:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryRPCStatus=void 0;const r=n(80008),i=n(19731);class s extends r.ObservableChainQueryRPC{constructor(e,t,n){super(e,t,n,"/status")}get network(){if(this.response)return"result"in this.response.data?this.response.data.result.node_info.network:this.response.data.node_info.network}get latestBlockHeight(){if(this.response)return"result"in this.response.data?new i.Int(this.response.data.result.sync_info.latest_block_height):new i.Int(this.response.data.sync_info.latest_block_height)}}t.ObservableQueryRPCStatus=s},79970:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableCosmwasmContractChainQuery=void 0;const i=n(27932),s=n(48834),o=n(80075);class a extends i.ObservableChainQuery{constructor(e,t,n,r,i){super(e,t,n,a.getUrlFromObj(r,i)),this.contractAddress=r,this.obj=i}onStart(){super.onStart(),this.disposer=(0,o.autorun)((()=>{const e=this.chainGetter.getChain(this.chainId);e.features&&e.features.includes("wasmd_0.24+")?this.url.startsWith("/wasm/v1/")&&this.setUrl(`/cosmwasm${this.url}`):this.url.startsWith("/cosmwasm/")&&this.setUrl(`${this.url.replace("/cosmwasm","")}`)}))}onStop(){this.disposer&&(this.disposer(),this.disposer=void 0),super.onStop()}static getUrlFromObj(e,t){const n=JSON.stringify(t);return`/wasm/v1/contract/${e}/smart/${s.Buffer.from(n).toString("base64")}`}canFetch(){return 0!==this.contractAddress.length}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});return r(this,void 0,void 0,(function*(){const{data:n,headers:r}=yield t.fetchResponse.call(this,e),i=n;if(!i)throw new Error("Failed to get the response from the contract");return{headers:r,data:i.data}}))}}t.ObservableCosmwasmContractChainQuery=a},16182:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCw20BalanceRegistry=t.ObservableQueryCw20BalanceImpl=void 0;const i=n(80075),s=n(89642),o=n(19731),a=n(79970);class c extends a.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r,i){if("cw20"!==r.type)throw new Error(`Denom helper must be cw20: ${r.denom}`);super(e,t,n,r.contractAddress,{balance:{address:i}}),this.denomHelper=r,this.bech32Address=i}canFetch(){return super.canFetch()&&""!==this.bech32Address}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).currencies.find((t=>t.coinMinimalDenom===e));if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data.balance?new o.CoinPretty(t,new o.Int(this.response.data.balance)):new o.CoinPretty(t,new o.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([i.computed],c.prototype,"balance",null),r([i.computed],c.prototype,"currency",null),t.ObservableQueryCw20BalanceImpl=c,t.ObservableQueryCw20BalanceRegistry=class{constructor(e){this.sharedContext=e}getBalanceImpl(e,t,n,r){const i=new s.DenomHelper(r);if("cw20"===i.type)return new c(this.sharedContext,e,t,i,n)}}},84996:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryCw20ContractInfo=t.ObservableQueryCw20ContactInfoInner=void 0;const i=n(27932),s=n(80075),o=n(79970);class a extends o.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r){super(e,t,n,r,{token_info:{}})}get tokenInfo(){if(this.response&&this.response.data)return this.response.data}}r([s.computed],a.prototype,"tokenInfo",null),t.ObservableQueryCw20ContactInfoInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryContract(e){return this.get(e)}}t.ObservableQueryCw20ContractInfo=c},82043:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CosmWasm=void 0,s(n(16182),t),t.CosmWasm=o(n(97019)),s(n(26173),t),s(n(76431),t),s(n(2027),t)},2027:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNeutronStakingRewardsConfig=void 0;const i=n(80075),s=n(79970);class o extends s.ObservableCosmwasmContractChainQuery{constructor(e,t,n){super(e,t,n,o.NEUTRON_REWARDS_CONTRACT_ADDRESS,{config:{}}),(0,i.makeObservable)(this)}canFetch(){return super.canFetch()}get config(){var e,t;return(null===(e=this.response)||void 0===e?void 0:e.data)?null===(t=this.response)||void 0===t?void 0:t.data:{owner:"",dao_address:"",staking_info_proxy:"",annual_reward_rate_bps:0,blocks_per_year:0,staking_denom:""}}}o.NEUTRON_REWARDS_CONTRACT_ADDRESS="neutron1gqq3c735pj6ese3yru5xr6ud0fvxgltxesygvyyzpsrt74v6yg4sgkrgwq",r([i.computed],o.prototype,"config",null),t.ObservableQueryNeutronStakingRewardsConfig=o},76431:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNeutronStakingRewards=void 0;const i=n(19731),s=n(79970),o=n(27932),a=n(80075);class c extends s.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r){super(e,t,n,c.NEUTRON_REWARDS_CONTRACT_ADDRESS,{rewards:{user:r}}),this.bech32Address=r}canFetch(){return super.canFetch()&&""!==this.bech32Address}get pendingReward(){var e,t;if(!(null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.pending_rewards)){const e=this.chainGetter.getChain(this.chainId),t=e.stakeCurrency||e.currencies[0];return new i.CoinPretty(t,new i.Int(0)).ready(!1)}const n=this.response.data.pending_rewards;if(!n.denom||!n.amount){const e=this.chainGetter.getChain(this.chainId),t=e.stakeCurrency||e.currencies[0];return new i.CoinPretty(t,new i.Int(0)).ready(!1)}const r=this.chainGetter.getChain(this.chainId).forceFindCurrency(n.denom);return new i.CoinPretty(r,new i.Int(n.amount)).ready(!this.isFetching)}get rewardCurrency(){var e,t;if(!(null===(t=null===(e=this.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.pending_rewards))return;const n=this.response.data.pending_rewards;return n.denom&&n.amount?this.chainGetter.getChain(this.chainId).findCurrency(n.denom):void 0}}c.NEUTRON_REWARDS_CONTRACT_ADDRESS="neutron1gqq3c735pj6ese3yru5xr6ud0fvxgltxesygvyyzpsrt74v6yg4sgkrgwq",r([a.computed],c.prototype,"pendingReward",null),r([a.computed],c.prototype,"rewardCurrency",null);class d extends o.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new c(this.sharedContext,this.chainId,this.chainGetter,e)))}getRewardFor(e){return this.get(e)}}t.ObservableQueryNeutronStakingRewards=d},26173:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CosmwasmQueriesImpl=t.CosmwasmQueries=void 0;const r=n(84996),i=n(16182),s=n(76431),o=n(2027);t.CosmwasmQueries={use:()=>(e,t,n,r)=>({cosmwasm:new a(e,t,n,r)})};class a{constructor(e,t,n,a){e.queryBalances.addBalanceRegistry(new i.ObservableQueryCw20BalanceRegistry(t)),this.querycw20ContractInfo=new r.ObservableQueryCw20ContractInfo(t,n,a),this.queryNeutronStakingRewards=new s.ObservableQueryNeutronStakingRewards(t,n,a),this.queryNeutronStakingRewardsConfig=new o.ObservableQueryNeutronStakingRewardsConfig(t,n,a)}}t.CosmwasmQueriesImpl=a},97019:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14097:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ICNS=void 0,s(n(55195),t),s(n(94989),t),t.ICNS=o(n(82887))},55195:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryICNSNames=t.ObservableQueryICNSNamesInner=void 0;const i=n(79970),s=n(80075),o=n(27932);class a extends i.ObservableCosmwasmContractChainQuery{constructor(e,t,n,r,i){super(e,t,n,r,{icns_names:{address:i}}),this.address=i}canFetch(){return""!==this.address}get primaryName(){return this.response&&this.response.data?this.response.data.primary_name:""}get names(){return this.response&&this.response.data?this.response.data.names:[]}}r([s.computed],a.prototype,"primaryName",null),r([s.computed],a.prototype,"names",null),t.ObservableQueryICNSNamesInner=a;class c extends o.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const t=e.split("/");return new a(this.sharedContext,this.chainId,this.chainGetter,t[0],t[1])}))}getQueryContract(e,t){return this.get(`${e}/${t}`)}}t.ObservableQueryICNSNames=c},94989:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICNSQueriesImpl=t.ICNSQueries=void 0;const r=n(55195);t.ICNSQueries={use:()=>(e,t,n,r)=>({icns:new i(e,t,n,r)})};class i{constructor(e,t,n,i){this.queryICNSNames=new r.ObservableQueryICNSNames(t,n,i)}}t.ICNSQueriesImpl=i},82887:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},42369:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(44513),t),i(n(27932),t),i(n(51787),t),i(n(4957),t),i(n(18247),t),i(n(82043),t),i(n(64585),t),i(n(7312),t),i(n(14097),t),i(n(92105),t),i(n(37738),t)},92105:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57201),t),i(n(29633),t)},29633:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NobleQueriesImpl=t.NobleQueries=void 0;const r=n(57201),i=n(41585);t.NobleQueries={use:()=>(e,t,n,r)=>({noble:new s(e,t,n,r)})};class s{constructor(e,t,n,s){this.querySwapRates=new r.ObservableQueryNobleSwapRates(t,n,s),this.querySwapPools=new r.ObservableQueryNobleSwapPools(t,n,s),this.querySwapSimulateSwap=new r.ObservableQueryNobleSwapSimulateSwap(t,n,s),this.queryYield=new i.ObservableQueryNobleYield(t,n,s)}}t.NobleQueriesImpl=s},57201:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(34131),t),i(n(92939),t),i(n(43267),t),i(n(18041),t)},92939:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNobleSwapPools=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/noble/swap/v1/pools"),(0,s.makeObservable)(this)}get pools(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.pools)&&void 0!==t?t:[]}}r([s.computed],o.prototype,"pools",null),t.ObservableQueryNobleSwapPools=o},34131:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNobleSwapRates=t.ObservableQueryNobleSwapRatesInner=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/noble/swap/v1/rates/${r}`),(0,s.makeObservable)(this)}get rates(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.rates)&&void 0!==t?t:[]}}r([s.computed],o.prototype,"rates",null),t.ObservableQueryNobleSwapRatesInner=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryCoinMinimalDenom(e){return this.get(e)}}t.ObservableQueryNobleSwapRates=a},43267:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNobleSwapSimulateSwap=t.ObservableQueryNobleSwapSimulateSwapInner=void 0;const s=n(27932),o=n(80075),a=n(19731),c=n(86693);class d extends s.ObservableChainQuery{constructor(e,t,n,r,i,s,a){super(e,t,n,"/noble/swap/v1/simulate_swap"),this.signer=r,this.amount=i,this.routes=s,this.min=a,(0,o.makeObservable)(this)}fetchResponse(e){return i(this,void 0,void 0,(function*(){const t=yield(0,c.simpleFetch)(this.baseURL,this.url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({signer:this.signer,amount:this.amount,routes:this.routes,min:this.min}),signal:e.signal});return{headers:t.headers,data:t.data}}))}getCacheKey(){return`${super.getCacheKey()}-${JSON.stringify({signer:this.signer,amount:this.amount,routes:this.routes,min:this.min})}`}get simulatedOutAmount(){if(this.response)return new a.CoinPretty(this.chainGetter.getChain(this.chainId).forceFindCurrency(this.response.data.result.denom),this.response.data.result.amount)}}r([o.computed],d.prototype,"simulatedOutAmount",null),t.ObservableQueryNobleSwapSimulateSwapInner=d;class u extends s.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>{const{signer:t,amount:n,routes:r,min:i}=JSON.parse(e);return new d(this.sharedContext,this.chainId,this.chainGetter,t,n,r,i)}))}getQuery(e,t,n,r){return this.get(JSON.stringify({signer:e,amount:t,routes:n,min:r}))}}t.ObservableQueryNobleSwapSimulateSwap=u},18041:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},41585:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53914),t)},53914:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryNobleYield=t.ObservableQueryNobleYieldInner=void 0;const i=n(27932),s=n(80075);class o extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/noble/dollar/v1/yield/${r}`),(0,s.makeObservable)(this)}get claimableAmount(){return this.response&&this.response.data.claimable_amount?this.response.data.claimable_amount:"0"}}r([s.computed],o.prototype,"claimableAmount",null),t.ObservableQueryNobleYieldInner=o;class a extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new o(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryBech32Address(e){return this.get(e)}}t.ObservableQueryNobleYield=a},13445:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryBaseFee=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/cur_eip_base_fee"),(0,s.makeObservable)(this)}get baseFeeAmount(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.base_fee)&&void 0!==t?t:""}get baseFee(){var e;if(null===(e=this.response)||void 0===e?void 0:e.data.base_fee)return new o.Dec(this.response.data.base_fee)}}r([s.computed],a.prototype,"baseFee",null),t.ObservableQueryBaseFee=a},45157:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7312:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFee=t.TxFeesBaseDenom=t.TxFeesSpotPriceByDenom=t.TxFeesFeeTokens=void 0,s(n(23171),t),s(n(17220),t),s(n(49135),t),s(n(13445),t),t.TxFeesFeeTokens=o(n(819)),t.TxFeesSpotPriceByDenom=o(n(20956)),t.TxFeesBaseDenom=o(n(30847)),t.BaseFee=o(n(45157)),s(n(47418),t)},47418:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OsmosisQueriesImpl=t.OsmosisQueries=void 0;const r=n(23171),i=n(17220),s=n(49135),o=n(13445);t.OsmosisQueries={use:()=>(e,t,n,r)=>({osmosis:new a(e,t,n,r)})};class a{constructor(e,t,n,a){this.queryTxFeesFeeTokens=new r.ObservableQueryTxFeesFeeTokens(t,n,a),this.queryTxFeesSpotPriceByDenom=new i.ObservableQueryTxFeesSpotPriceByDenom(t,n,a),this.queryTxFeesBaseDenom=new s.ObservableQueryTxFeesBaseDenom(t,n,a),this.queryBaseFee=new o.ObservableQueryBaseFee(t,n,a)}}t.OsmosisQueriesImpl=a},49135:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesBaseDenom=void 0;const r=n(27932),i=n(80075);class s extends r.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/base_denom"),(0,i.makeObservable)(this)}get baseDenom(){var e,t;return null!==(t=null===(e=this.response)||void 0===e?void 0:e.data.base_denom)&&void 0!==t?t:""}}t.ObservableQueryTxFeesBaseDenom=s},30847:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},23171:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesFeeTokens=void 0;const i=n(27932),s=n(80075),o=n(58242);class a extends i.ObservableChainQuery{constructor(e,t,n){super(e,t,n,"/osmosis/txfees/v1beta1/fee_tokens"),this.isTxFeeToken=(0,o.computedFn)((e=>!!this.response&&!0===this.feeCurrenciesDenomMap.get(e))),(0,s.makeObservable)(this)}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.chainGetter.getChain(this.chainId),n=e.data.fee_tokens.map((e=>e.denom));t.addUnknownDenoms(...n)}get feeCurrenciesDenomMap(){const e=new Map;if(!this.response)return e;for(const t of this.response.data.fee_tokens)e.set(t.denom,!0);return e}get feeCurrencies(){if(!this.response)return[];const e=[],t=this.chainGetter.getChain(this.chainId);for(const n of this.response.data.fee_tokens){const r=t.findCurrency(n.denom);r&&e.push(r)}return e}}r([s.computed],a.prototype,"feeCurrenciesDenomMap",null),r([s.computed],a.prototype,"feeCurrencies",null),t.ObservableQueryTxFeesFeeTokens=a},819:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},17220:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQueryTxFeesSpotPriceByDenom=t.ObservableQueryTxFeesSpotPriceByDenomInner=void 0;const i=n(27932),s=n(80075),o=n(19731);class a extends i.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`osmosis/txfees/v1beta1/spot_price_by_denom?denom=${r}`),(0,s.makeObservable)(this)}get poolId(){return this.response?this.response.data.poolID:""}get spotPriceDec(){return this.response?new o.Dec(this.response.data.spot_price):new o.Dec(0)}}r([s.computed],a.prototype,"spotPriceDec",null),t.ObservableQueryTxFeesSpotPriceByDenomInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryDenom(e){return this.get(e)}}t.ObservableQueryTxFeesSpotPriceByDenom=c},20956:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},44513:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.QueriesStore=t.createQueriesSetBase=void 0;const i=n(80075),s=n(51787),o=n(5136),a=n(14532);t.createQueriesSetBase=(e,t,n)=>({queryBalances:new s.ObservableQueryBalances(e,t,n)});class c{constructor(e,t,n,...r){var s;this.kvStore=e,this.chainGetter=t,this.options=n,this.queriesMap=new Map,this.sharedContext=new o.QuerySharedContext(e,{responseDebounceMs:null!==(s=this.options.responseDebounceMs)&&void 0!==s?s:0}),this.queriesCreators=r,this.simpleQuery=new a.ObservableSimpleQuery(this.sharedContext),(0,i.makeObservable)(this)}get(e){if(!this.queriesMap.has(e)){const n=(0,t.createQueriesSetBase)(this.sharedContext,e,this.chainGetter);(0,i.runInAction)((()=>{const t=(0,o.mergeStores)(n,[this.sharedContext,e,this.chainGetter],...this.queriesCreators);this.queriesMap.set(e,t)}))}return this.queriesMap.get(e)}}r([i.observable.shallow],c.prototype,"queriesMap",void 0),t.QueriesStore=c},79468:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecretContractCodeHash=t.ObservableQuerySecretContractCodeHashInner=void 0;const r=n(27932);class i extends r.ObservableChainQuery{constructor(e,t,n,r){super(e,t,n,`/compute/v1beta1/code_hash/by_contract_address/${r}`),this.contractAddress=r}canFetch(){return this.contractAddress.length>0}}t.ObservableQuerySecretContractCodeHashInner=i;class s extends r.ObservableChainQueryMap{constructor(e,t,n){super(e,t,n,(e=>new i(this.sharedContext,this.chainId,this.chainGetter,e)))}getQueryContract(e){return this.get(e)}}t.ObservableQuerySecretContractCodeHash=s},87274:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSecretContractChainQuery=void 0;const s=n(27932),o=n(89642),a=n(80075),c=n(48834),d=n(86693);class u extends s.ObservableChainQuery{constructor(e,t,n,r,i,s,o){super(e,t,n,""),this.apiGetter=r,this.contractAddress=i,this.obj=s,this.querySecretContractCodeHash=o,this.keplr=void 0,this._isIniting=!1,(0,a.makeObservable)(this)}onStart(){const e=Object.create(null,{onStart:{get:()=>super.onStart}});return i(this,void 0,void 0,(function*(){if(e.onStart.call(this),this.keplr||(yield this.initKeplr()),!this.keplr)throw new Error("Failed to get keplr");yield this.querySecretContractCodeHash.getQueryContract(this.contractAddress).waitResponse(),yield this.init()}))}get isFetching(){return this.querySecretContractCodeHash.getQueryContract(this.contractAddress).isFetching||null==this.keplr||this._isIniting||super.isFetching}canFetch(){return!!this.querySecretContractCodeHash.getQueryContract(this.contractAddress).response&&0!==this.contractAddress.length&&null!=this.nonce}*initKeplr(){this.keplr=yield*(0,o.toGenerator)(this.apiGetter())}*init(){if(this._isIniting=!0,this.keplr&&this.contractCodeHash){const e=this.keplr.getEnigmaUtils(this.chainId),t=yield*(0,o.toGenerator)(e.encrypt(this.contractCodeHash,this.obj));this.nonce=t.slice(0,32);const n=c.Buffer.from(t).toString("base64");this.setUrl(this.getSecretWasmUrl(this.contractAddress,n))}this._isIniting=!1}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});var n,r;return i(this,void 0,void 0,(function*(){let i,s;try{const n=yield t.fetchResponse.call(this,e);i=n.data,s=n.headers}catch(e){if(null===(r=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.error){const t=e.response.data.error,n=/rpc error: code = (.+) = encrypted: (.+): (.+)/g.exec(t);if(null!=n&&4===n.length){const e=n[2],t=c.Buffer.from(e,"base64");if(this.keplr&&this.nonce){const e=yield this.keplr.getEnigmaUtils(this.chainId).decrypt(t,this.nonce),n=c.Buffer.from(e).toString();throw new Error(n)}}}throw e}const o=i;if(!this.keplr)throw new Error("Keplr API not initialized");if(!this.nonce)throw new Error("Nonce is unknown");if(!o)throw new Error("Failed to get the response from the contract");const a=yield this.keplr.getEnigmaUtils(this.chainId).decrypt(c.Buffer.from(o.data,"base64"),this.nonce),d=c.Buffer.from(c.Buffer.from(a).toString(),"base64").toString();return{headers:s,data:JSON.parse(d)}}))}getSecretWasmUrl(e,t){return`/compute/v1beta1/query/${e}?${new URLSearchParams({query:t}).toString()}`}getCacheKey(){return(0,d.makeURL)(this.baseURL,this.getSecretWasmUrl(this.contractAddress,JSON.stringify(this.obj)))}get contractCodeHash(){const e=this.querySecretContractCodeHash.getQueryContract(this.contractAddress);if(e.response)return e.response.data.code_hash}}r([a.observable.ref],u.prototype,"keplr",void 0),r([a.observable],u.prototype,"_isIniting",void 0),r([a.flow],u.prototype,"initKeplr",null),r([a.flow],u.prototype,"init",null),r([a.computed],u.prototype,"contractCodeHash",null),t.ObservableSecretContractChainQuery=u},81334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WrongViewingKeyError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}t.WrongViewingKeyError=n},64585:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretWasm=void 0,s(n(79468),t),s(n(63517),t),s(n(81334),t),t.SecretWasm=o(n(11077)),s(n(32553),t)},32553:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SecretQueriesImpl=t.SecretQueries=void 0;const r=n(79468),i=n(35832),s=n(63517);t.SecretQueries={use:e=>(t,n,r,i)=>({secret:new o(t,n,r,i,e.apiGetter)})};class o{constructor(e,t,n,o,a){this.querySecretContractCodeHash=new r.ObservableQuerySecretContractCodeHash(t,n,o),e.queryBalances.addBalanceRegistry(new s.ObservableQuerySecret20BalanceRegistry(t,a,this.querySecretContractCodeHash)),this.querySecret20ContractInfo=new i.ObservableQuerySecret20ContractInfo(t,n,o,a,this.querySecretContractCodeHash)}}t.SecretQueriesImpl=o},63517:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecret20BalanceRegistry=t.ObservableQuerySecret20BalanceImpl=void 0;const s=n(80075),o=n(89642),a=n(19731),c=n(87274),d=n(81334);class u extends c.ObservableSecretContractChainQuery{constructor(e,t,n,r,i,o,a){if("secret20"!==i.type)throw new Error(`Denom helper must be secret20: ${i.denom}`);const c=n.getChain(t).forceFindCurrency(i.denom);let d="";"type"in c&&"secret20"===c.type&&(d=c.viewingKey),super(e,t,n,r,i.contractAddress,{balance:{address:o,key:d}},a),this.denomHelper=i,this.bech32Address=o,this.viewingKey=d,(0,s.makeObservable)(this),d||this.setError({status:0,statusText:"Viewing key is empty",message:"Viewing key is empty"})}canFetch(){return super.canFetch()&&""!==this.bech32Address&&""!==this.viewingKey}fetchResponse(e){const t=Object.create(null,{fetchResponse:{get:()=>super.fetchResponse}});var n;return i(this,void 0,void 0,(function*(){const{data:r,headers:i}=yield t.fetchResponse.call(this,e);if(r.viewing_key_error)throw new d.WrongViewingKeyError(null===(n=r.viewing_key_error)||void 0===n?void 0:n.msg);return{headers:i,data:r}}))}get balance(){const e=this.denomHelper.denom,t=this.chainGetter.getChain(this.chainId).findCurrency(e);if(!t)throw new Error(`Unknown currency: ${e}`);return this.response&&this.response.data.balance?new a.CoinPretty(t,new a.Int(this.response.data.balance.amount)):new a.CoinPretty(t,new a.Int(0)).ready(!1)}get currency(){const e=this.denomHelper.denom;return this.chainGetter.getChain(this.chainId).forceFindCurrency(e)}}r([s.computed],u.prototype,"balance",null),r([s.computed],u.prototype,"currency",null),t.ObservableQuerySecret20BalanceImpl=u,t.ObservableQuerySecret20BalanceRegistry=class{constructor(e,t,n){this.sharedContext=e,this.apiGetter=t,this.querySecretContractCodeHash=n}getBalanceImpl(e,t,n,r){const i=new o.DenomHelper(r);if("secret20"===i.type)return new u(this.sharedContext,e,t,this.apiGetter,i,n,this.querySecretContractCodeHash)}}},35832:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableQuerySecret20ContractInfo=t.ObservableQuerySecret20ContactInfoInner=void 0;const i=n(27932),s=n(80075),o=n(87274);class a extends o.ObservableSecretContractChainQuery{constructor(e,t,n,r,i,o){super(e,t,n,r,i,{token_info:{}},o),(0,s.makeObservable)(this)}get error(){return super.error||this.querySecretContractCodeHash.getQueryContract(this.contractAddress).error}get tokenInfo(){if(this.response)return this.response.data.token_info}}r([s.computed],a.prototype,"tokenInfo",null),t.ObservableQuerySecret20ContactInfoInner=a;class c extends i.ObservableChainQueryMap{constructor(e,t,n,r,i){super(e,t,n,(e=>new a(this.sharedContext,this.chainId,this.chainGetter,this.apiGetter,e,i))),this.apiGetter=r,this.querySecretContractCodeHash=i}getQueryContract(e){return this.get(e)}}t.ObservableQuerySecret20ContractInfo=c},11077:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},14532:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSimpleQuery=t.ObservableSimpleQueryImpl=void 0;const r=n(5136);class i extends r.ObservableQuery{constructor(e,t,n){super(e,t,n)}canFetch(){return!!this.baseURL}}t.ObservableSimpleQueryImpl=i;class s extends r.ObservableQueryMap{constructor(e){super((t=>{const{baseURL:n,url:r}=JSON.parse(t);return new i(e,n,r||"")})),this.sharedContext=e}queryGet(e,t){return this.get(JSON.stringify({baseURL:(n=e,n.length>0&&"/"===n[n.length-1]?n.slice(0,n.length-1):n),url:null!=t?o(t):void 0}));var n}}function o(e){return e.length>0&&"/"===e[0]?e.slice(1):e}t.ObservableSimpleQuery=s},9499:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenFactoryCurrencyRegistrar=void 0;const s=n(89642),o=n(80075),a=n(94531);class c{constructor(e,t=864e5,n=36e5,r,i,s,a){this.kvStore=e,this.cacheDuration=t,this.failedCacheDuration=n,this.baseURL=r,this.uri=i,this.chainStore=s,this.queriesStore=a,this._isInitialized=!1,this.cache=new Map,this.staledCache=new Map,this.chainStore.registerCurrencyRegistrar(this.currencyRegistrar.bind(this)),(0,o.makeObservable)(this),this.init()}init(){return i(this,void 0,void 0,(function*(){const e=yield this.kvStore.get("cache-token-factory-registrar");if(e)for(const[t,n]of Object.entries(e))this.cache.set(t,n);(0,o.runInAction)((()=>{this._isInitialized=!0}))}))}get isInitialized(){return this._isInitialized}currencyRegistrar(e,t){if(!this.baseURL)return;if(!this.chainStore.hasChain(e))return;const n=new s.DenomHelper(t);if("native"!==n.type||!n.denom.startsWith("factory/"))return;if(!this.isInitialized)return{value:void 0,done:!1};let r=!1;const i=this.getCurrency(e,t);i.isFetching&&(r=!0);const o=i.res;return i.isFetching||i.fromCache||(o?this.setCache(e,t,{notFound:void 0,currency:o,timestamp:Date.now()}):i.notFound&&this.setCache(e,t,{notFound:!0,timestamp:Date.now()})),o?{value:Object.assign({},o),done:!r}:{value:void 0,done:!r}}getCurrency(e,t){var n;const{res:r,staled:i}=this.getCacheCurrency(e,t);if(r){if(r.notFound)return{res:void 0,isFetching:!1,fromCache:!0,notFound:!0};if(!i)return{res:r.currency,isFetching:!1,fromCache:!0,notFound:!1}}const s=this.queriesStore.simpleQuery.queryGet(this.baseURL,this.uri.replace("{chainId}",e).replace("{denom}",encodeURIComponent(t)));let o=!1;const a=r?r.currency:void 0;if(s.isFetching&&(o=!0),s.response)return s.response.data.coinMinimalDenom!==t?{res:void 0,isFetching:o,fromCache:!1,notFound:!0}:{res:s.response.data,isFetching:o,fromCache:!1,notFound:!1};{const e=404===(null===(n=s.error)||void 0===n?void 0:n.status);return{res:e?void 0:a,isFetching:o,fromCache:!1,notFound:e}}}getCacheCurrency(e,t){const n=`${a.ChainIdHelper.parse(e).identifier}/${t}`;let r=this.cache.get(n)||this.staledCache.get(n),i=!1;if(r)if(r.notFound){if(Date.now()-r.timestamp>this.failedCacheDuration){this.cache.delete(n);{const e="cache-token-factory-registrar",t=Object.fromEntries(this.cache);this.kvStore.set(e,t)}r=void 0,i=!1}}else if(Date.now()-r.timestamp>this.cacheDuration){if(this.cache.delete(n),!this.staledCache.has(n)){{const e="cache-token-factory-registrar",t=Object.fromEntries(this.cache);this.kvStore.set(e,t)}this.staledCache.set(n,r)}i=!0}return{res:r,staled:i}}setCache(e,t,n){const r=`${a.ChainIdHelper.parse(e).identifier}/${t}`;this.cache.set(r,n);{const e="cache-token-factory-registrar",t=Object.fromEntries(this.cache);this.kvStore.set(e,t)}this.staledCache.has(r)&&this.staledCache.set(r,n)}}r([o.observable],c.prototype,"_isInitialized",void 0),t.TokenFactoryCurrencyRegistrar=c},32262:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9499),t)}}]);