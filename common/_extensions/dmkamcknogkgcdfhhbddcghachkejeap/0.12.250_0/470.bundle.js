/*! For license information please see 470.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[470],{63523:(e,t,n)=>{n.r(t),n.d(t,{getAddress:()=>g,getContractAddress:()=>_,getCreate2Address:()=>b,getIcapAddress:()=>y,isAddress:()=>m});var r=n(97750),a=n(10528),i=n(59256),s=n(48669),o=n(78011),c=n(78803);const l=new o.Yd(c.i);function u(e){(0,r.isHexString)(e,20)||l.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let e=0;e<40;e++)n[e]=t[e].charCodeAt(0);const a=(0,r.arrayify)((0,i.w)(n));for(let e=0;e<40;e+=2)a[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&a[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const d={};for(let e=0;e<10;e++)d[String(e)]=String(e);for(let e=0;e<26;e++)d[String.fromCharCode(65+e)]=String(10+e);const h=Math.floor((p=9007199254740991,Math.log10?Math.log10(p):Math.log(p)/Math.LN10));var p;function f(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>d[e])).join("");for(;t.length>=h;){let e=t.substring(0,h);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}function g(e){let t=null;if("string"!=typeof e&&l.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=u(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&l.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==f(e)&&l.throwArgumentError("bad icap checksum","address",e),t=(0,a.g$)(e.substring(4));t.length<40;)t="0"+t;t=u("0x"+t)}else l.throwArgumentError("invalid address","address",e);return t}function m(e){try{return g(e),!0}catch(e){}return!1}function y(e){let t=(0,a.t2)(g(e).substring(2)).toUpperCase();for(;t.length<30;)t="0"+t;return"XE"+f("XE00"+t)+t}function _(e){let t=null;try{t=g(e.from)}catch(t){l.throwArgumentError("missing from address","transaction",e)}const n=(0,r.stripZeros)((0,r.arrayify)(a.O$.from(e.nonce).toHexString()));return g((0,r.hexDataSlice)((0,i.w)((0,s.c)([t,n])),12))}function b(e,t,n){return 32!==(0,r.hexDataLength)(t)&&l.throwArgumentError("salt must be 32 bytes","salt",t),32!==(0,r.hexDataLength)(n)&&l.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",n),g((0,r.hexDataSlice)((0,i.w)((0,r.concat)(["0xff",g(e),t,n])),12))}},97750:(e,t,n)=>{n.r(t),n.d(t,{arrayify:()=>d,concat:()=>h,hexConcat:()=>v,hexDataLength:()=>_,hexDataSlice:()=>b,hexStripZeros:()=>w,hexValue:()=>E,hexZeroPad:()=>A,hexlify:()=>y,isBytes:()=>u,isBytesLike:()=>c,isHexString:()=>g,joinSignature:()=>k,splitSignature:()=>I,stripZeros:()=>p,zeroPad:()=>f});var r=n(78011),a=n(10636);const i=new r.Yd(a.i);function s(e){return!!e.toHexString}function o(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function c(e){return g(e)&&!(e.length%2)||u(e)}function l(e){return"number"==typeof e&&e==e&&e%1==0}function u(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!l(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const n=e[t];if(!l(n)||n<0||n>=256)return!1}return!0}function d(e,t){if(t||(t={}),"number"==typeof e){i.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),o(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),s(e)&&(e=e.toHexString()),g(e)){let n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":i.throwArgumentError("hex data is odd-length","value",e));const r=[];for(let e=0;e<n.length;e+=2)r.push(parseInt(n.substring(e,e+2),16));return o(new Uint8Array(r))}return u(e)?o(new Uint8Array(e)):i.throwArgumentError("invalid arrayify value","value",e)}function h(e){const t=e.map((e=>d(e))),n=t.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(n);return t.reduce(((e,t)=>(r.set(t,e),e+t.length)),0),o(r)}function p(e){let t=d(e);if(0===t.length)return t;let n=0;for(;n<t.length&&0===t[n];)n++;return n&&(t=t.slice(n)),t}function f(e,t){(e=d(e)).length>t&&i.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(t);return n.set(e,t-e.length),o(n)}function g(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const m="0123456789abcdef";function y(e,t){if(t||(t={}),"number"==typeof e){i.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=m[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),s(e))return e.toHexString();if(g(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":i.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(u(e)){let t="0x";for(let n=0;n<e.length;n++){let r=e[n];t+=m[(240&r)>>4]+m[15&r]}return t}return i.throwArgumentError("invalid hexlify value","value",e)}function _(e){if("string"!=typeof e)e=y(e);else if(!g(e)||e.length%2)return null;return(e.length-2)/2}function b(e,t,n){return"string"!=typeof e?e=y(e):(!g(e)||e.length%2)&&i.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=n?"0x"+e.substring(t,2+2*n):"0x"+e.substring(t)}function v(e){let t="0x";return e.forEach((e=>{t+=y(e).substring(2)})),t}function E(e){const t=w(y(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function w(e){"string"!=typeof e&&(e=y(e)),g(e)||i.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function A(e,t){for("string"!=typeof e?e=y(e):g(e)||i.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&i.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function I(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(c(e)){let n=d(e);64===n.length?(t.v=27+(n[32]>>7),n[32]&=127,t.r=y(n.slice(0,32)),t.s=y(n.slice(32,64))):65===n.length?(t.r=y(n.slice(0,32)),t.s=y(n.slice(32,64)),t.v=n[64]):i.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:i.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(n[32]|=128),t._vs=y(n.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const n=f(d(t._vs),32);t._vs=y(n);const r=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=r:t.recoveryParam!==r&&i.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;const a=y(n);null==t.s?t.s=a:t.s!==a&&i.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?i.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const n=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==n&&i.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&g(t.r)?t.r=A(t.r,32):i.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&g(t.s)?t.s=A(t.s,32):i.throwArgumentError("signature missing or invalid s","signature",e);const n=d(t.s);n[0]>=128&&i.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(n[0]|=128);const r=y(n);t._vs&&(g(t._vs)||i.throwArgumentError("signature invalid _vs","signature",e),t._vs=A(t._vs,32)),null==t._vs?t._vs=r:t._vs!==r&&i.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function k(e){return y(h([(e=I(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}},22951:(e,t,n)=>{n.d(t,{DC:()=>l,dk:()=>f,p$:()=>p,tu:()=>o,uj:()=>c,zG:()=>s});var r=n(78011),a=n(16392);const i=new r.Yd(a.i);function s(e,t,n){Object.defineProperty(e,t,{enumerable:!0,value:n,writable:!1})}function o(e,t){for(let n=0;n<32;n++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function c(e,t){e&&"object"==typeof e||i.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((n=>{t[n]||i.throwArgumentError("invalid object key - "+n,"transaction:"+n,e)}))}function l(e){const t={};for(const n in e)t[n]=e[n];return t}const u={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function d(e){if(null==e||u[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let n=0;n<t.length;n++){let r=null;try{r=e[t[n]]}catch(e){continue}if(!d(r))return!1}return!0}return i.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function h(e){if(d(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>p(e))));if("object"==typeof e){const t={};for(const n in e){const r=e[n];void 0!==r&&s(t,n,p(r))}return t}return i.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function p(e){return h(e)}class f{constructor(e){for(const t in e)this[t]=p(e[t])}}},16060:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var a;n.d(t,{RQ:()=>C,WK:()=>P,X3:()=>N,Zn:()=>T,aU:()=>a,cP:()=>d,fp:()=>p,kG:()=>o,q_:()=>s}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const i="popstate";function s(e){return void 0===e&&(e={}),function(e,t,n,s){void 0===s&&(s={});let{window:d=document.defaultView,v5Compat:h=!1}=s,p=d.history,f=a.Pop,g=null,m=y();function y(){return(p.state||{idx:null}).idx}function _(){f=a.Pop;let e=y(),t=null==e?null:e-m;m=e,g&&g({action:f,location:v.location,delta:t})}function b(e){let t="null"!==d.location.origin?d.location.origin:d.location.href,n="string"==typeof e?e:u(e);return o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,p.replaceState(r({},p.state,{idx:m}),""));let v={get action(){return f},get location(){return e(d,p)},listen(e){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(i,_),g=e,()=>{d.removeEventListener(i,_),g=null}},createHref:e=>t(d,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=a.Push;let r=l(v.location,e,t);n&&n(r,e),m=y()+1;let i=c(r,m),s=v.createHref(r);try{p.pushState(i,"",s)}catch(e){d.location.assign(s)}h&&g&&g({action:f,location:v.location,delta:1})},replace:function(e,t){f=a.Replace;let r=l(v.location,e,t);n&&n(r,e),m=y();let i=c(r,m),s=v.createHref(r);p.replaceState(i,"",s),h&&g&&g({action:f,location:v.location,delta:0})},go:e=>p.go(e)};return v}((function(e,t){let{pathname:n="/",search:r="",hash:a=""}=d(e.location.hash.substr(1));return l("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"==typeof t?t:u(t))}),(function(e,t){!function(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function o(e,t){if(!1===e||null==e)throw new Error(t)}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function l(e,t,n,a){return void 0===n&&(n=null),r({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?d(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var h;function p(e,t,n){void 0===n&&(n="/");let r=T(("string"==typeof t?d(t):t).pathname||"/",n);if(null==r)return null;let a=f(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(a);let i=null;for(let e=0;null==i&&e<a.length;++e)i=I(a[e],S(r));return i}function f(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};s.relativePath.startsWith("/")&&(o(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let c=C([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+c+'".'),f(e.children,t,l,c)),(null!=e.path||e.index)&&t.push({path:c,score:A(c,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of g(e.path))a(e,t,n);else a(e,t)})),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let s=g(r.join("/")),o=[];return o.push(...s.map((e=>""===e?i:[i,e].join("/")))),a&&o.push(...s),o.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(h||(h={}));const m=/^:\w+$/,y=3,_=2,b=1,v=10,E=-2,w=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(w)&&(r+=E),t&&(r+=_),n.filter((e=>!w(e))).reduce(((e,t)=>e+(m.test(t)?y:""===t?b:v)),r)}function I(e,t){let{routesMeta:n}=e,r={},a="/",i=[];for(let e=0;e<n.length;++e){let s=n[e],o=e===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=k({path:s.relativePath,caseSensitive:s.caseSensitive,end:o},c);if(!l)return null;Object.assign(r,l.params);let u=s.route;i.push({params:r,pathname:C([a,l.pathname]),pathnameBase:O(C([a,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(a=C([a,l.pathnameBase]))}return i}function k(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(r.push(t),"/([^\\/]+)")));return e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=o[n]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return x(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(o[n]||"",t),e}),{}),pathname:i,pathnameBase:s,pattern:e}}function S(e){try{return decodeURI(e)}catch(t){return x(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function T(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function x(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}const C=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");class N extends Error{}function P(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const R=["post","put","patch","delete"],B=(new Set(R),["get",...R]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,Symbol("deferred")},28316:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(52967)},48570:(e,t,n)=>{e.exports=n(66866)},73557:(e,t,n)=>{var r;n.d(t,{AW:()=>k,F0:()=>S,TH:()=>_,Z5:()=>T});var a=n(16060),i=n(2784);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}"function"==typeof Object.is&&Object.is;const{useState:o,useEffect:c,useLayoutEffect:l,useDebugValue:u}=r||(r=n.t(i,2));"undefined"==typeof window||void 0===window.document||window.document.createElement,(r||(r=n.t(i,2))).useSyncExternalStore;const d=i.createContext(null),h=i.createContext(null),p=i.createContext(null),f=i.createContext(null),g=i.createContext({outlet:null,matches:[]}),m=i.createContext(null);function y(){return null!=i.useContext(f)}function _(){return y()||(0,a.kG)(!1),i.useContext(f).location}function b(){let e=function(){var e;let t=i.useContext(m),n=function(e){let t=i.useContext(h);return t||(0,a.kG)(!1),t}(A.UseRouteError),r=function(e){let t=function(e){let t=i.useContext(g);return t||(0,a.kG)(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||(0,a.kG)(!1),n.route.id}(A.UseRouteError);return t||(null==(e=n.errors)?void 0:e[r])}(),t=(0,a.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:r},n):null,null)}class v extends i.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?i.createElement(g.Provider,{value:this.props.routeContext},i.createElement(m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(d);return a&&a.static&&a.staticContext&&n.route.errorElement&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(g.Provider,{value:t},r)}var w,A,I;function k(e){(0,a.kG)(!1)}function S(e){let{basename:t="/",children:n=null,location:r,navigationType:s=a.aU.Pop,navigator:o,static:c=!1}=e;y()&&(0,a.kG)(!1);let l=t.replace(/^\/*/,"/"),u=i.useMemo((()=>({basename:l,navigator:o,static:c})),[l,o,c]);"string"==typeof r&&(r=(0,a.cP)(r));let{pathname:d="/",search:h="",hash:g="",state:m=null,key:_="default"}=r,b=i.useMemo((()=>{let e=(0,a.Zn)(d,l);return null==e?null:{pathname:e,search:h,hash:g,state:m,key:_}}),[l,d,h,g,m,_]);return null==b?null:i.createElement(p.Provider,{value:u},i.createElement(f.Provider,{children:n,value:{location:b,navigationType:s}}))}function T(e){let{children:t,location:n}=e,r=i.useContext(d);return function(e,t){y()||(0,a.kG)(!1);let{navigator:n}=i.useContext(p),r=i.useContext(h),{matches:o}=i.useContext(g),c=o[o.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,m=_();if(t){var w;let e="string"==typeof t?(0,a.cP)(t):t;"/"===u||(null==(w=e.pathname)?void 0:w.startsWith(u))||(0,a.kG)(!1),d=e}else d=m;let A=d.pathname||"/",I="/"===u?A:A.slice(u.length)||"/",k=(0,a.fp)(e,{pathname:I}),S=function(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}let r=e,s=null==n?void 0:n.errors;if(null!=s){let e=r.findIndex((e=>e.route.id&&(null==s?void 0:s[e.route.id])));e>=0||(0,a.kG)(!1),r=r.slice(0,Math.min(r.length,e+1))}return r.reduceRight(((e,a,o)=>{let c=a.route.id?null==s?void 0:s[a.route.id]:null,l=n?a.route.errorElement||i.createElement(b,null):null,u=t.concat(r.slice(0,o+1)),d=()=>i.createElement(E,{match:a,routeContext:{outlet:e,matches:u}},c?l:void 0!==a.route.element?a.route.element:e);return n&&(a.route.errorElement||0===o)?i.createElement(v,{location:n.location,component:l,error:c,children:d(),routeContext:{outlet:null,matches:u}}):d()}),null)}(k&&k.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:(0,a.RQ)([u,n.encodeLocation?n.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:(0,a.RQ)([u,n.encodeLocation?n.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r||void 0);return t&&S?i.createElement(f.Provider,{value:{location:s({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:a.aU.Pop}},S):S}(r&&!t?r.router.routes:x(t),n)}function x(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;if(e.type===i.Fragment)return void n.push.apply(n,x(e.props.children,t));e.type!==k&&(0,a.kG)(!1),e.props.index&&e.props.children&&(0,a.kG)(!1);let s=[...t,r],o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=x(e.props.children,s)),n.push(o)})),n}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(w||(w={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(A||(A={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(I||(I={})),new Promise((()=>{})),i.Component},2784:(e,t,n)=>{e.exports=n(83426)},52022:(e,t,n)=>{n.d(t,{Se:()=>u});var r=n(80075),a=n(48834),i=n(83268),s=n(89170),o=(n(19731),n(96624),n(34298)),c=function(e,t,n,r){var a,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,n,s):a(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},l=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};class u{constructor(e,t,n,s){this.kvStore=e,this.keyringStore=t,this.accountStore=n,this.apiKey=s,this.isInitialized=!1,this._sessionId="",this._sessionIdTimestamp=0,this.isFirefox=!1,this.cosmosHubChainId="cosmoshub-4",(0,r.makeObservable)(this),this.apiKey&&(i.S1(this.apiKey,void 0,{defaultTracking:!1}),(0,r.autorun)((()=>{var e;if((null===(e=this.keyringStore.selectedKeyInfo)||void 0===e?void 0:e.id)&&this.accountStore.hasAccount(this.cosmosHubChainId)&&"unlocked"===this.keyringStore.status){const e=this.accountStore.getAccount(this.cosmosHubChainId);if(e.bech32Address){const t=a.Buffer.from(o.Hash.hash256((new TextEncoder).encode(e.bech32Address))).toString("hex");i.Iv(t);let n="none";if(n=this.keyringStore.selectedKeyInfo.insensitive.keyRingType,"private-key"===n){const e=this.keyringStore.selectedKeyInfo.insensitive.keyRingMeta;e.web3Auth&&e.web3Auth.type&&(n="web3_auth_"+e.web3Auth.type)}this.setUserProperties({current_keyring_type:n})}}}))),this.init()}init(){return l(this,void 0,void 0,(function*(){if("function"==typeof browser.runtime.getBrowserInfo&&"Firefox"===(yield browser.runtime.getBrowserInfo()).name)return this.isFirefox=!0,void(0,r.runInAction)((()=>{this.isInitialized=!0}));const e=yield this.kvStore.get("session_id");e&&(0,r.runInAction)((()=>{this._sessionId=e}));const t=yield this.kvStore.get("session_id_timestamp");t&&(0,r.runInAction)((()=>{this._sessionIdTimestamp=t})),(0,r.autorun)((()=>{this.kvStore.set("session_id",this._sessionId)})),(0,r.autorun)((()=>{this.kvStore.set("session_id_timestamp",this._sessionIdTimestamp)})),(0,r.runInAction)((()=>{this.isInitialized=!0}))}))}ensureInit(){return l(this,void 0,void 0,(function*(){if(!this.isFirefox&&!this.isInitialized&&!this.isInitialized){let e;yield new Promise((t=>{e=(0,r.autorun)((()=>{this.isInitialized&&t()}))})),e&&e()}}))}getAndUpdateSessionId(){const e=Date.now();if(this._sessionId&&this._sessionIdTimestamp&&e-this._sessionIdTimestamp<9e5)return(0,r.runInAction)((()=>{this._sessionIdTimestamp=e})),this._sessionId;{const t=new Uint8Array(12);crypto.getRandomValues(t);const n=a.Buffer.from(t).toString("hex");return(0,r.runInAction)((()=>{this._sessionId=n,this._sessionIdTimestamp=e})),n}}logEvent(e,t){this.apiKey&&(this.isFirefox||this.ensureInit().then((()=>{this.isFirefox||i.n5()&&i.j(e,Object.assign(Object.assign({},t),{session_id:this.getAndUpdateSessionId()}))})))}setUserProperties(e){if(this.isFirefox)return;if(!this.apiKey)return;if(!i.n5())return;const t=new s.h;Object.entries(e).forEach((([e,n])=>{null!=n&&t.set(e,n)})),i.yV(t)}incrementUserProperty(e,t){if(this.isFirefox)return;if(!this.apiKey)return;if(!i.n5())return;const n=new s.h;n.add(e,t),i.yV(n)}}c([r.observable],u.prototype,"isInitialized",void 0),c([r.observable],u.prototype,"_sessionId",void 0),c([r.observable],u.prototype,"_sessionIdTimestamp",void 0),c([r.action],u.prototype,"setUserProperties",null),c([r.action],u.prototype,"incrementUserProperty",null)},3554:(e,t,n)=>{n.d(t,{B:()=>s});var r=n(2784),a=n(71893);const i={YAxis:a.default.div`
    display: flex;
    flex-direction: column;
    align-items: ${({alignX:e})=>{switch(e){case"left":return"flex-start";case"right":return"flex-end";case"center":return"center"}}};
    gap: ${({gap:e})=>e};
  `},s=e=>{var{children:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children"]);return r.createElement(i.YAxis,Object.assign({},n),t)}},54660:(e,t,n)=>{n.d(t,{I1:()=>a.I1,zx:()=>r.z});var r=n(22639),a=n(98661);n(66674),n(96780),n(86917),n(22201)},98661:(e,t,n)=>{n.d(t,{I1:()=>i,z0:()=>o});var r=n(71893),a=n(35150);const i=e=>r.css`
    color: ${e};
    svg {
      fill: ${e};
      stroke: ${e};
    }
  `,s={primary:{light:{fill:{enabled:r.css`
          background-color: ${a.VZ["blue-400"]};

          ${i(a.VZ.white)}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-500"]};
              opacity: 0.1;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["blue-400"]};

          ::after {
            background-color: ${a.VZ["gray-300"]};
            opacity: 0.4;
          }

          ${i(a.VZ.white)}
        `}},dark:{fill:{enabled:r.css`
          background-color: ${a.VZ["blue-400"]};

          ${i(a.VZ.white)}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-500"]};
              opacity: 0.3;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["blue-400"]};

          ::after {
            background-color: ${a.VZ["gray-600"]};
            opacity: 0.7;
          }

          ${i(a.VZ.white)}
        `}}},secondary:{light:{fill:{enabled:r.css`
          background-color: ${a.VZ["blue-50"]};

          ${i(a.VZ["blue-400"])}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-500"]};
              opacity: 0.02;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["blue-50"]};

          ${i(a.VZ["blue-200"])}
        `}},dark:{fill:{enabled:r.css`
          background-color: ${a.VZ["gray-500"]};

          ${i(a.VZ.white)}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-600"]};
              opacity: 0.2;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["gray-400"]};

          ::after {
            background-color: ${a.VZ["gray-600"]};
            opacity: 0.7;
          }

          ${i(a.VZ.white)}
        `}}},danger:{light:{fill:{enabled:r.css`
          background-color: ${a.VZ["red-100"]};

          ${i(a.VZ["red-400"])}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-500"]};
              opacity: 0.05;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["red-100"]};

          ::after {
            background-color: ${a.VZ["gray-300"]};
            opacity: 0.2;
          }

          ${i(a.VZ["red-400"])}
        `}},dark:{fill:{enabled:r.css`
          background-color: ${a.VZ["red-100"]};

          ${i(a.VZ["red-400"])}

          :hover {
            ::after {
              background-color: ${a.VZ["gray-500"]};
              opacity: 0.2;
            }
          }
        `,disabled:r.css`
          background-color: ${a.VZ["gray-400"]};

          ::after {
            background-color: ${a.VZ["gray-600"]};
            opacity: 0.7;
          }

          ${i(a.VZ.white)}
        `}}}},o={Container:r.default.div`
    // Used for making button fill parent horizontally.
    display: flex;
    flex-direction: column;
    align-items: center;
  `,Button:r.default.button`
    width: 100%;
    height: ${({size:e})=>`${(e=>{switch(e){case"extraSmall":return 2;case"small":return 2.25;case"large":return 3.25;default:return 2.75}})(e)}rem`};
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: ${"0.375rem"};
    cursor: ${({disabled:e,isLoading:t})=>e?"not-allowed":t?"progress":"pointer"};
    overflow: hidden;

    // Default font style.
    // Override these in "buttonStyleFromColorAndMode" if needed.
    font-weight: 500;
    font-size: ${({size:e})=>"large"===e?"1rem":"0.875rem"};
    letter-spacing: 0.2px;

    white-space: nowrap;

    // Remove normalized css properties.
    border-width: 0;
    border-style: none;
    border-color: transparent;
    border-image: none;
    padding: 0 0.75rem;

    // For hovering.
    position: relative;
    ::after {
      content: "";

      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }

    ${({color:e,theme:t,mode:n,disabled:r})=>s[e||"primary"][t.mode||"dark"][n||"fill"][r?"disabled":"enabled"]}
  `,Left:r.default.span`
    height: 100%;
    display: flex;
    align-items: center;
    margin-right: 0.25rem;
  `,Right:r.default.span`
    height: 100%;
    display: flex;
    align-items: center;
    margin-left: 0.25rem;
  `,Loading:r.default.div`
    display: flex;
    align-items: center;

    position: absolute;
    color: ${({buttonColor:e})=>(e=>{switch(e){case"primary":default:return a.VZ["blue-200"];case"secondary":return a.VZ["gray-200"];case"danger":return a.VZ["red-400"]}})(e)};
  `,TextOverrideIcon:r.default.div`
    display: flex;
    align-items: center;

    position: absolute;
    svg {
      fill: none;
    }
  `}},68218:(e,t,n)=>{n.d(t,{s:()=>i});var r=n(2784);const a={Container:n(71893).default.div`
    flex: ${({weight:e})=>`${e} ${e} 0%`};
  `},i=({children:e,weight:t})=>(t<0&&(t=0),r.createElement(a.Container,{weight:t},e))},3645:(e,t,n)=>{n.d(t,{o:()=>r.o}),n(68218);var r=n(98331)},4922:(e,t,n)=>{n.d(t,{i0:()=>r.i,mI:()=>c.m,pN:()=>l.p,H2:()=>a.H2,H3:()=>i,d1:()=>s.d,Tj:()=>o.T});var r=n(25300),a=(n(1056),n(49353),n(41267));const i=(0,n(71893).default)(r.i)`
  font-weight: 600;
  font-size: 1.25rem;
`;n(33219),n(61432);var s=n(94018),o=n(89587),c=(n(27977),n(34855),n(14832)),l=n(90879);n(34715),n(42280),n(18650),n(9458),n(17305)},96624:(e,t,n)=>{n.d(t,{$m:()=>c,C2:()=>l,Ce:()=>a,IZ:()=>p,R9:()=>g,Ro:()=>u,SR:()=>s,d2:()=>f,eR:()=>d,gV:()=>h,ly:()=>o,sw:()=>m,yh:()=>i});var r=n(34406);const a="https://satellite.keplr.app",i="/price/simple",s="/coingecko-token-info/onchain/networks/{coingeckoChainId}/tokens/{contractAddress}",o="https://satellite.keplr.app",c=r.env.KEPLR_EXT_SKIP_TOKEN_INFO_API_URI||"/coingecko-token-info/skip/assets/{chainId}/{coinMinimalDenom}",l="https://evm-1.keplr.app",u="interwoven-1",d=[{currency:"usd",symbol:"$",maxDecimals:2,locale:"en-US"},{currency:"eur",symbol:"€",maxDecimals:2,locale:"de-DE"},{currency:"gbp",symbol:"£",maxDecimals:2,locale:"en-GB"},{currency:"cad",symbol:"CA$",maxDecimals:2,locale:"en-CA"},{currency:"aud",symbol:"AU$",maxDecimals:2,locale:"en-AU"},{currency:"rub",symbol:"₽",maxDecimals:0,locale:"ru"},{currency:"krw",symbol:"₩",maxDecimals:0,locale:"ko-KR"},{currency:"hkd",symbol:"HK$",maxDecimals:1,locale:"en-HK"},{currency:"cny",symbol:"¥",maxDecimals:1,locale:"zh-CN"},{currency:"jpy",symbol:"¥",maxDecimals:0,locale:"ja-JP"},{currency:"inr",symbol:"₹",maxDecimals:1,locale:"en-IN"},{currency:"chf",symbol:"₣",maxDecimals:2,locale:"gsw"},{currency:"pkr",symbol:"Rs",maxDecimals:0,locale:"en-PK"}],h="G-GBM7FFDB7T",p="J2NwxIs6RvqxTr8KQ75Uzw",f="253b498ed8d76b708e01d5e005412a76",g={chainId:"osmosis-1",resolverContractAddress:"osmo1xk0s8xgktn9x5vwcgtjdxqzadg88fgn33p8u9cnpdxwemvxscvast52cdd"},m=[{name:"osmosis-poolmanager",chainId:"osmosis-1"},{name:"injective-helix",chainId:"injective-1"},{name:"injective-astroport",chainId:"injective-1"},{name:"injective-white-whale",chainId:"injective-1"},{name:"injective-dojoswap",chainId:"injective-1"},{name:"injective-hallswap",chainId:"injective-1"},{name:"neutron-drop",chainId:"neutron-1"},{name:"neutron-astroport",chainId:"neutron-1"},{name:"neutron-lido-satellite",chainId:"neutron-1"},{name:"persistence-dexter",chainId:"core-1"},{name:"pryzm-native",chainId:"pryzm-1"},{name:"chihuahua-white-whale",chainId:"chihuahua-1"},{name:"arbitrum-uniswap",chainId:"eip155:42161"},{name:"base-uniswap",chainId:"eip155:8453"},{name:"binance-uniswap",chainId:"eip155:56"},{name:"avalanche-uniswap",chainId:"eip155:43114"},{name:"optimism-uniswap",chainId:"eip155:10"},{name:"polygon-uniswap",chainId:"eip155:137"},{name:"blast-uniswap",chainId:"eip155:81457"},{name:"ethereum-uniswap",chainId:"eip155:1"},{name:"temp-forma",chainId:"eip155:984122"},{name:"neutron-duality",chainId:"neutron-1"}]},95556:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(2784),a=n(90414);const i=()=>{const e=r.useContext(a.s);if(!e)throw new Error("You have forgot to use ConfirmProvider");return e}},90414:(e,t,n)=>{n.d(t,{s:()=>r});const r=(0,n(2784).createContext)(null)},72121:(e,t,n)=>{var r,a,i=n(2784),s=n(28316),o=n(73557),c=n(16060);function l(e){let{basename:t,children:n,window:r}=e,a=i.useRef();null==a.current&&(a.current=(0,c.q_)({window:r,v5Compat:!0}));let s=a.current,[l,u]=i.useState({action:s.action,location:s.location});return i.useLayoutEffect((()=>s.listen(u)),[s]),i.createElement(o.F0,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s})}"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"}(r||(r={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(a||(a={}));var u=n(45493),d=n(35150),h=n(33210),p=n(66949),f=n(96106),g=n(80075),m=n(65397),y=n(98049),_=n(63197),b=n(77257),v=n(65264),E=n(84860),w=n(27660),A=n(95700),I=n(4922),k=n(22386),S=n(54660),T=n(3645),x=n(28432),C=n(64318),O=n(28646),N=n(19981),P=n(45698),R=n(50318),B=n(10642),D=n(81796),V=(n(7632),n(83112)),$=n(42670),L=n(71893),F=n(72424),M=n(80471),U=n(40602),H=n(20521),j=n.n(H),Z=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))};n(66985),(0,g.configure)({enforceActions:"always"}),window.keplr=new h.Keplr(p.i8,"core",new f.InExtensionMessageRequester);const z=(0,b.Pi)((()=>((0,E.b)(),null))),W=(0,b.Pi)((()=>{const{uiConfigStore:e}=(0,u.oR)(),t=(0,L.useTheme)(),r=(0,y.N)(),a=(0,V.Z)(),[s,o]=(0,i.useState)(""),[c,l]=(0,i.useState)("select");return i.createElement(k.x,{width:"100vw",height:"100vh",alignX:"center",alignY:"center"},i.createElement(k.x,{maxWidth:"47.75rem"},i.createElement("img",{src:n("light"===t.mode?35127:93451),alt:"Keplr logo",style:{width:"10.625rem",aspectRatio:"453 / 153"}}),i.createElement(w.T,{size:"2.25rem"}),i.createElement(A.F5,{color:"light"===t.mode?d.VZ["gray-700"]:d.VZ["gray-50"]},i.createElement($.Z,{id:"page.ledger-grant.title"})),i.createElement(w.T,{size:"1rem"}),i.createElement(I.H3,{color:"light"===t.mode?d.VZ["gray-200"]:d.VZ["gray-300"]},i.createElement($.Z,{id:"page.ledger-grant.paragraph"})),i.createElement(w.T,{size:"1.625rem"}),(()=>{switch(c){case"failed":return i.createElement(k.x,{cursor:"pointer",onClick:e=>{e.preventDefault(),l("select")}},i.createElement(x.K,{alignY:"center"},i.createElement(I.mI,{color:d.VZ["red-400"]},"Failed! Try Again"),i.createElement(w.T,{size:"0.25rem"}),i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5rem",height:"1.5rem",fill:"none",viewBox:"0 0 24 25"},i.createElement("path",{stroke:d.VZ["red-400"],strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12.563 5.75l6.75 6.75-6.75 6.75m5.812-6.75H4.687"}))));case"success":return i.createElement(I.mI,{color:d.VZ["green-400"]},"Success! You can close this web page.");case"select":return i.createElement(i.Fragment,null,i.createElement(x.K,{alignY:"center"},i.createElement(C.XZ,{checked:e.useWebHIDLedger,onChange:t=>Z(void 0,void 0,void 0,(function*(){if(t&&!window.navigator.hid)return yield r.confirm(a.formatMessage({id:"pages.register.connect-ledger.use-hid-confirm-title"}),a.formatMessage({id:"pages.register.connect-ledger.use-hid-confirm-paragraph"}),{forceYes:!0}),yield browser.tabs.create({url:"chrome://flags/#enable-experimental-web-platform-features"}),void window.close();e.setUseWebHIDLedger(t)}))}),i.createElement(w.T,{size:"0.5rem"}),i.createElement(I.Tj,{color:d.VZ["gray-300"]},i.createElement($.Z,{id:"pages.register.connect-ledger.use-hid-text"}))),i.createElement(w.T,{size:"1.625rem"}),i.createElement(T.o,{sum:1,gutter:"1rem"},i.createElement(S.zx,{color:"secondary",text:"Cosmos app",isLoading:"Cosmos"===s,disabled:!!s&&"Cosmos"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Cosmos");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new R.CosmosApp("Cosmos",t);if("Cosmos"===(yield n.getAppInfo()).app_name)return void l("success");if(t=yield P.Hn.tryAppOpen(t,"Cosmos"),n=new R.CosmosApp("Cosmos",t),"Cosmos"===(yield n.getAppInfo()).app_name)return void l("success");l("failed")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))}),i.createElement(S.zx,{color:"secondary",text:"Terra app",isLoading:"Terra"===s,disabled:!!s&&"Terra"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Terra");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new R.CosmosApp("Terra",t);if("Terra"===(yield n.getAppInfo()).app_name)return void l("success");if(t=yield P.Hn.tryAppOpen(t,"Terra"),n=new R.CosmosApp("Terra",t),"Terra"===(yield n.getAppInfo()).app_name)return void l("success");l("failed")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))}),i.createElement(S.zx,{color:"secondary",text:"Secret app",isLoading:"Secret"===s,disabled:!!s&&"Secret"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Secret");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new R.CosmosApp("Secret",t);if("Secret"===(yield n.getAppInfo()).app_name)return void l("success");if(t=yield P.Hn.tryAppOpen(t,"Secret"),n=new R.CosmosApp("Secret",t),"Secret "===(yield n.getAppInfo()).app_name)return void l("success");l("failed")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))}),i.createElement(S.zx,{color:"secondary",text:"Ethereum app",isLoading:"Ethereum"===s,disabled:!!s&&"Ethereum"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Ethereum");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new D.ZP(t);try{return yield n.getAddress("m/44'/60'/0'/0/0"),void l("success")}catch(e){console.log(e)}return t=yield P.Hn.tryAppOpen(t,"Ethereum"),n=new D.ZP(t),yield n.getAddress("m/44'/60'/0'/0/0"),void l("success")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))}),i.createElement(S.zx,{color:"secondary",text:"Starknet app",isLoading:"Starknet"===s,disabled:!!s&&"Starknet"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(!s){o("Starknet");try{const e=yield O.Z.create();try{const t=new M.g(e);return(yield t.getPubKey(U.et,!1)).returnCode===M.K.NoError?void l("success"):void l("failed")}catch(e){console.log(e)}finally{o(""),yield e.close()}}catch(e){console.log(e),l("failed")}finally{o("")}}}))}),i.createElement(S.zx,{color:"secondary",text:"Bitcoin app",isLoading:"Bitcoin"===s,disabled:!!s&&"Bitcoin"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Bitcoin");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new(j())(t);try{return yield n.getExtendedPubkey("m/44'/0'/0'/0/0"),void l("success")}catch(e){console.log(e)}return t=yield P.Hn.tryAppOpen(t,"Bitcoin"),n=new(j())(t),yield n.getExtendedPubkey("m/44'/0'/0'/0/0"),void l("success")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))}),i.createElement(S.zx,{color:"secondary",text:"Bitcoin Test app",isLoading:"Bitcoin Test"===s,disabled:!!s&&"Bitcoin Test"!==s,onClick:()=>Z(void 0,void 0,void 0,(function*(){if(s)return;let t;o("Bitcoin Test");try{t=e.useWebHIDLedger?yield O.Z.create():yield N.Z.create();let n=new(j())(t);try{return yield n.getExtendedPubkey("m/44'/1'/0'/0/0"),void l("success")}catch(e){console.log(e)}return t=yield P.Hn.tryAppOpen(t,"Bitcoin Test"),n=new(j())(t),yield n.getExtendedPubkey("m/44'/1'/0'/0/0"),void l("success")}catch(e){console.log(e),l("failed")}finally{null==t||t.close().catch(console.log),o("")}}))})))}})()))})),K=()=>((0,v.i)(),i.createElement(l,null,i.createElement(F.N,{prefix:"/ledger-grant"}),i.createElement(o.Z5,null,i.createElement(o.AW,{path:"/",element:i.createElement(W,null)}))));s.render(i.createElement((()=>i.createElement(u.g3,null,i.createElement(B.p,null,i.createElement(_.u,null,i.createElement(m.C,null,i.createElement(y.W,null,i.createElement(d.ZL,null),i.createElement(d.nW,null),i.createElement(z,null),i.createElement(K,null))))))),null),document.getElementById("app"))},45493:(e,t,n)=>{n.d(t,{g3:()=>u,oR:()=>d});var r=n(2784),a=n(60287),i=n(11169),s=n(80075),o=n(66222),c=(n(93172),function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))});const l=r.createContext(null),u=({children:e})=>{const[t]=(0,r.useState)((()=>(0,a.r)()));return(0,r.useEffect)((()=>{(0,i.getKeplrFromWindow)().then((e=>{e&&e.__core__getAnalyticsId&&e.__core__getAnalyticsId().then((e=>{t.analyticsStore.setUserId(e)}))}))}),[t.analyticsStore]),(0,r.useEffect)((()=>{const e=(0,o.i)("keplr_keyring_changed",(()=>c(void 0,void 0,void 0,(function*(){yield t.keyRingStore.refreshKeyRingStatus(),yield t.chainStore.updateEnabledChainIdentifiersFromBackground();for(const e of t.chainStore.modularChainInfos)if("cosmos"in e){const n=t.chainStore.getChain(e.chainId);t.accountStore.hasAccount(n.chainId)&&t.accountStore.getAccount(n.chainId).init()}else"starknet"in e?t.starknetAccountStore.getAccount(e.chainId)&&t.accountStore.getAccount(e.chainId).init():"bitcoin"in e&&t.bitcoinAccountStore.getAccount(e.chainId)&&t.accountStore.getAccount(e.chainId).init()})))),n=(0,o.i)("keplr_new_key_created",(e=>c(void 0,void 0,void 0,(function*(){var n;if(yield t.keyRingStore.refreshKeyRingStatus(),e&&(null===(n=t.keyRingStore.selectedKeyInfo)||void 0===n?void 0:n.id)===e){yield t.chainStore.updateEnabledChainIdentifiersFromBackground();for(const e of t.chainStore.modularChainInfos)if("cosmos"in e){const n=t.chainStore.getChain(e.chainId);t.accountStore.hasAccount(n.chainId)&&t.accountStore.getAccount(n.chainId).init()}else"starknet"in e?t.starknetAccountStore.getAccount(e.chainId)&&t.accountStore.getAccount(e.chainId).init():"bitcoin"in e&&t.bitcoinAccountStore.getAccount(e.chainId)&&t.accountStore.getAccount(e.chainId).init()}})))),r=(0,o.i)("keplr_enabled_chain_changed",(e=>c(void 0,void 0,void 0,(function*(){var n;e&&(null===(n=t.keyRingStore.selectedKeyInfo)||void 0===n?void 0:n.id)===e&&(yield t.chainStore.updateEnabledChainIdentifiersFromBackground())})))),a=(0,o.i)("keplr_derivation_path_changed",(e=>c(void 0,void 0,void 0,(function*(){var n;yield t.keyRingStore.refreshKeyRingStatus(),(null==e?void 0:e.chainId)&&t.accountStore.hasAccount(e.chainId)&&t.accountStore.getAccount(e.chainId).init(),(null==e?void 0:e.keyId)&&(null===(n=t.keyRingStore.selectedKeyInfo)||void 0===n?void 0:n.id)===e.keyId&&(yield t.chainStore.updateEnabledChainIdentifiersFromBackground())})))),i=(0,o.i)("keplr_suggested_chain_added",(()=>c(void 0,void 0,void 0,(function*(){yield t.keyRingStore.refreshKeyRingStatus(),yield t.chainStore.updateChainInfosFromBackground(),yield t.chainStore.updateEnabledChainIdentifiersFromBackground()})))),s=(0,o.i)("keplr_suggested_chain_removed",(()=>c(void 0,void 0,void 0,(function*(){yield t.keyRingStore.refreshKeyRingStatus(),yield t.chainStore.updateChainInfosFromBackground(),yield t.chainStore.updateEnabledChainIdentifiersFromBackground()})))),l=(0,o.i)("keplr_keyring_locked",(()=>c(void 0,void 0,void 0,(function*(){yield t.keyRingStore.refreshKeyRingStatus()}))));return()=>{e(),n(),r(),a(),i(),s(),l()}}),[t]),(0,r.useEffect)((()=>{const e=(0,s.autorun)((()=>{if(!t.keyRingStore.isInitialized)return;if(!t.uiConfigStore.isInitialized)return;const e={};for(const n of t.keyRingStore.keyInfos){let t=n.insensitive.keyRingType;if("private-key"===t){const e=n.insensitive.keyRingMeta;e.web3Auth&&e.web3Auth.type&&(t="web3_auth_"+e.web3Auth.type)}t&&(t="keyring_"+t+"_num",e[t]||(e[t]=0),e[t]+=1)}let n="none";if(t.keyRingStore.selectedKeyInfo&&(n=t.keyRingStore.selectedKeyInfo.insensitive.keyRingType,"private-key"===n)){const e=t.keyRingStore.selectedKeyInfo.insensitive.keyRingMeta;e.web3Auth&&e.web3Auth.type&&(n="web3_auth_"+e.web3Auth.type)}t.analyticsStore.setUserProperties(Object.assign({account_count:t.keyRingStore.keyInfos.length,is_developer_mode:t.uiConfigStore.isDeveloper,current_keyring_type:n},e))}));return()=>{e&&e()}}),[]),r.createElement(l.Provider,{value:t},e)},d=()=>{const e=r.useContext(l);if(!e)throw new Error("You have forgot to use StoreProvider");return e}},66222:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(48834);const a=(()=>{const e=new Uint8Array(4);return crypto.getRandomValues(e),r.Buffer.from(e).toString("hex")})(),i=(e,t)=>{const n=n=>{n.data&&"__global_event_except_self"===n.data.type&&n.data.eventName===e&&n.data.viewId!==a&&t(n.data.params)};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}},45698:(e,t,n)=>{n.d(t,{Hn:()=>s.H,lp:()=>i,S0:()=>o,V1:()=>c});var r=n(2784),a=n(48570);function i(e){return r.Children.toArray(e).reduce(((e,t)=>(0,a.isFragment)(t)?t.props.children?e.concat(i(t.props.children)):e:(e.push(t),e)),[])}var s=n(64259);n(5875),n(33783),n(96106),n(47722);const o=()=>"/sidePanel.html"===new URL(window.location.href).pathname,c=e=>{if("/unlock"===e.uri)return;const t=window.location.href.includes("interaction=true"),n=`interaction=true&interactionInternal=${e.isInternal}`;let r=e.uri;r.startsWith("/")&&(r=r.slice(1));let a=browser.runtime.getURL(`/${o()?"sidePanel":"popup"}.html#/`+r);a.includes("?")?a+="&"+n:a+="?"+n,t?window.location.replace(a):window.location.href=a}},14002:(e,t,n)=>{n.d(t,{AT:()=>La,cv:()=>x,lC:()=>Pt,lx:()=>nr,vp:()=>rr});var r=n(73812),a=n(38388),i=n(28805),s=n(77876),o=n(81620),c=n(42078),l=n(96649),u=n(49595),d=n(77010),h=n(42102),p=n(64905),f=n(11090),g=n(97334),m=n(57279),y=n(72664),_=n(89947),b=n(96252),v=(n(48834).Buffer,Object.defineProperty),E=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,A=Object.prototype.hasOwnProperty,I=(e,t)=>{for(var n in t)v(e,n,{get:t[n],enumerable:!0})},k=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of w(t))A.call(e,a)||a===n||v(e,a,{get:()=>t[a],enumerable:!(r=E(t,a))||r.enumerable});return e};I({},{ADDR_BOUND:()=>J,API_VERSION:()=>q,BaseUrl:()=>le,DEFAULT_GLOBAL_CONFIG:()=>fe,HARDENING_4BYTES:()=>ce,HARDENING_BYTE:()=>oe,IS_BROWSER:()=>C,MASK_250:()=>K,MASK_31:()=>G,MAX_STORAGE_ITEM_SIZE:()=>X,NetworkName:()=>ue,OutsideExecutionCallerAny:()=>ae,PAYMASTER_RPC_NODES:()=>me,PRIME:()=>Y,RANGE_FELT:()=>ee,RANGE_I128:()=>te,RANGE_U128:()=>ne,RPC_DEFAULT_NODES:()=>ge,SNIP9_V1_INTERFACE_ID:()=>ie,SNIP9_V2_INTERFACE_ID:()=>se,SYSTEM_MESSAGES:()=>ye,StarknetChainId:()=>de,SupportedRpcVersion:()=>pe,TEXT_TO_FELT_MAX_LEN:()=>Z,TRANSACTION_VERSION:()=>z,TransactionHashPrefix:()=>he,UDC:()=>re,ZERO:()=>W});var S={};I(S,{JRPC:()=>T,PAYMASTER_API:()=>o,RPCSPEC07:()=>r,RPCSPEC08:()=>i});var T={};k(S,i,"default");var x={};I(x,{IS_BROWSER:()=>C,addHexPrefix:()=>$,arrayBufferToString:()=>N,atobUniversal:()=>R,btoaUniversal:()=>B,buf2hex:()=>D,calcByteLength:()=>F,concatenateArrayBuffer:()=>j,padLeft:()=>L,pascalToSnake:()=>H,removeHexPrefix:()=>V,sanitizeBytes:()=>M,sanitizeHex:()=>U,utf8ToArray:()=>P});var C="undefined"!=typeof window,O="0";function N(e){return new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),"")}function P(e){return(new TextEncoder).encode(e)}function R(e){return c.US.decode(e)}function B(e){return c.US.encode(new Uint8Array(e))}function D(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function V(e){return e.replace(/^0x/i,"")}function $(e){return`0x${V(e)}`}function L(e,t,n=O){return function(e,t,n,r=O){const a=t-e.length;let i=e;if(a>0){const t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function F(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function M(e,t=8,n=O){return L(e,F(e,t),n)}function U(e){const t=M(V(e),2);return t?$(t):t}var H=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function j(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(e,r),r+=e.byteLength})),n}var Z=31,{ETransactionVersion:z}=i,W=0n,K=2n**250n-1n,G=2n**31n-1n,q=W,Y=2n**251n+17n*2n**192n+1n,X=256n,J=2n**251n-X,Q=(e,t)=>({min:e,max:t}),ee=Q(W,Y-1n),te=Q(-(2n**127n),2n**127n-1n),ne=Q(W,2n**128n-1n),re={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ae="0x414e595f43414c4c4552",ie="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",se="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",oe=128,ce=2147483648n,le={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},ue={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},de={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},he={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},pe={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},fe={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:S.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},ge={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},me={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ye={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},_e=class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...fe}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}.getInstance(),be={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},ve=class e{static instance;config;constructor(){this.config=_e}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return(new Date).toISOString()}shouldLog(e){const t=this.config.get("logLevel","INFO");return e<=be[t]}formatMessage(e){const{level:t,message:n,timestamp:r,data:a}=e;let i=`[${r}] ${t}: ${n}`;if(a)try{i+=`\n${JSON.stringify(a,null,2)}`}catch(e){i+=`\n[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,n){if(!this.shouldLog(be[e]))return;const r={level:e,message:t,timestamp:this.getTimestamp(),data:n},a=this.formatMessage(r);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(be).filter((e=>this.shouldLog(be[e])&&"OFF"!==e))}}.getInstance(),Ee={};I(Ee,{RpcChannel:()=>Pa}),I({},{BlockStatus:()=>Se,BlockTag:()=>Te,EDAMode:()=>Pe,EDataAvailabilityMode:()=>Ne,ETH_ADDRESS:()=>Me,ETransactionExecutionStatus:()=>Ve,ETransactionStatus:()=>De,ETransactionVersion:()=>xe,ETransactionVersion2:()=>Ce,ETransactionVersion3:()=>Oe,EntryPointType:()=>we,Literal:()=>Fe,NON_ZERO_PREFIX:()=>Ue,OutsideExecutionTypesV1:()=>He,OutsideExecutionTypesV2:()=>je,OutsideExecutionVersion:()=>Ze,RPC:()=>S,TransactionExecutionStatus:()=>ke,TransactionFinalityStatus:()=>Ie,TransactionType:()=>Ae,TypedDataRevision:()=>l.P,Uint:()=>Le,ValidateType:()=>$e,isRPC08_FeeEstimate:()=>Re,isRPC08_ResourceBounds:()=>Be});var we={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},Ae={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},Ie={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},ke={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},Se={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},Te={PENDING:"pending",LATEST:"latest"},{ETransactionVersion:xe}=i,{ETransactionVersion2:Ce}=i,{ETransactionVersion3:Oe}=i,{EDataAvailabilityMode:Ne}=i,{EDAMode:Pe}=i;function Re(e){return"l1_data_gas_consumed"in e}function Be(e){return"l1_data_gas"in e}var{ETransactionStatus:De}=i,{ETransactionExecutionStatus:Ve}=i,$e={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Le={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Fe={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Me="core::starknet::eth_address::EthAddress",Ue="core::zeroable::NonZero::",He={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},je={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},Ze={UNSUPPORTED:"0",V1:"1",V2:"2"};I({},{parse:()=>We,parseAlwaysAsBig:()=>Ke,stringify:()=>Ge});var ze=e=>{if(!u.U(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},We=e=>u.Qc(String(e),void 0,ze),Ke=e=>u.Qc(String(e),void 0,u.A7),Ge=(e,t,n,r)=>u.Pz(e,t,n,r),qe=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise((e=>{this.delayPromiseResolve=e}))),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout((()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)}),this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:Ge(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const e=this.sendBatch(Object.values(a));Object.keys(a).forEach((t=>{this.batchPromises[t]=e}))}const i=await this.batchPromises[r];delete this.batchPromises[r];const s=i.find((e=>e.id===r));if(!s)throw new Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function Ye(e,t){if(!e)throw new Error(t||"Assertion failure")}function Xe(e,t){if(!e){if(0!==t.length)throw new Error("AssertionX failure: message function should not require arguments");t()}}I({},{addPercent:()=>wt,assertInRange:()=>pt,bigNumberishArrayToDecimalStringArray:()=>ft,bigNumberishArrayToHexadecimalStringArray:()=>gt,cleanHex:()=>ht,getDecimalString:()=>yt,getHexString:()=>_t,getHexStringArray:()=>bt,hexToBytes:()=>Et,hexToDecimalString:()=>dt,isBigNumberish:()=>It,isHex:()=>at,isStringWholeNumber:()=>mt,stringToSha256ToArrayBuff4:()=>At,toBigInt:()=>it,toCairoBool:()=>vt,toHex:()=>ot,toHex64:()=>ut,toHexString:()=>ct,toStorageKey:()=>lt,tryToBigInt:()=>st});var Je=e=>void 0===e||void 0===e;function Qe(e){return"number"==typeof e}function et(e){return"boolean"==typeof e}function tt(e){return"bigint"==typeof e}function nt(e){return"string"==typeof e}function rt(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function at(e){return/^0x[0-9a-f]*$/i.test(e)}function it(e){return BigInt(e)}function st(e){return e?BigInt(e):void 0}function ot(e){return $(it(e).toString(16))}var ct=ot;function lt(e){return $(it(e).toString(16).padStart(64,"0"))}function ut(e){const t=$(it(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function dt(e){return BigInt($(e)).toString(10)}function ht(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function pt(e,t,n,r=""){const a=""===r?"invalid length":`invalid ${r} length`,i=BigInt(e),s=BigInt(t),o=BigInt(n);Ye(i>=s&&i<=o,`Message not signable, ${a}.`)}function ft(e){return e.map((e=>it(e).toString(10)))}function gt(e){return e.map((e=>ot(e)))}function mt(e){return/^\d+$/.test(e)}function yt(e){if(at(e))return dt(e);if(mt(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function _t(e){if(at(e))return e;if(mt(e))return ct(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function bt(e){return e.map(_t)}function vt(e){return(+e).toString()}function Et(e){if(!at(e))throw new Error(`${e} needs to be a hex-string`);let t=V(e);return t.length%2!=0&&(t=`0${t}`),(0,d.hexToBytes)(t)}function wt(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function At(e){var t;return Et(ot((t=BigInt($(D((0,h.JQ)(e)))),Number(t&G))))}function It(e){return Qe(e)||tt(e)||nt(e)&&(at(e)||mt(e))}function kt(e){const t=V(ot(BigInt(e))),n=t.length%2==0?t:`0${t}`;return $((0,p.keccak)(Et($(n))).toString(16))}function St(e){const t=BigInt(function(e){return $((0,p.keccak)(P(e)).toString(16))}(e));return t&K}function Tt(e){return ot(St(e))}function xt(e){return Qe(e)||tt(e)?ot(e):at(e)?e:mt(e)?ot(e):Tt(e)}function Ct(e){const t=$(e.reduce(((e,t)=>e+V(ot(t)).padStart(64,"0")),""));return $((0,d.ci)((0,f.fr)(Et(t))))}function Ot(e,t,n,r,a){return Ct([e,t,a,n,r.length,...r])}function Nt(e,t,n){return Ct([e,t,n.length,...n])}I({},{getL1MessageHash:()=>Nt,getL2MessageHash:()=>Ot,getSelector:()=>xt,getSelectorFromName:()=>Tt,keccakBn:()=>kt,solidityUint256PackedKeccak256:()=>Ct,starknetKeccak:()=>St});var Pt={};function Rt(e){return/^[\x00-\x7F]*$/.test(e)}function Bt(e){return e.length<=Z}function Dt(e){return/^[0-9]*$/i.test(e)}function Vt(e){return nt(e)&&!at(e)&&!mt(e)}I(Pt,{decodeShortString:()=>Ut,encodeShortString:()=>Mt,isASCII:()=>Rt,isDecimalString:()=>Dt,isLongText:()=>Lt,isShortString:()=>Bt,isShortText:()=>$t,isText:()=>Vt,splitLongString:()=>Ft});var $t=e=>Vt(e)&&Bt(e),Lt=e=>Vt(e)&&!Bt(e);function Ft(e){const t=RegExp(`[^]{1,${Z}}`,"g");return e.match(t)||[]}function Mt(e){if(!Rt(e))throw new Error(`${e} is not an ASCII string`);if(!Bt(e))throw new Error(`${e} is too long`);return $(e.replace(/./g,(e=>e.charCodeAt(0).toString(16))))}function Ut(e){if(!Rt(e))throw new Error(`${e} is not an ASCII string`);if(at(e))return V(e).replace(/.{2}/g,(e=>String.fromCharCode(parseInt(e,16))));if(Dt(e))return Ut("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}function Ht(e){const t=0n===BigInt(e.pending_word)?"":Ut(ot(e.pending_word));return e.data.reduce(((e,t)=>e+(0n===BigInt(t)?"":Ut(ot(t)))),"")+t}function jt(e){const t=Ft(e),n=t[t.length-1],r=t.map(Mt),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}I({},{byteArrayFromString:()=>jt,stringFromByteArray:()=>Ht});function Zt(e){if(tt(e)||Number.isInteger(e))return e.toString();if(nt(e)){if(at(e))return BigInt(e).toString();if(Vt(e)){if(!Bt(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(Mt(e)).toString()}if(mt(e))return e}if(et(e))return""+ +e;throw new Error(`${e} can't be computed by felt()`)}I({},{felt:()=>Nn,getAbiContractVersion:()=>Tn,getArrayType:()=>In,isCairo1Abi:()=>kn,isCairo1Type:()=>An,isLen:()=>rn,isTypeArray:()=>sn,isTypeBool:()=>mn,isTypeByteArray:()=>vn,isTypeBytes31:()=>bn,isTypeContractAddress:()=>yn,isTypeEnum:()=>un,isTypeEthAddress:()=>_n,isTypeFelt:()=>an,isTypeLiteral:()=>gn,isTypeNamedTuple:()=>cn,isTypeNonZero:()=>Sn,isTypeOption:()=>dn,isTypeResult:()=>hn,isTypeSecp256k1Point:()=>wn,isTypeStruct:()=>ln,isTypeTuple:()=>on,isTypeU96:()=>En,isTypeUint:()=>pn,isTypeUint256:()=>fn,tuple:()=>On,uint256:()=>xn,uint512:()=>Cn});var zt=(1n<<128n)-1n,Wt=(1n<<256n)-1n,Kt=0n,Gt=340282366920938463463374607431768211455n,qt=340282366920938463463374607431768211455n,Yt=0n,Xt=0n,Jt=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){const n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){const n=e.validate(t[0]);this.low=n&zt,this.high=n>>128n}else{if(2!==t.length)throw Error("Incorrect constructor parameters");{const n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}}}static validate(e){const t=BigInt(e);if(t<Kt)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>Wt)throw new Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){const n=BigInt(e),r=BigInt(t);if(n<Yt||n>Gt)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(r<Xt||r>qt)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:$(this.low.toString(16)),high:$(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[Zt(this.low),Zt(this.high)]}},Qt=(1n<<512n)-1n,en=0n,tn=0n,nn=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){const n=e.validate(t[0]);this.limb0=n&zt,this.limb1=(n&zt<<128n)>>128n,this.limb2=(n&zt<<256n)>>256n,this.limb3=n>>384n}else{if(4!==t.length)throw Error("Incorrect Uint512 constructor parameters");{const n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}}}static validate(e){const t=BigInt(e);if(t<en)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>Qt)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,r){const a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach(((e,t)=>{if(e<tn||e>zt)throw Error(`limb${t} is not in the range of a u128 number`)})),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:$(this.limb0.toString(16)),limb1:$(this.limb1.toString(16)),limb2:$(this.limb2.toString(16)),limb3:$(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[Zt(this.limb0),Zt(this.limb1),Zt(this.limb2),Zt(this.limb3)]}},rn=e=>/_len$/.test(e),an=e=>"felt"===e||"core::felt252"===e,sn=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),on=e=>/^\(.*\)$/i.test(e),cn=e=>/\(.*\)/i.test(e)&&e.includes(":"),ln=(e,t)=>e in t,un=(e,t)=>e in t,dn=e=>e.startsWith("core::option::Option::"),hn=e=>e.startsWith("core::result::Result::"),pn=e=>Object.values(Le).includes(e),fn=e=>Jt.isAbiType(e),gn=e=>Object.values(Fe).includes(e),mn=e=>"core::bool"===e,yn=e=>e===Fe.ContractAddress,_n=e=>e===Me,bn=e=>"core::bytes_31::bytes31"===e,vn=e=>"core::byte_array::ByteArray"===e,En=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,wn=e=>e===Fe.Secp256k1Point,An=e=>e.includes("::"),In=e=>An(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function kn(e){const{cairo:t}=Tn(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function Sn(e){return e.startsWith(Ue)}function Tn(e){if(e.find((e=>"interface"===e.type)))return{cairo:"1",compiler:"2"};const t=e.find((e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length)));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return An(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var xn=e=>new Jt(e).toUint256DecimalString(),Cn=e=>new nn(e).toUint512DecimalString(),On=(...e)=>({...e});function Nn(e){return Zt(e)}var Pn=class{variant;constructor(e){const t=Object.values(e);if(0===t.length)throw new Error("This Enum must have at least 1 variant");if(1!==t.filter((e=>!Je(e))).length)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find((e=>!Je(e)))}activeVariant(){const e=Object.entries(this.variant).find((e=>!Je(e[1])));return Je(e)?"":e[0]}},Rn={Some:0,None:1},Bn=class{Some;None;constructor(e,t){if(!(e in Object.values(Rn)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===Rn.Some){if(Je(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Je(this.Some)}isNone(){return!0===this.None}},Dn={Ok:0,Err:1},Vn=class{Ok;Err;constructor(e,t){if(!(e in Object.values(Dn)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Dn.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!Je(this.Ok))return this.Ok;if(!Je(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Je(this.Ok)}isErr(){return!Je(this.Err)}},$n=(e,t,n)=>{if(!tt(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)};function Ln(e,t,n){return Object.entries(e).reduce(((r,[a,i])=>{const s=n??t[a];if(!(a in t)&&!n)return r[a]=i,r;if("string"===s){if(Array.isArray(e[a])){const t=Ln(e[a],e[a].map((e=>s)));return r[a]=Object.values(t).join(""),r}return $n(e,t,a),r[a]=Ut(i),r}if("number"===s)return $n(e,t,a),r[a]=Number(i),r;if("function"==typeof s)return r[a]=s(i),r;if(Array.isArray(s)){const t=Ln(e[a],s,s[0]);return r[a]=Object.values(t),r}return rt(s)?(r[a]=Ln(e[a],s),r):(((e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)})(e,t,a),r)}),{})}function Fn(e,t,n){return"constructor"===e&&!n&&!t.length}function Mn(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return Number.POSITIVE_INFINITY}function Un(e){return An(e)?function(e){const t=e.slice(1,-1),n=[];let r,a=0;for(;a<t.length;){switch(!0){case"("===t[a]:r=a+Mn(t.slice(a),"(",")")+1;break;case t.startsWith("core::result::Result::<",a)||t.startsWith("core::array::Array::<",a)||t.startsWith("core::option::Option::<",a):r=a+Mn(t.slice(a),"<",">")+1;break;default:{const e=t.indexOf(",",a);r=-1!==e?e:Number.POSITIVE_INFINITY}}n.push(t.slice(a,r)),a=r+2}return n}(e):function(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1;const i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(t);let a=r.split(",").map((e=>n.length?e.replace(" ",n.shift()):e));return cn(e)&&(a=a.reduce(((e,t)=>e.concat(function(e){const t=e.substring(0,e.indexOf(":"));return{name:t,type:e.substring(t.length+1)}}(t))),[])),a}(e)}var Hn=class e{content;arrayType;constructor(t,n){Ye(e.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}try{e.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}Ye(e.getFixedArraySize(n)===t.length,`The ABI type ${n} is expecting ${e.getFixedArraySize(n)} items. ${t.length} items provided.`),this.content=t,this.arrayType=n}static getFixedArraySize(e){const t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{const t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw new Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce(((e,t,n)=>(e[n]=t,e)),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function jn(e,t){switch(!0){case Jt.isAbiType(e):return new Jt(t).toApiRequest();case nn.isAbiType(e):return new nn(t).toApiRequest();case bn(e):return Mt(t.toString());case wn(e):{const e=V(ot(t)).padStart(128,"0"),n=xn($(e.slice(-64))),r=xn($(e.slice(0,-64)));return[Nn(r.low),Nn(r.high),Nn(n.low),Nn(n.high)]}default:return Nn(t)}}function Zn(e,t,n,r){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Hn.isTypeFixedArray(t)){const a=Hn.getFixedArrayType(t);let i=[];if(Array.isArray(e))i=new Hn(e,t).content;else{if("object"!=typeof e)throw new Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);i=Object.values(e),Ye(i.length===Hn.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${Hn.getFixedArraySize(t)} items. ${i.length} items provided.`)}return i.reduce(((e,t)=>e.concat(Zn(t,a,n,r))),[])}if(Array.isArray(e)){const a=[];a.push(Nn(e.length));const i=In(t);return e.reduce(((e,t)=>e.concat(Zn(t,i,n,r))),a)}if(n[t]&&n[t].members.length){if(Jt.isAbiType(t))return new Jt(e).toApiRequest();if(nn.isAbiType(t))return new nn(e).toApiRequest();if(_n(t))return jn(t,e);if(vn(t))return function(e){const t=jt(e);return[t.data.length.toString(),...t.data.map((e=>e.toString())),t.pending_word.toString(),t.pending_word_len.toString()]}(e);const{members:a}=n[t],i=e;return a.reduce(((e,t)=>e.concat(Zn(i[t.name],t.type,n,r))),[])}if(on(t)){const a=function(e,t){const n=Un(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${r}\n      expected: ${n}`);return n.map(((e,t)=>({element:r[t],type:e.type??e})))}(e,t);return a.reduce(((e,t)=>{const a=Zn(t.element,t.type,n,r);return e.concat(a)}),[])}if(Jt.isAbiType(t))return new Jt(e).toApiRequest();if(nn.isAbiType(t))return new nn(e).toApiRequest();if(un(t,r)){const{variants:a}=r[t];if(dn(t)){const t=e;if(t.isSome()){const e=a.find((e=>"Some"===e.name));if(Je(e))throw Error("Error in abi : Option has no 'Some' variant.");const i=e.type;if("()"===i)return Rn.Some.toString();const s=Zn(t.unwrap(),i,n,r);return Array.isArray(s)?[Rn.Some.toString(),...s]:[Rn.Some.toString(),s]}return Rn.None.toString()}if(hn(t)){const t=e;if(t.isOk()){const e=a.find((e=>"Ok"===e.name));if(Je(e))throw Error("Error in abi : Result has no 'Ok' variant.");const i=e.type;if("()"===i)return Dn.Ok.toString();const s=Zn(t.unwrap(),i,n,r);return Array.isArray(s)?[Dn.Ok.toString(),...s]:[Dn.Ok.toString(),s]}const i=a.find((e=>"Err"===e.name));if(Je(i))throw Error("Error in abi : Result has no 'Err' variant.");const s=i.type;if("()"===s)return Dn.Err.toString();const o=Zn(t.unwrap(),s,n,r);return Array.isArray(o)?[Dn.Err.toString(),...o]:[Dn.Err.toString(),o]}const i=e,s=i.activeVariant(),o=a.find((e=>e.name===s));if(Je(o))throw Error(`Not find in abi : Enum has no '${s}' variant.`);const c=o.type,l=a.findIndex((e=>e.name===s));if("()"===c)return l.toString();const u=Zn(i.unwrap(),c,n,r);return Array.isArray(u)?[l.toString(),...u]:[l.toString(),u]}if(Sn(t))return jn(In(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return jn(t,e)}function zn(e,t){let n;switch(!0){case mn(e):return n=t.next().value,Boolean(BigInt(n));case Jt.isAbiType(e):const r=t.next().value,a=t.next().value;return new Jt(r,a).toBigInt();case nn.isAbiType(e):const i=t.next().value,s=t.next().value,o=t.next().value,c=t.next().value;return new nn(i,s,o,c).toBigInt();case _n(e):return n=t.next().value,BigInt(n);case bn(e):return n=t.next().value,Ut(n);case wn(e):const l=V(t.next().value).padStart(32,"0"),u=V(t.next().value).padStart(32,"0"),d=V(t.next().value).padStart(32,"0"),h=V(t.next().value).padStart(32,"0");return BigInt($(u+l+h+d));default:return n=t.next().value,BigInt(n)}}function Wn(e,t,n,r){if("()"===t.type)return{};if(Jt.isAbiType(t.type)){const t=e.next().value,n=e.next().value;return new Jt(t,n).toBigInt()}if(nn.isAbiType(t.type)){const t=e.next().value,n=e.next().value,r=e.next().value,a=e.next().value;return new nn(t,n,r,a).toBigInt()}if(vn(t.type)){const t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(ot(e.next().value));return Ht({data:t,pending_word:ot(e.next().value),pending_word_len:BigInt(e.next().value)})}if(Hn.isTypeFixedArray(t.type)){const a=[],i={name:"",type:Hn.getFixedArrayType(t.type)},s=Hn.getFixedArraySize(t.type);for(;a.length<s;)a.push(Wn(e,i,n,r));return a}if(sn(t.type)){const a=[],i={name:"",type:In(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(Wn(e,i,n,r));return a}if(Sn(t.type)){const a={name:"",type:In(t.type)};return Wn(e,a,n,r)}if(n&&t.type in n&&n[t.type])return _n(t.type)?zn(t.type,e):n[t.type].members.reduce(((t,a)=>(t[a.name]=Wn(e,a,n,r),t)),{});if(r&&t.type in r&&r[t.type]){const a=Number(e.next().value),i=r[t.type].variants.reduce(((t,i,s)=>s===a?(t[i.name]=Wn(e,{name:"",type:i.type},n,r),t):(t[i.name]=void 0,t)),{});if(t.type.startsWith("core::option::Option")){const e=a===Rn.Some?i.Some:void 0;return new Bn(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===Dn.Ok?i.Ok:i.Err,new Vn(a,e)}return new Pn(i)}if(on(t.type))return Un(t.type).reduce(((t,a,i)=>{const s=a?.name?a.name:i,o={name:s,type:a?.type?a.type:a};return t[s]=Wn(e,o,n,r),t}),{});if(sn(t.type)){const a=[],i={name:"",type:In(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(Wn(e,i,n,r));return a}return zn(t.type,e)}function Kn(e,t,n,r,a){const{name:i,type:s}=t;let o;switch(!0){case rn(i):return o=e.next().value,BigInt(o);case n&&s in n||on(s):case r&&un(s,r):case Hn.isTypeFixedArray(s):return Wn(e,t,n,r);case sn(s):if(An(s))return Wn(e,t,n,r);const c=[];if(a&&a[`${i}_len`]){const s=a[`${i}_len`];for(;c.length<s;)c.push(Wn(e,{name:i,type:t.type.replace("*","")},n,r))}return c;case Sn(s):return Wn(e,t,n,r);default:return zn(s,e)}}var Gn=(e,t)=>{if(Ye(nt(e)||Qe(e)||tt(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),nt(e)&&!at(e))return;const n=BigInt(e.toString(10));Ye(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},qn=(e,t)=>{let n;switch(Qe(e)&&Ye(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),Ye(nt(e)||Qe(e)||tt(e)||rt(e)&&"low"in e&&"high"in e||rt(e)&&["limb0","limb1","limb2","limb3"].every((t=>t in e)),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case Le.u256:n=new Jt(e).toBigInt();break;case Le.u512:n=new nn(e).toBigInt();break;default:n=it(e)}switch(t.type){case Le.u8:Ye(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case Le.u16:Ye(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case Le.u32:Ye(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case Le.u64:Ye(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case Le.u128:Ye(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case Le.u256:Ye(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case Le.u512:Ye(nn.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case Fe.ClassHash:case Fe.ContractAddress:Ye(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case Fe.Secp256k1Point:Ye(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case Fe.U96:Ye(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},Yn=(e,t)=>{Ye(et(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},Xn=(e,t,n)=>{if(t.type!==Le.u256&&t.type!==Le.u512)if(_n(t.type)){Ye(!rt(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const n=BigInt(e.toString(10));Ye(n>=0n&&n<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`)}else Ye(rt(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach((({name:n})=>{Ye(Object.keys(e).includes(n),`Validate: arg ${t.name} should have a property ${n}`)}));else qn(e,t)},Jn=(e,t)=>{Ye(rt(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(dn(t.type)&&r.includes("isSome")&&r.includes("isNone")||hn(t.type)&&r.includes("isOk")&&r.includes("isErr")||r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},Qn=(e,t)=>{Ye(rt(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},er=(e,t,n,r)=>{const a=sn(t.type),i=a?In(t.type):Hn.getFixedArrayType(t.type);if(a&&an(i)&&Lt(e))return;let s=[];if(a)Ye(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw new Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case an(i):s.forEach((e=>Gn(e,t)));break;case on(i):s.forEach((e=>Qn(e,{name:t.name,type:i})));break;case sn(i):s.forEach((e=>er(e,{name:"",type:i},n,r)));break;case ln(i,n):s.forEach((e=>Xn(e,{name:t.name,type:i},n)));break;case un(i,r):s.forEach((e=>Jn(e,{name:t.name,type:i})));break;case pn(i)||gn(i):s.forEach((e=>qn(e,{name:"",type:i})));break;case mn(i):s.forEach((e=>Yn(e,t)));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function tr(e,t,n,r){e.inputs.reduce(((e,a)=>{const i=t[e];switch(!0){case rn(a.name):return e;case an(a.type):Gn(i,a);break;case bn(a.type):((e,t)=>{Ye(nt(e),`Validate: arg ${t.name} should be a string.`),Ye(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)})(i,a);break;case pn(a.type)||gn(a.type):qn(i,a);break;case mn(a.type):Yn(i,a);break;case vn(a.type):((e,t)=>{Ye(nt(e),`Validate: arg ${t.name} should be a string.`)})(i,a);break;case sn(a.type)||Hn.isTypeFixedArray(a.type):er(i,a,n,r);break;case ln(a.type,n):Xn(i,a,n);break;case un(a.type,r):Jn(i,a);break;case on(a.type):Qn(i,a);break;case Sn(a.type):((e,t)=>{const n=In(t.type);switch(Ye(pn(n)&&n!==nn.abiSelector||an(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case an(n):Gn(e,t),Ye(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case pn(n):qn(e,{name:"",type:n}),n===Le.u256?Ye(new Jt(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):Ye(it(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}})(i,a);break;default:throw new Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1}),0)}var nr=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e){const t=function(e){return e.find((e=>"interface"===e.type))?2:kn(e)?1:0}(e);if(0===t||1===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce(((e,t)=>rn(t.name)?e:e+1),0)}getMethod(e){return this.abi.find((t=>t.name===e))}getLegacyFormat(){return this.abi}}(e);if(2===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){const t=this.abi.find((e=>"interface"===e.type));return t?.items?.find((t=>t.name===e))}getLegacyFormat(){return this.abi.flatMap((e=>"interface"===e.type?e.items:e))}}(e);throw Error(`Unsupported ABI version ${t}`)}(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,n=[]){e!==$e.DEPLOY&&Ye(this.abi.filter((t=>{if("function"!==t.type)return!1;const n="view"===t.stateMutability||"view"===t.state_mutability;return e===$e.INVOKE?!n:n})).map((e=>e.name)).includes(t),(e===$e.INVOKE?"invocable":"viewable")+" method not found in abi");const r=this.abi.find((n=>e===$e.DEPLOY?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type));if(Fn(t,n,r))return;const a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${n.length}`);tr(r,n,this.structs,this.enums)}compile(e,t){const n=this.abi.find((t=>t.name===e));if(Fn(e,t,n))return[];let r;if(Array.isArray(t))r=t;else{const e=function(e,t,n,r){const a=(e,t)=>{if(Hn.isTypeFixedArray(t))return function(e,t){const n=Hn.getFixedArrayType(t),r=Hn.getFixedArraySize(t);if(Array.isArray(e)){if(r!==e.length)throw new Error(`ABI type ${t}: array provided do not includes  ${r} items. ${e.length} items provided.`);return e.map((e=>a(e,n)))}if(r!==Object.keys(e).length)throw new Error(`ABI type ${t}: object provided do not includes  ${r} properties. ${Object.keys(e).length} items provided.`);return a(e,n)}(e,t);if(sn(t))return function(e,t){const n=In(t);return nt(e)?e:e.map((e=>a(e,n)))}(e,t);if(un(t,r)){const n=r[t];return s(e,n)}if(on(t))return function(e,t){const n=Un(t).reduce(((t,n,r)=>{const i=Object.keys(e),s=n?.type?n.type:n;return o=a(e[i[r]],s),Object.defineProperty(t,r.toString(),{enumerable:!0,value:o??e[i[r]]}),t;var o}),{});return n}(e,t);if(_n(t))return e;if(Sn(t))return e;if(vn(t))return e;if(En(t))return e;if(wn(t))return e;if(Jt.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!("low"in n)||!("high"in n))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:n.low,high:n.high}}if(nn.isAbiType(t)){const n=e;if("object"!=typeof n)return n;if(!["limb0","limb1","limb2","limb3"].every((e=>e in n)))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:n.limb0,limb1:n.limb1,limb2:n.limb2,limb3:n.limb3}}if(ln(t,n)){const r=n[t].members;return i(e,r)}return e},i=(e,t)=>t.reduce(((t,n)=>{if("undefined"===e[n.name]&&(An(n.type)||!rn(n.name)))throw Error(`Your object needs a property with key : ${n.name} .`);var r;return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r??e[n.name]}),t}),{}),s=(e,t)=>{if(hn(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),i=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return n.isOk()?new Vn(Dn.Ok,a(e.unwrap(),r)):new Vn(Dn.Err,a(e.unwrap(),i))}if(dn(t.name)){const n=e,r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return n.isSome()?new Bn(Rn.Some,a(n.unwrap(),r)):new Bn(Rn.None,{})}const n=e,r=Object.entries(n.variant).map((e=>{if(Je(e[1]))return e;const r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?e:[e[0],a(n.unwrap(),r)]}));return new Pn(Object.fromEntries(r))};return t.reduce(((t,n)=>{return rn(n.name)&&!An(n.type)||(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r})),t;var r}),{})}(t,n.inputs,this.structs,this.enums);r=Object.values(e),tr(n,r,this.structs,this.enums)}const a=r[Symbol.iterator](),i=n.inputs.reduce(((e,t)=>rn(t.name)&&!An(t.type)?e:e.concat(function(e,t,n,r){const{name:a,type:i}=t;let{value:s}=e.next();switch(!0){case Hn.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return Zn(s,t.type,n,r);case sn(i):if(!Array.isArray(s)&&!Vt(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return nt(s)&&(s=Ft(s)),Zn(s,t.type,n,r);case Sn(i):return jn(In(i),s);case _n(i):return jn(i,s);case ln(i,n)||on(i)||Jt.isAbiType(i):case un(i,r):return Zn(s,i,n,r);default:return jn(i,s)}}(a,t,this.structs,this.enums))),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){const t=e=>{const t=(e,n=".")=>{const r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap((([e,a])=>{let i=a;"entrypoint"===e?i=Tt(i):Lt(i)&&(i=jt(i));const s=Array.isArray(r)&&"0"===e?"$$len":e;if(tt(i))return[[`${n}${s}`,Nn(i)]];if(Object(i)===i){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),r=[...Object.getOwnPropertyNames(i),...e];if(r.includes("isSome")&&r.includes("isNone")){const e=i,r=e.isSome()?Rn.Some:Rn.None;return e.isSome()?t({0:r,1:e.unwrap()},`${n}${s}.`):[[`${n}${s}`,Nn(r)]]}if(r.includes("isOk")&&r.includes("isErr")){const e=i,r=e.isOk()?Dn.Ok:Dn.Err;return t({0:r,1:e.unwrap()},`${n}${s}.`)}if(r.includes("variant")&&r.includes("activeVariant")){const e=i,r=e.activeVariant(),a=Object.keys(e.variant).findIndex((e=>e===r));return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${n}${s}`,Nn(a)]]:t({0:a,1:e.unwrap()},`${n}${s}.`)}return t(i,`${n}${s}.`)}return[[`${n}${s}`,Nn(i)]]}))};return Object.fromEntries(t(e))};let n;if(Array.isArray(e)){const r=t({...e});n=Object.values(r)}else{const r=t(e);n=Object.values(r)}return Object.defineProperty(n,"__compiled__",{enumerable:!1,writable:!1,value:!0}),n}parse(e,t){const{outputs:n}=this.abi.find((t=>t.name===e)),r=t.flat()[Symbol.iterator](),a=n.flat().reduce(((e,t,n)=>{const a=t.name??n;return e[a]=Kn(r,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e}),{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return Ln(this.parse(e,t),n)}static getAbiStruct(e){return e.filter((e=>"struct"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{})}static getAbiEnum(e){const t=e.filter((e=>"enum"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map((e=>ot(e)))}decodeParameters(e,t){const n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map((e=>Kn(r,{name:"",type:e},this.structs,this.enums)));return 1===a.length?a[0]:a}},rr={};function ar(e){return[...e,e.length].reduce(((e,t)=>p.pedersen(it(e),it(t))),0).toString()}function ir(e,t,n,r,a,i,s,o=[]){const c=ar(a);return ar([e,t,n,r,c,i,s,...o])}function sr(e,t,n,r,a,i,s){return ir(he.DECLARE,n,t,0,[e],r,a,[i,...s?[s]:[]])}function or(e,t,n,r,a,i,s,o){const c=[t,r,...n];return ir(he.DEPLOY_ACCOUNT,a,e,0,c,i,s,[o])}function cr(e,t,n,r,a,i){return ir(he.INVOKE,t,e,0,n,r,a,[i])}function lr(e,t,n,r,a,i){const s=[e,...r];return ir(he.L1_HANDLER,0,t,xt(n),s,0,a,[i])}I(rr,{calculateContractAddressFromHash:()=>Dr,calculateDeclareTransactionHash:()=>xr,calculateDeployAccountTransactionHash:()=>Cr,calculateInvokeTransactionHash:()=>Tr,calculateL2MessageTxHash:()=>lr,computeCompiledClassHash:()=>Hr,computeContractClassHash:()=>zr,computeHashOnElements:()=>Pr,computeHintedClassHash:()=>Lr,computeLegacyContractClassHash:()=>Fr,computePedersenHash:()=>Or,computePedersenHashOnElements:()=>Rr,computePoseidonHash:()=>Nr,computePoseidonHashOnElements:()=>Br,computeSierraContractClassHash:()=>Zr,formatSpaces:()=>$r,getL1MessageHash:()=>Nt,getL2MessageHash:()=>Ot,getSelector:()=>xt,getSelectorFromName:()=>Tt,hashByteCodeSegments:()=>Ur,keccakBn:()=>kt,poseidon:()=>g,solidityUint256PackedKeccak256:()=>Ct,starknetKeccak:()=>St}),I({},{calculateDeclareTransactionHash:()=>sr,calculateDeployAccountTransactionHash:()=>or,calculateL2MessageTxHash:()=>lr,calculateTransactionHash:()=>cr,calculateTransactionHashCommon:()=>ir,computeHashOnElements:()=>ar}),I({},{starkCurve:()=>p,weierstrass:()=>m}),I({},{calculateDeclareTransactionHash:()=>kr,calculateDeployAccountTransactionHash:()=>Ir,calculateInvokeTransactionHash:()=>Sr,calculateTransactionHashCommon:()=>Ar,encodeDataResourceBoundsL1:()=>vr,encodeResourceBoundsL1:()=>_r,encodeResourceBoundsL2:()=>br,hashDAMode:()=>yr,hashFeeField:()=>Er,hashFeeFieldV3B3:()=>wr});var ur=e=>e.map((e=>BigInt(e))),dr=32n,hr=128n,pr=64n+hr,fr=BigInt(Mt("L1_GAS")),gr=BigInt(Mt("L2_GAS")),mr=BigInt(Mt("L1_DATA"));function yr(e,t){return(BigInt(e)<<dr)+BigInt(t)}function _r(e){return(fr<<pr)+(BigInt(e.l1_gas.max_amount)<<hr)+BigInt(e.l1_gas.max_price_per_unit)}function br(e){return(gr<<pr)+(BigInt(e.l2_gas.max_amount)<<hr)+BigInt(e.l2_gas.max_price_per_unit)}function vr(e){return(mr<<pr)+(BigInt(e.l1_data_gas.max_amount)<<hr)+BigInt(e.l1_data_gas.max_price_per_unit)}function Er(e,t){const n=_r(t),r=br(t);return(0,p.poseidonHashMany)([BigInt(e),n,r])}function wr(e,t){const n=_r(t),r=br(t),a=vr(t);return(0,p.poseidonHashMany)([BigInt(e),n,r,a])}function Ar(e,t,n,r,a,i,s,o,c,l,u=[]){const d=Be(l)?wr(i,l):Er(i,l),h=yr(o,c),f=ur([e,t,n,d,(0,p.poseidonHashMany)(ur(s)),r,a,h,...ur(u)]);return ot((0,p.poseidonHashMany)(f))}function Ir(e,t,n,r,a,i,s,o,c,l,u,d){return Ar(he.DEPLOY_ACCOUNT,a,e,i,s,u,d,o,c,l,[(0,p.poseidonHashMany)(ur(n)),t,r])}function kr(e,t,n,r,a,i,s,o,c,l,u,d){return Ar(he.DECLARE,r,n,a,i,u,ur(d),o,c,l,[(0,p.poseidonHashMany)(ur(s)),e,t])}function Sr(e,t,n,r,a,i,s,o,c,l,u){return Ar(he.INVOKE,t,e,r,a,l,u,s,o,c,[(0,p.poseidonHashMany)(ur(i)),(0,p.poseidonHashMany)(ur(n))])}function Tr(e){return function(e){return[S.ETransactionVersion.V3,S.ETransactionVersion.F3].includes(e.version)}(e)?Sr(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cr(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function xr(e){return function(e){return[S.ETransactionVersion.V3,S.ETransactionVersion.F3].includes(e.version)}(e)?kr(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):sr(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function Cr(e){return function(e){return[S.ETransactionVersion.V3,S.ETransactionVersion.F3].includes(e.version)}(e)?Ir(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):or(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function Or(e,t){return p.pedersen(BigInt(e),BigInt(t))}function Nr(e,t){return ot(p.poseidonHash(BigInt(e),BigInt(t)))}function Pr(e){return[...e,e.length].reduce(((e,t)=>p.pedersen(BigInt(e),BigInt(t))),0).toString()}var Rr=Pr;function Br(e){return ot((0,p.poseidonHashMany)(e.map((e=>BigInt(e)))))}function Dr(e,t,n,r){const a=Pr(nr.compile(n)),i=Pr([Nn("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]);return ot(BigInt(i)%J)}function Vr(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function $r(e){let t=!1;const n=[];for(const r of e)'"'===r&&0==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function Lr(e){const{abi:t,program:n}=e,r=$r(Ge({abi:t,program:n},Vr));return $(p.keccak(P(r)).toString(16))}function Fr(e){const t=nt(e)?We(e):e,n=ot(q),r=Pr(t.entry_points_by_type.EXTERNAL.flatMap((e=>[e.selector,e.offset]))),a=Pr(t.entry_points_by_type.L1_HANDLER.flatMap((e=>[e.selector,e.offset]))),i=Pr(t.entry_points_by_type.CONSTRUCTOR.flatMap((e=>[e.selector,e.offset]))),s=Pr(t.program.builtins.map((e=>Mt(e)))),o=Lr(t),c=Pr(t.program.data);return Pr([n,r,a,i,s,o,c])}function Mr(e){const t=e.flatMap((e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,p.poseidonHashMany)(t.flatMap((e=>BigInt(Mt(e))))))];var t}));return(0,p.poseidonHashMany)(t)}function Ur(e){const t=e.bytecode.map((e=>BigInt(e))),n=e.bytecode_segment_lengths??[];let r=0;const a=n.flatMap((e=>{const n=t.slice(r,r+=e);return[BigInt(e),(0,p.poseidonHashMany)(n)]}));return 1n+(0,p.poseidonHashMany)(a)}function Hr(e){const t=BigInt(Mt("COMPILED_CLASS_V1")),n=Mr(e.entry_points_by_type.EXTERNAL),r=Mr(e.entry_points_by_type.L1_HANDLER),a=Mr(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?Ur(e):(0,p.poseidonHashMany)(e.bytecode.map((e=>BigInt(e))));return ot((0,p.poseidonHashMany)([t,n,r,a,i]))}function jr(e){const t=e.flatMap((e=>[BigInt(e.selector),BigInt(e.function_idx)]));return(0,p.poseidonHashMany)(t)}function Zr(e){const t=BigInt(Mt("CONTRACT_CLASS_V0.1.0")),n=jr(e.entry_points_by_type.EXTERNAL),r=jr(e.entry_points_by_type.L1_HANDLER),a=jr(e.entry_points_by_type.CONSTRUCTOR),i=function(e){const t=$r(Ge(e.abi,null));return BigInt($(p.keccak(P(t)).toString(16)))}(e),s=(0,p.poseidonHashMany)(e.sierra_program.map((e=>BigInt(e))));return ot((0,p.poseidonHashMany)([t,n,r,a,i,s]))}function zr(e){const t=nt(e)?We(e):e;return"sierra_program"in t?Zr(t):Fr(t)}function Wr(e){const t=e.version?ot(e.version):xe.V3;return t===xe.V3||t===xe.F3}function Kr(e,t){const n=e.split("."),r=t.split(".");return n.every(((e,t)=>"*"===e||e===r[t]))}function Gr(e,t={allowAnyPatchVersion:!1}){return Object.values(pe).some((n=>Kr(t.allowAnyPatchVersion?function(e){const t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}(n):n,e)))}function qr(e){const t=nt(e)?e:Ge(e);return B((0,y.iv)(t))}function Yr(e){if(Array.isArray(e))return e;const t=N((0,y.ec)(R(e)));return We(t)}function Xr(){const e=p.utils.randomPrivateKey();return(0,p.getStarkKey)(e)}function Jr(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map((e=>ot(e)));try{const{r:t,s:n}=e;return[ot(t),ot(n)]}catch(e){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Qr(e){return ft(Jr(e))}function ea(e){return gt(Jr(e))}function ta(e,t=_e.get("feeMarginPercentage").maxFee){return wt(e,t)}function na(e,t=_e.get("feeMarginPercentage").bounds,n){return tt(e)?{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...n&&Kr("0.8",n)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}}:Re(e)?function(e,t){return{l2_gas:{max_amount:ot(wt(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:ot(wt(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:ot(wt(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:ot(wt(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:ot(wt(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:ot(wt(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}}}(e,t):function(e,t){return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?ot(wt(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):ot(wt(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:ot(wt(e.gas_price,t.l1_gas.max_price_per_unit))}}}(e,t)}function ra(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:W,unit:"FRI",suggestedMaxFee:W,resourceBounds:na(W,void 0,e)}}function aa(e){if(e===Ne.L1)return Pe.L1;if(e===Ne.L2)return Pe.L2;throw Error("EDAM conversion")}function ia(e,t){const n=t?ot(t):void 0,r=ot(e);if(t&&!Object.values(xe).includes(n))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(xe).includes(r))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?n:r}function sa(e){if(!e)return;const t=ot(e);if(t===xe.V0)return xe.F0;if(t===xe.V1)return xe.F1;if(t===xe.V2)return xe.F2;if(t===xe.V3)return xe.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function oa(e,t){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||Ne.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||Ne.L1,resourceBounds:e.resourceBounds??na(W,void 0,t)}}function ca(e){return e===xe.F2?xe.F1:e===xe.V2?xe.V1:e}function la(e){const t=ot(e);return $(D((0,p.getPublicKey)(t,!1)))}function ua(e){return"sierra_program"in(nt(e)?We(e):e)}I({},{ZEROFee:()=>ra,compressProgram:()=>qr,decompressProgram:()=>Yr,estimateFeeToBounds:()=>na,estimatedFeeToMaxFee:()=>ta,formatSignature:()=>Jr,getFullPublicKey:()=>la,intDAM:()=>aa,randomAddress:()=>Xr,reduceV2:()=>ca,signatureToDecimalArray:()=>Qr,signatureToHexArray:()=>ea,toFeeVersion:()=>sa,toTransactionVersion:()=>ia,v3Details:()=>oa});var da={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ha=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},pa=class extends ha{},fa=class extends pa{constructor(e,t,n){super(`RPC: ${t} with params ${Ge(n,null,2)}\n\n      ${e.code}: ${e.message}: ${Ge(e.data)}`),this.baseError=e,this.request={method:t,params:n}}request;get code(){return this.baseError.code}isType(e){return da[e]===this.code}};function ga(){return U(D(_.kA.utils.randomPrivateKey()))}function ma(e){pt(e,W,2n**160n-1n,"Ethereum Address ");const t=$(V(ot(e)).padStart(40,"0"));return Ye(Boolean(t.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),t}I({},{ethRandomPrivateKey:()=>ga,validateAndParseEthAddress:()=>ma});var ya="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||"undefined"!=typeof global&&global.fetch.bind(global)||(()=>{throw new pa("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function _a(e){return new Promise((t=>{setTimeout(t,e)}))}function ba(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=$r(Ge(e.abi)),t.sierra_program=$r(Ge(e.sierra_program)),t.sierra_program=qr(t.sierra_program),t}function va(e){const t=nt(e)?We(e):e;return ua(e)?ba(t):{...t,..."program"in t&&{program:qr(t.program)}}}I({},{Block:()=>Ia,createSierraContractClass:()=>ba,getDefaultNodeUrl:()=>Ea,getDefaultNodes:()=>wa,parseContract:()=>va,validBlockTags:()=>Aa,wait:()=>_a});var Ea=(e,t=!1,n)=>{t||ve.info("Using default public node url, please provide nodeUrl in provider options!");const r=wa(n??_e.get("rpcVersion"))[e??ue.SN_SEPOLIA];return r[Math.floor(Math.random()*r.length)]};function wa(e){const t={...ge};return Object.keys(t).forEach((function(n,r){t[n]=t[n].map((t=>{return`${t}${n=e,`v${n.replace(/^v/,"").replace(/\./g,"_")}`}`;var n}))})),t}var Aa=Object.values(Te),Ia=class{hash=null;number=null;tag=null;setIdentifier(e){if(nt(e))if(Dt(e))this.number=parseInt(e,10);else if(at(e))this.hash=e;else{if(!Aa.includes(e))throw TypeError(`Block identifier unmanaged: ${e}`);this.tag=e}else tt(e)?this.hash=ot(e):Qe(e)?this.number=e:this.tag=Te.PENDING;if(Qe(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};I({},{buildUDCCall:()=>Ca,fromCallsToExecuteCalldata:()=>Sa,fromCallsToExecuteCalldata_cairo1:()=>Ta,getExecuteCalldata:()=>xa,getVersionsByType:()=>Oa,transformCallsToMulticallArrays:()=>ka});var ka=e=>{const t=[],n=[];return e.forEach((e=>{const r=nr.compile(e.calldata||[]);t.push({to:it(e.contractAddress).toString(10),selector:it(Tt(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)})),{callArray:t,calldata:nr.compile({calldata:n})}},Sa=e=>{const{callArray:t,calldata:n}=ka(e);return[...nr.compile({callArray:t}),...n]},Ta=e=>{const t=e.map((e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:nr.compile(e.calldata)})));return nr.compile({orderCalls:t})},xa=(e,t="0")=>"1"===t?Ta(e):Sa(e);function Ca(e,t){const n=[].concat(e).map((e=>{const{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[]}=e,s=nr.compile(i),o=r??Xr();return{call:{contractAddress:re.ADDRESS,entrypoint:re.ENTRYPOINT,calldata:[n,o,vt(a),s.length,...s]},address:Dr(a?p.pedersen(t,o):o,n,s,a?re.ADDRESS:0)}}));return{calls:n.map((e=>e.call)),addresses:n.map((e=>e.address))}}function Oa(e){return"fee"===e?{v1:xe.F1,v2:xe.F2,v3:xe.F3}:{v1:xe.V1,v2:xe.V2,v3:xe.V3}}var Na={headers:{"Content-Type":"application/json"},blockIdentifier:Te.PENDING,retries:200},Pa=class{id="RPC071";channelSpecVersion=pe.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(ue).includes(s)?this.nodeUrl=Ea(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||Ea(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||_e.get("fetch")||ya,this.blockIdentifier=r??Na.blockIdentifier,this.chainId=a,this.headers={...Na.headers,...i},this.retries=o??Na.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof n&&(this.batchClient=new qe({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch})),ve.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ge(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new fa(n,e,t);if(r instanceof pa)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(Kr(this.channelSpecVersion,e)||ve.error(ye.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Gr(e))throw new pa(`${ye.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ia(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=ot(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,s=new Ia(n).identifier,o=[];return r&&o.push(a.gZ.SKIP_VALIDATE),i&&o.push(a.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const n=ot(e);let{retries:r}=this,i=!1,s=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[a.zO.REJECTED],l=t?.successStates??[a.y5.SUCCEEDED,a.zO.ACCEPTED_ON_L2,a.zO.ACCEPTED_ON_L1];let u;for(;!i;){await _a(o);try{u=await this.getTransactionStatus(n);const e=u.execution_status,t=u.finality_status;if(!t)throw new Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=u,s=!0,r}(l.includes(e)||l.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await _a(o)}return d}getStorageAt(e,t,n=this.blockIdentifier){const r=ot(e),a=lt(t),i=new Ia(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Ia(t).identifier,i={simulation_flags:n?[a.gZ.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...i})}async invoke(e,t){let n;return Wr(t)?(n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:nr.toHex(e.calldata),version:a.sF.V3,signature:ea(e.signature),nonce:ot(t.nonce),resource_bounds:t.resourceBounds,tip:ot(t.tip),paymaster_data:t.paymasterData.map((e=>ot(e))),account_deployment_data:t.accountDeploymentData.map((e=>ot(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),Xe(!t.maxFee,(()=>{ve.warn(ye.maxFeeInV3,{type:a.xz.INVOKE})}))):(n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:nr.toHex(e.calldata),type:a.xz.INVOKE,max_fee:ot(t.maxFee||0),version:a.sF.V1,signature:ea(e.signature),nonce:ot(t.nonce)}}),ve.warn(ye.legacyTxWarningMessage,{version:a.sF.V1,type:a.xz.INVOKE})),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let s;if(ua(e)||Wr(i))if(ua(e)&&!Wr(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,contract_class:{sierra_program:Yr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:r||"",version:a.sF.V2,max_fee:ot(i.maxFee||0),signature:ea(t),sender_address:n,nonce:ot(i.nonce)}}),ve.warn(ye.legacyTxWarningMessage,{version:a.sF.V2,type:a.xz.DECLARE});else{if(!ua(e)||!Wr(i))throw Error("declare unspotted parameters");s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,sender_address:n,compiled_class_hash:r||"",version:a.sF.V3,signature:ea(t),nonce:ot(i.nonce),contract_class:{sierra_program:Yr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:i.resourceBounds,tip:ot(i.tip),paymaster_data:i.paymasterData.map((e=>ot(e))),account_deployment_data:i.accountDeploymentData.map((e=>ot(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),Xe(!i.maxFee,(()=>{ve.warn(ye.maxFeeInV3,{type:a.xz.DECLARE})}))}else s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:a.xz.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:a.sF.V1,max_fee:ot(i.maxFee||0),signature:ea(t),sender_address:n,nonce:ot(i.nonce)}}),ve.warn(ye.legacyTxWarningMessage,{version:a.sF.V1,type:a.xz.DECLARE});return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let s;return Wr(i)?(s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:a.xz.DEPLOY_ACCOUNT,version:a.sF.V3,signature:ea(r),nonce:ot(i.nonce),contract_address_salt:ot(n||0),constructor_calldata:nr.toHex(t||[]),class_hash:ot(e),resource_bounds:i.resourceBounds,tip:ot(i.tip),paymaster_data:i.paymasterData.map((e=>ot(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}),Xe(!i.maxFee,(()=>{ve.warn(ye.maxFeeInV3,{type:a.xz.DEPLOY_ACCOUNT})}))):(s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:nr.toHex(t||[]),class_hash:ot(e),contract_address_salt:ot(n||0),type:a.xz.DEPLOY_ACCOUNT,max_fee:ot(i.maxFee||0),version:a.sF.V1,signature:ea(r),nonce:ot(i.nonce)}}),ve.warn(ye.legacyTxWarningMessage,{version:a.sF.V1,type:a.xz.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){const n=new Ia(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Tt(e.entrypoint),calldata:nr.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ma(n),to_address:ot(r),entry_point_selector:xt(a),payload:bt(i)},o=new Ia(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Oa(t);let r;if(Wr(e)?(r={signature:ea(e.signature),nonce:ot(e.nonce),resource_bounds:e.resourceBounds,tip:ot(e.tip),paymaster_data:e.paymasterData.map((e=>ot(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>ot(e)))},Xe(!e.maxFee,(()=>{ve.warn(ye.maxFeeInV3,{type:e.type,versionType:t})}))):(r={signature:ea(e.signature),nonce:ot(e.nonce),max_fee:ot(e.maxFee||0)},ve.warn(ye.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===Ae.INVOKE)return{type:a.xz.INVOKE,sender_address:e.contractAddress,calldata:nr.toHex(e.calldata),version:ot(e.version||n.v3),...r};if(e.type===Ae.DECLARE)return ua(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:Yr(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ot(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:ot(e.version||n.v1),...r};if(e.type===Ae.DEPLOY_ACCOUNT){const{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:nr.toHex(e.constructorCalldata||[]),class_hash:ot(e.classHash),contract_address_salt:ot(e.addressSalt||0),version:ot(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},Ra={};I(Ra,{RpcChannel:()=>Da});var Ba={headers:{"Content-Type":"application/json"},blockIdentifier:Te.PENDING,retries:200},Da=class{id="RPC081";channelSpecVersion=pe.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){const{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=e||{};Object.values(ue).includes(s)?this.nodeUrl=Ea(s,e?.default,this.channelSpecVersion):this.nodeUrl=s||Ea(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||_e.get("fetch")||ya,this.blockIdentifier=r??Ba.blockIdentifier,this.chainId=a,this.headers={...Ba.headers,...i},this.retries=o??Ba.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,"number"==typeof n&&(this.batchClient=new qe({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch})),ve.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ge(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new fa(n,e,t);if(r instanceof pa)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){const{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}const n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if(Kr(this.channelSpecVersion,e)||ve.error(ye.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!Gr(e))throw new pa(`${ye.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=ot(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const a=new Ia(r).identifier,i=gt(e),s=gt(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:n})}getCompiledCasm(e){const t=ot(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Ia(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new Ia(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=ot(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=ot(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new Ia(n).identifier,o=[];return r&&o.push(s.gZ.SKIP_VALIDATE),a&&o.push(s.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const n=ot(e);let{retries:r}=this,a=!1,i=!1;const o=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[s.zO.REJECTED],l=t?.successStates??[s.y5.SUCCEEDED,s.zO.ACCEPTED_ON_L2,s.zO.ACCEPTED_ON_L1];let u;for(;!a;){await _a(o);try{u=await this.getTransactionStatus(n);const e=u.execution_status,t=u.finality_status;if(!t)throw new Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){const n=`${e}: ${t}`,r=new Error(n);throw r.response=u,i=!0,r}(l.includes(e)||l.includes(t))&&(a=!0)}catch(e){if(e instanceof Error&&i)throw e;if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let d=null;for(;null===d;){try{d=await this.getTransactionReceipt(n)}catch(e){if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await _a(o)}return d}getStorageAt(e,t,n=this.blockIdentifier){const r=ot(e),a=lt(t),i=new Ia(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=ot(e),r=new Ia(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}){const r=new Ia(t).identifier,a={simulation_flags:n?[s.gZ.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:r,...a})}async invoke(e,t){let n;if(!Wr(t))throw Error(ye.legacyTxRPC08Message);if(!Be(t.resourceBounds))throw Error(ye.SWOldV3);return n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:s.xz.INVOKE,sender_address:e.contractAddress,calldata:nr.toHex(e.calldata),version:s.sF.V3,signature:ea(e.signature),nonce:ot(t.nonce),resource_bounds:t.resourceBounds,tip:ot(t.tip),paymaster_data:t.paymasterData.map((e=>ot(e))),account_deployment_data:t.accountDeploymentData.map((e=>ot(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},a){let i;if(!ua(e)||!Wr(a))throw Error(ye.legacyTxRPC08Message);if(!Be(a.resourceBounds))throw Error(ye.SWOldV3);return i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:s.xz.DECLARE,sender_address:n,compiled_class_hash:r||"",version:s.sF.V3,signature:ea(t),nonce:ot(a.nonce),contract_class:{sierra_program:Yr(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:ot(a.tip),paymaster_data:a.paymasterData.map((e=>ot(e))),account_deployment_data:a.accountDeploymentData.map((e=>ot(e))),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},a){let i;if(!Wr(a))throw Error(ye.legacyTxRPC08Message);if(!Be(a.resourceBounds))throw Error(ye.SWOldV3);return i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:s.xz.DEPLOY_ACCOUNT,version:s.sF.V3,signature:ea(r),nonce:ot(a.nonce),contract_address_salt:ot(n||0),constructor_calldata:nr.toHex(t||[]),class_hash:ot(e),resource_bounds:a.resourceBounds,tip:ot(a.tip),paymaster_data:a.paymasterData.map((e=>ot(e))),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){const n=new Ia(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:Tt(e.entrypoint),calldata:nr.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:ma(n),to_address:ot(r),entry_point_selector:xt(a),payload:bt(i)},o=new Ia(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Oa(t);let r;if(!Wr(e))throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(r={signature:ea(e.signature),nonce:ot(e.nonce),resource_bounds:e.resourceBounds,tip:ot(e.tip),paymaster_data:e.paymasterData.map((e=>ot(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>ot(e)))},e.type===Ae.INVOKE)return{type:s.xz.INVOKE,sender_address:e.contractAddress,calldata:nr.toHex(e.calldata),version:ot(n.v3),...r};if(e.type===Ae.DECLARE){if(!ua(e.contract))throw ve.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:Yr(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:ot(n.v3),...r}}if(e.type===Ae.DEPLOY_ACCOUNT){const{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:nr.toHex(e.constructorCalldata||[]),class_hash:ot(e.classHash),contract_address_salt:ot(e.addressSalt||0),version:ot(n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},Va=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket.bind(window)||"undefined"!=typeof global&&global.WebSocket,class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return ta(e,this.margin?.maxFee)}estimateFeeToBounds(e){return na(e,this.margin?.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:it(t.overall_fee),unit:t.unit,l1_gas_consumed:st(t.l1_gas_consumed)??st(t.gas_consumed)??0n,l1_gas_price:st(t.l1_gas_price)??st(t.gas_price)??0n,l2_gas_consumed:st(t.l2_gas_consumed)??void 0,l2_gas_price:st(t.l2_gas_price)??void 0,l1_data_gas_consumed:st(t.l1_data_gas_consumed)??st(t.data_gas_consumed)??0n,l1_data_gas_price:st(t.l1_data_gas_price)??st(t.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t)}}parseFeeEstimateBulkResponse(e){return e.map((e=>({overall_fee:it(e.overall_fee),unit:e.unit,l1_gas_consumed:st(e.l1_gas_consumed)??st(e.gas_consumed)??0n,l1_gas_price:st(e.l1_gas_price)??st(e.gas_price)??0n,l2_gas_consumed:st(e.l2_gas_consumed)??void 0,l2_gas_price:st(e.l2_gas_price)??void 0,l1_data_gas_consumed:st(e.l1_data_gas_consumed)??st(e.data_gas_consumed)??0n,l1_data_gas_price:st(e.l1_data_gas_price)??st(e.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)})))}parseSimulateTransactionResponse(e){return e.map((e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)})))}parseContractClassResponse(e){return{...e,abi:nt(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}}),$a=class e{statusReceipt;value;constructor(t){[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",new Error("Unknown response type")];for(const[e]of Object.entries(this))Object.defineProperty(this,e,{enumerable:!1});for(const[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===ke.SUCCEEDED}static isReverted(e){return e.execution_status===ke.REVERTED}},La={};I(La,{encodeData:()=>Qa,encodeType:()=>Ya,encodeValue:()=>Ja,getDependencies:()=>qa,getMessageHash:()=>ti,getStructHash:()=>ei,getTypeHash:()=>Xa,isMerkleTreeType:()=>Ga,prepareSelector:()=>Ka,validateTypedData:()=>Wa,verifyMessage:()=>ni}),I({},{MerkleTree:()=>Fa,proofMerklePath:()=>Ma});var Fa=class e{leaves;branches=[];root;hashMethod;constructor(e,t=Or){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t,n=Or){const[r,a]=[BigInt(e),BigInt(t)].sort(((e,t)=>e>=t?1:-1));return n(r,a)}getProof(t,n=this.leaves,r=[]){const a=n.indexOf(t);if(-1===a)throw new Error("leaf not found");if(1===n.length)return r;const i=a%2==0,s=(i?n[a+1]:n[a-1])??"0x0",o=[...r,s],c=this.leaves.length===n.length?-1:this.branches.findIndex((e=>e.length===n.length)),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),l,o)}};function Ma(e,t,n,r=Or){if(0===n.length)return e===t;const[a,...i]=n;return Ma(e,Fa.hash(t,a,r),i,r)}var Ua={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Ha={[l.P.ACTIVE]:{domain:"StarknetDomain",hashMethod:Br,hashMerkleMethod:Nr,escapeTypeString:e=>`"${e}"`,presetTypes:Ua},[l.P.LEGACY]:{domain:"StarkNetDomain",hashMethod:Rr,hashMerkleMethod:Or,escapeTypeString:e=>e,presetTypes:{}}};function ja(e,t,{min:n,max:r}){const a=BigInt(e);Ye(a>=n&&a<=r,`${a} (${t}) is out of bounds [${n}, ${r}]`)}function Za({types:e,domain:t}){return Ha[l.P.ACTIVE].domain in e&&t.revision===l.P.ACTIVE?l.P.ACTIVE:Ha[l.P.LEGACY].domain in e&&(t.revision??l.P.LEGACY)===l.P.LEGACY?l.P.LEGACY:void 0}function za(e){try{return ot(e)}catch(t){if(nt(e))return ot(Mt(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Wa(e){const t=e;return Boolean(t.message&&t.primaryType&&t.types&&Za(t))}function Ka(e){return at(e)?e:Tt(e)}function Ga(e){return"merkletree"===e.type}function qa(e,t,n=[],r="",a=l.P.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===l.P.ACTIVE&&("enum"===t?i=[r]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map((e=>"*"===e[e.length-1]?e.slice(0,-1):e)))),i.filter((t=>!n.includes(t)&&e[t])).reduce(((t,n)=>[...t,...[n,...e[n].reduce(((t,n)=>[...t,...qa(e,n.type,t,n.contains,a).filter((e=>!t.includes(e)))]),[])].filter((e=>!t.includes(e)))]),[])}function Ya(e,t,n=l.P.LEGACY){const r=n===l.P.ACTIVE?{...e,...Ha[n].presetTypes}:e,[a,...i]=qa(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],o=Ha[n].escapeTypeString;return s.map((e=>{const t=r[e].map((e=>{const t="enum"===e.type&&n===l.P.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map((e=>e?o(e):e)).join(",")})`:o(t);return`${o(e.name)}:${r}`}));return`${o(e)}(${t})`})).join("")}function Xa(e,t,n=l.P.LEGACY){return Tt(Ya(e,t,n))}function Ja(e,t,n,r={},a=l.P.LEGACY){if(e[t])return[t,ei(e,t,n,a)];if(Ha[a].presetTypes[t])return[t,ei(Ha[a].presetTypes,t,n,a)];if(t.endsWith("*")){const r=n.map((n=>Ja(e,t.slice(0,-1),n,void 0,a)[1]));return[t,Ha[a].hashMethod(r)]}switch(t){case"enum":if(a===l.P.ACTIVE){const[i,s]=Object.entries(n)[0],o=e[r.parent].find((e=>e.name===r.key)),c=e[o.contains],l=c.find((e=>e.name===i)),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map(((t,n)=>{if(!t)return t;const r=s[n];return Ja(e,t,r,void 0,a)[1]}));return[t,Ha[a].hashMethod([u,...d])]}return[t,za(n)];case"merkletree":{const t=function(e,t){if(t.parent&&t.key){const n=e[t.parent].find((e=>e.name===t.key));if(!Ga(n))throw new Error(`${t.key} is not a merkle tree`);if(n.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return n.contains}return"raw"}(e,r),i=n.map((n=>Ja(e,t,n,void 0,a)[1])),{root:s}=new Fa(i,Ha[a].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Ka(n)];case"string":if(a===l.P.ACTIVE){const e=jt(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,Ha[a].hashMethod(r)]}return[t,za(n)];case"i128":if(a===l.P.ACTIVE){const e=BigInt(n);return ja(e,t,te),[t,za(e<0n?Y+e:e)]}return[t,za(n)];case"timestamp":case"u128":return a===l.P.ACTIVE&&ja(n,t,ne),[t,za(n)];case"felt":case"shortstring":return a===l.P.ACTIVE&&ja(za(n),t,ee),[t,za(n)];case"ClassHash":case"ContractAddress":return a===l.P.ACTIVE&&ja(n,t,ee),[t,za(n)];case"bool":return a===l.P.ACTIVE&&Ye(et(n),`Type mismatch for ${t} ${n}`),[t,za(n)];default:if(a===l.P.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,za(n)]}}function Qa(e,t,n,r=l.P.LEGACY){const a=e[t]??Ha[r].presetTypes[t],[i,s]=a.reduce((([a,i],s)=>{if(void 0===n[s.name]||null===n[s.name]&&"enum"!==s.type)throw new Error(`Cannot encode data: missing data for '${s.name}'`);const o=n[s.name],c={parent:t,key:s.name},[l,u]=Ja(e,s.type,o,c,r);return[[...a,l],[...i,u]]}),[["felt"],[Xa(e,t,r)]]);return[i,s]}function ei(e,t,n,r=l.P.LEGACY){return Ha[r].hashMethod(Qa(e,t,n,r)[1])}function ti(e,t){if(!Wa(e))throw new Error("Typed data does not match JSON schema");const n=Za(e),{domain:r,hashMethod:a}=Ha[n];return a([Mt("StarkNet Message"),ei(e.types,r,e.domain,n),t,ei(e.types,e.primaryType,e.message,n)])}function ni(e,t,n,r){const a=Wa(e);if(!It(e)&&!a)throw new Error("message has a wrong format.");if(a&&void 0===r)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!It(r))throw new Error("accountAddress shall be a BigNumberish");const i=a?ti(e,r):ot(e),s=Array.isArray(t)?new p.Signature(BigInt(t[0]),BigInt(t[1])):t,o=ot(n);return p.verify(s,i,o)}var ri=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new Va;else{if(e&&e.specVersion)if(Kr("0.8",e.specVersion))this.channel=new Ra.RpcChannel({...e,waitMode:!1});else{if(!Kr("0.7",e.specVersion))throw new Error(`unsupported channel for spec version: ${e.specVersion}`);this.channel=new Ee.RpcChannel({...e,waitMode:!1})}else if(Kr("0.8",_e.get("rpcVersion")))this.channel=new Ra.RpcChannel({...e,waitMode:!1});else{if(!Kr("0.7",_e.get("rpcVersion")))throw new Error("unable to define spec version for channel");this.channel=new Ee.RpcChannel({...e,waitMode:!1})}this.responseParser=new Va(e?.feeMarginPercentage)}}static async create(e){const t=new Ee.RpcChannel({...e}),n=await t.getSpecVersion();if(Gr(n)||ve.warn(`Using incompatible node spec version ${n}`),Kr("0.7",n))return new this({...e,specVersion:pe.v0_7_1});if(Kr("0.8",n))return new this({...e,specVersion:pe.v0_8_1});throw new pa(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(pe).toString()}`)}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===Te.LATEST)return;const n=await this.getBlockNumber(),r=e===Te.PENDING?n+1:Number(ot(e));if(r<=n)return;const{retries:a}=this.channel;let i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await _a(t),i-=1,i<=0)throw new Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);Ye("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t;return Ct([n[0],r,i,a,n.length-1,...n.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return new $a(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then((e=>this.responseParser.parseSimulateTransactionResponse(e)))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return new $a(n)}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let a;if(e)a=await this.getClassAt(e,n);else{if(!t)throw Error("getContractVersion require contractAddress or classHash");a=await this.getClass(t,n)}return ua(a)?r?{cairo:"1",compiler:Tn(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:Ae.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:Ae.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:Ae.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then((e=>this.responseParser.parseFeeEstimateBulkResponse(e)))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,n,r,a){const i=Wa(e);if(!It(e)&&!i)throw new Error("message has a wrong format.");if(!It(n))throw new Error("accountAddress shall be a BigNumberish");const s=i?ti(e,n):ot(e),o=r?[r]:["isValidSignature","is_valid_signature"],c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};let l;for(const e of o)try{const r=await this.callContract({contractAddress:ot(n),entrypoint:e,calldata:nr.compile({hash:it(s).toString(),signature:Jr(t)})});if(c.nokResponse.includes(r[0].toString()))return!1;if(0===c.okResponse.length||c.okResponse.includes(r[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(c.error.some((t=>e.message.includes(t))))return!1;l=e}throw Error(`Signature verification Error: ${l}`)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=function(e){const t={...e};if(ua(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=Hr(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??zr(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}(e).classHash;else{if(!e.classHash)throw Error("contractClassIdentifier type not satisfied");n=e.classHash}try{return await this.getClass(n,t)instanceof Object}catch(e){if(e instanceof pa)return!1;throw e}}async prepareInvocations(e){const t=[];for(const n of e)n.type===Ae.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}async getL1MessagesStatus(e){if(this.channel instanceof Ra.RpcChannel)return this.channel.getMessagesStatus(e);throw new pa("Unsupported method for RPC version")}async getStorageProof(e,t,n,r){if(this.channel instanceof Ra.RpcChannel)return this.channel.getStorageProof(e,t,n,r);throw new pa("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof Ra.RpcChannel)return this.channel.getCompiledCasm(e);throw new pa("Unsupported method for RPC version")}};I({},{StarknetIdContract:()=>pi,StarknetIdIdentityContract:()=>gi,StarknetIdMulticallContract:()=>yi,StarknetIdPfpContract:()=>Ei,StarknetIdPopContract:()=>Ai,StarknetIdVerifierContract:()=>bi,dynamicCallData:()=>Ti,dynamicFelt:()=>Si,execution:()=>ki,getStarknetIdContract:()=>fi,getStarknetIdIdentityContract:()=>mi,getStarknetIdMulticallContract:()=>_i,getStarknetIdPfpContract:()=>wi,getStarknetIdPopContract:()=>Ii,getStarknetIdVerifierContract:()=>vi,isStarkDomain:()=>xi,useDecoded:()=>di,useEncoded:()=>hi});var ai="abcdefghijklmnopqrstuvwxyz0123456789-",ii=BigInt(ai.length+1),si="这来",oi=BigInt(ai.length),ci=BigInt(si.length),li=BigInt(si.length+1);function ui(e){let t=0;for(;e.endsWith(si[si.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function di(e){let t="";return e.forEach((e=>{for(;e!==W;){const n=e%ii;if(e/=ii,n===BigInt(ai.length)){const n=e/li;if(n===W){const r=e%li;e=n,t+=r===W?ai[0]:si[Number(r)-1]}else t+=si[Number(e%ci)],e/=ci}else t+=ai[Number(n)]}const[n,r]=ui(t);r&&(t=n+(r%2==0?si[si.length-1].repeat(r/2-1)+si[0]+ai[1]:si[si.length-1].repeat((r-1)/2+1))),t+="."})),t?t.concat("stark"):t}function hi(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(si[0]+ai[1])){const[t,n]=ui(e.substring(0,e.length-2));e=t+si[si.length-1].repeat(2*(n+1))}else{const[t,n]=ui(e);n&&(e=t+si[si.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){const a=e[r],i=ai.indexOf(a),s=BigInt(ai.indexOf(a));if(-1!==i)r===e.length-1&&e[r]===ai[0]?(t+=n*oi,n*=ii,n*=ii):(t+=n*s,n*=ii);else if(-1!==si.indexOf(a)){t+=n*oi,n*=ii;const i=(r===e.length-1?1:0)+si.indexOf(a);t+=n*BigInt(i),n*=ci}}return t}var pi={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function fi(e){switch(e){case de.SN_MAIN:return pi.MAINNET;case de.SN_SEPOLIA:return pi.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var gi={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function mi(e){switch(e){case de.SN_MAIN:return gi.MAINNET;case de.SN_SEPOLIA:return gi.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var yi="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function _i(e){switch(e){case de.SN_MAIN:case de.SN_SEPOLIA:return yi;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var bi={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function vi(e){switch(e){case de.SN_MAIN:return bi.MAINNET;case de.SN_SEPOLIA:return bi.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Ei={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function wi(e){switch(e){case de.SN_MAIN:return Ei.MAINNET;case de.SN_SEPOLIA:return Ei.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var Ai={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function Ii(e){switch(e){case de.SN_MAIN:return Ai.MAINNET;case de.SN_SEPOLIA:return Ai.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function ki(e,t=void 0,n=void 0){return new Pn({Static:e,IfEqual:t?On(t[0],t[1],t[2]):void 0,IfNotEqual:n?On(n[0],n[1],n[2]):void 0})}function Si(e,t=void 0){return new Pn({Hardcoded:e,Reference:t?On(t[0],t[1]):void 0})}function Ti(e,t=void 0,n=void 0){return new Pn({Hardcoded:e,Reference:t?On(t[0],t[1]):void 0,ArrayReference:n?On(n[0],n[1]):void 0})}function xi(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}function Ci(e){return new Jt(e).toBigInt()}function Oi(e){return Jt.is(e)}function Ni(e){return new Jt(e).toUint256HexString()}function Pi(e){return"event"===e.type}function Ri(e){const t=e.filter((e=>Pi(e)&&"struct"===e.kind)),n=e.filter((e=>Pi(e)&&"enum"===e.kind));return t.reduce(((e,t)=>{let r=[],{name:a}=t,i=!1;const s=e=>e.type===a;for(;;){const e=n.find((e=>e.variants.some(s)));if(Je(e))break;const t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw new Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);const o=r.pop();let c={[$(p.keccak(P(o)).toString(16))]:t};for(;r.length>0;)c={[$(p.keccak(P(r.pop())).toString(16))]:c};return c={...c},Di(e,c)}),{})}function Bi(e){return kn(e)?Ri(e):function(e){return e.filter((e=>"event"===e.type)).reduce(((e,t)=>{const n=t.name,r={...t};return r.name=n,{...e,[$(p.keccak(P(n)).toString(16))]:r}}),{})}(e)}function Di(e,t){const n={...e};return rt(e)&&rt(t)&&Object.keys(t).forEach((r=>{rt(t[r])?r in e?n[r]=Di(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})})),n}function Vi(e,t,n,r){return e.flat().reduce(((e,a)=>{const i=JSON.parse(JSON.stringify(a));let s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){const e=i.keys.shift();Ye(!!e,'Not enough data in "keys" property of this event.'),s=s[e]}const o={};o[s.name]={};const c=i.keys[Symbol.iterator](),l=i.data[Symbol.iterator](),u=s.members?.filter((e=>"key"===e.kind))||s.keys,d=s.members?.filter((e=>"data"===e.kind))||s.data;return u.forEach((e=>{o[s.name][e.name]=Kn(c,e,n,r,o[s.name])})),d.forEach((e=>{o[s.name][e.name]=Kn(l,e,n,r,o[s.name])})),"block_hash"in i&&(o.block_hash=i.block_hash),"block_number"in i&&(o.block_number=i.block_number),"transaction_hash"in i&&(o.transaction_hash=i.transaction_hash),e.push(o),e}),[])}function $i(e){if(!e.events?.length)throw new Error("UDC emitted event is empty");const t=e.events.find((e=>ht(e.from_address)===ht(re.ADDRESS)))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function Li(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function Fi(e){const t=e.calldata??[],n=Array.isArray(t)?t:nr.compile(t);return{to:e.contractAddress,selector:Tt(e.entrypoint),calldata:n}}function Mi(e,t){const n=Fi(e);return"1"===t?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Ui(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function Hi(e,t,n,r,a){return"1"===a?{types:He,primaryType:"OutsideExecution",domain:Ui(e,a),message:{...t,nonce:n,calls_len:r.length,calls:r.map((e=>Mi(e,a)))}}:{types:je,primaryType:"OutsideExecution",domain:Ui(e,a),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map((e=>Mi(e,a)))}}}function ji(e){const t=e.outsideExecution,n=Jr(e.signature);return nr.compile({outside_execution:t,signature:n})}function Zi(e){return(Array.isArray(e)?e:[e]).map((e=>{let t;if(e.version===Ze.V1)t="execute_from_outside";else{if(e.version!==Ze.V2)throw new Error("Unsupported OutsideExecution version");t="execute_from_outside_v2"}return{contractAddress:ot(e.signerAddress),entrypoint:t,calldata:ji(e)}}))}async function zi(e,t,n){const r={contractAddress:ot(t),entrypoint:"supports_interface",calldata:[ot(n)]};try{const t=await e.callContract(r);return 0n!==BigInt(t[0])}catch{return!1}}(0,b.Mixin)(ri,class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){const r=await e.getChainId(),a=n??fi(r);try{const n=di((await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:nr.compile({address:t,hint:[]})})).map((e=>BigInt(e))).slice(1));if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){const r=t.endsWith(".stark")?t:`${t}.stark`;if(!xi(r))throw new Error("Invalid domain, must be a valid .stark domain");const a=await e.getChainId(),i=n??fi(a);try{const t=r.replace(".stark","").split(".").map((e=>hi(e).toString(10)));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:nr.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){const c=await e.getChainId(),l=n??fi(c),u=r??mi(c),d=a??vi(c),h=i??wi(c),p=s??Ii(c),f=o??_i(c);try{const n=[{execution:ki({}),to:Ti(l),selector:Ti(Tt("address_to_domain")),calldata:[Ti(t),Ti("0")]},{execution:ki({}),to:Si(l),selector:Si(Tt("domain_to_id")),calldata:[Ti(void 0,void 0,[0,0])]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("twitter")),Ti(d),Ti("0")]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("github")),Ti(d),Ti("0")]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("discord")),Ti(d),Ti("0")]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("proof_of_personhood")),Ti(p),Ti("0")]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("nft_pp_contract")),Ti(h),Ti("0")]},{execution:ki({}),to:Si(u),selector:Si(Tt("get_extended_verifier_data")),calldata:[Ti(void 0,[1,0]),Ti(Mt("nft_pp_id")),Ti("2"),Ti(h),Ti("0")]},{execution:ki(void 0,void 0,[6,0,0]),to:Si(void 0,[6,0]),selector:Si(Tt("tokenURI")),calldata:[Ti(void 0,[7,1]),Ti(void 0,[7,2])]}],r=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:nr.compile({calls:n})});if(Array.isArray(r)){const e=parseInt(r[0],16),t=[];let n=1;for(let a=0;a<e&&n<r.length;a+=1){const e=parseInt(r[n],16);n+=1;const a=r.slice(n,n+e);t.push(a),n+=e}const a=di(t[0].slice(1).map((e=>BigInt(e)))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0];return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:("0x9"===r[0]?t[8].slice(1).map((e=>Ut(e))).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}}),new ri({default:!0}),I({},{bnToUint256:()=>Ni,isUint256:()=>Oi,uint256ToBN:()=>Ci}),I({},{getAbiEvents:()=>Bi,isAbiEvent:()=>Pi,parseEvents:()=>Vi,parseUDCEvent:()=>$i}),I({},{buildExecuteFromOutsideCall:()=>Zi,buildExecuteFromOutsideCallData:()=>ji,getOutsideCall:()=>Fi,getTypedData:()=>Hi,toOutsideCallV2:()=>Li}),I({},{supportsInterface:()=>zi}),I({},{assertCallsAreStrictlyEqual:()=>Ki,assertPaymasterTransactionSafety:()=>Gi,getDefaultPaymasterNodeUrl:()=>Wi});var Wi=(e,t=!1)=>{t||ve.info("Using default public node url, please provide nodeUrl in provider options!");const n=me[e??ue.SN_SEPOLIA];return n[Math.floor(Math.random()*n.length)]};function Ki(e,t){const n="Provided calls are not strictly equal to the returned calls";Ye(t.length-1===e.length,`${n}: Expected ${e.length+1} calls, got ${t.length}`);for(let r=0;r<e.length;r+=1){const a=e[r],i=Li(t[r]),s=e=>it(e).toString(16).toLowerCase();Ye(s(a.contractAddress)===s(i.To),`${n}: Contract address mismatch at call ${r}. Expected: ${a.contractAddress}, Got: ${i.To}`),Ye(Tt(a.entrypoint)===i.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${a.entrypoint}, Got: ${i.Selector}`);const o=nr.toCalldata(a.calldata),c=nr.toCalldata(i.Calldata);Ye(o.length===c.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${o.length}, Got length: ${c.length}`);for(let e=0;e<o.length;e+=1)Ye(BigInt(o[e])===BigInt(c[e]),`${n}: Calldata value mismatch at call ${r}, parameter ${e}. Expected: ${o[e]}, Got: ${c[e]}`)}}var Gi=(e,t,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){const a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;Ki(t,a),((e,t)=>{const n=Li(e[e.length-1]);Ye(BigInt(n.To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,n.feeMode.gasToken),r&&(Ye(e.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((e,t)=>{const n=Li(e[e.length-1]),r=nr.toCalldata(n.Calldata)[1];Ye(BigInt(r)===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},qi=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},Yi=e=>e&&e.executeAfter&&e.executeBefore?{execute_after:e.executeAfter.getTime().toString(),execute_before:e.executeBefore.getTime().toString()}:void 0,Xi=e=>{return{version:e.version,feeMode:(n=e.fee_mode,"sponsored"===n.mode?{mode:"sponsored"}:{mode:"default",gasToken:n.gas_token}),timeBounds:(t=e.time_bounds,t&&t.execute_after&&t.execute_before?{executeAfter:new Date(t.execute_after),executeBefore:new Date(t.execute_before)}:void 0)};var t,n},Ji={"Content-Type":"application/json"};function Qi(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function es(e){return e.request({type:"wallet_getPermissions"})}function ts(e,t){return e.request({type:"wallet_watchAsset",params:t})}function ns(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function rs(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function as(e){return e.request({type:"wallet_requestChainId"})}function is(e){return e.request({type:"wallet_deploymentData"})}function ss(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function os(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function cs(e,t){return e.request({type:"wallet_signTypedData",params:t})}function ls(e){return e.request({type:"wallet_supportedSpecs"})}function us(e,t){e.on("accountsChanged",t)}function ds(e,t){e.on("networkChanged",t)}new class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e)return this.nodeUrl=t.nodeUrl,this.headers={...Ji,...t.headers},this.baseFetch=t.baseFetch,void(this.requestId=t.requestId);if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t)return this.nodeUrl=t.nodeUrl??Wi(void 0),this.headers={...Ji,...t.headers},this.baseFetch=t.baseFetch??ya,void(this.requestId=0);const{nodeUrl:n,headers:r,baseFetch:a}=t||{};n&&Object.values(ue).includes(n)?this.nodeUrl=Wi(n,t?.default):this.nodeUrl=n||Wi(void 0,t?.default),this.baseFetch=a??ya,this.headers={...Ji,...r},this.requestId=0}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:Ge(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new fa(n,e,t);if(r instanceof pa)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{this.requestId+=1;const n=await this.fetch(e,t,this.requestId),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(n){throw this.errorHandler(e,t,n?.response?.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,calls:(r=e.invoke.calls,r.map((e=>({to:e.contractAddress,selector:Tt(e.entrypoint),calldata:nr.toHex(e.calldata)}))))}};break;default:n=e}var r;const a={version:t.version,fee_mode:qi(t.feeMode),time_bounds:Yi(t.timeBounds)},i=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:a}),s={gas_token_price_in_strk:BigInt(i.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(i.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(i.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(i.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(i.fee.suggested_max_fee_in_gas_token)};switch(i.type){case"invoke":return{type:"invoke",typed_data:i.typed_data,parameters:Xi(i.parameters),fee:s};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:i.deployment,typed_data:i.typed_data,parameters:Xi(i.parameters),fee:s};default:return{type:"deploy",deployment:i.deployment,parameters:Xi(i.parameters),fee:s}}}async executeTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:ea(e.invoke.signature)}};break;default:n=e}const r={version:t.version,fee_mode:qi(t.feeMode),time_bounds:Yi(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then((e=>e.map((e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))))}}({default:!0}),I({},{addDeclareTransaction:()=>os,addInvokeTransaction:()=>ss,addStarknetChain:()=>ns,deploymentData:()=>is,getPermissions:()=>es,onAccountChange:()=>us,onNetworkChanged:()=>ds,requestAccounts:()=>Qi,requestChainId:()=>as,signMessage:()=>cs,supportedSpecs:()=>ls,switchStarknetChain:()=>rs,watchAsset:()=>ts})}}]);