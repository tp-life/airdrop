import{Hb as a,ob as d,ub as p}from"./chunk-NTISK7TT.js";import{pa as D,z as m}from"./chunk-LBCQTFOD.js";import{m as o,o as i}from"./chunk-UGZFXKPB.js";o();i();D();o();i();var f={exposedAccounts:"exposedAccounts",primaryAccountOnly:"primaryAccountOnly"};function g(e){return e.metamask.domains||{}}function A(e){return e.metamask.domainMetadata||{}}function _(e){let t=g(e);return Object.keys(t).reduce((n,r)=>{let s=x(l(t[r]));return s.length>0&&(n[r]=s),n},{})}function j(e){let t=d(e),n=g(e),r=A(e),s=[];return m(n,(c,u)=>{if(!b(c).includes(t))return;let{extensionId:v,name:y,icon:k,host:O,isOkx:C}=r[u]||{};s.push({extensionId:v,origin:u,isOkx:C,name:y,icon:k,host:O})}),s}function b(e){return x(l(e))}function l(e={}){return Array.isArray(e.permissions)?e.permissions.find(t=>t.parentCapability==="eth_accounts"):{}}function x(e){let t=P(e);return t&&Array.isArray(t.value)?t.value:[]}function P(e={}){return Array.isArray(e.caveats)&&e.caveats.find(t=>t.name===f.exposedAccounts)}function B(e){let t=A(e);return Object.values(t).reduce((n,{host:r})=>(r&&(n[r]?n[r]+=1:n[r]=1),n),{})}function h(e){return(e.metamask.permissionsRequests||[]).map(n=>({...n,time:e.metamask.pendingApprovals[n.metadata.id]?.time||Date.now(),providerType:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.providerType,providerTypes:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.providerTypes,method:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.method,exts:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.exts,providersExts:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.providersExts}))}function I(e){let t=h(e);return t&&t[0]?t[t.length-1]:null}function w(e){let t=I(e);return t&&t.metadata?t.metadata.id:null}function H(e){let{domainMetadata:t={}}=e.metamask,n=a(e);return{...t[n],origin:n}}function W(e){let{domains:t={}}=e.metamask,n=a(e);return Boolean(t[n])}function J(e){let{domains:t={}}=e.metamask,n=a(e);if(t[n]){let r=t[n].permissions.filter(s=>s.parentCapability==="eth_accounts");if(r.length){let s=r[0].caveats.filter(c=>c.name==="exposedAccounts");if(s.length)return s[0].value}}return[]}function V(e){let t=p(e);return`${t.keyringName} - ${t.walletName}`}export{A as a,_ as b,j as c,B as d,h as e,I as f,w as g,H as h,W as i,J as j,V as k};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-S2V4K2JM.js.map
