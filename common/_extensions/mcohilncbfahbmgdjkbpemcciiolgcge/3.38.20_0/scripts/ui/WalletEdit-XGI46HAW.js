import{a as W,b as fe,d as q}from"./chunk-O6HIO2D6.js";import{a as Y}from"./chunk-YUMWUAYZ.js";import{a as U}from"./chunk-7QD4BOUJ.js";import"./chunk-VCEYK3IK.js";import"./chunk-Q6CQ4QF7.js";import{a as R}from"./chunk-P2HAZY4R.js";import"./chunk-GT6BTIMR.js";import"./chunk-4MFRD43G.js";import"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import"./chunk-S2V4K2JM.js";import{B as ue}from"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import"./chunk-A52XYJMT.js";import{d as H}from"./chunk-BCT5GPKT.js";import"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import{v as pe,w as ce,x as ge}from"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import"./chunk-PP43MII2.js";import{a as _e}from"./chunk-RJO5LUBF.js";import{a as de}from"./chunk-UEENMIFU.js";import{d as P}from"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{$ as le,ba as ne,ca as se}from"./chunk-PVSNAFN3.js";import{b as C}from"./chunk-JYKQJVIF.js";import{q as v}from"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import"./chunk-A3FIPWG3.js";import{ac as ie}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import"./chunk-CU7RFE6B.js";import{a as G}from"./chunk-J4UWPXXS.js";import{a as Ie}from"./chunk-QZUNX5I4.js";import"./chunk-IVA2TTR4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import"./chunk-35FUKWV2.js";import{f as me}from"./chunk-DHNKVM4B.js";import"./chunk-VL5VJIZ7.js";import{c as o}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{Oc as ae,zc as y}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{H as S,u as K}from"./chunk-L4N7WJIQ.js";import{G as te,f as re,o as oe,pa as J}from"./chunk-LBCQTFOD.js";import{N as Q,w as b}from"./chunk-V63HWKAL.js";import"./chunk-ZZ2UZY4M.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as X,ca as F}from"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as M}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as w,m as l,o as n}from"./chunk-UGZFXKPB.js";l();n();var x=w(M()),Ae=w(Ie());J();Q();l();n();var ee=w(M());Q();var be=({isLoading:r,onDone:a})=>ee.default.createElement(de.FooterActions,{placeholder:!0},ee.default.createElement(F,{onClick:a,category:F.CATEGORY.fill,type:F.TYPE.primary,size:F.SIZE.lg,block:!0,disabled:r},b("wallet_manage_btn_edit_done"))),Ne=be;l();n();var t=w(M()),Le=w(ie()),V=w(X());ae();l();n();var $=w(M()),xe=w(X());l();n();var O={handler:"_handler_18xte_1",disabled:"_disabled_18xte_4",keyring:"_keyring_18xte_7",wallet:"_wallet_18xte_11",icon:"_icon_18xte_16",noHandler:"_noHandler_18xte_23"};var We=({type:r,canDrag:a,listeners:d,disabled:D,getHandlerRef:u})=>a?$.default.createElement(o.Box,{ref:u,...d,className:(0,xe.default)(O.handler,O[r],{[O.disabled]:D})},$.default.createElement(C.IconButton,{className:O.icon,icon:"okx-wallet-plugin-hamburger"})):$.default.createElement(o.Box,{ref:u,...d,className:O.noHandler}),z=We;l();n();var s=w(M()),we=w(ie()),ye=w(X());J();ae();l();n();var N={item:"_item_1bnyn_1",dragging:"_dragging_1bnyn_9",children:"_children_1bnyn_13",wrapper:"_wrapper_1bnyn_16",wallet:"_wallet_1bnyn_20",canDrag:"_canDrag_1bnyn_23",delete:"_delete_1bnyn_26",avatar:"_avatar_1bnyn_34",name:"_name_1bnyn_38",draw:"_draw_1bnyn_44",text:"_text_1bnyn_47",more:"_more_1bnyn_61"};var Be=({keyringIdentity:r,editIdentityName:a,onDragWalletStart:d,onDragWalletEnd:D,editKeyringIdentities:u})=>{let _=r?.walletIdentities||[],{isRpcMode:f}=(0,we.useSelector)(H),p=U(),[m]=P(),c=(0,s.useCallback)(()=>{d(r.keyringId)},[d,r]),k=(0,s.useCallback)(i=>{let h=oe(u),I=h.find(({keyringId:B})=>B===r.keyringId);I.walletIdentities=i,D(h)},[u,r,D]),E=q(),L=(0,s.useMemo)(()=>r.keyringIdentityType!==y.MNEMONIC&&r.keyringIdentityType!==y.TON_MNEMONIC&&r.keyringIdentityType!==y.MPC,[r]),A=_.length>1;return s.default.createElement(K.Sortable,{uniqueKey:"walletId",itemClassName:N.item,onDragStart:c,itemChildrenClassName:N.children,itemDraggingClassName:N.dragging,itemWrapperClassName:N.wrapper,onDragEnd:k,dataSource:_,withOverlay:!1,renderHandler:({getHandlerRef:i,listeners:h})=>s.default.createElement(z,{type:"wallet",canDrag:A,listeners:h,getHandlerRef:i})},_.map(i=>s.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,ye.default)(N.wallet,{[N.canDrag]:A}),key:i.walletId},L?s.default.createElement(o.Box,{className:N.delete},s.default.createElement(C,{className:"okx-wallet-plugin-delete",onClick:()=>E({walletId:i.walletId,keyringType:r.keyringIdentityType})})):null,s.default.createElement(R,{size:R.SIZE.sm,className:N.avatar,walletIdentity:i}),s.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:N.name,onClick:()=>{a({type:W.WALLETACCOUNT,identity:i,initialName:i.walletName,otherNames:_.map(({walletName:h,walletId:I})=>i.keyringId===I?"":h).filter(Boolean)})}},s.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},s.default.createElement(v.Text,{ellipsis:!0,className:N.text},i.walletName),s.default.createElement(o.Box,{className:N.draw},s.default.createElement(C,{className:"okx-wallet-plugin-draw"}))),s.default.createElement(Y,{isRpcMode:f,currentRpcNetwork:p,hiddenAssets:m,walletAsset:i?.walletAsset,unsopportCurrentNetwork:i?.unsupported})),s.default.createElement(G,{className:N.more,to:`${se}?walletId=${i?.walletId}`},s.default.createElement(C.IconButton,{icon:"okx-wallet-plugin-more"})))))},De=Be;l();n();var g={item:"_item_1os1d_1",children:"_children_1os1d_8",dragging:"_dragging_1os1d_11",wrap:"_wrap_1os1d_15",disabled:"_disabled_1os1d_22",showBottomLine:"_showBottomLine_1os1d_25",keyring:"_keyring_1os1d_35",canDrag:"_canDrag_1os1d_38",delete:"_delete_1os1d_41",name:"_name_1os1d_49",canEdit:"_canEdit_1os1d_53",draw:"_draw_1os1d_56",text:"_text_1os1d_59",more:"_more_1os1d_74"};var Me=({editIdentityName:r,editKeyringIdentities:a,setEditKeyringIdentities:d})=>{let{isRpcMode:D}=(0,Le.useSelector)(H),u=U(),[_]=P(),f=q(),p=(0,t.useCallback)(({keyringIdentityType:e})=>e===y.MNEMONIC||e===y.MPC||e===y.TON_MNEMONIC,[]),m=(0,t.useCallback)(({keyringIdentityType:e})=>e===y.MNEMONIC||me(e)||e===y.MPC||e===y.TON_MNEMONIC,[]),[c,k]=(0,t.useState)(""),E=(0,t.useCallback)(({id:e})=>{k(e)},[]),L=(0,t.useCallback)(e=>{k(""),d(e)},[d]),[A,i]=(0,t.useState)(""),h=(0,t.useCallback)(e=>{i(e)},[]),I=(0,t.useCallback)(e=>{i(""),d(e)},[d]),B=a.length>1;return t.default.createElement(K.Sortable,{uniqueKey:"keyringId",itemClassName:g.item,itemChildrenClassName:g.children,itemDraggingClassName:g.dragging,onDragStart:E,onDragEnd:L,dataSource:a,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:j})=>t.default.createElement(z,{type:"keyring",canDrag:B,listeners:j,disabled:A,getHandlerRef:e})},a.map((e,j)=>t.default.createElement(o.Box,{className:(0,V.default)(g.wrap,{[g.disabled]:A&&A!==e.keyringId,[g.showBottomLine]:j!==a.length-1}),key:e.keyringId},t.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,V.default)(g.keyring,{[g.canDrag]:B})},p(e)?t.default.createElement(o.Box,{className:g.delete},t.default.createElement(C,{icon:"okx-wallet-plugin-delete",onClick:()=>f({keyringId:e.keyringId,keyringType:e.keyringIdentityType})})):null,t.default.createElement(o.FlexBox,{align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:(0,V.default)(g.name,{[g.canEdit]:m(e)}),onClick:()=>{m(e)&&r({type:W.WALLET,identity:e,initialName:e.keyringName,otherNames:a.map(({keyringName:Te,keyringId:ke})=>e.keyringId===ke?"":Te).filter(Boolean)})}},t.default.createElement(o.FlexBox,{align:o.ALIGN.center,style:{width:"100%"}},t.default.createElement(v.Text,{ellipsis:!0,className:g.text},e.keyringName),m(e)?t.default.createElement(o.Box,{className:g.draw},t.default.createElement(C,{icon:"okx-wallet-plugin-draw"})):null),t.default.createElement(Y,{isRpcMode:D,currentRpcNetwork:u,hiddenAssets:_,walletAsset:e?.walletAsset})),[y.PRIVATE_KEY].includes(e.keyringIdentityType)?null:t.default.createElement(G,{className:g.more,to:`${ne}?keyringId=${e?.keyringId}`},t.default.createElement(C.IconButton,{icon:"okx-wallet-plugin-more"}))),c===e.keyringId?null:t.default.createElement(De,{keyringIdentity:e,editIdentityName:r,onDragWalletStart:h,onDragWalletEnd:I,editKeyringIdentities:a}))))},he=Me;l();n();var Z=w(M());J();Q();var Oe=r=>{let a=fe(),d=pe(),D=ce(),u=(0,Z.useMemo)(()=>({async[W.WALLET](_,f){let p=_?.keyringId;if(p)try{await d(p,f),r(m=>m.map(c=>c.keyringId===p?{...c,keyringName:f}:c)),S.success(b("wallet_edit_wallet_toast_renamed_success"))}catch(m){console.log(m)}},async[W.WALLETACCOUNT](_,f){let p=_?.walletId;if(p)try{await D(p,f),r(m=>m.map(c=>{let k=c?.walletIdentities??[];return{...c,walletIdentities:k.map(E=>E.walletId===p?{...E,walletName:f}:E)}})),S.success(b("wallet_edit_wallet_toast_renamed_success"))}catch(m){console.log(m)}}}),[D,d,r]);return(0,Z.useCallback)(({identity:_,...f})=>{a(f).then(p=>{let{type:m}=f,c=u[m];c&&c(_,p)}).catch(re)},[u,a])},Ce=Oe;l();n();var Ee={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var Fe=()=>{let[,r]=ue(null),[a,d]=(0,x.useState)(r),D=Ce(d),[u,_]=(0,x.useState)(!1),f=L=>{d(L),_(!0)},p=(0,Ae.useHistory)(),m=ge(),[c,k]=(0,x.useState)(!1),E=(0,x.useCallback)(async()=>{if(u){k(!0);try{let L={},A={};a.forEach(({keyringId:i,walletIdentities:h},I)=>{L[i]=I,h.forEach(({walletId:B},e)=>{A[B]=e})}),await m(L,A)}catch(L){console.log(L),S.error({title:b("extension_wallet_toast_sorting_failure")})}}p.push(`${le}?from=seedVerify`)},[p,m,a,u]);return(0,x.useEffect)(()=>{!te(r,a)&&!u&&d(r)},[r,a]),x.default.createElement(o.Container,{className:Ee.root},x.default.createElement(_e,{backable:{icon:"okds-close"},bordered:!1,closeable:!1}),x.default.createElement(he,{editIdentityName:D,editKeyringIdentities:a,setEditKeyringIdentities:f}),x.default.createElement(Ne,{isLoading:c,onDone:E}))},Eo=Fe;export{Eo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-XGI46HAW.js.map
