import{a as Ff,b as pt,c as kf,d as Va,e as Hb,f as cr}from"./chunk-4MKRDS7W.js";import{a as Vf}from"./chunk-YHJQOBGW.js";import{b as Df}from"./chunk-CEF6LCM2.js";import{a as jf}from"./chunk-YEL3LVD4.js";import{a as Rb}from"./chunk-RTOXOPRM.js";import{w as Mb}from"./chunk-MTFM4GGW.js";import{c as U,m as y,n as E,o as g}from"./chunk-UGZFXKPB.js";var $n=U(Fa=>{"use strict";y();g();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.HexString=void 0;var Gf=pt(),ns=class{static fromBuffer(e){return ns.fromUint8Array(e)}static fromUint8Array(e){return new ns((0,Gf.bytesToHex)(e))}static ensure(e){return typeof e=="string"?new ns(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from((0,Gf.hexToBytes)(this.noPrefix()))}};Fa.HexString=ns});var Do=U(at=>{"use strict";y();g();Object.defineProperty(at,"__esModule",{value:!0});at.output=at.exists=at.hash=at.bytes=at.bool=at.number=void 0;function ka(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}at.number=ka;function $f(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}at.bool=$f;function Yu(n,...e){if(!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}at.bytes=Yu;function Wf(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ka(n.outputLen),ka(n.blockLen)}at.hash=Wf;function Xf(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}at.exists=Xf;function Zf(n,e){Yu(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}at.output=Zf;var Cb={number:ka,bool:$f,bytes:Yu,hash:Wf,exists:Xf,output:Zf};at.default=Cb});var Yf=U(Ga=>{"use strict";y();g();Object.defineProperty(Ga,"__esModule",{value:!0});Ga.crypto=void 0;Ga.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var rs=U(se=>{"use strict";y();g();Object.defineProperty(se,"__esModule",{value:!0});se.randomBytes=se.wrapConstructorWithOpts=se.wrapConstructor=se.checkOpts=se.Hash=se.concatBytes=se.toBytes=se.utf8ToBytes=se.asyncLoop=se.nextTick=se.hexToBytes=se.bytesToHex=se.isLE=se.rotr=se.createView=se.u32=se.u8=void 0;var Qu=Yf(),Kb=n=>new Uint8Array(n.buffer,n.byteOffset,n.byteLength);se.u8=Kb;var Lb=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));se.u32=Lb;var jb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);se.createView=jb;var Db=(n,e)=>n<<32-e|n>>>e;se.rotr=Db;se.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!se.isLE)throw new Error("Non little-endian hardware is not supported");var Vb=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Fb(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Vb[n[t]];return e}se.bytesToHex=Fb;function kb(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){let r=t*2,s=n.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[t]=i}return e}se.hexToBytes=kb;var Gb=async()=>{};se.nextTick=Gb;async function $b(n,e,t){let r=Date.now();for(let s=0;s<n;s++){t(s);let i=Date.now()-r;i>=0&&i<e||(await(0,se.nextTick)(),r+=i)}}se.asyncLoop=$b;function Qf(n){if(typeof n!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof n}`);return new TextEncoder().encode(n)}se.utf8ToBytes=Qf;function el(n){if(typeof n=="string"&&(n=Qf(n)),!(n instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof n})`);return n}se.toBytes=el;function Wb(...n){if(!n.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(n.length===1)return n[0];let e=n.reduce((r,s)=>r+s.length,0),t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}se.concatBytes=Wb;var Ju=class{clone(){return this._cloneInto()}};se.Hash=Ju;var Xb=n=>Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object;function Zb(n,e){if(e!==void 0&&(typeof e!="object"||!Xb(e)))throw new TypeError("Options should be object or undefined");return Object.assign(n,e)}se.checkOpts=Zb;function Yb(n){let e=r=>n().update(el(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}se.wrapConstructor=Yb;function Qb(n){let e=(r,s)=>n(s).update(el(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}se.wrapConstructorWithOpts=Qb;function Jb(n=32){if(Qu.crypto&&typeof Qu.crypto.getRandomValues=="function")return Qu.crypto.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}se.randomBytes=Jb});var eh=U(Vo=>{"use strict";y();g();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.hmac=void 0;var $a=Do(),Jf=rs(),Wa=class extends Jf.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,$a.default.hash(e);let r=(0,Jf.toBytes)(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return $a.default.exists(this),this.iHash.update(e),this}digestInto(e){$a.default.exists(this),$a.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ep=(n,e,t)=>new Wa(n,e).update(t).digest();Vo.hmac=ep;Vo.hmac.create=(n,e)=>new Wa(n,e)});var rh=U(fi=>{"use strict";y();g();Object.defineProperty(fi,"__esModule",{value:!0});fi.pbkdf2Async=fi.pbkdf2=void 0;var Xa=Do(),tp=eh(),di=rs();function th(n,e,t,r){Xa.default.hash(n);let s=(0,di.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if(Xa.default.number(i),Xa.default.number(o),Xa.default.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=(0,di.toBytes)(e),l=(0,di.toBytes)(t),d=new Uint8Array(o),u=tp.hmac.create(n,c),h=u._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:d,PRF:u,PRFSalt:h}}function nh(n,e,t,r,s){return n.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),t}function np(n,e,t,r){let{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=th(n,e,t,r),l,d=new Uint8Array(4),u=(0,di.createView)(d),h=new Uint8Array(a.outputLen);for(let w=1,m=0;m<i;w++,m+=a.outputLen){let f=o.subarray(m,m+a.outputLen);u.setInt32(0,w,!1),(l=c._cloneInto(l)).update(d).digestInto(h),f.set(h.subarray(0,f.length));for(let b=1;b<s;b++){a._cloneInto(l).update(h).digestInto(h);for(let A=0;A<f.length;A++)f[A]^=h[A]}}return nh(a,c,o,l,h)}fi.pbkdf2=np;async function rp(n,e,t,r){let{c:s,dkLen:i,asyncTick:o,DK:a,PRF:c,PRFSalt:l}=th(n,e,t,r),d,u=new Uint8Array(4),h=(0,di.createView)(u),w=new Uint8Array(c.outputLen);for(let m=1,f=0;f<i;m++,f+=c.outputLen){let b=a.subarray(f,f+c.outputLen);h.setInt32(0,m,!1),(d=l._cloneInto(d)).update(u).digestInto(w),b.set(w.subarray(0,b.length)),await(0,di.asyncLoop)(s-1,o,A=>{c._cloneInto(d).update(w).digestInto(w);for(let p=0;p<b.length;p++)b[p]^=w[p]})}return nh(c,l,a,d,w)}fi.pbkdf2Async=rp});var rl=U(Za=>{"use strict";y();g();Object.defineProperty(Za,"__esModule",{value:!0});Za.SHA2=void 0;var tl=Do(),Fo=rs();function sp(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}var nl=class extends Fo.Hash{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Fo.createView)(this.buffer)}update(e){tl.default.exists(this);let{view:t,buffer:r,blockLen:s}=this;e=(0,Fo.toBytes)(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let c=(0,Fo.createView)(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tl.default.exists(this),tl.default.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let u=o;u<s;u++)t[u]=0;sp(r,s-8,BigInt(this.length*8),i),this.process(r,0);let a=(0,Fo.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,d[u],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}};Za.SHA2=nl});var sh=U(hi=>{"use strict";y();g();Object.defineProperty(hi,"__esModule",{value:!0});hi.sha224=hi.sha256=void 0;var ip=rl(),Dt=rs(),op=(n,e,t)=>n&e^~n&t,ap=(n,e,t)=>n&e^n&t^e&t,cp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64),Ya=class extends ip.SHA2{constructor(){super(64,32,8,!1),this.A=ur[0]|0,this.B=ur[1]|0,this.C=ur[2]|0,this.D=ur[3]|0,this.E=ur[4]|0,this.F=ur[5]|0,this.G=ur[6]|0,this.H=ur[7]|0}get(){let{A:e,B:t,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,r,s,i,o,a,c]}set(e,t,r,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let u=0;u<16;u++,t+=4)lr[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){let h=lr[u-15],w=lr[u-2],m=(0,Dt.rotr)(h,7)^(0,Dt.rotr)(h,18)^h>>>3,f=(0,Dt.rotr)(w,17)^(0,Dt.rotr)(w,19)^w>>>10;lr[u]=f+lr[u-7]+m+lr[u-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:d}=this;for(let u=0;u<64;u++){let h=(0,Dt.rotr)(a,6)^(0,Dt.rotr)(a,11)^(0,Dt.rotr)(a,25),w=d+h+op(a,c,l)+cp[u]+lr[u]|0,f=((0,Dt.rotr)(r,2)^(0,Dt.rotr)(r,13)^(0,Dt.rotr)(r,22))+ap(r,s,i)|0;d=l,l=c,c=a,a=o+w|0,o=i,i=s,s=r,r=w+f|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,s,i,o,a,c,l,d)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},sl=class extends Ya{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};hi.sha256=(0,Dt.wrapConstructor)(()=>new Ya);hi.sha224=(0,Dt.wrapConstructor)(()=>new sl)});var ah=U(Vt=>{"use strict";y();g();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.add=Vt.toBig=Vt.split=Vt.fromBig=void 0;var Qa=BigInt(2**32-1),il=BigInt(32);function ol(n,e=!1){return e?{h:Number(n&Qa),l:Number(n>>il&Qa)}:{h:Number(n>>il&Qa)|0,l:Number(n&Qa)|0}}Vt.fromBig=ol;function ih(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){let{h:i,l:o}=ol(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}Vt.split=ih;var up=(n,e)=>BigInt(n>>>0)<<il|BigInt(e>>>0);Vt.toBig=up;var lp=(n,e,t)=>n>>>t,dp=(n,e,t)=>n<<32-t|e>>>t,fp=(n,e,t)=>n>>>t|e<<32-t,hp=(n,e,t)=>n<<32-t|e>>>t,yp=(n,e,t)=>n<<64-t|e>>>t-32,gp=(n,e,t)=>n>>>t-32|e<<64-t,bp=(n,e)=>e,pp=(n,e)=>n,mp=(n,e,t)=>n<<t|e>>>32-t,wp=(n,e,t)=>e<<t|n>>>32-t,_p=(n,e,t)=>e<<t-32|n>>>64-t,Ap=(n,e,t)=>n<<t-32|e>>>64-t;function oh(n,e,t,r){let s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}Vt.add=oh;var Bp=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Tp=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,xp=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Sp=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,Ep=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),vp=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,Up={fromBig:ol,split:ih,toBig:Vt.toBig,shrSH:lp,shrSL:dp,rotrSH:fp,rotrSL:hp,rotrBH:yp,rotrBL:gp,rotr32H:bp,rotr32L:pp,rotlSH:mp,rotlSL:wp,rotlBH:_p,rotlBL:Ap,add:oh,add3L:Bp,add3H:Tp,add4L:xp,add4H:Sp,add5H:vp,add5L:Ep};Vt.default=Up});var ch=U(Ft=>{"use strict";y();g();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.sha384=Ft.sha512_256=Ft.sha512_224=Ft.sha512=Ft.SHA512=void 0;var Ip=rl(),ee=ah(),Ja=rs(),[zp,Pp]=ee.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),dr=new Uint32Array(80),fr=new Uint32Array(80),ss=class extends Ip.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:h,Gh:w,Gl:m,Hh:f,Hl:b}=this;return[e,t,r,s,i,o,a,c,l,d,u,h,w,m,f,b]}set(e,t,r,s,i,o,a,c,l,d,u,h,w,m,f,b){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=h|0,this.Gh=w|0,this.Gl=m|0,this.Hh=f|0,this.Hl=b|0}process(e,t){for(let _=0;_<16;_++,t+=4)dr[_]=e.getUint32(t),fr[_]=e.getUint32(t+=4);for(let _=16;_<80;_++){let S=dr[_-15]|0,v=fr[_-15]|0,x=ee.default.rotrSH(S,v,1)^ee.default.rotrSH(S,v,8)^ee.default.shrSH(S,v,7),z=ee.default.rotrSL(S,v,1)^ee.default.rotrSL(S,v,8)^ee.default.shrSL(S,v,7),I=dr[_-2]|0,D=fr[_-2]|0,K=ee.default.rotrSH(I,D,19)^ee.default.rotrBH(I,D,61)^ee.default.shrSH(I,D,6),M=ee.default.rotrSL(I,D,19)^ee.default.rotrBL(I,D,61)^ee.default.shrSL(I,D,6),Q=ee.default.add4L(z,M,fr[_-7],fr[_-16]),J=ee.default.add4H(Q,x,K,dr[_-7],dr[_-16]);dr[_]=J|0,fr[_]=Q|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:h,Fh:w,Fl:m,Gh:f,Gl:b,Hh:A,Hl:p}=this;for(let _=0;_<80;_++){let S=ee.default.rotrSH(u,h,14)^ee.default.rotrSH(u,h,18)^ee.default.rotrBH(u,h,41),v=ee.default.rotrSL(u,h,14)^ee.default.rotrSL(u,h,18)^ee.default.rotrBL(u,h,41),x=u&w^~u&f,z=h&m^~h&b,I=ee.default.add5L(p,v,z,Pp[_],fr[_]),D=ee.default.add5H(I,A,S,x,zp[_],dr[_]),K=I|0,M=ee.default.rotrSH(r,s,28)^ee.default.rotrBH(r,s,34)^ee.default.rotrBH(r,s,39),Q=ee.default.rotrSL(r,s,28)^ee.default.rotrBL(r,s,34)^ee.default.rotrBL(r,s,39),J=r&i^r&a^i&a,R=s&o^s&c^o&c;A=f|0,p=b|0,f=w|0,b=m|0,w=u|0,m=h|0,{h:u,l:h}=ee.default.add(l|0,d|0,D|0,K|0),l=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;let B=ee.default.add3L(K,Q,R);r=ee.default.add3H(B,D,M,J),s=B|0}({h:r,l:s}=ee.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ee.default.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ee.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=ee.default.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:h}=ee.default.add(this.Eh|0,this.El|0,u|0,h|0),{h:w,l:m}=ee.default.add(this.Fh|0,this.Fl|0,w|0,m|0),{h:f,l:b}=ee.default.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:A,l:p}=ee.default.add(this.Hh|0,this.Hl|0,A|0,p|0),this.set(r,s,i,o,a,c,l,d,u,h,w,m,f,b,A,p)}roundClean(){dr.fill(0),fr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Ft.SHA512=ss;var al=class extends ss{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},cl=class extends ss{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},ul=class extends ss{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Ft.sha512=(0,Ja.wrapConstructor)(()=>new ss);Ft.sha512_224=(0,Ja.wrapConstructor)(()=>new al);Ft.sha512_256=(0,Ja.wrapConstructor)(()=>new cl);Ft.sha384=(0,Ja.wrapConstructor)(()=>new ul)});var dl=U(mt=>{"use strict";y();g();Object.defineProperty(mt,"__esModule",{value:!0});mt.mnemonicToSeedSync=mt.mnemonicToSeed=mt.validateMnemonic=mt.entropyToMnemonic=mt.mnemonicToEntropy=mt.generateMnemonic=void 0;var uh=Do(),lh=rh(),Op=sh(),dh=ch(),Np=rs(),ec=Vf(),qp=n=>n[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function fh(n){if(typeof n!="string")throw new TypeError(`Invalid mnemonic type: ${typeof n}`);return n.normalize("NFKD")}function ll(n){let e=fh(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function hh(n){uh.default.bytes(n,16,20,24,28,32)}function Mp(n,e=128){if(uh.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return bh((0,Np.randomBytes)(e/8),n)}mt.generateMnemonic=Mp;var Rp=n=>{let e=8-n.length/4;return new Uint8Array([(0,Op.sha256)(n)[0]>>e<<e])};function yh(n){if(!Array.isArray(n)||n.length!==2048||typeof n[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return n.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),ec.utils.chain(ec.utils.checksum(1,Rp),ec.utils.radix2(11,!0),ec.utils.alphabet(n))}function gh(n,e){let{words:t}=ll(n),r=yh(e).decode(t);return hh(r),r}mt.mnemonicToEntropy=gh;function bh(n,e){return hh(n),yh(e).encode(n).join(qp(e)?"\u3000":" ")}mt.entropyToMnemonic=bh;function Hp(n,e){try{gh(n,e)}catch{return!1}return!0}mt.validateMnemonic=Hp;var ph=n=>fh(`mnemonic${n}`);function Cp(n,e=""){return(0,lh.pbkdf2Async)(dh.sha512,ll(n).nfkd,ph(e),{c:2048,dkLen:64})}mt.mnemonicToSeed=Cp;function Kp(n,e=""){return(0,lh.pbkdf2)(dh.sha512,ll(n).nfkd,ph(e),{c:2048,dkLen:64})}mt.mnemonicToSeedSync=Kp});var yi=U(is=>{"use strict";y();g();Object.defineProperty(is,"__esModule",{value:!0});is.hmac=is.HMAC=void 0;var tc=Ff(),mh=pt(),ko=class extends mh.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,tc.hash)(e);let r=(0,mh.toBytes)(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,tc.exists)(this),this.iHash.update(e),this}digestInto(e){(0,tc.exists)(this),(0,tc.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};is.HMAC=ko;var Lp=(n,e,t)=>new ko(n,e).update(t).digest();is.hmac=Lp;is.hmac.create=(n,e)=>new ko(n,e)});var Go=U(kt=>{"use strict";y();g();Object.defineProperty(kt,"__esModule",{value:!0});kt.sha384=kt.sha512_256=kt.sha512_224=kt.sha512=kt.SHA512=void 0;var jp=kf(),te=Hb(),nc=pt(),[Dp,Vp]=(()=>te.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),hr=new Uint32Array(80),yr=new Uint32Array(80),os=class extends jp.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:h,Gh:w,Gl:m,Hh:f,Hl:b}=this;return[e,t,r,s,i,o,a,c,l,d,u,h,w,m,f,b]}set(e,t,r,s,i,o,a,c,l,d,u,h,w,m,f,b){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=h|0,this.Gh=w|0,this.Gl=m|0,this.Hh=f|0,this.Hl=b|0}process(e,t){for(let _=0;_<16;_++,t+=4)hr[_]=e.getUint32(t),yr[_]=e.getUint32(t+=4);for(let _=16;_<80;_++){let S=hr[_-15]|0,v=yr[_-15]|0,x=te.default.rotrSH(S,v,1)^te.default.rotrSH(S,v,8)^te.default.shrSH(S,v,7),z=te.default.rotrSL(S,v,1)^te.default.rotrSL(S,v,8)^te.default.shrSL(S,v,7),I=hr[_-2]|0,D=yr[_-2]|0,K=te.default.rotrSH(I,D,19)^te.default.rotrBH(I,D,61)^te.default.shrSH(I,D,6),M=te.default.rotrSL(I,D,19)^te.default.rotrBL(I,D,61)^te.default.shrSL(I,D,6),Q=te.default.add4L(z,M,yr[_-7],yr[_-16]),J=te.default.add4H(Q,x,K,hr[_-7],hr[_-16]);hr[_]=J|0,yr[_]=Q|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:h,Fh:w,Fl:m,Gh:f,Gl:b,Hh:A,Hl:p}=this;for(let _=0;_<80;_++){let S=te.default.rotrSH(u,h,14)^te.default.rotrSH(u,h,18)^te.default.rotrBH(u,h,41),v=te.default.rotrSL(u,h,14)^te.default.rotrSL(u,h,18)^te.default.rotrBL(u,h,41),x=u&w^~u&f,z=h&m^~h&b,I=te.default.add5L(p,v,z,Vp[_],yr[_]),D=te.default.add5H(I,A,S,x,Dp[_],hr[_]),K=I|0,M=te.default.rotrSH(r,s,28)^te.default.rotrBH(r,s,34)^te.default.rotrBH(r,s,39),Q=te.default.rotrSL(r,s,28)^te.default.rotrBL(r,s,34)^te.default.rotrBL(r,s,39),J=r&i^r&a^i&a,R=s&o^s&c^o&c;A=f|0,p=b|0,f=w|0,b=m|0,w=u|0,m=h|0,{h:u,l:h}=te.default.add(l|0,d|0,D|0,K|0),l=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;let B=te.default.add3L(K,Q,R);r=te.default.add3H(B,D,M,J),s=B|0}({h:r,l:s}=te.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=te.default.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=te.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=te.default.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:h}=te.default.add(this.Eh|0,this.El|0,u|0,h|0),{h:w,l:m}=te.default.add(this.Fh|0,this.Fl|0,w|0,m|0),{h:f,l:b}=te.default.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:A,l:p}=te.default.add(this.Hh|0,this.Hl|0,A|0,p|0),this.set(r,s,i,o,a,c,l,d,u,h,w,m,f,b,A,p)}roundClean(){hr.fill(0),yr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};kt.SHA512=os;var fl=class extends os{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},hl=class extends os{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},yl=class extends os{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};kt.sha512=(0,nc.wrapConstructor)(()=>new os);kt.sha512_224=(0,nc.wrapConstructor)(()=>new fl);kt.sha512_256=(0,nc.wrapConstructor)(()=>new hl);kt.sha384=(0,nc.wrapConstructor)(()=>new yl)});var Bh=U($e=>{"use strict";y();g();var Fp=$e&&$e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($e,"__esModule",{value:!0});$e.derivePath=$e.isValidPath=$e.getPublicKey=$e.CKDPriv=$e.getMasterKeyFromSeed=void 0;var kp=Fp(jf()),wh=yi(),_h=Go(),Gp=pt(),$p=/^m(\/[0-9]+')+$/,Ah=n=>n.replace("'",""),Wp="ed25519 seed",Xp=2147483648,Zp=n=>{let t=wh.hmac.create(_h.sha512,Wp).update((0,Gp.hexToBytes)(n)).digest(),r=t.slice(0,32),s=t.slice(32);return{key:r,chainCode:s}};$e.getMasterKeyFromSeed=Zp;var Yp=({key:n,chainCode:e},t)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);let s=new Uint8Array(r),i=new Uint8Array([0]),o=new Uint8Array([...i,...n,...s]),a=wh.hmac.create(_h.sha512,e).update(o).digest(),c=a.slice(0,32),l=a.slice(32);return{key:c,chainCode:l}};$e.CKDPriv=Yp;var Qp=(n,e=!0)=>{let r=kp.default.sign.keyPair.fromSeed(n).secretKey.subarray(32),s=new Uint8Array([0]);return e?new Uint8Array([...s,...r]):r};$e.getPublicKey=Qp;var Jp=n=>$p.test(n)?!n.split("/").slice(1).map(Ah).some(Number.isNaN):!1;$e.isValidPath=Jp;var em=(n,e,t=Xp)=>{if(!(0,$e.isValidPath)(n))throw new Error("Invalid derivation path");let{key:r,chainCode:s}=(0,$e.getMasterKeyFromSeed)(e);return n.split("/").slice(1).map(Ah).map(o=>parseInt(o,10)).reduce((o,a)=>(0,$e.CKDPriv)(o,a+t),{key:r,chainCode:s})};$e.derivePath=em});var Th=U(mn=>{"use strict";y();g();Object.defineProperty(mn,"__esModule",{value:!0});mn.APTOS_COIN=mn.DEFAULT_TXN_TIMEOUT_SEC=mn.DEFAULT_TXN_EXP_SEC_FROM_NOW=mn.DEFAULT_MAX_GAS_AMOUNT=void 0;mn.DEFAULT_MAX_GAS_AMOUNT=2e5;mn.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;mn.DEFAULT_TXN_TIMEOUT_SEC=20;mn.APTOS_COIN="0x1::aptos_coin::AptosCoin"});var Eh=U(gr=>{"use strict";y();g();Object.defineProperty(gr,"__esModule",{value:!0});gr.clear=gr.MemoizeExpiring=gr.Memoize=void 0;function Sh(n){let e,t,r;return typeof n=="object"?(e=n.hashFunction,t=n.ttlMs,r=n.tags):e=n,(s,i,o)=>{if(o.value!=null)o.value=xh(o.value,e,t,r);else if(o.get!=null)o.get=xh(o.get,e,t,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}gr.Memoize=Sh;function tm(n,e){return Sh({ttlMs:n,hashFunction:e})}gr.MemoizeExpiring=tm;var rc=new Map;function nm(n){let e=new Set;for(let t of n){let r=rc.get(t);if(r)for(let s of r)e.has(s)||(s.clear(),e.add(s))}return e.size}gr.clear=nm;function xh(n,e,t=0,r){let s=Symbol("__memoized_map__");return function(...i){let o,a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let c=a[s];if(Array.isArray(r))for(let l of r)rc.has(l)?rc.get(l).push(c):rc.set(l,[c]);if(e||i.length>0||t>0){let l;e===!0?l=i.map(h=>h.toString()).join("!"):e?l=e.apply(a,i):l=i[0];let d=`${l}__timestamp`,u=!1;if(t>0)if(!c.has(d))u=!0;else{let h=c.get(d);u=Date.now()-h>t}c.has(l)&&!u?o=c.get(l):(o=n.apply(a,i),c.set(l,o),t>0&&c.set(d,Date.now()))}else{let l=a;c.has(l)?o=c.get(l):(o=n.apply(a,i),c.set(l,o))}return o}}});var gl=U(br=>{"use strict";y();g();var rm=br&&br.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),vh=br&&br.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&rm(e,n,t)};Object.defineProperty(br,"__esModule",{value:!0});vh(Th(),br);vh(Eh(),br)});var Wo=U(sc=>{"use strict";y();g();Object.defineProperty(sc,"__esModule",{value:!0});sc.AccountAddress=void 0;var $o=$n(),We=class{constructor(e){if(e.length!==We.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=$o.HexString.ensure(e);t.noPrefix().length%2!==0&&(t=new $o.HexString(`0${t.noPrefix()}`));let r=t.toUint8Array();if(r.length>We.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===We.LENGTH)return new We(r);let s=new Uint8Array(We.LENGTH);return s.set(r,We.LENGTH-r.length),new We(s)}static isValid(e){if(e==="")return!1;let t=$o.HexString.ensure(e);return t.noPrefix().length%2!==0&&(t=new $o.HexString(`0${t.noPrefix()}`)),t.toUint8Array().length<=We.LENGTH}toHexString(){return $o.HexString.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new We(e.deserializeFixedBytes(We.LENGTH))}static standardizeAddress(e){let t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}};sc.AccountAddress=We;We.LENGTH=32;We.CORE_CODE_ADDRESS=We.fromHex("0x1")});var Ih=U(Uh=>{"use strict";y();g();Object.defineProperty(Uh,"__esModule",{value:!0})});var bl=U(wt=>{"use strict";y();g();Object.defineProperty(wt,"__esModule",{value:!0});wt.MAX_U256_BIG_INT=wt.MAX_U128_BIG_INT=wt.MAX_U64_BIG_INT=wt.MAX_U32_NUMBER=wt.MAX_U16_NUMBER=wt.MAX_U8_NUMBER=void 0;wt.MAX_U8_NUMBER=2**8-1;wt.MAX_U16_NUMBER=2**16-1;wt.MAX_U32_NUMBER=2**32-1;wt.MAX_U64_BIG_INT=BigInt(2**64)-1n;wt.MAX_U128_BIG_INT=BigInt(2**128)-1n;wt.MAX_U256_BIG_INT=BigInt(2**256)-BigInt(1)});var pl=U(gi=>{"use strict";y();g();var as=gi&&gi.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(gi,"__esModule",{value:!0});gi.Serializer=void 0;var wn=bl(),_n=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,r){this.ensureBufferWillHandleSize(t);let s=new DataView(this.buffer,this.offset);e.apply(s,[0,r,!0]),this.offset+=t}serializeStr(e){let t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");let t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let t=BigInt(e.toString())&BigInt(wn.MAX_U32_NUMBER),r=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(r))}serializeU128(e){let t=BigInt(e.toString())&wn.MAX_U64_BIG_INT,r=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(r)}serializeU256(e){let t=BigInt(e.toString())&wn.MAX_U128_BIG_INT,r=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(r)}serializeU32AsUleb128(e){let t=e,r=[];for(;t>>>7!==0;)r.push(t&127|128),t>>>=7;r.push(t),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};as([cs(0,wn.MAX_U8_NUMBER)],_n.prototype,"serializeU8",null);as([cs(0,wn.MAX_U16_NUMBER)],_n.prototype,"serializeU16",null);as([cs(0,wn.MAX_U32_NUMBER)],_n.prototype,"serializeU32",null);as([cs(BigInt(0),wn.MAX_U64_BIG_INT)],_n.prototype,"serializeU64",null);as([cs(BigInt(0),wn.MAX_U128_BIG_INT)],_n.prototype,"serializeU128",null);as([cs(BigInt(0),wn.MAX_U256_BIG_INT)],_n.prototype,"serializeU256",null);as([cs(0,wn.MAX_U32_NUMBER)],_n.prototype,"serializeU32AsUleb128",null);gi.Serializer=_n;function cs(n,e,t){return(r,s,i)=>{let o=i.value;return i.value=function(c){let l=BigInt(c.toString());if(l>BigInt(e.toString())||l<BigInt(n.toString()))throw new Error(t||"Value is out of range");o.apply(this,[c])},i}}});var Ph=U(ic=>{"use strict";y();g();Object.defineProperty(ic,"__esModule",{value:!0});ic.Deserializer=void 0;var zh=bl(),ml=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<zh.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(t),(r&128)===0)break;t+=7}if(e>zh.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};ic.Deserializer=ml});var Oh=U(ue=>{"use strict";y();g();Object.defineProperty(ue,"__esModule",{value:!0});ue.bcsSerializeFixedBytes=ue.bcsSerializeBytes=ue.bcsSerializeStr=ue.bcsSerializeBool=ue.bcsSerializeU256=ue.bcsSerializeU128=ue.bcsSerializeU32=ue.bcsSerializeU16=ue.bcsSerializeU8=ue.bcsSerializeUint64=ue.bcsToBytes=ue.deserializeVector=ue.serializeVectorWithFunc=ue.serializeVector=void 0;var Gt=pl();function sm(n,e){e.serializeU32AsUleb128(n.length),n.forEach(t=>{t.serialize(e)})}ue.serializeVector=sm;function im(n,e){let t=new Gt.Serializer;t.serializeU32AsUleb128(n.length);let r=t[e];return n.forEach(s=>{r.call(t,s)}),t.getBytes()}ue.serializeVectorWithFunc=im;function om(n,e){let t=n.deserializeUleb128AsU32(),r=[];for(let s=0;s<t;s+=1)r.push(e.deserialize(n));return r}ue.deserializeVector=om;function am(n){let e=new Gt.Serializer;return n.serialize(e),e.getBytes()}ue.bcsToBytes=am;function cm(n){let e=new Gt.Serializer;return e.serializeU64(n),e.getBytes()}ue.bcsSerializeUint64=cm;function um(n){let e=new Gt.Serializer;return e.serializeU8(n),e.getBytes()}ue.bcsSerializeU8=um;function lm(n){let e=new Gt.Serializer;return e.serializeU16(n),e.getBytes()}ue.bcsSerializeU16=lm;function dm(n){let e=new Gt.Serializer;return e.serializeU32(n),e.getBytes()}ue.bcsSerializeU32=dm;function fm(n){let e=new Gt.Serializer;return e.serializeU128(n),e.getBytes()}ue.bcsSerializeU128=fm;function hm(n){let e=new Gt.Serializer;return e.serializeU256(n),e.getBytes()}ue.bcsSerializeU256=hm;function ym(n){let e=new Gt.Serializer;return e.serializeBool(n),e.getBytes()}ue.bcsSerializeBool=ym;function gm(n){let e=new Gt.Serializer;return e.serializeStr(n),e.getBytes()}ue.bcsSerializeStr=gm;function bm(n){let e=new Gt.Serializer;return e.serializeBytes(n),e.getBytes()}ue.bcsSerializeBytes=bm;function pm(n){let e=new Gt.Serializer;return e.serializeFixedBytes(n),e.getBytes()}ue.bcsSerializeFixedBytes=pm});var Bn=U(An=>{"use strict";y();g();var mm=An&&An.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),oc=An&&An.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&mm(e,n,t)};Object.defineProperty(An,"__esModule",{value:!0});oc(Ih(),An);oc(pl(),An);oc(Ph(),An);oc(Oh(),An)});var ac=U(bi=>{"use strict";y();g();Object.defineProperty(bi,"__esModule",{value:!0});bi.Ed25519Signature=bi.Ed25519PublicKey=void 0;var pr=class{constructor(e){if(e.length!==pr.LENGTH)throw new Error(`Ed25519PublicKey length should be ${pr.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let t=e.deserializeBytes();return new pr(t)}};bi.Ed25519PublicKey=pr;pr.LENGTH=32;var mr=class{constructor(e){if(this.value=e,e.length!==mr.LENGTH)throw new Error(`Ed25519Signature length should be ${mr.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let t=e.deserializeBytes();return new mr(t)}};bi.Ed25519Signature=mr;mr.LENGTH=64});var _l=U(pi=>{"use strict";y();g();Object.defineProperty(pi,"__esModule",{value:!0});pi.MultiEd25519Signature=pi.MultiEd25519PublicKey=void 0;var $t=ac(),wl=32,Xo=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>wl)throw new Error(`"threshold" cannot be larger than ${wl}`)}toBytes(){let e=new Uint8Array(this.public_keys.length*$t.Ed25519PublicKey.LENGTH+1);return this.public_keys.forEach((t,r)=>{e.set(t.value,r*$t.Ed25519PublicKey.LENGTH)}),e[this.public_keys.length*$t.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let t=e.deserializeBytes(),r=t[t.length-1],s=[];for(let i=0;i<t.length-1;i+=$t.Ed25519PublicKey.LENGTH){let o=i;s.push(new $t.Ed25519PublicKey(t.subarray(o,o+$t.Ed25519PublicKey.LENGTH)))}return new Xo(s,r)}};pi.MultiEd25519PublicKey=Xo;var Wn=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==Wn.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Wn.BITMAP_LEN}`)}toBytes(){let e=new Uint8Array(this.signatures.length*$t.Ed25519Signature.LENGTH+Wn.BITMAP_LEN);return this.signatures.forEach((t,r)=>{e.set(t.value,r*$t.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*$t.Ed25519Signature.LENGTH),e}static createBitmap(e){let r=new Uint8Array([0,0,0,0]),s=new Set;return e.forEach(i=>{if(i>=wl)throw new Error(`Invalid bit value ${i}.`);if(s.has(i))throw new Error("Duplicated bits detected.");s.add(i);let o=Math.floor(i/8),a=r[o];a|=128>>i%8,r[o]=a}),r}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let t=e.deserializeBytes(),r=t.subarray(t.length-4),s=[];for(let i=0;i<t.length-r.length;i+=$t.Ed25519Signature.LENGTH){let o=i;s.push(new $t.Ed25519Signature(t.subarray(o,o+$t.Ed25519Signature.LENGTH)))}return new Wn(s,r)}};pi.MultiEd25519Signature=Wn;Wn.BITMAP_LEN=4});var Bl=U(De=>{"use strict";y();g();Object.defineProperty(De,"__esModule",{value:!0});De.AccountAuthenticatorMultiEd25519=De.AccountAuthenticatorEd25519=De.AccountAuthenticator=De.TransactionAuthenticatorFeePayer=De.TransactionAuthenticatorMultiAgent=De.TransactionAuthenticatorMultiEd25519=De.TransactionAuthenticatorEd25519=De.TransactionAuthenticator=void 0;var wr=Bn(),Al=Wo(),cc=ac(),uc=_l(),us=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return mi.load(e);case 1:return wi.load(e);case 2:return _i.load(e);case 3:return Ai.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}};De.TransactionAuthenticator=us;var mi=class extends us{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=cc.Ed25519PublicKey.deserialize(e),r=cc.Ed25519Signature.deserialize(e);return new mi(t,r)}};De.TransactionAuthenticatorEd25519=mi;var wi=class extends us{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=uc.MultiEd25519PublicKey.deserialize(e),r=uc.MultiEd25519Signature.deserialize(e);return new wi(t,r)}};De.TransactionAuthenticatorMultiEd25519=wi;var _i=class extends us{constructor(e,t,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),(0,wr.serializeVector)(this.secondary_signer_addresses,e),(0,wr.serializeVector)(this.secondary_signers,e)}static load(e){let t=Tn.deserialize(e),r=(0,wr.deserializeVector)(e,Al.AccountAddress),s=(0,wr.deserializeVector)(e,Tn);return new _i(t,r,s)}};De.TransactionAuthenticatorMultiAgent=_i;var Ai=class extends us{constructor(e,t,r,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r,this.fee_payer=s}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),(0,wr.serializeVector)(this.secondary_signer_addresses,e),(0,wr.serializeVector)(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=Tn.deserialize(e),r=(0,wr.deserializeVector)(e,Al.AccountAddress),s=(0,wr.deserializeVector)(e,Tn),i=Al.AccountAddress.deserialize(e),o=Tn.deserialize(e),a={address:i,authenticator:o};return new Ai(t,r,s,a)}};De.TransactionAuthenticatorFeePayer=Ai;var Tn=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Bi.load(e);case 1:return Ti.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}};De.AccountAuthenticator=Tn;var Bi=class extends Tn{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=cc.Ed25519PublicKey.deserialize(e),r=cc.Ed25519Signature.deserialize(e);return new Bi(t,r)}};De.AccountAuthenticatorEd25519=Bi;var Ti=class extends Tn{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=uc.MultiEd25519PublicKey.deserialize(e),r=uc.MultiEd25519Signature.deserialize(e);return new Ti(t,r)}};De.AccountAuthenticatorMultiEd25519=Ti});var dc=U(lc=>{"use strict";y();g();Object.defineProperty(lc,"__esModule",{value:!0});lc.Identifier=void 0;var Zo=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){let t=e.deserializeStr();return new Zo(t)}};lc.Identifier=Zo});var hc=U(re=>{"use strict";y();g();Object.defineProperty(re,"__esModule",{value:!0});re.TypeTagParserError=re.TypeTagParser=re.objectStructTag=re.optionStructTag=re.stringStructTag=re.StructTag=re.TypeTagStruct=re.TypeTagVector=re.TypeTagSigner=re.TypeTagAddress=re.TypeTagU256=re.TypeTagU128=re.TypeTagU64=re.TypeTagU32=re.TypeTagU16=re.TypeTagU8=re.TypeTagBool=re.TypeTag=void 0;var ls=Wo(),Nh=Bn(),xn=dc(),Je=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return ds.load(e);case 1:return fs.load(e);case 2:return gs.load(e);case 3:return bs.load(e);case 4:return Ar.load(e);case 5:return xi.load(e);case 6:return ms.load(e);case 7:return Br.load(e);case 8:return hs.load(e);case 9:return ys.load(e);case 10:return ps.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}};re.TypeTag=Je;var ds=class extends Je{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new ds}};re.TypeTagBool=ds;var fs=class extends Je{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new fs}};re.TypeTagU8=fs;var hs=class extends Je{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new hs}};re.TypeTagU16=hs;var ys=class extends Je{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new ys}};re.TypeTagU32=ys;var gs=class extends Je{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new gs}};re.TypeTagU64=gs;var bs=class extends Je{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new bs}};re.TypeTagU128=bs;var ps=class extends Je{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new ps}};re.TypeTagU256=ps;var Ar=class extends Je{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Ar}};re.TypeTagAddress=Ar;var xi=class extends Je{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new xi}};re.TypeTagSigner=xi;var ms=class extends Je{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let t=Je.deserialize(e);return new ms(t)}};re.TypeTagVector=ms;var Br=class extends Je{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let t=rn.deserialize(e);return new Br(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===ls.AccountAddress.CORE_CODE_ADDRESS.toHexString()}};re.TypeTagStruct=Br;var rn=class{constructor(e,t,r,s){this.address=e,this.module_name=t,this.name=r,this.type_args=s}static fromString(e){let t=new Si(e).parseTypeTag();return new rn(t.value.address,t.value.module_name,t.value.name,t.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),(0,Nh.serializeVector)(this.type_args,e)}static deserialize(e){let t=ls.AccountAddress.deserialize(e),r=xn.Identifier.deserialize(e),s=xn.Identifier.deserialize(e),i=(0,Nh.deserializeVector)(e,Je);return new rn(t,r,s,i)}};re.StructTag=rn;re.stringStructTag=new rn(ls.AccountAddress.fromHex("0x1"),new xn.Identifier("string"),new xn.Identifier("String"),[]);function wm(n){return new rn(ls.AccountAddress.fromHex("0x1"),new xn.Identifier("option"),new xn.Identifier("Option"),[n])}re.optionStructTag=wm;function _m(n){return new rn(ls.AccountAddress.fromHex("0x1"),new xn.Identifier("object"),new xn.Identifier("Object"),[n])}re.objectStructTag=_m;function _r(n){throw new fc(n)}function qh(n){return!!n.match(/\s/)}function Mh(n){return!!n.match(/[_A-Za-z0-9]/g)}function Am(n){return!!n.match(/T\d+/g)}function Bm(n,e){let t=n[e];if(t===":"){if(n.slice(e,e+2)==="::")return[["COLON","::"],2];_r("Unrecognized token.")}else{if(t==="<")return[["LT","<"],1];if(t===">")return[["GT",">"],1];if(t===",")return[["COMMA",","],1];if(qh(t)){let r="";for(let s=e;s<n.length;s+=1){let i=n[s];if(qh(i))r=`${r}${i}`;else break}return[["SPACE",r],r.length]}else if(Mh(t)){let r="";for(let s=e;s<n.length;s+=1){let i=n[s];if(Mh(i))r=`${r}${i}`;else break}return Am(r)?[["GENERIC",r],r.length]:[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function Tm(n){let e=0,t=[];for(;e<n.length;){let[r,s]=Bm(n,e);r[0]!=="SPACE"&&t.push(r),e+=s}return t}var Si=class{constructor(e,t){this.typeTags=[],this.tokens=Tm(e),this.typeTags=t||[]}consume(e){let t=this.tokens.shift();(!t||t[1]!==e)&&_r("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,t){let r=[];for(this.tokens.length<=0&&_r("Invalid type tag.");this.tokens[0][1]!==e&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&_r("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&_r("Invalid type tag.");let[e,t]=this.tokens.shift();if(t==="u8")return new fs;if(t==="u16")return new hs;if(t==="u32")return new ys;if(t==="u64")return new gs;if(t==="u128")return new bs;if(t==="u256")return new ps;if(t==="bool")return new ds;if(t==="address")return new Ar;if(t==="vector"){this.consume("<");let r=this.parseTypeTag();return this.consume(">"),new ms(r)}if(t==="string")return new Br(re.stringStructTag);if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){let r=ls.AccountAddress.fromHex(t);this.consume("::");let[s,i]=this.tokens.shift();s!=="IDENT"&&_r("Invalid type tag."),this.consume("::");let[o,a]=this.tokens.shift();if(o!=="IDENT"&&_r("Invalid type tag."),ls.AccountAddress.CORE_CODE_ADDRESS.toHexString()===r.toHexString()&&i==="object"&&a==="Object")return this.consumeWholeGeneric(),new Ar;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));let l=new rn(r,new xn.Identifier(i),new xn.Identifier(a),c);return new Br(l)}if(e==="GENERIC"){this.typeTags.length===0&&_r("Can't convert generic type since no typeTags were specified.");let r=parseInt(t.substring(1),10);return new Si(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}};re.TypeTagParser=Si;var fc=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}};re.TypeTagParserError=fc});var Sl=U(V=>{"use strict";y();g();Object.defineProperty(V,"__esModule",{value:!0});V.UserTransaction=V.Transaction=V.TransactionArgumentBool=V.TransactionArgumentU8Vector=V.TransactionArgumentAddress=V.TransactionArgumentU256=V.TransactionArgumentU128=V.TransactionArgumentU64=V.TransactionArgumentU32=V.TransactionArgumentU16=V.TransactionArgumentU8=V.TransactionArgument=V.ChainId=V.TransactionPayloadMultisig=V.TransactionPayloadEntryFunction=V.TransactionPayloadScript=V.TransactionPayload=V.FeePayerRawTransaction=V.MultiAgentRawTransaction=V.RawTransactionWithData=V.SignedTransaction=V.WriteSet=V.ChangeSet=V.ModuleId=V.Module=V.MultiSig=V.MultiSigTransactionPayload=V.EntryFunction=V.Script=V.RawTransaction=void 0;var Rh=cr(),xm=$n(),sn=Bn(),Tr=Wo(),Sm=Bl(),yc=dc(),Hh=hc(),xr=class{constructor(e,t,r,s,i,o,a){this.sender=e,this.sequence_number=t,this.payload=r,this.max_gas_amount=s,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let t=Tr.AccountAddress.deserialize(e),r=e.deserializeU64(),s=ws.deserialize(e),i=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=Mi.deserialize(e);return new xr(t,r,s,i,o,a,c)}};V.RawTransaction=xr;var Ei=class{constructor(e,t,r){this.code=e,this.ty_args=t,this.args=r}serialize(e){e.serializeBytes(this.code),(0,sn.serializeVector)(this.ty_args,e),(0,sn.serializeVector)(this.args,e)}static deserialize(e){let t=e.deserializeBytes(),r=(0,sn.deserializeVector)(e,Hh.TypeTag),s=(0,sn.deserializeVector)(e,Ot);return new Ei(t,r,s)}};V.Script=Ei;var Xn=class{constructor(e,t,r,s){this.module_name=e,this.function_name=t,this.ty_args=r,this.args=s}static natural(e,t,r,s){return new Xn(Sr.fromStr(e),new yc.Identifier(t),r,s)}static natual(e,t,r,s){return Xn.natural(e,t,r,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),(0,sn.serializeVector)(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){let t=Sr.deserialize(e),r=yc.Identifier.deserialize(e),s=(0,sn.deserializeVector)(e,Hh.TypeTag),i=e.deserializeUleb128AsU32(),o=[];for(let c=0;c<i;c+=1)o.push(e.deserializeBytes());let a=o;return new Xn(t,r,s,a)}};V.EntryFunction=Xn;var vi=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new vi(Xn.deserialize(e))}};V.MultiSigTransactionPayload=vi;var Ui=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=Tr.AccountAddress.deserialize(e),r=e.deserializeBool(),s;return r&&(s=vi.deserialize(e)),new Ui(t,s)}};V.MultiSig=Ui;var Yo=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){let t=e.deserializeBytes();return new Yo(t)}};V.Module=Yo;var Sr=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new Sr(Tr.AccountAddress.fromHex(new xm.HexString(t[0])),new yc.Identifier(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=Tr.AccountAddress.deserialize(e),r=yc.Identifier.deserialize(e);return new Sr(t,r)}};V.ModuleId=Sr;var Tl=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}};V.ChangeSet=Tl;var xl=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}};V.WriteSet=xl;var Ii=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=xr.deserialize(e),r=Sm.TransactionAuthenticator.deserialize(e);return new Ii(t,r)}};V.SignedTransaction=Ii;var Qo=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return zi.load(e);case 1:return Pi.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}};V.RawTransactionWithData=Qo;var zi=class extends Qo{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),(0,sn.serializeVector)(this.secondary_signer_addresses,e)}static load(e){let t=xr.deserialize(e),r=(0,sn.deserializeVector)(e,Tr.AccountAddress);return new zi(t,r)}};V.MultiAgentRawTransaction=zi;var Pi=class extends Qo{constructor(e,t,r){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),(0,sn.serializeVector)(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){let t=xr.deserialize(e),r=(0,sn.deserializeVector)(e,Tr.AccountAddress),s=Tr.AccountAddress.deserialize(e);return new Pi(t,r,s)}};V.FeePayerRawTransaction=Pi;var ws=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Oi.load(e);case 2:return Ni.load(e);case 3:return qi.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};V.TransactionPayload=ws;var Oi=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){let t=Ei.deserialize(e);return new Oi(t)}};V.TransactionPayloadScript=Oi;var Ni=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){let t=Xn.deserialize(e);return new Ni(t)}};V.TransactionPayloadEntryFunction=Ni;var qi=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let t=Ui.deserialize(e);return new qi(t)}};V.TransactionPayloadMultisig=qi;var Mi=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){let t=e.deserializeU8();return new Mi(t)}};V.ChainId=Mi;var Ot=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Ri.load(e);case 1:return Ki.load(e);case 2:return Li.load(e);case 3:return Di.load(e);case 4:return Vi.load(e);case 5:return Fi.load(e);case 6:return Hi.load(e);case 7:return Ci.load(e);case 8:return ji.load(e);default:throw new Error(`Unknown variant index for TransactionArgument: ${t}`)}}};V.TransactionArgument=Ot;var Ri=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){let t=e.deserializeU8();return new Ri(t)}};V.TransactionArgumentU8=Ri;var Hi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){let t=e.deserializeU16();return new Hi(t)}};V.TransactionArgumentU16=Hi;var Ci=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){let t=e.deserializeU32();return new Ci(t)}};V.TransactionArgumentU32=Ci;var Ki=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){let t=e.deserializeU64();return new Ki(t)}};V.TransactionArgumentU64=Ki;var Li=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){let t=e.deserializeU128();return new Li(t)}};V.TransactionArgumentU128=Li;var ji=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){let t=e.deserializeU256();return new ji(t)}};V.TransactionArgumentU256=ji;var Di=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let t=Tr.AccountAddress.deserialize(e);return new Di(t)}};V.TransactionArgumentAddress=Di;var Vi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){let t=e.deserializeBytes();return new Vi(t)}};V.TransactionArgumentU8Vector=Vi;var Fi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){let t=e.deserializeBool();return new Fi(t)}};V.TransactionArgumentBool=Fi;var gc=class{getHashSalt(){let e=Rh.sha3_256.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return ki.load(e);default:throw new Error(`Unknown variant index for Transaction: ${t}`)}}};V.Transaction=gc;var ki=class extends gc{constructor(e){super(),this.value=e}hash(){let e=Rh.sha3_256.create();return e.update(this.getHashSalt()),e.update((0,sn.bcsToBytes)(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new ki(Ii.deserialize(e))}};V.UserTransaction=ki});var Kh=U(bc=>{"use strict";y();g();Object.defineProperty(bc,"__esModule",{value:!0});bc.AuthenticationKey=void 0;var Em=$n(),Ch=cr(),Nt=class{constructor(e){if(e.length!==Nt.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){let t=e.toBytes(),r=new Uint8Array(t.length+1);r.set(t),r.set([Nt.MULTI_ED25519_SCHEME],t.length);let s=Ch.sha3_256.create();return s.update(r),new Nt(s.digest())}static fromEd25519PublicKey(e){let t=e.value,r=new Uint8Array(t.length+1);r.set(t),r.set([Nt.ED25519_SCHEME],t.length);let s=Ch.sha3_256.create();return s.update(r),new Nt(s.digest())}derivedAddress(){return Em.HexString.fromUint8Array(this.bytes)}};bc.AuthenticationKey=Nt;Nt.LENGTH=32;Nt.MULTI_ED25519_SCHEME=1;Nt.ED25519_SCHEME=0;Nt.DERIVE_RESOURCE_ACCOUNT_SCHEME=255});var vr=U(_t=>{"use strict";y();g();var vm=_t&&_t.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Er=_t&&_t.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vm(e,n,t)};Object.defineProperty(_t,"__esModule",{value:!0});Er(Wo(),_t);Er(Bl(),_t);Er(Sl(),_t);Er(hc(),_t);Er(dc(),_t);Er(ac(),_t);Er(_l(),_t);Er(Kh(),_t)});var El=U(et=>{"use strict";y();g();var Um=et&&et.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Im=et&&et.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),zm=et&&et.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},Pm=et&&et.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Um(e,n,t);return Im(e,n),e},Om=et&&et.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(et,"__esModule",{value:!0});et.getAddressFromAccountOrAddress=et.AptosAccount=void 0;var on=$n(),pc=Om(jf()),Nm=Pm(dl()),qm=pt(),Mm=Va(),Rm=cr(),Hm=Bh(),Cm=gl(),mc=vr(),Km=Bn(),Lm=Mb(),Sn=class{static fromAptosAccountObject(e){return new Sn(on.HexString.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromPrivateKey(e){return new Sn(e.toUint8Array())}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,t){if(!Sn.isValidPath(e))throw new Error("Invalid derivation path");let r=t.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:s}=(0,Hm.derivePath)(e,(0,qm.bytesToHex)(Nm.mnemonicToSeedSync(r)));return new Sn(s)}constructor(e,t){if(!e||e.length!==32&&e.length!==64)throw new Error("invalid key");e?this.signingKey=pc.default.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=pc.default.sign.keyPair(),this.accountAddress=on.HexString.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){let e=new mc.Ed25519PublicKey(this.signingKey.publicKey);return mc.AuthenticationKey.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){let r=(0,Km.bcsToBytes)(mc.AccountAddress.fromHex(e)),s=new Uint8Array([...r,...t,mc.AuthenticationKey.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=Rm.sha3_256.create();return i.update(s),on.HexString.fromUint8Array(i.digest())}static getCollectionID(e,t){let r=new Lm.TextEncoder().encode(`${e}::${t}`),s=Mm.sha256.create();return s.update(r),on.HexString.fromUint8Array(s.digest())}pubKey(){return on.HexString.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){let t=pc.default.sign.detached(e,this.signingKey.secretKey);return on.HexString.fromUint8Array(t)}signHexString(e){let t=on.HexString.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){let r=on.HexString.ensure(e).toUint8Array(),s=on.HexString.ensure(t).toUint8Array();return pc.default.sign.detached.verify(r,s,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:on.HexString.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};zm([(0,Cm.Memoize)()],Sn.prototype,"authKey",null);et.AptosAccount=Sn;function jm(n){return n instanceof Sn?n.address():on.HexString.ensure(n)}et.getAddressFromAccountOrAddress=jm});var Lh=U(Wt=>{"use strict";y();g();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.EntryFunctionABI=Wt.TransactionScriptABI=Wt.ScriptABI=Wt.ArgumentABI=Wt.TypeArgumentABI=void 0;var Ur=Bn(),Dm=Sl(),Vm=hc(),_s=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){let t=e.deserializeStr();return new _s(t)}};Wt.TypeArgumentABI=_s;var As=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){let t=e.deserializeStr(),r=Vm.TypeTag.deserialize(e);return new As(t,r)}};Wt.ArgumentABI=As;var Jo=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Gi.load(e);case 1:return $i.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};Wt.ScriptABI=Jo;var Gi=class extends Jo{constructor(e,t,r,s,i){super(),this.name=e,this.doc=t,this.code=r,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),(0,Ur.serializeVector)(this.ty_args,e),(0,Ur.serializeVector)(this.args,e)}static load(e){let t=e.deserializeStr(),r=e.deserializeStr(),s=e.deserializeBytes(),i=(0,Ur.deserializeVector)(e,_s),o=(0,Ur.deserializeVector)(e,As);return new Gi(t,r,s,i,o)}};Wt.TransactionScriptABI=Gi;var $i=class extends Jo{constructor(e,t,r,s,i){super(),this.name=e,this.module_name=t,this.doc=r,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),(0,Ur.serializeVector)(this.ty_args,e),(0,Ur.serializeVector)(this.args,e)}static load(e){let t=e.deserializeStr(),r=Dm.ModuleId.deserialize(e),s=e.deserializeStr(),i=(0,Ur.deserializeVector)(e,_s),o=(0,Ur.deserializeVector)(e,As);return new $i(t,r,s,i,o)}};Wt.EntryFunctionABI=$i});var Dh=U(Xt=>{"use strict";y();g();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.argToTransactionArgument=Xt.serializeArg=Xt.ensureBigInt=Xt.ensureNumber=Xt.ensureBoolean=void 0;var wc=$n(),oe=vr();function _c(n,e,t){if(!e?.includes(typeof n))throw new Error(t||`Invalid arg: ${n} type should be ${e instanceof Array?e.join(" or "):e}`)}function vl(n){if(_c(n,["boolean","string"]),typeof n=="boolean")return n;if(n==="true")return!0;if(n==="false")return!1;throw new Error("Invalid boolean string.")}Xt.ensureBoolean=vl;function Bs(n){if(_c(n,["number","string"]),typeof n=="number")return n;let e=Number.parseInt(n,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}Xt.ensureNumber=Bs;function Ts(n){return _c(n,["number","bigint","string"]),BigInt(n)}Xt.ensureBigInt=Ts;function Fm(n,e,t){Ul(n,e,t,0)}Xt.serializeArg=Fm;function Ul(n,e,t,r){if(e instanceof oe.TypeTagBool)t.serializeBool(vl(n));else if(e instanceof oe.TypeTagU8)t.serializeU8(Bs(n));else if(e instanceof oe.TypeTagU16)t.serializeU16(Bs(n));else if(e instanceof oe.TypeTagU32)t.serializeU32(Bs(n));else if(e instanceof oe.TypeTagU64)t.serializeU64(Ts(n));else if(e instanceof oe.TypeTagU128)t.serializeU128(Ts(n));else if(e instanceof oe.TypeTagU256)t.serializeU256(Ts(n));else if(e instanceof oe.TypeTagAddress)jh(n,t);else if(e instanceof oe.TypeTagVector)km(n,e,t,r);else if(e instanceof oe.TypeTagStruct)Gm(n,e,t,r);else throw new Error("Unsupported arg type.")}function jh(n,e){let t;if(typeof n=="string"||n instanceof wc.HexString)t=oe.AccountAddress.fromHex(n);else if(n instanceof oe.AccountAddress)t=n;else throw new Error("Invalid account address.");t.serialize(e)}function km(n,e,t,r){if(e.value instanceof oe.TypeTagU8){if(n instanceof Uint8Array){t.serializeBytes(n);return}if(n instanceof wc.HexString){t.serializeBytes(n.toUint8Array());return}if(typeof n=="string"){t.serializeStr(n);return}}if(!Array.isArray(n))throw new Error("Invalid vector args.");t.serializeU32AsUleb128(n.length),n.forEach(s=>Ul(s,e.value,t,r+1))}function Gm(n,e,t,r){let{address:s,module_name:i,name:o,type_args:a}=e.value,c=`${wc.HexString.fromUint8Array(s.address).toShortString()}::${i.value}::${o.value}`;if(c==="0x1::string::String")_c(n,["string"]),t.serializeStr(n);else if(c==="0x1::object::Object")jh(n,t);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);$m(n,a[0],t,r)}else throw new Error("Unsupported struct type in function argument")}function $m(n,e,t,r){n==null?t.serializeU32AsUleb128(0):(t.serializeU32AsUleb128(1),Ul(n,e,t,r+1))}function Wm(n,e){if(e instanceof oe.TypeTagBool)return new oe.TransactionArgumentBool(vl(n));if(e instanceof oe.TypeTagU8)return new oe.TransactionArgumentU8(Bs(n));if(e instanceof oe.TypeTagU16)return new oe.TransactionArgumentU16(Bs(n));if(e instanceof oe.TypeTagU32)return new oe.TransactionArgumentU32(Bs(n));if(e instanceof oe.TypeTagU64)return new oe.TransactionArgumentU64(Ts(n));if(e instanceof oe.TypeTagU128)return new oe.TransactionArgumentU128(Ts(n));if(e instanceof oe.TypeTagU256)return new oe.TransactionArgumentU256(Ts(n));if(e instanceof oe.TypeTagAddress){let t;if(typeof n=="string"||n instanceof wc.HexString)t=oe.AccountAddress.fromHex(n);else if(n instanceof oe.AccountAddress)t=n;else throw new Error("Invalid account address.");return new oe.TransactionArgumentAddress(t)}if(e instanceof oe.TypeTagVector&&e.value instanceof oe.TypeTagU8){if(!(n instanceof Uint8Array))throw new Error(`${n} should be an instance of Uint8Array`);return new oe.TransactionArgumentU8Vector(n)}throw new Error("Unknown type for TransactionArgument.")}Xt.argToTransactionArgument=Wm});var $h=U(At=>{"use strict";y();g();Object.defineProperty(At,"__esModule",{value:!0});At.buildRawTransactionByABI=At.fetchABI=At.TransactionBuilderABI=At.TransactionBuilderMultiEd25519=At.TransactionBuilderEd25519=At.TransactionBuilder=void 0;var Xm=cr(),Xe=vr(),Wi=Bn(),Zm=$n(),xs=Lh(),Vh=Dh(),kh=vr(),Fh=gl(),Ym="APTOS::RawTransaction",Qm="APTOS::RawTransactionWithData",Ss=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,r)}static getSigningMessage(e){let t=Xm.sha3_256.create();if(e instanceof Xe.RawTransaction)t.update(Ym);else if(e instanceof Xe.MultiAgentRawTransaction)t.update(Qm);else throw new Error("Unknown transaction type.");let r=t.digest(),s=(0,Wi.bcsToBytes)(e),i=new Uint8Array(r.length+s.length);return i.set(r),i.set(s,r.length),i}};At.TransactionBuilder=Ss;var Il=class extends Ss{constructor(e,t,r){super(e,r),this.publicKey=t}rawToSigned(e){let t=Ss.getSigningMessage(e),r=this.signingFunction(t),s=new Xe.TransactionAuthenticatorEd25519(new Xe.Ed25519PublicKey(this.publicKey),r);return new Xe.SignedTransaction(e,s)}sign(e){return(0,Wi.bcsToBytes)(this.rawToSigned(e))}};At.TransactionBuilderEd25519=Il;var zl=class extends Ss{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){let t=Ss.getSigningMessage(e),r=this.signingFunction(t),s=new Xe.TransactionAuthenticatorMultiEd25519(this.publicKey,r);return new Xe.SignedTransaction(e,s)}sign(e){return(0,Wi.bcsToBytes)(this.rawToSigned(e))}};At.TransactionBuilderMultiEd25519=zl;var Es=class{constructor(e,t){this.abiMap=new Map,e.forEach(r=>{let s=new Wi.Deserializer(r),i=xs.ScriptABI.deserialize(s),o;if(i instanceof xs.EntryFunctionABI){let a=i,{address:c,name:l}=a.module_name;o=`${Zm.HexString.fromUint8Array(c.address).toShortString()}::${l.value}::${a.name}`}else o=i.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,i)}),this.builderConfig={maxGasAmount:BigInt(Fh.DEFAULT_MAX_GAS_AMOUNT),expSecFromNow:Fh.DEFAULT_TXN_EXP_SEC_FROM_NOW,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((r,s)=>{let i=new Wi.Serializer;return(0,Vh.serializeArg)(r,e[s].type_tag,i),i.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((r,s)=>(0,Vh.argToTransactionArgument)(r,e[s].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,r){let s=t.map(a=>new kh.TypeTagParser(a).parseTypeTag()),i;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);let o=this.abiMap.get(e);if(o instanceof xs.EntryFunctionABI){let a=o,c=Es.toBCSArgs(a.args,r);i=new Xe.TransactionPayloadEntryFunction(new Xe.EntryFunction(a.module_name,new Xe.Identifier(a.name),s,c))}else if(o instanceof xs.TransactionScriptABI){let a=o,c=Es.toTransactionArguments(a.args,r);i=new Xe.TransactionPayloadScript(new Xe.Script(a.code,s,c))}else throw new Error("Unknown ABI format.");return i}build(e,t,r){let{sender:s,sequenceNumber:i,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:l}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");let d=s instanceof Xe.AccountAddress?s:Xe.AccountAddress.fromHex(s),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),h=this.buildTransactionPayload(e,t,r);if(h)return new Xe.RawTransaction(d,BigInt(i),h,BigInt(a),BigInt(o),u,new Xe.ChainId(Number(l)));throw new Error("Invalid ABI.")}};At.TransactionBuilderABI=Es;function Gh(n){let e=n.map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(s=>s.is_entry).map(s=>({fullName:`${r.address}::${r.name}::${s.name}`,...s}))),t=new Map;return e.forEach(r=>{t.set(r.fullName,r)}),t}At.fetchABI=Gh;function Jm(n,e,t,r,s){if(t=(f=>f.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");let[a,c]=t.split("::"),l=Gh(n);if(!l.has(t))throw new Error(`${t} doesn't exist.`);let d=l.get(t);if(!d)throw Error("abi miss");let h=d.params.filter(f=>f!=="signer"&&f!=="&signer").map((f,b)=>new xs.ArgumentABI(`var${b}`,new kh.TypeTagParser(f,r).parseTypeTag())),w=new xs.EntryFunctionABI(d.name,Xe.ModuleId.fromStr(`${a}::${c}`),"",d.generic_type_params.map((f,b)=>new xs.TypeArgumentABI(`${b}`)),h);return new Es([(0,Wi.bcsToBytes)(w)],e).build(t,r,s)}At.buildRawTransactionByABI=Jm});var Wh=U(ea=>{"use strict";y();g();Object.defineProperty(ea,"__esModule",{value:!0});ea.MoveFunctionVisibility=void 0;var ew;(function(n){n.PRIVATE="private",n.PUBLIC="public",n.FRIEND="friend"})(ew=ea.MoveFunctionVisibility||(ea.MoveFunctionVisibility={}))});var Ol=U(Ze=>{"use strict";y();g();var Xh=Ze&&Ze.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),tw=Ze&&Ze.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),nw=Ze&&Ze.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Xh(e,n,t)},Pl=Ze&&Ze.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Xh(e,n,t);return tw(e,n),e};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.MoveTypes=Ze.TxnBuilderTypes=Ze.BCS=void 0;nw($h(),Ze);Ze.BCS=Pl(Bn());Ze.TxnBuilderTypes=Pl(vr());Ze.MoveTypes=Pl(Wh())});var Ac=U(Bt=>{"use strict";y();g();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.MAX_U256_BIG_INT=Bt.MAX_U128_BIG_INT=Bt.MAX_U64_BIG_INT=Bt.MAX_U32_NUMBER=Bt.MAX_U16_NUMBER=Bt.MAX_U8_NUMBER=void 0;Bt.MAX_U8_NUMBER=255;Bt.MAX_U16_NUMBER=65535;Bt.MAX_U32_NUMBER=4294967295;Bt.MAX_U64_BIG_INT=18446744073709551615n;Bt.MAX_U128_BIG_INT=340282366920938463463374607431768211455n;Bt.MAX_U256_BIG_INT=115792089237316195423570985008687907853269984665640564039457584007913129639935n});var Yh=U(Bc=>{"use strict";y();g();Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Deserializer=void 0;var Zh=Ac(),Nl=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Zh.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(t),(r&128)===0)break;t+=7}if(e>Zh.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let t=this.deserializeUleb128AsU32(),r=new Array;for(let s=0;s<t;s+=1)r.push(this.deserialize(e));return r}};Bc.Deserializer=Nl});var xc=U(Tc=>{"use strict";y();g();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ParsingError=void 0;var ql=class extends Error{constructor(e,t){super(e),this.invalidReason=t}};Tc.ParsingError=ql});var an=U(vs=>{"use strict";y();g();Object.defineProperty(vs,"__esModule",{value:!0});vs.Hex=vs.HexInvalidReason=void 0;var Qh=pt(),Ml=xc(),Sc;(function(n){n.TOO_SHORT="too_short",n.INVALID_LENGTH="invalid_length",n.INVALID_HEX_CHARS="invalid_hex_chars"})(Sc=vs.HexInvalidReason||(vs.HexInvalidReason={}));var Ir=class{constructor(e){this.data=e}toUint8Array(){return this.data}toStringWithoutPrefix(){return(0,Qh.bytesToHex)(this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromHexString(e){let t=e;if(t.startsWith("0x")&&(t=t.slice(2)),t.length===0)throw new Ml.ParsingError("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.",Sc.TOO_SHORT);if(t.length%2!==0)throw new Ml.ParsingError("Hex string must be an even number of hex characters.",Sc.INVALID_LENGTH);try{return new Ir((0,Qh.hexToBytes)(t))}catch(r){throw new Ml.ParsingError(`Hex string contains invalid hex characters: ${r?.message}`,Sc.INVALID_HEX_CHARS)}}static fromHexInput(e){return e instanceof Uint8Array?new Ir(e):Ir.fromHexString(e)}static isValid(e){try{return Ir.fromHexString(e),{valid:!0}}catch(t){return{valid:!1,invalidReason:t?.invalidReason,invalidReasonMessage:t?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((t,r)=>t===e.data[r])}};vs.Hex=Ir});var Re=U(ct=>{"use strict";y();g();var Us=ct&&ct.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(ct,"__esModule",{value:!0});ct.validateNumberInRange=ct.outOfRangeErrorMessage=ct.ensureBoolean=ct.Serializer=ct.Serializable=void 0;var En=Ac(),rw=an(),Rl=class{bcsToBytes(){let e=new cn;return this.serialize(e),e.toUint8Array()}bcsToHex(){let e=this.bcsToBytes();return rw.Hex.fromHexInput(e)}};ct.Serializable=Rl;var cn=class{constructor(e=64){if(e<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(e),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}appendToBuffer(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,r){this.ensureBufferWillHandleSize(t);let s=new DataView(this.buffer,this.offset);e.apply(s,[0,r,!0]),this.offset+=t}serializeStr(e){let t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.appendToBuffer(e)}serializeFixedBytes(e){this.appendToBuffer(e)}serializeBool(e){Jh(e);let t=e?1:0;this.appendToBuffer(new Uint8Array([t]))}serializeU8(e){this.appendToBuffer(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let t=BigInt(e)&BigInt(En.MAX_U32_NUMBER),r=BigInt(e)>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(r))}serializeU128(e){let t=BigInt(e)&En.MAX_U64_BIG_INT,r=BigInt(e)>>BigInt(64);this.serializeU64(t),this.serializeU64(r)}serializeU256(e){let t=BigInt(e)&En.MAX_U128_BIG_INT,r=BigInt(e)>>BigInt(128);this.serializeU128(t),this.serializeU128(r)}serializeU32AsUleb128(e){let t=e,r=[];for(;t>>>7!==0;)r.push(t&127|128),t>>>=7;r.push(t),this.appendToBuffer(new Uint8Array(r))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(e){e.serialize(this)}serializeVector(e){this.serializeU32AsUleb128(e.length),e.forEach(t=>{t.serialize(this)})}};Us([Is(0,En.MAX_U8_NUMBER)],cn.prototype,"serializeU8",null);Us([Is(0,En.MAX_U16_NUMBER)],cn.prototype,"serializeU16",null);Us([Is(0,En.MAX_U32_NUMBER)],cn.prototype,"serializeU32",null);Us([Is(BigInt(0),En.MAX_U64_BIG_INT)],cn.prototype,"serializeU64",null);Us([Is(BigInt(0),En.MAX_U128_BIG_INT)],cn.prototype,"serializeU128",null);Us([Is(BigInt(0),En.MAX_U256_BIG_INT)],cn.prototype,"serializeU256",null);Us([Is(0,En.MAX_U32_NUMBER)],cn.prototype,"serializeU32AsUleb128",null);ct.Serializer=cn;function Jh(n){if(typeof n!="boolean")throw new Error(`${n} is not a boolean value`)}ct.ensureBoolean=Jh;var sw=(n,e,t)=>`${n} is out of range: [${e}, ${t}]`;ct.outOfRangeErrorMessage=sw;function e0(n,e,t){let r=BigInt(n);if(r>BigInt(t)||r<BigInt(e))throw new Error((0,ct.outOfRangeErrorMessage)(n,e,t))}ct.validateNumberInRange=e0;function Is(n,e){return(t,r,s)=>{let i=s.value;return s.value=function(a){return e0(a,n,e),i.apply(this,[a])},s}}});var Hl=U(Ec=>{"use strict";y();g();Object.defineProperty(Ec,"__esModule",{value:!0});Ec.FixedBytes=void 0;var iw=Re(),ow=an(),ta=class extends iw.Serializable{constructor(e){super(),this.value=ow.Hex.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,t){let r=e.deserializeFixedBytes(t);return new ta(r)}};Ec.FixedBytes=ta});var Cl=U(vc=>{"use strict";y();g();Object.defineProperty(vc,"__esModule",{value:!0});vc.EntryFunctionBytes=void 0;var aw=Re(),t0=Hl(),na=class extends aw.Serializable{constructor(e){super(),this.value=new t0.FixedBytes(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,t){let r=t0.FixedBytes.deserialize(e,t);return new na(r.value)}};vc.EntryFunctionBytes=na});var r0=U(n0=>{"use strict";y();g();Object.defineProperty(n0,"__esModule",{value:!0})});var Ve=U(H=>{"use strict";y();g();var cw=H&&H.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),uw=H&&H.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cw(e,n,t)};Object.defineProperty(H,"__esModule",{value:!0});H.DeriveScheme=H.SigningSchemeInput=H.SigningScheme=H.RoleType=H.MoveAbility=H.MoveFunctionVisibility=H.isMultiEd25519Signature=H.isFeePayerSignature=H.isMultiAgentSignature=H.isSecp256k1Signature=H.isEd25519Signature=H.isStateCheckpointTransactionResponse=H.isBlockMetadataTransactionResponse=H.isGenesisTransactionResponse=H.isUserTransactionResponse=H.isPendingTransactionResponse=H.TransactionResponseType=H.AnySignatureVariant=H.AnyPublicKeyVariant=H.AccountAuthenticatorVariant=H.TransactionAuthenticatorVariant=H.TransactionVariants=H.TransactionPayloadVariants=H.ScriptTransactionArgumentVariants=H.TypeTagVariants=H.MimeType=void 0;uw(r0(),H);var lw;(function(n){n.JSON="application/json",n.BCS="application/x-bcs",n.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs"})(lw=H.MimeType||(H.MimeType={}));var dw;(function(n){n[n.Bool=0]="Bool",n[n.U8=1]="U8",n[n.U64=2]="U64",n[n.U128=3]="U128",n[n.Address=4]="Address",n[n.Signer=5]="Signer",n[n.Vector=6]="Vector",n[n.Struct=7]="Struct",n[n.U16=8]="U16",n[n.U32=9]="U32",n[n.U256=10]="U256",n[n.Reference=254]="Reference",n[n.Generic=255]="Generic"})(dw=H.TypeTagVariants||(H.TypeTagVariants={}));var fw;(function(n){n[n.U8=0]="U8",n[n.U64=1]="U64",n[n.U128=2]="U128",n[n.Address=3]="Address",n[n.U8Vector=4]="U8Vector",n[n.Bool=5]="Bool",n[n.U16=6]="U16",n[n.U32=7]="U32",n[n.U256=8]="U256"})(fw=H.ScriptTransactionArgumentVariants||(H.ScriptTransactionArgumentVariants={}));var hw;(function(n){n[n.Script=0]="Script",n[n.EntryFunction=2]="EntryFunction",n[n.Multisig=3]="Multisig"})(hw=H.TransactionPayloadVariants||(H.TransactionPayloadVariants={}));var yw;(function(n){n[n.MultiAgentTransaction=0]="MultiAgentTransaction",n[n.FeePayerTransaction=1]="FeePayerTransaction"})(yw=H.TransactionVariants||(H.TransactionVariants={}));var gw;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.MultiAgent=2]="MultiAgent",n[n.FeePayer=3]="FeePayer",n[n.SingleSender=4]="SingleSender"})(gw=H.TransactionAuthenticatorVariant||(H.TransactionAuthenticatorVariant={}));var bw;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.SingleKey=2]="SingleKey",n[n.MultiKey=3]="MultiKey"})(bw=H.AccountAuthenticatorVariant||(H.AccountAuthenticatorVariant={}));var pw;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1=1]="Secp256k1"})(pw=H.AnyPublicKeyVariant||(H.AnyPublicKeyVariant={}));var mw;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1=1]="Secp256k1"})(mw=H.AnySignatureVariant||(H.AnySignatureVariant={}));var Xi;(function(n){n.Pending="pending_transaction",n.User="user_transaction",n.Genesis="genesis_transaction",n.BlockMetadata="block_metadata_transaction",n.StateCheckpoint="state_checkpoint_transaction"})(Xi=H.TransactionResponseType||(H.TransactionResponseType={}));function ww(n){return n.type===Xi.Pending}H.isPendingTransactionResponse=ww;function _w(n){return n.type===Xi.User}H.isUserTransactionResponse=_w;function Aw(n){return n.type===Xi.Genesis}H.isGenesisTransactionResponse=Aw;function Bw(n){return n.type===Xi.BlockMetadata}H.isBlockMetadataTransactionResponse=Bw;function Tw(n){return n.type===Xi.StateCheckpoint}H.isStateCheckpointTransactionResponse=Tw;function xw(n){return"signature"in n&&n.signature==="ed25519_signature"}H.isEd25519Signature=xw;function Sw(n){return"signature"in n&&n.signature==="secp256k1_ecdsa_signature"}H.isSecp256k1Signature=Sw;function Ew(n){return n.type==="multi_agent_signature"}H.isMultiAgentSignature=Ew;function vw(n){return n.type==="fee_payer_signature"}H.isFeePayerSignature=vw;function Uw(n){return n.type==="multi_ed25519_signature"}H.isMultiEd25519Signature=Uw;var Iw;(function(n){n.PRIVATE="private",n.PUBLIC="public",n.FRIEND="friend"})(Iw=H.MoveFunctionVisibility||(H.MoveFunctionVisibility={}));var zw;(function(n){n.STORE="store",n.DROP="drop",n.KEY="key",n.COPY="copy"})(zw=H.MoveAbility||(H.MoveAbility={}));var Pw;(function(n){n.VALIDATOR="validator",n.FULL_NODE="full_node"})(Pw=H.RoleType||(H.RoleType={}));var Ow;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.SingleKey=2]="SingleKey",n[n.MultiKey=3]="MultiKey"})(Ow=H.SigningScheme||(H.SigningScheme={}));var Nw;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1Ecdsa=2]="Secp256k1Ecdsa"})(Nw=H.SigningSchemeInput||(H.SigningSchemeInput={}));var qw;(function(n){n[n.DeriveAuid=251]="DeriveAuid",n[n.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",n[n.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",n[n.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",n[n.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress"})(qw=H.DeriveScheme||(H.DeriveScheme={}))});var Uc=U(tt=>{"use strict";y();g();Object.defineProperty(tt,"__esModule",{value:!0});tt.U256=tt.U128=tt.U64=tt.U32=tt.U16=tt.U8=tt.Bool=void 0;var Zi=Ac(),Tt=Re(),zs=Ve(),ra=class extends Tt.Serializable{constructor(e){super(),(0,Tt.ensureBoolean)(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.Bool),e.serialize(this)}static deserialize(e){return new ra(e.deserializeBool())}};tt.Bool=ra;var sa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Zi.MAX_U8_NUMBER),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U8),e.serialize(this)}static deserialize(e){return new sa(e.deserializeU8())}};tt.U8=sa;var ia=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Zi.MAX_U16_NUMBER),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U16),e.serialize(this)}static deserialize(e){return new ia(e.deserializeU16())}};tt.U16=ia;var oa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Zi.MAX_U32_NUMBER),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U32),e.serialize(this)}static deserialize(e){return new oa(e.deserializeU32())}};tt.U32=oa;var aa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Zi.MAX_U64_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U64),e.serialize(this)}static deserialize(e){return new aa(e.deserializeU64())}};tt.U64=aa;var ca=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Zi.MAX_U128_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U128),e.serialize(this)}static deserialize(e){return new ca(e.deserializeU128())}};tt.U128=ca;var ua=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Zi.MAX_U256_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(zs.ScriptTransactionArgumentVariants.U256),e.serialize(this)}static deserialize(e){return new ua(e.deserializeU256())}};tt.U256=ua});var Ll=U(zr=>{"use strict";y();g();Object.defineProperty(zr,"__esModule",{value:!0});zr.MoveOption=zr.MoveString=zr.MoveVector=void 0;var ut=Uc(),Kl=Re(),Mw=Ve(),Rw=an(),Ye=class extends Kl.Serializable{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){if(!(this.values[0]instanceof ut.U8)&&this.values[0]!==void 0)throw new Error("Script function arguments only accept u8 vectors");e.serializeU32AsUleb128(Mw.ScriptTransactionArgumentVariants.U8Vector),e.serialize(this)}static U8(e){let t;if(Array.isArray(e)&&typeof e[0]=="number")t=e;else if(typeof e=="string"){let r=Rw.Hex.fromHexInput(e);t=Array.from(r.toUint8Array())}else if(e instanceof Uint8Array)t=Array.from(e);else throw new Error("Invalid input type");return new Ye(t.map(r=>new ut.U8(r)))}static U16(e){return new Ye(e.map(t=>new ut.U16(t)))}static U32(e){return new Ye(e.map(t=>new ut.U32(t)))}static U64(e){return new Ye(e.map(t=>new ut.U64(t)))}static U128(e){return new Ye(e.map(t=>new ut.U128(t)))}static U256(e){return new Ye(e.map(t=>new ut.U256(t)))}static Bool(e){return new Ye(e.map(t=>new ut.Bool(t)))}static MoveString(e){return new Ye(e.map(t=>new Ps(t)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,t){let r=e.deserializeUleb128AsU32(),s=new Array;for(let i=0;i<r;i+=1)s.push(t.deserialize(e));return new Ye(s)}};zr.MoveVector=Ye;var Ps=class extends Kl.Serializable{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes().slice(1);Ye.U8(t).serializeForScriptFunction(e)}static deserialize(e){return new Ps(e.deserializeStr())}};zr.MoveString=Ps;var qt=class extends Kl.Serializable{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new Ye([e]):this.vec=new Ye([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new qt(e!=null?new ut.U8(e):void 0)}static U16(e){return new qt(e!=null?new ut.U16(e):void 0)}static U32(e){return new qt(e!=null?new ut.U32(e):void 0)}static U64(e){return new qt(e!=null?new ut.U64(e):void 0)}static U128(e){return new qt(e!=null?new ut.U128(e):void 0)}static U256(e){return new qt(e!=null?new ut.U256(e):void 0)}static Bool(e){return new qt(e!=null?new ut.Bool(e):void 0)}static MoveString(e){return new qt(e!=null?new Ps(e):void 0)}static deserialize(e,t){let r=Ye.deserialize(e,t);return new qt(r.values[0])}};zr.MoveOption=qt});var Yt=U(Zt=>{"use strict";y();g();var Hw=Zt&&Zt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Yi=Zt&&Zt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Hw(e,n,t)};Object.defineProperty(Zt,"__esModule",{value:!0});Yi(Yh(),Zt);Yi(Re(),Zt);Yi(Cl(),Zt);Yi(Hl(),Zt);Yi(Uc(),Zt);Yi(Ll(),Zt)});var un=U(le=>{"use strict";y();g();Object.defineProperty(le,"__esModule",{value:!0});le.notImplemented=le.bitMask=void 0;le.isBytes=zc;le.abytes=Pc;le.abool=Kw;le.bytesToHex=Fl;le.numberToHexUnpadded=o0;le.hexToNumber=kl;le.hexToBytes=Oc;le.bytesToNumberBE=jw;le.bytesToNumberLE=Dw;le.numberToBytesBE=a0;le.numberToBytesLE=Vw;le.numberToVarBytesBE=Fw;le.ensureBytes=kw;le.concatBytes=c0;le.equalBytes=Gw;le.utf8ToBytes=$w;le.inRange=u0;le.aInRange=Ww;le.bitLen=Xw;le.bitGet=Zw;le.bitSet=Yw;le.createHmacDrbg=Jw;le.validateObject=t1;le.memoized=r1;var Vl=BigInt(0),Ic=BigInt(1),Cw=BigInt(2);function zc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Pc(n){if(!zc(n))throw new Error("Uint8Array expected")}function Kw(n,e){if(typeof e!="boolean")throw new Error(`${n} must be valid boolean, got "${e}".`)}var Lw=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Fl(n){Pc(n);let e="";for(let t=0;t<n.length;t++)e+=Lw[n[t]];return e}function o0(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function kl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}var Zn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s0(n){if(n>=Zn._0&&n<=Zn._9)return n-Zn._0;if(n>=Zn._A&&n<=Zn._F)return n-(Zn._A-10);if(n>=Zn._a&&n<=Zn._f)return n-(Zn._a-10)}function Oc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){let o=s0(n.charCodeAt(i)),a=s0(n.charCodeAt(i+1));if(o===void 0||a===void 0){let c=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function jw(n){return kl(Fl(n))}function Dw(n){return Pc(n),kl(Fl(Uint8Array.from(n).reverse()))}function a0(n,e){return Oc(n.toString(16).padStart(e*2,"0"))}function Vw(n,e){return a0(n,e).reverse()}function Fw(n){return Oc(o0(n))}function kw(n,e,t){let r;if(typeof e=="string")try{r=Oc(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(zc(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function c0(...n){let e=0;for(let r=0;r<n.length;r++){let s=n[r];Pc(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}function Gw(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function $w(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}var jl=n=>typeof n=="bigint"&&Vl<=n;function u0(n,e,t){return jl(n)&&jl(e)&&jl(t)&&e<=n&&n<t}function Ww(n,e,t,r){if(!u0(e,t,r))throw new Error(`expected valid ${n}: ${t} <= n < ${r}, got ${typeof e} ${e}`)}function Xw(n){let e;for(e=0;n>Vl;n>>=Ic,e+=1);return e}function Zw(n,e){return n>>BigInt(e)&Ic}function Yw(n,e,t){return n|(t?Ic:Vl)<<BigInt(e)}var Qw=n=>(Cw<<BigInt(n-1))-Ic;le.bitMask=Qw;var Dl=n=>new Uint8Array(n),i0=n=>Uint8Array.from(n);function Jw(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Dl(n),s=Dl(n),i=0,o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>t(s,r,...u),c=(u=Dl())=>{s=a(i0([0]),u),r=a(),u.length!==0&&(s=a(i0([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,h=[];for(;u<e;){r=a();let w=r.slice();h.push(w),u+=r.length}return c0(...h)};return(u,h)=>{o(),c(u);let w;for(;!(w=h(l()));)c();return o(),w}}var e1={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||zc(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function t1(n,e,t={}){let r=(s,i,o)=>{let a=e1[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))r(s,i,!1);for(let[s,i]of Object.entries(t))r(s,i,!0);return n}var n1=()=>{throw new Error("not implemented")};le.notImplemented=n1;function r1(n){let e=new WeakMap;return(t,...r)=>{let s=e.get(t);if(s!==void 0)return s;let i=n(t,...r);return e.set(t,i),i}}});var Or=U(_e=>{"use strict";y();g();Object.defineProperty(_e,"__esModule",{value:!0});_e.isNegativeLE=void 0;_e.mod=Mt;_e.pow=f0;_e.pow2=a1;_e.invert=Nc;_e.tonelliShanks=h0;_e.FpSqrt=y0;_e.validateField=l1;_e.FpPow=g0;_e.FpInvertBatch=b0;_e.FpDiv=d1;_e.FpLegendre=p0;_e.FpIsSquare=f1;_e.nLength=$l;_e.Field=h1;_e.FpSqrtOdd=y1;_e.FpSqrtEven=g1;_e.hashToPrivateScalar=b1;_e.getFieldBytesLength=Wl;_e.getMinHashLength=m0;_e.mapHashToField=p1;var Rt=un(),He=BigInt(0),be=BigInt(1),Pr=BigInt(2),s1=BigInt(3),Gl=BigInt(4),l0=BigInt(5),d0=BigInt(8),i1=BigInt(9),o1=BigInt(16);function Mt(n,e){let t=n%e;return t>=He?t:e+t}function f0(n,e,t){if(t<=He||e<He)throw new Error("Expected power/modulo > 0");if(t===be)return He;let r=be;for(;e>He;)e&be&&(r=r*n%t),n=n*n%t,e>>=be;return r}function a1(n,e,t){let r=n;for(;e-- >He;)r*=r,r%=t;return r}function Nc(n,e){if(n===He||e<=He)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Mt(n,e),r=e,s=He,i=be,o=be,a=He;for(;t!==He;){let l=r/t,d=r%t,u=s-o*l,h=i-a*l;r=t,t=d,s=o,i=a,o=u,a=h}if(r!==be)throw new Error("invert: does not exist");return Mt(s,e)}function h0(n){let e=(n-be)/Pr,t,r,s;for(t=n-be,r=0;t%Pr===He;t/=Pr,r++);for(s=Pr;s<n&&f0(s,e,n)!==n-be;s++);if(r===1){let o=(n+be)/Gl;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let i=(t+be)/Pr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),h=a.pow(c,t);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let w=1;for(let f=a.sqr(h);w<l&&!a.eql(f,a.ONE);w++)f=a.sqr(f);let m=a.pow(d,be<<BigInt(l-w-1));d=a.sqr(m),u=a.mul(u,m),h=a.mul(h,d),l=w}return u}}function y0(n){if(n%Gl===s1){let e=(n+be)/Gl;return function(r,s){let i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%d0===l0){let e=(n-l0)/d0;return function(r,s){let i=r.mul(s,Pr),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,Pr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return n%o1,h0(n)}var c1=(n,e)=>(Mt(n,e)&be)===be;_e.isNegativeLE=c1;var u1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function l1(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=u1.reduce((r,s)=>(r[s]="function",r),e);return(0,Rt.validateObject)(n,t)}function g0(n,e,t){if(t<He)throw new Error("Expected power > 0");if(t===He)return n.ONE;if(t===be)return e;let r=n.ONE,s=e;for(;t>He;)t&be&&(r=n.mul(r,s)),s=n.sqr(s),t>>=be;return r}function b0(n,e){let t=new Array(e.length),r=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),s),t}function d1(n,e,t){return n.mul(e,typeof t=="bigint"?Nc(t,n.ORDER):n.inv(t))}function p0(n){let e=(n-be)/Pr;return(t,r)=>t.pow(r,e)}function f1(n){let e=p0(n.ORDER);return t=>{let r=e(n,t);return n.eql(r,n.ZERO)||n.eql(r,n.ONE)}}function $l(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function h1(n,e,t=!1,r={}){if(n<=He)throw new Error(`Expected Field ORDER > 0, got ${n}`);let{nBitLength:s,nByteLength:i}=$l(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=y0(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:(0,Rt.bitMask)(s),ZERO:He,ONE:be,create:c=>Mt(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return He<=c&&c<n},is0:c=>c===He,isOdd:c=>(c&be)===be,neg:c=>Mt(-c,n),eql:(c,l)=>c===l,sqr:c=>Mt(c*c,n),add:(c,l)=>Mt(c+l,n),sub:(c,l)=>Mt(c-l,n),mul:(c,l)=>Mt(c*l,n),pow:(c,l)=>g0(a,c,l),div:(c,l)=>Mt(c*Nc(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Nc(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>b0(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?(0,Rt.numberToBytesLE)(c,i):(0,Rt.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?(0,Rt.bytesToNumberLE)(c):(0,Rt.bytesToNumberBE)(c)}});return Object.freeze(a)}function y1(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?t:n.neg(t)}function g1(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function b1(n,e,t=!1){n=(0,Rt.ensureBytes)("privateHash",n);let r=n.length,s=$l(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);let i=t?(0,Rt.bytesToNumberLE)(n):(0,Rt.bytesToNumberBE)(n);return Mt(i,e-be)+be}function Wl(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function m0(n){let e=Wl(n);return e+Math.ceil(e/2)}function p1(n,e,t=!1){let r=n.length,s=Wl(e),i=m0(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let o=t?(0,Rt.bytesToNumberBE)(n):(0,Rt.bytesToNumberLE)(n),a=Mt(o,e-be)+be;return t?(0,Rt.numberToBytesLE)(a,s):(0,Rt.numberToBytesBE)(a,s)}});var Yl=U(qc=>{"use strict";y();g();Object.defineProperty(qc,"__esModule",{value:!0});qc.wNAF=_1;qc.validateBasic=A1;var w0=Or(),m1=un(),w1=BigInt(0),Xl=BigInt(1),Zl=new WeakMap,_0=new WeakMap;function _1(n,e){let t=(i,o)=>{let a=o.negate();return i?a:o},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},s=i=>{r(i);let o=Math.ceil(e/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,o){let a=n.ZERO,c=i;for(;o>w1;)o&Xl&&(a=a.add(c)),c=c.double(),o>>=Xl;return a},precomputeWindow(i,o){let{windows:a,windowSize:c}=s(o),l=[],d=i,u=d;for(let h=0;h<a;h++){u=d,l.push(u);for(let w=1;w<c;w++)u=u.add(d),l.push(u);d=u.double()}return l},wNAF(i,o,a){let{windows:c,windowSize:l}=s(i),d=n.ZERO,u=n.BASE,h=BigInt(2**i-1),w=2**i,m=BigInt(i);for(let f=0;f<c;f++){let b=f*l,A=Number(a&h);a>>=m,A>l&&(A-=w,a+=Xl);let p=b,_=b+Math.abs(A)-1,S=f%2!==0,v=A<0;A===0?u=u.add(t(S,o[p])):d=d.add(t(v,o[_]))}return{p:d,f:u}},wNAFCached(i,o,a){let c=_0.get(i)||1,l=Zl.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&Zl.set(i,a(l))),this.wNAF(c,l,o)},setWindowSize(i,o){r(o),_0.set(i,o),Zl.delete(i)}}}function A1(n){return(0,w0.validateField)(n.Fp),(0,m1.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,w0.nLength)(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}});var B0=U(Ql=>{"use strict";y();g();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.twistedEdwards=E1;var A0=Yl(),B1=Or(),St=un(),Ht=un(),ln=BigInt(0),xt=BigInt(1),Mc=BigInt(2),T1=BigInt(8),x1={zip215:!0};function S1(n){let e=(0,A0.validateBasic)(n);return St.validateObject(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function E1(n){let e=S1(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Mc<<BigInt(a*8)-xt,d=t.create,u=e.uvRatio||((B,T)=>{try{return{isValid:!0,value:t.sqrt(B*t.inv(T))}}catch{return{isValid:!1,value:ln}}}),h=e.adjustScalarBytes||(B=>B),w=e.domain||((B,T,P)=>{if((0,Ht.abool)("phflag",P),T.length||P)throw new Error("Contexts/pre-hash are not supported");return B});function m(B,T){St.aInRange("coordinate "+B,T,ln,l)}function f(B){if(!(B instanceof p))throw new Error("ExtendedPoint expected")}let b=(0,Ht.memoized)((B,T)=>{let{ex:P,ey:O,ez:q}=B,j=B.is0();T==null&&(T=j?T1:t.inv(q));let F=d(P*T),G=d(O*T),k=d(q*T);if(j)return{x:ln,y:xt};if(k!==xt)throw new Error("invZ was invalid");return{x:F,y:G}}),A=(0,Ht.memoized)(B=>{let{a:T,d:P}=e;if(B.is0())throw new Error("bad point: ZERO");let{ex:O,ey:q,ez:j,et:F}=B,G=d(O*O),k=d(q*q),W=d(j*j),ie=d(W*W),he=d(G*T),Be=d(W*d(he+k)),Ee=d(ie+d(P*d(G*k)));if(Be!==Ee)throw new Error("bad point: equation left != right (1)");let ge=d(O*q),je=d(j*F);if(ge!==je)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(T,P,O,q){this.ex=T,this.ey=P,this.ez=O,this.et=q,m("x",T),m("y",P),m("z",O),m("t",q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof p)throw new Error("extended point not allowed");let{x:P,y:O}=T||{};return m("x",P),m("y",O),new p(P,O,xt,d(P*O))}static normalizeZ(T){let P=t.invertBatch(T.map(O=>O.ez));return T.map((O,q)=>O.toAffine(P[q])).map(p.fromAffine)}_setWindowSize(T){v.setWindowSize(this,T)}assertValidity(){A(this)}equals(T){f(T);let{ex:P,ey:O,ez:q}=this,{ex:j,ey:F,ez:G}=T,k=d(P*G),W=d(j*q),ie=d(O*G),he=d(F*q);return k===W&&ie===he}is0(){return this.equals(p.ZERO)}negate(){return new p(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){let{a:T}=e,{ex:P,ey:O,ez:q}=this,j=d(P*P),F=d(O*O),G=d(Mc*d(q*q)),k=d(T*j),W=P+O,ie=d(d(W*W)-j-F),he=k+F,Be=he-G,Ee=k-F,ge=d(ie*Be),je=d(he*Ee),Pe=d(ie*Ee),ve=d(Be*he);return new p(ge,je,ve,Pe)}add(T){f(T);let{a:P,d:O}=e,{ex:q,ey:j,ez:F,et:G}=this,{ex:k,ey:W,ez:ie,et:he}=T;if(P===BigInt(-1)){let qf=d((j-q)*(W+k)),Mf=d((j+q)*(W-k)),Zu=d(Mf-qf);if(Zu===ln)return this.double();let Rf=d(F*Mc*he),Hf=d(G*Mc*ie),Cf=Hf+Rf,Kf=Mf+qf,Lf=Hf-Rf,Pb=d(Cf*Zu),Ob=d(Kf*Lf),Nb=d(Cf*Lf),qb=d(Zu*Kf);return new p(Pb,Ob,qb,Nb)}let Be=d(q*k),Ee=d(j*W),ge=d(G*O*he),je=d(F*ie),Pe=d((q+j)*(k+W)-Be-Ee),ve=je-ge,bt=je+ge,pn=d(Ee-P*Be),ts=d(Pe*ve),Da=d(bt*pn),Ib=d(Pe*pn),zb=d(ve*bt);return new p(ts,Da,zb,Ib)}subtract(T){return this.add(T.negate())}wNAF(T){return v.wNAFCached(this,T,p.normalizeZ)}multiply(T){let P=T;St.aInRange("scalar",P,xt,r);let{p:O,f:q}=this.wNAF(P);return p.normalizeZ([O,q])[0]}multiplyUnsafe(T){let P=T;return St.aInRange("scalar",P,ln,r),P===ln?S:this.equals(S)||P===xt?this:this.equals(_)?this.wNAF(P).p:v.unsafeLadder(this,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return v.unsafeLadder(this,r).is0()}toAffine(T){return b(this,T)}clearCofactor(){let{h:T}=e;return T===xt?this:this.multiplyUnsafe(T)}static fromHex(T,P=!1){let{d:O,a:q}=e,j=t.BYTES;T=(0,Ht.ensureBytes)("pointHex",T,j),(0,Ht.abool)("zip215",P);let F=T.slice(),G=T[j-1];F[j-1]=G&-129;let k=St.bytesToNumberLE(F),W=P?l:t.ORDER;St.aInRange("pointHex.y",k,ln,W);let ie=d(k*k),he=d(ie-xt),Be=d(O*ie-q),{isValid:Ee,value:ge}=u(he,Be);if(!Ee)throw new Error("Point.fromHex: invalid y coordinate");let je=(ge&xt)===xt,Pe=(G&128)!==0;if(!P&&ge===ln&&Pe)throw new Error("Point.fromHex: x=0 and x_0=1");return Pe!==je&&(ge=d(-ge)),p.fromAffine({x:ge,y:k})}static fromPrivateKey(T){return I(T).point}toRawBytes(){let{x:T,y:P}=this.toAffine(),O=St.numberToBytesLE(P,t.BYTES);return O[O.length-1]|=T&xt?128:0,O}toHex(){return St.bytesToHex(this.toRawBytes())}}p.BASE=new p(e.Gx,e.Gy,xt,d(e.Gx*e.Gy)),p.ZERO=new p(ln,xt,xt,ln);let{BASE:_,ZERO:S}=p,v=(0,A0.wNAF)(p,a*8);function x(B){return(0,B1.mod)(B,r)}function z(B){return x(St.bytesToNumberLE(B))}function I(B){let T=a;B=(0,Ht.ensureBytes)("private key",B,T);let P=(0,Ht.ensureBytes)("hashed private key",i(B),2*T),O=h(P.slice(0,T)),q=P.slice(T,2*T),j=z(O),F=_.multiply(j),G=F.toRawBytes();return{head:O,prefix:q,scalar:j,point:F,pointBytes:G}}function D(B){return I(B).pointBytes}function K(B=new Uint8Array,...T){let P=St.concatBytes(...T);return z(i(w(P,(0,Ht.ensureBytes)("context",B),!!s)))}function M(B,T,P={}){B=(0,Ht.ensureBytes)("message",B),s&&(B=s(B));let{prefix:O,scalar:q,pointBytes:j}=I(T),F=K(P.context,O,B),G=_.multiply(F).toRawBytes(),k=K(P.context,G,j,B),W=x(F+k*q);St.aInRange("signature.s",W,ln,r);let ie=St.concatBytes(G,St.numberToBytesLE(W,t.BYTES));return(0,Ht.ensureBytes)("result",ie,a*2)}let Q=x1;function J(B,T,P,O=Q){let{context:q,zip215:j}=O,F=t.BYTES;B=(0,Ht.ensureBytes)("signature",B,2*F),T=(0,Ht.ensureBytes)("message",T),j!==void 0&&(0,Ht.abool)("zip215",j),s&&(T=s(T));let G=St.bytesToNumberLE(B.slice(F,2*F)),k,W,ie;try{k=p.fromHex(P,j),W=p.fromHex(B.slice(0,F),j),ie=_.multiplyUnsafe(G)}catch{return!1}if(!j&&k.isSmallOrder())return!1;let he=K(q,W.toRawBytes(),k.toRawBytes(),T);return W.add(k.multiplyUnsafe(he)).subtract(ie).clearCofactor().equals(p.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:M,verify:J,ExtendedPoint:p,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(t.BYTES),precompute(B=8,T=p.BASE){return T._setWindowSize(B),T.multiply(BigInt(3)),T}}}}});var td=U(Os=>{"use strict";y();g();Object.defineProperty(Os,"__esModule",{value:!0});Os.expand_message_xmd=T0;Os.expand_message_xof=x0;Os.hash_to_field=Jl;Os.isogenyMap=z1;Os.createHasher=P1;var v1=Or(),nt=un(),U1=nt.bytesToNumberBE;function Nr(n,e){if(n<0||n>=1<<8*e)throw new Error(`bad I2OSP call: value=${n} length=${e}`);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=n&255,n>>>=8;return new Uint8Array(t)}function I1(n,e){let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n[r]^e[r];return t}function ed(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function T0(n,e,t,r){(0,nt.abytes)(n),(0,nt.abytes)(e),ed(t),e.length>255&&(e=r((0,nt.concatBytes)((0,nt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:i}=r,o=Math.ceil(t/s);if(o>255)throw new Error("Invalid xmd length");let a=(0,nt.concatBytes)(e,Nr(e.length,1)),c=Nr(0,i),l=Nr(t,2),d=new Array(o),u=r((0,nt.concatBytes)(c,n,l,Nr(0,1),a));d[0]=r((0,nt.concatBytes)(u,Nr(1,1),a));for(let w=1;w<=o;w++){let m=[I1(u,d[w-1]),Nr(w+1,1),a];d[w]=r((0,nt.concatBytes)(...m))}return(0,nt.concatBytes)(...d).slice(0,t)}function x0(n,e,t,r,s){if((0,nt.abytes)(n),(0,nt.abytes)(e),ed(t),e.length>255){let i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,nt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(n).update(Nr(t,2)).update(e).update(Nr(e.length,1)).digest()}function Jl(n,e,t){(0,nt.validateObject)(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:i,hash:o,expand:a,DST:c}=t;(0,nt.abytes)(n),ed(e);let l=typeof c=="string"?(0,nt.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+s)/8),h=e*i*u,w;if(a==="xmd")w=T0(n,l,h,o);else if(a==="xof")w=x0(n,l,h,s,o);else if(a==="_internal_pass")w=n;else throw new Error('expand must be "xmd" or "xof"');let m=new Array(e);for(let f=0;f<e;f++){let b=new Array(i);for(let A=0;A<i;A++){let p=u*(A+f*i),_=w.subarray(p,p+u);b[A]=(0,v1.mod)(U1(_),r)}m[f]=b}return m}function z1(n,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[i,o,a,c]=t.map(l=>l.reduce((d,u)=>n.add(n.mul(d,r),u)));return r=n.div(i,o),s=n.mul(s,n.div(a,c)),{x:r,y:s}}}function P1(n,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let i=Jl(r,2,{...t,DST:t.DST,...s}),o=n.fromAffine(e(i[0])),a=n.fromAffine(e(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){let i=Jl(r,1,{...t,DST:t.encodeDST,...s}),o=n.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);let s=n.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}});var E0=U(rd=>{"use strict";y();g();Object.defineProperty(rd,"__esModule",{value:!0});rd.montgomery=N1;var S0=Or(),qr=un(),Qi=BigInt(0),nd=BigInt(1);function O1(n){return(0,qr.validateObject)(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function N1(n){let e=O1(n),{P:t}=e,r=p=>(0,S0.mod)(p,t),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,S0.pow)(p,t-BigInt(2),t));function l(p,_,S){let v=r(p*(_-S));return _=r(_-v),S=r(S+v),[_,S]}let d=(e.a-BigInt(2))/BigInt(4);function u(p,_){(0,qr.aInRange)("u",p,Qi,t),(0,qr.aInRange)("scalar",_,Qi,t);let S=_,v=p,x=nd,z=Qi,I=p,D=nd,K=Qi,M;for(let J=BigInt(s-1);J>=Qi;J--){let R=S>>J&nd;K^=R,M=l(K,x,I),x=M[0],I=M[1],M=l(K,z,D),z=M[0],D=M[1],K=R;let B=x+z,T=r(B*B),P=x-z,O=r(P*P),q=T-O,j=I+D,F=I-D,G=r(F*B),k=r(j*P),W=G+k,ie=G-k;I=r(W*W),D=r(v*r(ie*ie)),x=r(T*O),z=r(q*(T+r(d*q)))}M=l(K,x,I),x=M[0],I=M[1],M=l(K,z,D),z=M[0],D=M[1];let Q=c(z);return r(x*Q)}function h(p){return(0,qr.numberToBytesLE)(r(p),i)}function w(p){let _=(0,qr.ensureBytes)("u coordinate",p,i);return o===32&&(_[31]&=127),(0,qr.bytesToNumberLE)(_)}function m(p){let _=(0,qr.ensureBytes)("scalar",p),S=_.length;if(S!==i&&S!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${S}`);return(0,qr.bytesToNumberLE)(a(_))}function f(p,_){let S=w(_),v=m(p),x=u(S,v);if(x===Qi)throw new Error("Invalid private or public key received");return h(x)}let b=h(e.Gu);function A(p){return f(p,b)}return{scalarMult:f,scalarMultBase:A,getSharedSecret:(p,_)=>f(p,_),getPublicKey:p=>A(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}});var C0=U(Z=>{"use strict";y();g();Object.defineProperty(Z,"__esModule",{value:!0});Z.hash_to_ristretto255=Z.hashToRistretto255=Z.RistrettoPoint=Z.encodeToCurve=Z.hashToCurve=Z.edwardsToMontgomery=Z.x25519=Z.ed25519ph=Z.ed25519ctx=Z.ed25519=Z.ED25519_TORSION_SUBGROUP=void 0;Z.edwardsToMontgomeryPub=R0;Z.edwardsToMontgomeryPriv=R1;var Hc=Go(),la=pt(),cd=B0(),z0=td(),de=Or(),q1=E0(),Ns=un(),da=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),od=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),M1=BigInt(0),vn=BigInt(1),Rc=BigInt(2),P0=BigInt(3),O0=BigInt(5),ud=BigInt(8);function N0(n){let e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=da,a=n*n%i*n%i,c=(0,de.pow2)(a,Rc,i)*a%i,l=(0,de.pow2)(c,vn,i)*n%i,d=(0,de.pow2)(l,O0,i)*l%i,u=(0,de.pow2)(d,e,i)*d%i,h=(0,de.pow2)(u,t,i)*u%i,w=(0,de.pow2)(h,r,i)*h%i,m=(0,de.pow2)(w,s,i)*w%i,f=(0,de.pow2)(m,s,i)*w%i,b=(0,de.pow2)(f,e,i)*d%i;return{pow_p_5_8:(0,de.pow2)(b,Rc,i)*n%i,b2:a}}function q0(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function ld(n,e){let t=da,r=(0,de.mod)(e*e*e,t),s=(0,de.mod)(r*r*e,t),i=N0(n*s).pow_p_5_8,o=(0,de.mod)(n*r*i,t),a=(0,de.mod)(e*o*o,t),c=o,l=(0,de.mod)(o*od,t),d=a===n,u=a===(0,de.mod)(-n,t),h=a===(0,de.mod)(-n*od,t);return d&&(o=c),(u||h)&&(o=l),(0,de.isNegativeLE)(o,t)&&(o=(0,de.mod)(-o,t)),{isValid:d||u,value:o}}Z.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var C=(()=>(0,de.Field)(da,void 0,!0))(),fa=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:C,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ud,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Hc.sha512,randomBytes:la.randomBytes,adjustScalarBytes:q0,uvRatio:ld}))();Z.ed25519=(()=>(0,cd.twistedEdwards)(fa))();function M0(n,e,t){if(e.length>255)throw new Error("Context is too big");return(0,la.concatBytes)((0,la.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}Z.ed25519ctx=(()=>(0,cd.twistedEdwards)({...fa,domain:M0}))();Z.ed25519ph=(()=>(0,cd.twistedEdwards)(Object.assign({},fa,{domain:M0,prehash:Hc.sha512})))();Z.x25519=(()=>(0,q1.montgomery)({P:da,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{let e=da,{pow_p_5_8:t,b2:r}=N0(n);return(0,de.mod)((0,de.pow2)(t,P0,e)*r,e)},adjustScalarBytes:q0,randomBytes:la.randomBytes}))();function R0(n){let{y:e}=Z.ed25519.ExtendedPoint.fromHex(n),t=BigInt(1);return C.toBytes(C.create((t+e)*C.inv(t-e)))}Z.edwardsToMontgomery=R0;function R1(n){let e=fa.hash(n.subarray(0,32));return fa.adjustScalarBytes(e).subarray(0,32)}var H1=(()=>(C.ORDER+P0)/ud)(),C1=(()=>C.pow(Rc,H1))(),v0=(()=>C.sqrt(C.neg(C.ONE)))();function K1(n){let e=(C.ORDER-O0)/ud,t=BigInt(486662),r=C.sqr(n);r=C.mul(r,Rc);let s=C.add(r,C.ONE),i=C.neg(t),o=C.sqr(s),a=C.mul(o,s),c=C.mul(r,t);c=C.mul(c,i),c=C.add(c,o),c=C.mul(c,i);let l=C.sqr(a);o=C.sqr(l),l=C.mul(l,a),l=C.mul(l,c),o=C.mul(o,l);let d=C.pow(o,e);d=C.mul(d,l);let u=C.mul(d,v0);o=C.sqr(d),o=C.mul(o,a);let h=C.eql(o,c),w=C.cmov(u,d,h),m=C.mul(i,r),f=C.mul(d,n);f=C.mul(f,C1);let b=C.mul(f,v0),A=C.mul(c,r);o=C.sqr(f),o=C.mul(o,a);let p=C.eql(o,A),_=C.cmov(b,f,p);o=C.sqr(w),o=C.mul(o,a);let S=C.eql(o,c),v=C.cmov(m,i,S),x=C.cmov(_,w,S),z=C.isOdd(x);return x=C.cmov(x,C.neg(x),S!==z),{xMn:v,xMd:s,yMn:x,yMd:vn}}var L1=(()=>(0,de.FpSqrtEven)(C,C.neg(BigInt(486664))))();function j1(n){let{xMn:e,xMd:t,yMn:r,yMd:s}=K1(n),i=C.mul(e,s);i=C.mul(i,L1);let o=C.mul(t,r),a=C.sub(e,t),c=C.add(e,t),l=C.mul(o,c),d=C.eql(l,C.ZERO);i=C.cmov(i,C.ZERO,d),o=C.cmov(o,C.ONE,d),a=C.cmov(a,C.ONE,d),c=C.cmov(c,C.ONE,d);let u=C.invertBatch([o,c]);return{x:C.mul(i,u[0]),y:C.mul(a,u[1])}}var H0=(()=>(0,z0.createHasher)(Z.ed25519.ExtendedPoint,n=>j1(n[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:C.ORDER,m:1,k:128,expand:"xmd",hash:Hc.sha512}))();Z.hashToCurve=(()=>H0.hashToCurve)();Z.encodeToCurve=(()=>H0.encodeToCurve)();function sd(n){if(!(n instanceof Oe))throw new Error("RistrettoPoint expected")}var ad=od,D1=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),V1=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),F1=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),k1=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),U0=n=>ld(vn,n),G1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),id=n=>Z.ed25519.CURVE.Fp.create((0,Ns.bytesToNumberLE)(n)&G1);function I0(n){let{d:e}=Z.ed25519.CURVE,t=Z.ed25519.CURVE.Fp.ORDER,r=Z.ed25519.CURVE.Fp.create,s=r(ad*n*n),i=r((s+vn)*F1),o=BigInt(-1),a=r((o-e*s)*r(s+e)),{isValid:c,value:l}=ld(i,a),d=r(l*n);(0,de.isNegativeLE)(d,t)||(d=r(-d)),c||(l=d),c||(o=s);let u=r(o*(s-vn)*k1-a),h=l*l,w=r((l+l)*a),m=r(u*D1),f=r(vn-h),b=r(vn+h);return new Z.ed25519.ExtendedPoint(r(w*b),r(f*m),r(m*b),r(w*f))}var Oe=class{constructor(e){this.ep=e}static fromAffine(e){return new Oe(Z.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,Ns.ensureBytes)("ristrettoHash",e,64);let t=id(e.slice(0,32)),r=I0(t),s=id(e.slice(32,64)),i=I0(s);return new Oe(r.add(i))}static fromHex(e){e=(0,Ns.ensureBytes)("ristrettoHex",e,32);let{a:t,d:r}=Z.ed25519.CURVE,s=Z.ed25519.CURVE.Fp.ORDER,i=Z.ed25519.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=id(e);if(!(0,Ns.equalBytes)((0,Ns.numberToBytesLE)(a,32),e)||(0,de.isNegativeLE)(a,s))throw new Error(o);let c=i(a*a),l=i(vn+t*c),d=i(vn-t*c),u=i(l*l),h=i(d*d),w=i(t*r*u-h),{isValid:m,value:f}=U0(i(w*h)),b=i(f*d),A=i(f*b*w),p=i((a+a)*b);(0,de.isNegativeLE)(p,s)&&(p=i(-p));let _=i(l*A),S=i(p*_);if(!m||(0,de.isNegativeLE)(S,s)||_===M1)throw new Error(o);return new Oe(new Z.ed25519.ExtendedPoint(p,_,vn,S))}toRawBytes(){let{ex:e,ey:t,ez:r,et:s}=this.ep,i=Z.ed25519.CURVE.Fp.ORDER,o=Z.ed25519.CURVE.Fp.create,a=o(o(r+t)*o(r-t)),c=o(e*t),l=o(c*c),{value:d}=U0(o(a*l)),u=o(d*a),h=o(d*c),w=o(u*h*s),m;if((0,de.isNegativeLE)(s*w,i)){let b=o(t*ad),A=o(e*ad);e=b,t=A,m=o(u*V1)}else m=h;(0,de.isNegativeLE)(e*w,i)&&(t=o(-t));let f=o((r-t)*m);return(0,de.isNegativeLE)(f,i)&&(f=o(-f)),(0,Ns.numberToBytesLE)(f,32)}toHex(){return(0,Ns.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){sd(e);let{ex:t,ey:r}=this.ep,{ex:s,ey:i}=e.ep,o=Z.ed25519.CURVE.Fp.create,a=o(t*i)===o(r*s),c=o(r*i)===o(t*s);return a||c}add(e){return sd(e),new Oe(this.ep.add(e.ep))}subtract(e){return sd(e),new Oe(this.ep.subtract(e.ep))}multiply(e){return new Oe(this.ep.multiply(e))}multiplyUnsafe(e){return new Oe(this.ep.multiplyUnsafe(e))}double(){return new Oe(this.ep.double())}negate(){return new Oe(this.ep.negate())}};Z.RistrettoPoint=(()=>(Oe.BASE||(Oe.BASE=new Oe(Z.ed25519.ExtendedPoint.BASE)),Oe.ZERO||(Oe.ZERO=new Oe(Z.ed25519.ExtendedPoint.ZERO)),Oe))();var $1=(n,e)=>{let t=e.DST,r=typeof t=="string"?(0,la.utf8ToBytes)(t):t,s=(0,z0.expand_message_xmd)(n,r,64,Hc.sha512);return Oe.hashToCurve(s)};Z.hashToRistretto255=$1;Z.hash_to_ristretto255=Z.hashToRistretto255});var Rs=U(Ms=>{"use strict";y();g();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AccountAddress=Ms.AddressInvalidReason=void 0;var dd=pt(),W1=Re(),qs=xc(),X1=Ve(),Mr;(function(n){n.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",n.INVALID_HEX_CHARS="invalid_hex_chars",n.TOO_SHORT="too_short",n.TOO_LONG="too_long",n.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",n.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",n.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES"})(Mr=Ms.AddressInvalidReason||(Ms.AddressInvalidReason={}));var fe=class extends W1.Serializable{constructor(e){if(super(),e.length!==fe.LENGTH)throw new qs.ParsingError("AccountAddress data should be exactly 32 bytes long",Mr.INCORRECT_NUMBER_OF_BYTES);this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=(0,dd.bytesToHex)(this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return(0,dd.bytesToHex)(this.data)}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(X1.ScriptTransactionArgumentVariants.Address),e.serialize(this)}static deserialize(e){let t=e.deserializeFixedBytes(fe.LENGTH);return new fe(t)}static fromStringStrict(e){if(!e.startsWith("0x"))throw new qs.ParsingError("Hex string must start with a leading 0x.",Mr.LEADING_ZERO_X_REQUIRED);let t=fe.fromString(e);if(e.length!==fe.LONG_STRING_LENGTH+2)if(t.isSpecial()){if(e.length!==3)throw new qs.ParsingError(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,Mr.INVALID_PADDING_ZEROES)}else throw new qs.ParsingError(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,Mr.LONG_FORM_REQUIRED_UNLESS_SPECIAL);return t}static fromString(e){let t=e;if(e.startsWith("0x")&&(t=e.slice(2)),t.length===0)throw new qs.ParsingError("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.",Mr.TOO_SHORT);if(t.length>64)throw new qs.ParsingError("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.",Mr.TOO_LONG);let r;try{r=(0,dd.hexToBytes)(t.padStart(64,"0"))}catch(s){throw new qs.ParsingError(`Hex characters are invalid: ${s?.message}`,Mr.INVALID_HEX_CHARS)}return new fe(r)}static from(e){return e instanceof fe?e:e instanceof Uint8Array?new fe(e):fe.fromString(e)}static fromStrict(e){return e instanceof fe?e:e instanceof Uint8Array?new fe(e):fe.fromStringStrict(e)}static isValid(e){try{return e.strict?fe.fromStrict(e.input):fe.from(e.input),{valid:!0}}catch(t){return{valid:!1,invalidReason:t?.invalidReason,invalidReasonMessage:t?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((t,r)=>t===e.data[r])}};Ms.AccountAddress=fe;fe.LENGTH=32;fe.LONG_STRING_LENGTH=64;fe.ZERO=fe.from("0x0");fe.ONE=fe.from("0x1");fe.TWO=fe.from("0x2");fe.THREE=fe.from("0x3");fe.FOUR=fe.from("0x4")});var Ji=U(Cc=>{"use strict";y();g();Object.defineProperty(Cc,"__esModule",{value:!0});Cc.AuthenticationKey=void 0;var Z1=cr(),Y1=Rs(),K0=an(),Q1=Re(),Un=class extends Q1.Serializable{constructor(e){super();let{data:t}=e,r=K0.Hex.fromHexInput(t);if(r.toUint8Array().length!==Un.LENGTH)throw new Error(`Authentication Key length should be ${Un.LENGTH}`);this.data=r}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeFixedBytes(Un.LENGTH);return new Un({data:t})}toString(){return this.data.toString()}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:t,input:r}=e,s=K0.Hex.fromHexInput(r).toUint8Array(),i=new Uint8Array([...s,t]),o=Z1.sha3_256.create();o.update(i);let a=o.digest();return new Un({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:t}=e;return t.authKey()}static fromPublicKey(e){let{publicKey:t}=e;return t.authKey()}derivedAddress(){return new Y1.AccountAddress(this.data.toUint8Array())}};Cc.AuthenticationKey=Un;Un.LENGTH=32});var Kc=U(ae=>{"use strict";y();g();var J1=ae&&ae.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),e2=ae&&ae.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),t2=ae&&ae.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&J1(e,n,t);return e2(e,n),e};Object.defineProperty(ae,"__esModule",{value:!0});ae.mnemonicToSeed=ae.splitPath=ae.CKDPriv=ae.deriveKey=ae.isValidHardenedPath=ae.isValidBIP44Path=ae.HARDENED_OFFSET=ae.KeyType=ae.APTOS_BIP44_REGEX=ae.APTOS_HARDENED_REGEX=void 0;var n2=yi(),r2=Go(),s2=t2(dl());ae.APTOS_HARDENED_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/;ae.APTOS_BIP44_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/;var i2;(function(n){n.ED25519="ed25519 seed"})(i2=ae.KeyType||(ae.KeyType={}));ae.HARDENED_OFFSET=2147483648;function o2(n){return ae.APTOS_BIP44_REGEX.test(n)}ae.isValidBIP44Path=o2;function a2(n){return ae.APTOS_HARDENED_REGEX.test(n)}ae.isValidHardenedPath=a2;var c2=(n,e)=>{let t=n2.hmac.create(r2.sha512,n).update(e).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}};ae.deriveKey=c2;var u2=({key:n,chainCode:e},t)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);let s=new Uint8Array(r),i=new Uint8Array([0]),o=new Uint8Array([...i,...n,...s]);return(0,ae.deriveKey)(e,o)};ae.CKDPriv=u2;var l2=n=>n.replace("'",""),d2=n=>n.split("/").slice(1).map(l2);ae.splitPath=d2;var f2=n=>{let e=n.trim().split(/\s+/).map(t=>t.toLowerCase()).join(" ");return s2.mnemonicToSeedSync(e)};ae.mnemonicToSeed=f2});var Hs=U(eo=>{"use strict";y();g();Object.defineProperty(eo,"__esModule",{value:!0});eo.AccountPublicKey=eo.PublicKey=void 0;var h2=Yt(),y2=an(),Lc=class extends h2.Serializable{toString(){let e=this.toUint8Array();return y2.Hex.fromHexInput(e).toString()}};eo.PublicKey=Lc;var fd=class extends Lc{};eo.AccountPublicKey=fd});var Cs=U(jc=>{"use strict";y();g();Object.defineProperty(jc,"__esModule",{value:!0});jc.Signature=void 0;var g2=Yt(),b2=an(),hd=class extends g2.Serializable{toString(){let e=this.toUint8Array();return b2.Hex.fromHexInput(e).toString()}};jc.Signature=hd});var yd=U(Dc=>{"use strict";y();g();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.convertSigningMessage=void 0;var p2=an(),m2=n=>typeof n=="string"?p2.Hex.isValid(n).valid?n:E.Buffer.from(n,"utf8"):n;Dc.convertSigningMessage=m2});var Ks=U(Rr=>{"use strict";y();g();Object.defineProperty(Rr,"__esModule",{value:!0});Rr.Ed25519Signature=Rr.Ed25519PrivateKey=Rr.Ed25519PublicKey=void 0;var Vc=C0(),w2=Re(),_2=Ji(),ha=an(),A2=Ve(),to=Kc(),B2=Hs(),T2=Cs(),j0=yd(),L0=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16],In=class extends B2.AccountPublicKey{constructor(e){super();let t=ha.Hex.fromHexInput(e);if(t.toUint8Array().length!==In.LENGTH)throw new Error(`PublicKey length should be ${In.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof zn))return!1;let s=(0,j0.convertSigningMessage)(t),i=ha.Hex.fromHexInput(s).toUint8Array(),o=r.toUint8Array(),a=this.key.toUint8Array();return r.isCanonicalSignature()?Vc.ed25519.verify(o,i,a):!1}authKey(){return _2.AuthenticationKey.fromSchemeAndBytes({scheme:A2.SigningScheme.Ed25519,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new In(t)}static isPublicKey(e){return e instanceof In}};Rr.Ed25519PublicKey=In;In.LENGTH=32;var Et=class extends w2.Serializable{constructor(e){super();let t=ha.Hex.fromHexInput(e);if(t.toUint8Array().length!==Et.LENGTH)throw new Error(`PrivateKey length should be ${Et.LENGTH}`);this.signingKey=t}static generate(){let e=Vc.ed25519.utils.randomPrivateKey();return new Et(e)}static fromDerivationPath(e,t){if(!(0,to.isValidHardenedPath)(e))throw new Error(`Invalid derivation path ${e}`);return Et.fromDerivationPathInner(e,(0,to.mnemonicToSeed)(t))}static fromDerivationPathInner(e,t,r=to.HARDENED_OFFSET){let{key:s,chainCode:i}=(0,to.deriveKey)(Et.SLIP_0010_SEED,t),o=(0,to.splitPath)(e).map(c=>parseInt(c,10)),{key:a}=o.reduce((c,l)=>(0,to.CKDPriv)(c,l+r),{key:s,chainCode:i});return new Et(a)}publicKey(){let e=Vc.ed25519.getPublicKey(this.signingKey.toUint8Array());return new In(e)}sign(e){let t=(0,j0.convertSigningMessage)(e),r=ha.Hex.fromHexInput(t).toUint8Array(),s=Vc.ed25519.sign(r,this.signingKey.toUint8Array());return new zn(s)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.signingKey.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Et(t)}static isPrivateKey(e){return e instanceof Et}};Rr.Ed25519PrivateKey=Et;Et.LENGTH=32;Et.SLIP_0010_SEED="ed25519 seed";var zn=class extends T2.Signature{constructor(e){super();let t=ha.Hex.fromHexInput(e);if(t.toUint8Array().length!==zn.LENGTH)throw new Error(`Signature length should be ${zn.LENGTH}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new zn(t)}isCanonicalSignature(){let e=this.toUint8Array().slice(32);for(let t=e.length-1;t>=0;t-=1){if(e[t]<L0[t])return!0;if(e[t]>L0[t])return!1}return!1}};Rr.Ed25519Signature=zn;zn.LENGTH=64});var Fc=U(no=>{"use strict";y();g();Object.defineProperty(no,"__esModule",{value:!0});no.MultiEd25519Signature=no.MultiEd25519PublicKey=void 0;var x2=Ve(),S2=Ji(),Qt=Ks(),E2=Hs(),v2=Cs(),vt=class extends E2.AccountPublicKey{constructor(e){super();let{publicKeys:t,threshold:r}=e;if(t.length>vt.MAX_KEYS||t.length<vt.MIN_KEYS)throw new Error(`Must have between ${vt.MIN_KEYS} and ${vt.MAX_KEYS} public keys, inclusive`);if(r<vt.MIN_THRESHOLD||r>t.length)throw new Error(`Threshold must be between ${vt.MIN_THRESHOLD} and ${t.length}, inclusive`);this.publicKeys=t,this.threshold=r}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof rt))return!1;let s=[];for(let i=0;i<4;i+=1)for(let o=0;o<8;o+=1)if((r.bitmap[i]&1<<7-o)!==0){let c=i*8+o;s.push(c)}if(s.length!==r.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(s.length<this.threshold)throw new Error("Not enough signatures");for(let i=0;i<s.length;i+=1)if(!this.publicKeys[s[i]].verifySignature({message:t,signature:r.signatures[i]}))return!1;return!0}authKey(){return S2.AuthenticationKey.fromSchemeAndBytes({scheme:x2.SigningScheme.MultiEd25519,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*Qt.Ed25519PublicKey.LENGTH+1);return this.publicKeys.forEach((t,r)=>{e.set(t.toUint8Array(),r*Qt.Ed25519PublicKey.LENGTH)}),e[this.publicKeys.length*Qt.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t[t.length-1],s=[];for(let i=0;i<t.length-1;i+=Qt.Ed25519PublicKey.LENGTH){let o=i;s.push(new Qt.Ed25519PublicKey(t.subarray(o,o+Qt.Ed25519PublicKey.LENGTH)))}return new vt({publicKeys:s,threshold:r})}};no.MultiEd25519PublicKey=vt;vt.MAX_KEYS=32;vt.MIN_KEYS=2;vt.MIN_THRESHOLD=1;var rt=class extends v2.Signature{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>rt.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${rt.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t,!(r instanceof Uint8Array))this.bitmap=rt.createBitmap({bits:r});else{if(r.length!==rt.BITMAP_LEN)throw new Error(`"bitmap" length should be ${rt.BITMAP_LEN}`);this.bitmap=r}}toUint8Array(){let e=new Uint8Array(this.signatures.length*Qt.Ed25519Signature.LENGTH+rt.BITMAP_LEN);return this.signatures.forEach((t,r)=>{e.set(t.toUint8Array(),r*Qt.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*Qt.Ed25519Signature.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t.subarray(t.length-4),s=[];for(let i=0;i<t.length-r.length;i+=Qt.Ed25519Signature.LENGTH){let o=i;s.push(new Qt.Ed25519Signature(t.subarray(o,o+Qt.Ed25519Signature.LENGTH)))}return new rt({signatures:s,bitmap:r})}static createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach((o,a)=>{if(o>=rt.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${rt.MAX_SIGNATURES_SUPPORTED-1}.`);if(i.has(o))throw new Error("Duplicate bits detected.");if(a>0&&o<=t[a-1])throw new Error("The bits need to be sorted in ascending order.");i.add(o);let c=Math.floor(o/8),l=s[c];l|=r>>o%8,s[c]=l}),s}};no.MultiEd25519Signature=rt;rt.MAX_SIGNATURES_SUPPORTED=32;rt.BITMAP_LEN=4});var bd=U(lt=>{"use strict";y();g();Object.defineProperty(lt,"__esModule",{value:!0});lt.DER=void 0;lt.weierstrassPoints=F0;lt.weierstrass=O2;lt.SWUFpSqrtRatio=k0;lt.mapToCurveSimpleSWU=N2;var gd=Yl(),ro=Or(),ce=un(),Qe=un();function D0(n){n.lowS!==void 0&&(0,Qe.abool)("lowS",n.lowS),n.prehash!==void 0&&(0,Qe.abool)("prehash",n.prehash)}function U2(n){let e=(0,gd.validateBasic)(n);ce.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:I2,hexToBytes:z2}=ce;lt.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=lt.DER;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:I2(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=lt.DER,t=typeof n=="string"?z2(n):n;ce.abytes(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=lt.DER._parseInt(t.subarray(2)),{d:o,l:a}=lt.DER._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${r}`}};var Pn=BigInt(0),ye=BigInt(1),Hr=BigInt(2),kc=BigInt(3),V0=BigInt(4);function F0(n){let e=U2(n),{Fp:t}=e,r=e.toBytes||((m,f,b)=>{let A=f.toAffine();return ce.concatBytes(Uint8Array.from([4]),t.toBytes(A.x),t.toBytes(A.y))}),s=e.fromBytes||(m=>{let f=m.subarray(1),b=t.fromBytes(f.subarray(0,t.BYTES)),A=t.fromBytes(f.subarray(t.BYTES,2*t.BYTES));return{x:b,y:A}});function i(m){let{a:f,b}=e,A=t.sqr(m),p=t.mul(A,m);return t.add(t.add(p,t.mul(m,f)),b)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return ce.inRange(m,ye,e.n)}function a(m){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:A,n:p}=e;if(f&&typeof m!="bigint"){if(ce.isBytes(m)&&(m=ce.bytesToHex(m)),typeof m!="string"||!f.includes(m.length))throw new Error("Invalid key");m=m.padStart(b*2,"0")}let _;try{_=typeof m=="bigint"?m:ce.bytesToNumberBE((0,Qe.ensureBytes)("private key",m,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof m}`)}return A&&(_=ro.mod(_,p)),ce.aInRange("private key",_,ye,p),_}function c(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}let l=(0,Qe.memoized)((m,f)=>{let{px:b,py:A,pz:p}=m;if(t.eql(p,t.ONE))return{x:b,y:A};let _=m.is0();f==null&&(f=_?t.ONE:t.inv(p));let S=t.mul(b,f),v=t.mul(A,f),x=t.mul(p,f);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(x,t.ONE))throw new Error("invZ was invalid");return{x:S,y:v}}),d=(0,Qe.memoized)(m=>{if(m.is0()){if(e.allowInfinityPoint&&!t.is0(m.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=m.toAffine();if(!t.isValid(f)||!t.isValid(b))throw new Error("bad point: x or y not FE");let A=t.sqr(b),p=i(f);if(!t.eql(A,p))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class u{constructor(f,b,A){if(this.px=f,this.py=b,this.pz=A,f==null||!t.isValid(f))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(A==null||!t.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:b,y:A}=f||{};if(!f||!t.isValid(b)||!t.isValid(A))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=_=>t.eql(_,t.ZERO);return p(b)&&p(A)?u.ZERO:new u(b,A,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=t.invertBatch(f.map(A=>A.pz));return f.map((A,p)=>A.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(s((0,Qe.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(a(f))}_setWindowSize(f){w.setWindowSize(this,f)}assertValidity(){d(this)}hasEvenY(){let{y:f}=this.toAffine();if(t.isOdd)return!t.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);let{px:b,py:A,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.eql(t.mul(b,v),t.mul(_,p)),z=t.eql(t.mul(A,v),t.mul(S,p));return x&&z}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){let{a:f,b}=e,A=t.mul(b,kc),{px:p,py:_,pz:S}=this,v=t.ZERO,x=t.ZERO,z=t.ZERO,I=t.mul(p,p),D=t.mul(_,_),K=t.mul(S,S),M=t.mul(p,_);return M=t.add(M,M),z=t.mul(p,S),z=t.add(z,z),v=t.mul(f,z),x=t.mul(A,K),x=t.add(v,x),v=t.sub(D,x),x=t.add(D,x),x=t.mul(v,x),v=t.mul(M,v),z=t.mul(A,z),K=t.mul(f,K),M=t.sub(I,K),M=t.mul(f,M),M=t.add(M,z),z=t.add(I,I),I=t.add(z,I),I=t.add(I,K),I=t.mul(I,M),x=t.add(x,I),K=t.mul(_,S),K=t.add(K,K),I=t.mul(K,M),v=t.sub(v,I),z=t.mul(K,D),z=t.add(z,z),z=t.add(z,z),new u(v,x,z)}add(f){c(f);let{px:b,py:A,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.ZERO,z=t.ZERO,I=t.ZERO,D=e.a,K=t.mul(e.b,kc),M=t.mul(b,_),Q=t.mul(A,S),J=t.mul(p,v),R=t.add(b,A),B=t.add(_,S);R=t.mul(R,B),B=t.add(M,Q),R=t.sub(R,B),B=t.add(b,p);let T=t.add(_,v);return B=t.mul(B,T),T=t.add(M,J),B=t.sub(B,T),T=t.add(A,p),x=t.add(S,v),T=t.mul(T,x),x=t.add(Q,J),T=t.sub(T,x),I=t.mul(D,B),x=t.mul(K,J),I=t.add(x,I),x=t.sub(Q,I),I=t.add(Q,I),z=t.mul(x,I),Q=t.add(M,M),Q=t.add(Q,M),J=t.mul(D,J),B=t.mul(K,B),Q=t.add(Q,J),J=t.sub(M,J),J=t.mul(D,J),B=t.add(B,J),M=t.mul(Q,B),z=t.add(z,M),M=t.mul(T,B),x=t.mul(R,x),x=t.sub(x,M),M=t.mul(R,Q),I=t.mul(T,I),I=t.add(I,M),new u(x,z,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return w.wNAFCached(this,f,u.normalizeZ)}multiplyUnsafe(f){ce.aInRange("scalar",f,Pn,e.n);let b=u.ZERO;if(f===Pn)return b;if(f===ye)return this;let{endo:A}=e;if(!A)return w.unsafeLadder(this,f);let{k1neg:p,k1:_,k2neg:S,k2:v}=A.splitScalar(f),x=b,z=b,I=this;for(;_>Pn||v>Pn;)_&ye&&(x=x.add(I)),v&ye&&(z=z.add(I)),I=I.double(),_>>=ye,v>>=ye;return p&&(x=x.negate()),S&&(z=z.negate()),z=new u(t.mul(z.px,A.beta),z.py,z.pz),x.add(z)}multiply(f){let{endo:b,n:A}=e;ce.aInRange("scalar",f,ye,A);let p,_;if(b){let{k1neg:S,k1:v,k2neg:x,k2:z}=b.splitScalar(f),{p:I,f:D}=this.wNAF(v),{p:K,f:M}=this.wNAF(z);I=w.constTimeNegate(S,I),K=w.constTimeNegate(x,K),K=new u(t.mul(K.px,b.beta),K.py,K.pz),p=I.add(K),_=D.add(M)}else{let{p:S,f:v}=this.wNAF(f);p=S,_=v}return u.normalizeZ([p,_])[0]}multiplyAndAddUnsafe(f,b,A){let p=u.BASE,_=(v,x)=>x===Pn||x===ye||!v.equals(p)?v.multiplyUnsafe(x):v.multiply(x),S=_(this,b).add(_(f,A));return S.is0()?void 0:S}toAffine(f){return l(this,f)}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===ye)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===ye?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return(0,Qe.abool)("isCompressed",f),this.assertValidity(),r(u,this,f)}toHex(f=!0){return(0,Qe.abool)("isCompressed",f),ce.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);let h=e.nBitLength,w=(0,gd.wNAF)(u,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:o}}function P2(n){let e=(0,gd.validateBasic)(n);return ce.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function O2(n){let e=P2(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(R){return ro.mod(R,r)}function a(R){return ro.invert(R,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:u}=F0({...e,toBytes(R,B,T){let P=B.toAffine(),O=t.toBytes(P.x),q=ce.concatBytes;return(0,Qe.abool)("isCompressed",T),T?q(Uint8Array.from([B.hasEvenY()?2:3]),O):q(Uint8Array.from([4]),O,t.toBytes(P.y))},fromBytes(R){let B=R.length,T=R[0],P=R.subarray(1);if(B===s&&(T===2||T===3)){let O=ce.bytesToNumberBE(P);if(!ce.inRange(O,ye,t.ORDER))throw new Error("Point is not on curve");let q=d(O),j;try{j=t.sqrt(q)}catch(k){let W=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+W)}let F=(j&ye)===ye;return(T&1)===1!==F&&(j=t.neg(j)),{x:O,y:j}}else if(B===i&&T===4){let O=t.fromBytes(P.subarray(0,t.BYTES)),q=t.fromBytes(P.subarray(t.BYTES,2*t.BYTES));return{x:O,y:q}}else throw new Error(`Point of length ${B} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),h=R=>ce.bytesToHex(ce.numberToBytesBE(R,e.nByteLength));function w(R){let B=r>>ye;return R>B}function m(R){return w(R)?o(-R):R}let f=(R,B,T)=>ce.bytesToNumberBE(R.slice(B,T));class b{constructor(B,T,P){this.r=B,this.s=T,this.recovery=P,this.assertValidity()}static fromCompact(B){let T=e.nByteLength;return B=(0,Qe.ensureBytes)("compactSignature",B,T*2),new b(f(B,0,T),f(B,T,2*T))}static fromDER(B){let{r:T,s:P}=lt.DER.toSig((0,Qe.ensureBytes)("DER",B));return new b(T,P)}assertValidity(){ce.aInRange("r",this.r,ye,r),ce.aInRange("s",this.s,ye,r)}addRecoveryBit(B){return new b(this.r,this.s,B)}recoverPublicKey(B){let{r:T,s:P,recovery:O}=this,q=x((0,Qe.ensureBytes)("msgHash",B));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");let j=O===2||O===3?T+e.n:T;if(j>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let F=(O&1)===0?"02":"03",G=c.fromHex(F+h(j)),k=a(j),W=o(-q*k),ie=o(P*k),he=c.BASE.multiplyAndAddUnsafe(G,W,ie);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ce.hexToBytes(this.toDERHex())}toDERHex(){return lt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ce.hexToBytes(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let A={isValidPrivateKey(R){try{return l(R),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let R=ro.getMinHashLength(e.n);return ro.mapHashToField(e.randomBytes(R),e.n)},precompute(R=8,B=c.BASE){return B._setWindowSize(R),B.multiply(BigInt(3)),B}};function p(R,B=!0){return c.fromPrivateKey(R).toRawBytes(B)}function _(R){let B=ce.isBytes(R),T=typeof R=="string",P=(B||T)&&R.length;return B?P===s||P===i:T?P===2*s||P===2*i:R instanceof c}function S(R,B,T=!0){if(_(R))throw new Error("first arg must be private key");if(!_(B))throw new Error("second arg must be public key");return c.fromHex(B).multiply(l(R)).toRawBytes(T)}let v=e.bits2int||function(R){let B=ce.bytesToNumberBE(R),T=R.length*8-e.nBitLength;return T>0?B>>BigInt(T):B},x=e.bits2int_modN||function(R){return o(v(R))},z=ce.bitMask(e.nBitLength);function I(R){return ce.aInRange(`num < 2^${e.nBitLength}`,R,Pn,z),ce.numberToBytesBE(R,e.nByteLength)}function D(R,B,T=K){if(["recovered","canonical"].some(Ee=>Ee in T))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:O}=e,{lowS:q,prehash:j,extraEntropy:F}=T;q==null&&(q=!0),R=(0,Qe.ensureBytes)("msgHash",R),D0(T),j&&(R=(0,Qe.ensureBytes)("prehashed msgHash",P(R)));let G=x(R),k=l(B),W=[I(k),I(G)];if(F!=null&&F!==!1){let Ee=F===!0?O(t.BYTES):F;W.push((0,Qe.ensureBytes)("extraEntropy",Ee))}let ie=ce.concatBytes(...W),he=G;function Be(Ee){let ge=v(Ee);if(!u(ge))return;let je=a(ge),Pe=c.BASE.multiply(ge).toAffine(),ve=o(Pe.x);if(ve===Pn)return;let bt=o(je*o(he+ve*k));if(bt===Pn)return;let pn=(Pe.x===ve?0:2)|Number(Pe.y&ye),ts=bt;return q&&w(bt)&&(ts=m(bt),pn^=1),new b(ve,ts,pn)}return{seed:ie,k2sig:Be}}let K={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function Q(R,B,T=K){let{seed:P,k2sig:O}=D(R,B,T),q=e;return ce.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(P,O)}c.BASE._setWindowSize(8);function J(R,B,T,P=M){let O=R;if(B=(0,Qe.ensureBytes)("msgHash",B),T=(0,Qe.ensureBytes)("publicKey",T),"strict"in P)throw new Error("options.strict was renamed to lowS");D0(P);let{lowS:q,prehash:j}=P,F,G;try{if(typeof O=="string"||ce.isBytes(O))try{F=b.fromDER(O)}catch(Pe){if(!(Pe instanceof lt.DER.Err))throw Pe;F=b.fromCompact(O)}else if(typeof O=="object"&&typeof O.r=="bigint"&&typeof O.s=="bigint"){let{r:Pe,s:ve}=O;F=new b(Pe,ve)}else throw new Error("PARSE");G=c.fromHex(T)}catch(Pe){if(Pe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&F.hasHighS())return!1;j&&(B=e.hash(B));let{r:k,s:W}=F,ie=x(B),he=a(W),Be=o(ie*he),Ee=o(k*he),ge=c.BASE.multiplyAndAddUnsafe(G,Be,Ee)?.toAffine();return ge?o(ge.x)===k:!1}return{CURVE:e,getPublicKey:p,getSharedSecret:S,sign:Q,verify:J,ProjectivePoint:c,Signature:b,utils:A}}function k0(n,e){let t=n.ORDER,r=Pn;for(let m=t-ye;m%Hr===Pn;m/=Hr)r+=ye;let s=r,i=Hr<<s-ye-ye,o=i*Hr,a=(t-ye)/o,c=(a-ye)/Hr,l=o-ye,d=i,u=n.pow(e,a),h=n.pow(e,(a+ye)/Hr),w=(m,f)=>{let b=u,A=n.pow(f,l),p=n.sqr(A);p=n.mul(p,f);let _=n.mul(m,p);_=n.pow(_,c),_=n.mul(_,A),A=n.mul(_,f),p=n.mul(_,m);let S=n.mul(p,A);_=n.pow(S,d);let v=n.eql(_,n.ONE);A=n.mul(p,h),_=n.mul(S,b),p=n.cmov(A,p,v),S=n.cmov(_,S,v);for(let x=s;x>ye;x--){let z=x-Hr;z=Hr<<z-ye;let I=n.pow(S,z),D=n.eql(I,n.ONE);A=n.mul(p,b),b=n.mul(b,b),I=n.mul(S,b),p=n.cmov(A,p,D),S=n.cmov(I,S,D)}return{isValid:v,value:p}};if(n.ORDER%V0===kc){let m=(n.ORDER-kc)/V0,f=n.sqrt(n.neg(e));w=(b,A)=>{let p=n.sqr(A),_=n.mul(b,A);p=n.mul(p,_);let S=n.pow(p,m);S=n.mul(S,_);let v=n.mul(S,f),x=n.mul(n.sqr(S),A),z=n.eql(x,b),I=n.cmov(v,S,z);return{isValid:z,value:I}}}return w}function N2(n,e){if(ro.validateField(n),!n.isValid(e.A)||!n.isValid(e.B)||!n.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=k0(n,e.Z);if(!n.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,l,d,u;s=n.sqr(r),s=n.mul(s,e.Z),i=n.sqr(s),i=n.add(i,s),o=n.add(i,n.ONE),o=n.mul(o,e.B),a=n.cmov(e.Z,n.neg(i),!n.eql(i,n.ZERO)),a=n.mul(a,e.A),i=n.sqr(o),l=n.sqr(a),c=n.mul(l,e.A),i=n.add(i,c),i=n.mul(i,o),l=n.mul(l,a),c=n.mul(l,e.B),i=n.add(i,c),d=n.mul(s,o);let{isValid:h,value:w}=t(i,l);u=n.mul(s,r),u=n.mul(u,w),d=n.cmov(d,o,h),u=n.cmov(u,w,h);let m=n.isOdd(r)===n.isOdd(u);return u=n.cmov(n.neg(u),u,m),d=n.div(d,a),{x:d,y:u}}}});var W0=U(Gc=>{"use strict";y();g();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.getHash=$0;Gc.createCurve=R2;var q2=yi(),G0=pt(),M2=bd();function $0(n){return{hash:n,hmac:(e,...t)=>(0,q2.hmac)(n,e,(0,G0.concatBytes)(...t)),randomBytes:G0.randomBytes}}function R2(n,e){let t=r=>(0,M2.weierstrass)({...n,...$0(r)});return Object.freeze({...t(e),create:t})}});var sy=U(It=>{"use strict";y();g();Object.defineProperty(It,"__esModule",{value:!0});It.encodeToCurve=It.hashToCurve=It.schnorr=It.secp256k1=void 0;var $c=Va(),H2=pt(),C2=W0(),Y0=td(),Fe=Or(),Ut=un(),K2=bd(),ba=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ya=BigInt(1),Xc=BigInt(2),X0=(n,e)=>(n+e/Xc)/e;function Q0(n){let e=ba,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,d=l*l*n%e,u=(0,Fe.pow2)(d,t,e)*d%e,h=(0,Fe.pow2)(u,t,e)*d%e,w=(0,Fe.pow2)(h,Xc,e)*l%e,m=(0,Fe.pow2)(w,s,e)*w%e,f=(0,Fe.pow2)(m,i,e)*m%e,b=(0,Fe.pow2)(f,a,e)*f%e,A=(0,Fe.pow2)(b,c,e)*b%e,p=(0,Fe.pow2)(A,a,e)*f%e,_=(0,Fe.pow2)(p,t,e)*d%e,S=(0,Fe.pow2)(_,o,e)*m%e,v=(0,Fe.pow2)(S,r,e)*l%e,x=(0,Fe.pow2)(v,Xc,e);if(!Cr.eql(Cr.sqr(x),n))throw new Error("Cannot find square root");return x}var Cr=(0,Fe.Field)(ba,void 0,void 0,{sqrt:Q0});It.secp256k1=(0,C2.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Cr,n:Wc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=Wc,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ya*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=X0(i*n,e),c=X0(-r*n,e),l=(0,Fe.mod)(n-a*t-c*s,e),d=(0,Fe.mod)(-a*r-c*i,e),u=l>o,h=d>o;if(u&&(l=e-l),h&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:u,k1:l,k2neg:h,k2:d}}}},$c.sha256);var J0=BigInt(0),Z0={};function Zc(n,...e){let t=Z0[n];if(t===void 0){let r=(0,$c.sha256)(Uint8Array.from(n,s=>s.charCodeAt(0)));t=(0,Ut.concatBytes)(r,r),Z0[n]=t}return(0,$c.sha256)((0,Ut.concatBytes)(t,...e))}var _d=n=>n.toRawBytes(!0).slice(1),md=n=>(0,Ut.numberToBytesBE)(n,32),pd=n=>(0,Fe.mod)(n,ba),ga=n=>(0,Fe.mod)(n,Wc),Ad=It.secp256k1.ProjectivePoint,L2=(n,e,t)=>Ad.BASE.multiplyAndAddUnsafe(n,e,t);function wd(n){let e=It.secp256k1.utils.normPrivateKeyToScalar(n),t=Ad.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:ga(-e),bytes:_d(t)}}function ey(n){(0,Ut.aInRange)("x",n,ya,ba);let e=pd(n*n),t=pd(e*n+BigInt(7)),r=Q0(t);r%Xc!==J0&&(r=pd(-r));let s=new Ad(n,r,ya);return s.assertValidity(),s}var so=Ut.bytesToNumberBE;function ty(...n){return ga(so(Zc("BIP0340/challenge",...n)))}function j2(n){return wd(n).bytes}function D2(n,e,t=(0,H2.randomBytes)(32)){let r=(0,Ut.ensureBytes)("message",n),{bytes:s,scalar:i}=wd(e),o=(0,Ut.ensureBytes)("auxRand",t,32),a=md(i^so(Zc("BIP0340/aux",o))),c=Zc("BIP0340/nonce",a,s,r),l=ga(so(c));if(l===J0)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=wd(l),h=ty(d,s,r),w=new Uint8Array(64);if(w.set(d,0),w.set(md(ga(u+h*i)),32),!ny(w,r,s))throw new Error("sign: Invalid signature produced");return w}function ny(n,e,t){let r=(0,Ut.ensureBytes)("signature",n,64),s=(0,Ut.ensureBytes)("message",e),i=(0,Ut.ensureBytes)("publicKey",t,32);try{let o=ey(so(i)),a=so(r.subarray(0,32));if(!(0,Ut.inRange)(a,ya,ba))return!1;let c=so(r.subarray(32,64));if(!(0,Ut.inRange)(c,ya,Wc))return!1;let l=ty(md(a),_d(o),s),d=L2(o,c,ga(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}It.schnorr=(()=>({getPublicKey:j2,sign:D2,verify:ny,utils:{randomPrivateKey:It.secp256k1.utils.randomPrivateKey,lift_x:ey,pointToBytes:_d,numberToBytesBE:Ut.numberToBytesBE,bytesToNumberBE:Ut.bytesToNumberBE,taggedHash:Zc,mod:Fe.mod}}))();var V2=(()=>(0,Y0.isogenyMap)(Cr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(e=>BigInt(e)))))(),F2=(()=>(0,K2.mapToCurveSimpleSWU)(Cr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Cr.create(BigInt("-11"))}))(),ry=(()=>(0,Y0.createHasher)(It.secp256k1.ProjectivePoint,n=>{let{x:e,y:t}=F2(Cr.create(n[0]));return V2(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Cr.ORDER,m:1,k:128,expand:"xmd",hash:$c.sha256}))();It.hashToCurve=(()=>ry.hashToCurve)();It.encodeToCurve=(()=>ry.encodeToCurve)()});var cy=U(io=>{"use strict";y();g();Object.defineProperty(io,"__esModule",{value:!0});io.ripemd160=io.RIPEMD160=void 0;var k2=kf(),pa=pt(),G2=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),oy=new Uint8Array(new Array(16).fill(0).map((n,e)=>e)),$2=oy.map(n=>(9*n+5)%16),Bd=[oy],Td=[$2];for(let n=0;n<4;n++)for(let e of[Bd,Td])e.push(e[n].map(t=>G2[t]));var ay=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),W2=Bd.map((n,e)=>n.map(t=>ay[e][t])),X2=Td.map((n,e)=>n.map(t=>ay[e][t])),Z2=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Y2=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function iy(n,e,t,r){return n===0?e^t^r:n===1?e&t|~e&r:n===2?(e|~t)^r:n===3?e&r|t&~r:e^(t|~r)}var Yc=new Uint32Array(16),Qc=class extends k2.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:s,h4:i}=this;return[e,t,r,s,i]}set(e,t,r,s,i){this.h0=e|0,this.h1=t|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,t){for(let w=0;w<16;w++,t+=4)Yc[w]=e.getUint32(t,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,c=a,l=this.h3|0,d=l,u=this.h4|0,h=u;for(let w=0;w<5;w++){let m=4-w,f=Z2[w],b=Y2[w],A=Bd[w],p=Td[w],_=W2[w],S=X2[w];for(let v=0;v<16;v++){let x=(0,pa.rotl)(r+iy(w,i,a,l)+Yc[A[v]]+f,_[v])+u|0;r=u,u=l,l=(0,pa.rotl)(a,10)|0,a=i,i=x}for(let v=0;v<16;v++){let x=(0,pa.rotl)(s+iy(m,o,c,d)+Yc[p[v]]+b,S[v])+h|0;s=h,h=d,d=(0,pa.rotl)(c,10)|0,c=o,o=x}}this.set(this.h1+a+d|0,this.h2+l+h|0,this.h3+u+s|0,this.h4+r+o|0,this.h0+i+c|0)}roundClean(){Yc.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};io.RIPEMD160=Qc;io.ripemd160=(0,pa.wrapConstructor)(()=>new Qc)});var Ls=U(Ae=>{"use strict";y();g();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.bitMask=void 0;Ae.isBytes=eu;Ae.abytes=tu;Ae.bytesToHex=Sd;Ae.numberToHexUnpadded=fy;Ae.hexToNumber=Ed;Ae.hexToBytes=nu;Ae.bytesToNumberBE=e_;Ae.bytesToNumberLE=t_;Ae.numberToBytesBE=hy;Ae.numberToBytesLE=n_;Ae.numberToVarBytesBE=r_;Ae.ensureBytes=s_;Ae.concatBytes=yy;Ae.equalBytes=i_;Ae.utf8ToBytes=o_;Ae.bitLen=a_;Ae.bitGet=c_;Ae.bitSet=u_;Ae.createHmacDrbg=d_;Ae.validateObject=h_;var dy=BigInt(0),Jc=BigInt(1),Q2=BigInt(2);function eu(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function tu(n){if(!eu(n))throw new Error("Uint8Array expected")}var J2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Sd(n){tu(n);let e="";for(let t=0;t<n.length;t++)e+=J2[n[t]];return e}function fy(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function Ed(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}var Yn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function uy(n){if(n>=Yn._0&&n<=Yn._9)return n-Yn._0;if(n>=Yn._A&&n<=Yn._F)return n-(Yn._A-10);if(n>=Yn._a&&n<=Yn._f)return n-(Yn._a-10)}function nu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){let o=uy(n.charCodeAt(i)),a=uy(n.charCodeAt(i+1));if(o===void 0||a===void 0){let c=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function e_(n){return Ed(Sd(n))}function t_(n){return tu(n),Ed(Sd(Uint8Array.from(n).reverse()))}function hy(n,e){return nu(n.toString(16).padStart(e*2,"0"))}function n_(n,e){return hy(n,e).reverse()}function r_(n){return nu(fy(n))}function s_(n,e,t){let r;if(typeof e=="string")try{r=nu(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(eu(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function yy(...n){let e=0;for(let r=0;r<n.length;r++){let s=n[r];tu(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}function i_(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function o_(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function a_(n){let e;for(e=0;n>dy;n>>=Jc,e+=1);return e}function c_(n,e){return n>>BigInt(e)&Jc}function u_(n,e,t){return n|(t?Jc:dy)<<BigInt(e)}var l_=n=>(Q2<<BigInt(n-1))-Jc;Ae.bitMask=l_;var xd=n=>new Uint8Array(n),ly=n=>Uint8Array.from(n);function d_(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=xd(n),s=xd(n),i=0,o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>t(s,r,...u),c=(u=xd())=>{s=a(ly([0]),u),r=a(),u.length!==0&&(s=a(ly([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,h=[];for(;u<e;){r=a();let w=r.slice();h.push(w),u+=r.length}return yy(...h)};return(u,h)=>{o(),c(u);let w;for(;!(w=h(l()));)c();return o(),w}}var f_={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||eu(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function h_(n,e,t={}){let r=(s,i,o)=>{let a=f_[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))r(s,i,!1);for(let[s,i]of Object.entries(t))r(s,i,!0);return n}});var oo=U(Te=>{"use strict";y();g();Object.defineProperty(Te,"__esModule",{value:!0});Te.isNegativeLE=void 0;Te.mod=Ct;Te.pow=py;Te.pow2=p_;Te.invert=ru;Te.tonelliShanks=my;Te.FpSqrt=wy;Te.validateField=__;Te.FpPow=_y;Te.FpInvertBatch=Ay;Te.FpDiv=A_;Te.FpIsSquare=B_;Te.nLength=Ud;Te.Field=T_;Te.FpSqrtOdd=x_;Te.FpSqrtEven=S_;Te.hashToPrivateScalar=E_;Te.getFieldBytesLength=Id;Te.getMinHashLength=By;Te.mapHashToField=v_;var Kt=Ls(),Ce=BigInt(0),pe=BigInt(1),Kr=BigInt(2),y_=BigInt(3),vd=BigInt(4),gy=BigInt(5),by=BigInt(8),g_=BigInt(9),b_=BigInt(16);function Ct(n,e){let t=n%e;return t>=Ce?t:e+t}function py(n,e,t){if(t<=Ce||e<Ce)throw new Error("Expected power/modulo > 0");if(t===pe)return Ce;let r=pe;for(;e>Ce;)e&pe&&(r=r*n%t),n=n*n%t,e>>=pe;return r}function p_(n,e,t){let r=n;for(;e-- >Ce;)r*=r,r%=t;return r}function ru(n,e){if(n===Ce||e<=Ce)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Ct(n,e),r=e,s=Ce,i=pe,o=pe,a=Ce;for(;t!==Ce;){let l=r/t,d=r%t,u=s-o*l,h=i-a*l;r=t,t=d,s=o,i=a,o=u,a=h}if(r!==pe)throw new Error("invert: does not exist");return Ct(s,e)}function my(n){let e=(n-pe)/Kr,t,r,s;for(t=n-pe,r=0;t%Kr===Ce;t/=Kr,r++);for(s=Kr;s<n&&py(s,e,n)!==n-pe;s++);if(r===1){let o=(n+pe)/vd;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let i=(t+pe)/Kr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),h=a.pow(c,t);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let w=1;for(let f=a.sqr(h);w<l&&!a.eql(f,a.ONE);w++)f=a.sqr(f);let m=a.pow(d,pe<<BigInt(l-w-1));d=a.sqr(m),u=a.mul(u,m),h=a.mul(h,d),l=w}return u}}function wy(n){if(n%vd===y_){let e=(n+pe)/vd;return function(r,s){let i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%by===gy){let e=(n-gy)/by;return function(r,s){let i=r.mul(s,Kr),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,Kr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return n%b_,my(n)}var m_=(n,e)=>(Ct(n,e)&pe)===pe;Te.isNegativeLE=m_;var w_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function __(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=w_.reduce((r,s)=>(r[s]="function",r),e);return(0,Kt.validateObject)(n,t)}function _y(n,e,t){if(t<Ce)throw new Error("Expected power > 0");if(t===Ce)return n.ONE;if(t===pe)return e;let r=n.ONE,s=e;for(;t>Ce;)t&pe&&(r=n.mul(r,s)),s=n.sqr(s),t>>=pe;return r}function Ay(n,e){let t=new Array(e.length),r=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),s),t}function A_(n,e,t){return n.mul(e,typeof t=="bigint"?ru(t,n.ORDER):n.inv(t))}function B_(n){let e=(n.ORDER-pe)/Kr;return t=>{let r=n.pow(t,e);return n.eql(r,n.ZERO)||n.eql(r,n.ONE)}}function Ud(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function T_(n,e,t=!1,r={}){if(n<=Ce)throw new Error(`Expected Field ORDER > 0, got ${n}`);let{nBitLength:s,nByteLength:i}=Ud(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=wy(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:(0,Kt.bitMask)(s),ZERO:Ce,ONE:pe,create:c=>Ct(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ce<=c&&c<n},is0:c=>c===Ce,isOdd:c=>(c&pe)===pe,neg:c=>Ct(-c,n),eql:(c,l)=>c===l,sqr:c=>Ct(c*c,n),add:(c,l)=>Ct(c+l,n),sub:(c,l)=>Ct(c-l,n),mul:(c,l)=>Ct(c*l,n),pow:(c,l)=>_y(a,c,l),div:(c,l)=>Ct(c*ru(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ru(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Ay(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?(0,Kt.numberToBytesLE)(c,i):(0,Kt.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?(0,Kt.bytesToNumberLE)(c):(0,Kt.bytesToNumberBE)(c)}});return Object.freeze(a)}function x_(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?t:n.neg(t)}function S_(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function E_(n,e,t=!1){n=(0,Kt.ensureBytes)("privateHash",n);let r=n.length,s=Ud(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);let i=t?(0,Kt.bytesToNumberLE)(n):(0,Kt.bytesToNumberBE)(n);return Ct(i,e-pe)+pe}function Id(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function By(n){let e=Id(n);return e+Math.ceil(e/2)}function v_(n,e,t=!1){let r=n.length,s=Id(e),i=By(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let o=t?(0,Kt.bytesToNumberBE)(n):(0,Kt.bytesToNumberLE)(n),a=Ct(o,e-pe)+pe;return t?(0,Kt.numberToBytesLE)(a,s):(0,Kt.numberToBytesBE)(a,s)}});var xy=U(su=>{"use strict";y();g();Object.defineProperty(su,"__esModule",{value:!0});su.wNAF=z_;su.validateBasic=P_;var Ty=oo(),U_=Ls(),I_=BigInt(0),zd=BigInt(1);function z_(n,e){let t=(s,i)=>{let o=i.negate();return s?o:i},r=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=n.ZERO,a=s;for(;i>I_;)i&zd&&(o=o.add(a)),a=a.double(),i>>=zd;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=r(i),c=[],l=s,d=l;for(let u=0;u<o;u++){d=l,c.push(d);for(let h=1;h<a;h++)d=d.add(l),c.push(d);l=d.double()}return c},wNAF(s,i,o){let{windows:a,windowSize:c}=r(s),l=n.ZERO,d=n.BASE,u=BigInt(2**s-1),h=2**s,w=BigInt(s);for(let m=0;m<a;m++){let f=m*c,b=Number(o&u);o>>=w,b>c&&(b-=h,o+=zd);let A=f,p=f+Math.abs(b)-1,_=m%2!==0,S=b<0;b===0?d=d.add(t(_,i[A])):l=l.add(t(S,i[p]))}return{p:l,f:d}},wNAFCached(s,i,o,a){let c=s._WINDOW_SIZE||1,l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function P_(n){return(0,Ty.validateField)(n.Fp),(0,U_.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Ty.nLength)(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}});var Od=U(dt=>{"use strict";y();g();Object.defineProperty(dt,"__esModule",{value:!0});dt.DER=void 0;dt.weierstrassPoints=Ey;dt.weierstrass=R_;dt.SWUFpSqrtRatio=vy;dt.mapToCurveSimpleSWU=H_;var Pd=xy(),ao=oo(),xe=Ls(),On=Ls();function O_(n){let e=(0,Pd.validateBasic)(n);xe.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:N_,hexToBytes:q_}=xe;dt.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=dt.DER;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:N_(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=dt.DER,t=typeof n=="string"?q_(n):n;xe.abytes(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=dt.DER._parseInt(t.subarray(2)),{d:o,l:a}=dt.DER._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${r}`}};var dn=BigInt(0),Ue=BigInt(1),Lr=BigInt(2),iu=BigInt(3),Sy=BigInt(4);function Ey(n){let e=O_(n),{Fp:t}=e,r=e.toBytes||((m,f,b)=>{let A=f.toAffine();return xe.concatBytes(Uint8Array.from([4]),t.toBytes(A.x),t.toBytes(A.y))}),s=e.fromBytes||(m=>{let f=m.subarray(1),b=t.fromBytes(f.subarray(0,t.BYTES)),A=t.fromBytes(f.subarray(t.BYTES,2*t.BYTES));return{x:b,y:A}});function i(m){let{a:f,b}=e,A=t.sqr(m),p=t.mul(A,m);return t.add(t.add(p,t.mul(m,f)),b)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&dn<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(m){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:A,n:p}=e;if(f&&typeof m!="bigint"){if(xe.isBytes(m)&&(m=xe.bytesToHex(m)),typeof m!="string"||!f.includes(m.length))throw new Error("Invalid key");m=m.padStart(b*2,"0")}let _;try{_=typeof m=="bigint"?m:xe.bytesToNumberBE((0,On.ensureBytes)("private key",m,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof m}`)}return A&&(_=ao.mod(_,p)),a(_),_}let l=new Map;function d(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(f,b,A){if(this.px=f,this.py=b,this.pz=A,f==null||!t.isValid(f))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(A==null||!t.isValid(A))throw new Error("z required")}static fromAffine(f){let{x:b,y:A}=f||{};if(!f||!t.isValid(b)||!t.isValid(A))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=_=>t.eql(_,t.ZERO);return p(b)&&p(A)?u.ZERO:new u(b,A,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=t.invertBatch(f.map(A=>A.pz));return f.map((A,p)=>A.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(s((0,On.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=this.toAffine();if(!t.isValid(f)||!t.isValid(b))throw new Error("bad point: x or y not FE");let A=t.sqr(b),p=i(f);if(!t.eql(A,p))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:f}=this.toAffine();if(t.isOdd)return!t.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){d(f);let{px:b,py:A,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.eql(t.mul(b,v),t.mul(_,p)),z=t.eql(t.mul(A,v),t.mul(S,p));return x&&z}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){let{a:f,b}=e,A=t.mul(b,iu),{px:p,py:_,pz:S}=this,v=t.ZERO,x=t.ZERO,z=t.ZERO,I=t.mul(p,p),D=t.mul(_,_),K=t.mul(S,S),M=t.mul(p,_);return M=t.add(M,M),z=t.mul(p,S),z=t.add(z,z),v=t.mul(f,z),x=t.mul(A,K),x=t.add(v,x),v=t.sub(D,x),x=t.add(D,x),x=t.mul(v,x),v=t.mul(M,v),z=t.mul(A,z),K=t.mul(f,K),M=t.sub(I,K),M=t.mul(f,M),M=t.add(M,z),z=t.add(I,I),I=t.add(z,I),I=t.add(I,K),I=t.mul(I,M),x=t.add(x,I),K=t.mul(_,S),K=t.add(K,K),I=t.mul(K,M),v=t.sub(v,I),z=t.mul(K,D),z=t.add(z,z),z=t.add(z,z),new u(v,x,z)}add(f){d(f);let{px:b,py:A,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.ZERO,z=t.ZERO,I=t.ZERO,D=e.a,K=t.mul(e.b,iu),M=t.mul(b,_),Q=t.mul(A,S),J=t.mul(p,v),R=t.add(b,A),B=t.add(_,S);R=t.mul(R,B),B=t.add(M,Q),R=t.sub(R,B),B=t.add(b,p);let T=t.add(_,v);return B=t.mul(B,T),T=t.add(M,J),B=t.sub(B,T),T=t.add(A,p),x=t.add(S,v),T=t.mul(T,x),x=t.add(Q,J),T=t.sub(T,x),I=t.mul(D,B),x=t.mul(K,J),I=t.add(x,I),x=t.sub(Q,I),I=t.add(Q,I),z=t.mul(x,I),Q=t.add(M,M),Q=t.add(Q,M),J=t.mul(D,J),B=t.mul(K,B),Q=t.add(Q,J),J=t.sub(M,J),J=t.mul(D,J),B=t.add(B,J),M=t.mul(Q,B),z=t.add(z,M),M=t.mul(T,B),x=t.mul(R,x),x=t.sub(x,M),M=t.mul(R,Q),I=t.mul(T,I),I=t.add(I,M),new u(x,z,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return w.wNAFCached(this,l,f,b=>{let A=t.invertBatch(b.map(p=>p.pz));return b.map((p,_)=>p.toAffine(A[_])).map(u.fromAffine)})}multiplyUnsafe(f){let b=u.ZERO;if(f===dn)return b;if(a(f),f===Ue)return this;let{endo:A}=e;if(!A)return w.unsafeLadder(this,f);let{k1neg:p,k1:_,k2neg:S,k2:v}=A.splitScalar(f),x=b,z=b,I=this;for(;_>dn||v>dn;)_&Ue&&(x=x.add(I)),v&Ue&&(z=z.add(I)),I=I.double(),_>>=Ue,v>>=Ue;return p&&(x=x.negate()),S&&(z=z.negate()),z=new u(t.mul(z.px,A.beta),z.py,z.pz),x.add(z)}multiply(f){a(f);let b=f,A,p,{endo:_}=e;if(_){let{k1neg:S,k1:v,k2neg:x,k2:z}=_.splitScalar(b),{p:I,f:D}=this.wNAF(v),{p:K,f:M}=this.wNAF(z);I=w.constTimeNegate(S,I),K=w.constTimeNegate(x,K),K=new u(t.mul(K.px,_.beta),K.py,K.pz),A=I.add(K),p=D.add(M)}else{let{p:S,f:v}=this.wNAF(b);A=S,p=v}return u.normalizeZ([A,p])[0]}multiplyAndAddUnsafe(f,b,A){let p=u.BASE,_=(v,x)=>x===dn||x===Ue||!v.equals(p)?v.multiplyUnsafe(x):v.multiply(x),S=_(this,b).add(_(f,A));return S.is0()?void 0:S}toAffine(f){let{px:b,py:A,pz:p}=this,_=this.is0();f==null&&(f=_?t.ONE:t.inv(p));let S=t.mul(b,f),v=t.mul(A,f),x=t.mul(p,f);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(x,t.ONE))throw new Error("invZ was invalid");return{x:S,y:v}}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===Ue)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===Ue?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),r(u,this,f)}toHex(f=!0){return xe.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);let h=e.nBitLength,w=(0,Pd.wNAF)(u,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function M_(n){let e=(0,Pd.validateBasic)(n);return xe.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function R_(n){let e=M_(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(B){return dn<B&&B<t.ORDER}function a(B){return ao.mod(B,r)}function c(B){return ao.invert(B,r)}let{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:h}=Ey({...e,toBytes(B,T,P){let O=T.toAffine(),q=t.toBytes(O.x),j=xe.concatBytes;return P?j(Uint8Array.from([T.hasEvenY()?2:3]),q):j(Uint8Array.from([4]),q,t.toBytes(O.y))},fromBytes(B){let T=B.length,P=B[0],O=B.subarray(1);if(T===s&&(P===2||P===3)){let q=xe.bytesToNumberBE(O);if(!o(q))throw new Error("Point is not on curve");let j=u(q),F;try{F=t.sqrt(j)}catch(W){let ie=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+ie)}let G=(F&Ue)===Ue;return(P&1)===1!==G&&(F=t.neg(F)),{x:q,y:F}}else if(T===i&&P===4){let q=t.fromBytes(O.subarray(0,t.BYTES)),j=t.fromBytes(O.subarray(t.BYTES,2*t.BYTES));return{x:q,y:j}}else throw new Error(`Point of length ${T} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),w=B=>xe.bytesToHex(xe.numberToBytesBE(B,e.nByteLength));function m(B){let T=r>>Ue;return B>T}function f(B){return m(B)?a(-B):B}let b=(B,T,P)=>xe.bytesToNumberBE(B.slice(T,P));class A{constructor(T,P,O){this.r=T,this.s=P,this.recovery=O,this.assertValidity()}static fromCompact(T){let P=e.nByteLength;return T=(0,On.ensureBytes)("compactSignature",T,P*2),new A(b(T,0,P),b(T,P,2*P))}static fromDER(T){let{r:P,s:O}=dt.DER.toSig((0,On.ensureBytes)("DER",T));return new A(P,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(T){return new A(this.r,this.s,T)}recoverPublicKey(T){let{r:P,s:O,recovery:q}=this,j=z((0,On.ensureBytes)("msgHash",T));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");let F=q===2||q===3?P+e.n:P;if(F>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let G=(q&1)===0?"02":"03",k=l.fromHex(G+w(F)),W=c(F),ie=a(-j*W),he=a(O*W),Be=l.BASE.multiplyAndAddUnsafe(k,ie,he);if(!Be)throw new Error("point at infinify");return Be.assertValidity(),Be}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return xe.hexToBytes(this.toDERHex())}toDERHex(){return dt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xe.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}let p={isValidPrivateKey(B){try{return d(B),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{let B=ao.getMinHashLength(e.n);return ao.mapHashToField(e.randomBytes(B),e.n)},precompute(B=8,T=l.BASE){return T._setWindowSize(B),T.multiply(BigInt(3)),T}};function _(B,T=!0){return l.fromPrivateKey(B).toRawBytes(T)}function S(B){let T=xe.isBytes(B),P=typeof B=="string",O=(T||P)&&B.length;return T?O===s||O===i:P?O===2*s||O===2*i:B instanceof l}function v(B,T,P=!0){if(S(B))throw new Error("first arg must be private key");if(!S(T))throw new Error("second arg must be public key");return l.fromHex(T).multiply(d(B)).toRawBytes(P)}let x=e.bits2int||function(B){let T=xe.bytesToNumberBE(B),P=B.length*8-e.nBitLength;return P>0?T>>BigInt(P):T},z=e.bits2int_modN||function(B){return a(x(B))},I=xe.bitMask(e.nBitLength);function D(B){if(typeof B!="bigint")throw new Error("bigint expected");if(!(dn<=B&&B<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xe.numberToBytesBE(B,e.nByteLength)}function K(B,T,P=M){if(["recovered","canonical"].some(ge=>ge in P))throw new Error("sign() legacy options not supported");let{hash:O,randomBytes:q}=e,{lowS:j,prehash:F,extraEntropy:G}=P;j==null&&(j=!0),B=(0,On.ensureBytes)("msgHash",B),F&&(B=(0,On.ensureBytes)("prehashed msgHash",O(B)));let k=z(B),W=d(T),ie=[D(W),D(k)];if(G!=null&&G!==!1){let ge=G===!0?q(t.BYTES):G;ie.push((0,On.ensureBytes)("extraEntropy",ge))}let he=xe.concatBytes(...ie),Be=k;function Ee(ge){let je=x(ge);if(!h(je))return;let Pe=c(je),ve=l.BASE.multiply(je).toAffine(),bt=a(ve.x);if(bt===dn)return;let pn=a(Pe*a(Be+bt*W));if(pn===dn)return;let ts=(ve.x===bt?0:2)|Number(ve.y&Ue),Da=pn;return j&&m(pn)&&(Da=f(pn),ts^=1),new A(bt,Da,ts)}return{seed:he,k2sig:Ee}}let M={lowS:e.lowS,prehash:!1},Q={lowS:e.lowS,prehash:!1};function J(B,T,P=M){let{seed:O,k2sig:q}=K(B,T,P),j=e;return xe.createHmacDrbg(j.hash.outputLen,j.nByteLength,j.hmac)(O,q)}l.BASE._setWindowSize(8);function R(B,T,P,O=Q){let q=B;if(T=(0,On.ensureBytes)("msgHash",T),P=(0,On.ensureBytes)("publicKey",P),"strict"in O)throw new Error("options.strict was renamed to lowS");let{lowS:j,prehash:F}=O,G,k;try{if(typeof q=="string"||xe.isBytes(q))try{G=A.fromDER(q)}catch(ve){if(!(ve instanceof dt.DER.Err))throw ve;G=A.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){let{r:ve,s:bt}=q;G=new A(ve,bt)}else throw new Error("PARSE");k=l.fromHex(P)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&G.hasHighS())return!1;F&&(T=e.hash(T));let{r:W,s:ie}=G,he=z(T),Be=c(ie),Ee=a(he*Be),ge=a(W*Be),je=l.BASE.multiplyAndAddUnsafe(k,Ee,ge)?.toAffine();return je?a(je.x)===W:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:v,sign:J,verify:R,ProjectivePoint:l,Signature:A,utils:p}}function vy(n,e){let t=n.ORDER,r=dn;for(let m=t-Ue;m%Lr===dn;m/=Lr)r+=Ue;let s=r,i=Lr<<s-Ue-Ue,o=i*Lr,a=(t-Ue)/o,c=(a-Ue)/Lr,l=o-Ue,d=i,u=n.pow(e,a),h=n.pow(e,(a+Ue)/Lr),w=(m,f)=>{let b=u,A=n.pow(f,l),p=n.sqr(A);p=n.mul(p,f);let _=n.mul(m,p);_=n.pow(_,c),_=n.mul(_,A),A=n.mul(_,f),p=n.mul(_,m);let S=n.mul(p,A);_=n.pow(S,d);let v=n.eql(_,n.ONE);A=n.mul(p,h),_=n.mul(S,b),p=n.cmov(A,p,v),S=n.cmov(_,S,v);for(let x=s;x>Ue;x--){let z=x-Lr;z=Lr<<z-Ue;let I=n.pow(S,z),D=n.eql(I,n.ONE);A=n.mul(p,b),b=n.mul(b,b),I=n.mul(S,b),p=n.cmov(A,p,D),S=n.cmov(I,S,D)}return{isValid:v,value:p}};if(n.ORDER%Sy===iu){let m=(n.ORDER-iu)/Sy,f=n.sqrt(n.neg(e));w=(b,A)=>{let p=n.sqr(A),_=n.mul(b,A);p=n.mul(p,_);let S=n.pow(p,m);S=n.mul(S,_);let v=n.mul(S,f),x=n.mul(n.sqr(S),A),z=n.eql(x,b),I=n.cmov(v,S,z);return{isValid:z,value:I}}}return w}function H_(n,e){if(ao.validateField(n),!n.isValid(e.A)||!n.isValid(e.B)||!n.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=vy(n,e.Z);if(!n.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,l,d,u;s=n.sqr(r),s=n.mul(s,e.Z),i=n.sqr(s),i=n.add(i,s),o=n.add(i,n.ONE),o=n.mul(o,e.B),a=n.cmov(e.Z,n.neg(i),!n.eql(i,n.ZERO)),a=n.mul(a,e.A),i=n.sqr(o),l=n.sqr(a),c=n.mul(l,e.A),i=n.add(i,c),i=n.mul(i,o),l=n.mul(l,a),c=n.mul(l,e.B),i=n.add(i,c),d=n.mul(s,o);let{isValid:h,value:w}=t(i,l);u=n.mul(s,r),u=n.mul(u,w),d=n.cmov(d,o,h),u=n.cmov(u,w,h);let m=n.isOdd(r)===n.isOdd(u);return u=n.cmov(n.neg(u),u,m),d=n.div(d,a),{x:d,y:u}}}});var zy=U(ou=>{"use strict";y();g();Object.defineProperty(ou,"__esModule",{value:!0});ou.getHash=Iy;ou.createCurve=L_;var C_=yi(),Uy=pt(),K_=Od();function Iy(n){return{hash:n,hmac:(e,...t)=>(0,C_.hmac)(n,e,(0,Uy.concatBytes)(...t)),randomBytes:Uy.randomBytes}}function L_(n,e){let t=r=>(0,K_.weierstrass)({...n,...Iy(r)});return Object.freeze({...t(e),create:t})}});var Ny=U(js=>{"use strict";y();g();Object.defineProperty(js,"__esModule",{value:!0});js.expand_message_xmd=Py;js.expand_message_xof=Oy;js.hash_to_field=Nd;js.isogenyMap=F_;js.createHasher=k_;var j_=oo(),st=Ls(),D_=st.bytesToNumberBE;function jr(n,e){if(n<0||n>=1<<8*e)throw new Error(`bad I2OSP call: value=${n} length=${e}`);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=n&255,n>>>=8;return new Uint8Array(t)}function V_(n,e){let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n[r]^e[r];return t}function qd(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function Py(n,e,t,r){(0,st.abytes)(n),(0,st.abytes)(e),qd(t),e.length>255&&(e=r((0,st.concatBytes)((0,st.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:i}=r,o=Math.ceil(t/s);if(o>255)throw new Error("Invalid xmd length");let a=(0,st.concatBytes)(e,jr(e.length,1)),c=jr(0,i),l=jr(t,2),d=new Array(o),u=r((0,st.concatBytes)(c,n,l,jr(0,1),a));d[0]=r((0,st.concatBytes)(u,jr(1,1),a));for(let w=1;w<=o;w++){let m=[V_(u,d[w-1]),jr(w+1,1),a];d[w]=r((0,st.concatBytes)(...m))}return(0,st.concatBytes)(...d).slice(0,t)}function Oy(n,e,t,r,s){if((0,st.abytes)(n),(0,st.abytes)(e),qd(t),e.length>255){let i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,st.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(n).update(jr(t,2)).update(e).update(jr(e.length,1)).digest()}function Nd(n,e,t){(0,st.validateObject)(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:i,hash:o,expand:a,DST:c}=t;(0,st.abytes)(n),qd(e);let l=typeof c=="string"?(0,st.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+s)/8),h=e*i*u,w;if(a==="xmd")w=Py(n,l,h,o);else if(a==="xof")w=Oy(n,l,h,s,o);else if(a==="_internal_pass")w=n;else throw new Error('expand must be "xmd" or "xof"');let m=new Array(e);for(let f=0;f<e;f++){let b=new Array(i);for(let A=0;A<i;A++){let p=u*(A+f*i),_=w.subarray(p,p+u);b[A]=(0,j_.mod)(D_(_),r)}m[f]=b}return m}function F_(n,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[i,o,a,c]=t.map(l=>l.reduce((d,u)=>n.add(n.mul(d,r),u)));return r=n.div(i,o),s=n.mul(s,n.div(a,c)),{x:r,y:s}}}function k_(n,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let i=Nd(r,2,{...t,DST:t.DST,...s}),o=n.fromAffine(e(i[0])),a=n.fromAffine(e(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){let i=Nd(r,1,{...t,DST:t.encodeDST,...s}),o=n.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);let s=n.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}});var Fy=U(zt=>{"use strict";y();g();Object.defineProperty(zt,"__esModule",{value:!0});zt.encodeToCurve=zt.hashToCurve=zt.schnorr=zt.secp256k1=void 0;var au=Va(),G_=pt(),$_=zy(),Ry=Ny(),ke=oo(),it=Ls(),W_=Od(),du=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Hy=BigInt(1),uu=BigInt(2),qy=(n,e)=>(n+e/uu)/e;function Cy(n){let e=du,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,d=l*l*n%e,u=(0,ke.pow2)(d,t,e)*d%e,h=(0,ke.pow2)(u,t,e)*d%e,w=(0,ke.pow2)(h,uu,e)*l%e,m=(0,ke.pow2)(w,s,e)*w%e,f=(0,ke.pow2)(m,i,e)*m%e,b=(0,ke.pow2)(f,a,e)*f%e,A=(0,ke.pow2)(b,c,e)*b%e,p=(0,ke.pow2)(A,a,e)*f%e,_=(0,ke.pow2)(p,t,e)*d%e,S=(0,ke.pow2)(_,o,e)*m%e,v=(0,ke.pow2)(S,r,e)*l%e,x=(0,ke.pow2)(v,uu,e);if(!Dr.eql(Dr.sqr(x),n))throw new Error("Cannot find square root");return x}var Dr=(0,ke.Field)(du,void 0,void 0,{sqrt:Cy});zt.secp256k1=(0,$_.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Dr,n:cu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=cu,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Hy*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=qy(i*n,e),c=qy(-r*n,e),l=(0,ke.mod)(n-a*t-c*s,e),d=(0,ke.mod)(-a*r-c*i,e),u=l>o,h=d>o;if(u&&(l=e-l),h&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:u,k1:l,k2neg:h,k2:d}}}},au.sha256);var fu=BigInt(0),Ky=n=>typeof n=="bigint"&&fu<n&&n<du,X_=n=>typeof n=="bigint"&&fu<n&&n<cu,My={};function lu(n,...e){let t=My[n];if(t===void 0){let r=(0,au.sha256)(Uint8Array.from(n,s=>s.charCodeAt(0)));t=(0,it.concatBytes)(r,r),My[n]=t}return(0,au.sha256)((0,it.concatBytes)(t,...e))}var Cd=n=>n.toRawBytes(!0).slice(1),Rd=n=>(0,it.numberToBytesBE)(n,32),Md=n=>(0,ke.mod)(n,du),ma=n=>(0,ke.mod)(n,cu),Kd=zt.secp256k1.ProjectivePoint,Z_=(n,e,t)=>Kd.BASE.multiplyAndAddUnsafe(n,e,t);function Hd(n){let e=zt.secp256k1.utils.normPrivateKeyToScalar(n),t=Kd.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:ma(-e),bytes:Cd(t)}}function Ly(n){if(!Ky(n))throw new Error("bad x: need 0 < x < p");let e=Md(n*n),t=Md(e*n+BigInt(7)),r=Cy(t);r%uu!==fu&&(r=Md(-r));let s=new Kd(n,r,Hy);return s.assertValidity(),s}function jy(...n){return ma((0,it.bytesToNumberBE)(lu("BIP0340/challenge",...n)))}function Y_(n){return Hd(n).bytes}function Q_(n,e,t=(0,G_.randomBytes)(32)){let r=(0,it.ensureBytes)("message",n),{bytes:s,scalar:i}=Hd(e),o=(0,it.ensureBytes)("auxRand",t,32),a=Rd(i^(0,it.bytesToNumberBE)(lu("BIP0340/aux",o))),c=lu("BIP0340/nonce",a,s,r),l=ma((0,it.bytesToNumberBE)(c));if(l===fu)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=Hd(l),h=jy(d,s,r),w=new Uint8Array(64);if(w.set(d,0),w.set(Rd(ma(u+h*i)),32),!Dy(w,r,s))throw new Error("sign: Invalid signature produced");return w}function Dy(n,e,t){let r=(0,it.ensureBytes)("signature",n,64),s=(0,it.ensureBytes)("message",e),i=(0,it.ensureBytes)("publicKey",t,32);try{let o=Ly((0,it.bytesToNumberBE)(i)),a=(0,it.bytesToNumberBE)(r.subarray(0,32));if(!Ky(a))return!1;let c=(0,it.bytesToNumberBE)(r.subarray(32,64));if(!X_(c))return!1;let l=jy(Rd(a),Cd(o),s),d=Z_(o,c,ma(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}zt.schnorr=(()=>({getPublicKey:Y_,sign:Q_,verify:Dy,utils:{randomPrivateKey:zt.secp256k1.utils.randomPrivateKey,lift_x:Ly,pointToBytes:Cd,numberToBytesBE:it.numberToBytesBE,bytesToNumberBE:it.bytesToNumberBE,taggedHash:lu,mod:ke.mod}}))();var J_=(()=>(0,Ry.isogenyMap)(Dr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(e=>BigInt(e)))))(),eA=(()=>(0,W_.mapToCurveSimpleSWU)(Dr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Dr.create(BigInt("-11"))}))(),Vy=(()=>(0,Ry.createHasher)(zt.secp256k1.ProjectivePoint,n=>{let{x:e,y:t}=eA(Dr.create(n[0]));return J_(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Dr.ORDER,m:1,k:128,expand:"xmd",hash:au.sha256}))();zt.hashToCurve=(()=>Vy.hashToCurve)();zt.encodeToCurve=(()=>Vy.encodeToCurve)()});var Xy=U(er=>{"use strict";y();g();Object.defineProperty(er,"__esModule",{value:!0});er.HDKey=er.HARDENED_OFFSET=void 0;var ky=yi(),tA=cy(),Wy=Va(),Gy=Go(),wa=Ff(),Nn=pt(),Qn=Fy(),nA=oo(),rA=Vf(),hu=Qn.secp256k1.ProjectivePoint,Ld=(0,rA.createBase58check)(Wy.sha256);function $y(n){return BigInt(`0x${(0,Nn.bytesToHex)(n)}`)}function sA(n){return(0,Nn.hexToBytes)(n.toString(16).padStart(64,"0"))}var iA=(0,Nn.utf8ToBytes)("Bitcoin seed"),jd={private:76066276,public:76067358};er.HARDENED_OFFSET=2147483648;var oA=n=>(0,tA.ripemd160)((0,Wy.sha256)(n)),aA=n=>(0,Nn.createView)(n).getUint32(0,!1),yu=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);let e=new Uint8Array(4);return(0,Nn.createView)(e).setUint32(0,n,!1),e},Jn=class{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return aA(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw new Error("No private key");return Ld.encode(this.serialize(this.versions.private,(0,Nn.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ld.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=jd){if((0,wa.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let r=(0,ky.hmac)(Gy.sha512,iA,e);return new Jn({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=jd){let r=Ld.decode(e),s=(0,Nn.createView)(r),i=s.getUint32(0,!1),o={versions:t,depth:r[4],parentFingerprint:s.getUint32(5,!1),index:s.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),c=a[0]===0;if(i!==t[c?"private":"public"])throw new Error("Version mismatch");return c?new Jn({...o,privateKey:a.slice(1)}):new Jn({...o,publicKey:a})}static fromJSON(e){return Jn.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||jd,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Qn.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey=typeof e.privateKey=="bigint"?e.privateKey:$y(e.privateKey),this.privKeyBytes=sA(this.privKey),this.pubKey=Qn.secp256k1.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=hu.fromHex(e.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=oA(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let t=e.replace(/^[mM]'?\//,"").split("/"),r=this;for(let s of t){let i=/^(\d+)('?)$/.exec(s),o=i&&i[1];if(!i||i.length!==3||typeof o!="string")throw new Error(`Invalid child index: ${s}`);let a=+o;if(!Number.isSafeInteger(a)||a>=er.HARDENED_OFFSET)throw new Error("Invalid index");i[2]==="'"&&(a+=er.HARDENED_OFFSET),r=r.deriveChild(a)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=yu(e);if(e>=er.HARDENED_OFFSET){let a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=(0,Nn.concatBytes)(new Uint8Array([0]),a,t)}else t=(0,Nn.concatBytes)(this.pubKey,t);let r=(0,ky.hmac)(Gy.sha512,this.chainCode,t),s=$y(r.slice(0,32)),i=r.slice(32);if(!Qn.secp256k1.utils.isValidPrivateKey(s))throw new Error("Tweak bigger than curve order");let o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let a=(0,nA.mod)(this.privKey+s,Qn.secp256k1.CURVE.n);if(!Qn.secp256k1.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{let a=hu.fromHex(this.pubKey).add(hu.fromPrivateKey(s));if(a.equals(hu.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Jn(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,wa.bytes)(e,32),Qn.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,wa.bytes)(e,32),(0,wa.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=Qn.secp256k1.Signature.fromCompact(t)}catch{return!1}return Qn.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,wa.bytes)(t,33),(0,Nn.concatBytes)(yu(e),new Uint8Array([this.depth]),yu(this.parentFingerprint),yu(this.index),this.chainCode,t)}};er.HDKey=Jn});var Dd=U(Vr=>{"use strict";y();g();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.Secp256k1Signature=Vr.Secp256k1PrivateKey=Vr.Secp256k1PublicKey=void 0;var Yy=cr(),gu=sy(),cA=Xy(),uA=Yt(),_a=an(),Zy=Kc(),lA=Hs(),dA=Cs(),Qy=yd(),qn=class extends lA.PublicKey{constructor(e){super();let t=_a.Hex.fromHexInput(e);if(t.toUint8Array().length!==qn.LENGTH)throw new Error(`PublicKey length should be ${qn.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof Mn))return!1;let s=(0,Qy.convertSigningMessage)(t),i=_a.Hex.fromHexInput(s).toUint8Array(),o=(0,Yy.sha3_256)(i),a=r.toUint8Array();return gu.secp256k1.verify(a,o,this.key.toUint8Array(),{lowS:!0})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new qn(t)}static isPublicKey(e){return e instanceof qn}};Vr.Secp256k1PublicKey=qn;qn.LENGTH=65;var Jt=class extends uA.Serializable{constructor(e){super();let t=_a.Hex.fromHexInput(e);if(t.toUint8Array().length!==Jt.LENGTH)throw new Error(`PrivateKey length should be ${Jt.LENGTH}`);this.key=t}static generate(){let e=gu.secp256k1.utils.randomPrivateKey();return new Jt(e)}static fromDerivationPath(e,t){if(!(0,Zy.isValidBIP44Path)(e))throw new Error(`Invalid derivation path ${e}`);return Jt.fromDerivationPathInner(e,(0,Zy.mnemonicToSeed)(t))}static fromDerivationPathInner(e,t){let{privateKey:r}=cA.HDKey.fromMasterSeed(t).derive(e);if(r===null)throw new Error("Invalid key");return new Jt(r)}sign(e){let t=(0,Qy.convertSigningMessage)(e),r=_a.Hex.fromHexInput(t),s=(0,Yy.sha3_256)(r.toUint8Array()),i=gu.secp256k1.sign(s,this.key.toUint8Array(),{lowS:!0});return new Mn(i.toCompactRawBytes())}publicKey(){let e=gu.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new qn(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Jt(t)}static isPrivateKey(e){return e instanceof Jt}};Vr.Secp256k1PrivateKey=Jt;Jt.LENGTH=32;var Mn=class extends dA.Signature{constructor(e){super();let t=_a.Hex.fromHexInput(e);if(t.toUint8Array().length!==Mn.LENGTH)throw new Error(`Signature length should be ${Mn.LENGTH}, received ${t.toUint8Array().length}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Mn(t)}};Vr.Secp256k1Signature=Mn;Mn.LENGTH=64});var Vd=U(lo=>{"use strict";y();g();Object.defineProperty(lo,"__esModule",{value:!0});lo.AnySignature=lo.AnyPublicKey=void 0;var tr=Ve(),fA=Ji(),Aa=Ks(),hA=Hs(),Ba=Dd(),yA=Cs(),co=class extends hA.AccountPublicKey{constructor(e){if(super(),this.publicKey=e,e instanceof Aa.Ed25519PublicKey)this.variant=tr.AnyPublicKeyVariant.Ed25519;else if(e instanceof Ba.Secp256k1PublicKey)this.variant=tr.AnyPublicKeyVariant.Secp256k1;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:t,signature:r}=e;return r instanceof uo?this.publicKey.verifySignature({message:t,signature:r.signature}):!1}authKey(){return fA.AuthenticationKey.fromSchemeAndBytes({scheme:tr.SigningScheme.SingleKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case tr.AnyPublicKeyVariant.Ed25519:r=Aa.Ed25519PublicKey.deserialize(e);break;case tr.AnyPublicKeyVariant.Secp256k1:r=Ba.Secp256k1PublicKey.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${t}`)}return new co(r)}static isPublicKey(e){return e instanceof co}isEd25519(){return this.publicKey instanceof Aa.Ed25519PublicKey}isSecp256k1PublicKey(){return this.publicKey instanceof Ba.Secp256k1PublicKey}};lo.AnyPublicKey=co;var uo=class extends yA.Signature{constructor(e){if(super(),this.signature=e,e instanceof Aa.Ed25519Signature)this.variant=tr.AnySignatureVariant.Ed25519;else if(e instanceof Ba.Secp256k1Signature)this.variant=tr.AnySignatureVariant.Secp256k1;else throw new Error("Unsupported signature type")}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case tr.AnySignatureVariant.Ed25519:r=Aa.Ed25519Signature.deserialize(e);break;case tr.AnySignatureVariant.Secp256k1:r=Ba.Secp256k1Signature.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${t}`)}return new uo(r)}};lo.AnySignature=uo});var Fd=U(fo=>{"use strict";y();g();Object.defineProperty(fo,"__esModule",{value:!0});fo.MultiKeySignature=fo.MultiKey=void 0;var gA=Ve(),bA=Ji(),pA=Hs(),mA=Cs(),Fr=Vd();function wA(n){let e=n;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var Ta=class extends pA.AccountPublicKey{constructor(e){super();let{publicKeys:t,signaturesRequired:r}=e;if(r<1)throw new Error("The number of required signatures needs to be greater than 0");if(t.length<r)throw new Error(`Provided ${t.length} public keys is smaller than the ${r} required signatures`);this.publicKeys=t.map(s=>s instanceof Fr.AnyPublicKey?s:new Fr.AnyPublicKey(s)),this.signaturesRequired=r}verifySignature(e){throw new Error("not implemented")}authKey(){return bA.AuthenticationKey.fromSchemeAndBytes({scheme:gA.SigningScheme.MultiKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let t=e.deserializeVector(Fr.AnyPublicKey),r=e.deserializeU8();return new Ta({publicKeys:t,signaturesRequired:r})}createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach((o,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(i.has(o))throw new Error(`Duplicate bit ${o} detected.`);i.add(o);let c=Math.floor(o/8),l=s[c];l|=r>>o%8,s[c]=l}),s}getIndex(e){let t=e instanceof Fr.AnyPublicKey?e:new Fr.AnyPublicKey(e),r=this.publicKeys.findIndex(s=>s.toString()===t.toString());if(r!==-1)return r;throw new Error("Public key not found in MultiKey")}};fo.MultiKey=Ta;var ft=class extends mA.Signature{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>ft.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${ft.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t.map(i=>i instanceof Fr.AnySignature?i:new Fr.AnySignature(i)),!(r instanceof Uint8Array))this.bitmap=ft.createBitmap({bits:r});else{if(r.length!==ft.BITMAP_LEN)throw new Error(`"bitmap" length should be ${ft.BITMAP_LEN}`);this.bitmap=r}let s=this.bitmap.reduce((i,o)=>i+wA(o),0);if(s!==this.signatures.length)throw new Error(`Expecting ${s} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach(o=>{if(o>=ft.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${ft.MAX_SIGNATURES_SUPPORTED-1}.`);if(i.has(o))throw new Error("Duplicate bits detected.");i.add(o);let a=Math.floor(o/8),c=s[a];c|=r>>o%8,s[a]=c}),s}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let t=e.deserializeVector(Fr.AnySignature),r=e.deserializeBytes();return new ft({signatures:t,bitmap:r})}};fo.MultiKeySignature=ft;ft.BITMAP_LEN=4;ft.MAX_SIGNATURES_SUPPORTED=ft.BITMAP_LEN*8});var eg=U(Jy=>{"use strict";y();g();Object.defineProperty(Jy,"__esModule",{value:!0})});var kr=U(ht=>{"use strict";y();g();var _A=ht&&ht.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),nr=ht&&ht.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&_A(e,n,t)};Object.defineProperty(ht,"__esModule",{value:!0});nr(Ks(),ht);nr(Kc(),ht);nr(Fc(),ht);nr(Fd(),ht);nr(eg(),ht);nr(Hs(),ht);nr(Dd(),ht);nr(Cs(),ht);nr(Vd(),ht)});var $s=U(en=>{"use strict";y();g();Object.defineProperty(en,"__esModule",{value:!0});en.AccountAuthenticatorMultiKey=en.AccountAuthenticatorSingleKey=en.AccountAuthenticatorMultiEd25519=en.AccountAuthenticatorEd25519=en.AccountAuthenticator=void 0;var AA=Yt(),tg=kr(),ng=Ks(),rg=Fc(),sg=Fd(),Gr=Ve(),Ds=class extends AA.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case Gr.AccountAuthenticatorVariant.Ed25519:return Vs.load(e);case Gr.AccountAuthenticatorVariant.MultiEd25519:return Fs.load(e);case Gr.AccountAuthenticatorVariant.SingleKey:return ks.load(e);case Gr.AccountAuthenticatorVariant.MultiKey:return Gs.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}isEd25519(){return this instanceof Vs}isMultiEd25519(){return this instanceof Fs}isSingleKey(){return this instanceof ks}isMultiKey(){return this instanceof Gs}};en.AccountAuthenticator=Ds;var Vs=class extends Ds{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=ng.Ed25519PublicKey.deserialize(e),r=ng.Ed25519Signature.deserialize(e);return new Vs(t,r)}};en.AccountAuthenticatorEd25519=Vs;var Fs=class extends Ds{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=rg.MultiEd25519PublicKey.deserialize(e),r=rg.MultiEd25519Signature.deserialize(e);return new Fs(t,r)}};en.AccountAuthenticatorMultiEd25519=Fs;var ks=class extends Ds{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.SingleKey),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=tg.AnyPublicKey.deserialize(e),r=tg.AnySignature.deserialize(e);return new ks(t,r)}};en.AccountAuthenticatorSingleKey=ks;var Gs=class extends Ds{constructor(e,t){super(),this.public_keys=e,this.signatures=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.MultiKey),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let t=sg.MultiKey.deserialize(e),r=sg.MultiKeySignature.deserialize(e);return new Gs(t,r)}};en.AccountAuthenticatorMultiKey=Gs});var bu=U(Ne=>{"use strict";y();g();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.ProcessorType=Ne.RAW_TRANSACTION_WITH_DATA_SALT=Ne.RAW_TRANSACTION_SALT=Ne.APTOS_COIN=Ne.DEFAULT_TXN_TIMEOUT_SEC=Ne.DEFAULT_TXN_EXP_SEC_FROM_NOW=Ne.DEFAULT_MAX_GAS_AMOUNT=Ne.AptosApiType=void 0;var BA;(function(n){n.FULLNODE="Fullnode",n.INDEXER="Indexer",n.FAUCET="Faucet"})(BA=Ne.AptosApiType||(Ne.AptosApiType={}));Ne.DEFAULT_MAX_GAS_AMOUNT=2e5;Ne.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;Ne.DEFAULT_TXN_TIMEOUT_SEC=20;Ne.APTOS_COIN="0x1::aptos_coin::AptosCoin";Ne.RAW_TRANSACTION_SALT="APTOS::RawTransaction";Ne.RAW_TRANSACTION_WITH_DATA_SALT="APTOS::RawTransactionWithData";var TA;(function(n){n.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",n.DEFAULT="default_processor",n.EVENTS_PROCESSOR="events_processor",n.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",n.STAKE_PROCESSOR="stake_processor",n.TOKEN_V2_PROCESSOR="token_v2_processor",n.USER_TRANSACTION_PROCESSOR="user_transaction_processor"})(TA=Ne.ProcessorType||(Ne.ProcessorType={}))});var kd=U(pu=>{"use strict";y();g();Object.defineProperty(pu,"__esModule",{value:!0});pu.ChainId=void 0;var xA=Re(),xa=class extends xA.Serializable{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let t=e.deserializeU8();return new xa(t)}};pu.ChainId=xa});var ho=U(mu=>{"use strict";y();g();Object.defineProperty(mu,"__esModule",{value:!0});mu.Identifier=void 0;var SA=Re(),Sa=class extends SA.Serializable{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let t=e.deserializeStr();return new Sa(t)}};mu.Identifier=Sa});var Lt=U(fn=>{"use strict";y();g();var EA=fn&&fn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ea=fn&&fn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&EA(e,n,t)};Object.defineProperty(fn,"__esModule",{value:!0});Ea(Rs(),fn);Ea(Ji(),fn);Ea(xc(),fn);Ea(kr(),fn);Ea(an(),fn)});var Gd=U(wu=>{"use strict";y();g();Object.defineProperty(wu,"__esModule",{value:!0});wu.ModuleId=void 0;var vA=Re(),ig=Lt(),og=ho(),yo=class extends vA.Serializable{constructor(e,t){super(),this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new yo(ig.AccountAddress.fromString(t[0]),new og.Identifier(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=ig.AccountAddress.deserialize(e),r=og.Identifier.deserialize(e);return new yo(t,r)}};wu.ModuleId=yo});var Ua=U(ne=>{"use strict";y();g();Object.defineProperty(ne,"__esModule",{value:!0});ne.objectStructTag=ne.optionStructTag=ne.stringStructTag=ne.aptosCoinStructTag=ne.StructTag=ne.TypeTagStruct=ne.TypeTagVector=ne.TypeTagGeneric=ne.TypeTagReference=ne.TypeTagSigner=ne.TypeTagAddress=ne.TypeTagU256=ne.TypeTagU128=ne.TypeTagU64=ne.TypeTagU32=ne.TypeTagU16=ne.TypeTagU8=ne.TypeTagBool=ne.TypeTag=void 0;var ag=Re(),$r=Lt(),Rn=ho(),me=Ve(),Ke=class extends ag.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case me.TypeTagVariants.Bool:return Ws.load(e);case me.TypeTagVariants.U8:return Wr.load(e);case me.TypeTagVariants.U64:return Ys.load(e);case me.TypeTagVariants.U128:return Qs.load(e);case me.TypeTagVariants.Address:return ei.load(e);case me.TypeTagVariants.Signer:return ti.load(e);case me.TypeTagVariants.Vector:return Xr.load(e);case me.TypeTagVariants.Struct:return ri.load(e);case me.TypeTagVariants.U16:return Xs.load(e);case me.TypeTagVariants.U32:return Zs.load(e);case me.TypeTagVariants.U256:return Js.load(e);case me.TypeTagVariants.Generic:return ni.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}isBool(){return this instanceof Ws}isAddress(){return this instanceof ei}isGeneric(){return this instanceof ni}isSigner(){return this instanceof ti}isVector(){return this instanceof Xr}isStruct(){return this instanceof ri}isU8(){return this instanceof Wr}isU16(){return this instanceof Xs}isU32(){return this instanceof Zs}isU64(){return this instanceof Ys}isU128(){return this instanceof Qs}isU256(){return this instanceof Js}};ne.TypeTag=Ke;var Ws=class extends Ke{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Bool)}static load(e){return new Ws}};ne.TypeTagBool=Ws;var Wr=class extends Ke{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U8)}static load(e){return new Wr}};ne.TypeTagU8=Wr;var Xs=class extends Ke{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U16)}static load(e){return new Xs}};ne.TypeTagU16=Xs;var Zs=class extends Ke{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U32)}static load(e){return new Zs}};ne.TypeTagU32=Zs;var Ys=class extends Ke{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U64)}static load(e){return new Ys}};ne.TypeTagU64=Ys;var Qs=class extends Ke{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U128)}static load(e){return new Qs}};ne.TypeTagU128=Qs;var Js=class extends Ke{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.U256)}static load(e){return new Js}};ne.TypeTagU256=Js;var ei=class extends Ke{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Address)}static load(e){return new ei}};ne.TypeTagAddress=ei;var ti=class extends Ke{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Signer)}static load(e){return new ti}};ne.TypeTagSigner=ti;var va=class extends Ke{toString(){return`&${this.value.toString()}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Reference)}static load(e){let t=Ke.deserialize(e);return new va(t)}};ne.TypeTagReference=va;var ni=class extends Ke{toString(){return`T${this.value}`}constructor(e){if(super(),this.value=e,e<0)throw new Error("Generic type parameter index cannot be negative")}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Generic),e.serializeU32(this.value)}static load(e){let t=e.deserializeU32();return new ni(t)}};ne.TypeTagGeneric=ni;var Xr=class extends Ke{toString(){return`vector<${this.value.toString()}>`}constructor(e){super(),this.value=e}static u8(){return new Xr(new Wr)}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Vector),this.value.serialize(e)}static load(e){let t=Ke.deserialize(e);return new Xr(t)}};ne.TypeTagVector=Xr;var ri=class extends Ke{toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(t=>t.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(me.TypeTagVariants.Struct),this.value.serialize(e)}static load(e){let t=Hn.deserialize(e);return new ri(t)}isTypeTag(e,t,r){return this.value.moduleName.identifier===t&&this.value.name.identifier===r&&this.value.address.equals(e)}isString(){return this.isTypeTag($r.AccountAddress.ONE,"string","String")}isOption(){return this.isTypeTag($r.AccountAddress.ONE,"option","Option")}isObject(){return this.isTypeTag($r.AccountAddress.ONE,"object","Object")}};ne.TypeTagStruct=ri;var Hn=class extends ag.Serializable{constructor(e,t,r,s){super(),this.address=e,this.moduleName=t,this.name=r,this.typeArgs=s}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let t=$r.AccountAddress.deserialize(e),r=Rn.Identifier.deserialize(e),s=Rn.Identifier.deserialize(e),i=e.deserializeVector(Ke);return new Hn(t,r,s,i)}};ne.StructTag=Hn;function UA(){return new Hn($r.AccountAddress.ONE,new Rn.Identifier("aptos_coin"),new Rn.Identifier("AptosCoin"),[])}ne.aptosCoinStructTag=UA;function IA(){return new Hn($r.AccountAddress.ONE,new Rn.Identifier("string"),new Rn.Identifier("String"),[])}ne.stringStructTag=IA;function zA(n){return new Hn($r.AccountAddress.ONE,new Rn.Identifier("option"),new Rn.Identifier("Option"),[n])}ne.optionStructTag=zA;function PA(n){return new Hn($r.AccountAddress.ONE,new Rn.Identifier("object"),new Rn.Identifier("Object"),[n])}ne.objectStructTag=PA});var $d=U(qe=>{"use strict";y();g();Object.defineProperty(qe,"__esModule",{value:!0});qe.MultiSigTransactionPayload=qe.MultiSig=qe.Script=qe.EntryFunction=qe.TransactionPayloadMultiSig=qe.TransactionPayloadEntryFunction=qe.TransactionPayloadScript=qe.TransactionPayload=qe.deserializeFromScriptArgument=void 0;var lg=Re(),OA=Cl(),Zr=Uc(),NA=Ll(),dg=Lt(),cg=ho(),ug=Gd(),yt=Ve(),fg=Ua();function hg(n){let e=n.deserializeUleb128AsU32();switch(e){case yt.ScriptTransactionArgumentVariants.U8:return Zr.U8.deserialize(n);case yt.ScriptTransactionArgumentVariants.U64:return Zr.U64.deserialize(n);case yt.ScriptTransactionArgumentVariants.U128:return Zr.U128.deserialize(n);case yt.ScriptTransactionArgumentVariants.Address:return dg.AccountAddress.deserialize(n);case yt.ScriptTransactionArgumentVariants.U8Vector:return NA.MoveVector.deserialize(n,Zr.U8);case yt.ScriptTransactionArgumentVariants.Bool:return Zr.Bool.deserialize(n);case yt.ScriptTransactionArgumentVariants.U16:return Zr.U16.deserialize(n);case yt.ScriptTransactionArgumentVariants.U32:return Zr.U32.deserialize(n);case yt.ScriptTransactionArgumentVariants.U256:return Zr.U256.deserialize(n);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}qe.deserializeFromScriptArgument=hg;var go=class extends lg.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case yt.TransactionPayloadVariants.Script:return bo.load(e);case yt.TransactionPayloadVariants.EntryFunction:return po.load(e);case yt.TransactionPayloadVariants.Multisig:return mo.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};qe.TransactionPayload=go;var bo=class extends go{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(yt.TransactionPayloadVariants.Script),this.script.serialize(e)}static load(e){let t=wo.deserialize(e);return new bo(t)}};qe.TransactionPayloadScript=bo;var po=class extends go{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(yt.TransactionPayloadVariants.EntryFunction),this.entryFunction.serialize(e)}static load(e){let t=Yr.deserialize(e);return new po(t)}};qe.TransactionPayloadEntryFunction=po;var mo=class extends go{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(yt.TransactionPayloadVariants.Multisig),this.multiSig.serialize(e)}static load(e){let t=_o.deserialize(e);return new mo(t)}};qe.TransactionPayloadMultiSig=mo;var Yr=class{constructor(e,t,r,s){this.module_name=e,this.function_name=t,this.type_args=r,this.args=s}static build(e,t,r,s){return new Yr(ug.ModuleId.fromStr(e),new cg.Identifier(t),r,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForEntryFunction(e)})}static deserialize(e){let t=ug.ModuleId.deserialize(e),r=cg.Identifier.deserialize(e),s=e.deserializeVector(fg.TypeTag),i=e.deserializeUleb128AsU32(),o=new Array;for(let a=0;a<i;a+=1){let c=e.deserializeUleb128AsU32(),l=OA.EntryFunctionBytes.deserialize(e,c);o.push(l)}return new Yr(t,r,s,o)}};qe.EntryFunction=Yr;var wo=class{constructor(e,t,r){this.bytecode=e,this.type_args=t,this.args=r}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForScriptFunction(e)})}static deserialize(e){let t=e.deserializeBytes(),r=e.deserializeVector(fg.TypeTag),s=e.deserializeUleb128AsU32(),i=new Array;for(let o=0;o<s;o+=1){let a=hg(e);i.push(a)}return new wo(t,r,i)}};qe.Script=wo;var _o=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=dg.AccountAddress.deserialize(e),r=e.deserializeBool(),s;return r&&(s=Ao.deserialize(e)),new _o(t,s)}};qe.MultiSig=_o;var Ao=class extends lg.Serializable{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new Ao(Yr.deserialize(e))}};qe.MultiSigTransactionPayload=Ao});var za=U(Cn=>{"use strict";y();g();Object.defineProperty(Cn,"__esModule",{value:!0});Cn.FeePayerRawTransaction=Cn.MultiAgentRawTransaction=Cn.RawTransactionWithData=Cn.RawTransaction=void 0;var yg=Re(),qA=kd(),_u=Lt(),MA=$d(),Au=Ve(),si=class extends yg.Serializable{constructor(e,t,r,s,i,o,a){super(),this.sender=e,this.sequence_number=t,this.payload=r,this.max_gas_amount=s,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let t=_u.AccountAddress.deserialize(e),r=e.deserializeU64(),s=MA.TransactionPayload.deserialize(e),i=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=qA.ChainId.deserialize(e);return new si(t,r,s,i,o,a,c)}};Cn.RawTransaction=si;var Ia=class extends yg.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case Au.TransactionVariants.MultiAgentTransaction:return Bo.load(e);case Au.TransactionVariants.FeePayerTransaction:return To.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}};Cn.RawTransactionWithData=Ia;var Bo=class extends Ia{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(Au.TransactionVariants.MultiAgentTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let t=si.deserialize(e),r=e.deserializeVector(_u.AccountAddress);return new Bo(t,r)}};Cn.MultiAgentRawTransaction=Bo;var To=class extends Ia{constructor(e,t,r){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(Au.TransactionVariants.FeePayerTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let t=si.deserialize(e),r=e.deserializeVector(_u.AccountAddress),s=_u.AccountAddress.deserialize(e);return new To(t,r,s)}};Cn.FeePayerRawTransaction=To});var Xd=U(Tu=>{"use strict";y();g();Object.defineProperty(Tu,"__esModule",{value:!0});Tu.RotationProofChallenge=void 0;var RA=Re(),HA=Rs(),Bu=Yt(),Wd=class extends RA.Serializable{constructor(e){super(),this.accountAddress=HA.AccountAddress.ONE,this.moduleName=new Bu.MoveString("account"),this.structName=new Bu.MoveString("RotationProofChallenge"),this.sequenceNumber=new Bu.U64(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=Bu.MoveVector.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}};Tu.RotationProofChallenge=Wd});var xu=U(Pt=>{"use strict";y();g();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.TransactionAuthenticatorSingleSender=Pt.TransactionAuthenticatorFeePayer=Pt.TransactionAuthenticatorMultiAgent=Pt.TransactionAuthenticatorMultiEd25519=Pt.TransactionAuthenticatorEd25519=Pt.TransactionAuthenticator=void 0;var xo=$s(),CA=Yt(),Zd=Lt(),gg=Ks(),bg=Fc(),Kn=Ve(),Qr=class extends CA.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case Kn.TransactionAuthenticatorVariant.Ed25519:return So.load(e);case Kn.TransactionAuthenticatorVariant.MultiEd25519:return Eo.load(e);case Kn.TransactionAuthenticatorVariant.MultiAgent:return vo.load(e);case Kn.TransactionAuthenticatorVariant.FeePayer:return Uo.load(e);case Kn.TransactionAuthenticatorVariant.SingleSender:return Io.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}};Pt.TransactionAuthenticator=Qr;var So=class extends Qr{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Kn.TransactionAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=gg.Ed25519PublicKey.deserialize(e),r=gg.Ed25519Signature.deserialize(e);return new So(t,r)}};Pt.TransactionAuthenticatorEd25519=So;var Eo=class extends Qr{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Kn.TransactionAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=bg.MultiEd25519PublicKey.deserialize(e),r=bg.MultiEd25519Signature.deserialize(e);return new Eo(t,r)}};Pt.TransactionAuthenticatorMultiEd25519=Eo;var vo=class extends Qr{constructor(e,t,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(Kn.TransactionAuthenticatorVariant.MultiAgent),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let t=xo.AccountAuthenticator.deserialize(e),r=e.deserializeVector(Zd.AccountAddress),s=e.deserializeVector(xo.AccountAuthenticator);return new vo(t,r,s)}};Pt.TransactionAuthenticatorMultiAgent=vo;var Uo=class extends Qr{constructor(e,t,r,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r,this.fee_payer=s}serialize(e){e.serializeU32AsUleb128(Kn.TransactionAuthenticatorVariant.FeePayer),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=xo.AccountAuthenticator.deserialize(e),r=e.deserializeVector(Zd.AccountAddress),s=e.deserializeVector(xo.AccountAuthenticator),i=Zd.AccountAddress.deserialize(e),o=xo.AccountAuthenticator.deserialize(e),a={address:i,authenticator:o};return new Uo(t,r,s,a)}};Pt.TransactionAuthenticatorFeePayer=Uo;var Io=class extends Qr{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(Kn.TransactionAuthenticatorVariant.SingleSender),this.sender.serialize(e)}static load(e){let t=xo.AccountAuthenticator.deserialize(e);return new Io(t)}};Pt.TransactionAuthenticatorSingleSender=Io});var Yd=U(Su=>{"use strict";y();g();Object.defineProperty(Su,"__esModule",{value:!0});Su.SignedTransaction=void 0;var KA=xu(),LA=Re(),jA=za(),Pa=class extends LA.Serializable{constructor(e,t){super(),this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=jA.RawTransaction.deserialize(e),r=KA.TransactionAuthenticator.deserialize(e);return new Pa(t,r)}};Su.SignedTransaction=Pa});var mg=U(pg=>{"use strict";y();g();Object.defineProperty(pg,"__esModule",{value:!0})});var Qd=U(Eu=>{"use strict";y();g();Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SimpleTransaction=void 0;var DA=Re(),VA=Lt(),FA=za(),Oa=class extends DA.Serializable{constructor(e,t){super(),this.rawTransaction=e,this.feePayerAddress=t}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=FA.RawTransaction.deserialize(e),r=e.deserializeBool(),s;return r&&(s=VA.AccountAddress.deserialize(e)),new Oa(t,s)}};Eu.SimpleTransaction=Oa});var Jd=U(vu=>{"use strict";y();g();Object.defineProperty(vu,"__esModule",{value:!0});vu.MultiAgentTransaction=void 0;var kA=Re(),wg=Lt(),GA=za(),Na=class extends kA.Serializable{constructor(e,t,r){super(),this.rawTransaction=e,this.feePayerAddress=r,this.secondarySignerAddresses=t}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=GA.RawTransaction.deserialize(e),r=e.deserializeVector(wg.AccountAddress),s=e.deserializeBool(),i;return s&&(i=wg.AccountAddress.deserialize(e)),new Na(t,r,i)}};vu.MultiAgentTransaction=Na});var Uu=U(ot=>{"use strict";y();g();var $A=ot&&ot.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ln=ot&&ot.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$A(e,n,t)};Object.defineProperty(ot,"__esModule",{value:!0});Ln(kd(),ot);Ln(ho(),ot);Ln(Gd(),ot);Ln(za(),ot);Ln(Xd(),ot);Ln(Yd(),ot);Ln(mg(),ot);Ln($d(),ot);Ln(Qd(),ot);Ln(Jd(),ot)});var Iu=U(jn=>{"use strict";y();g();Object.defineProperty(jn,"__esModule",{value:!0});jn.generateSigningMessageForTransaction=jn.generateSigningMessageForSerializable=jn.generateSigningMessage=jn.deriveTransactionType=void 0;var WA=cr(),ef=bu(),_g=Uu();function Ag(n){return n.feePayerAddress?new _g.FeePayerRawTransaction(n.rawTransaction,n.secondarySignerAddresses??[],n.feePayerAddress):n.secondarySignerAddresses?new _g.MultiAgentRawTransaction(n.rawTransaction,n.secondarySignerAddresses):n.rawTransaction}jn.deriveTransactionType=Ag;function qa(n,e){let t=WA.sha3_256.create();if(!e.startsWith("APTOS::"))throw new Error(`Domain separator needs to start with 'APTOS::'.  Provided - ${e}`);t.update(e);let r=t.digest(),s=n,i=new Uint8Array(r.length+s.length);return i.set(r),i.set(s,r.length),i}jn.generateSigningMessage=qa;function XA(n){return qa(n.bcsToBytes(),`APTOS::${n.constructor.name}`)}jn.generateSigningMessageForSerializable=XA;function ZA(n){let e=Ag(n);return n.feePayerAddress||n.secondarySignerAddresses?qa(e.bcsToBytes(),ef.RAW_TRANSACTION_WITH_DATA_SALT):qa(e.bcsToBytes(),ef.RAW_TRANSACTION_SALT)}jn.generateSigningMessageForTransaction=ZA});var tf=U(zu=>{"use strict";y();g();Object.defineProperty(zu,"__esModule",{value:!0});zu.Ed25519Account=void 0;var Bg=$s(),YA=Ve(),QA=Rs(),Tg=kr(),JA=Iu(),zo=class{constructor(e){this.signingScheme=YA.SigningScheme.Ed25519;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=t.publicKey(),this.accountAddress=r?QA.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(){let e=Tg.Ed25519PrivateKey.generate();return new zo({privateKey:e})}static fromDerivationPath(e){let{path:t,mnemonic:r}=e,s=Tg.Ed25519PrivateKey.fromDerivationPath(t,r);return new zo({privateKey:s})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new Bg.AccountAuthenticatorEd25519(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new Bg.AccountAuthenticatorEd25519(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign((0,JA.generateSigningMessageForTransaction)(e))}};zu.Ed25519Account=zo});var nf=U(Pu=>{"use strict";y();g();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.SingleKeyAccount=void 0;var xg=$s(),ii=Ve(),eB=Rs(),Po=kr(),tB=Iu(),Oo=class{constructor(e){this.signingScheme=ii.SigningScheme.SingleKey;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=new Po.AnyPublicKey(t.publicKey()),this.accountAddress=r?eB.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(e={}){let{scheme:t=ii.SigningSchemeInput.Ed25519}=e,r;switch(t){case ii.SigningSchemeInput.Ed25519:r=Po.Ed25519PrivateKey.generate();break;case ii.SigningSchemeInput.Secp256k1Ecdsa:r=Po.Secp256k1PrivateKey.generate();break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new Oo({privateKey:r})}static fromDerivationPath(e){let{scheme:t=ii.SigningSchemeInput.Ed25519,path:r,mnemonic:s}=e,i;switch(t){case ii.SigningSchemeInput.Ed25519:i=Po.Ed25519PrivateKey.fromDerivationPath(r,s);break;case ii.SigningSchemeInput.Secp256k1Ecdsa:i=Po.Secp256k1PrivateKey.fromDerivationPath(r,s);break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new Oo({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new xg.AccountAuthenticatorSingleKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new xg.AccountAuthenticatorSingleKey(this.publicKey,this.signTransaction(e))}sign(e){return new Po.AnySignature(this.privateKey.sign(e))}signTransaction(e){return this.sign((0,tB.generateSigningMessageForTransaction)(e))}};Pu.SingleKeyAccount=Oo});var Sg=U(Nu=>{"use strict";y();g();Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Account=void 0;var Ou=Ve(),nB=kr(),rf=tf(),sf=nf(),of=class{static generate(e={}){let{scheme:t=Ou.SigningSchemeInput.Ed25519,legacy:r=!0}=e;return t===Ou.SigningSchemeInput.Ed25519&&r?rf.Ed25519Account.generate():sf.SingleKeyAccount.generate({scheme:t})}static fromPrivateKey(e){let{privateKey:t,address:r,legacy:s=!0}=e;return t instanceof nB.Ed25519PrivateKey&&s?new rf.Ed25519Account({privateKey:t,address:r}):new sf.SingleKeyAccount({privateKey:t,address:r})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:t=Ou.SigningSchemeInput.Ed25519,mnemonic:r,path:s,legacy:i=!0}=e;return t===Ou.SigningSchemeInput.Ed25519&&i?rf.Ed25519Account.fromDerivationPath({mnemonic:r,path:s}):sf.SingleKeyAccount.fromDerivationPath({scheme:t,mnemonic:r,path:s})}static authKey(e){let{publicKey:t}=e;return t.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}};Nu.Account=of});var vg=U(qu=>{"use strict";y();g();Object.defineProperty(qu,"__esModule",{value:!0});qu.MultiKeyAccount=void 0;var af=kr(),rB=Ve(),Eg=$s(),No=class{constructor(e){let{multiKey:t,signers:r}=e;this.publicKey=t,this.signingScheme=rB.SigningScheme.MultiKey,this.accountAddress=this.publicKey.authKey().derivedAddress();let s=[];for(let o of r)s.push(this.publicKey.getIndex(o.publicKey));let i=r.map((o,a)=>[o,s[a]]);i.sort((o,a)=>o[1]-a[1]),this.signers=i.map(o=>o[0]),this.signerIndicies=i.map(o=>o[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:s})}static fromPublicKeysAndSigners(e){let{publicKeys:t,signaturesRequired:r,signers:s}=e,i=new af.MultiKey({publicKeys:t,signaturesRequired:r});return new No({multiKey:i,signers:s})}static isMultiKeySigner(e){return e instanceof No}signWithAuthenticator(e){return new Eg.AccountAuthenticatorMultiKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Eg.AccountAuthenticatorMultiKey(this.publicKey,this.signTransaction(e))}sign(e){let t=[];for(let r of this.signers)t.push(r.sign(e));return new af.MultiKeySignature({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){let t=[];for(let r of this.signers)t.push(r.signTransaction(e));return new af.MultiKeySignature({signatures:t,bitmap:this.signaturesBitmap})}verifySignature(e){let{message:t,signature:r}=e;if(!this.signerIndicies.every((i,o)=>o===0||i>=this.signerIndicies[o-1]))return!1;for(let i=0;i<r.signatures.length;i+=1){let o=r.signatures[i];if(!this.publicKey.publicKeys[this.signerIndicies[i]].verifySignature({message:t,signature:o}))return!1}return!0}};qu.MultiKeyAccount=No});var cf=U(Dn=>{"use strict";y();g();var sB=Dn&&Dn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Mu=Dn&&Dn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sB(e,n,t)};Object.defineProperty(Dn,"__esModule",{value:!0});Mu(tf(),Dn);Mu(Sg(),Dn);Mu(nf(),Dn);Mu(vg(),Dn)});var Ru=U(rr=>{"use strict";y();g();Object.defineProperty(rr,"__esModule",{value:!0});rr.NetworkToNetworkName=rr.NetworkToChainId=rr.Network=void 0;var qo;(function(n){n.MAINNET="mainnet",n.TESTNET="testnet",n.DEVNET="devnet",n.LOCAL="local",n.CUSTOM="custom"})(qo=rr.Network||(rr.Network={}));rr.NetworkToChainId={mainnet:1,testnet:2};rr.NetworkToNetworkName={mainnet:qo.MAINNET,testnet:qo.TESTNET,devnet:qo.DEVNET,local:qo.LOCAL,custom:qo.CUSTOM}});var Ug=U(Hu=>{"use strict";y();g();Object.defineProperty(Hu,"__esModule",{value:!0});Hu.AptosConfig=void 0;var iB=Ru(),uf=class{constructor(e){this.network=e?.network??iB.Network.DEVNET,this.moveModule=e?.moveModule}};Hu.AptosConfig=uf});var lf=U(Cu=>{"use strict";y();g();Object.defineProperty(Cu,"__esModule",{value:!0});Cu.normalizeBundle=void 0;var oB=Yt();function aB(n,e){let t=e.bcsToBytes(),r=new oB.Deserializer(t);return n.deserialize(r)}Cu.normalizeBundle=aB});var df=U(sr=>{"use strict";y();g();Object.defineProperty(sr,"__esModule",{value:!0});sr.parseTypeTag=sr.TypeTagParserError=sr.TypeTagParserErrorType=void 0;var gt=Ua(),cB=Lt(),Ig=ho();function zg(n){return!!n.match(/^[_a-zA-Z0-9]+$/)}function Pg(n){return!!n.match(/\s/)}function uB(n){return!!n.match(/^T[0-9]+$/)}function lB(n,e){let t=e;for(;t<n.length;t+=1){let r=n[t];if(!Pg(r))break}return t}var Se;(function(n){n.InvalidTypeTag="unknown type",n.UnexpectedGenericType="unexpected generic type",n.UnexpectedTypeArgumentClose="unexpected '>'",n.UnexpectedWhitespaceCharacter="unexpected whitespace character",n.UnexpectedComma="unexpected ','",n.TypeArgumentCountMismatch="type argument count doesn't match expected amount",n.MissingTypeArgumentClose="no matching '>' for '<'",n.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",n.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",n.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",n.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",n.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters"})(Se=sr.TypeTagParserErrorType||(sr.TypeTagParserErrorType={}));var we=class extends Error{constructor(e,t){super(`Failed to parse typeTag '${e}', ${t}`)}};sr.TypeTagParserError=we;function dB(n,e){let t=e?.allowGenerics??!1,r=[],s=[],i=[],o=0,a="",c=1;for(;o<n.length;){let l=n[o];if(l==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:i}),a="",i=[],c=1;else if(l===">"){if(a!==""){let m=Ku(a,s,t);i.push(m)}let d=r.pop();if(d===void 0)throw new we(n,Se.UnexpectedTypeArgumentClose);if(c!==i.length)throw new we(n,Se.TypeArgumentCountMismatch);let{savedStr:u,savedTypes:h,savedExpectedTypes:w}=d;s=i,i=h,a=u,c=w}else if(l===","){if(a.length!==0){let d=Ku(a,s,t);s=[],i.push(d),a="",c+=1}}else if(Pg(l)){let d=!1;if(a.length!==0){let h=Ku(a,s,t);s=[],i.push(h),a="",d=!0}o=lB(n,o);let u=n[o];if(o<n.length&&d&&u!==","&&u!==">")throw new we(n,Se.UnexpectedWhitespaceCharacter);continue}else a+=l;o+=1}if(r.length>0)throw new we(n,Se.MissingTypeArgumentClose);switch(i.length){case 0:return Ku(a,s,t);case 1:if(a==="")return i[0];throw new we(n,Se.UnexpectedComma);default:throw new we(n,Se.UnexpectedWhitespaceCharacter)}}sr.parseTypeTag=dB;function Ku(n,e,t){switch(n){case"&signer":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagReference(new gt.TypeTagSigner);case"signer":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagSigner;case"bool":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagBool;case"address":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagAddress;case"u8":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU8;case"u16":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU16;case"u32":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU32;case"u64":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU64;case"u128":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU128;case"u256":if(e.length>0)throw new we(n,Se.UnexpectedPrimitiveTypeArguments);return new gt.TypeTagU256;case"vector":if(e.length!==1)throw new we(n,Se.UnexpectedVectorTypeArgumentCount);return new gt.TypeTagVector(e[0]);default:if(uB(n)){if(t)return new gt.TypeTagGeneric(Number(n.split("T")[1]));throw new we(n,Se.UnexpectedGenericType)}if(!n.match(/:/))throw new we(n,Se.InvalidTypeTag);let r=n.split("::");if(r.length!==3)throw new we(n,Se.UnexpectedStructFormat);if(!zg(r[1]))throw new we(n,Se.InvalidModuleNameCharacter);if(!zg(r[2]))throw new we(n,Se.InvalidStructNameCharacter);return new gt.TypeTagStruct(new gt.StructTag(cB.AccountAddress.fromString(r[0]),new Ig.Identifier(r[1]),new Ig.Identifier(r[2]),e))}}});var Lu=U(Y=>{"use strict";y();g();Object.defineProperty(Y,"__esModule",{value:!0});Y.getFunctionParts=Y.findFirstNonSignerArg=Y.throwTypeMismatch=Y.isScriptDataInput=Y.isBcsU256=Y.isBcsU128=Y.isBcsU64=Y.isBcsU32=Y.isBcsU16=Y.isBcsU8=Y.isBcsFixedBytes=Y.isBcsString=Y.isBcsAddress=Y.isBcsBool=Y.isEncodedEntryFunctionArgument=Y.isNull=Y.isLargeNumber=Y.convertNumber=Y.isNumber=Y.isString=Y.isBool=void 0;var hn=Yt(),fB=Lt();function hB(n){return typeof n=="boolean"}Y.isBool=hB;function Og(n){return typeof n=="string"}Y.isString=Og;function Ng(n){return typeof n=="number"}Y.isNumber=Ng;function yB(n){if(Ng(n))return n;if(Og(n)&&n!=="")return Number.parseInt(n,10)}Y.convertNumber=yB;function gB(n){return typeof n=="number"||typeof n=="bigint"||typeof n=="string"}Y.isLargeNumber=gB;function bB(n){return n==null}Y.isNull=bB;function pB(n){return qg(n)||Cg(n)||Kg(n)||Lg(n)||jg(n)||Dg(n)||Vg(n)||Mg(n)||Rg(n)||Hg(n)||n instanceof hn.MoveVector||n instanceof hn.MoveOption}Y.isEncodedEntryFunctionArgument=pB;function qg(n){return n instanceof hn.Bool}Y.isBcsBool=qg;function Mg(n){return n instanceof fB.AccountAddress}Y.isBcsAddress=Mg;function Rg(n){return n instanceof hn.MoveString}Y.isBcsString=Rg;function Hg(n){return n instanceof hn.FixedBytes}Y.isBcsFixedBytes=Hg;function Cg(n){return n instanceof hn.U8}Y.isBcsU8=Cg;function Kg(n){return n instanceof hn.U16}Y.isBcsU16=Kg;function Lg(n){return n instanceof hn.U32}Y.isBcsU32=Lg;function jg(n){return n instanceof hn.U64}Y.isBcsU64=jg;function Dg(n){return n instanceof hn.U128}Y.isBcsU128=Dg;function Vg(n){return n instanceof hn.U256}Y.isBcsU256=Vg;function mB(n){return"bytecode"in n}Y.isScriptDataInput=mB;function wB(n,e){throw new Error(`Type mismatch for argument ${e}, expected '${n}'`)}Y.throwTypeMismatch=wB;function _B(n){let e=n.params.findIndex(t=>t!=="signer"&&t!=="&signer");return e<0?n.params.length:e}Y.findFirstNonSignerArg=_B;function AB(n){let e=n.split("::");if(e.length!==3)throw new Error(`Invalid function ${n}`);let t=e[0],r=e[1],s=e[2];return{moduleAddress:t,moduleName:r,functionName:s}}Y.getFunctionParts=AB});var hf=U(Vn=>{"use strict";y();g();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.checkOrConvertArgument=Vn.convertArgument=Vn.fetchEntryFunctionAbi=Vn.standardizeTypeTags=void 0;var kg=df(),BB=Ua(),Ge=Yt(),Fg=Lt(),$=Lu();function TB(n){return n?.map(e=>(0,$.isString)(e)?(0,kg.parseTypeTag)(e):e)??[]}Vn.standardizeTypeTags=TB;async function xB(n,e,t,r){let i=JSON.parse(r?.moveModule)?.abi?.exposed_functions.find(c=>c.name===t);if(!i)throw new Error(`Could not find entry function ABI for '${n}::${e}::${t}'`);if(!i.is_entry)throw new Error(`'${n}::${e}::${t}' is not an entry function`);let o=(0,$.findFirstNonSignerArg)(i),a=[];for(let c=o;c<i.params.length;c+=1)a.push((0,kg.parseTypeTag)(i.params[c],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:a}}Vn.fetchEntryFunctionAbi=xB;function SB(n,e,t,r,s){if(r>=e.parameters.length)throw new Error(`Too many arguments for '${n}', expected ${e.parameters.length}`);let i=e.parameters[r];return Ma(t,i,r,s)}Vn.convertArgument=SB;function Ma(n,e,t,r){return(0,$.isEncodedEntryFunctionArgument)(n)?(ff(e,n,t),n):EB(n,e,t,r)}Vn.checkOrConvertArgument=Ma;function EB(n,e,t,r){if(e.isBool()){if((0,$.isBool)(n))return new Ge.Bool(n);if((0,$.isString)(n)){if(n==="true")return new Ge.Bool(!0);if(n==="false")return new Ge.Bool(!1)}(0,$.throwTypeMismatch)("boolean",t)}if(e.isAddress()){if((0,$.isString)(n))return Fg.AccountAddress.fromString(n);(0,$.throwTypeMismatch)("string | AccountAddress",t)}if(e.isU8()){let s=(0,$.convertNumber)(n);if(s!==void 0)return new Ge.U8(s);(0,$.throwTypeMismatch)("number|string",t)}if(e.isU16()){let s=(0,$.convertNumber)(n);if(s!==void 0)return new Ge.U16(s);(0,$.throwTypeMismatch)("number | string",t)}if(e.isU32()){let s=(0,$.convertNumber)(n);if(s!==void 0)return new Ge.U32(s);(0,$.throwTypeMismatch)("number | string",t)}if(e.isU64()){if((0,$.isLargeNumber)(n))return new Ge.U64(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isU128()){if((0,$.isLargeNumber)(n))return new Ge.U128(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isU256()){if((0,$.isLargeNumber)(n))return new Ge.U256(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isGeneric()){let s=e.value;if(s<0||s>=r.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${t}`);return Ma(n,r[s],t,r)}if(e.isVector()){if(e.value.isU8()){if((0,$.isString)(n)){let s=new TextEncoder;return Ge.MoveVector.U8(s.encode(n))}if(n instanceof Uint8Array)return Ge.MoveVector.U8(n);if(n instanceof ArrayBuffer)return Ge.MoveVector.U8(new Uint8Array(n))}if(Array.isArray(n))return new Ge.MoveVector(n.map(s=>Ma(s,e.value,t,r)));throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if((0,$.isString)(n))return new Ge.MoveString(n);(0,$.throwTypeMismatch)("string",t)}if(e.isObject()){if((0,$.isString)(n))return Fg.AccountAddress.fromString(n);(0,$.throwTypeMismatch)("string | AccountAddress",t)}if(e.isOption())return(0,$.isNull)(n)?new Ge.MoveOption(null):new Ge.MoveOption(Ma(n,e.value.typeArgs[0],t,r));throw new Error(`Unsupported struct input type for argument ${t}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}function ff(n,e,t){if(n.isBool()){if((0,$.isBcsBool)(e))return;(0,$.throwTypeMismatch)("Bool",t)}if(n.isAddress()){if((0,$.isBcsAddress)(e))return;(0,$.throwTypeMismatch)("AccountAddress",t)}if(n.isU8()){if((0,$.isBcsU8)(e))return;(0,$.throwTypeMismatch)("U8",t)}if(n.isU16()){if((0,$.isBcsU16)(e))return;(0,$.throwTypeMismatch)("U16",t)}if(n.isU32()){if((0,$.isBcsU32)(e))return;(0,$.throwTypeMismatch)("U32",t)}if(n.isU64()){if((0,$.isBcsU64)(e))return;(0,$.throwTypeMismatch)("U64",t)}if(n.isU128()){if((0,$.isBcsU128)(e))return;(0,$.throwTypeMismatch)("U128",t)}if(n.isU256()){if((0,$.isBcsU256)(e))return;(0,$.throwTypeMismatch)("U256",t)}if(n.isVector()){if(e instanceof Ge.MoveVector){e.values.length>0&&ff(n.value,e.values[0],t);return}(0,$.throwTypeMismatch)("MoveVector",t)}if(n instanceof BB.TypeTagStruct){if(n.isString()){if((0,$.isBcsString)(e))return;(0,$.throwTypeMismatch)("MoveString",t)}if(n.isObject()){if((0,$.isBcsAddress)(e))return;(0,$.throwTypeMismatch)("AccountAddress",t)}if(n.isOption()){if(e instanceof Ge.MoveOption){e.value!==void 0&&ff(n.value.typeArgs[0],e.value,t);return}(0,$.throwTypeMismatch)("MoveOption",t)}}throw new Error(`Type mismatch for argument ${t}, expected '${n.toString()}'`)}});var Gg=U(Ro=>{"use strict";y();g();Object.defineProperty(Ro,"__esModule",{value:!0});Ro.memoize=Ro.memoizeAsync=void 0;var Mo=new Map;function vB(n,e,t){return async(...r)=>{if(Mo.has(e)){let{value:i,timestamp:o}=Mo.get(e);if(t===void 0||Date.now()-o<=t)return i}let s=await n(...r);return Mo.set(e,{value:s,timestamp:Date.now()}),s}}Ro.memoizeAsync=vB;function UB(n,e,t){return(...r)=>{if(Mo.has(e)){let{value:i,timestamp:o}=Mo.get(e);if(t===void 0||Date.now()-o<=t)return i}let s=n(...r);return Mo.set(e,{value:s,timestamp:Date.now()}),s}}Ro.memoize=UB});var pf=U(Me=>{"use strict";y();g();Object.defineProperty(Me,"__esModule",{value:!0});Me.generateUserTransactionHash=Me.hashValues=Me.generateSignedTransaction=Me.getAuthenticatorForSimulation=Me.generateSignedTransactionForSimulation=Me.buildTransaction=Me.generateRawTransaction=Me.generateTransactionPayloadWithABI=Me.generateTransactionPayload=void 0;var IB=cr(),oi=Lt(),Ra=kr(),ju=Ks(),$g=bu(),zB=lf(),ai=$s(),Jr=xu(),yn=Uu(),Du=Yd(),yf=hf(),PB=Gg(),gf=Lu(),OB=Qd(),NB=Jd();async function qB(n){if((0,gf.isScriptDataInput)(n))return MB(n);let{moduleAddress:e,moduleName:t,functionName:r}=(0,gf.getFunctionParts)(n.function),s=await LB({key:"entry-function",moduleAddress:e,moduleName:t,functionName:r,aptosConfig:n.aptosConfig,abi:n.abi,fetch:yf.fetchEntryFunctionAbi});return Wg({...n,abi:s})}Me.generateTransactionPayload=qB;function Wg(n){let e=n.abi,{moduleAddress:t,moduleName:r,functionName:s}=(0,gf.getFunctionParts)(n.function),i=(0,yf.standardizeTypeTags)(n.typeArguments);if(i.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${i.length}`);let o=n.functionArguments.map((c,l)=>(0,yf.convertArgument)(n.function,e,c,l,i));if(o.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${r}::${s}', expected ${e.parameters.length} but got ${o.length}`);let a=yn.EntryFunction.build(`${t}::${r}`,s,i,o);if("multisigAddress"in n){let c=oi.AccountAddress.from(n.multisigAddress);return new yn.TransactionPayloadMultiSig(new yn.MultiSig(c,new yn.MultiSigTransactionPayload(a)))}return new yn.TransactionPayloadEntryFunction(a)}Me.generateTransactionPayloadWithABI=Wg;function MB(n){return new yn.TransactionPayloadScript(new yn.Script(oi.Hex.fromHexInput(n.bytecode).toUint8Array(),n.typeArguments??[],n.functionArguments))}async function Xg(n){let{aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i}=n,o;o=s?.accountSequenceNumber;let a;a=s?.gasUnitPrice;let c;c=s?.chainId;let{maxGasAmount:l,gasUnitPrice:d,expireTimestamp:u,chainId:h}={maxGasAmount:s?.maxGasAmount?BigInt(s.maxGasAmount):BigInt($g.DEFAULT_MAX_GAS_AMOUNT),gasUnitPrice:BigInt(s?.gasUnitPrice),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+$g.DEFAULT_TXN_EXP_SEC_FROM_NOW),...s};return new yn.RawTransaction(oi.AccountAddress.from(t),BigInt(o),r,BigInt(l),BigInt(d),BigInt(u),new yn.ChainId(h))}Me.generateRawTransaction=Xg;async function RB(n){let{aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i}=n,o=await Xg({aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i});if("secondarySignerAddresses"in n){let a=n.secondarySignerAddresses?.map(c=>oi.AccountAddress.from(c))??[];return new NB.MultiAgentTransaction(o,a,n.feePayerAddress?oi.AccountAddress.from(n.feePayerAddress):void 0)}return new OB.SimpleTransaction(o,n.feePayerAddress?oi.AccountAddress.from(n.feePayerAddress):void 0)}Me.buildTransaction=RB;function HB(n){let{signerPublicKey:e,transaction:t,secondarySignersPublicKeys:r,feePayerPublicKey:s}=n,i=Ha(e);if(t.feePayerAddress){let a=new yn.FeePayerRawTransaction(t.rawTransaction,t.secondarySignerAddresses??[],t.feePayerAddress),c=[];r&&(c=r.map(u=>Ha(u)));let l=Ha(s),d=new Jr.TransactionAuthenticatorFeePayer(i,t.secondarySignerAddresses??[],c,{address:t.feePayerAddress,authenticator:l});return new Du.SignedTransaction(a.raw_txn,d).bcsToBytes()}if(t.secondarySignerAddresses){let a=new yn.MultiAgentRawTransaction(t.rawTransaction,t.secondarySignerAddresses),c=[];c=r.map(d=>Ha(d));let l=new Jr.TransactionAuthenticatorMultiAgent(i,t.secondarySignerAddresses,c);return new Du.SignedTransaction(a.raw_txn,l).bcsToBytes()}let o;if(i instanceof ai.AccountAuthenticatorEd25519)o=new Jr.TransactionAuthenticatorEd25519(i.public_key,i.signature);else if(i instanceof ai.AccountAuthenticatorSingleKey)o=new Jr.TransactionAuthenticatorSingleSender(i);else throw new Error("Invalid public key");return new Du.SignedTransaction(t.rawTransaction,o).bcsToBytes()}Me.generateSignedTransactionForSimulation=HB;function Ha(n){if(n instanceof Ra.AnyPublicKey){if(n.publicKey instanceof ju.Ed25519PublicKey)return new ai.AccountAuthenticatorSingleKey(n,new Ra.AnySignature(new ju.Ed25519Signature(new Uint8Array(64))));if(n.publicKey instanceof Ra.Secp256k1PublicKey)return new ai.AccountAuthenticatorSingleKey(n,new Ra.AnySignature(new Ra.Secp256k1Signature(new Uint8Array(64))))}return new ai.AccountAuthenticatorEd25519(new ju.Ed25519PublicKey(n.toUint8Array()),new ju.Ed25519Signature(new Uint8Array(64)))}Me.getAuthenticatorForSimulation=Ha;function Zg(n){let{transaction:e,feePayerAuthenticator:t,additionalSignersAuthenticators:r}=n,s=(0,zB.normalizeBundle)(ai.AccountAuthenticator,n.senderAuthenticator),i;if(e.feePayerAddress){if(!t)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");i=new Jr.TransactionAuthenticatorFeePayer(s,e.secondarySignerAddresses??[],r??[],{address:e.feePayerAddress,authenticator:t})}else if(e.secondarySignerAddresses){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");i=new Jr.TransactionAuthenticatorMultiAgent(s,e.secondarySignerAddresses,r)}else s instanceof ai.AccountAuthenticatorEd25519?i=new Jr.TransactionAuthenticatorEd25519(s.public_key,s.signature):i=new Jr.TransactionAuthenticatorSingleSender(s);return new Du.SignedTransaction(e.rawTransaction,i).bcsToBytes()}Me.generateSignedTransaction=Zg;function bf(n){let e=IB.sha3_256.create();for(let t of n)e.update(t);return e.digest()}Me.hashValues=bf;var CB=bf(["APTOS::Transaction"]);function KB(n){let e=Zg(n);return new oi.Hex(bf([CB,new Uint8Array([0]),e])).toString()}Me.generateUserTransactionHash=KB;async function LB({key:n,moduleAddress:e,moduleName:t,functionName:r,aptosConfig:s,abi:i,fetch:o}){return i!==void 0?i:(0,PB.memoizeAsync)(async()=>o(e,t,r,s),`${n}-${s.network}-${e}-${t}-${r}`,1e3*60*5)()}});var Qg=U(es=>{"use strict";y();g();var jB=es&&es.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Yg=es&&es.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&jB(e,n,t)};Object.defineProperty(es,"__esModule",{value:!0});Yg($s(),es);Yg(xu(),es)});var Jg=U(Fn=>{"use strict";y();g();var DB=Fn&&Fn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Vu=Fn&&Fn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&DB(e,n,t)};Object.defineProperty(Fn,"__esModule",{value:!0});Vu(Lu(),Fn);Vu(pf(),Fn);Vu(hf(),Fn);Vu(Iu(),Fn)});var tb=U(eb=>{"use strict";y();g();Object.defineProperty(eb,"__esModule",{value:!0})});var Fu=U(tn=>{"use strict";y();g();var VB=tn&&tn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ho=tn&&tn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&VB(e,n,t)};Object.defineProperty(tn,"__esModule",{value:!0});Ho(Qg(),tn);Ho(Uu(),tn);Ho(Jg(),tn);Ho(Ua(),tn);Ho(df(),tn);Ho(tb(),tn)});var ui=U(Ie=>{"use strict";y();g();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.rotateAuthKey=Ie.publicPackageTransaction=Ie.signAndSubmitTransaction=Ie.submitTransaction=Ie.simulateTransaction=Ie.signTransaction=Ie.getSigningMessage=Ie.buildRawTransaction=Ie.buildTransactionPayload=Ie.generateTransaction=void 0;var ir=Yt(),FB=cf(),mf=Rs(),kB=Xd(),ci=pf(),kn=Fu();async function wf(n){let e=await nb(n);return rb(n,e)}Ie.generateTransaction=wf;async function nb(n){let{aptosConfig:e,data:t}=n,r,s;return"bytecode"in t?s=await(0,ci.generateTransactionPayload)(t):"multisigAddress"in t?(r={aptosConfig:e,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},s=await(0,ci.generateTransactionPayload)(r)):(r={aptosConfig:e,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},s=await(0,ci.generateTransactionPayload)(r)),s}Ie.buildTransactionPayload=nb;async function rb(n,e){let{aptosConfig:t,sender:r,options:s}=n,i;if(GB(n)&&(i=mf.AccountAddress.ZERO.toString()),$B(n)){let{secondarySignerAddresses:o}=n;return(0,ci.buildTransaction)({aptosConfig:t,sender:r,payload:e,options:s,secondarySignerAddresses:o,feePayerAddress:i})}return(0,ci.buildTransaction)({aptosConfig:t,sender:r,payload:e,options:s,feePayerAddress:i})}Ie.buildRawTransaction=rb;function GB(n){return n.withFeePayer===!0}function $B(n){return"secondarySignerAddresses"in n}function WB(n){let{transaction:e}=n;return(0,kn.generateSigningMessageForTransaction)(e)}Ie.getSigningMessage=WB;function sb(n){let{signer:e,transaction:t}=n;return e.signTransactionWithAuthenticator(t)}Ie.signTransaction=sb;async function XB(n){let{aptosConfig:e,transaction:t,signerPublicKey:r,secondarySignersPublicKeys:s,feePayerPublicKey:i,options:o}=n;return(0,ci.generateSignedTransactionForSimulation)({transaction:t,signerPublicKey:r,secondarySignersPublicKeys:s,feePayerPublicKey:i,options:o})}Ie.simulateTransaction=XB;async function ib(n){return(0,ci.generateSignedTransaction)({...n})}Ie.submitTransaction=ib;async function ob(n){let{aptosConfig:e,signer:t,transaction:r}=n,s=sb({signer:t,transaction:r});return ib({aptosConfig:e,transaction:r,senderAuthenticator:s})}Ie.signAndSubmitTransaction=ob;var ZB={typeParameters:[],parameters:[kn.TypeTagVector.u8(),new kn.TypeTagVector(kn.TypeTagVector.u8())]};async function YB(n){let{aptosConfig:e,account:t,metadataBytes:r,moduleBytecode:s,options:i}=n,o=s.map(a=>ir.MoveVector.U8(a));return wf({aptosConfig:e,sender:mf.AccountAddress.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[ir.MoveVector.U8(r),new ir.MoveVector(o)],abi:ZB},options:i})}Ie.publicPackageTransaction=YB;var QB={typeParameters:[],parameters:[new kn.TypeTagU8,kn.TypeTagVector.u8(),new kn.TypeTagU8,kn.TypeTagVector.u8(),kn.TypeTagVector.u8(),kn.TypeTagVector.u8()]};async function JB(n){let{aptosConfig:e,fromAccount:t,toNewPrivateKey:r,sequenceNumber:s,authenticationKey:i}=n,o=FB.Account.fromPrivateKey({privateKey:r,legacy:!0}),c=new kB.RotationProofChallenge({sequenceNumber:BigInt(s),originator:t.accountAddress,currentAuthKey:mf.AccountAddress.from(i),newPublicKey:o.publicKey}).bcsToBytes(),l=t.sign(c),d=o.sign(c),u=await wf({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new ir.U8(t.signingScheme),ir.MoveVector.U8(t.publicKey.toUint8Array()),new ir.U8(o.signingScheme),ir.MoveVector.U8(o.publicKey.toUint8Array()),ir.MoveVector.U8(l.toUint8Array()),ir.MoveVector.U8(d.toUint8Array())],abi:QB}});return ob({aptosConfig:e,signer:t,transaction:u})}Ie.rotateAuthKey=JB});var cb=U(ku=>{"use strict";y();g();Object.defineProperty(ku,"__esModule",{value:!0});ku.Build=void 0;var ab=ui(),_f=class{constructor(e){this.config=e}async simple(e){return(0,ab.generateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,ab.generateTransaction)({aptosConfig:this.config,...e})}};ku.Build=_f});var Af=U(Co=>{"use strict";y();g();Object.defineProperty(Co,"__esModule",{value:!0});Co.ValidateFeePayerDataOnSimulation=Co.ValidateFeePayerDataOnSubmission=void 0;function eT(n,e,t){let r=t.value;return t.value=async function(...s){let[i]=s;if(i.transaction.feePayerAddress&&!i.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return r.apply(this,s)},t}Co.ValidateFeePayerDataOnSubmission=eT;function tT(n,e,t){let r=t.value;return t.value=async function(...s){let[i]=s;if(i.transaction.feePayerAddress&&!i.feePayerPublicKey)throw new Error("You are simulating a Fee Payer transaction but missing the feePayerPublicKey");return r.apply(this,s)},t}Co.ValidateFeePayerDataOnSimulation=tT});var fb=U(Ko=>{"use strict";y();g();var lb=Ko&&Ko.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.Simulate=void 0;var ub=ui(),db=Af(),Ca=class{constructor(e){this.config=e}async simple(e){return(0,ub.simulateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,ub.simulateTransaction)({aptosConfig:this.config,...e})}};lb([db.ValidateFeePayerDataOnSimulation],Ca.prototype,"simple",null);lb([db.ValidateFeePayerDataOnSimulation],Ca.prototype,"multiAgent",null);Ko.Simulate=Ca});var bb=U(Lo=>{"use strict";y();g();var yb=Lo&&Lo.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.Submit=void 0;var hb=ui(),gb=Af(),Ka=class{constructor(e){this.config=e}async simple(e){return(0,hb.submitTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,hb.submitTransaction)({aptosConfig:this.config,...e})}};yb([gb.ValidateFeePayerDataOnSubmission],Ka.prototype,"simple",null);yb([gb.ValidateFeePayerDataOnSubmission],Ka.prototype,"multiAgent",null);Lo.Submit=Ka});var pb=U(Gu=>{"use strict";y();g();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Transaction=void 0;var jo=ui(),nT=cb(),rT=fb(),sT=bb(),Bf=class{constructor(e){this.config=e,this.build=new nT.Build(this.config),this.simulate=new rT.Simulate(this.config),this.submit=new sT.Submit(this.config)}getSigningMessage(e){return(0,jo.getSigningMessage)(e)}async publishPackageTransaction(e){return(0,jo.publicPackageTransaction)({aptosConfig:this.config,...e})}async rotateAuthKey(e){return(0,jo.rotateAuthKey)({aptosConfig:this.config,...e})}sign(e){return(0,jo.signTransaction)({...e})}signAsFeePayer(e){let{signer:t,transaction:r}=e;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=t.accountAddress,(0,jo.signTransaction)({signer:t,transaction:r})}async signAndSubmitTransaction(e){let{signer:t,transaction:r}=e;return(0,jo.signAndSubmitTransaction)({aptosConfig:this.config,signer:t,transaction:r})}};Gu.Transaction=Bf});var mb=U($u=>{"use strict";y();g();Object.defineProperty($u,"__esModule",{value:!0});$u.transferFungibleAsset=void 0;var Tf=Fu(),iT=ui(),oT={typeParameters:[{constraints:[]}],parameters:[(0,Tf.parseTypeTag)("0x1::object::Object"),new Tf.TypeTagAddress,new Tf.TypeTagU64]};async function aT(n){let{aptosConfig:e,senderAddress:t,fungibleAssetMetadataAddress:r,recipient:s,amount:i,options:o}=n;return(0,iT.generateTransaction)({aptosConfig:e,sender:t,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[r,s,i],abi:oT},options:o})}$u.transferFungibleAsset=aT});var wb=U(Wu=>{"use strict";y();g();Object.defineProperty(Wu,"__esModule",{value:!0});Wu.FungibleAsset=void 0;var cT=mb(),xf=class{constructor(e){this.config=e}async transferFungibleAsset(e){return(0,cT.transferFungibleAsset)({aptosConfig:this.config,...e})}};Wu.FungibleAsset=xf});var _b=U(or=>{"use strict";y();g();var uT=or&&or.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Sf=or&&or.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&uT(e,n,t)};Object.defineProperty(or,"__esModule",{value:!0});Sf(Ug(),or);Sf(pb(),or);Sf(wb(),or)});var Ab=U(ar=>{"use strict";y();g();var lT=ar&&ar.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ef=ar&&ar.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&lT(e,n,t)};Object.defineProperty(ar,"__esModule",{value:!0});Ef(Ru(),ar);Ef(bu(),ar);Ef(lf(),ar)});var vf=U(jt=>{"use strict";y();g();var dT=jt&&jt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),li=jt&&jt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&dT(e,n,t)};Object.defineProperty(jt,"__esModule",{value:!0});li(cf(),jt);li(_b(),jt);li(Yt(),jt);li(Lt(),jt);li(Fu(),jt);li(Ve(),jt);li(Ab(),jt)});var If=U(X=>{"use strict";y();g();Object.defineProperty(X,"__esModule",{value:!0});X.validSignedTransaction=X.signMessage=X.createSimulateRawTransactionByABIV2=X.createRawTransactionByABIV2=X.createRawTransactionByABI=X.generateBCSSimulateTransactionWithPublicKey=X.generateBCSSimulateTransaction=X.generateBCSTransaction=X.claimNFTTokenPayload=X.offerNFTTokenPayloadObject=X.offerNFTTokenPayload=X.createNFTTokenPayload=X.createNFTCollectionPayload=X.transferCoinV2=X.transferCoin=X.burnCoin=X.mintCoin=X.registerCoin=X.transferPayload=X.simulateTransaction=X.createRawTransaction=X.transfer=void 0;var fT=$n(),hT=El(),N=Ol(),Bb=vr(),yT=Bn(),Xu=Df(),gn=vf();function gT(n,e,t,r,s,i,o,a){let c=Tb(e,t),l=Uf(n.address(),c,r,s,i,o,a);return Sb(n,l)}X.transfer=gT;function Uf(n,e,t,r,s,i,o){return new N.TxnBuilderTypes.RawTransaction(N.TxnBuilderTypes.AccountAddress.fromHex(n),t,e,s,i,o,new N.TxnBuilderTypes.ChainId(r))}X.createRawTransaction=Uf;function bT(n,e,t,r,s,i,o){let a=Uf(n.address(),e,t,r,s,i,o);return Eb(n,a)}X.simulateTransaction=bT;function Tb(n,e){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n)),N.BCS.bcsSerializeUint64(e)]))}X.transferPayload=Tb;function pT(n){let e=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","register",[e],[]))}X.registerCoin=pT;function mT(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","mint",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}X.mintCoin=mT;function wT(n,e){let t=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","burn",[t],[N.BCS.bcsSerializeUint64(e)]))}X.burnCoin=wT;function _T(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::coin","transfer",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}X.transferCoin=_T;function AT(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer_coins",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}X.transferCoinV2=AT;function xb(n){let e=new N.BCS.Serializer;return e.serializeU32AsUleb128(n.length),n.forEach(t=>{e.serializeBool(t)}),e.getBytes()}function BT(n,e,t){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_collection_script",[],[N.BCS.bcsSerializeStr(n),N.BCS.bcsSerializeStr(e),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeUint64(9007199254740991),xb([!1,!1,!1])]))}X.createNFTCollectionPayload=BT;function TT(n,e,t,r,s,i){let a=new N.BCS.Serializer;return a.serializeU32AsUleb128(0),new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_token_script",[],[N.BCS.bcsSerializeStr(e),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s),N.BCS.bcsSerializeUint64(9007199254740991),N.BCS.bcsSerializeStr(i),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.address())),N.BCS.bcsSerializeUint64(0),N.BCS.bcsSerializeUint64(0),xb([!1,!1,!1,!1,!1]),a.getBytes(),a.getBytes(),a.getBytes()]))}X.createNFTTokenPayload=TT;function xT(n,e,t,r,s,i){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","offer_script",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s),N.BCS.bcsSerializeUint64(i)]))}X.offerNFTTokenPayload=xT;function ST(n,e,t){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::object","transfer",[Bb.StructTag.fromString("0x1::object::ObjectCore")],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeUint64(t)]))}X.offerNFTTokenPayloadObject=ST;function ET(n,e,t,r,s){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","claim_script",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s)]))}X.claimNFTTokenPayload=ET;function Sb(n,e){return new N.TransactionBuilderEd25519(r=>{let s=n.signBuffer(E.Buffer.from(r));return new N.TxnBuilderTypes.Ed25519Signature(s.toUint8Array())},n.pubKey().toUint8Array()).sign(e)}X.generateBCSTransaction=Sb;function Eb(n,e){return new N.TransactionBuilderEd25519(r=>{let s=new Uint8Array(64);return new N.TxnBuilderTypes.Ed25519Signature(s)},n.pubKey().toUint8Array()).sign(e)}X.generateBCSSimulateTransaction=Eb;function vT(n,e){return new N.TransactionBuilderEd25519(r=>{let s=new Uint8Array(64);return new N.TxnBuilderTypes.Ed25519Signature(s)},n).sign(e)}X.generateBCSSimulateTransactionWithPublicKey=vT;function UT(n,e,t,r,s,i,o,a){let c={sender:n,sequenceNumber:e,gasUnitPrice:s,maxGasAmount:r,expSecFromNow:i.toString(),chainId:t},l=JSON.parse(o),d=JSON.parse(a);return(0,N.buildRawTransactionByABI)(d,c,l.function,l.type_arguments||l.typeArguments,l.arguments||l.functionArguments)}X.createRawTransactionByABI=UT;function IT(n,e,t,r,s,i,o,a){let c=JSON.parse(o),l=JSON.parse(a),{moduleAddress:d,moduleName:u,functionName:h}=(0,gn.getFunctionParts)(c.function),w=l.find(A=>{if(d===A.abi?.address&&u==A.abi.name&&A.abi?.exposed_functions.find(_=>h==_.name))return A}),m=new gn.AptosConfig({network:gn.Network.CUSTOM,moveModule:JSON.stringify(w)}),f=new gn.Transaction(m);return f.build.simple({sender:n.accountAddress,withFeePayer:!1,data:{function:c.function,typeArguments:c.tyArg||c.typeArguments||c.type_arguments,functionArguments:c.arguments||c.functionArguments},options:{maxGasAmount:Number(r),gasUnitPrice:Number(s),expireTimestamp:Number(i),chainId:Number(t),accountSequenceNumber:Number(e)}}).then(A=>{let p=f.sign({signer:n,transaction:A}),_=new gn.SignedTransaction(A.rawTransaction,p),S=new gn.Serializer;return _.serialize(S),Xu.base.toHex(S.toUint8Array())})}X.createRawTransactionByABIV2=IT;function zT(n,e,t,r,s,i,o,a,c){let l=JSON.parse(a),d=JSON.parse(c),{moduleAddress:u,moduleName:h,functionName:w}=(0,gn.getFunctionParts)(l.function),m=d.find(p=>{if(u===p.abi?.address&&h==p.abi.name&&p.abi?.exposed_functions.find(S=>w==S.name))return p}),f=new gn.AptosConfig({network:gn.Network.CUSTOM,moveModule:JSON.stringify(m)});return new gn.Transaction(f).build.simple({sender:n,withFeePayer:!1,data:{function:l.function,typeArguments:l.tyArg||l.typeArguments||l.type_arguments,functionArguments:l.arguments||l.functionArguments},options:{maxGasAmount:Number(s),gasUnitPrice:Number(i),expireTimestamp:Number(o),chainId:Number(r),accountSequenceNumber:Number(t)}}).then(p=>{let _=(0,gn.generateSignedTransactionForSimulation)({transaction:p,signerPublicKey:e});return Xu.base.toHex(_)})}X.createSimulateRawTransactionByABIV2=zT;async function PT(n,e){let t=new TextEncoder,r=E.Buffer.from(t.encode(n)),i=hT.AptosAccount.fromPrivateKey(fT.HexString.ensure(e)).signBuffer(r);return Promise.resolve(i.hex())}X.signMessage=PT;function OT(n,e){let t=Bb.SignedTransaction.deserialize(new yT.Deserializer(Xu.base.fromHex(n))),r=t.authenticator,s=r.public_key.value,i=r.signature.value,o=N.TransactionBuilder.getSigningMessage(t.raw_txn);if(!e&&!Xu.signUtil.ed25519.verify(o,i,s))throw Error("signature error");return t}X.validSignedTransaction=OT});var vb=U(Gn=>{"use strict";y();g();var NT=Gn&&Gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),qT=Gn&&Gn.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),MT=Gn&&Gn.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&NT(e,n,t);return qT(e,n),e};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AptosWallet=void 0;var nn=Rb(),Le=Df(),L=Ub(),zf=MT(If()),ze=vf(),La=Ru(),RT=ui(),Pf=vr(),Of=Bn(),Nf=class extends nn.BaseWallet{async getDerivedPath(e){return`m/44'/637'/${e.index}'/0'/0'`}async getRandomPrivateKey(){try{return Promise.resolve("0x"+Le.signUtil.ed25519.ed25519_getRandomPrivateKey(!1,"hex"))}catch{return Promise.reject(nn.GenPrivateKeyError)}}async getDerivedPrivateKey(e){try{let t=await Le.signUtil.ed25519.ed25519_getDerivedPrivateKey(e.mnemonic,e.hdPath,!1,"hex");return Promise.resolve("0x"+t)}catch{return Promise.reject(nn.GenPrivateKeyError)}}checkPrivateKey(e){if(!Le.base.validateHexString(e))return!1;let t=Le.base.fromHex(e.toLowerCase());return t.length==32||t.length==64}GetTransactionHash(e){let t=Le.base.fromHex(e),r=Le.base.sha3_256(E.Buffer.from("APTOS::Transaction")),s=E.Buffer.concat([E.Buffer.from(r),E.Buffer.of(0),E.Buffer.from(t)]),i=Le.base.sha3_256(s);return Le.base.toHex(i,!0)}getNewAddress(e){try{if(!this.checkPrivateKey(e.privateKey))return Promise.reject(nn.NewAddressError);let t=L.AptosAccount.fromPrivateKey(L.HexString.ensure(e.privateKey)),r=t.address().hex();e.addressType&&e.addressType==="short"&&(r=t.address().toShortString());let s={address:r||"",publicKey:t.pubKey().hex()};return Promise.resolve(s)}catch{return Promise.reject(nn.NewAddressError)}}validPrivateKey(e){let r={isValid:this.checkPrivateKey(e.privateKey),privateKey:e.privateKey};return Promise.resolve(r)}buildSimulateTx(e){let t=Le.base.fromHex(e.publicKey),r=new ze.Ed25519PublicKey(Uint8Array.from(t)),i=r.authKey().derivedAddress(),o=e.data,a=o.base,c;switch(o.type){case"simulate_transfer":let l=o.data,d=(0,L.transferPayload)(l.recipientAddress,BigInt(l.amount)),u=(0,L.createRawTransaction)(L.HexString.fromUint8Array(i.toUint8Array()),d,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,L.generateBCSSimulateTransactionWithPublicKey)(t,u);break;case"simulate_token_transfer":let h=o.data,w=(0,L.transferCoinV2)(h.tyArg,h.recipientAddress,BigInt(h.amount)),m=(0,L.createRawTransaction)(L.HexString.fromUint8Array(i.toUint8Array()),w,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,L.generateBCSSimulateTransactionWithPublicKey)(t,m);break;case"simulate_dapp":let f=o.data;if(f.type==2){let z=new Of.Deserializer(Le.base.fromHex(f.data)),I=Pf.TransactionPayload.deserialize(z),D=(0,L.createRawTransaction)(L.HexString.fromUint8Array(i.toUint8Array()),I,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs));c=(0,L.generateBCSSimulateTransactionWithPublicKey)(t,D)}else return(0,L.createSimulateRawTransactionByABIV2)(i,r,BigInt(a.sequenceNumber),a.chainId,BigInt(a.maxGasAmount),BigInt(a.gasUnitPrice),BigInt(a.expirationTimestampSecs),f.data,f.abi);break;case"simulate_fungible_asset_transfer":let b=o.data,A=new ze.AptosConfig({network:La.Network.MAINNET}),p=new ze.FungibleAsset(A),_=b.fungibleAssetMetadataAddress,S=BigInt(b.amount),v=new ze.AccountAddress(i.toUint8Array());return p.transferFungibleAsset({senderAddress:v,fungibleAssetMetadataAddress:ze.AccountAddress.from(_),recipient:b.recipientAddress,amount:S,options:{maxGasAmount:Number(a.maxGasAmount),gasUnitPrice:Number(a.gasUnitPrice),expireTimestamp:Number(a.expirationTimestampSecs),chainId:Number(a.chainId),accountSequenceNumber:Number(a.sequenceNumber)}}).then(z=>{let I=(0,ze.generateSignedTransactionForSimulation)({transaction:z,signerPublicKey:r});return Le.base.toHex(I)})}return Promise.resolve(Le.base.toHex(c))}signTransaction(e){try{let t=L.AptosAccount.fromPrivateKey(L.HexString.ensure(e.privateKey)),r=e.data,s=t.address();r.base.sender&&(s=L.HexString.ensure(r.base.sender));let i=L.HexString.ensure(e.privateKey).toString(),o=new ze.Ed25519PrivateKey(i.slice(2,66)),a=ze.Account.fromPrivateKey({privateKey:o}),c=a.accountAddress,l=r.type,d;switch(l){case"transfer":{let u=r.base,h=r.data,w=(0,L.transferPayload)(h.recipientAddress,BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"tokenTransfer":{let u=r.base,h=r.data,w=(0,L.transferCoin)(h.tyArg,h.recipientAddress,BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"tokenTransferV2":{let u=r.base,h=r.data,w=(0,L.transferCoinV2)(h.tyArg,h.recipientAddress,BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"tokenMint":{let u=r.base,h=r.data,w=(0,L.mintCoin)(h.tyArg,h.recipientAddress,BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"tokenBurn":{let u=r.base,h=r.data,w=(0,L.burnCoin)(h.tyArg,BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"tokenRegister":{let u=r.base,h=r.data,w=(0,L.registerCoin)(h.tyArg),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"dapp":{let u=r.base,h=r.data;if(h.type==2){let w=new Of.Deserializer(Le.base.fromHex(h.data)),m=Pf.TransactionPayload.deserialize(w),f=(0,L.createRawTransaction)(s,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,f)}else return(0,L.createRawTransactionByABIV2)(a,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),h.data,h.abi);break}case"simulate":{let u=r.base,h=r.data;if(h.type==2){let w=new Of.Deserializer(Le.base.fromHex(h.data)),m=Pf.TransactionPayload.deserialize(w),f=(0,L.createRawTransaction)(s,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSSimulateTransaction)(t,f)}else return(0,L.createRawTransactionByABIV2)(a,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),h.data,h.abi);break}case"offerNftObject":{let u=r.base,h=r.data,w=(0,L.offerNFTTokenPayloadObject)(L.HexString.ensure(h.nftObject),L.HexString.ensure(h.receiver),BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"offerNft":{let u=r.base,h=r.data,w=(0,L.offerNFTTokenPayload)(L.HexString.ensure(h.receiver),L.HexString.ensure(h.creator),h.collectionName,h.tokenName,BigInt(h.version),BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"claimNft":{let u=r.base,h=r.data,w=(0,L.claimNFTTokenPayload)(L.HexString.ensure(h.sender),L.HexString.ensure(h.creator),h.collectionName,h.tokenName,BigInt(h.version)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSTransaction)(t,m);break}case"offerNft_simulate":{let u=r.base,h=r.data,w=(0,L.offerNFTTokenPayload)(L.HexString.ensure(h.receiver),L.HexString.ensure(h.creator),h.collectionName,h.tokenName,BigInt(h.version),BigInt(h.amount)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSSimulateTransaction)(t,m);break}case"claimNft_simulate":{let u=r.base,h=r.data,w=(0,L.claimNFTTokenPayload)(L.HexString.ensure(h.sender),L.HexString.ensure(h.creator),h.collectionName,h.tokenName,BigInt(h.version)),m=(0,L.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,L.generateBCSSimulateTransaction)(t,m);break}case"simple_transaction":{let u=r.base,h=r.data,w=u.chainId==1?La.Network.MAINNET:La.Network.TESTNET,m='{"abi":{"address":"0x1","name":"aptos_account","friends":["0x1::genesis","0x1::resource_account"],"exposed_functions":[{"name":"assert_account_exists","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"assert_account_is_registered_for_apt","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"batch_transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"batch_transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"can_receive_direct_coin_transfers","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[],"params":["address"],"return":["bool"]},{"name":"create_account","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"deposit_coins","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["address","0x1::coin::Coin<T0>"],"return":[]},{"name":"set_allow_direct_coin_transfers","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","bool"],"return":[]},{"name":"transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","address","u64"],"return":[]},{"name":"transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","address","u64"],"return":[]}],"structs":[{"name":"DirectCoinTransferConfigUpdatedEvent","is_native":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"new_allow_direct_transfers","type":"bool"}]},{"name":"DirectTransferConfig","is_native":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"allow_arbitrary_coin_transfers","type":"bool"},{"name":"update_coin_transfer_events","type":"0x1::event::EventHandle<0x1::aptos_account::DirectCoinTransferConfigUpdatedEvent>"}]}]}}',f=h.moveModule==null?m:h.moveModule,b=new ze.AptosConfig({network:w,moveModule:f}),A=new ze.Transaction(b);if(h.signAsFeePayer){let S=h.rawTransaction,v=new ze.Deserializer(Le.base.fromHex(S)),x=ze.RawTransaction.deserialize(v),z=new ze.SimpleTransaction(x,ze.AccountAddress.ZERO),I=A.signAsFeePayer({signer:a,transaction:z}),D={rawTransaction:z.rawTransaction.bcsToHex().toString(),sponsorSignature:I.bcsToHex().toString()};return Promise.resolve(D)}let p=h.functionArguments===void 0?[h.recipientAddress,h.amount]:h.functionArguments;return A.build.simple({sender:c,withFeePayer:h.withFeePayer,data:{function:h.function,typeArguments:h.tyArg,functionArguments:p},options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(S=>{let v=A.sign({signer:a,transaction:S});return{rawTransaction:S.rawTransaction.bcsToHex().toString(),senderSignature:v.bcsToHex().toString()}})}case"fungible_asset_transfer":{let u=r.base,h=r.data,w=new ze.AptosConfig({network:La.Network.MAINNET}),m=new ze.FungibleAsset(w),f=h.fungibleAssetMetadataAddress,b=BigInt(h.amount);return m.transferFungibleAsset({senderAddress:a.accountAddress,fungibleAssetMetadataAddress:ze.AccountAddress.from(f),recipient:h.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let _=(0,RT.signTransaction)({signer:a,transaction:p}),S=(0,ze.generateSignedTransaction)({transaction:p,senderAuthenticator:_});return Le.base.toHex(S)})}case"simulate_fungible_asset_transfer":{let u=r.base,h=r.data,w=new ze.AptosConfig({network:La.Network.MAINNET}),m=new ze.FungibleAsset(w),f=h.fungibleAssetMetadataAddress,b=BigInt(h.amount);return m.transferFungibleAsset({senderAddress:a.accountAddress,fungibleAssetMetadataAddress:ze.AccountAddress.from(f),recipient:h.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let _=(0,ze.generateSignedTransactionForSimulation)({transaction:p,signerPublicKey:a.publicKey});return Le.base.toHex(_)})}default:return Promise.reject(nn.SignTxError)}return Promise.resolve(Le.base.toHex(d))}catch{return Promise.reject(nn.SignTxError)}}validAddress(e){let t;try{e.address.match(/^0x[0-9A-Fa-f]{62,64}$/)||e.address.match(/^[0-9A-Fa-f]{64}$/)?t=!0:t=!1}catch{t=!1}let r={isValid:t,address:e.address};return Promise.resolve(r)}async signMessage(e){try{let t=e.data,r=await zf.signMessage(t,e.privateKey);return r.startsWith("0x")&&(r=r.substring(2)),Promise.resolve(r)}catch{return Promise.reject(nn.SignTxError)}}async signMessageByPayload(e){try{let t=e.data,r="APTOS",s,i,o,a=r;t?.address&&(s=new L.AptosAccount(Le.base.fromHex(e.privateKey)).address().hex(),a=a.concat(`
address: `,s)),t?.application&&(i=t.dAppDomain==null?"":t.dAppDomain,a=a.concat(`
application: `,i)),t.chainId&&(o=t.chain_id==null?0:t.chain_id,a=a.concat(`
chainId: `,o.toString())),a=a.concat(`
message: `,t.message),a=a.concat(`
nonce: `,t.nonce);let c=await zf.signMessage(a,e.privateKey);c.startsWith("0x")&&(c=c.substring(2));let l={address:s,application:i,chainId:o,fullMessage:a,message:t.message,nonce:t.nonce,prefix:r,signature:c};return Promise.resolve(l)}catch{return Promise.reject(nn.SignMsgError)}}async calcTxHash(e){try{return Promise.resolve(this.GetTransactionHash(e.data))}catch{return Promise.reject(nn.CalcTxHashError)}}async validSignedTransaction(e){try{let t=e.data?e.data.skipCheckSign:void 0,r=zf.validSignedTransaction(e.tx,t||!1);return Promise.resolve((0,nn.jsonStringifyUniform)(r))}catch{return Promise.reject(nn.validSignedTransactionError)}}};Gn.AptosWallet=Nf});var Ub=U(bn=>{y();g();var HT=bn&&bn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ja=bn&&bn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&HT(e,n,t)};Object.defineProperty(bn,"__esModule",{value:!0});ja(If(),bn);ja($n(),bn);ja(El(),bn);ja(Ol(),bn);ja(vb(),bn)});export{Ub as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-S5VWMXP6.js.map
