import{b as P,c as Y}from"./chunk-SLWKMGPD.js";import{n as B}from"./chunk-GTSNHSPT.js";import{b,c as K}from"./chunk-3OMHZBKM.js";import{a as D}from"./chunk-PVSNAFN3.js";import{Fb as U,ac as W}from"./chunk-NTISK7TT.js";import{a as $}from"./chunk-QZUNX5I4.js";import{d as C}from"./chunk-45FKVGCF.js";import{ka as _,na as N,oa as X}from"./chunk-KSCBZ3RY.js";import{Gb as R,Ib as f,Jb as x,Oc as Z,W as I,Ya as J,fc as V,yc as A}from"./chunk-YILNSICT.js";import{H as g}from"./chunk-L4N7WJIQ.js";import{N as z,w as T}from"./chunk-V63HWKAL.js";import{a as j}from"./chunk-B75PPTYD.js";import{f as u,m as l,o as n}from"./chunk-UGZFXKPB.js";l();n();var F=u(j()),O=u(W()),q=u($());z();l();n();var G=u(W());l();n();X();var tt=N({name:"assetsSlice",initialState:{assets:[]},reducers:{setAssets:(t,r)=>{t.assets=r.payload}}}),{actions:et,reducer:st}=tt,rt=[],k=_(t=>t.assetsSlice.assets??rt,t=>t.reduce((r,s)=>r.set(s.walletId,s),new Map)),mt=()=>async t=>{(await C.assets).liveQuery().subscribe((s,m)=>{m||t(et.setAssets(s))})},ct=st;function H(){return(0,G.useSelector)(k)}l();n();Z();J();V();var L=({walletAccounts:t,rpcData:r,assetsMap:s,showNftAmount:m,selectedCurrency:d,hiddenSmallAsset:i})=>{let c=t.map(e=>{if(!e)return{walletAsset:"0",platformAsset:"0"};let{walletId:o}=e;if(!!r){let{chainTokensAccountMap:M}=r,p=e?.account?.[I];if(!p||[A.HD_KEYRING,A.SIMPLE_KEYRING,A.MPC_KEYRING].indexOf(e?.initialType)<0)return{unsupported:!0,walletAsset:"0",platformAsset:"0",...e};let{balance:v="0"}=M[p]?.filter(({address:Q})=>!Q)[0]||{};return{walletAsset:v,platformAsset:"0",...e}}let a=s.get(o),E=(a?[a.tokenTotalAssetsUSD,a.defiTotalAssetsUSD,m?a.nftTotalAssetsUSD:"0"]:[]).reduce((M,p)=>f(M,p),"0");return{walletAsset:a?R(i?x(E,a.smallTotalAssetsUSD):E,d.usdToThisRate):"--",platformAsset:a?a.platformTotalAssetsUSD:"--",...e}}),{walletAsset:S,platformAsset:w}=c.reduce((e,o)=>({walletAsset:f(e.walletAsset,o.walletAsset==="--"?"0":o.walletAsset),platformAsset:f(e.platformAsset,o.platformAsset==="--"?"0":o.platformAsset)}),{walletAsset:"0",platformAsset:"0"});return{walletAccountsWidthBalance:c,walletAsset:S,platformAsset:w}};var ot=t=>{let r=(0,q.useHistory)(),s=B(t),[m]=K(b.showNftAmount),d=P(),i=Y(d),c=H(),S=(0,O.useSelector)(U);return s||(g.error(T("wallet_extension_top_error_parameters")),r.push(D)),(0,F.useMemo)(()=>{let{walletIdentities:w}=s,{walletAccountsWidthBalance:e,walletAsset:o,platformAsset:y}=L({walletAccounts:w,showNftAmount:m,rpcData:null,selectedCurrency:i,assetsMap:c,hiddenSmallAsset:S});return{...s,walletAsset:o,platformAsset:y,walletIdentities:e}},[s,m,i,c])},Kt=ot;export{mt as a,ct as b,H as c,L as d,Kt as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-HVADQEJS.js.map
