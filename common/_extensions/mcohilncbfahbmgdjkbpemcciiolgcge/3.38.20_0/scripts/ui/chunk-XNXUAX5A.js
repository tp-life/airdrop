import{a as H}from"./chunk-MQQA225G.js";import{a as Co}from"./chunk-SBHHIKJ7.js";import{a as Io}from"./chunk-64YCTTWL.js";import{a as vo}from"./chunk-FNFR3QI2.js";import{a as wo}from"./chunk-IDME3QFB.js";import{d as ho,e as To}from"./chunk-P6MBUJNT.js";import{a as go}from"./chunk-QVG4GOA5.js";import{a as yo}from"./chunk-SR5VKAMR.js";import{b as lo}from"./chunk-ZBSU6WZQ.js";import{d as mo,e as po,h as uo,j as _o}from"./chunk-XN45YXW3.js";import{b as fo}from"./chunk-PP43MII2.js";import{ab as so}from"./chunk-PVSNAFN3.js";import{b as X}from"./chunk-JYKQJVIF.js";import{l as L,m as J,q as Q}from"./chunk-GBQG32PI.js";import{o as Uo}from"./chunk-A3FIPWG3.js";import{Bb as q,Jb as ao,ac as co,m as W,s as z,t as F}from"./chunk-NTISK7TT.js";import{a as Ho}from"./chunk-QZUNX5I4.js";import{c as g}from"./chunk-TU7CE5HJ.js";import{Gb as V,Oa as O,Oc as zo,Rc as ro,Uc as j,Wc as Fo,Xc as G,Ya as Do,Yc as Go,fc as Po,sc as K,vb as to,vc as Z,wb as Oo,xc as Wo,zc as io}from"./chunk-YILNSICT.js";import{A as w,G as P,f as I}from"./chunk-L4N7WJIQ.js";import{ea as Y,pa as Mo}from"./chunk-LBCQTFOD.js";import{N as D,e as no,v as k,w as f}from"./chunk-V63HWKAL.js";import{H as $,T as A}from"./chunk-2EJYCNYZ.js";import{a as N}from"./chunk-B75PPTYD.js";import{f as u,m as s,o as a}from"./chunk-UGZFXKPB.js";s();a();var y=u(N()),R=u(co()),U=u(Uo());Mo();D();zo();Do();Wo();Po();s();a();Fo();Go();var fe=async o=>{let e=[];try{let t=await j(G.postYieldRecommend,o);t?.data&&(e=t.data)}catch(t){console.log(t)}return e},me=async o=>{try{let e=await ro(G.getMarketMap,o);if(e?.data)return e.data}catch(e){console.log(e)}return""},bo=async o=>{try{let{data:e={}}=await j(G.getTonMintlessInfo,o);return e}catch(e){console.log(e)}return{}};function Ao(o,e,t="0"){let n={coinAmountDisplay:J(0),currencyAmountDisplay:L(0,{symbol:e}),currencyAmountNoUnitDisplay:L(0,{symbol:e,useApproximate:!1})};if(!o.coinAmount)return n;let{coinAmount:i}=o,r=J(i),l=L(V(i,t),{symbol:e}),m=L(V(i,t),{symbol:e,useApproximate:!1});return n={coinAmountDisplay:r,currencyAmountDisplay:l,currencyAmountNoUnitDisplay:m},n}function Yo(o,e,t){return!Array.isArray(o)||!o?.length?[]:(o.forEach(n=>{let{coinAmountDisplay:i,currencyAmountDisplay:r,currencyAmountNoUnitDisplay:l}=Ao(n,e,t?.[n.coinId]||0);n.coinAmountDisplay=i,n.currencyAmountDisplay=r,n.currencyAmountNoUnitDisplay=l}),o)}function Vo(o,e){if(!Array.isArray(o)||!o?.length)return[];let t=e.reduce((n,i)=>(n[i.coinId]=i,n),{});return o.forEach(n=>{let i=n.baseCoinId===0?n.coinId:n.baseCoinId,r=t[i]||{},{imageUrl:l,symbol:m}=r;n.chainImage=l,n.chainSymbol=m}),o}function $o(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(n=>{let i=ho(e,n.coinId);return n={...n,...i},n})}function Ko(o){if(!Array.isArray(o)||!o?.length)return[];let e=[],t=o.filter(n=>+n.coinAmount>0);return t&&t.length>=2&&(e=[{symbol:o[0].symbol,image:o[0].image,chainImage:o[0].chainImage,coinAmount:0,currencyAmount:0,tokenType:"wallet_extension_dashboard_tab_overview",coinId:"",overview:!0}],(z(o[0])||F(o[0]))&&(e[0].coinId=o[0].coinId,e[0].addressType="")),e}function Zo(o){if(!Array.isArray(o)||!o?.length)return[];let e=[];return e=o.filter(t=>Boolean(t.localType)),e=Y(Y(e,t=>t.tokenSort),t=>-t.coinAmount),e}function jo(o,e){return!Array.isArray(o)||!o?.length?[]:o.map(n=>{if(n.overview&&(n.tokenType=e(n.tokenType)),z(n)&&!n.overview){let i=e(K[Z[n.addressType]]);n.chainName=i,n.tokenType=i}if(F(n)&&!n.overview){let i=e(K[Z[n.addressType]]);n.chainName=i,n.tokenType=i}return!z(n)&&!F(n)&&!n.tokenType&&(n.tokenType=n.chainName),n})}function De({aggregation:o,coinSymbol:e,btcAggregation:t,nearAggregation:n,coin:i}){let r=[],l=po(),m=mo(),d=(0,R.useSelector)(q),_=uo(),T=Io(i),v=Co(i),S=yo();return!o&&!t&&!n||(t?r=T:n?r=v:(r=l.find(M=>M.aggregation&&M.symbol===e)?.childrenCoin||[],r=$o(r,m)),r=Vo(r,S),r=Yo(r,d,_),r=Zo(r),r=[...Ko(r),...r],r=jo(r,f)),r}function Oe(o,e){let t=To(o,e),n=(0,R.useSelector)(q),i=_o(o),r=Ao(t,n,i);return(0,U.useCreation)(()=>({...t,...r}),[t,r])}function Pe(o,e,t){let{coinId:n,baseCoinId:i,symbol:r}=o,[l,m]=(0,y.useState)(null),d=(0,U.useLatest)(l),_=(0,y.useCallback)(async()=>{let{status:v,offlineAmount:S,expiredAt:E}=await bo({coinId:n,address:e});m(v===1?{desc:f("wallet_extension_airdrop_toast_claim_before_expire_new",{num:S,token:r,time:no(E,{format:"yyyyMMddHHmmss",locale:t})}),closable:!1,showTonMessage:!0}:null)},[n,e]),T=lo("wallet-asset",{onError:()=>{i===O&&d.current?.showTonMessage&&_()},pollingInterval:10*1e3});return(0,y.useEffect)(()=>{i===O&&n&&e&&_()},[i,n,e]),(0,y.useEffect)(()=>{let v=T?.data?.coinId;d.current?.showTonMessage&&v===n&&_()},[n,T]),l}function We(o,e){let t="isShowTonTipsAtCoinDetail",[n,i]=(0,y.useState)(null),r=k.get(t);return(0,y.useEffect)(()=>{!r&&e===io.MNEMONIC&&o?.coinId===O?i({desc:f("wallet_extension_alert_ton_asset"),onClose:()=>{k.set(t,!0),i(null)},closable:!0,showTonMessage:!0}):i(null)},[e,o?.coinId]),n}function No({canChangeDefaultAddress:o}){let e="firstTimeOpenDetailPage",t=(0,y.useRef)();return(0,y.useEffect)(()=>{let n=k.get(e)!==!1;!o||!t.current||!n||(k.set(e,!1),setTimeout(()=>{t.current?.setVisible(!0)},500),setTimeout(()=>{t.current?.setVisible(!1)},3500))},[o,t]),t}s();a();var p=u(N());var oo=u($());s();a();var x={refreshWrapper:"_refreshWrapper_7eog8_1",refreshIcon:"_refreshIcon_7eog8_5",hidden:"_hidden_7eog8_11",amount:"_amount_7eog8_14",refreshAnimation:"_refreshAnimation_7eog8_33",refresh:"_refresh_7eog8_1"};var qo={maxWidth:156,popupStyle:{borderRadius:4},modifiers:[{name:"offset",options:{offset:[86,-10]}},{name:"arrow",options:{padding:({popper:o})=>o.width/2}}]},Jo={14:36,15:32,16:32,17:28,18:28,19:24,20:24,21:24,22:20,23:20,24:20,25:20,26:18,27:18};function Qo({coinSymbol:o,amountDisplay:e,currencyDisplay:t}){let[n,i]=(0,p.useState)("hidden"),r=(0,p.useMemo)(()=>{let _=e.length,T={};return T.fontSize=Jo[_]||40,_>=28&&(T={fontSize:18,display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer"}),T},[e]),l=()=>{i("hidden")},m=(0,p.useCallback)(()=>{n!=="loading"&&i("show")},[n]),d=(0,p.useCallback)(()=>{n!=="loading"&&i("hidden")},[n]);return p.default.createElement("div",{className:"coin-detail-balance"},p.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,style:r,onMouseEnter:m,onMouseLeave:d,className:x.refreshWrapper},p.default.createElement(g.Box,{onAnimationEnd:l,className:(0,oo.default)(x.refreshWrapper,{[x.refreshAnimation]:n==="success"})},r.textOverflow?p.default.createElement(w,{layerClassName:"coin-detail-balance__tooltip",style:r,title:`${e} ${o}`,type:w.TYPES.neutral,placement:w.DIRECTION.bottom,...qo},e):e,p.default.createElement(vo,{className:(0,oo.default)(x.refreshIcon,{[x.hidden]:n==="hidden"}),status:n,handleRefresh:i}))),t&&p.default.createElement("div",{className:"coin-detail-balance__currency"},t))}var Xo=Qo;s();a();var h=u(N()),xo=u(Ho()),Bo=u($());D();s();a();var b={"coin-basic-info":"_coin-basic-info_1lgia_1",coinBasicInfo:"_coin-basic-info_1lgia_1","coin-basic-info__symbol":"_coin-basic-info__symbol_1lgia_5",coinBasicInfoSymbol:"_coin-basic-info__symbol_1lgia_5","coin-basic-info__name":"_coin-basic-info__name_1lgia_9",coinBasicInfoName:"_coin-basic-info__name_1lgia_9","coin-basic-info__info":"_coin-basic-info__info_1lgia_15",coinBasicInfoInfo:"_coin-basic-info__info_1lgia_15","coin-basic-info__info-icon":"_coin-basic-info__info-icon_1lgia_24",coinBasicInfoInfoIcon:"_coin-basic-info__info-icon_1lgia_24","coin-basic-info__tag":"_coin-basic-info__tag_1lgia_28",coinBasicInfoTag:"_coin-basic-info__tag_1lgia_28"};function Ro(o){o||(o=""),typeof o!="string"&&(o=o.toString());let e=o?.length;return e<=14?"18px":e<=18?"16px":e<=22?"14px":"12px"}function oe({data:o,coinSymbol:e,aggregation:t,coinTag:n}){let i=(0,xo.useHistory)();if(!o)return null;let r=e&&e!=="null",l=Boolean(t?e:o?.supportShowDetail),m=()=>{if(!o.coinId&&!r)return;let d={aggregation:t};o.coinId&&(d.coinId=o.coinId),r&&(d.coinSymbol=e);let _=`${so}${fo(d)}`;i.push(_)};return h.default.createElement("div",{className:b["coin-basic-info"]},h.default.createElement(g.FlexBox,{align:g.ALIGN.center,justify:g.ALIGN.center,className:b.coinInfo},h.default.createElement(X,{size:X.SIZE.md,className:b["coin-basic-info__symbol"],src:o.image,alt:o.symbol}),h.default.createElement(Q.AdaptiveText,{className:b["coin-basic-info__name"],text:o.symbol,ellipsis:{tooltip:!0},autoSize:Ro},o.symbol),n&&h.default.createElement(g.Box,{className:b["coin-basic-info__tag"]},h.default.createElement(I,{size:I.SIZE.md,type:I.TYPE.rounded,color:I.COLOR.gray},h.default.createElement(Q.Text,{nowrap:!0,style:{color:"inherit",fontSize:"inherit"}},n))),l&&h.default.createElement(w,{placement:w.DIRECTION.topRight,title:f("wallet_extension_cryptodetail_tooltips_token_info")},h.default.createElement(g.Box,{onClick:m,className:b["coin-basic-info__info"]},h.default.createElement(A,{className:(0,Bo.default)("okds-information-circle",b["coin-basic-info__info-icon"])})))))}var ee=oe;s();a();var c=u(N()),So=u(co());D();Oo();function ne({addressLabel:o,address:e,addressType:t,isDefaultAddress:n,baseCoin:i={},coin:r={},canChangeDefaultAddress:l,openAddressesDialog:m}){let d=No({canChangeDefaultAddress:l}),[_,T]=H(),v=(0,So.useSelector)(ao),S=wo(),E=to.includes(r?.localType),M=()=>{if(v){S();return}if(!_){T(e);let eo=f("wallet_extension_overview_receive_address_copied");t&&(eo=go(f,t,i?.symbol)),P.success({title:eo,desc:c.default.createElement("div",{className:"coin-detail-address__copy-message"},e)})}},Eo=()=>v?c.default.createElement("span",{className:"new-coin-detail-address-content-black"},W(e)):E?c.default.createElement("span",null,e):c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{className:"new-coin-detail-address-content-black"},e));return c.default.createElement("div",{className:"new-coin-detail-address-wrapper"},c.default.createElement("div",{className:"new-coin-detail-address",onClick:M},c.default.createElement("div",{className:"new-coin-detail-address-title"},f("extension_wallet_address_text_network_address",{network:o}),n&&l&&c.default.createElement(I,{className:"new-coin-detail-address-tag",size:I.SIZE.sm,type:I.TYPE.rounded,color:I.COLOR.grey},f("wallet_extension_btc_tag_default_address"))),c.default.createElement("div",{className:"new-coin-detail-address-inner"},c.default.createElement("div",{className:"new-coin-detail-address-content"},Eo()),c.default.createElement("div",{className:"new-coin-detail-address__icon"},c.default.createElement(A,{className:"okx-wallet-plugin-copy-1",style:{fontSize:"20px",color:v?"var(--okd-color-content-disabled)":"var(--okd-color-content-primary)"}})))),l&&c.default.createElement("div",{className:"new-coin-detail-address-wrapper__default-address"},c.default.createElement(w,{popupRef:d,placement:w.DIRECTION.topRight,title:f("wallet_extension_hover_change_address_format")},c.default.createElement("div",{onClick:m,className:"new-coin-detail-address-wrapper__address-content"},f("extension_wallet_settings_title_set_default"),c.default.createElement(A,{className:"okx-wallet-plugin-arrow-small-right coin-detail__body__overview-address__icon"})))))}var te=ne;s();a();var ko=u(N()),Lo=u($());function ie({className:o,children:e}){return ko.default.createElement("div",{className:(0,Lo.default)("coin-detail-overview-container",o)},e)}var re=ie;s();a();s();a();var B=u(N());D();function se({address:o}){let[e,t]=H();return B.default.createElement("div",{className:"coin-detail-address"},B.default.createElement("div",{className:"coin-detail-address__text",onClick:()=>{if(!e){t(o);let i=f("wallet_extension_overview_receive_address_copied");P.success({title:i,desc:B.default.createElement("div",{className:"coin-detail-address__copy-message"},o)})}}},W(o),B.default.createElement("div",{className:"coin-detail-address__icon"},B.default.createElement(A,{className:"okx-wallet-plugin-copy",style:{fontSize:"20px"}}))))}var ae=se;export{ae as a,Xo as b,ee as c,fe as d,me as e,De as f,Oe as g,Pe as h,We as i,No as j,te as k,re as l};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-XNXUAX5A.js.map
