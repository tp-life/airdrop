import{j as C}from"./chunk-OCTREJ3R.js";import{d as I}from"./chunk-XN45YXW3.js";import{o as _}from"./chunk-A3FIPWG3.js";import{$ as h,I as b,aa as B}from"./chunk-NTISK7TT.js";import{d as P,f as R}from"./chunk-37O7OMRA.js";import{Gb as y,Xb as w,Ya as W,ea as d,fc as v,ub as m,wb as k}from"./chunk-YILNSICT.js";import{a as M}from"./chunk-B75PPTYD.js";import{f as x,m as F,o as S}from"./chunk-UGZFXKPB.js";F();S();var s=x(M()),N=x(_());R();k();W();v();async function j({coinId:t,address:o,transaction:n}){let e={type:"simulate",base:{sequenceNumber:"",chainId:0,maxGasAmount:"",gasUnitPrice:"",expirationTimestampSecs:""},data:{abi:"[]",data:JSON.stringify(n)}},a=n.function.split("::")[0],r={coinId:t||m,address:o},i={fromAddr:o,toAddr:a},{info:u}=await b(r,i);e.base=u;let c=n.function.split("::")[1],p=await B({address:a,name:c});return e.data.abi=JSON.stringify(p),await P().signTransaction(e,o,d)}async function Y({address:t,transaction:o}){let n={coinId:m,address:t},e={fromAddr:t},a=await j({address:t,transaction:o}),{fee:r}=await h(n,e,a);return r}var Z=({coinId:t,address:o,requestId:n,gasUnitPrice:e,maxGasAmount:a}={})=>{let[r,i]=(0,s.useState)({}),[u,c]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),l=(0,N.useLatest)(t),O=()=>{c(!0),f(!1),i({})};function E(){i({gasUnitPrice:e,maxGasAmount:a,fee:y(e,a)}),f(!1),c(!1)}async function J(){try{let A={coinId:t,address:o},L={fromAddr:o},g="";n&&(g=await C(n));let T=await h(A,L,g);T&&l.current===t&&(i(T),f(!1))}catch{l.current===t&&f(!0)}finally{l.current===t&&c(!1)}}return(0,s.useEffect)(()=>{(async()=>{if(e&&a){E();return}!t||!o||await J()})()},[t,o,n,e,a]),{loading:u,aptosFee:r,estimateFailed:p,resetState:O}},$=()=>{let t=I();return(0,s.useMemo)(()=>{let n=t.find(e=>e.coinId==m)?.coinAmountInt||0;return w(n)},[m])};export{Y as a,Z as b,$ as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-CP6ZYOGS.js.map
