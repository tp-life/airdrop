import{a as Dt,b as Nt,d as wt,e as Bt}from"./chunk-3L3IHCAM.js";import{d as X}from"./chunk-OZBIAJIW.js";import{a as St}from"./chunk-VTOMPIUM.js";import"./chunk-MQQA225G.js";import"./chunk-PCXL7FJY.js";import"./chunk-5OA3WXQZ.js";import"./chunk-CNX3VVOM.js";import"./chunk-TCYNB4II.js";import"./chunk-3LIMLX72.js";import"./chunk-MOISJT5B.js";import"./chunk-ADRJK2SB.js";import"./chunk-VT47VYXB.js";import"./chunk-KSO662WW.js";import"./chunk-SF64G75T.js";import"./chunk-5AU4SCQT.js";import"./chunk-HCXRQ4GY.js";import"./chunk-Q4NRZ4HK.js";import"./chunk-AHNTWQZY.js";import"./chunk-JDOLDE6V.js";import"./chunk-3L4KZ2SK.js";import"./chunk-OZPHJXRI.js";import"./chunk-J2MASCEL.js";import"./chunk-J2Y34YM2.js";import"./chunk-NNO7KFUF.js";import"./chunk-3L5C5CQB.js";import"./chunk-CGBWDXEW.js";import"./chunk-NRWOOVOJ.js";import"./chunk-P6MBUJNT.js";import"./chunk-2XYRURE2.js";import"./chunk-LYFECSNW.js";import"./chunk-M7CDJYYG.js";import"./chunk-VUB7XYHG.js";import"./chunk-QZXK25MX.js";import"./chunk-J7ZUOIII.js";import"./chunk-Q2BK5I52.js";import"./chunk-QVG4GOA5.js";import"./chunk-4NCQWC2K.js";import"./chunk-BSEC3HD3.js";import"./chunk-SR5VKAMR.js";import"./chunk-2L5V4MTR.js";import"./chunk-762Y5MQL.js";import"./chunk-L56XCX6G.js";import"./chunk-7UJMDFGU.js";import"./chunk-PB7BCSCP.js";import"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import"./chunk-ERN756XV.js";import"./chunk-ILBS2H6D.js";import"./chunk-K3QXLRKR.js";import"./chunk-SUOZFPDI.js";import{a as Ct}from"./chunk-FMBJ4GRB.js";import"./chunk-L3G6DHBI.js";import"./chunk-QO3FK7IQ.js";import"./chunk-UWTAV26V.js";import"./chunk-A6RKGNRU.js";import"./chunk-BM73LLRW.js";import{a as b,c as dt,d as H,e as Z,f as O,h as xt,i as M,j as P,k as gt,p as $,q as J,r as _t,s as yt,t as Lt}from"./chunk-DD7QHK7G.js";import{b as ht}from"./chunk-G4TAWZEB.js";import"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import"./chunk-SJ65V67P.js";import"./chunk-6JGR2L6N.js";import"./chunk-ZBSU6WZQ.js";import"./chunk-S2V4K2JM.js";import"./chunk-GSWJ5GW7.js";import"./chunk-IVCA3VWI.js";import"./chunk-FLZ5KV6J.js";import"./chunk-OCTREJ3R.js";import"./chunk-RG4N2AAJ.js";import"./chunk-JPVBM3R5.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import"./chunk-A52XYJMT.js";import"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-BCT5GPKT.js";import"./chunk-FJBNQZUR.js";import"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import"./chunk-7OQVWENF.js";import"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import"./chunk-PP43MII2.js";import"./chunk-YV3R2S6K.js";import{a as Tt}from"./chunk-RJO5LUBF.js";import"./chunk-DRPGNVVL.js";import"./chunk-UEENMIFU.js";import"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import"./chunk-PVSNAFN3.js";import"./chunk-JYKQJVIF.js";import{q as T}from"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import{f as pt}from"./chunk-VWYA3Z7M.js";import{o as Q}from"./chunk-A3FIPWG3.js";import{ac as v,ga as ut}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import{a as C}from"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import{a as Yt}from"./chunk-QZUNX5I4.js";import"./chunk-IVA2TTR4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import{_ as ft,da as Kt}from"./chunk-KSCBZ3RY.js";import"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import"./chunk-35FUKWV2.js";import"./chunk-DHNKVM4B.js";import"./chunk-VL5VJIZ7.js";import{c as p}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{A as q,C as mt,o as at,w as ct}from"./chunk-L4N7WJIQ.js";import"./chunk-LBCQTFOD.js";import{N as R,w as g}from"./chunk-V63HWKAL.js";import"./chunk-S2ACKULX.js";import"./chunk-ZZ2UZY4M.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as Gt,T as nt}from"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as y}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-SY7RUBBT.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as l,m as e,o}from"./chunk-UGZFXKPB.js";e();o();var r=l(y()),W=l(v()),vt=l(Yt()),At=l(Q());R();Kt();e();o();var D=l(y()),z=l(v());e();o();var V=l(y());R();e();o();var A={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var _=l(y());var bt=l(Gt());R();var It=l(Q());var qt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},kt="hasReadTxHistoryFilterEntryTooltip",Zt=()=>{try{return localStorage.getItem(kt)??!1}catch{return!0}},$t=()=>{try{localStorage.setItem(kt,!0)}catch(s){console.error(s)}};function Jt({onClick:s}){let t=(0,_.useRef)();(0,_.useEffect)(()=>{Zt()||(t.current.setVisible(!0),$t())},[]);let n=a=>{t.current=a},i=(0,_.useRef)();return(0,It.useClickAway)(()=>{t.current.setVisible(!1)},i),_.default.createElement(q,{popupRef:n,placement:q.DIRECTION.bottomRight,title:g(qt.tooltip)},_.default.createElement(p.Box,{ref:i},_.default.createElement(nt,{onClick:s,className:(0,bt.default)("okds-filter",A.filter)})))}var Vt=Jt;e();o();var S=l(y());R();e();o();var I={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var U=l(y());function Qt({onChange:s,reject:t}){let[n,i]=(0,U.useState)(t);return(0,U.useEffect)(()=>{i(t)},[t]),{currentReject:n,onChangeReject:h=>u=>{let m=t,d={...m,[h]:u};i(d),dt(h,u).then(x=>{x?(i(d),s?.(d)):i(m)}).catch(()=>{i(m)})}}}var Ft=Qt;var Et={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Xt=s=>{let{currentReject:t,onChangeReject:n}=Ft(s);return S.default.createElement(p.Box,{className:I.root},S.default.createElement(p.Box,{className:I.textBox},S.default.createElement(T.Text,{warp:!0,strong:!0,size:T.SIZE.md,className:I.text},g(Et.hideValuelessNftTittle)),S.default.createElement(T.Text,{warp:!0,size:T.SIZE.xs,className:I.text,type:T.TYPE.secondary},g(Et.hideValuelessNftSubtitle))),S.default.createElement(mt,{onChange:n(b.hideValuelessNft),checked:t?.[b.hideValuelessNft]}))},jt=Xt;e();o();var k=l(y()),Rt=l(v());function te(){let s=(0,Rt.useDispatch)(),[t,n]=(0,k.useState)({[b.hideValuelessNft]:!1}),[i,a]=(0,k.useState)(!1),h=()=>H().then(x=>{n(x)}).catch(()=>{});(0,k.useEffect)(()=>{h()},[]);let u=()=>{a(!0)},m=()=>{a(!1)};return{reject:t,onChangeShowValueLess:x=>{n(x),s(O({})),setTimeout(()=>{m()},200)},openDialog:u,closeDialog:m,showRejectDialog:i}}var Ht=te;function ee(){let{reject:s,onChangeShowValueLess:t,openDialog:n,closeDialog:i,showRejectDialog:a}=Ht();return V.default.createElement(p.Box,{className:A.root},V.default.createElement(Vt,{onClick:n}),V.default.createElement(at,{title:g("wallet_extension_history_title_filter"),visible:a,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},V.default.createElement(jt,{onChange:t,reject:s})))}var Ot=ee;e();o();var tt={"retina-border-basic":"_retina-border-basic_12hb5_1",retinaBorderBasic:"_retina-border-basic_12hb5_1",root:"_root_12hb5_29",left:"_left_12hb5_68"};function oe(){let s=(0,z.useDispatch)(),t=(0,z.useSelector)(M);return D.default.createElement(St,{align:ct.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:n=>{s(O({mainCoinId:n}))}})}function re(){return D.default.createElement(p.Box,{className:tt.root},D.default.createElement(p.Box,{className:tt.left},D.default.createElement(oe,null)),D.default.createElement(Ot,null))}var Mt=re;e();o();var c=l(y()),L=l(v()),N=l(Q());var se=({txData:s,setTxData:t,explorerUrl:n,hasMoreData:i=!1,hasInitData:a})=>{let h=(0,L.useDispatch)(),u=(0,L.useSelector)(M),m=(0,L.useSelector)(xt),d=(0,L.useSelector)(pt),x=(0,L.useSelector)(gt),F=(0,L.useSelector)(P),[E,G]=(0,c.useState)(null),{run:w}=(0,N.useDebounceFn)(()=>{h(Z({...F}))},{wait:200}),K=(0,c.useCallback)(()=>{h(Z({...F},{scrollLoad:!0,hasMoreData:i,hasInitData:a}))},[u,i,a]);Bt({scrollContainer:E},w),(0,N.useInfiniteScroll)(K,{target:E,threshold:150});let[j,Y]=(0,c.useMemo)(()=>Dt(m,d),[m,d]),et=(0,N.useMemoizedFn)(()=>{t(null)});return c.default.createElement(c.default.Fragment,null,c.default.createElement(wt.HistoryList,{completedList:Y,pendingList:j,isLoading:x,onClick:t,onRepeat:w,onContainer:G,explorerUrl:n}),c.default.createElement(Nt,{visible:!!s,params:s,onRefresh:w,onClose:et}))},Pt=(0,c.memo)(se);e();o();var ie=()=>{let s=(0,vt.useHistory)(),t=(0,W.useDispatch)(),n=(0,W.useSelector)(P),i=ht()?.stringDates?.[0],[a,h]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),d=(0,At.useLatest)(u),[x,F]=(0,r.useState)([]),[E,G]=(0,r.useState)(!1),[w,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let Ut=[(async()=>{let B=await H()??{};return await ut({startDate:new Date(`${i} 00:00:00`).getTime(),...n,hideValuelessNft:B?.hideValuelessNft??!0,status:[C.PENDING,C.CONFIRMING,C.ERROR,C.SUCCESS,C.WITHDRAWING]})})()];Promise.all(Ut).then(([B])=>{let ot=(st,it)=>{let lt=st.length,Wt=it?st[lt-1]?.rowId:"";t(yt(Wt)),t(J(!1)),G(it),K(lt>0)},rt=B.content||[],zt=B.hasViewMore;t($(rt)),F(B?.explorerUrl||[]),ot(rt,zt)}).catch(()=>{t($([])),t(J(!1))}).finally(()=>{h(!1)})},[]);let j=()=>{s.goBack(),t(Lt()),t(_t()),t(ft())},Y=(0,r.useCallback)(()=>{d.current?m(null):j()},[u]);return r.default.createElement(X.PageContainer,{className:"tx-history__container"},r.default.createElement(Tt,{sticky:!1,className:"tx-history__navigator",title:g("wallet_extension_header_text_history"),onBack:j,closeable:!1,bordered:!1,customizeBackFn:Y}),a?r.default.createElement(Ct,null):r.default.createElement(r.default.Fragment,null,r.default.createElement(X.FilterContainer,null,r.default.createElement(Mt,null)),r.default.createElement(Pt,{txData:u,setTxData:m,explorerUrl:x,hasMoreData:E,hasInitData:w})))},zo=(0,r.memo)(ie);export{zo as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-7KG2RVG2.js.map
