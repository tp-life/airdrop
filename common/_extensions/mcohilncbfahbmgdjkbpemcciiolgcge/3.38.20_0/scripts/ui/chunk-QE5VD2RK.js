import{a as B,b as D,d as V}from"./chunk-36UM4YJX.js";import{b as l}from"./chunk-BM44DQAB.js";import{d as R}from"./chunk-BCT5GPKT.js";import{na as M,ob as x,va as U,wa as K,xa as j,y as et}from"./chunk-NTISK7TT.js";import{d as k}from"./chunk-45FKVGCF.js";import{na as _,oa as tt}from"./chunk-KSCBZ3RY.js";import{Pa as H,Qa as E,Ya as $,mb as S,nb as b,wb as v}from"./chunk-YILNSICT.js";import{G as O,pa as X}from"./chunk-LBCQTFOD.js";import{f as Z,m as s,o as n}from"./chunk-UGZFXKPB.js";s();n();var P={hideNoValue:"hideNoValue",hideManualHidden:"hideManualHidden",hideUnverifiedCollection:"hideUnverifiedCollection"},u={[P.hideNoValue]:!0,[P.hideManualHidden]:!0,[P.hideUnverifiedCollection]:!1};s();n();X();s();n();var W="nft_list_filters";s();n();var T={SHOW:0,MANUAL:1,AUTO:2};function Y(t){if(!t)return u;try{let e=localStorage.getItem(W);if(!e)return u;let r=JSON.parse(e);return r?r[t]??u:u}catch{return u}}var rt=t=>({projectCertificated:t.hideUnverifiedCollection,hiddenStatus:[t.hideManualHidden?void 0:T.MANUAL,t.hideNoValue?void 0:T.AUTO].filter(Boolean).join(",")}),q=t=>{let e=Y(t);return rt(e)},yt=(t,e)=>{let r=Y(t);return e?r[e]!==u[e]:!O(r,u)};s();n();tt();var F=Z(et());s();n();v();$();s();n();v();async function ot(t){try{return await(await k.networks).query(t)}catch{return[]}}async function I(){let t;try{let e=await ot();t=e?.length?e:S()}catch{t=S()}return M(t)}var G=(t,e)=>{let r=b({netWorkId:String(t.chain)})?.localType,{coinId:o,key:a}=e.get(r)??{},i="";return t.coverUrl?i=t.coverUrl:t.resourceType===1&&(i=t.resourceUrl),{...t,id:t.id,tokenId:t.tokenId,contractAddress:t.contractAddress,name:t.name,image:i,lastPrice:t.lastPrice,bestOfferPrice:t.bestOffer,salePrice:t.sale,floorPrice:t.floorPriceDetail,chain:t.chain,tokenStandard:V[t.tokenStandard]||B.UNKNOWN,isIdentification:t.certificateFlag===1,isNew:t.newNft===!0,collectionName:t.projectName,totalBalance:t.lookerNftCount,chainName:t.chainName,chainIcon:t.chainIcon,localType:r,accountAddress:t.ownerAddress,baseCoinId:o,baseCoinKey:a}},Q=async({projects:t="",chainIds:e="",saleStatus:r="",pageNo:o=1,pageSize:a=10,projectCertificated:i=!0,hiddenStatus:p="",address:m=""}={})=>{let N;if(!m)N={list:[],total:0,pageNo:o,pageSize:a};else{let g;try{g=await U({address:m,project:t,chain:e,saleStatus:r,pageNo:o,pageSize:a,projectCertificated:i,hiddenStatus:p});let L=await I(),C=new Map(L.map(f=>[f.localType,f]));N={list:g?.data?.list?.map(f=>G(f,C)),total:g.data.total,pageNo:o,pageSize:a}}catch{N={list:[],total:0,pageNo:o,pageSize:a,error:!0}}}return N},z=async({chainId:t,contractAddress:e,tokenId:r,looker:o})=>{if(!o)return{};let a;t=parseInt(t,10),t===H||t===E?a=await j({inscriptionIdProtocol:r,looker:o}):a=await K({chain:t,contractAddress:e,tokenId:r,looker:o});let i=await I(),p=new Map(i.map(m=>[m.localType,m]));return a?.data?G(a?.data,p):null};var w={list:[],total:0,pageNo:1,pageSize:D},at={nftFilterChain:[],nftListCatch:[],computedNftCurrency:!1,testNftCurrency:100,nftFilterInfo:{collectionFilter:[],saleStatusFilter:[]},firstSet:!1,nftFilterStatus:!1,nftCollectionLoadingStatus:!1,activeId:1,nftListData:{},listLoading:!0,listLoadingError:!1,hasHiddenNft:!1},d=_({name:"Nft",initialState:at,reducers:{setHasHiddenNft(t,{payload:e}){t.hasHiddenNft=e},setNftFilterChian(t,{payload:e}){t.nftFilterChain=e.list},setNftListCatch(t,{payload:{list:e}}){t.nftListCatch=e},setComputedNftCurrency(t,{payload:{computedNftCurrency:e}}){t.computedNftCurrency=e},setNftFilterInfo(t,{payload:e}){t.nftFilterInfo=e},setFirstSet(t,{payload:e}){t.firstSet=e},setActiveId(t,{payload:{id:e}}){t.activeId=e},setNftListData(t,{payload:{nftListData:e,walletId:r}}){t.nftListData[r]=e},setNftListLoading(t,{payload:e}){t.listLoading=e},setNftListLoadingError(t,{payload:e}){t.listLoadingError=e},setNftFilterStatus(t,{payload:{nftFilterStatus:e}}){t.nftFilterStatus=e},setNftCollectionLoadingStatus(t,{payload:{nftCollectionLoadingStatus:e}}){t.nftCollectionLoadingStatus=e},updateNftData(t,{payload:{newData:e={},walletId:r,id:o}}){t.nftListData?.[r]||(t.nftListData[r]={list:[],total:0});let a=t.nftListData[r],i=a.list.findIndex(p=>p.id===o);i!==-1?a.list[i]={id:o,...a.list[i]??{},...e}:(a.list.push({id:o,...e}),a.total+=1)},removeNftData:(t,{payload:{walletId:e,id:r}})=>{if(t.nftListData[e]){let o=t.nftListData[e],a=o.list.findIndex(i=>i.id===r);a!==-1&&(o.list.splice(a,1),o.total-=1)}}}}),Rt=t=>t[d.name].hasHiddenNft;var A=(0,F.createSelector)(t=>t[d.name].nftListData,t=>x(t),(t,e)=>t[e]??w),Wt=(0,F.createSelector)(t=>t[d.name].listLoading,A,(t,e)=>e===w?!0:t),Yt=(0,F.createSelector)(t=>t[d.name].listLoadingError,A,(t,e)=>e===w?!1:t),qt=t=>t[d.name].nftFilterInfo;var Gt=t=>t[d.name].activeId;var Qt=d.reducer,{actions:c}=d,J=t=>({...t,lastPrice:l(t.lastPrice),bestOfferPrice:l(t.bestOffer),salePrice:l(t.sale),floorPrice:l(t.floorPriceDetail)}),zt=c.setHasHiddenNft,Jt=c.updateNftData,Zt=c.removeNftData,Xt=c.setNftFilterInfo,$t=c.setNftListData;function te(t){return async(e,r)=>{let o=r(),a=x(o),{list:i}=A(o),p=q(a),{currentNetworkUniqueId:m=""}=R(o),N={projects:"",chainIds:m,pageNo:1,pageSize:D,saleStatus:"",...p},g=Object.assign(N,t);e(c.setNftListLoading(!0));let L=await Q(Object.assign(N,t)),C=i.map(f=>J(f)),h=[];g.pageNo>1&&h.push(...C),L.error?e(c.setNftListLoadingError(!0)):(e(c.setNftListLoadingError(!1)),h.push(...L.list.map(f=>J(f)))),e(c.setNftListData({nftListData:{list:h,total:L.total,pageNo:g.pageNo,pageSize:g.pageSize},walletId:a})),e(c.setNftListLoading(!1))}}function ee(t){return t.metamask.preferences.showNftAmount}async function re(t){let e=await z(t);return e?(e.lastPrice&&(e.lastPrice=l(e?.lastPrice)),e.salePrice&&(e.salePrice=l(e?.salePrice)),e.bestOfferPrice&&(e.bestOfferPrice=l(e?.bestOfferPrice)),e.floorPriceDetail&&(e.floorPriceDetail=l(e?.floorPriceDetail)),e):{}}export{W as a,P as b,u as c,T as d,Y as e,rt as f,yt as g,ot as h,Rt as i,A as j,Wt as k,Yt as l,qt as m,Gt as n,Qt as o,c as p,zt as q,Jt as r,Zt as s,Xt as t,$t as u,te as v,ee as w,re as x};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-QE5VD2RK.js.map
