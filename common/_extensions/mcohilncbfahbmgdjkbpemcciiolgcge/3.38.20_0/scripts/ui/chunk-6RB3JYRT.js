import{g as Le,h as Ae}from"./chunk-HU33TQ7G.js";import{a as Pe,d as Ge}from"./chunk-KSO662WW.js";import{b as Fe}from"./chunk-6TPN273S.js";import{a as Ne}from"./chunk-Q4NRZ4HK.js";import{c as Ee,d as ve}from"./chunk-4MFRD43G.js";import{a as ye}from"./chunk-3RJOXTRR.js";import{f as M}from"./chunk-NNO7KFUF.js";import{b as re,c as ie,f as se,i as ne,m as ae,w as ce,x as I}from"./chunk-XRZCHK4P.js";import{b as oe}from"./chunk-DDJWH3NH.js";import{h as te,l as _e,n as xe,p as he,r as ge,v as be,w as Te,y as we}from"./chunk-DMPLD3VG.js";import{a as pe}from"./chunk-WWUOPI5T.js";import{a as de}from"./chunk-A52XYJMT.js";import{a as fe}from"./chunk-YDUQEL3D.js";import{v as R}from"./chunk-FJBNQZUR.js";import{b as ke}from"./chunk-WD7752PC.js";import{a as Ce}from"./chunk-RJO5LUBF.js";import{a as ue}from"./chunk-UEENMIFU.js";import{o as me}from"./chunk-A3FIPWG3.js";import{ac as le,zb as ee}from"./chunk-NTISK7TT.js";import{c as L}from"./chunk-TU7CE5HJ.js";import{Gb as q,Ib as Y,Sb as v,Ub as y,Vb as K,Yb as V,_b as Z,dc as j,fc as B}from"./chunk-YILNSICT.js";import{o as Q,q as T,r as X}from"./chunk-L4N7WJIQ.js";import{G as U,pa as Re}from"./chunk-LBCQTFOD.js";import{N as $,l as O,w as m}from"./chunk-V63HWKAL.js";import{H as eo,T as J}from"./chunk-2EJYCNYZ.js";import{a as E}from"./chunk-B75PPTYD.js";import{f as _,m as c,o as l}from"./chunk-UGZFXKPB.js";c();l();var A=_(E()),d=_(le());B();c();l();B();$();function De(r,{symbol:t,decimals:o}={}){let i;return r=j(Z(r,o||18)),r==="0"?i="0":i=O.thousandFormat(r),t&&(i+=` ${t}`),i}function Se(r){let t=(0,d.useSelector)(ae),o=r||t,i=o?.isSupportEip1559?o?.maxFeePerGas||0:o?.gasPrice||0,a=o?.gasLimit||0;return Pe(V,K)(i,a)}function Be(r){let t=he(),{symbol:o,usdToThisRate:i}=(0,d.useSelector)(ee),a=q(t?.price,i),s=De(r,{symbol:t?.symbol,decimals:t?.decimals}),p=Ge({amount:r,rate:a,symbol:o},{useApproximate:!0});return`${s} ${p}`}function To(){let r=(0,d.useDispatch)(),t=ke(),o=(0,d.useSelector)(ie),i=(0,d.useSelector)(se),a=(0,d.useSelector)(ne),s=(0,d.useSelector)(re),{chainGasPrice:p,chainGasLimit:n,chainGasLoading:C,chainGasLoadFailed:x,stopPollingGasPrice:F,chainGasLimitLoading:h,chainGasLimitLoadFailed:P}=Ae({to:o,from:t,value:i,data:a,tokenAddress:s});return(0,A.useEffect)(()=>{r(I(p))},[p]),(0,A.useEffect)(()=>{r(I({gasLimit:n}))},[n]),{chainGasLoading:C,chainGasLoadFailed:x,stopPollingGasPrice:F,chainGasLimitLoading:h,chainGasLimitLoadFailed:P}}function wo(){let r=(0,d.useDispatch)(),{nonce:t,suggestedNonce:o,request:i}=Le();return(0,A.useEffect)(()=>{r(ce(o))},[t,o]),{nonce:t,suggestedNonce:o,request:i}}c();l();var D=_(E()),S=_(le());var Ie=_(me());var oo={mainTokens:[],chainTokens:[]},to=(r,t)=>{let o=(0,D.useRef)(oo),i=(0,S.useDispatch)(),a=(0,S.useSelector)(oe),s=be(t),p=ge(t),n=de(),C=r||n,x=()=>{let{chainTokens:F}=o.current;F.forEach(async({rpcUrl:h,chainId:P,account:g,address:G})=>{if(C!==g)return;let N=await p(G,g,G?null:await _e(h));i(te({chainId:P,account:g,address:G,balance:N}))})};(0,D.useEffect)(()=>{o.current=s},[s]),(0,Ie.useUpdateEffect)(()=>{a!==0&&x()},[a])},Lo=to;c();l();var e=_(E()),We=_(me()),He=_(eo());$();c();l();var ro=()=>{let r=fe();return()=>globalThis.platform.openTab({url:r.rpcGasUrl})},Me=ro;B();c();l();var u={"retina-border-basic":"_retina-border-basic_1xrkr_1",retinaBorderBasic:"_retina-border-basic_1xrkr_1",RpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",rpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",content:"_content_1xrkr_34",title:"_title_1xrkr_37","info-icon":"_info-icon_1xrkr_41",infoIcon:"_info-icon_1xrkr_41",box:"_box_1xrkr_46",customize:"_customize_1xrkr_51",money:"_money_1xrkr_94",row:"_row_1xrkr_97",defaultTip:"_defaultTip_1xrkr_100",checkBoxWrap:"_checkBoxWrap_1xrkr_106"};function io({onBack:r,rpcInfo:t={},customGasInfo:o={},chainGasInfo:i={},updateCustomGasInfo:a,stopPollingGasPrice:s,chainGasLimitLoadFailed:p=!1}){let{isSupportEip1559:n}=o,C=y(n?i.baseFeePerGas:i.gasPrice),[x,F]=(0,e.useState)(y(n?o.baseFeePerGas:o.gasPrice)),[h,P]=(0,e.useState)(y(o.maxPriorityFeePerGas)),[g,G]=(0,e.useState)(o.gasLimit),[N,W]=(0,e.useState)(o.isDefault),k=(0,e.useMemo)(()=>{let f={gasLimit:g,isDefault:N};return n?(f.baseFeePerGas=v(x),f.maxPriorityFeePerGas=v(h),f.maxFeePerGas=Y(f.baseFeePerGas,f.maxPriorityFeePerGas)):f.gasPrice=v(x),{...o,...f}},[g,x,N,o,n,h]),Ue=Se(k),Oe=Be(Ue),{extensionConfig:H,setExtensionConfig:$e}=pe("rpc_info"),[,qe,Ye]=Fe(H?.chainId),Ke=Me(),Ve=(0,e.useMemo)(()=>{let f=!Number(k.gasPrice);return k.isSupportEip1559&&(f=!Number(k.maxPriorityFeePerGas)),f||!Number(k.gasLimit)},[k]),Ze=(0,We.useMemoizedFn)(async()=>{let{gasLimit:f,...b}=k;b.isDefault&&(s(),await qe(b),Ee(t,H)&&await $e(t)),a(k)}),{loading:je,onClick:Je}=ye(Ze),Qe=[{actionType:M.ACTION_TYPE.CONFIRM,disabled:Ve,onClick:Je,loading:je}],Xe=async f=>{let b=f.target.checked;if(b)W(b),R();else{let z=Q.tip({children:m("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:m("wallet_extension_btn_general_confirm"),cancelText:m("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){await Ye(t?.chainId),W(b),z.destroy()},onCancel(){z.destroy()}})}};return e.default.createElement(L.Portal,{component:L.Container,className:u.RpcEvmSendEditNetworkFee},e.default.createElement(Ce,{title:m("wallet_transfer_subtitle_network_fee"),onBack:r,closeable:!1}),e.default.createElement("div",{className:u.content},e.default.createElement(T.Label,{title:e.default.createElement("div",{className:u.title},m("wallet_extension_transaction_input_label_network_fee"),e.default.createElement(J,{className:(0,He.default)("okx-wallet-plugin-information-circle",u["info-icon"]),onClick:Ke}))}),e.default.createElement("div",{className:u.box},e.default.createElement("div",{className:u.customize},e.default.createElement("div",{className:u.title},m("wallet_transfer_gasfee_subtitle_custom_gas_fee")),e.default.createElement("div",null,e.default.createElement("div",{className:u.money},e.default.createElement(Ne,{text:Oe,maxWidth:"215px"})))),e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:C,title:n?m("extension_wallet_transaction_text_maxbase_fee"):m("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:x,onChange:F})),n?e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:y(i.maxPriorityFeePerGas),title:m("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:h,onChange:P})):null,e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:i.gasLimit,title:m("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:T.TIP_TYPE.always,error:p&&m("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:g,onChange:G}))),e.default.createElement("div",{className:u.defaultTip},m("wallet_extension_mid_checkbox_setting_default"))),e.default.createElement(ue,{usePortal:!0,placeholder:!0,style:{zIndex:101}},e.default.createElement(L.Box,{className:u.checkBoxWrap},e.default.createElement(X,{onChange:Xe,checked:N},m("wallet_extension_bot_alert_default_gas",{networkName:t.name}))),e.default.createElement(M,{buttonGroup:Qe})))}var lt=e.default.memo(io);c();l();var ze=_(E());Re();var kt=()=>{let r=Te(),t=we(),{rpcNetworks:o=[]}=ve(),i=xe(()=>o,o,(a,s)=>!U(a,s));ze.default.useEffect(()=>{let a=t?.reduce((s,{walletIdentities:p})=>[...s,...p.map(({account:{mainnet:n}})=>n)],[]);i.forEach(async s=>{a.forEach(p=>{let n=s.chainId;r(n,void 0,{...s,account:p})})})},[t,i])};export{De as a,Se as b,Be as c,To as d,wo as e,Lo as f,lt as g,kt as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-6RB3JYRT.js.map
