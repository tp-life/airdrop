import{a as z}from"./chunk-2ZHRF3EM.js";import{a as f,b as B}from"./chunk-Y4NQNAEQ.js";import{a as P,b as v}from"./chunk-5OABWI4F.js";import"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-RJO5LUBF.js";import{p as T}from"./chunk-DRPGNVVL.js";import{a as k}from"./chunk-UEENMIFU.js";import{a as N}from"./chunk-PVSNAFN3.js";import"./chunk-JYKQJVIF.js";import"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import{o as D}from"./chunk-A3FIPWG3.js";import"./chunk-NTISK7TT.js";import"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import"./chunk-QZUNX5I4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import{d as x,f as Y}from"./chunk-37O7OMRA.js";import"./chunk-TU7CE5HJ.js";import"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{D as a,H as S,q as t}from"./chunk-L4N7WJIQ.js";import"./chunk-LBCQTFOD.js";import{N as M,w as e}from"./chunk-V63HWKAL.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{ca as w}from"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as G}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as F,m as u,o as _}from"./chunk-UGZFXKPB.js";u();_();var s=F(G()),l=F(D());M();Y();u();_();var A={root:"_root_1r48s_1"};var is=({history:L})=>{let n=a.useForm(),[r,Z]=s.default.useState({}),[O,E]=s.default.useState(null),[h,{setTrue:U,setFalse:y}]=(0,l.useBoolean)(!1),c=(0,s.useRef)(),I=(0,l.useMemoizedFn)(()=>{c.current=T(r.oldPassword).then(()=>(E(null),n.cleanErrors("oldPassword"),!0)).catch(()=>{let o=e("wallet_set_password_errortip_password_wrong");return E(o),n.setErrors({oldPassword:o}),!1})});(0,l.useThrottleEffect)(()=>{!r.oldPassword||I()},[r.oldPassword],{wait:500});let g=!!O||!r.oldPassword||!r.password||!r.confirm||r.password?.length<P||r.confirm?.length<P,b=(0,l.useMemoizedFn)(async()=>{let{password:o,confirm:m}=r;if(g||h)return;if(o!==m){n.setErrors({confirm:e("wallet_settings_reset_passord_errortip_input_error")});return}if(U(),c.current||I(),!await c.current){y();return}await x().modifyPassword(m)&&(S.success(e("wallet_edit_wallet_toast_renamed_success")),L.push(N)),y()},[g,r]),C=(0,s.useCallback)(async o=>{(o?.key==="Enter"||o?.keyCode===13)&&await b()},[]),V=z();return(0,s.useEffect)(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[]),s.default.createElement(B,{className:A.root,title:e("wallet_settings_reset_passord_maintitle_reset_password"),desc:e("wallet_extension_subtitle_password_unlock")},({formClass:o,formErrorClass:m,itemClass:p})=>s.default.createElement(a,{form:n,size:t.SIZE.lg,validateTrigger:["onChange","onBlur"],className:o,errorClassName:m,onValuesChange:(i,d)=>{Z(d)}},s.default.createElement(a.Item,{name:"oldPassword",style:{marginBottom:0},label:e("wallet_settings_reset_passord_subtitle_old_password"),className:p},s.default.createElement(t.Password,{autoFocus:!0,autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(a.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:p,label:e("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(t.Password,{autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(a.Item,{noStyle:!0,shouldUpdate:(i,d)=>i.password!==d.password},({getFieldValue:i})=>{let d=i("password");return s.default.createElement(v,{password:d})}),s.default.createElement(a.Item,{name:"confirm",className:p,label:e("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(t.Password,{autoComplete:"off",size:t.SIZE.xl,inputClassName:f.passwordInput,placeholder:e("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{n.cleanErrors("confirm")}})),s.default.createElement(k.FooterActions,{usePortal:!0,renderNative:!0,affixStyle:V,buttonGroup:[{loading:h,disabled:g,block:!0,type:w.TYPE.highlight,category:w.CATEGORY.fill,size:w.SIZE.lg,onClick:b,btnText:e("wallet_set_password_btn_confirm")}]})))};export{is as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-TWUPNYVZ.js.map
