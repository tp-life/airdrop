import{c as $,l as process,m as K,o as B}from"./chunk-UGZFXKPB.js";var W=$((b,j)=>{K();B();(function(L,D){typeof b=="object"&&typeof j=="object"?j.exports=D():typeof define=="function"&&define.amd?define([],D):typeof b=="object"?b._prohibitedMonitor=D():L._prohibitedMonitor=D()})(b,function(){return function(){"use strict";var x={"./packages/monitor/src/amp/helper.js":function(I,_,r){r.r(_),r.d(_,{getAmplitudeAPIKey:function(){return n},getAmplitudeProject:function(){return t},isInstanceInitialized:function(){return i},logSignUpComplete:function(){return d},setInstanceIdentity:function(){return o}});var p=r("./packages/monitor/src/common/variables.js"),E=r("./packages/monitor/src/common/constants.js");let i=s=>{var f;let{amplitude:c}=window;if(!c)return!1;let l=c.getInstance(s);return l==null||(f=l.options)===null||f===void 0?void 0:f.apiKey},d=s=>{let{signUpCompleted:f}=sessionStorage;f&&(s.logEvent("signup_completed"),sessionStorage.removeItem("signUpCompleted"))},t=s=>s||(p.default.isOKLink()?E.default.AMPLITUDE_PROJECT.oklink:p.default.isOKEx()||p.default.isInExtension()?E.default.AMPLITUDE_PROJECT.okx:E.default.AMPLITUDE_PROJECT.okcoin),n=s=>{var f;let c=p.default.isProdEnv(),l=(f=E.default.AMPLITUDE_KEY_MAP)===null||f===void 0?void 0:f[s];return l?c?l?.prod:l?.dev:""},o=(s,f,c)=>(s.setDeviceId(c||""),f===E.default.AMPLITUDE_PROJECT.web3?s.setUserId(c||""):p.default.getTk().then(l=>{s.setUserId(l||"")}),s)},"./packages/monitor/src/amplitude.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/monitor.js"),E=r("./packages/monitor/src/common/variables.js"),i=r("./packages/monitor/src/common/event-bus.js"),d=r("./packages/monitor/src/common/constants.js"),t=r("./packages/monitor/src/lib/libs-amplitude.js"),n=r("./packages/monitor/src/amp/helper.js");let o,s={RESOLVE:"RESOLVE",REJECT:"REJECT"},f={__initQueue__:Promise.resolve(!0),events:new i.default,getAmplitudeSDKInstance(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((l,u)=>{this.events.on(s.RESOLVE,e=>{l(e)}),this.events.on(s.REJECT,e=>{u(e)}),this.getInstance(c)})},getInstance(c){let l=(0,n.getAmplitudeProject)(c);return o&&clearTimeout(o),new Promise((u,e)=>{if(!(0,n.isInstanceInitialized)(l)){this.__initQueue__=this.__initQueue__.then(()=>this.__initInstance__(l)).then(m=>{u(m)}).catch(m=>{e(m)});return}let{amplitude:a}=window;if(a){let m=a.getInstance(l);(0,n.logSignUpComplete)(m),m.options&&this.events.emit(s.RESOLVE,m),u(m)}})},async __initInstance__(c){let l=(0,n.getAmplitudeProject)(c),u=await E.default.getDeviceId();return new Promise(e=>{window.amplitude||(0,t.default)();let a=window.amplitude.getInstance(l);if((0,n.isInstanceInitialized)(l))e(a);else{let m={includeUtm:!0,includeReferrer:!0,includeGclid:!0,logAttributionCapturedEvent:!0,language:E.default.getOkGlobal().locale};p.default.apiEndpoint?m.apiEndpoint=p.default.apiEndpoint:(E.default.isOKEx()||E.default.isOKLink())&&(m.apiEndpoint=`${window.location.host}/amplitude`,m.forceHttps=!1);let g=(0,n.getAmplitudeAPIKey)(l);m.headers={[d.default.REQUEST_HEADERS.deviceId]:u},a.init(g,null,m,v=>{this.events.emit(s.RESOLVE,v),(0,n.setInstanceIdentity)(v,l,u),sessionStorage.channelId&&v.setUserProperties({channel_id:sessionStorage.channelId}),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(S=>{v.logEvent(...S)}),sessionStorage.ampCacheEvents=""),(0,n.logSignUpComplete)(v),e(v)})}})}};E.default.isInBrowser()&&!E.default.shouldIgnoreAmpEvent()&&(o=setTimeout(()=>{o=0,f.getInstance()},5e3)),_.default=f},"./packages/monitor/src/common/constants.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/variables.js");let E="";if(p.default.isInBrowser()){let{cdnBaseUrl:t="//static.coinall.ltd"}=p.default.getOkGlobal();E=t}let i={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin"},d={[i.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[i.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[i.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[i.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"}};_.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:i,AMPLITUDE_KEY_MAP:d,CDN_BASE_URL:E,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"}}},"./packages/monitor/src/common/cookie.js":function(I,_,r){r.r(_);let p=i=>{try{let d=document.cookie.split(";"),t=null;for(let n=0;n<d.length;n++){let o=d[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(i)===0){t=o.substring(i.length+1,o.length);break}}return t}catch{return null}},E=function(i,d){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},n=d!==null?t.expirationDays:-1;if(n){let s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),n=s}let o=`${i}=${d}`;n&&(o+=`; expires=${n.toUTCString()}`),o+="; path=/",document.cookie=o};_.default={set:E,get:p}},"./packages/monitor/src/common/event-bus.js":function(I,_,r){r.r(_);class p{constructor(){this.listeners={}}on(i,d,t){let n=[],o=arguments.length;for(let s=0;s<o;s++)n.push(arguments[s]);n=n.length>3?n.splice(3,n.length-1):[],typeof this.listeners[i]<"u"?this.listeners[i].push({scope:t,callback:d,args:n}):this.listeners[i]=[{scope:t,callback:d,args:n}]}remove(i,d,t){if(typeof this.listeners[i]<"u"){let n=this.listeners[i].length,o=this.listeners[i].slice(0);for(let s=0;s<n;s++){let f=o[s];f.scope==t&&f.callback==d&&this.listeners[i].splice(s,1)}}}has(i,d,t){if(typeof this.listeners[i]<"u"){let n=this.listeners[i].length;if(d===void 0&&t===void 0)return n>0;for(let o=0;o<n;o++){let s=this.listeners[i][o];if((t?s.scope==t:!0)&&s.callback==d)return!0}}return!1}emit(i){if(typeof this.listeners[i]<"u"){let o=this.listeners[i].slice(),s=o.length;for(var d=arguments.length,t=new Array(d>1?d-1:0),n=1;n<d;n++)t[n-1]=arguments[n];for(let f=0;f<s;f++){let c=o[f];if(c&&c.callback){let l=t.concat(c.args);c.callback.apply(c.scope,l)}}}}}_.default=p},"./packages/monitor/src/common/seo.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/utils.js");let E=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex.com",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver.com",type:"naverSEO"}];_.default={getSeoType(){let i=p.default.getUrlDomain(document.referrer);for(let d=0;d<E.length;d++){let{keyword:t,type:n}=E[d];if(i.indexOf(t)>-1)return n}return""}}},"./packages/monitor/src/common/statex.js":function(I,_,r){r.r(_),r.d(_,{default:function(){return p}});function p(E){let i,d=new Set,t=(c,l)=>{let u=typeof c=="function"?c(i):c;if(u!==i){let e=i;i=l??typeof u!="object"?u:Object.assign({},i,u),d.forEach(a=>a(i,e))}},n=()=>i,f={setState:t,getState:n,subscribe:c=>(d.add(c),()=>d.delete(c)),destroy:()=>d.clear()};return i=E(t,n,f),f}},"./packages/monitor/src/common/utils.js":function(I,_,r){r.r(_);let p=/([^{]+)({.+})?/,E=/^{|}$/g,i=/^['"]|['"]$/g,d=/\/\/([^/]+)\//;_.default={serializeParams(t){let n=[],o=Object.keys(t);for(let s=0,f=o.length;s<f;s++){let c=o[s];n.push(`${encodeURIComponent(c)}=${encodeURIComponent(t[c])}`)}return n.join("&")},getUrlDomain(t){let n=t.match(d);return n?n[1]:""},getUrlQuery(t){return this.getParsedUrl(window.location.href).searchParams.get(t)||""},getParsedUrl(t){return new URL(t)},getChannelIdByUserAgent(){var t,n;let o=/channelId\/(\w+)/,s=(t=window.navigator.userAgent)===null||t===void 0||(n=t.match)===null||n===void 0?void 0:n.call(t,o);return s?.[1]},getChannelContext(t){let n={channelId:"",referralSrc:""};if(!t)return n;let o="",s="";if(t.searchParams.forEach((a,m)=>{let g=m.toLowerCase();g==="channelid"&&(o=a),g==="channelflag"&&(s=a)}),n.channelId=o||s,n.channelId)return n;let f="/join";if(t.pathname.endsWith(f)||!t.pathname.includes(f))return n;let c=t.pathname.split(`${f}/`)[1];if(!c)return n;let l=c.split("/")[0];if(l.startsWith("-"))return n;let u=l.split("-"),e=u[u.length-2]||"";return o=u[u.length-1],o&&(n.referralSrc=e,n.channelId=o),n},getOriginalUrl(t){return t.replace(/([?&])t=\d+(&)?/,(n,o,s)=>o&&s?o===s?"&":"?":"")},setCookie(t,n,o){let s=new Date;s.setTime(s.getTime()+o),document.cookie=`${t}=${encodeURIComponent(n)};expires=${s.toGMTString()};path=/`},getCookie(t){let n=new RegExp(`(^| )${t}=([^;]*)(;|$)`),o=document.cookie.match(n);return o?decodeURIComponent(o[2]):""},parseTarget(t){let n=t.match(p),o={key:"",data:{}};if(n){let s=n[1],f=n[2],c={};f&&f.replace(E,"").split(",").forEach(u=>{let e=u.split(":");e=e.map(g=>g.trim().replace(i,""));let[a,m]=e;c[a]=m}),o.key=s,o.data=c}return o},matchType(t,n){return Object.prototype.toString.call(t)===`[object ${n}]`},isArray(t){return this.matchType(t,"Array")},isObject(t){return this.matchType(t,"Object")},isInArray(t,n){if(Array.prototype.includes)return t.includes(n);for(let o=0,s=t.length;o<s;o++)if(t[o]===n)return!0;return!1},generateUUID(){let t=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let o=(t+this.cryptoRandom()*16)%16|0;return t=Math.floor(t/16),(n==="x"?o:o&3|8).toString(16)})},valueExists(t){return t!=null&&t!==""},passedNamingCheck(t){return!/[^a-z0-9_]/.test(t)},toFixed(t){return Number(t.toFixed(4))},toUnderLineFormat(t){return t.replace(/([A-Z])/g,(n,o,s)=>s===0?`${o.toLowerCase()}`:`_${o.toLowerCase()}`)},filterXSS(t){let n=/</g,o=/>/g,s=/'/g,f=/"/g;return t.replace(n,"&lt;").replace(o,"&gt;").replace(s,"&#39;").replace(f,"&#34;")},merge(t,n){let o={};return Object.keys({...t,...n}).forEach(s=>{if(n[s]!=null||t[s]!=null){var f;o[s]=(f=n[s])!==null&&f!==void 0?f:t[s]}}),o},cryptoRandom(){var t;if((t=window)!==null&&t!==void 0&&t.crypto){let n=new Uint32Array(1);return window.crypto.getRandomValues(n),n[0]/Math.pow(2,32)}return Math.random()},base64Id(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let o=0;o<22;++o)n+=t.charAt(Math.floor(this.cryptoRandom()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"./packages/monitor/src/common/variables.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/utils.js"),E=r("./packages/monitor/src/store.js");let i="oklink",d="okex",t="OKX_GLOBAL",n=typeof window<"u",o=Boolean(typeof window>"u"||typeof process<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:void 0,ASSETS_BUILD_VERSION:void 0,BUILD_TARGET_ENV:"extension"}.SSR_ENV),s=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,f=!0,c={_expires:{}},l={};if(n){l=window._okGlobal||window.okGlobal||{};let e=l.broker&&l.broker.is,a=localStorage.simulatedTrading==="1",{okjp:m}=l.site&&l.site.is||{};f=e||a||m===!0;let{ok_monitor:v='{ "_expires": {} }'}=localStorage;c=JSON.parse(v)}let u={};_.default={setEnv(e){let{screen:a}=window,{_tk:m}=localStorage,{systemLanguage:g,language:v}=navigator,{referrer:h}=document;u.site=this.getSiteInfo(),u.lcl=p.default.getCookie("locale"),u.fpid=p.default.getCookie("fingerprint_id"),h&&(h.length>256&&(h=h.substr(0,256)),u.rf=h),m&&(u.tk=m),u.lan=(g||v).toLowerCase();let S="0x0";if(a){let{width:O,height:A}=a;S=`${O}x${A}`}u.scr=S;let P=p.default.getCookie("first_ref");P&&(P.length>256&&(P=P.substr(0,256)),u.frf=P)},getEnv(){return u},isInApp(){return s},getDeviceId(){var e,a;let{deviceId:m}=E.default.getState();return m?Promise.resolve(m):(e=window.utils.ont)===null||e===void 0||(a=e.getDevId)===null||a===void 0?void 0:a.call(e)},toLocalStorage(e){let{key:a,value:m,maxAge:g}=e;c[a]=m,c._expires[a]=Date.now()+g,localStorage.ok_monitor=JSON.stringify(c)},removeLocalStorage(e){delete c[e],delete c._expires[e],localStorage.ok_monitor=JSON.stringify(c)},getClientValue(e){let a=sessionStorage.getItem(e);return a||this.getValueFromLocalStorage(e)},getValueFromLocalStorage(e){return Date.now()<c._expires[e]&&c[e]||""},syncUpLocalStorageToSessionStorage(e){if(sessionStorage.getItem(e))return;let a=this.getValueFromLocalStorage(e);a&&sessionStorage.setItem(e,a)},shouldIgnoreAmpEvent(){return f},__getOkGlobalSite(){return l.site||{}},getSiteInfo(){let e=this.__getOkGlobalSite().sign,a=this.__getOkGlobalSite().subSite;return e===d?!a||a===t?d:a.toLowerCase():e},isOKEx(){return this.__getOkGlobalSite().sign===d},isOKLink(){let e=this.__getOkGlobalSite();return e.sign===i||e.sign===d&&e.linkInOKX},isInSSR(){return o},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isMiniApp(){return window.inMiniApp},isInDesktop(){var e;return(e=window)===null||e===void 0||(e=e.navigator)===null||e===void 0||(e=e.userAgent)===null||e===void 0||(e=e.toLocaleLowerCase())===null||e===void 0?void 0:e.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(l.envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":l.envSign==="prod"},getOkGlobal(){return l},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return s&&window.jsbridge?window.jsbridge.getTK().then(e=>e||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"./packages/monitor/src/de-duplicate.js":function(I,_,r){r.r(_),r.d(_,{shouldReport:function(){return d}});let p={},E,i=t=>{E!==void 0&&clearTimeout(E),E=setTimeout(()=>{p={},E=void 0},t+500)},d=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,o=typeof t=="string"?t:t.action||t.anchor,s=+new Date,f=p[o]||0;return s-f<n?!1:(i(n),p[o]=s,!0)}},"./packages/monitor/src/error.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/variables.js");let E=p.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];_.default={getErrorInfo(i){let{message:d,filename:t,lineno:n,colno:o,error:s}=i,f="";s&&s.stack?(f=s.stack,f.indexOf("@")!==-1&&(f=`${d} 
\r ${f}`)):(s||d)&&(f=`ThrowError: ${JSON.stringify(s||d)} 
\r at ${t}: ${n}: ${o}`);let c=encodeURIComponent(window.location.href);return{msg:d,file:t,line:n,col:o,stack:f,url:c}},isReported(i){let{file:d,line:t,col:n}=i,o=`${d}__${t}__${n}`;return E.includes(o)},rememberError(i){let{file:d,line:t,col:n}=i,o=`${d}__${t}__${n}`;E.unshift(o),E.length>50&&E.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(E)},0)}}},"./packages/monitor/src/global/attrs.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/global/click.js"),E=r("./packages/monitor/src/global/expose.js"),i=r("./packages/monitor/src/common/constants.js");let{Configs:d}=i.default;_.default={listen(t){let n=o=>{t.logEvent({...o,category:"ok"})};this.preprocess(),p.default.listen(n,this),E.default.listen(n,this)},preprocess(){document.querySelectorAll(`[${d.ATTR_LISTEN}]`).forEach(n=>{let o=n.getAttribute(d.ATTR_LISTEN),s=o.indexOf(":");if(s>-1){let f=o.substring(0,s).trim(),c=o.substring(s+1).trim();f.split("+").forEach(u=>{n.setAttribute(`data-${u.trim()}`,c)}),n.removeAttribute(d.ATTR_LISTEN)}})}}},"./packages/monitor/src/global/click.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/utils.js"),E=r("./packages/monitor/src/common/constants.js");let{Actions:i,Configs:d}=E.default;_.default={listen(t,n){document.addEventListener("click",o=>{let{target:s}=o;s.getAttribute(d.ATTR_LISTEN)&&n.preprocess();let c=s.getAttribute(d.ATTR_CLICK);if(c){let l=p.default.parseTarget(c),{key:u,data:e}=l;u&&t({target:u,action:i.CLICK,params:e,extras:{area:e.area}})}})}}},"./packages/monitor/src/global/expose.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/utils.js"),E=r("./packages/monitor/src/common/constants.js");let i={},{Actions:d,Configs:t}=E.default;_.default={listen(n){this.trackFn=n;let o={threshold:[.5,1]},s=new window.IntersectionObserver(this.onSectionChange.bind(this),o);document.querySelectorAll(`[${t.ATTR_EXPOSE}]`).forEach(c=>{s.observe(c)}),this.observer=s},onSectionChange(n){n.forEach(o=>{let{target:s,isIntersecting:f}=o,c=s.getAttribute(t.ATTR_EXPOSE),l=p.default.parseTarget(c),{key:u,data:e}=l,a=Number(o.time.toFixed(2));if(f){let m=setTimeout(()=>{let g=i[u],v=s.getBoundingClientRect(),{innerHeight:h,innerWidth:S}=window,{top:P,bottom:O,left:A,right:T}=v;if((P>=0&&P<=h||O>=0&&O<=h)&&(A>=0&&A<=S||T>=0&&T<=S)){let{area:R,elementType:w,actionType:k}=e;delete e.area,delete e.elementType,delete e.actionType,this.trackFn({target:u,action:d.EXPOSE,params:{...e,time:a},extras:{area:R},actionType:k||"Show",elementType:w,anchor:w?u:""}),this.observer.unobserve(s),g.forEach(U=>{window.clearTimeout(U)}),delete i[u]}else g.shift()},t.EXPOSE_DURATION);i[u]||(i[u]=[]),i[u].push(m)}})}}},"./packages/monitor/src/lib/libs-amplitude.js":function(I,_,r){r.r(_),r.d(_,{default:function(){return E}});var p=r("./packages/monitor/src/common/variables.js");function E(){let{envSign:i,cdnBaseUrl:d}=p.default.getOkGlobal(),t=window.amplitude||{_q:[],_iq:{}},n=document.createElement("script");n.type="text/javascript",n.crossOrigin="anonymous",n.async=!0;let o="";switch(i){case"dev":o="cdndev";break;case"pre":o="cdnpre";break;case"daily":o="cdn";break;case"prod":o="cdn";break;default:o="cdn";break}p.default.isInExtension(),n.integrity="sha384-pOU6BcU7Xl8BUN1qGu7OTKvbAUHiErbL8FdKEnAhCwR47UmKCyC5mOM9Nqxe02PR",n.src="./scripts/lib/amplitude-8.2.3-min.gz.js",n.onload=function(){window.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};let s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s);function f(g,v){g.prototype[v]=function(){return this._q.push([v].concat(Array.prototype.slice.call(arguments,0))),this}}let c=function(){return this._q=[],this},l=["add","append","clearAll","prepend","set","setOnce","unset"];for(let g=0;g<l.length;g++)f(c,l[g]);t.Identify=c;let u=function(){return this._q=[],this},e=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(let g=0;g<e.length;g++)f(u,e[g]);t.Revenue=u;let a=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function m(g){function v(h){g[h]=function(){g._q.push([h].concat(Array.prototype.slice.call(arguments,0)))}}for(let h=0;h<a.length;h++)v(a[h])}m(t),t.getInstance=function(g){return g=(!g||g.length===0?"$default_instance":g).toLowerCase(),t._iq.hasOwnProperty(g)||(t._iq[g]={_q:[]},m(t._iq[g])),t._iq[g]},window.amplitude=t}},"./packages/monitor/src/logger.js":function(I,_,r){r.r(_),r.d(_,{default:function(){return f}});var p=r("./packages/monitor/src/common/utils.js"),E=r("./packages/monitor/src/common/variables.js"),i=r("./packages/monitor/src/common/cookie.js"),d=r("./packages/monitor/src/common/constants.js"),t=r("./packages/monitor/src/monitor.js");let n=null,o=!1;class s{constructor(l){E.default.setEnv(l)}logPV(){if(o)return Promise.resolve();let l={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};return o=!0,this.sendLogs(l)}logEvent(l){let u={},{category:e,action:a,target:m,params:g,extras:v,_m:h,anchor:S,elementType:P,actionType:O,tk:A}=l;if(Object.assign(u,{_ct:e,_act:a,_lb:encodeURIComponent(m||""),_anchor_en_name:encodeURIComponent(S||""),_element_type:encodeURIComponent(P||""),_action_type:encodeURIComponent(O||""),...this._getCommonData()}),u._tk=A||u._tk,p.default.isArray(g)){let T=0,C=0;g.forEach((R,w)=>{if(p.default.isObject(R)){let{value:k,random:U}=R,M=encodeURIComponent(k);U?u[`_unlist${C++}`]=M:u[`_reser${T++}`]=M}else u[`_reser${w}`]=encodeURIComponent(R)})}else if(p.default.valueExists(g)){let T=g;p.default.isObject(g)&&(T=JSON.stringify(g));let C=encodeURIComponent(T);u._v=C,u._reser0=C}if(v){v.page=encodeURIComponent(window.location.href);let T={};Object.keys(v).forEach(C=>{T[`__${C}`]=v[C]}),Object.assign(u,T)}return h&&(u._m=h),this.sendLogs(u)}_getCommonData(){let l={...E.default.getEnv()};localStorage._tk&&(l.tk=localStorage._tk);let{src:u,sessionId:e=""}=sessionStorage,a=E.default.getClientValue("pageId"),m=E.default.getClientValue("channelId"),{deviceId:g=p.default.base64Id(),eventId:v=1,sequenceNumber:h=1}=JSON.parse(i.default.get("_monitor_extras")||"{}");i.default.set("_monitor_extras",JSON.stringify({deviceId:g,eventId:v+1,sequenceNumber:h+1}));let S=JSON.stringify({_amp_rejected:p.default.isTargetingCookiesRejected(),_device_id:g,_event_id:v,_sequence_number:h,_uuid:p.default.generateUUID()}),P={_cid:m,_pgid:a,_source:u,_session_id:encodeURIComponent(e.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:S};return Object.keys(l).forEach(O=>{P[`_${O}`]=encodeURIComponent(l[O])}),P}sendLogs(l){let u=[];if(Object.keys(l).forEach(e=>{let a=l[e];p.default.valueExists(a)?u.push(`${e}=${a}`):delete l[e]}),E.default.isDevTestEnv()){let{console:e}=window;return e.groupCollapsed(`dev monitor: ${l._ct} > ${l._act}`),e.log(decodeURIComponent(JSON.stringify(l,null,2))),e.groupEnd(),Promise.resolve()}return E.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(e=>{if(e){let a=`_tk=${encodeURIComponent(e)}`,m=u.findIndex(g=>/^_tk/.test(g));m>-1?u[m]=a:u.push(a)}return this.addClientInfo(u.join("&"))}).catch(()=>this.addClientInfo(u.join("&"))):this.addClientInfo(u.join("&"))}addClientInfo(l){let u=`&_ts=${Date.now()}&_r=${Math.floor(p.default.cryptoRandom()*2147483648)}`,e=`${l}${u}`;return E.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(a=>{let m=a?`&_app_info=${encodeURIComponent(a)}`:"";return e=`${l}${m}${u}`,this.sendRequest(e)}).catch(a=>this.sendRequest(e)):this.sendRequest(e)}async sendRequest(l){let u=await E.default.getDeviceId(),e=`?_uid=${encodeURIComponent(u)}&${l}`;return new Promise((a,m)=>{let g=E.default.isInExtension()&&!E.default.isMiniApp();if(navigator.sendBeacon&&!g)navigator.sendBeacon(`/jsstat/${E.default.isOKLink()?"oklink":"sb"}${e}`),a();else{let v=g?`${t.default.dwApiEndpoint||"https://www.oklink.com/jsstat/s.gif"}${e}`:`/jsstat${E.default.isOKLink()?"/oklink":""}/s.gif${e}`,h=new XMLHttpRequest;h.open("GET",v),h.setRequestHeader(d.default.REQUEST_HEADERS.deviceId,u),h.onload=()=>h.status!==200?m(new Error(`Error ${h.status}:${h.statusText}`)):a(),h.onerror=()=>{m(new Error(`Error ${h.status}: ${h.statusText}`))},h.send(),setTimeout(()=>{a()},150)}})}}function f(c){return n||(n=new s(c),n)}},"./packages/monitor/src/monitor.js":function(I,_,r){r.r(_),r.d(_,{default:function(){return l}});var p=r("./packages/monitor/src/common/utils.js"),E=r("./packages/monitor/src/common/constants.js"),i=r("./packages/monitor/src/common/variables.js"),d=r("./packages/monitor/src/error.js"),t=r("./packages/monitor/src/logger.js"),n=r("./packages/monitor/src/global/attrs.js"),o=r("./packages/monitor/src/amplitude.js"),s=r("./packages/monitor/src/store.js"),f=r("./packages/monitor/src/de-duplicate.js");let c=!1;class l{constructor(e){i.default.isInSSR()||(this.commonParams=e.commonParams||{},this._logger=(0,t.default)(e),this._category=e.product,e.withPV&&this.delayReportPV(),c||(this._initEventListener(),c=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(e){if(/^https?:\/\//.test(e))throw new Error('The content of the URL can not include protocol type as a substring such as "http://" or "https://".');l.apiEndpoint=e}setDWApiEndpoint(e){l.dwApiEndpoint=e}report(e){let{type:a,value:m}=e;if(i.default.isInSSR())return Promise.resolve();let g=m;return(p.default.isObject(g)||p.default.isArray(g))&&(g=JSON.stringify(g)),this._logger.logEvent({category:"performance",action:a,params:g})}logPV(){return this._logger.logPV()}logAmplitudeEvent(e,a,m){if(i.default.isInSSR()||i.default.shouldIgnoreAmpEvent())return Promise.resolve();let g="",v=!1;p.default.isObject(m)&&(g=m.ampProject,v=m.ignoreBackUp);let h={};for(let S in a)Object.prototype.hasOwnProperty.call(a,S)&&(h[S]=a[S]);if(h.monitor_after_navigation){delete h.monitor_after_navigation;let S=JSON.parse(sessionStorage.ampCacheEvents||"[]");return S.push([e,h]),sessionStorage.ampCacheEvents=JSON.stringify(S),Promise.resolve()}return o.default.getInstance(g).then(S=>{S.logEvent(e,{...h,site:i.default.getSiteInfo()}),v||this.act(e,a,{isSyncAMP:!1})})}resetAmplitudeUser(){return i.default.isInSSR()?Promise.resolve():o.default.getInstance().then(e=>(e.setUserId(null),e.regenerateDeviceId(),Promise.resolve()))}track(e,a,m,g){if(i.default.isInSSR())return Promise.resolve();let v={category:this._category,action:m,target:a,params:g,extras:{area:e}};if(p.default.isObject(e)){let{area:h,action:S,target:P,params:O}=e;Object.assign(v,{action:S,target:P,params:O,extras:{area:h}})}return this._logger.logEvent(v)}act(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return i.default.isInSSR()||!(0,f.shouldReport)(e)?Promise.resolve():new Promise((g,v)=>{setTimeout(()=>{this._act(e,a,m).then(g,v)},0)})}async _act(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:g,...v}=this.commonParams||{},h={web_mode_okx:p.default.isInArray(E.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},P=Object.assign({},i.default.isOKEx()?h:{}),O=m?.tk||g,A={category:this._category,params:a,_m:"1"};p.default.isObject(a)&&(A.params=p.default.merge({...v,...P},a),P=p.default.merge(i.default.isOKLink()?{...v,...P}:P,a));let T;typeof e=="string"?(T=e,A.action=e):(T=e.action||e.anchor,A.action=T,A.anchor=e.anchor,A.actionType=e.actionType,A.elementType=e.elementType,A={...A,params:p.default.merge(A.params,e.params||{})},O=e.tk||O,P=p.default.merge(P,e.params)),A.tk=O;let{needDurationActions:C,needDurationActionParams:R,actionTriggerTimes:w,setActionTriggerTimes:k,setNeedDurationActionParams:U}=s.default.getState();if(i.default.isEnableAMP()&&m!==null&&m!==void 0&&m.isSyncAMP){let M=e?.ampProject;this.logAmplitudeEvent(T,P,{ampProject:M,ignoreBackUp:!0})}return p.default.isInArray(C,T)?(w[T]=Date.now(),k(w),R[T]=A,U(R),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(A)}_initEventListener(){window.addEventListener("load",()=>{n.default.listen(this._logger)}),window.addEventListener("error",e=>{let a=d.default.getErrorInfo(e);d.default.isReported(a)||(this._logger.logEvent({category:"error",action:"report",extras:a}),d.default.rememberError(a))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:e,needDurationActionParams:a,actionTriggerTimes:m,setNeedDurationActions:g,setNeedDurationActionParams:v,setActionTriggerTimes:h}=s.default.getState();e.length&&e.forEach(S=>{a[S].params.duration=Date.now()-m[S],this._logger.logEvent(a[S])}),g([]),v({}),h({})})}initABTest(e){let a="ab_experiment";e!=null&&e.exper_flagKey&&e!==null&&e!==void 0&&e.exper_variant&&(Object.assign(this.commonParams,e),this.act(a))}setCommonParams(e){this.commonParams={...this.commonParams,...e}}triggerReportDuration(e){let{needDurationActions:a,setNeedDurationActions:m}=s.default.getState();p.default.isInArray(a,e)||(a.push(e),m(a))}}},"./packages/monitor/src/store.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/statex.js");let E=(0,p.default)(i=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:d=>i(()=>({deviceId:d})),setNeedDurationActions:d=>i(()=>({needDurationActions:d})),setNeedDurationActionParams:d=>i(()=>({needDurationActionParams:d})),setActionTriggerTimes:d=>i(()=>({actionTriggerTimes:d}))}));_.default=E},"./packages/monitor/src/web.js":function(I,_,r){r.r(_);var p=r("./packages/monitor/src/common/constants.js"),E=r("./packages/monitor/src/common/seo.js"),i=r("./packages/monitor/src/common/utils.js"),d=r("./packages/monitor/src/monitor.js"),t=r("./packages/monitor/src/common/variables.js"),n=r("./packages/monitor/src/amplitude.js"),o=r("./packages/monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:s}=p.default,f=(c,l)=>{if(t.default.isInSSR())return;let{pathname:u}=window.location;sessionStorage.channelId=c,t.default.toLocalStorage({key:"channelId",value:c,maxAge:s}),l?(sessionStorage.referralSrc=l,t.default.toLocalStorage({key:"referralSrc",value:l,maxAge:s})):(sessionStorage.removeItem("referralSrc"),t.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=u,t.default.toLocalStorage({key:"pageId",value:u,maxAge:s})};_.default={monitor:{get amplitude(){return t.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((l,u)=>{u("Currently not a browser environment!")})}}:n.default},newInstance(c){return t.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new d.default(c)},saveChannelId(c){f(c)},getChannelId(){return sessionStorage.channelId},setDeviceId(c){let{setDeviceId:l}=o.default.getState();l(c)},getChannelContextFromUrl(c){return i.default.getChannelContext(i.default.getParsedUrl(c))}},parseUrl(){let c=i.default.getParsedUrl(window.location.href),l=c.searchParams.get("src");l&&sessionStorage.setItem("src",l),this.parseChannelId(c)},parseChannelId(c){let l=i.default.getChannelIdByUserAgent(),u=E.default.getSeoType(),e=i.default.getChannelContext(c),a=e.channelId,m=e.referralSrc;if(t.default.isInDesktop()&&l&&(a=l,m=""),!a&&u&&(a=u),a=i.default.filterXSS(a),a){f(a,m);return}t.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(t.default.syncUpLocalStorageToSessionStorage("referralSrc"),t.default.syncUpLocalStorageToSessionStorage("pageId"))},init(){t.default.isInSSR()||(this.parseUrl(),!i.default.getCookie("first_ref")&&document.referrer&&i.default.setCookie("first_ref",document.referrer,s),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),window.utils=window.utils||{},window.utils.monitor=this.monitor)},saveChannelId(c){f(c)}}}},L={};function D(I){var _=L[I];if(_!==void 0)return _.exports;var r=L[I]={exports:{}};return x[I](r,r.exports,D),r.exports}(function(){D.d=function(I,_){for(var r in _)D.o(_,r)&&!D.o(I,r)&&Object.defineProperty(I,r,{enumerable:!0,get:_[r]})}})(),function(){D.o=function(I,_){return Object.prototype.hasOwnProperty.call(I,_)}}(),function(){D.r=function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})}}();var y={};return function(){D.r(y);var I=D("./packages/monitor/src/web.js");I.default.init(),y.default=I.default.monitor}(),y=y.default,y}()})});export{W as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-YV3R2S6K.js.map
