import{e as Ne,f as we,h as Ee,j as ye,l as E}from"./chunk-ZVOB6UOQ.js";import{c as X,e as $}from"./chunk-VT47VYXB.js";import{a as w,b as r}from"./chunk-KSO662WW.js";import{c as C,e as Ie}from"./chunk-P6MBUJNT.js";import{a as be}from"./chunk-2XYRURE2.js";import{o as ko}from"./chunk-A3FIPWG3.js";import{G as Ge,K as ve}from"./chunk-NTISK7TT.js";import{_ as T}from"./chunk-CU7RFE6B.js";import{Gb as Q,Jb as Te,fc as _o}from"./chunk-YILNSICT.js";import{G as De,o as _}from"./chunk-L4N7WJIQ.js";import{d as K,pa as go}from"./chunk-LBCQTFOD.js";import{N,w as e}from"./chunk-V63HWKAL.js";import{ca as a}from"./chunk-2EJYCNYZ.js";import{a as Co}from"./chunk-V2K75WCG.js";import{a as g}from"./chunk-B75PPTYD.js";import{f as u,m as t,o as n}from"./chunk-UGZFXKPB.js";t();n();var c=u(g());var s=u(Co());go();N();var y=u(ko());_o();t();n();t();n();var ee=u(g());N();t();n();var k=u(g());var xo=({title:l,text:m,...p})=>k.default.createElement(_.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:D=>k.default.createElement(D,null,k.default.createElement("div",{className:"tx-check-dialog__content"},k.default.createElement("div",{className:"tx-check-dialog__content-title"},l),k.default.createElement("div",{className:"tx-check-dialog__content-text"},m))),cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},...p}),O=k.default.memo(xo);var Po=({visible:l,onConfirm:m,onCancel:p})=>ee.default.createElement(O,{visible:l,title:e("wallet_extension_transaction_popup_failed_transaction"),text:e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_skip"),onConfirm:m,onCancel:p}),oe=ee.default.memo(Po);t();n();var te=u(g());N();var To=({visible:l,onConfirm:m,onCancel:p})=>te.default.createElement(O,{visible:l,title:e("wallet_extension_transaction_popup_pending_transaction"),text:e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:m,onCancel:p,hideCloseBtn:!0}),ne=te.default.memo(To);t();n();var ie=u(g());N();t();n();var ae=u(g());var Do=({...l})=>ae.default.createElement(_.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:_.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},...l}),Fe=ae.default.memo(Do);var Go=({visible:l,onConfirm:m,onCancel:p})=>ie.default.createElement(Fe,{visible:l,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:p?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:m,onCancel:p||(()=>{})}),se=ie.default.memo(Go);t();n();var i=u(g());N();function vo({visible:l,onConfirm:m,onCancel:p,data:D}){let{userGasInfo:S,updateGasInfo:U,baseCoin:F}=D,{gasPrice:Y,maxFeePerGas:z}=U,{supportEip1559:B,gasLimit:x,gasPrice:L,maxFeePerGas:W}=S,A=B?W:L,Z=X(A,x,F),P=$(A,x),R=B?z:Y,G=X(R,x,F),H=$(R,x);return i.default.createElement(_.Prompt,{visible:l,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:m,onClose:p,confirmText:e("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},renderContent:v=>i.default.createElement(v,null,i.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},e("extension_toast_title_transaction_replace")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},e("extension_toast_subtitle_gasincrease")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_current_transaction")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},Z),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},P)),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_gasprice")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},G),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},H)))})}var re=(0,i.memo)(vo);var ce=({children:l,btnProps:m,dataForCheck:p,whetherCheckRepeat:D,whetherCheckGas:S,onFailedCancel:U,onFailedConfirm:F,onPendingCancel:Y,onPendingConfirm:z,onRepeatCancel:B,onRepeatConfirm:x,onGasReplaceCancel:L,onGasReplaceConfirm:W,onClick:A,beforeClick:Z,afterClick:P})=>{let{fetchParams:R,userGasInfo:G,baseCoinAmountUse:H}=p,v=(0,c.useRef)([]),V=(0,c.useRef)(E.NEW),le=(0,c.useRef)({}),h=(0,c.useRef)({}),pe=(0,c.useRef)(!1),[Be,{setTrue:Ae,setFalse:me}]=(0,y.useBoolean)(!1),[Re,{setTrue:Oe,setFalse:fe}]=(0,y.useBoolean)(!1),[Se,{setTrue:Ue,setFalse:ue}]=(0,y.useBoolean)(!1),[Ye,{setTrue:ze,setFalse:de}]=(0,y.useBoolean)(!1),{coinId:j,from:he,to:Le,amount:We,gasPrice:Ze}=R,{baseCoin:ge}=be(j,!0),{coinAmountInt:He}=Ie(ge.coinId),Ve=async()=>{let o={checkTypes:[T.REPEAT,T.OVERWRITTEN],coinId:j,from:he,to:Le,amount:We,gasPrice:Ze},[{data:f=[]},{data:I}]=await Promise.all([ve(o),Ge({coinId:j,address:he})]);v.current=f;let J=I?.info?.gasPrice||{};return le.current=J,f},b=()=>v.current,je=()=>le.current,_e=()=>h.current,Me=()=>{let f=b().find(ho=>ho?.checkType===T.OVERWRITTEN)||{},{gasPrice:I,priorityFee:J}=f;return{originGasPrice:Q(I,1.1),originPriorityFee:Q(J,1.1)}},qe=()=>{V.current=E.ON_CHAIN},Je=()=>{V.current=E.NEW},Ke=o=>(h.current={...h.current,...o},h.current),Qe=()=>{pe.current=!0},Xe=()=>{De.error({title:e("extension_toast_text_insufficient_balance")})},M=r(()=>{let o={nonce:0,updateGasInfo:null},f=v.current.find(I=>I?.checkType===T.OVERWRITTEN)||{};return V.current===E.NEW?o.nonce=f.newNonce:o.nonce=f.nonce,pe.current&&(h.current.gasPrice||h.current.maxFeePerGas)&&(o.updateGasInfo=h.current),o},A),$e=w(Ae,C),eo=w(Oe,C),oo=o=>we(o,$e,eo),to=w(Ke,ze,C),Ce=S?o=>Ee(o,{userGasInfo:G,serverGasInfo:je(),originTxGasInfo:Me()},to):K,no=w(Xe,P,C),ao=o=>{let f=Te(He,H);return ye(o,{userGasInfo:G,updateGasInfo:_e(),baseCoinAmountAvailable:f},no)},ke=D?o=>(Ne(o,T.REPEAT)&&(Ue(),C()),o):K,xe=r(b,ke,M),q=r(qe,xe),Pe=r(Je,xe),io=r(U,me,Pe),so=r(F,me,b,Ce,q),ro=r(Y,fe,Pe),co=r(z,fe,b,Ce,q),lo=r(B,ue,P),po=r(x,ue,M),mo=r(L,de,P,C),fo=r(Qe,W,de,b,ao,q),uo=r(Z,Ve,oo,ke,M,P);return c.default.createElement(c.default.Fragment,null,c.default.createElement(a,{category:a.CATEGORY.fill,type:a.TYPE.highlight,size:a.SIZE.lg,block:!0,...m,onClick:uo},l),c.default.createElement(oe,{visible:Be,onCancel:io,onConfirm:so}),c.default.createElement(ne,{visible:Re,onCancel:ro,onConfirm:co}),c.default.createElement(se,{visible:Se,onCancel:lo,onConfirm:po}),c.default.createElement(re,{visible:Ye,onCancel:mo,onConfirm:fo,data:{baseCoin:ge,userGasInfo:G,updateGasInfo:_e()}}))},bo=ce;ce.propTypes={children:s.default.node,btnProps:s.default.object,dataForCheck:s.default.object,whetherCheckRepeat:s.default.bool,whetherCheckGas:s.default.bool,onFailedCancel:s.default.func,onFailedConfirm:s.default.func,onPendingCancel:s.default.func,onPendingConfirm:s.default.func,onRepeatCancel:s.default.func,onRepeatConfirm:s.default.func,onClick:s.default.func,beforeClick:s.default.func,afterClick:s.default.func};ce.defaultProps={children:null,btnProps:{},dataForCheck:{},whetherCheckRepeat:!1,whetherCheckGas:!0,onFailedCancel:()=>{},onFailedConfirm:()=>{},onPendingCancel:()=>{},onPendingConfirm:()=>{},onRepeatCancel:()=>{},onRepeatConfirm:()=>{},onClick:()=>{},beforeClick:()=>{},afterClick:()=>{}};t();n();export{bo as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-F23OPFFP.js.map
