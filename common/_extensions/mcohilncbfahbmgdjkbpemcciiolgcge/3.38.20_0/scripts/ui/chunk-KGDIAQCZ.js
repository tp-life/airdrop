import{a as me}from"./chunk-QBZA6BV4.js";import{b as U}from"./chunk-5UQNMD2N.js";import{a as T}from"./chunk-BU5U5Q5F.js";import{b as ee,c as te,d as re,e as oe,f as k,l as ne}from"./chunk-VZDVLWJS.js";import{a as g}from"./chunk-FHG3YZGF.js";import{c as I}from"./chunk-OMSBOWDZ.js";import{c as ce}from"./chunk-VSDQKS4O.js";import{d as ae,l as ie}from"./chunk-MXDITV4U.js";import{c as se}from"./chunk-2L5V4MTR.js";import{Ma as d,N as Z,Na as P,Ya as J,pb as w,sa as C,ta as L,ua as z}from"./chunk-762Y5MQL.js";import{k as B}from"./chunk-L56XCX6G.js";import{a as Q}from"./chunk-QZUNX5I4.js";import{a as h,b as Pe}from"./chunk-ORQMOT6Z.js";import{L as Y,M as K,S as V,a as H,b as y,g as $,pa as F}from"./chunk-LBCQTFOD.js";import{J as j,K as q,N as A,a as R,b as X}from"./chunk-V63HWKAL.js";import{a as _e}from"./chunk-B75PPTYD.js";import{f as b,m as c,o as m}from"./chunk-UGZFXKPB.js";c();m();F();A();Pe();c();m();A();var Te=t=>{let{pathname:e}=ce(t);return z.find(o=>new RegExp(o.reg).test(e))?.params||{}},Se="dex_source_env",Re="dex-swap/bridge",Ae="dex-swap/meme",N=()=>{if(R())return{};if(g())return U.g.get(Se);if(P()){let t=C.SWAP,e=window?.location?.hash;e?.indexOf(Re)>-1?t=C.BRIDGE:e?.indexOf(Ae)>-1&&(t=C.MEME);let r=L.PLUGIN;return me()&&(r=L.TGAPP,U.get("pageSource")==="bot"&&(r=L.COMMAND)),{source:r,business_type:t,trade_dialog:"no"}}return Te(q.href)};c();m();F();function O(t){let e={...t};return Object.keys(e).forEach(r=>{let o=t[r];(Y(o)||o===""||K(o))&&delete e[r]}),e}var Ce=[0],tt=()=>new AbortController,Le=()=>Promise.reject(),rt=t=>t?.status===h.STATUS_CODE?.ERR_CANCELED;async function D(t={}){let e=t;if(P()&&(e=await B.global?.interceptorHeaders(t),e.url=`https://${B.global.getApiHostname()}${e.url}`),!R()&&g()&&!P()){e.headers||(e.headers={});let r=N();e.headers.Referer_URL=r.iframe_referrer,r.widget_version&&(e.headers.Widget_version=N().widget_version)}return y(e.params)&&(e.params=O(e.params)),H(e.data)?e.data=e.data.map(r=>O(r)):y(e.data)&&(e.data=O(e.data)),e.needSign=!0,e.customToLogin=Le,e}function W(t){return t.then(e=>{let{data:r}=e;return Ce.includes(r?.code)?r:Promise.reject(r||{})})}var S={};S.get=(t,e)=>W(D({...e,url:t}).then(r=>{let{url:o,...s}=r;return h.get(o,s)}));S.getWithCache=(t,e)=>W(D({...e,url:t}).then(r=>{let{url:o,...s}=r;return h.getWithCache(o,{cacheSeconds:60*5,...s})}));S.post=(t,e,r)=>W(D({...r,url:t,data:e,method:"post"}).then(o=>{let{url:s,data:n,...f}=o;return h.post(s,n,f)}));S.delete=(t,e,r)=>W(D({...r,url:t,data:e,method:"delete"}).then(o=>{let{url:s,...n}=o;return h.delete(s,n)}));var ot=S;c();m();A();c();m();c();m();var x=b(Q());A();function we(){let t=(0,x.useLocation)(),e=(0,x.useHistory)(),r=a=>{e.replace(a)},o=a=>{e.push(a)},s=a=>{let u=`${a.pathname||t.pathname}${a.search||""}${a.hash||""}`;j(u,"_self")};return{replace:(a,i)=>{([d.WALLET_DASHBOARD,d.MARKET].includes(a)?s:r)(i)},pushFn:(a,i)=>{([d.WALLET_DASHBOARD,d.MARKET].includes(a)?s:o)(i)}}}var ue=we;c();m();F();function G({from:t,to:e,inputAmount:r,feeConfig:o,btcAddressType:s}={}){let n=new URLSearchParams,f=(i,u)=>{ie(u?.chainId)&&n.set(`${i}Chain`,u.chainId),u?.tokenContractAddress&&n.set(`${i}Currency`,u.tokenContractAddress)},a=i=>{i?.referrerAddress&&i?.feePercent&&(n.set("referrerAddress",i.referrerAddress),n.set("feePercent",i.feePercent))};return f("input",t),f("output",e),a(o),r&&n.set("inputAmount",r),s&&n.set("addressType",s),n}function fe(t={}){let e=G(t);e.delete("referrerAddress"),e.delete("feePercent");let r=V(t,["from","to","inputChain","inputCurrency","outputChain","outputCurrency","inputAmount","feeConfig","btcAddressType","tokenPair","bridgeTokenPair"]);return $(r).forEach(o=>{e.set(o,r[o])}),e}function pe(t,e){let r=s=>{let n=f=>{let a=t.get(`${s}${f}`);return!a&&e&&(a=t.get(`${s}Limit${f}`)),a};return{chainId:n("Chain"),tokenContractAddress:n("Currency")}},o=()=>{let s=t.get("referrerAddress"),n=t.get("feePercent");return g()&&s&&n&&!se(n)?{referrerAddress:s,feePercent:n}:{}};return{from:r("input"),to:r("output"),inputAmount:t.get("inputAmount"),feeConfig:o(),btcAddressType:t.get("addressType"),autoSwitch:t.get("autoSwitch")}}function de(t,e){return!t||!e?"":t===d.OKX_WALLET_EXTENSION?e:ne(e)}c();m();var le=b(_e()),Ee=b(Q());function Oe(){let{hash:t,search:e}=(0,Ee.useLocation)(),r=t&&t.indexOf("#")>-1?t.slice(1):t;return(0,le.useMemo)(()=>new URLSearchParams(e||r),[e,r])}var he=Oe;function De(t){let{commonStore:e}=I(),{portal:r,computedCurrentTabIsLimit:o}=e,s=he(),n=ue(),f=({pathname:i,params:u}={})=>{let l=de(r,i),_=T()?fe(u).toString():G(u).toString(),E={};l&&(E.pathname=l),_&&(E.search=`?${_}`),t?n.pushFn(r,E):n.replace(r,E)};return{params:pe(s,o),replace:f}}var ge=De;var Ut=()=>{let{fromToStore:t,accountStore:e,commonStore:r}=I(),{updateFrom:o,updateTo:s,setField:n,advanceSetTypedValue:f}=t,{setCurrentTab:a}=r;return(i,u,l,_)=>{let E=e.isConnectedWallet,v=[];if(a(_,!0),i&&(o({...i,amount:1}),v.push(i.chainId),l)){let M=l===Z?"":ae(l,i.decimals);n(J.FROM),f(M,!1,_),o({amount:M})}u&&(s(u),v.push(u.chainId)),E&&t.getSwapTokenBalance()}},Nt=()=>(t,e)=>{let r={from:{chainId:t?.chainId,tokenContractAddress:t?.tokenContractAddress},to:{chainId:e?.chainId,tokenContractAddress:e?.tokenContractAddress}};return r.from.tokenContractAddress&&r.to.tokenContractAddress?r:null},Gt=()=>{let{replace:t}=ge();return r=>{let o=T();switch(r){case w.SWAP:t({pathname:o?oe:ee});break;case w.BRIDGE:t({pathname:o?k:te});break;case w.LIMIT_ORDER:t({pathname:re});break;default:X.error("useReplaceLocationByTab: unknown tab type");break}}};c();m();var $t={YES:1,NO:0},Yt={NETWORK_FEE:"0",FREE_NETWORK_FEE:"1"},Kt={INTENT_BRIDGE:3},Vt={FREE:"1",NOT_FREE:"0"};export{N as a,tt as b,rt as c,ot as d,ge as e,Ut as f,Nt as g,Gt as h,$t as i,Yt as j,Kt as k,Vt as l};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-KGDIAQCZ.js.map
