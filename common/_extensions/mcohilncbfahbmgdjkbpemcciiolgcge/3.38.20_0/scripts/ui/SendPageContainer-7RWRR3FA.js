import{a as Fs,b as md,c as Xi,d as ud}from"./chunk-FJWDLLLK.js";import{a as Lt,b as td,c as ed,d as Eo}from"./chunk-ZXZDN6NG.js";import{a as ad}from"./chunk-LH2ZY533.js";import{a as xs,b as ju,c as Qu,d as me,e as od,f as j,g as _s,h as nd,l as sd,m as id,n as vo}from"./chunk-VIUQAQ72.js";import{a as ys,b as rd}from"./chunk-TNGW2OJP.js";import{a as cd}from"./chunk-5ULIZSF3.js";import{a as hs}from"./chunk-5OA3WXQZ.js";import"./chunk-CNX3VVOM.js";import{a as Yt}from"./chunk-NC7WSVL4.js";import{a as Yu}from"./chunk-H6WUCVBP.js";import"./chunk-554VOZAS.js";import"./chunk-5SOXH2CS.js";import{a as ce,b as $u}from"./chunk-CBPSBTBL.js";import{a as zu,b as Zu}from"./chunk-O6IGNLRS.js";import{a as Xu}from"./chunk-4BNLNYIE.js";import{b as Vu,k as qu}from"./chunk-NQSB2CI7.js";import{a as Ku,b as Ju}from"./chunk-PGNWRBKO.js";import{a as Lu,b as Mu,c as Is,e as Gu}from"./chunk-DOWV6C3B.js";import"./chunk-TCYNB4II.js";import{a as Ir,b as Ou,f as Ru,g as Uu,i as Wu}from"./chunk-JKOFAFN3.js";import"./chunk-64U6VGZH.js";import"./chunk-TW5NSKIQ.js";import"./chunk-JOGFEK3S.js";import"./chunk-TEHSOGCP.js";import{a as Du}from"./chunk-L5MAEEVU.js";import"./chunk-3LIMLX72.js";import{a as Yr,b as Ss}from"./chunk-KPYSN5PV.js";import{a as Hu}from"./chunk-JYZR3KF2.js";import{b as $o,c as gs,d as _u,f as yu,h as Fu,i as qr,j as As,k as Kr,m as Cr,p as Eu,q as Cs,r as bu,s as Pu}from"./chunk-MOISJT5B.js";import{a as tu,d as eu,m as vu}from"./chunk-ZVOB6UOQ.js";import"./chunk-OSVZOFON.js";import"./chunk-7JDG2FPM.js";import"./chunk-ADRJK2SB.js";import"./chunk-VT47VYXB.js";import{c as lo}from"./chunk-KSO662WW.js";import"./chunk-6TPN273S.js";import"./chunk-SF64G75T.js";import{a as Be}from"./chunk-5AU4SCQT.js";import"./chunk-HCXRQ4GY.js";import{a as Zi}from"./chunk-Q4NRZ4HK.js";import"./chunk-AHNTWQZY.js";import{b as ku,d as wu,e as Nu}from"./chunk-JDOLDE6V.js";import{a as Tr}from"./chunk-OZPHJXRI.js";import{a as Bo}from"./chunk-ZY3ECFNE.js";import{a as It,d as Bu}from"./chunk-WMQSMBLA.js";import{a as Ts}from"./chunk-XKK5N6CR.js";import{c as Jm,e as Ym}from"./chunk-ICLH7VK5.js";import{b as Jr,c as $i}from"./chunk-3RJOXTRR.js";import{$ as gr,A as ds,B as fr,C as ae,G as fs,H as uu,I as vt,J as du,K as fu,L as lu,M as pu,N as to,O as ve,P as gu,Q as Au,R as Cu,S as eo,U as ls,V as lr,X as Iu,Z as Zo,_ as pr,a as ru,aa as Su,b as as,ba as mo,ca as ps,da as xu,e as Mo,ea as hu,f as S,g as wt,h as N,i as Nt,j as nu,k as V,l as se,m as X,n as su,o as iu,p as cs,q as No,r as ie,s as ms,t as dr,u as au,v as y,w as cu,x as mu,y as us,z as Bt}from"./chunk-J2MASCEL.js";import"./chunk-J2Y34YM2.js";import{a as Io,e as Zm,f as is,m as $m,n as Xm,o as jm,p as ft,s as wo,t as kt,u as Qm,v as ou}from"./chunk-NNO7KFUF.js";import{a as Ar}from"./chunk-3L5C5CQB.js";import"./chunk-CGBWDXEW.js";import"./chunk-NRWOOVOJ.js";import{h as Tu}from"./chunk-P6MBUJNT.js";import{a as ss}from"./chunk-2XYRURE2.js";import"./chunk-LYFECSNW.js";import"./chunk-M7CDJYYG.js";import{b as zm}from"./chunk-VUB7XYHG.js";import"./chunk-QZXK25MX.js";import"./chunk-J7ZUOIII.js";import{a as dt}from"./chunk-Q2BK5I52.js";import"./chunk-QVG4GOA5.js";import{d as Yo,f as Jt,g as qm,j as Km}from"./chunk-4NCQWC2K.js";import{a as Vm}from"./chunk-BSEC3HD3.js";import{a as ns}from"./chunk-SR5VKAMR.js";import"./chunk-2L5V4MTR.js";import"./chunk-762Y5MQL.js";import"./chunk-L56XCX6G.js";import"./chunk-NXLWHU4N.js";import{a as os}from"./chunk-7UJMDFGU.js";import{b as Tt,c as wm,d as Nm}from"./chunk-PB7BCSCP.js";import{b as hm,d as _m,f as ym,g as Fm,h as Em,i as bm,j as Pm,n as km}from"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import{a as Sm,b as Vr,g as xm}from"./chunk-ERN756XV.js";import"./chunk-SUOZFPDI.js";import{a as yT}from"./chunk-QHGK2KKT.js";import{$ as Ki,B as ar,C as Kn,D as Jn,E as cr,F as ne,G as ct,H as em,I as mr,J as rm,K as nm,L as mt,M as sm,N as im,O as Yn,P as qi,Q as am,R as cm,S as mm,T as zn,U as um,V as dm,W as fm,X as Wr,Y as Zn,Z as Gr,_ as $n,aa as lm,b as Jc,ba as pm,c as rr,ca as Ct,d as Yc,e as zc,ea as Xn,f as Zc,fa as gm,g as nr,ga as jn,h as Un,ha as Am,i as sr,ia as Qn,j as ir,ja as Kt,k as $c,ka as Ji,l as it,la as Yi,m as Xc,ma as Cm,n as Wn,o as Gn,p as Hn,q as re,r as Vn,s as Pt,t as Ur,u as jc,v as Qc,w as om,x as at,y as tm,z as qn}from"./chunk-XWBWLTOV.js";import"./chunk-L3G6DHBI.js";import"./chunk-QO3FK7IQ.js";import"./chunk-UWTAV26V.js";import{a as Lm,b as Dm}from"./chunk-A6RKGNRU.js";import"./chunk-BM73LLRW.js";import"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import"./chunk-BM44DQAB.js";import"./chunk-6JGR2L6N.js";import"./chunk-ZBSU6WZQ.js";import"./chunk-S2V4K2JM.js";import{A as Vi,B as On,C as Rr,D as Hc,E as Vc,H as te,I as z,J as R,K as co,L as qc,N as Kc,P as Do,Q as ee,R as Rn,b as vn,c as Lc,f as so,g as Ln,h as Dn,k as Dc,l as Mc,m as st,n as Oc,o as Mn,p as bt,q as Rc,s as Uc,w as Wc,x as er,z as Gc}from"./chunk-GSWJ5GW7.js";import"./chunk-IVCA3VWI.js";import"./chunk-FLZ5KV6J.js";import"./chunk-OCTREJ3R.js";import"./chunk-RG4N2AAJ.js";import"./chunk-JPVBM3R5.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import{e as Ne}from"./chunk-A52XYJMT.js";import{a as Mm}from"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-BCT5GPKT.js";import{A as fc,t as Wi}from"./chunk-FJBNQZUR.js";import"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import{d as zi}from"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import{a as ut,b as Wm,j as Gm}from"./chunk-7OQVWENF.js";import{c as Um}from"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import{a as Om,e as Rm,g as go,h as es,l as rs}from"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import{m as ao}from"./chunk-P7X44DVV.js";import"./chunk-PP43MII2.js";import"./chunk-YV3R2S6K.js";import{a as Hm}from"./chunk-RJO5LUBF.js";import"./chunk-DRPGNVVL.js";import{a as ts}from"./chunk-UEENMIFU.js";import"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{Za as wn,a as vc,f as Jo,ka as kn,la as Qe,ma as or}from"./chunk-PVSNAFN3.js";import{b as ur}from"./chunk-JYKQJVIF.js";import{m as we,n as Hr,q as J}from"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import{o as q}from"./chunk-A3FIPWG3.js";import{$ as Pc,Da as je,H as $e,I as Xe,J as Pn,Na as Bc,Q as xc,S as hc,T as _c,W as yc,X as Fc,Y as Ec,Z as bc,ac as b,db as Nn,ea as kc,fa as wc,g as lc,m as Gi,ob as Ft,p as _n,r as et,ua as Nc}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import{$ as Sc,V as Ko,Y as Ic,_ as ke,b as Fo,ca as qt,d as Cc,da as ro,m as Tc,n as Hi,r as En,s as Qt,t as oe,u as ze,v as Ze,w as bn}from"./chunk-CU7RFE6B.js";import{a as Tm}from"./chunk-J4UWPXXS.js";import{a as ko}from"./chunk-QZUNX5I4.js";import{a as tr,b as Et}from"./chunk-IVA2TTR4.js";import{e as Bn}from"./chunk-OG3IV3YP.js";import{a as _T}from"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import{d as no,f as Po}from"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import{g as Im}from"./chunk-35FUKWV2.js";import{c as Bm,f as vm}from"./chunk-DHNKVM4B.js";import"./chunk-VL5VJIZ7.js";import{c as H}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{$a as rc,$b as sc,Ac as rt,Fa as Ja,Fc as W,Ga as Ya,Gb as Ho,Hb as _o,Hc as Or,Ia as za,Ib as uo,Ja as Za,Jb as Ht,Ka as $a,La as Xa,Lb as Vo,Lc as Fn,Ma as ja,Mb as Mr,Na as Qa,Nb as ot,Oa as oc,Oc as yo,Pa as tc,Pb as Sn,Qa as ec,Rc as Ac,Uc as nt,Wc as be,Xc as qo,Y as An,Ya as To,Yc as Pe,a as va,aa as Cn,ab as Ui,b as ST,ba as Ha,fc as po,ha as Va,hb as Dr,ia as qa,ja as Ri,jc as ic,lc as ac,oc as hT,pb as nc,qa as Ka,tb as In,ua as Tn,uc as yn,wb as Ee,xc as pc,zc as gc}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{E as hn,G as dc,H as jt,N as Ye,d as cc,f as xn,o as tt,q as Vt,r as mc,s as uc}from"./chunk-L4N7WJIQ.js";import{F as Ve,K as gn,d as La,e as Oi,ea as Wa,f as Da,ga as Lr,j as Ma,ka as Ga,pa as zo,s as Oa,w as Ra,y as Ua}from"./chunk-LBCQTFOD.js";import{N as K,l as L,v as qe,w as E}from"./chunk-V63HWKAL.js";import"./chunk-S2ACKULX.js";import"./chunk-ZZ2UZY4M.js";import{b as xT}from"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as yt,T as Ke,Z as Je,ca as fo}from"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as h}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-SY7RUBBT.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-RTOXOPRM.js";import"./chunk-6ZXPBMA4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-LLWJFPQV.js";import"./chunk-XYCKE5Q7.js";import"./chunk-PJE3AWUO.js";import"./chunk-U5KK4TZK.js";import"./chunk-HQ74Q4WH.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as u,m as s,n as p,o as i}from"./chunk-UGZFXKPB.js";s();i();var At=u(h()),he=u(ko());zo();s();i();var Sr=u(h()),Es=u(b()),dd=u(ko());var FT=()=>{let o=(0,dd.useHistory)(),t=(0,Es.useDispatch)(),e=(0,Es.useSelector)(Lc),r=(0,Sr.useRef)(e);return r.current=e,(0,Sr.useEffect)(()=>{let{fromPage:n}=o.location?.state||{};return n&&t(Wc(n)),t(er(!0)),()=>{r.current&&(t(Rn()),t(Qn()))}},[]),null},fd=(0,Sr.memo)(FT);s();i();s();i();s();i();var xd=u(h());s();i();var De=u(h());K();s();i();var ld=u(h()),pd=u(q());K();Po();var ET=()=>{let o=ut(),[t,e]=(0,ld.useState)(!1);return[(0,pd.useMemoizedFn)(async n=>{try{e(!0);let a=await no().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:c}=await Nc(n,{txSource:1},{headers:a}),m="";if(c?.canRecharge||(m=c.rechargeMsg),c?.canWithdraw||(m=c.withdrawMsg),m){let d=tt.warn({text:m,confirmText:E("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return jt.error(E("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},gd=ET;s();i();s();i();var ue=u(h());K();function bT({loading:o,tag:t,customRender:e,focus:r,noMargin:n,noPadding:a,onChange:c,onRef:m,...d}){let g=(0,ue.useRef)(null);(0,ue.useLayoutEffect)(()=>{r&&g.current?.focus()},[]);let l=E("wallet_extension_transaction_placeholder_input_address");return ue.default.createElement(Yt.Row,{noMargin:n,noPadding:a},ue.default.createElement(Vt.TextArea,{placeholder:l,errorType:Vt.TIP_TYPE.always,size:Vt.SIZE.xl,autoResize:!0,...d,onRef:f=>{g.current=f,m&&m(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=ue.default.createElement(Yt.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var ji=bT;s();i();var So=u(h()),Le=u(b()),bs=u(q()),Id=u(yt());zo();K();s();i();s();i();var PT=()=>84,Ad=PT;var Cd=Ad;s();i();var Td={selected:"_selected_lvccx_1"};function kT({value:o,network:t}){let e=(0,Le.useDispatch)(),r=(0,Le.useSelector)(vn),[n,a]=(0,So.useState)(!1),[c,m]=(0,So.useState)({}),[d,g]=(0,So.useState)(""),l=Nu(()=>{g(hs.TYPE.ADD),m({address:o,network:t}),a(!0)}),f=(I={})=>{a(!1),m({}),g(""),I.name&&e(Rr({name:I.name,type:Hi.ADDRESS_BOOK}))},A=I=>{a(!1),setTimeout(()=>{g(hs.TYPE.EDIT),m({...I,network:t}),a(!0)})};return So.default.createElement(So.default.Fragment,null,So.default.createElement(Yt.InputBottomBar,{title:E("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:E("wallet_extension_send_anchor_add_now"),buttonClick:l}),So.default.createElement(hs,{visible:n,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>r}))}function wT({visible:o,options:t,onSelect:e,onChange:r}){let n=(0,Le.useDispatch)();if(!o)return null;let a=({walletId:c,address:m,name:d,type:g,group:l,addressType:f})=>{if(e(),r(m),d){let A=l?`${l} - ${d}`:d;n(Rr({name:A,type:g,extra:{walletId:c,group:l,name:d,addressType:f}}))}};return So.default.createElement(Yt.SelectAddress,{options:t,onSelect:a})}function NT(o,t,e){let r=e?.matchAddress||((n,a)=>Lr(a.address).includes(Lr(n))||a.name&&Lr(a.name).includes(Lr(n)));return(0,So.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let n=[];return o.forEach(({group:a,list:c})=>{let m=[];c.forEach(d=>{r(t,d)&&m.push(d)}),m.length&&n.push({group:a,list:m})}),n},[o,t])}function BT({value:o,error:t,onChange:e,isCheckingError:r,extraProps:n,onBlur:a,onFocus:c,...m}){let d=(0,Le.useDispatch)(),g=Mo(),{coin:l}=S(),{localType:f}=l,A=(0,Le.useSelector)(Dn),I=y(),{filterAddress:T,disableRequestDomain:C}=n||{},x=!o,_=!!o&&!t&&!A?.name&&!r,F=wu(f,I),k=(0,So.useMemo)(()=>T?T(F):F,[F,T]),[M,w]=(0,So.useState)((!o||!!t)&&!_&&k?.length>0),P=NT(k,o,n),B=ku(f),O=U=>{e(U);let $=B(U),Y=Boolean(U&&$);d(Rr(Y?$:null))},{loading:v,abort:D}=ru({domainInputValue:o,coinId:g},({address:U,domain:$})=>{d(On({key:"",args:{}})),e(U),d(Rr({name:$,type:Hi.ENS}))},C),G=(0,bs.useDebounce)(!!v||!!m.loading||!!r,{wait:200});(0,bs.useThrottleEffect)(()=>{r||(!!o&&!t&&P.length===0?w(!1):!!t&&P?.length>0&&w(!0))},[o,t,r,P?.length],{wait:100});let Z=Cd();return So.default.createElement("div",{className:(0,Id.default)({[Td.selected]:M}),style:{bottom:Z}},So.default.createElement(Yt.Row,{noMargin:M},So.default.createElement(ji,{...m,noMargin:!0,noPadding:!0,loading:G,tag:A?.name,focus:x,value:o,error:!G&&t,onChange:O,onBlur:U=>{o&&!t&&setTimeout(()=>{w(!1)},100),a&&a(U)},onFocus:U=>{P?.length>0&&w(!0),c&&c(U)}}),_&&So.default.createElement(kT,{network:f,value:o})),So.default.createElement(wT,{visible:M,extraProps:n,value:o,options:P,onSelect:()=>{D(),w(!1)},onChange:e}))}var Qi=BT;s();i();var zr=u(h()),Zr=u(b());K();function vT({Component:o=Qi,loading:t=!1,extraProps:e,errorFns:r={fns:[],override:!1}}){let n=(0,Zr.useDispatch)(),c=dt().get("address"),m=(0,Zr.useSelector)(so),d=(0,Zr.useSelector)(Ln),g=fu(),{isCheckingError:l,runErrorFns:f}=fr(g,r),A=T=>{f(T,C=>{n(On(C))})},I=T=>{A(T),n(Vi(T))};return(0,zr.useEffect)(()=>{c&&n(Vi(c))},[]),(0,zr.useEffect)(()=>{n(Gc(l))},[l]),zr.default.createElement(o,{value:m,onChange:I,loading:t,isCheckingError:l,error:d?.key?E(d?.key,d?.args):null,extraProps:e||{}})}var oa=vT;s();i();var Sd={content:"_content_12kl2_1"};function LT({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let r=Mo(),n=us(),a=mu(),c=Bt(),[m,d]=gd(),g=(0,De.useMemo)(()=>{let{disabled:l,loading:f,onClick:A,...I}=e||{},T=l||n,C=async()=>{let x=A||c;await m(r)&&await x()};return[{disabled:T,size:fo.SIZE.lg,type:fo.TYPE.highlight,category:fo.CATEGORY.fill,btnText:E("wallet_extension_send_btn_next_step"),loading:!T&&(f||a||d),onClick:C,...I}]},[e,n,a,c,m,d,r]);return De.default.createElement(xs,{footerActions:g,slot:{header:De.default.createElement(ju,{...o,title:E("wallet_extension_send_title_recipient_address"),pageIndex:1})}},De.default.createElement("div",{className:Sd.content},De.default.createElement(oa,{...t})))}var Q=LT;var DT=()=>xd.default.createElement(Q,null),hd=DT;s();i();var Nd=u(h());s();i();var bd=u(h()),Pd=u(b()),kd=u(q());s();i();var Fd=u(h());Po();s();i();var _d=u(h()),yd=u(b());yo();function MT({transferType:o,fungibleAssetTransferType:t,tokenTransferType:e}){let{coin:r}=S(),n=(0,yd.useSelector)(so),a=mo(),{baseCoinId:c,protocolType:m,address:d}=r||{};return(0,_d.useCallback)(g=>{let{sequenceNumber:l,chainId:f,expirationTimestampSecs:A,tyArg:I,maxGasAmount:T,gasUnitPrice:C}=g||{},x={recipientAddress:n,amount:a},_={base:{sequenceNumber:l,chainId:f,maxGasAmount:T,gasUnitPrice:C,expirationTimestampSecs:A}};return c===0&&(_.type=o,_.data={...x}),c!==0&&m===Or.APTOS_FUNGIBLE_TOKEN&&(_.type=t,_.data={...x,fungibleAssetMetadataAddress:d}),c!==0&&m===Or.APTOS_TOKEN&&(_.type=e,_.data={...x,tyArg:I}),_},[n,a,c,m,d])}var Ps=MT;Ee();function OT(){let o=Ps({transferType:oe.SIMULATE_TRANSFER,fungibleAssetTransferType:oe.SIMULATE_FUNGIBLE_ASSET_TRANSFER,tokenTransferType:oe.SIMULATE_TOKEN_TRANSFER_V2}),t=go(),e=y();return(0,Fd.useCallback)(async r=>{let{info:n={}}=r||{},a=o(n),{AptosWallet:c}=await xm(),m=new c,d=await no().getPublicKey(e,Dr,t);return m.buildSimulateTx({publicKey:d,data:a})},[o,e,t])}var Ed=OT;var RT=()=>{let[o,{setFalse:t}]=(0,kd.useBoolean)(!0),{coin:e}=S(),r=y(),n=(0,Pd.useDispatch)(),a=Ed(),{chainId:c,coinId:m}=e;return(0,bd.useEffect)(()=>{c&&r&&(async()=>{try{let g={coinId:m,chainId:c,address:r},l={fromAddr:r},{maxGasAmount:f,gasUnitPrice:A,fee:I}=await Pc(g,l,a);n(z(I)),n(rm({maxGasAmount:f,gasUnitPrice:A})),n(R(!1))}catch{n(R(!0))}finally{t()}})()},[c,r,a]),o},wd=RT;function UT(){let o=wd();return to(),Nd.default.createElement(j,{confirmButtonProps:{loading:o}})}var Bd=UT;s();i();var Jd=u(h());s();i();var Oo=u(h()),$r=u(b());zo();K();s();i();var vd=u(h()),Ld=u(b());po();function Dd(){let o=(0,Ld.useDispatch)(),t=se(),e=Zo();(0,vd.useEffect)(()=>{if(t){let r=e;Vo(r,0)&&(r="0"),o(Hc(r))}},[t,e])}s();i();s();i();var ta=u(h()),Md=u(ko());var Od=u(q()),WT=({disabled:o,onSubmit:t,feeLoading:e,loading:r,onClick:n,networkFee:a,renderActions:c,...m},d)=>{let g=(0,Md.useHistory)(),l=wt(),{coin:f}=S(),A=y(),{loading:I,onClick:T}=hu(t),C=xu(),x=(0,Od.useCreation)(()=>{if(c&&typeof c=="function"){let _=c(d);if(_)return _}return[{actionType:is.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},{loading:r||I,disabled:o||C||e,actionType:is.ACTION_TYPE.CONFIRM,onClick:n||T,...m}]},[e,r,f?.coinId,C,T,o,d,l?.coinId,A,I,n,m]);return ta.default.createElement(ts,{usePortal:!0,offsetBottom:0,placeholder:!0},ta.default.createElement(is,{buttonGroup:x}))},Rd=WT;var Ud=Rd;s();i();var Wd=u(h());var GT=({loading:o,chainName:t,feeLevel:e,onClick:r,...n},a)=>{let c=X(),m=ie(),d=No(),g=iu(),l=cs(),f=ce(),A=r?()=>{r(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,I=(0,Wd.useMemo)(()=>e!==void 0?e:Ko?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:g&&c==="0"?void 0:c,loading:o||g,level:I,coinId:m,estimateFailed:!!l,onClick:A,...n}},Gd=GT;s();i();var ea=u(b()),Hd=u(q());K();var HT=()=>{let o=se(),t=S(),e=(0,ea.useSelector)(Rc),r=No(),n=t?.coin?.coinId,a=V(),c=Km(n,a,{currencyId:r,formatted:!1}),m=(0,ea.useSelector)(Dc);return(0,Hd.useCreation)(()=>{let d=0,g=0;return e===zm?o?(g=L.mul(c,-1),d=L.mul(a,-1)):(d=void 0,g=L.mul(m,-1)):(d=L.mul(a,-1),g=void 0),{currencyId:r,coinId:n,assetChange:d,useMinPrecision:!0,currencyAssetChange:g}},[e,r,n,o,c,m,a])},Vd=HT;s();i();var qd={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function VT({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:r={},tipMessageProps:n={},slot:a={},checkEmpty:c=!0,addressType:m,renderMessage:d,renderTipActions:g,defaultMessage:l,canTransferAmount:f,tipActions:A=[]}){let I=(0,$r.useSelector)(so),T=(0,$r.useSelector)(Dn),C=ut(),x=Du(C),_=(0,$r.useSelector)(Uc),F=(0,$r.useSelector)(Yc),k=y(),M=Vd(),{coin:w,baseCoin:P}=S(),B=Gd({...t,chainName:w?.chainName},x),{loading:O,estimateFailed:v}=B,G=B?.gasReturn?.activity?.errorCode,{bottom:Z,networkFee:U,footer:$}=a,Y=Oo.default.createElement(It,{bordered:!1,verticalPadding:!1},Oo.default.createElement(Ts,{...B}));U&&Oi(U)&&(Y=U(B)),U&&!Oi(U)&&(Y=U),Qu(c),Dd(),(0,Oo.useEffect)(()=>{G===0&&fc({wallet_address:k,chain_id:P.chainId,transaction_type:"transfer"})},[G]);let ho=Ud({...e,feeLoading:O},_?.type||F);return Oo.default.createElement(xs,{...r,loading:o,className:qd.root,slot:{header:Oo.default.createElement(Ou,{...n,address:k,coinId:w?.coinId,actions:A,renderActions:g,renderMessage:d,type:_?.type||F||v&&Bu.TIP_TYPE.FEE_ERROR,message:_?.text||!!_?.key&&E(_.key,_?.args)||!v&&l}),footer:$||ho}},Oo.default.createElement(H.Space,{space:24,direction:H.DIRECTION.vertical},Oo.default.createElement(Uu,{txType:Fo.TRANS_OUT},Oo.default.createElement(H.FlexBox,{justify:"center"},Oo.default.createElement(Ru,{...M}))),Y,Oo.default.createElement(It,{bordered:!1,verticalPadding:!1},Oo.default.createElement($i,{address:k,addressType:m,title:E("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{x({trade:"send",network:w?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Oo.default.createElement(zu,{coinBalance:f,coinId:P.coinId})),Oo.default.createElement($i,{tags:T?.name?[T?.name]:null,address:I,title:E("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address",network:w?.chainName})}})),Z))}var oo=VT;s();i();var ra=u(b());Ee();po();var Kd=()=>{let{coin:o}=S(),t=y(),e=mo(),r=(0,ra.useSelector)(so),n=(0,ra.useSelector)(Jc),a=go(),{gasUnitPrice:c,maxGasAmount:m}=n,d=Ps({transferType:oe.TRANSFER,fungibleAssetTransferType:oe.FUNGIBLE_ASSET_TRANSFER,tokenTransferType:oe.TOKEN_TRANSFER_V2}),g=ft(),l=wo({fromAddr:t,walletId:a,localType:Dr}),f=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:r,networkFee:Ho(c,m),localType:Dr});return lo(async()=>await g({coinId:o.coinId,address:t,fromAddr:t,toAddr:r}),async(_={})=>{let F=d({..._,gasUnitPrice:c,maxGasAmount:m}),k=await l({params:F});return{signInfo:_,signedTx:k}},async({signInfo:_,signedTx:F})=>{let{sequenceNumber:k}=_,M={nonce:k},w={extJson:JSON.stringify(M)};return await f(F,w)},_=>(ao({tx_id:_}),_))};function qT(){let o=Kd(),t=async()=>{await o()};return eo(),Jd.default.createElement(oo,{confirmButtonProps:{onSubmit:t}})}var Yd=qT;var KT={match:o=>Em(o),pages:{AddressPage:hd,AmountPage:Bd,ConfirmPage:Yd}},zd=KT;s();i();yo();s();i();var Xd=u(h()),ks=u(ko());s();i();function Dt(){return dt().get("type")||Lt.SEND}s();i();function JT(){let o=vt(),t=du();return[o,t]}var Zd=JT;s();i();var Xr=u(h()),$d=u(ko());yo();To();var YT=()=>{let{coinId:o}=(0,$d.useParams)(),e=Yo(o)?.protocolId,r=Object.values(W),n=Rm(),a=n.filter(({keyringIdentityType:f})=>vm(f)),c=n.filter(({keyringIdentityType:f})=>f===gc.MPC),m=(f,A)=>!f.some(({walletIdentities:I})=>I.some(({addressType:T={}})=>{let C=T[An];return C?C.some(({address:x})=>A.address===x):!1})),d=(0,Xr.useCallback)(f=>r.includes(e)?m(a,f):!0,[a,e,r]),g=(0,Xr.useCallback)(f=>[W.BRC_20,W.FRACTAL_BRC20].includes(e)?!0:r.includes(e)?m(c,f):!0,[c,e,r]),l=(0,Xr.useCallback)((f=[])=>f.filter(A=>d(A)&&g(A)),[d,g]);return(0,Xr.useCallback)(f=>f.map(A=>({...A,list:l(A?.list)})).filter(A=>A?.list?.length),[l])},xr=YT;function zT(){let{coinId:o}=(0,ks.useParams)(),t=y(),e=(0,ks.useHistory)(),r=Dt(),n=Zd(),a=xr();return Xd.default.createElement(Q,{addressProps:{errorFns:{fns:n,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${Jo}/${o}${or}?type=${r}&from=${t}`)}}})}var jd=zT;s();i();var Nf=u(h());s();i();var Xo=u(h()),Bs=u(b()),Ef=u(ko()),bf=u(yt());K();po();s();i();var io=u(h()),Me=u(yt());K();s();i();var lt={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var ZT=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,pendingXrc:r,pendingXrcDisplay:n,availableWithoutSpending:a,availableWithoutSpendingDisplay:c,availableReceiving:m,availableReceivingDisplay:d,goToInscribe:g,addressType:l,coinId:f})=>{let{handleClick:A}=td(l,f);return io.default.createElement(io.default.Fragment,null,io.default.createElement(H.Box,{className:(0,Me.default)(lt.container)},Number(o)>0&&io.default.createElement(H.FlexBox,{justify:"space-between"},io.default.createElement(H.Box,null,io.default.createElement(J.Text,{type:J.TYPE.secondary,size:J.SIZE.xs},E("extension_wallet_btc_in_use"))),io.default.createElement(H.Box,null,io.default.createElement(J.Text,{className:lt.amount},t),io.default.createElement(J.Text,{size:J.SIZE.xs,className:(0,Me.default)(lt.link),onClick:A},E("extension_wallet_btc_btn_unlock_use")))),Number(r)>0&&io.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Me.default)(lt.pendingAssets)},io.default.createElement(H.Box,null,io.default.createElement(J.Text,{type:J.TYPE.secondary,size:J.SIZE.xs},E("extension_wallet_btc_select_receiving"))),io.default.createElement(H.Box,null,io.default.createElement(J.Text,{className:lt.amount},n))),Number(a)>0&&io.default.createElement(H.FlexBox,{justify:"space-between"},io.default.createElement(H.Box,null,io.default.createElement(J.Text,{className:lt.amount},E("extension_wallet_btc_to_be_inscribed"))),io.default.createElement(H.Box,null,io.default.createElement(J.Text,{type:J.TYPE.secondary,size:J.SIZE.xs},c),io.default.createElement(J.Text,{size:J.SIZE.xs,className:(0,Me.default)(lt.link),onClick:g},E("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&io.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Me.default)(lt.pendingAssets)},io.default.createElement(H.Box,null,io.default.createElement(J.Text,{type:J.TYPE.secondary,size:J.SIZE.xs},E("extension_wallet_btc_select_receiving"))),io.default.createElement(H.Box,null,io.default.createElement(J.Text,{className:lt.amount},d))),Number(e)>0&&io.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Me.default)(lt.pendingAssets)},io.default.createElement(H.Box,null,io.default.createElement(J.Text,{type:J.TYPE.secondary,size:J.SIZE.xs},E("wallet_extension_cat_desc_total_amount"))),io.default.createElement(H.Box,null,io.default.createElement(J.Text,{className:lt.amount},e)))))},hr=ZT;s();i();function $T(){let o=y(),{coin:t}=S();return ed(t,o)}var de=$T;s();i();var Co=u(h()),ef=u(b()),rf=u(yt());K();s();i();var St=u(h()),na=u(yt());K();s();i();var XT="md",jT="lg",Qd=o=>{let{className:t,size:e,disabled:r,checked:n,coinImage:a,coinAmountText:c,inscriptionId:m,onChange:d}=o,g=`inscription-select-container-${e}`,l=r?"inscription-select-disabled":null;return St.default.createElement("div",{className:(0,na.default)("inscription-select-container",g),onClick:d},r?St.default.createElement("div",{className:"inscription-select-confirm"},E("extension_wallet_send_tag_confirming")):null,St.default.createElement("div",{className:(0,na.default)("inscription-select",l,t)},r?null:St.default.createElement("div",{className:"inscription-select-radio-container"},St.default.createElement(mc.Circle,{checked:n})),St.default.createElement("div",{className:"inscription-select-coin"},St.default.createElement(hn,{className:"inscription-select-coin-image",src:a,errorImg:Bn,width:14,height:14}),St.default.createElement(Zi,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),St.default.createElement("div",{className:"inscription-select-id"},St.default.createElement(Zi,{text:m,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Qd.size={md:XT,lg:jT};var _r=Qd;s();i();var bo=u(h()),of=u(q());K();s();i();var fe={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function QT(){let{coin:o}=S(),t=de();return bo.default.createElement("div",{className:fe.header},bo.default.createElement("div",{className:fe.amount},bo.default.createElement(hn,{className:fe.logo,src:o.image,errorImg:Bn,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function oI({loading:o,list:t,visible:e,onClose:r,value:n,onSelected:a,request:c}){let{coin:m}=S(),[d,g]=(0,bo.useState)({}),{run:l}=(0,of.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,bo.useEffect)(()=>{e&&g(n)},[e]),bo.default.createElement(tt,{isFull:!0,topContent:bo.default.createElement(QT,{list:t,value:d,onMax:f=>{g(t.reduce((A,I)=>({...A,[I.inscriptionId]:!f}),{}))}}),footer:bo.default.createElement(Yt.ConfirmButton,{onClick:()=>{a(d)}},E("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:r,renderContent:()=>bo.default.createElement("div",{className:fe.scrollContent,onScroll:l},bo.default.createElement("div",{className:fe.content},t.map((f,A)=>bo.default.createElement("div",{className:fe.cell},bo.default.createElement(_r,{key:A,size:_r.size.lg,coinImage:m.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{g(I=>({...I,[f.inscriptionId]:!I[f.inscriptionId]}))}})))),o&&bo.default.createElement("div",{className:fe.loading},bo.default.createElement(Je.Circle,{size:Je.SIZE.sm})))})}var tf=oI;s();i();var yr={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function tI({loading:o,list:t,request:e,onSelected:r},n){let{coin:a}=S(),[c,m]=(0,Co.useState)(!1),d=(0,ef.useSelector)(at),[g,l]=(0,Co.useState)(d.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,Co.useMemo)(()=>{let I=t.filter(C=>!!g[C.inscriptionId]),T=t.filter(C=>!g[C.inscriptionId]);return{selected:I,unselected:T,showed:t.map(C=>I.includes(C)?{...C,checked:!0}:C)}},[t,g]);return(0,Co.useEffect)(()=>{r(f)},[f]),(0,Co.useImperativeHandle)(n,()=>({onMax:()=>{l(t.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{}))}})),Co.default.createElement(Co.default.Fragment,null,Co.default.createElement("div",{className:yr.root},Co.default.createElement("div",{className:yr.title,onClick:()=>{m(!0)}},E("extension_wallet_send_text_select_transferable"),Co.default.createElement(Ke,{className:(0,rf.default)(yr.arrow,"okds-arrow-chevron-right-centered-md")})),Co.default.createElement("div",{className:yr.content},A.map((I,T)=>Co.default.createElement("div",{className:yr.cell},Co.default.createElement(_r,{key:T,coinImage:a.image,size:_r.size.md,coinAmountText:`${I.tokenAmount} ${I.tick}`,inscriptionId:I.inscriptionId,checked:I.checked,onChange:C=>{C.stopPropagation(),l(x=>({...x,[I.inscriptionId]:!x[I.inscriptionId]}))}}))))),Co.default.createElement(tf,{visible:c,value:g,loading:o,list:t,request:e,onSelected:I=>{l(I),m(!1)},onClose:()=>{m(!1)}}))}var nf=(0,Co.forwardRef)(tI);s();i();var le=u(h()),sf=u(b());K();function eI(o){let{coin:t}=S();return(0,le.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function af(){let o=wt();return t=>{let e="";return t.key&&(e=E(t?.key,t?.args)),t?.type===ro.FEE_BALANCE_INSUFFICIENT?le.default.createElement(le.default.Fragment,null,e," ",le.default.createElement(me,{coin:o})):t?.type==="inscribe"?le.default.createElement(le.default.Fragment,null,e):e}}function rI(o,t){let e=(0,sf.useDispatch)(),r=lu(),n=eI(t),a=[r,n],{runErrorFns:c}=fr(a);ds(c,m=>{e(Vc(m))},o)}var cf=rI;s();i();var mf=u(ko());var uf=u(b());function nI(){let o=(0,uf.useDispatch)(),t=(0,mf.useHistory)(),{coin:e}=S(),r=y();return()=>{o(Qn()),o(Rn()),t.push(`${Jo}/${e.coinId}${kn}?type=${Lt.INSCRIBE}&from=${r}`)}}var df=nI;s();i();var pf=u(h()),gf=u(b());s();i();var jr=u(h()),ff=u(b());po();function sa(){let{baseCoin:o}=S(),t=y(),[,e]=Be({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function sI(o,t){let n=(()=>255)(),a=o||t?.normal||"0",[c,m]=(0,jr.useState)("0");return(0,jr.useEffect)(()=>{if(n&&a){let d=Ho(n,a);m(d)}},[n,a]),{fee:c,satBytes:a,bytes:n}}function iI(o){let t=(0,ff.useDispatch)(),e=sa(),r=sI(o,e);return(0,jr.useEffect)(()=>{t(Ct({name:"signInfo",value:e}))},[e]),{...r,signInfo:e}}var lf=iI;function aI(){let o=(0,gf.useDispatch)(),{fee:t}=lf();(0,pf.useEffect)(()=>{o(z(t))},[t])}var Af=aI;s();i();var Sf=u(h()),xf=u(b());s();i();var ws=u(h()),Tf=u(b());s();i();var Cf=u(b());function cI(){let{selectedSat:o,signInfo:t}=(0,Cf.useSelector)(qn),e;return o.type===Ko.CUSTOM?e=o.satBytes:e=t?.[Ic[o.type]],e||0}var Mt=cI;function mI({coinId:o}){let[t,e]=(0,ws.useState)(!0),r=(0,Tf.useDispatch)(),n=y(),a=_s({coinId:o}),c=Mt();return(0,ws.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:n,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),r(ee(d))})()},[n,c]),t}var If=mI;function uI({coinId:o}={}){let t=(0,xf.useDispatch)(),e=de(),r=If({coinId:o});return(0,Sf.useEffect)(()=>{t(Do(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),r}var hf=uI;s();i();var Fr=u(h()),_f=u(b()),yf=u(q());Po();yo();Pe();be();po();function dI(){let{coin:o,baseCoin:t}=S(),e=y(),r=(0,_f.useSelector)(Ft),[n,a]=(0,Fr.useState)({from:1,size:10});return async()=>{let c=await no().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),m={utxoType:$o.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:Fn(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...m,...n}]},{data:g}=await nt(qo.getBTCUTXO,d,{headers:c}),l=(g?.[0]?.utxoList||[]).map(A=>({...A,tokenAmountInt:A.tokenAmount,tokenAmount:_o(A.tokenAmount,10**o.decimals)})),f=l.length===n.size;return f&&a(A=>({...A,from:A.from+1})),{list:l,more:f}}}function fI(){let o=(0,Fr.useRef)(!0),[t,e]=(0,Fr.useState)(!0),[r,n]=(0,Fr.useState)([]),a=dI(),c=async()=>{if(!!o.current){e(!0);try{let{more:m,list:d}=await a();n(g=>[...g,...d]),o.current=m}finally{e(!1)}}};return(0,yf.useMount)(()=>{c()}),{list:r,loading:t,request:c}}var Ff=fI;s();i();var Ns={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function lI(){let o=(0,Ef.useHistory)(),t=(0,Bs.useDispatch)(),{coin:e,baseCoin:r}=S(),n=(0,Bs.useSelector)(at),a=df(),c=af(),m=Dt(),d=y(),g=(0,Xo.useMemo)(()=>n.reduce((w,{tokenAmount:P})=>uo(w,P),0),[n]),{loading:l,list:f,request:A}=Ff(),I=hf({coinId:r.coinId}),T=f.length>0,C=l||I;Af(),cf(C,f);let{availableWithoutSpending:x,availableWithoutSpendingDisplay:_,availableReceiving:F,availableReceivingDisplay:k}=de();if(f.length===0&&C)return Xo.default.createElement("div",{className:Ns.loading},Xo.default.createElement(Je.Circle,{size:Je.SIZE.xl}));let M=Xo.default.createElement(ts.FooterActions,{usePortal:!0,className:(0,bf.default)(Ns.inscribeFooter)},Xo.default.createElement(fo,{block:!0,type:fo.TYPE.highlight,size:fo.SIZE.lg,onClick:a},E("extension_wallet_btc_btn_inscribe")),Xo.default.createElement(fo,{block:!0,type:fo.TYPE.highlight,size:fo.SIZE.lg,disabled:!0},E("wallet_extension_send_btn_continue")));return Xo.default.createElement(j,{checkEmpty:!1,inputAmount:g,renderError:c,classes:{content:T?Ns.content:""},slot:{bottom:T?Xo.default.createElement(nf,{loading:C,list:f,request:A,onSelected:w=>{t(Ct({name:"brc20UtxoList",value:w}))}}):null,footer:f.length===0&&Number(x)>0?M:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:n.length===0,onClick:()=>{o.push(`${Jo}/${e.coinId}${Qe}?type=${m}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:E("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:Xo.default.createElement(Xo.default.Fragment,null,(Number(x)>0||Number(F)>0)&&Xo.default.createElement(hr,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:x,availableWithoutSpendingDisplay:_,availableReceiving:F,availableReceivingDisplay:k,goToInscribe:a}))}}})}var Pf=lI;s();i();var kf=u(h()),vs=u(ko());function pI(){let{coinId:o}=(0,vs.useParams)(),t=(0,vs.useHistory)(),e=Dt(),r=y();return kf.default.createElement(sd,{onConfirm:()=>{t.push(`${Jo}/${o}${or}?type=${e}&from=${r}`)}})}var wf=pI;var gI={[Lt.SEND]:Pf,[Lt.INSCRIBE]:wf};function AI(){let o=Dt(),t=gI[o];return t?Nf.default.createElement(t,null):null}var Bf=AI;s();i();var jf=u(h());s();i();var Lo=u(h()),Re=u(b()),zf=u(ko());K();s();i();var Qr=u(h());s();i();var Ot=u(h()),vf=u(yt());K();s();i();var Oe={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var CI=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:r,symbol:n}=o;return Ot.default.createElement(H.FlexBox,{justify:"space-between",align:H.ALIGN.center,className:Oe.utxoTextWrap},Ot.default.createElement(H.FlexBox,{align:H.ALIGN.center},Ot.default.createElement(J.Text,{className:Oe.utxoText,ellipsis:{tooltip:!0}},t),e&&Ot.default.createElement(xn,{className:Oe.badge,color:xn.COLOR.green,type:xn.TYPE.rect},E("extension_wallet_transaction_label_signature"))),Ot.default.createElement(H.FlexBox,{align:H.ALIGN.center,className:(0,vf.default)(Oe.utxoText,Oe.utxoTextAmount)},Ot.default.createElement(J.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},r),Ot.default.createElement(J.Text,{inherit:!0,strong:!0,className:Oe.utxoTextSymbol},n)))},Lf=(0,Ot.memo)(CI);s();i();var Df={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var TI=({utxos:o})=>Qr.default.createElement(H.Box,{className:Df.utxosBlock},o.map((t={},e)=>{let{address:r,coinAmount:n,isNeedToSign:a,symbol:c}=t;return Qr.default.createElement(Lf,{key:e,address:r,coinAmount:n,isNeedToSign:a,symbol:c})})),ia=(0,Qr.memo)(TI);po();s();i();var on=u(b());zo();s();i();po();Po();be();Pe();yo();var Ls=async({walletId:o,signedTx:t,coinId:e,coinAmount:r,fromAdr:n,toAdr:a,serviceCharge:c,txHash:m,walletType:d,txType:g,extJson:l})=>{let f=qo.postTx,A=await no().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),I={};e==1&&(I.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:T}=await nt(f,{signedTx:t,coinId:e,coinAmount:r,fromAdr:n,toAdr:a,serviceCharge:c,txSource:rt.NORMAL,txHash:m,accountId:o,walletType:d,...I,extJson:l,txType:g},{headers:A});return T};var Mf=(o,t)=>!o||!o.length?"0":o.reduce((r,n)=>{let c=(n.nftLocaltionVOs||[]).reduce((m,d)=>d.nftId===t?uo(m,d.value):m,"0");return uo(r,c)},"0"),aa=({address:o,amount:t="0",satAmount:e="0",tokenType:r="FT",atomicalId:n},a=546)=>(e=ot(e,0)?e:t,{address:o,amount:Mr(e,a)?a:Number(e),data:[{atomicalId:n,type:r,amount:Number(t)}]}),Of=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Vo(r,t)}),Rf=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Vo(r,t)});yo();s();i();var Uf=u(h()),ca=u(b());To();function II(o){let t=(0,ca.useSelector)(Ft),e=y(),r=(0,ca.useSelector)(at),n=Mt(),a=N(),c=rs(t);return(0,Uf.useCallback)(async m=>{if(!m.length)return null;let d={address:e,feePerB:n,inputs:[...r.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A})),...m.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A}))],outputs:[...r.map(({coinAmount:l})=>({amount:l,address:a}))]};return await Dm(d,e,An,t,{fake:o===gs.CAL_FEE&&c})},[r,n])}var Wf=II;function SI(){let o=(0,on.useDispatch)(),{coin:t,baseCoin:e}=S(),r=(0,on.useSelector)(at),n=y(),a=N(),c=X(),m=V(),d=(0,on.useSelector)(Ft),g=Gm(d),l=No(),A=lc(t)?Fo.BRC20_SEND:Fo.BRC30_SEND,I=Wf(gs.CONFIRM),T=_s({coinId:e?.coinId}),C=Mt(),x=Cr({address:n,coinId:t.coinId,currencyId:l,txType:A,protocolId:Fn(t.chainId)}),_=ou(d),F=async M=>{try{await _();let w=await I(M.utxoList||[]),P=await Io(t.localType,w),B=g?.serverWalletType,O={txSource:rt.NORMAL,toAdr:a,coinId:t.coinId,txHash:P,signedTx:w,walletId:d,serviceCharge:c,fromAdr:n,coinAmount:m,walletType:B,txType:A,extJson:JSON.stringify({nftIds:r.reduce((D,G)=>[...D,...(G.nftLocaltionVOs||[]).map(({nftId:Z})=>Z)],[])})},v=await Ls(O);ao({tx_id:v})}catch(w){w?.error_message&&jt.error(w?.error_message)}};return async()=>{let M=await T({from:n,coinAmount:0,serviceCharge:c,feeRate:C}),w=M.utxoList||[];return o(Ct({name:"feeUtxoList",value:w||[]})),await x([...r||[],...w||[]],Da),await F(M)}}var Gf=SI;s();i();var Hf=u(b());function xI(){let o=(0,Hf.useDispatch)(),e=[gu()],{runErrorFns:r}=fr(e);ds(r,n=>{o(Kc(n))})}var Vf=xI;s();i();var qf=u(h()),tn=u(b());function Kf(){let o=(0,tn.useDispatch)(),t=sa();(0,qf.useEffect)(()=>{o(Ct({name:"signInfo",value:t}))},[t])}function Jf(){let o=Mo(),t=(0,tn.useDispatch)(),e=y(),r=N(),n=go(),a=Mt(),c=(0,tn.useSelector)(at),[m,d,g]=Cs({coinId:o,toAddr:r,walletId:n,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(l,f)=>{t(z(l)),t(Ct({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:m,fee:d,feeError:g}}s();i();var Yf={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function hI(){let o=as(),t=y(),e=N(),r=X(),n=(0,Re.useSelector)(at),a=(0,Re.useSelector)(om),{baseCoin:c}=S(),m=(l,f)=>l.map(({coinAmount:A})=>{let I=_o(A,10**c.decimals);return{address:Gi(f),coinAmount:o(I,c,{useApproximate:!1}),symbol:c.symbol}}),d=(0,Lo.useMemo)(()=>m([...n,...a],t),[n,a]),g=(0,Lo.useMemo)(()=>{let l=m(n,e),f=a.reduce((A,{coinAmount:I})=>uo(A,I),"0");if(ot(f,r)){let A=_o(Ht(f,r),10**c.decimals);l.push({address:Gi(t),coinAmount:o(A,c,{useApproximate:!1}),symbol:c.symbol})}return l},[n,a,r]);return Lo.default.createElement(It,{space:32},Lo.default.createElement(Jr,{title:E("extension_wallet_transaction_text_input")},Lo.default.createElement(ia,{utxos:d})),Lo.default.createElement(Jr,{title:E("extension_wallet_transaction_text_output")},Lo.default.createElement(ia,{utxos:g})))}function _I(){let o=(0,Re.useDispatch)(),[t,e]=(0,Lo.useState)(!1),{coinId:r}=(0,zf.useParams)(),n=No(),a=(0,Re.useSelector)(tm),c=Gf(),{signInfo:m}=(0,Re.useSelector)(qn),d=dr(),g=Mt(),{feeLoading:l,fee:f,feeError:A}=Jf(),I=_o(f,g),T=x=>{o(Ct({name:"selectedSat",value:x}))};Kf(),Vf();let C=m?.transferReminder;return Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(oo,{classes:{network:Yf.network},slot:{bottom:Lo.default.createElement(hI,null)},defaultMessage:C,networkFeeProps:{loading:l,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Lo.default.createElement(nd,{currencyId:n,bytes:I,value:a,coinId:r,signInfo:m,onChange:T,visible:t,onClose:()=>{e(!1)},supportDecimal:!0}))}var Zf=_I;s();i();var Ds=u(h()),$f=u(ko());po();function yI(){let o=(0,$f.useHistory)(),t=Nt();return(0,Ds.useEffect)(()=>{Sn(t,"0")&&o.go(-1)},[t]),Ds.default.createElement(id,{onConfirm:()=>{o.replace(vc)}})}var Xf=yI;var FI={[Lt.SEND]:Zf,[Lt.INSCRIBE]:Xf};function EI(){let o=Dt(),t=FI[o];return t?jf.default.createElement(t,null):null}var Qf=EI;s();i();var ol=u(h());function bI({children:o}){let e=dt().get("from");return ol.default.createElement(vo,{fromAddress:e},o)}var tl=bI;var PI={match:(o,t,e)=>et({coinId:o})&&[W.BRC_20,W.FRACTAL_BRC20].includes(e),Container:tl,pages:{AddressPage:Bf,AmountPage:jd,ConfirmPage:Qf}},el=PI;s();i();s();i();var rl=u(h());s();i();var kI=()=>{let{initialType:o}=Wm();return async t=>{let{isValid:e}=await fs(t);return e&&Bm(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},wI=()=>[kI()],Ms=wI;var NI=()=>{let o=Ms(),t=xr();return rl.default.createElement(Q,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},nl=NI;s();i();var ge=u(h());K();yo();s();i();var Ro=u(h()),pe=u(b());zo();K();yo();To();s();i();var vI=()=>{let o=(0,pe.useDispatch)(),t=(0,pe.useSelector)(nr),e=(0,Ro.useCallback)(r=>{o(Yn({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},LI=({fromAddr:o,toAddr:t,protocolId:e,minOutput:r,sendAmountInt:n,transferInputs:a})=>{let c=(0,pe.useDispatch)();return(0,Ro.useMemo)(()=>{if(W.ARC_20!==e)return null;if(!a||a.length===0||L.eq(n,0))return c(qi([])),null;let m=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,g=aa({address:t,amount:n,tokenType:m,atomicalId:d},r),l=Mf(a,d),f=L.sub(l,n),A=aa({address:o,amount:f,tokenType:m,atomicalId:d},r),I=[];return L.lte(f,0)?I.push(g):L.lt(f,r)?I.push(g,A):L.gte(f,r)&&I.push(A,g),c(qi(I)),I},[e,a,n,t,r,o,c])},DI=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:r,minOutput:n,isXrc20Token:a,protocolId:c,sendAmountInt:m})=>{let d=LI({fromAddr:o,minOutput:n,protocolId:c,sendAmountInt:m,toAddr:t,transferInputs:r});return(0,Ro.useMemo)(()=>!a||W.SRC_20===c||!r?.length?null:W.ARC_20===c&&d?d:W.RUNES===c?[{address:t,amount:n,data:{id:e,amount:m}}]:W.RUNEMAIN===c||W.FRACTAL_RUNES?[{address:t,amount:n,data:{id:e,amount:m}}]:[{address:t,amount:Number(m),...yu(r[0],c)}],[e,a,n,c,m,t,r,d])},MI=({coin:o,coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:c,isXrc20Token:m})=>{let[,d]=As({coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:c,utxoType:$o.BRC20_CONVERTIBLE},{ready:o&&m&&r!==W.SRC_20});return[null,d]},OI=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:r,inscriptionOutput:n})=>(0,Ro.useMemo)(()=>o===22?546:t?r===W.SRC_20?n||790:"0":e,[o,t,e,r,n]),RI=({coin:o,isXrc20Token:t,protocolId:e,satBytes:r,transferInputs:n})=>(0,Ro.useMemo)(()=>!o||!r?!1:!(e&&t&&e!==W.SRC_20&&!n?.length),[o,t,e,r,n?.length]),UI=({coin:o,protocolId:t})=>(0,Ro.useMemo)(()=>{if(o?.address&&[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(t))return Oa(o?.address?.split("-"))},[o?.address,t]),WI=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:r})=>(0,Ro.useMemo)(()=>{if(t&&e===W.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:r})}},[o?.name,t,e,r]),GI=({coinId:o,walletId:t,satBytes:e,address:r,isXrc20Token:n,coinBalance:a})=>{let c=(0,pe.useDispatch)(),[m,d]=Kr({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:g=>{c(o!==22&&!n?Do(g):Do(a?.coinAmountInt)),c(ee(g))}});return[m,d]},HI=({coinId:o,walletId:t,protocolId:e,tick:r,address:n})=>{let a=(0,pe.useDispatch)(),[c,m]=Kr({coinId:o,walletId:t,protocolId:e,tick:r,address:n,coinAmount:"0",utxoType:$o.BRC20_CONVERTIBLE},{ready:[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(Do(d))}});return[c,m]},VI=({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:n,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:I,availableSendCoinAmountInt:T,sendAmountInt:C},{ready:x,networkFeeInt:_})=>{let F=(0,pe.useDispatch)(),[k,M,w]=Cs({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:n,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,canTransferAmount:o===22||A?I:T,...o===22?{omni:{coinType:31,amount:C}}:{}},{ready:x,onSuccess:P=>{Math.abs(Number(L.sub(P,_)))!==parseInt(n,10)&&(F(z(P)),F(R(!1)))},onError:P=>{F(R(P))}});return[k,M,w]},qI=()=>{let o=Mo(),t=y(),e=N(),r=go(),n=Yo(o),a=n?.protocolId,c=Fu(a),m=n?.baseCoinId||o,d=Ne(t,r,n?.localType),g=Nt(),l=X(),f=V(),A=dr(),I=Zo(),T=ms(),[,C]=Be({protocolId:a,coinId:o,address:t,chainId:n?.chainId}),{inscriptionOutput:x,minOutput:_}=C||{},[F,k]=vI(),M=F?.satBytes;(0,Ro.useEffect)(()=>{if(!M&&C?.normal&&k({level:Ko.STANDARD,satBytes:C?.normal}),M&&F?.level!==Ko.CUSTOM){let Fe=C[Yr[F?.level]?.satBytes];k({...F,satBytes:Fe})}},[C]);let w=Jt(o,void 0,{addressType:d}),P=OI({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:x}),B=UI({coin:n,protocolId:a}),[,O]=MI({coin:n,coinId:o,walletId:r,protocolId:a,tick:B,address:t,coinAmount:f,isXrc20Token:c}),v=DI({fromAddr:t,toAddr:e,coinTick:B,transferInputs:O,minOutput:_,isXrc20Token:c,protocolId:a,sendAmountInt:f}),D=(0,Ro.useMemo)(()=>{if(O?.length)return O.map(({txHash:Fe,vout:vr})=>`${Fe}-${vr}`)},[O]),G=RI({coin:n,isXrc20Token:c,protocolId:a,satBytes:M,transferInputs:O}),Z=WI({coin:n,isXrc20Token:c,protocolId:a,sendAmount:g}),U=(0,Ro.useMemo)(()=>a===W.SRC_20?{protocolId:a,utxoType:$o.BRC20_CONVERTIBLE}:{utxoType:$o.TRANSFER,needFilteredUtxo:[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(a)?D:void 0},[D,a]),[$,Y]=GI({coinId:o,walletId:r,satBytes:M,address:t,isXrc20Token:c,coinBalance:w}),[ho,Go]=HI({coinId:o,walletId:r,protocolId:a,tick:B,address:t}),[Xt,,Wt]=VI({coinId:o,toAddr:e,walletId:r,fromAddr:t,satBytes:M,inputs:O,outputs:v,networkFee:l,revealOutValue:x,coinAmount:P,utxoParams:U,inscriptionData:Z,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:T,sendAmountInt:f},{ready:G,networkFeeInt:l}),_e=(0,Ro.useMemo)(()=>[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(a)?Y===void 0||Go===void 0:Y===void 0,[Y,a,Go]),ye=(0,Ro.useMemo)(()=>n?.chainId!==tc&&n?.chainId!==ec||o===22?!1:!!(n&&!a||W.RUNEMAIN===a),[n,o,a]);return{coin:n,toAddr:e,coinId:o,walletId:r,signInfo:C,feeError:Wt,fromAddr:t,protocolId:a,baseCoinId:m,feeLoading:Xt,addressType:d,sendAmountInt:f,networkFeeInt:l,transferInputs:O,transferOutputs:v,isXrc20Token:c,utxoParams:U,initLoading:_e,mergedCoinAmount:P,src20InscriptionData:Z,sendCoinAvailableAmount:I,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:F,setSelectedNetworkFeeLevel:k,loading:$||Xt||ho,supportDecimal:ye}},Os=qI;s();i();var ml=u(h());K();yo();s();i();var al=u(h());K();s();i();s();i();var sl=u(b());var il=()=>(0,sl.useSelector)(nr).transferOutputs;var cl=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:r,coin:n})=>{let a=il();return(0,al.useCallback)(c=>o?L.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:n?.symbol},type:ro.COMMON_ERROR}:Rf(a,r)?{key:"wallet_extension_error_dust_limit_transaction",type:ro.COMMON_ERROR}:Of(a,r)?{key:"wallet_extension_error_dust_asset_continue",type:ro.COMMON_TIP}:null:null,[o,t,e,r,n,a])};var ul=o=>{let t=Mo(),e=Yo(t),r=e?.baseCoinId===0,a=e?.protocolId===W.ARC_20,c=L.div(o,10**e?.decimals),m=Zo(),d=L.mul(c,2),g=cl({isArc20Token:a,sendCoinBalance:m,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,ml.useCallback)(l=>{if(!o)return null;let f=g(l);return f||(r&&L.lt(l,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:ro.COMMON_ERROR}:null)},[o,g,r,c,e?.symbol])},dl=o=>{let t=ul(o);to([t])},fl=o=>{let t=ul(o);eo([t])};s();i();var jo=u(h());K();var KI=()=>{let o=wt(),{coin:t}=S();return(0,jo.useCallback)(r=>{let n="";return r.key&&(n=E(r?.key,r?.args)),r?.type===ro.BALANCE_INSUFFICIENT?jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(H.Box,{className:Eo.wrap},n),jo.default.createElement(H.Box,{className:Eo.wrap},jo.default.createElement(me,{coin:t,receiveOnly:!0}))):r?.type===ro.FEE_BALANCE_INSUFFICIENT?jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(H.Box,{className:Eo.wrap},n),jo.default.createElement(H.Box,{className:Eo.wrap},jo.default.createElement(me,{coin:o}))):n},[t,o])},ll=KI;s();i();var pl={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function JI(){let{coin:o,coinId:t,signInfo:e,initLoading:r,addressType:n,fromAddr:a}=Os(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:m}=de(),{lockedAmount:d}=rd(a,o),g=we(d,{decimals:o.decimals});dl(e?.minOutput);let l=ll(),f=(0,ge.useMemo)(()=>et({coinId:t})?E("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===W.SRC_20?E("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===W.ARC_20?E("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===W.RUNEMAIN||o?.protocolId===W.FRACTAL_RUNES?E("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return ge.default.createElement(j,{isGlobalLoading:r,renderError:l,totalAmountProps:{type:"amount",title:ge.default.createElement(ge.default.Fragment,null,E("extension_defi_text_available_balance"),!!f&&ge.default.createElement(ur,{size:ur.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:pl["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?ge.default.createElement(hr,{lockedAmount:d,lockedAmountDisplay:g,pendingXrc:c,pendingXrcDisplay:m,addressType:n,coinId:t}):void 0}}})}var gl=JI;s();i();var pt=u(h()),Rs=u(b()),Al=u(ko()),Us=u(q()),Cl=u(Om());K();yo();pc();var YI=546;function zI(){let o=(0,Al.useHistory)(),t=(0,Rs.useDispatch)(),[e,{toggle:r}]=(0,Us.useBoolean)(!1),{coin:n,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,utxoParams:f,protocolId:A,baseCoinId:I,feeLoading:T,addressType:C,isXrc20Token:x,networkFeeInt:_,sendAmountInt:F,transferInputs:k,transferOutputs:M,mergedCoinAmount:w,availableFeeCoinAmountInt:P,selectedNetworkFeeLevel:B,setSelectedNetworkFeeLevel:O,src20InscriptionData:v,supportDecimal:D}=Os(),G=No(),Z=(0,Rs.useSelector)(vn),U=yn[n?.localType]?.[C],{showManageUTXO:$}=ys(n,U,!0);fl(l?.minOutput,a);let Y=rs(d),[ho,Go]=(0,pt.useState)(!1),Xt=(0,Us.useMemoizedFn)(pn=>$&&[Ir.BALANCE_INSUFFICIENT,Ir.FEE_BALANCE_INSUFFICIENT].includes(pn)?[{onClick:async()=>{await t(er(!1));let Gt=Cl.default.stringify({addressType:C,coinId:I},{skipEmptyString:!0,skipNull:!0}),He=Gt?`?${Gt}`:"";o.push(wn+He)},btnText:E("wallet_extension_mid_textbtn_manage_utxo")}]:[]),Wt=qr({coinId:a,walletId:d,address:g,utxoType:$o.TRANSFER,satBytes:B?.satBytes,...f}),_e=Pu({coinId:a,toAddr:c,walletId:d,fromAddr:g,protocolId:A,networkFee:_,localType:n?.localType,outputs:M,inscriptionData:v,dustSize:x?void 0:l?.minOutput,satBytes:B?.satBytes,coinAmount:a===22?YI:F,...a===22?{omni:{coinType:31,amount:F}}:{},extraPublishParams:{coinAmount:F,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT}}),ye=Cr({coinId:a,currencyId:G,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT,protocolId:A,address:g}),Fe=(0,pt.useCallback)(async()=>{if(await Ar()){let Gt=[];Gt=await Wt(w,_),Gt=[...k||[],...Gt],await ye(Gt,()=>{o.goBack()}),Go(!0);let He=await _e({utxoList:Gt});return ao({tx_id:He}),He}return Go(!1),Promise.reject()},[Wt,w,_,k,ye,_e,o,Z]),vr=(0,pt.useMemo)(()=>[W.RUNES,W.ARC_20,W.RUNEMAIN,W.FRACTAL_RUNES].includes(A)&&!k?.length?!0:m,[m,A,k?.length]);return pt.default.createElement(pt.default.Fragment,null,pt.default.createElement(oo,{addressType:C,confirmButtonProps:{disabled:vr,onSubmit:Fe},networkFeeProps:{onClick:r,loading:T,feeLevel:B?.level},renderTipActions:Xt,defaultMessage:et({coinId:I})&&l?.transferReminder,canTransferAmount:et({coinId:I})&&P}),pt.default.createElement(Ss,{visible:e,coinId:I,signInfo:l,currencyId:G,estimatedFee:_,value:B,onChange:O,onToggleVisible:r,supportDecimal:D}),pt.default.createElement(Zu,{visible:Y&&ho}))}var Tl=zI;s();i();var Il=u(h());function ZI({children:o}){let e=dt().get("from");return Il.default.createElement(vo,{fromAddress:e},o)}var Sl=ZI;var $I={match:o=>ym(o),Container:Sl,pages:{AddressPage:nl,AmountPage:gl,ConfirmPage:Tl}},xl=$I;s();i();yo();s();i();var yl=u(h()),Fl=u(b()),Ws=u(ko());K();s();i();var hl=u(h());var XI=()=>{let o=xr(),t=e=>e.filter(n=>/^(bc1p)/.test(n.address));return(0,hl.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},_l=XI;var jI=()=>{let{coinId:o}=(0,Ws.useParams)(),t=y(),e=(0,Ws.useHistory)(),r=_l(),n=(0,Fl.useSelector)(so),a=Ms();return yl.default.createElement(Q,{addressProps:{errorFns:a,extraProps:{filterAddress:r}},confirmButtonProps:{onClick:async()=>{let{isValid:m}=await fs(n);if(m)e.push(`${Jo}/${o}${Qe}?from=${t}`);else{let d=tt.warn({alignBottom:!1,title:E("wallet_extension_cat_dialog_title_risk_non_taproot"),text:E("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:E("wallet_extension_cat_icu_taproot")}),confirmText:E("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{d.destroy()}})}}}})},El=jI;s();i();var xt=u(h()),Wl=u(b()),ua=u(yt());K();s();i();var bl=u(h());K();var QI=o=>{let t=Mo(),e=Yo(t),r=Nt();return(0,bl.useCallback)(()=>L.gt(r,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:ro.COMMON_ERROR}:null,[e?.symbol,o,r])},Pl=o=>{let t=QI(o);to([t])},kl=()=>{eo()};s();i();var Qo=u(h()),Ae=u(b()),ma=u(q());K();Po();yo();Pe();be();var wl=()=>{let o=(0,Ae.useDispatch)(),t=(0,Ae.useSelector)(nr),e=(0,Qo.useCallback)(r=>{o(Yn({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},Nl=({coin:o,coinId:t,walletId:e,protocolId:r,tick:n,address:a})=>{let[,c]=As({coinId:t,walletId:e,protocolId:r,tick:n,address:a,coinAmount:"0",utxoType:$o.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},Bl=({coin:o})=>(0,Qo.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),vl=({coinId:o,walletId:t,satBytes:e,address:r,coinBalance:n})=>{let a=(0,Ae.useDispatch)(),[c,m]=Kr({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:d=>{a(Do(n?.coinAmountInt)),a(ee(d))}});return[c,m]},Ll=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((r,n)=>{let a=n?.tokenAmount;return L.add(r,a)},"0");return L.div(e,10**t?.decimals)},oS=({sendAmountInt:o,UTXOList:t})=>(0,Qo.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],r="0";for(let n=0;n<t.length;n++){let a=t[n],c=a?.tokenAmount;if(r=L.add(r,c),e.push(a),L.gte(r,o))break}return e},[t,o]),tS=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:r})=>{let n=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,Ae.useDispatch)(),{error:m,loading:d,data:g}=(0,ma.useRequest)(async()=>{if(!o||o.length===0)return[];if(!n||!a)return[];let l=o.map(T=>({txHash:T.txHash,tokenAddress:n,minterAddress:a,chainIndex:e})),f=await no().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),I=(await nt(qo.getCat20GrandFatherRawTx,{rawTxRequestList:l},{headers:f}))?.data;if(I&&!I.find(T=>T.txStatus!==0))return I;throw c(R(!0)),dc.error({title:E("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[m,d,g]},eS=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:r})=>(0,Qo.useMemo)(()=>{if(!o||!e||!e.length)return null;let n=o?.extInfo,a={minterAddr:n?.minterAddr,tokenAddr:n?.tokenAddr,info:{max:n?.max,name:n?.name,limit:n?.limit,symbol:n?.symbol,premine:"0",decimals:n?.decimals,minterMd5:n?.minterMd5},tokenId:n?.tokenId,revealTxid:n?.revealTxid,revealHeight:n?.revealHeight,genesisTxid:n?.genesisTxid,name:n?.name,symbol:n?.symbol,decimals:n?.decimals,minterPubKey:n?.minterPubKey,tokenPubKey:n?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:n?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:r,amount:d.tokenAmount}})),m=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:m}},[o,e,t,r]),rS=({coinId:o,fromAddr:t,toAddr:e,satBytes:r,coinAmount:n,protocolId:a,CAT20TxParam:c,networkFeeInt:m,...d})=>{let g=(0,Ae.useDispatch)(),l=Eu({coinId:o,fromAddr:t,toAddr:e,satBytes:r,coinAmount:n,protocolId:a,...d}),f=qr({coinId:o,address:t,utxoType:$o.TRANSFER}),A=async()=>{g(co(!0));let C=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],x=JSON.stringify(c?.tokenMetadata),_=JSON.stringify(c?.tokens),F=c?.tokenPrevTxs,{commitTx:k,revealTx:M}=await l({feeInputs:C,tokenMetadata:x,tokens:_,tokenPrevTxs:F}),w=L.add(k,M);if(C=await f(w),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),C.length===1)return g(co(!1)),{mergeTx:"0",commitTx:k,revealTx:M};let P=await l({feeInputs:C,tokenMetadata:x,tokens:_,tokenPrevTxs:F}),B=P.mergeTx,O=L.add(B,w),v=C.reduce((D,G)=>{let Z=G?.amount;return L.add(D,Z)},"0");for(;L.lt(v,O);)C=await f(O),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),v=C.reduce((D,G)=>{let Z=G?.amount;return L.add(D,Z)},"0"),P=await l({feeInputs:C,tokenMetadata:x,tokens:_,tokenPrevTxs:F}),B=P.mergeTx,O=L.add(B,w);return g(co(!1)),{mergeTx:B,commitTx:k,revealTx:M}},{error:I,data:T}=(0,ma.useRequest)(async()=>await A(),{debounceWait:500,ready:!!r&&!!c,refreshDeps:[r],onSuccess:C=>{let x=L.add(L.add(C.mergeTx,C.commitTx),C.revealTx);Math.abs(Number(L.sub(x,m)))!==parseInt(r,10)&&(g(z(x)),g(R(!1)))},onError:C=>{g(R(C))}});return[I,T]},Dl=()=>{let o=Mo(),t=y(),e=go(),r=Yo(o),n=r?.protocolId,a=Ne(t,e,r?.localType),c=V(),m=Zo(),[,d]=Be({protocolId:n,coinId:o,address:t,chainId:r?.chainId}),[g,l]=wl(),f=g?.satBytes;(0,Qo.useEffect)(()=>{if(!f&&d?.normal&&l({level:Ko.STANDARD,satBytes:d?.normal}),f&&g?.level!==Ko.CUSTOM){let k=d[Yr[g?.level]?.satBytes];l({...g,satBytes:k})}},[d]);let A=Jt(o,void 0,{addressType:a}),I=Bl({coin:r}),[,T]=Nl({coin:r,coinId:o,walletId:e,protocolId:n,tick:I,address:t,coinAmount:c}),C=Ll({coin:r,UTXOList:T}),[x,_]=vl({coinId:o,walletId:e,satBytes:f,address:t,coinBalance:A}),F=(0,Qo.useMemo)(()=>_===void 0,[_]);return{initLoading:F,loading:x||F,sendCoinAvailableAmount:m,CAT20CanTransferAmount:C}},Ml=()=>{let o=Mo(),t=y(),e=N(),r=go(),n=Yo(o),a=n?.protocolId,c=n?.baseCoinId||o,m=Ne(t,r,n?.localType),d=Nt(),g=X(),l=V(),f=dr(),A=Zo(),I=ms(),[,T]=Be({protocolId:a,coinId:o,address:t,chainId:n?.chainId}),[C,x]=wl(),_=C?.satBytes,F=(0,Ae.useDispatch)();(0,Qo.useEffect)(()=>{F(co(!0))},[F]),(0,Qo.useEffect)(()=>{if(!_&&T?.normal&&x({level:Ko.STANDARD,satBytes:T?.normal}),_&&C?.level!==Ko.CUSTOM){let ho=T[Yr[C?.level]?.satBytes];x({...C,satBytes:ho})}},[T]);let k=Jt(o,void 0,{addressType:m}),M=Bl({coin:n}),[,w]=Nl({coin:n,coinId:o,walletId:r,protocolId:a,tick:M,address:t,coinAmount:l}),P=Ll({coin:n,UTXOList:w}),B=oS({sendAmountInt:l,UTXOList:w}),[O,v,D]=tS({selectedUtxo:B,signInfo:T,chainIndex:n?.chainId,walletId:r}),G=eS({signInfo:T,selectedUtxo:B,grandFatherRawTxs:D,address:t}),[,Z]=rS({coinId:o,fromAddr:t,toAddr:e,satBytes:_,coinAmount:l,protocolId:a,CAT20TxParam:G,networkFeeInt:g}),[U,$]=vl({coinId:o,walletId:r,satBytes:_,address:t,coinBalance:k}),Y=(0,Qo.useMemo)(()=>$===void 0,[$]);return{coin:n,toAddr:e,coinId:o,walletId:r,signInfo:T,satBytes:_,fromAddr:t,protocolId:a,baseCoinId:c,addressType:m,sendAmount:d,sendAmountInt:l,networkFeeInt:g,feeData:Z,selectedUtxo:B,initLoading:Y,rawTxError:O,sendCoinAvailableAmount:A,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:C,setSelectedNetworkFeeLevel:x,CAT20CanTransferAmount:P,CAT20GrandFatherRawTxs:D,CAT20TxParam:G,loading:U||v}},Ol=({coinId:o,toAddr:t,fromAddr:e,satBytes:r,walletId:n,localType:a,networkFee:c,coinAmount:m,coinAmountInt:d,protocolId:g,dustSize:l=_u,feeData:f,CAT20TxParam:A,history:I,...T})=>{let C=Yo(o),x=No(),_=go(),F=n||_,k=hm(a),M=qr({coinId:o,address:e,utxoType:$o.TRANSFER}),w=Cr({coinId:o,currencyId:x,txType:Fo.BRC20_SEND,protocolId:g,address:e}),P=bu({coinId:o,toAddr:t,walletId:n,fromAddr:e,satBytes:r,localType:k,coinAmount:d,networkFee:c,dustSize:l,protocolId:g,...T}),B=Qm({walletId:F});return(0,Qo.useCallback)(async()=>{let O=await M(c),v=O.map(Mi=>({txId:Mi.txHash,vOut:Mi.vout,amount:Mi.coinAmount}));await w(O,()=>{I.goBack()});let D=JSON.stringify(A?.tokenMetadata),G=JSON.stringify(A?.tokens),Z=A?.tokenPrevTxs,U=await P({feeInputs:v,tokenMetadata:D,tokens:G,tokenPrevTxs:Z}),{mergeTx:$,commitTx:Y,revealTx:ho}=U,Go=[],Xt=JSON.stringify({protocolId:W.CAT20,broadcastType:1,nftIds:[]}),Wt,_e=await Io(a,Y),ye=await Io(a,ho);$&&(Wt=await Io(a,$));let Fe={signedTx:$,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:C?.baseCoinId,txHash:Wt,txType:Fo.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:Xt},vr={signedTx:Y,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:C?.baseCoinId,txHash:_e,txType:Fo.CAT20_NOT_SHOWN,dependTx:Wt?[Wt]:[],itemId:"commitTx",extJson:Xt},pn={signedTx:ho,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:ye,txType:Fo.BRC20_SEND,dependTx:[_e],itemId:"revealTx0",extJson:Xt};$&&Go.push(Fe),Go.push(vr,pn);let He=(await B(Go))[ye];ao({tx_id:He})},[M,c,w,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,P,a,e,f,C?.baseCoinId,t,d,o,B,I])};s();i();var Ao=u(h());K();var Rl=u(yt()),nS=()=>{let o=wt(),{coin:t}=S();return(0,Ao.useCallback)(r=>{let n="";if(r.key&&(n=E(r?.key,r?.args)),r?.type===ro.BALANCE_INSUFFICIENT)return Ao.default.createElement(Ao.default.Fragment,null,Ao.default.createElement(H.Box,{className:Eo.wrap},n),Ao.default.createElement(H.Box,{className:Eo.wrap},Ao.default.createElement(me,{coin:t,receiveOnly:!0})));if(r?.type===ro.FEE_BALANCE_INSUFFICIENT)return Ao.default.createElement(Ao.default.Fragment,null,Ao.default.createElement(H.Box,{className:Eo.wrap},n),Ao.default.createElement(H.Box,{className:Eo.wrap},Ao.default.createElement(me,{coin:o})));let a=()=>{tt.action({title:" ",children:Ao.default.createElement("div",{className:Eo.dlgContainer},Ao.default.createElement("div",{className:Eo.dlgTitle},E("wallet_extension_cat_drawer_title_utxo_meaning")),Ao.default.createElement("div",{className:Eo.dlgContent},E("wallet_extension_cat_drawer_subtitle_utxo_meaning")),Ao.default.createElement("div",{className:(0,Rl.default)(Eo.dlgTitle,Eo.dlgGap)},E("wallet_extension_cat_drawer_title_cat_contract")),Ao.default.createElement("div",{className:Eo.dlgContent},E("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:E("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return r?.key==="wallet_extension_cat_max_send_utxo"?Ao.default.createElement(Ao.default.Fragment,null,Ao.default.createElement(H.Box,{className:Eo.wrap},n,Ao.default.createElement(Ke,{className:"okx-wallet-plugin-information-circle",onClick:a}))):n},[t,o])},Ul=nS;s();i();var Rt={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function sS(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:r}=Dl();Pl(r);let n=Ul(),a=(0,Wl.useDispatch)(),c=ls(),m=()=>{a(qc(!1)),c()},d=()=>{tt.action({title:" ",children:xt.default.createElement("div",{className:Rt.dlgContainer},xt.default.createElement("div",{className:Rt.dlgTitle},E("wallet_extension_cat_drawer_title_utxo_meaning")),xt.default.createElement("div",{className:Rt.dlgContent},E("wallet_extension_cat_drawer_subtitle_utxo_meaning")),xt.default.createElement("div",{className:(0,ua.default)(Rt.dlgTitle,Rt.dlgGap)},E("wallet_extension_cat_drawer_title_cat_contract")),xt.default.createElement("div",{className:Rt.dlgContent},E("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:E("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return xt.default.createElement(j,{isGlobalLoading:o,renderError:n,customMaxAmount:r,confirmButtonProps:{loading:t,onClick:m},totalAmountProps:{maxAmount:r,type:"amount",title:xt.default.createElement("div",{className:Rt.canTransferContainer},xt.default.createElement("div",{className:Rt.canTransferText},E("wallet_extension_cat_desc_available_utxo")),xt.default.createElement(Ke,{className:(0,ua.default)(Rt.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:d})),slot:{bottom:xt.default.createElement(hr,{catTotalAmount:e})}}})}var Gl=sS;s();i();var zt=u(h()),Hl=u(b()),Vl=u(ko()),Gs=u(q()),ql=u(Om());K();pc();function iS(){let o=(0,Vl.useHistory)(),t=(0,Hl.useDispatch)(),[e,{toggle:r}]=(0,Gs.useBoolean)(!1),{coin:n,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,satBytes:f,sendAmount:A,sendAmountInt:I,protocolId:T,baseCoinId:C,addressType:x,networkFeeInt:_,feeData:F,selectedUtxo:k,availableFeeCoinAmountInt:M,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:P,CAT20TxParam:B}=Ml(),O=Ol({coinId:a,toAddr:c,fromAddr:g,satBytes:f,walletId:d,feeData:F,localType:n?.localType,networkFee:_,coinAmount:A,coinAmountInt:I,protocolId:T,CAT20TxParam:B,history:o}),v=No(),D=yn[n?.localType]?.[x],{showManageUTXO:G}=ys(n,D,!0);kl();let Z=(0,Gs.useMemoizedFn)(Y=>G&&[Ir.BALANCE_INSUFFICIENT,Ir.FEE_BALANCE_INSUFFICIENT].includes(Y)?[{onClick:async()=>{await t(er(!1));let ho=ql.default.stringify({addressType:x,coinId:C},{skipEmptyString:!0,skipNull:!0}),Go=ho?`?${ho}`:"";o.push(wn+Go)},btnText:E("wallet_extension_mid_textbtn_manage_utxo")}]:[]),U=(0,zt.useCallback)(async()=>{await O()},[O]),$=(0,zt.useMemo)(()=>!k?.length||m,[m,k?.length]);return zt.default.createElement(zt.default.Fragment,null,zt.default.createElement(oo,{addressType:x,confirmButtonProps:{disabled:$,onSubmit:U},networkFeeProps:{onClick:r,feeLevel:w?.level},renderTipActions:Z,defaultMessage:et({coinId:C})&&l?.transferReminder,canTransferAmount:et({coinId:C})&&M}),zt.default.createElement(Ss,{visible:e,coinId:C,signInfo:l,currencyId:v,estimatedFee:_,value:w,onChange:P,onToggleVisible:r}))}var Kl=iS;s();i();var Jl=u(h());function aS({children:o}){let e=dt().get("from");return Jl.default.createElement(vo,{fromAddress:e},o)}var Yl=aS;var cS={match:(o,t,e)=>et({coinId:o})&&[W.CAT_20].includes(e),Container:Yl,pages:{AddressPage:El,AmountPage:Gl,ConfirmPage:Kl}},zl=cS;s();i();To();s();i();var ap=u(h());var qs=u(b());var fa=u(q());K();s();i();var jl=u(h()),Ql=u(q());s();i();K();zo();var Zl=(o,t)=>{let[e,r]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:r}]}]},mS=(o,t)=>Ga(Ua([...o,...t],"assetName")).map(r=>{let n=o.find(c=>c?.assetName===r),a=t.find(c=>c?.assetName===r);return{assetName:r,amount:L.add(n?.amount||0,a?.amount||0)}}),uS=o=>{let t=o.reduce((r,n)=>{let{multiAsset:a}=n;return a?.length?[...r,...a]:r},[]),e=[];return t.forEach(r=>{let{policyId:n,assets:a}=r,c=Ra(e,{policyId:n});if(c!==-1){let{assets:m}=e[c];e[c]={policyId:n,assets:mS(a,m)}}else e=[...e,r]}),e},$l=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:r,contractAddress:n})=>{let{AdaWallet:a}=await Vr(),c;return e===0&&t?.some(({multiAsset:m})=>!!m?.length)?c=uS(t):e!==0&&(c=Zl(n,r)),a.minAda(o,c)},Xl=async o=>{let{AdaWallet:t}=await Vr();return t.minFee(o)},dS="999999999",fS="transfer",Hs=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:r,baseCoinId:n,contractAddress:a,minTransferAmountInt:c})=>{let m={address:o,inputs:t,ttl:dS,type:fS,changeAddress:e};return n===0?m={...m,amount:r}:m={...m,amount:c,multiAsset:Zl(a,r)},m};var lS=({utxoList:o,toAddr:t,fromAddr:e,coinId:r,sendAmount:n,minTransferAmountInt:a},c)=>{let m=Yo(r),[d,g]=(0,jl.useState)("0");return(0,Ql.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let l=Hs({toAddr:t,fromAddr:e,utxoList:o,contractAddress:m?.address,baseCoinId:m?.baseCoinId,sendAmount:n,minTransferAmountInt:a});try{let f=await Xl({data:l});c?.(f),g(f)}catch(f){console.log(f)}})()},[m,t,e,n,a,o]),d},op=lS;s();i();var rp=u(h()),np=u(q());s();i();var ep=u(q());be();Pe();Po();K();s();i();var tp=u(ko());var pS=()=>{let{coinId:o}=(0,tp.useParams)(),t=y(),e=go(),[r,n]=qm(o);return{address:t,walletId:e,coin:r||{},coinId:Number(o),baseCoin:n||{},baseCoinId:r?.baseCoinId}},Er=pS;var gS=()=>{let o=pr(),{coin:t,coinId:e,walletId:r,address:n}=Er(),a=t?.baseCoinId;return(0,ep.useMemoizedFn)(async(c,m,d)=>{let g=await no().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),l=m,f=c,A=L.add(L.add(a===0?c:d,m),d);a===0&&L.gte(A,o)&&(f=o,l="0"),a!==0&&(l=L.add(m,L.add(d,d)));let I={coinId:e,address:n,fee:l,amount:f},{data:T}=await nt(qo.getSpecialUtxoList,I,{headers:g});return T},[e,r,n,a,o])},Vs=gS;var AS=(o,t,e)=>{let[r,n]=(0,rp.useState)([]),a=Vs();return(0,np.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);n(c)})()},[o,t,e,a]),r},sp=AS;s();i();var da=u(q());K();var CS=o=>{let t=S(),{coin:{symbol:e,baseCoinId:r,decimals:n}}=t,a=L.div(o,10**n);return(0,da.useMemoizedFn)(c=>r===0&&L.gt(a,0)&&L.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:we(a,{symbol:e})},type:ro.COMMON_ERROR}:null,[a,e,r])},TS=o=>{let t=wt(),{coin:e}=S(),r=X(),n=pr(),{baseCoinId:a}=e;return(0,da.useMemoizedFn)(c=>{let m=L.mul(c,10**e?.decimals),d,g;a===0?(g=L.add(L.add(m,r),o),d=L.add(m,r)):(g=L.add(L.add(r,o),o),d=L.add(r,o));let l=L.sub(n,d);return Number(l)!==0&&L.lt(l,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:we(g,{decimals:t?.decimals})},type:ro.COMMON_ERROR}:null},[a,r,n,t?.decimals,e?.decimals])},IS=o=>{let t=CS(o),e=TS(o);to([t,e])},ip=IS;function SS(){let o=(0,qs.useDispatch)(),t=X(),r=(0,qs.useSelector)(Un)?.minTransferInt,n=V(),a=N(),c=pr(),{coin:m,coinId:d,baseCoinId:g,address:l}=Er(),f=sp(n,t,r);return(0,fa.useDeepCompareEffect)(()=>{(async()=>{let A=await $l({contractAddress:m?.address,baseCoinId:g,utxoList:f,toAddr:a,sendAmountInt:n});o(am({minTransferInt:A}))})()},[f,g,a,n,m?.address]),(0,fa.useDeepCompareEffect)(()=>{g===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(Do(L.sub(c,r)))},[f,c,r]),ip(r),op({coinId:d,toAddr:a,utxoList:f,fromAddr:l,minTransferAmountInt:r,sendAmount:n},A=>{o(z(A))}),ap.default.createElement(j,null)}var cp=SS;s();i();var fp=u(h());s();i();var mp=u(b()),up=u(q());K();var xS=()=>{let t=(0,mp.useSelector)(Un)?.minTransferInt,{coin:e,coinId:r,address:n,walletId:a}=Er(),c=es(a),m=V(),d=N(),g=X(),l=Vs(),f=wo({fromAddr:n,walletId:a,localType:e?.localType});return(0,up.useMemoizedFn)(async()=>{try{let I=await l(m,g,t),T=Hs({toAddr:d,fromAddr:n,utxoList:I,minTransferAmountInt:t,sendAmount:m,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),C=await f({params:T}),x=await Io(e?.localType,C),_={coinId:r,txHash:x,signedTx:C,walletId:a,toAdr:d,serviceCharge:g,fromAdr:n,coinAmount:m,walletType:c?.serverWalletType},F=await Ls(_);ao({tx_id:F})}catch(I){jt.error(I?.error_message||E("wallet_home_toast_network_error"))}},[e,m,d,t,g,c?.serverWalletType,l])},dp=xS;function hS(){let o=dp();return eo(),fp.default.createElement(oo,{confirmButtonProps:{onSubmit:o}})}var lp=hS;var _S={match:o=>o===Xa,pages:{AmountPage:cp,ConfirmPage:lp,AddressPage:Q}},pp=_S;s();i();s();i();var Ap=u(h());s();i();zo();To();var yS=()=>{let o=vt(),t=bm(),e=ns({factionType:Tn});return[o,async r=>(await Promise.all(t.map(c=>{let m=Nn(e,c);return ae(r,c,m)}))).some(La)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},gp=yS;var FS=()=>{let o=gp();return Ap.default.createElement(Q,{addressProps:{errorFns:{fns:o,override:!0}}})},Cp=FS;s();i();var Sp=u(h());s();i();var Tp=u(b()),Js=u(q());po();Po();s();i();var Ks=u(h());To();function la(){let{baseCoin:o}=S(),t=N(),[e,r]=(0,Ks.useState)(!1),n=ns({factionType:Tn});return(0,Ks.useEffect)(()=>{(async()=>{let c=Nn(n,o.coinId),m=await ae(t,o?.coinId,c);r(!m)})()},[o,t]),e}var ES=async({memo:o,fromAddress:t,toAddress:e,amountInt:r,isIBCTransfer:n,baseCoin:a,signInfo:c})=>{let{chainId:m,sequence:d,accountNumber:g,feeDemon:l,demon:f,sourceChannel:A,normal:I,gasLimit:T}=c,C={chainId:m,sequence:d,accountNumber:g,feeDemon:l,feeAmount:Ho(I,T),gasLimit:T,memo:o,fake:!0},x={fromAddress:t,toAddress:e,demon:f,amount:r},_={};if(n){let k=uo(Math.round(Date.now()/1e3),300);_={...C,type:ze.IBC_TRANSFER,data:{...x,sourcePort:"transfer",sourceChannel:A,ibcTimeoutTimestamp:k}}}else _={...C,type:ze.TRANSFER,data:{...x}};return await no().signTransaction(_,t,a.localType)},bS=()=>{let o=(0,Tp.useDispatch)(),[t,{setFalse:e}]=(0,Js.useBoolean)(!0),{coin:r}=S(),{coinId:n}=r,a=y(),c=N(),m=mo(),d=la();return(0,Js.useDebounceEffect)(()=>{n&&c&&m!=="0"&&(async()=>{try{let l=await kc({coinId:n,from:a,to:c}),f=await ES({memo:"",fromAddress:a,toAddress:c,amountInt:m,isIBCTransfer:d,baseCoin:r,signInfo:l}),A=await wc({coinId:n,from:a,inputData:f}),I=Math.ceil(Ho(l.normal,A));o(z(I)),o(jn({inputData:f,signInfo:l,gasLimit:A,isIBCTransfer:d})),o(R(!1))}catch{o(R(!0))}finally{e()}})()},[n,a,c,m,d]),t},Ip=bS;function PS(){let o=Ip();return to(),Sp.default.createElement(j,{confirmButtonProps:{loading:o}})}var xp=PS;s();i();var ht=u(h()),zs=u(b()),yp=u(q());s();i();var Ce=u(h()),hp=u(yt());K();s();i();var br={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var kS=({value:o,onChange:t,placeholder:e,title:r=E("wallet_extension_title_memo_optional"),dashed:n=!0,error:a,errorType:c,maxLength:m=256})=>{let d=Mm();return Ce.default.createElement(It,{bordered:!1},Ce.default.createElement(Jr,{title:Ce.default.createElement(Tm,{href:d?.sendMemoInput,className:(0,hp.default)(br["memo-title__link"],{[br["memo-title__link__dashed"]]:n})},Ce.default.createElement(J.Text,{inherit:!0},r))},Ce.default.createElement(Vt.TextArea,{placeholder:e||E("wallet_extension_input_memoinfro"),size:Vt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:m,error:a,errorType:c,className:br["memo-input"],inputClassName:br["memo-input-core"],innerClassName:br["memo-input-box"]})))},Te=(0,Ce.memo)(kS);s();i();var Ys=u(b());po();Po();var wS=o=>{let{coin:t,baseCoin:e}=S(),r=y(),n=mo(),a=(0,Ys.useSelector)(so),c=(0,Ys.useSelector)(st),{gasLimit:m,signInfo:d,isIBCTransfer:g,gasPrice:l}=(0,Ys.useSelector)(Jn),f=Bo();return lo(async()=>{if(!await Ar())throw new Error("mpc error")},async()=>{let{chainId:x,sequence:_,accountNumber:F,feeDemon:k,demon:M,sourceChannel:w}=d,P={chainId:x,sequence:_,accountNumber:F,feeDemon:k,feeAmount:c,gasLimit:m,memo:o},B={fromAddress:r,toAddress:a,demon:M,amount:n},O={};if(g){let D=uo(Math.round(Date.now()/1e3),300);O={...P,type:ze.IBC_TRANSFER,data:{...B,sourcePort:"transfer",sourceChannel:w,ibcTimeoutTimestamp:D}}}else O={...P,type:ze.TRANSFER,data:{...B}};return await no().signTransaction(O,r,e.localType)},async x=>{let _={memo:o,gasPrice:l,gasLimit:m},F=await Io(t.localType,x),k={signedTx:x,coinAmount:n,coinId:t.coinId,fromAdr:r,toAdr:a,serviceCharge:c,extJson:JSON.stringify(_),txHash:F};return await f(k)},x=>(ao({tx_id:x}),x))},_p=wS;s();i();function pa({feeInfo:o,callback:t}){let e=cs();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function NS(){let o=(0,zs.useDispatch)(),[t,e]=(0,ht.useState)({}),[r,{toggle:n}]=(0,yp.useToggle)(!1),{coin:a}=S(),{coinId:c}=a,m=y(),d=N(),g=mo(),l=(0,zs.useSelector)(Jn),f=pa({feeInfo:t,callback:n}),[A,I]=(0,ht.useState)(""),T=_p(A),C=async()=>{await T()},x=F=>{I(F.target.value)},_=F=>{e(F),o(z(F.gasFee)),o(R(f.estimateFailed)),o(jn({...l,gasLimit:F.gasAmount,gasPrice:F.gasPriceStep}))};return eo(),ht.default.createElement(ht.default.Fragment,null,ht.default.createElement(oo,{confirmButtonProps:{onSubmit:C},slot:{bottom:ht.default.createElement(ht.default.Fragment,null,ht.default.createElement(Te,{value:A,onChange:x}),ht.default.createElement(ad,{visible:r,coinId:String(c),address:m,inputData:l.inputData,to:d,value:g,onBack:n,onClose:n,onChange:_}))},networkFeeProps:f}))}var Fp=NS;var BS={match:o=>Fm(o),pages:{AddressPage:Cp,AmountPage:xp,ConfirmPage:Fp}},Ep=BS;s();i();s();i();var Lp=u(h());s();i();var bp=u(q()),vS=()=>{let{baseCoin:o}=S();return(0,bp.useMemoizedFn)(async t=>{let e=Tt(t,o.localType);return await ae(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},LS=()=>{let o=vt(),t=vS();return[o,t]},Pp=LS;s();i();var Np=u(b()),Bp=u(q());zo();s();i();var kp=u(q());K();var DS=()=>{let o=Wu();return(0,kp.useMemoizedFn)(async t=>{let e;try{e=(await xc(t)).popupInfoList}catch(r){throw jt.error(E("wallet_extension_transaction_error_general_check_network")),r}return e?.length&&await o(e),e})},wp=DS;var MS=10,OS=()=>{let o=(0,Np.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,Bp.useBoolean)(!1),{coin:n,baseCoin:a}=S(),c=y(),m=N(),d=Bt(),g=wp();return{onClick:async()=>{try{e();let f=await g({from:c,to:m,method:"wallet_inner_transfer",chainIndex:a?.chainId??n.chainId}),A=Ma(f,"0.templeteId");o(dm(A===MS)),d()}catch(f){console.log(f)}finally{r()}},loading:t}},vp=OS;var RS=()=>{let o=Pp(),{onClick:t,loading:e}=vp();return Lp.default.createElement(Q,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},Dp=RS;s();i();var Up=u(h());zo();s();i();var Mp=u(h()),Op=u(b());function US(){let o=(0,Op.useDispatch)(),{coin:t}=S();(0,Mp.useEffect)(()=>{t.systemToken&&o(te(t.coinId))},[t.coinId])}var Rp=US;var WS=()=>{let o=Nt(),e=!!nu().key||gn(o)||o==="",r=ls(),n=od({disabled:e,onClick:r});return to(),Rp(),Up.default.createElement(j,{footerActions:n})},Wp=WS;s();i();var Ut=u(h()),kr=u(b());s();i();var Gp=u(h()),Hp=u(b()),Vp=u(ko());function GS(){let o=(0,Vp.useHistory)(),{baseCoin:t}=S(),e=ut(),r=y(),n=N(),a=V(),c=(0,Hp.useSelector)(it),m=cu(),d=_n({from:r,to:n,value:Et(a),data:c}),g=()=>{o.go(-3)};return Gp.default.createElement(Gu,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:m,onCancel:g})}var qp=GS;s();i();var Zt=u(h());K();s();i();var Pr={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function HS({visible:o,onClose:t,onConfirm:e}){let r=Im({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return Zt.default.createElement(tt.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},Zt.default.createElement("div",{className:Pr.content},Zt.default.createElement(cc,{src:r,className:Pr.img}),Zt.default.createElement("div",{className:Pr.title},E("wallet_extension_transaction_dialog_title_change_type")),Zt.default.createElement("div",{className:Pr.tip},E("wallet_extension_transaction_dialog_desc_change_type")),Zt.default.createElement("div",{className:Pr.btns},Zt.default.createElement(fo,{category:fo.CATEGORY.fill,type:fo.TYPE.highlight,size:fo.SIZE.lg,onClick:t},E("commonall_text_btn_cancel")),Zt.default.createElement(fo,{category:fo.CATEGORY.outline,type:fo.TYPE.primary,size:fo.SIZE.lg,onClick:e},E("commonall_modal_btn_continue")))))}var Kp=HS;s();i();var ga=u(h()),Zs=u(b());s();i();var en={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function VS({errorMsg:o}){let t=(0,Zs.useDispatch)(),{coin:e}=S(),r=(0,Zs.useSelector)(it),n=a=>{t(um(a))};return e.baseCoinId!==0?null:ga.default.createElement(It,{verticalPadding:!1},ga.default.createElement(Mu,{className:en.root,titleClass:en.titleClass,headerClassName:en.headerClassName,contentClassName:en.contentClassName,value:r,onChange:n,error:o,autoResize:!0}))}var Jp=VS;s();i();var Aa=u(b());function qS(){let{coin:o}=S(),t=(0,Aa.useSelector)(Xc),e=(0,Aa.useSelector)(it);return o.baseCoinId===0&&t&&e}var Yp=qS;s();i();var zp=u(b());var KS=()=>{let o=(0,zp.useSelector)(ir),{coin:t}=S(),e=mo(),r=y(),n=N();return{fetchParams:{coinId:t.coinId,from:r,to:n,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Zp=KS;s();i();var rn=u(b());hT();yo();Ee();po();Po();s();i();var $p=u(h());var JS=()=>(0,$p.useCallback)(o=>{try{typeof o=="string"&&!!o&&ao({tx_id:o})}catch(t){console.log(t)}},[]),$s=JS;s();i();var jp=u(h()),Qp=u(b());s();i();var Xp=({contractAddress:o,toAddress:t,amount:e})=>{try{let r=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return p.Buffer.from(r).toString("hex")}catch{return""}};var YS=()=>{let{coin:o}=S(),t=Tt(N(),o.localType),e=mo(),r=(0,Qp.useSelector)(sr),{isFacet:n,facetContractAddress:a}=r||{};return(0,jp.useMemo)(()=>!o.address||!uu(t)?"":n?Xp({contractAddress:a,toAddress:t,amount:e}):Tr(t,e),[o,t,e,n,a])},Xs=YS;var zS=()=>{let o=(0,rn.useDispatch)(),{coin:t}=S(),e=Iu(),r=gr(),n=V(),a=se(),c=y(),m=N(),d=Tt(c,t.localType),g=Tt(m,t.localType),l=ut(),{activityId:f,activity:A,status:I,tip:T}=ce(),C=Xs(),x=(0,rn.useSelector)(it),_=(0,rn.useSelector)(sr),F=$s(),k=(v,D)=>{let{userGasInfo:G}=D,{updateGasInfo:Z}=v;return Z?{...Z,gasLimit:G.gasLimit,supportEip1559:G.supportEip1559,networkFee:G.networkFee}:{...G}},M=v=>{let D=v.supportEip1559?v.maxFeePerGas:v.gasPrice,G=v?.networkFee||Ho(D,v.gasLimit),Z=Ht(r,G);if(Vo(Z,0))return[!1,n];if(t.baseCoinId===0)return a?[ot(Z,0),Z]:[Mr(n,Z),n];let U=e;t.systemToken&&(U=Ht(U,G));let $=a?U:n;return[Mr($,U),$]},w=({updateData:v,finallyGasInfo:D,publishAmountInt:G})=>{let{nonce:Z}=v,U=G,$=nc(t.localType)?.realChainIdHex,Y={from:d,gasLimit:Et(D.gasLimit),nonce:Et(Z),chainId:$};return D.supportEip1559?(Y.maxFeePerGas=Et(D.maxFeePerGas),Y.maxPriorityFeePerGas=Et(D.maxPriorityFeePerGas),Y.type=Tc.FEE_MARKET):Y.gasPrice=Et(D.gasPrice),_?.isFacet?(Y.value="0",Y.to=_?.facetBlackHoleAddress,Y.data=C):t.address?(Y.value="0",Y.to=Tt(t.address,t.localType),Y.data=C):(Y.value=Et(U),Y.to=g,x&&(Y.data=x)),_n(Y)},P=({txParams:v,publishAmountInt:D})=>{let G={...v};return t.systemToken&&(G.value=ic(Et(D))),G.walletId=l,G},B=({txParams:v,publishAmountInt:D,dataForCheck:G={}})=>{let{userGasInfo:Z={}}=G,U=tr(v.value),$=tr(v.gasLimit),Y=tr(Z.supportEip1559?v.maxFeePerGas:v.gasPrice),ho={...v,value:U,from:c,to:m,gas:$,gasPrice:Y,priorityFee:tr(Z.supportEip1559?v.maxPriorityFeePerGas:0),nonce:tr(v.nonce),repeatTxType:Cc.CONFIRMING,oldTxHash:"",gasType:Z?.gasType};return{coinId:t.coinId,coinAmount:D,fromAdr:c,toAdr:m,serviceCharge:Ho($,Y),extJson:JSON.stringify(ho),txSource:rt.NORMAL,inputData:v.data?v.data:"",activityId:f}};return async(v,D={})=>{let G=k(v,D),[Z,U]=M(G);if(!Z)throw new Error("balance check error");let $=w({updateData:v,finallyGasInfo:G,publishAmountInt:U}),Y=P({txParams:$,publishAmountInt:U}),ho=B({txParams:$,publishAmountInt:U,dataForCheck:D});ac({activityId:f,activity:A,status:I,tip:T,walletId:l,address:d}),await o(Lm({txParams:Y,walletId:l}));let Go=await no().signAndPublishTransferTransaction({signParams:Y,from:wm($.from,t.localType),baseChain:Nm(t.localType),publishParams:ho});F(Go)}},og=zS;s();i();var js=u(b());var ZS=()=>{let o=(0,js.useDispatch)(),t=X(),e=(0,js.useSelector)(ir),{gasLimit:r,gasPrice:n,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f}=e,{minGasFee:A}=tu({gasLimit:r,gasPrice:n,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(zn(!0))}}},tg=ZS;var $S=()=>{let o=(0,kr.useDispatch)(),t=tg(),e=Zp(),r=au(),n=Lu(),a=og(),{clear:c}=ce(),m=(0,kr.useSelector)(it),d=Is(m),g=Yp(),[l,f]=(0,Ut.useState)(!1),A=async()=>{if(g)return f(!0),{pause:!0};try{let T=await n({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:r});return await a(T,e),null}catch(T){if(T?.message===vu)throw new Error(ps);{let C=T?.data?.originalError;throw Xu(C?.code)&&c?(c(),C):T}}},I=(0,kr.useSelector)(ne);return eo(),Ut.default.createElement(Ut.default.Fragment,null,Ut.default.createElement(oo,{slot:{bottom:Ut.default.createElement(Jp,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:I}}),Ut.default.createElement(Kp,{visible:l,onClose:()=>{f(!1),Wi({action_after_pop_up:"cancel"})},onConfirm:()=>{o(fm(!0)),f(!1),Wi({action_after_pop_up:"confirm"})}}))};function XS(o){return(0,kr.useSelector)(Wn)?Ut.default.createElement(qp,null):Ut.default.createElement($S,{...o||{}})}var eg=XS;s();i();var gt=u(h()),Ie=u(b()),Ca=u(q());s();i();var rg=u(b());function jS(){let{coin:o}=S(),t=y(),e=su(),r=(0,rg.useSelector)(ir);return Ym({txType:Jm.transfer,coinId:o.coinId,fromAddress:t,unavailable:r.gasType===Ko.CUSTOM,fee:e})}var ng=jS;var QS=(0,gt.memo)(()=>{let o=(0,Ie.useDispatch)(),t=(0,gt.useRef)(!1),e=(0,gt.useRef)(!1),r=(0,Ie.useSelector)(bt),n=(0,Ie.useSelector)($c),{coin:a}=S(),c=y(),m=N(),d=Tt(c,a.localType),g=Tt(m,a.localType),l=Xs(),f=(0,Ie.useSelector)(it),A=a.baseCoinId===0?f:l,I=V(),T=No(),C=us(),x=(0,Ie.useSelector)(sr),{isFacet:_,facetBlackHoleAddress:F}=x||{},{disabled:k,fetchOnce:M}=(0,gt.useMemo)(()=>{let U=null,$=a.baseCoinId===0&&Is(f);return r&&(a.baseCoinId!==0||!$)&&(U=+new Date),{disabled:$||C,fetchOnce:U}},[a.baseCoinId,f,C,r]),w=ce(),P=(0,gt.useMemo)(()=>_?F:a.baseCoinId===0?g:a.address,[a.baseCoinId,a.address,g,_,F]),B=()=>{t.current||e.current?o(R(!0)):o(R(!1))},O=(0,Ca.useMemoizedFn)(U=>{o(cm(U?.signInfo||{}))}),v=(0,Ca.useMemoizedFn)(U=>{o(mm(U)),o(co(U?.isNetworkFeeLoading));let $=U.supportEip1559?U.maxFeePerGas:U.gasPrice,Y=U.networkFee;$==="0"?e.current=!0:e.current=!1,U?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(z(Y)),B()}),D=()=>{o(zn(!1))},G=()=>{t.current=!1},Z=()=>{t.current=!0};return gt.default.createElement(eu,{currencyId:T,visible:n,coinId:a.coinId,address:d,inputData:A,tokenAddress:P,value:a.address?"0":I,gasLimitOptions:{fetchOnce:M,disabled:k,onFetchSuccess:G,onFetchError:Z},estimatedL1FeeOptions:{fetchOnce:M,disabled:k},onBack:D,onServerDataChange:O,onGasChange:v,gasReturn:w})}),ox=({children:o})=>{let t=ng(),e=(0,Ie.useSelector)(Wn);return gt.default.createElement($u,{gasReturn:t},o,!e&&gt.default.createElement(QS,null))},sg=ox;var tx={match:o=>_m(o),Container:sg,pages:{AddressPage:Dp,AmountPage:Wp,ConfirmPage:eg}},ig=tx;s();i();To();s();i();s();i();var Qs=u(h()),ag=u(b()),cg=u(q());var ex=()=>{let o=(0,ag.useDispatch)(),{coin:t}=S(),e=y(),r=(0,Qs.useCallback)(async()=>{try{let{data:a={}}=await $e({coinId:t.coinId,address:e});a?.info?.normal?o(z(a.info.normal)):o(R(!0))}catch{o(R(!0))}finally{o(co(!1))}},[o,e,t.coinId]),{run:n}=(0,cg.useDebounceFn)(r,{wait:500});(0,Qs.useEffect)(()=>{o(co(!0)),n()},[e,t.coinId,n,o])},mg=ex;var rx=({children:o})=>(mg(),o),ug=rx;s();i();var dg=u(h());var nx=()=>(to(),dg.default.createElement(j,null)),fg=nx;s();i();var pg=u(h());s();i();Pe();be();Po();var sx=()=>{let{coin:o}=S(),t=y(),e=mo(),r=X(),n=go(),a=N(),c=wo({fromAddr:t,localType:o.localType,walletId:n}),m=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:r,localType:o.localType});return lo(async()=>{let T=await no().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),C={coinId:o.coinId,address:t,amount:e,fee:r,accountId:n},{data:x}=await nt(qo.getSpecialUtxoList,C,{headers:T});return x},T=>({inputs:T.map(F=>({txId:F.txId,vOut:F.index,address:F.address,amount:F.amount})),outputs:[{address:a,amount:e}],address:t,fee:r}),async T=>await c({params:T}),async T=>await m(T),T=>(ao({tx_id:T}),T))},lg=sx;var ix=()=>{let o=lg();return eo(),pg.default.createElement(oo,{confirmButtonProps:{onSubmit:o}})},gg=ix;var ax={match:o=>o===ja,Container:ug,pages:{AddressPage:Q,AmountPage:fg,ConfirmPage:gg}},Ag=ax;s();i();To();s();i();var Cg=u(h());var cx=({children:o})=>{let e=dt().get("from");return Cg.default.createElement(vo,{fromAddress:e},o)},Tg=cx;s();i();var Eg=u(h());s();i();var Ig=u(q());Pe();be();var mx=()=>{let{baseCoin:o}=S();return(0,Ig.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:n}=await nt(qo.postCheckAddress,e);if(n?.res)return null}catch(n){console.log(n)}return await ae(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},Sg=()=>{let o=vt(),t=mx();return[o,t]};s();i();var oi=u(h()),xg=u(b()),hg=u(q());po();var ux=()=>{let o=(0,xg.useDispatch)(),{coin:t}=S(),e=y(),r=N(),n=ft(),a=(0,oi.useCallback)(async()=>{try{let m=await n({coinId:t.coinId,address:e,fromAddr:e,toAddr:r});o(Am({name:"signInfo",value:m}));let d=[],{fee:g,depositMinAmount:l,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:I}=m;t.baseCoinId===0?d.push(g):I===0?d.push(g,f,l,A):d.push(g,f);let T=d.reduce((C,x)=>uo(C,x),0);o(z(T))}catch{o(R(!0))}finally{o(co(!1))}},[o,n,t.coinId,t.baseCoinId,e,r]),{run:c}=(0,hg.useDebounceFn)(a,{wait:500});(0,oi.useEffect)(()=>{o(co(!0)),o(R(!1)),c()},[o,a,c])},_g=ux;s();i();var yg=u(h()),ti=u(b());po();To();var dx=()=>{let o=(0,ti.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:r}=t,n=y(),a=go(),c=Ne(n,a,Ka),d=Jt(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,ti.useSelector)(cr)?.signInfo?.storageUsedAmount;(0,yg.useEffect)(()=>{if(!d||!f)return;let A=Ht(d,f);o(r===0?Do(A):ee(A))},[o,r,f,d])},Fg=dx;var fx=()=>{_g(),Fg();let o=Sg();return Eg.default.createElement(Q,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},bg=fx;s();i();var Bg=u(h());s();i();var Pg=u(b()),Ta=u(q());po();var kg=()=>{let o=Zo(),t=Su(),e=(0,Pg.useSelector)(cr),{coin:r,baseCoin:n}=S(),a=X(),c=as();return(0,Ta.useMemoizedFn)(m=>{let d=uo(e?.signInfo?.storageUsedAmount,a),g=_o(d,10**n.decimals);return(r.baseCoinId===0?Vo(o,m):Vo(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:c(g,n,{useApproximate:!1,isFee:!0})},type:ro.FEE_BALANCE_INSUFFICIENT}:null})},wg=()=>{let o=pu(),t=kg();to({fns:[o,t],override:!0})},lx=()=>{let o=kg();return(0,Ta.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null})},Ng=()=>{let o=Au(),t=lx();eo({fns:[o,t],override:!0})};var px=()=>(wg(),Bg.default.createElement(j,{totalAmountProps:{type:"amount"}})),vg=px;s();i();var Mg=u(h());s();i();var Lg=u(b()),Ia=u(yT());var gx=()=>{let{coin:o}=S(),t=y(),e=N(),r=mo(),n=X(),a=go(),c=(0,Lg.useSelector)(cr),m=ft(),d=$s(),g=wo({fromAddr:t,localType:o.localType,walletId:a}),l=kt({coinId:o.coinId,coinAmount:r,fromAddr:t,toAddr:e,localType:o.localType,networkFee:n,walletId:a}),f=async()=>await m({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=x=>{let{blockHash:_,nonce:F}=x;return{from:t,blockHash:_,type:Ia.NearTypes.TransferNear,nonce:F,receiverId:e,amount:r}},I=x=>{let{blockHash:_,nonce:F}=x,{signInfo:k}=c,{toAddressCheck:M,minTransferTokenValue:w,depositGasFee:P,fee:B,depositMinAmount:O}=k;return{from:t,blockHash:_,type:Ia.NearTypes.TransferToken,nonce:F,receiverId:e,amount:r,contract:o.address,depositGas:P,transferGas:B,depositValue:O,minTransferTokenValue:w,shouldDeposit:Boolean(M===0)}};return lo(f,x=>o.baseCoinId===0?{params:A(x)}:{params:I(x)},g,l,d)},Dg=gx;var Ax=()=>{let o=Dg();return Ng(),Mg.default.createElement(oo,{confirmButtonProps:{onSubmit:o}})},Og=Ax;var Cx={match:o=>o===Qa,Container:Tg,pages:{AddressPage:bg,AmountPage:vg,ConfirmPage:Og}},Rg=Cx;s();i();s();i();var Vg=u(h()),qg=u(b());K();s();i();var nn=u(h()),ei=u(b());po();var Ug=()=>{let{toRent:o}=(0,ei.useSelector)(Ur),{coin:t}=S(),e=Zo();return(0,nn.useCallback)(r=>{if(t.baseCoinId!==0)return null;let n=_o(o,10**t.decimals);return Vo(r,n)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:n},type:ro.COMMON_ERROR}:null},[e,o])},Wg=()=>{let{selfRent:o,toRent:t}=(0,ei.useSelector)(Ur),{coin:e,baseCoin:r}=S(),n=(0,ei.useSelector)(st),a=gr();return(0,nn.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=uo(n,o);return Vo(a,c)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:r.symbol,number:_o(c,10**r.decimals)},type:ro.FEE_BALANCE_INSUFFICIENT}:Vo(a,uo(c,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:_o(uo(c,t),10**r.decimals)},type:ro.FEE_BALANCE_INSUFFICIENT}:null},[a,n,o])},Gg=()=>{let o=Ug(),t=Wg();to([o,t])},Tx=()=>{let o=Ug();return(0,nn.useCallback)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])},Ix=()=>{let o=Wg();return(0,nn.useCallback)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])},Hg=()=>{let o=Tx(),t=Ix();eo([o,t])};function Sx(){let o=(0,qg.useSelector)(Gn);return Gg(),Vg.default.createElement(j,{totalAmountProps:{title:E("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var Kg=Sx;s();i();var Se=u(h()),ha=u(b()),Qg=u(q());s();i();K();Ee();var Uo={JITO:"jito",PRIORITY_FEE:"priorityFee"},Sa="speedUpMode";function Jg(o){let t=qe.get(Sa);return t?typeof t=="string"&&(t={[rc]:t}):t={},t[o]||Uo.PRIORITY_FEE}function Yg(o,t){let e=qe.get(Sa);qe.set(Sa,{...e||{},[o]:t})}var zg="jitoGuide";function Zg(){return!!qe.get(zg)}function $g(){qe.set(zg,"1")}s();i();var xo=u(h()),_t=u(b());K();s();i();var sn={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var xx=xo.default.memo(({jitoGuide:o})=>{let t=(0,_t.useDispatch)(),e=(0,_t.useSelector)(re),r=n=>{t(Gr(n))};return xo.default.createElement(uc,{mask:!0,show:!o,title:E("wallet_extension_transfer_tooltips_title_express_mode"),description:E("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},xo.default.createElement(Ye.Segmented,{className:sn.modeSwitch,color:Ye.COLOR.grey,size:Ye.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:r},xo.default.createElement(Ye.TabPane,{tab:E("wallet_extension_transfer_tab_standard"),id:Uo.PRIORITY_FEE}),xo.default.createElement(Ye.TabPane,{tab:E("wallet_extension_transfer_tab_express"),id:Uo.JITO})))}),hx=()=>{let{baseCoin:o}=S(),t=(0,_t.useSelector)(Pt),e=(0,_t.useSelector)(Hn),{fee:r="0"}=t||{},{priorityFee:n}=e,a=Hr(r,{decimals:o.decimals,type:J.CRYPTO}),c=Hr(n||"0",{decimals:o.decimals,type:J.CRYPTO});return xo.default.createElement(xo.default.Fragment,null,E("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},_x=()=>{let{baseCoin:o}=S(),t=(0,_t.useSelector)(Pt),e=(0,_t.useSelector)(Vn),{fee:r}=t||{},{totalJitoFee:n}=e||{},a=Hr(r||"0",{decimals:o.decimals,type:J.CRYPTO}),c=Hr(n||"0",{decimals:o.decimals,type:J.CRYPTO});return xo.default.createElement(xo.default.Fragment,null,E("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),xo.default.createElement("div",{className:sn.tipDetail},E("wallet_extension_transfer_tooltips_desc_express_mode")))},yx=xo.default.memo(()=>{let o=(0,_t.useSelector)(re);return xo.default.createElement("div",{className:sn.tip},o===Uo.JITO?xo.default.createElement(_x,null):xo.default.createElement(hx,null))});function Fx({jitoGuide:o,...t}){let e=(0,_t.useSelector)(re),r=(0,_t.useSelector)(Pt),n=e===Uo.JITO?E("wallet_extension_transfer_express_mode"):E("wallet_extension_transfer_standard_mode");return xo.default.createElement(It,{bordered:!1,verticalPadding:!1},xo.default.createElement(Ts,{...t,titleClassName:sn.title,titleAction:r?.supportJito&&xo.default.createElement(xx,{jitoGuide:o}),level:n},xo.default.createElement(yx,null)))}var Xg=Fx;s();i();var Ue=u(b());yo();To();var Ex=()=>{let o=Bo(),{coin:t}=S(),e=y(),r=(0,Ue.useSelector)(Ft),n=(0,Ue.useSelector)(so),a=mo(),c=(0,Ue.useSelector)(st),{computeUnitPrice:m,computeUnitLimit:d}=(0,Ue.useSelector)(Hn),g=(0,Ue.useSelector)(re),l=(0,Ue.useSelector)(Vn),f=wo({fromAddr:e,localType:Cn,walletId:r}),{coinId:A}=t,I=async()=>await hc({coinId:A,address:e},{fromAddr:e,toAddr:n}),T=async()=>{if(t.baseCoinId===0||!n)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let P={coinId:A,address:n},{data:B={}}=await _c(P),{legal:O,tokenAccountAddress:v}=B;return{haveTokenAccountAddress:O,tokenAccountAddress:v}},C=async()=>{let[P,{haveTokenAccountAddress:B,tokenAccountAddress:O}]=await Promise.all([I(),T()]);return{recentBlockHash:P,haveTokenAccountAddress:B,tokenAccountAddress:O}},x=async P=>{let{recentBlockHash:B,haveTokenAccountAddress:O}=P,v={from:e,to:n,amount:a,blockHash:B,payer:e};g===Uo.PRIORITY_FEE&&(v={...v,computeUnitPrice:m,computeUnitLimit:d});let D;return t.baseCoinId===0?D={...v,type:En.TRANSFER}:D={...v,type:En.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===Or.SPL_TOKEN_2022&&(D.token2022=!0,D.decimal=t.decimals),await f({params:D})},_=async P=>{if(g!==Uo.JITO||!l)return null;let{recentBlockHash:B}=P,{tipAccountAddress:O,clientGasPrice:v}=l,D={from:e,to:O,amount:v,blockHash:B,payer:e,type:En.TRANSFER};return await f({params:D})};return lo(C,async(P={})=>{let B=await x(P),O=await _(P);return{rawSignedTx:B,jitoSignedTx:O}},async({rawSignedTx:P,jitoSignedTx:B})=>{let O=await Io(Cn,P),v=P,D;g===Uo.JITO&&B&&(v=JSON.stringify([P,B]),D=JSON.stringify({mev:"Jito",jitoHash:await Io(Cn,B)}));let G={signedTx:v,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:c,txHash:O,extJson:D},Z=await o(G);return Yg(t.localType,g),Z},P=>(ao({tx_id:P}),P))},jg=Ex;s();i();var xa={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function bx(){let o=(0,ha.useSelector)(Gn),t=(0,Qg.useDebounce)(o,{wait:200}),e=(0,ha.useSelector)(Pt),[r,n]=(0,Se.useState)(!0),a=jg(),c=async()=>{o||await a()};return Hg(),(0,Se.useEffect)(()=>{if(e?.supportJito){let m=Zg();n(m),m||$g()}},[e?.supportJito]),Se.default.createElement("div",{className:xa.root,onClick:()=>{n(!0)}},Se.default.createElement(oo,{tipMessageProps:{hidden:o},containerProps:{contentClassName:r?"":xa.contentJitoGuide},slot:{networkFee:m=>Se.default.createElement(Xg,{...m,jitoGuide:r})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var oA=bx;s();i();s();i();var tA=u(h()),ri=u(b());function Px(){let o=(0,ri.useDispatch)(),{coin:t}=S(),e=(0,ri.useSelector)(Pt);(0,tA.useEffect)(()=>{!e||(e.supportJito?o(Gr(Jg(t.localType))):o(Gr(Uo.PRIORITY_FEE)))},[e,t.localType])}var eA=Px;s();i();var aA=u(h());po();var cA=u(b());s();i();var $t=u(h()),xe=u(b()),rA=u(q());zo();po();function kx(){let o=(0,xe.useDispatch)(),t=y(),{baseCoin:e}=S(),r=(0,$t.useRef)(null),n=(0,$t.useRef)(!1),[a,c]=(0,$t.useState)("0"),m=async l=>{if(!n.current){try{let f=await yc({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},I=uo(A||"0",l?.fee||"0");c(I),o($n({...f,totalJitoFee:I})),o(R(!1))}catch{c("0"),o($n(null)),o(R(!0))}finally{o(Wr(!1))}r.current=setTimeout(()=>{m(l)},7e3)}};return[a,l=>{n.current=!1,m(l)},()=>{clearTimeout(r.current),n.current=!0,r.current=null,c("0"),o($n(null))}]}function wx(){let o=(0,xe.useDispatch)(),t=Hu(),e=y(),{coin:r,baseCoin:n}=S(),{coinId:a}=r,[c,m]=(0,$t.useState)("0"),d=()=>{m("0"),o(Zn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(R(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:n.chainId});if(gn(A)){d();return}let{computeUnitPrice:I,feelimit:T}=f,{priorityFee:C,priorityGasPrice:x,priorityGasLimit:_}=Bc(T,I,A);m(C),o(Zn({priorityFee:C,computeUnitPrice:x||"",computeUnitLimit:_||""})),o(R(!1))}catch{d()}finally{o(Wr(!1))}},()=>{m("0"),o(Zn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function Nx(){let o=(0,xe.useDispatch)(),t=(0,xe.useSelector)(re),e=(0,xe.useSelector)(Pt),r=(0,xe.useSelector)(Oc),n=(0,rA.useLatest)(r),[a,c,m]=kx(),[d,g,l]=wx();return(0,$t.useEffect)(()=>{n.current?o(Wr(!1)):o(Wr(!0))},[t]),(0,$t.useEffect)(()=>(!e||!t||(t===Uo.PRIORITY_FEE?g(e):c(e)),()=>{m(),l()}),[e,t]),{speedUpFee:t===Uo.PRIORITY_FEE?d:a}}var nA=Nx;s();i();var ni=u(h()),sA=u(b());function Bx(){let o=(0,sA.useDispatch)(),[t,e]=(0,ni.useState)(null),{coin:r}=S(),n=y(),a=N(),{coinId:c}=r;return(0,ni.useEffect)(()=>{c&&n&&a&&(async()=>{try{let{data:d}=await $e({coinId:c,address:n},{fromAddr:n,toAddr:a}),{info:g}=d||{},{fee:l}=g||{};o(R(!l)),o(Ki(g)),e(g)}catch{o(R(!0)),o(Ki(null)),e(null)}})()},[c,n,a]),{baseFee:t?.fee||"0"}}var iA=Bx;function vx(){let o=(0,cA.useDispatch)(),{baseFee:t}=iA(),{speedUpFee:e}=nA();(0,aA.useEffect)(()=>{o(z(uo(t,e)))},[t,e])}var mA=vx;s();i();var si=u(b());var uA=u(h());po();function Lx(){let o=(0,si.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,si.useSelector)(Ur),r=lr();(0,uA.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let n=Ht(r||"0",e||"0");o(Do(ot(n,"0")?n:"0"))}else o(Do(null))})()},[t,e,r])}var dA=Lx;function Dx({children:o}){return eA(),mA(),dA(),o}var fA=Dx;var Mx={match:o=>km(o),Container:fA,pages:{AddressPage:Q,AmountPage:Kg,ConfirmPage:oA}},lA=Mx;s();i();To();s();i();s();i();var _a=u(h()),an=u(b());zo();var ii=u(q());s();i();xT();var Ox=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:n="",signInfo:a={}})=>{let{getRawTransaction:c}=await Sm(),m={};if(o.baseCoinId===0)m={data:{type:Ze.TRANSFER,data:{to:e,amount:r,memo:n}}};else{let{info:g={}}=a,{contractAddress:l,contractName:f,tokenName:A}=g;m={data:{type:Ze.TOKEN_TRANSFER,data:{from:t,to:e,memo:n,contract:l,contractName:f,functionName:bn.TRANSFER,tokenName:A,amount:r}}}}return await c(5757,m)},pA=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:n="",signInfo:a={}})=>{let c=await Ox({coin:o,fromAddress:t,toAddress:e,value:r,memo:n,signInfo:a});return(await Ku({coinId:o.coinId,fromAddress:t,value:r,inputData:c}))?.gasLimit||"0"};var Rx=()=>{let o=(0,an.useDispatch)(),t=y(),e=N(),r=(0,an.useSelector)(bt),n=V(),a=(0,ii.usePrevious)(n),{coin:c,baseCoin:m}=S(),{signInfo:d,memo:g}=(0,an.useSelector)(ar),l=async()=>{try{o(R(!1));let A;c.baseCoinId!==0&&Ve(d)?(A=await Ju({coinId:c.coinId,fromAddress:t,toAddress:e,value:n}),o(Xn({name:"signInfo",value:A}))):A=d;let I=await pA({coin:c,baseCoin:m,fromAddress:t,toAddress:e,value:n,signInfo:A,memo:g});o(z(I))}catch{o(R(!0))}finally{o(co(!1))}},{run:f}=(0,ii.useDebounceFn)(l,{wait:500});(0,_a.useEffect)(()=>{r&&(o(co(!0)),f())},[r]),(0,_a.useEffect)(()=>{r&&n!==a||(o(co(!0)),f())},[n,e,r,g])},gA=Rx;var Ux=({children:o})=>(gA(),o),AA=Ux;s();i();var CA=u(h());var Wx=()=>(to(),CA.default.createElement(j,null)),TA=Wx;s();i();var ya=u(h()),ci=u(b());K();s();i();var ai=u(b());var Gx=()=>{let{coin:o,baseCoin:t}=S(),e=y(),r=(0,ai.useSelector)(so),n=V(),a=(0,ai.useSelector)(st),{memo:c}=(0,ai.useSelector)(ar),m=ft(),d=wo({fromAddr:e,localType:t.localType}),g=kt({coinAmount:n,coinId:o.coinId,fromAddr:e,toAddr:r,networkFee:a}),l=async()=>await m({coinId:o.coinId,address:e,fromAddr:e,toAddr:r,value:n}),f=F=>{let{nonce:k}=F;return{type:Ze.TRANSFER,data:{to:r,amount:n,nonce:k,fee:a,memo:c}}},A=F=>{let{nonce:k,contractAddress:M,contractName:w,tokenName:P}=F;return{type:Ze.TOKEN_TRANSFER,data:{from:e,to:r,amount:n,nonce:k,fee:a,memo:c,contract:M,contractName:w,functionName:bn.TRANSFER,tokenName:P}}};return lo(l,F=>o.baseCoinId===0?f(F):A(F),async F=>{let{data:k}=F,{nonce:M}=k,{txId:w,txSerializedHexString:P}=await d({params:F,needCapture:!0});return{txId:w,txSerializedHexString:P,nonce:M}},async({txId:F,txSerializedHexString:k,nonce:M})=>{let w={nonce:M},P=JSON.stringify(w);return await g(k,{txHash:F,memo:c,extJson:P})},F=>(ao({tx_id:F}),F))},IA=Gx;var SA=34,Hx=()=>{let o=(0,ci.useDispatch)(),{memo:t}=(0,ci.useSelector)(ar),e=IA(),r=n=>{let a=n.target.value;new TextEncoder().encode(a).length<=SA&&o(Xn({name:"memo",value:n.target.value}))};return eo(),ya.default.createElement(oo,{confirmButtonProps:{onSubmit:e},slot:{bottom:ya.default.createElement(Te,{value:t,placeholder:E("extension_wallet_transaction_input_entermemo_max",{num:SA}),onChange:r})}})},xA=Hx;var Vx={match:o=>o===za,Container:AA,pages:{AddressPage:Q,AmountPage:TA,ConfirmPage:xA}},hA=Vx;s();i();To();s();i();s();i();var Fa=u(h()),mi=u(b());zo();Po();var ui=u(q());var qx=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:r,feeInt:n,coin:a,isMax:c})=>{let m=(0,mi.useDispatch)(),{signInfo:d}=(0,mi.useSelector)(Kn),g=(0,ui.usePrevious)(e),l=async()=>{let C=await Xe({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return m(gm({name:"signInfo",value:C})),C},f=async C=>{let x={type:"transfer",nonce:C?.info?.nonce,maxFee:n||"0",transferData:{contractAddress:C?.info?.contractAddress,from:o,to:t,amount:e}};return(await no().signTransaction(x,o,a.localType))?.signature},A=async C=>{let{data:x}=await Pn({coinId:a.coinId,address:o,inputData:C});if(x?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return x?.gasLimit},I=async()=>{try{let C;Ve(d)?C=await l():C=d;let x=await f(C),_=await A(x);m(z(_)),m(R(!1))}catch{m(R(!0))}finally{m(co(!1))}},{run:T}=(0,ui.useDebounceFn)(I,{wait:500});(0,Fa.useEffect)(()=>{c&&(m(co(!0)),T())},[c,r]),(0,Fa.useEffect)(()=>{c&&e!==g||(m(co(!0)),T())},[t,e,c])},_A=qx;var Kx=({children:o})=>{let t=y(),e=N(),r=V(),n=lr(),a=X(),{coin:c}=S(),m=se();return _A({fromAddress:t,toAddress:e,amountInputValueInt:r,sendCoinBalanceInt:n,feeInt:a,coin:c,isMax:m}),o},yA=Kx;s();i();var FA=u(h());var Jx=()=>(to(),FA.default.createElement(j,null)),EA=Jx;s();i();var PA=u(h()),kA=u(b());s();i();Po();var Yx=({coin:o,baseCoin:t,fromAddress:e,toAddress:r,amountInt:n,feeInt:a,nonce:c,contractAddress:m})=>{let d=Bo();return lo(async()=>{let I={type:"transfer",nonce:c,maxFee:a,transferData:{contractAddress:m,from:e,to:r,amount:n}},{txId:T,signature:C}=await no().signTransaction(I,e,t.localType);return{txId:T,signature:C}},async({txId:I,signature:T})=>{let C={serviceChargeCoinId:t.coinId,nonce:c},x=JSON.stringify(C),_={signedTx:T,coinAmount:n,coinId:o.coinId,fromAdr:e,toAdr:r,serviceCharge:a,txType:Fo.TRANS_OUT,txHash:I,extJson:x};return await d(_)},I=>(ao({tx_id:I}),I))},bA=Yx;var zx=()=>{let o=y(),t=N(),e=mo(),r=X(),{coin:n,baseCoin:a}=S(),{signInfo:c}=(0,kA.useSelector)(Kn),m=bA({coin:n,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:r,nonce:c?.info?.nonce,contractAddress:c?.info?.contractAddress});return eo(),PA.default.createElement(oo,{confirmButtonProps:{onSubmit:m}})},wA=zx;var Zx={match:o=>o===$a,Container:yA,pages:{AddressPage:Q,AmountPage:EA,ConfirmPage:wA}},NA=Zx;s();i();To();s();i();var DA=u(h());s();i();var BA=u(b()),vA=u(q());s();i();To();var $x=()=>{let o=$m(),t=jm(),e=Xm();return async({coinId:n,from:a,to:c,amount:m,inputData:d,localType:g})=>{let l=[ke.SAFE_ADDRESS,ke.CONTRACT_ADDRESS];g===Ha&&l.push(ke.TRON_PERMISSTION);let f=await o({checkTypes:l,coinId:n,from:a,to:c,amount:m,txType:Sc.TRANSFER,inputData:d||"0x"}),{result:A,msg:I}=f[ke.TRON_PERMISSTION]||{},T=f[ke.SAFE_ADDRESS],C={...T,...f[ke.CONTRACT_ADDRESS],tronPermission:{msg:I,wrongPermission:!A},address:c};return await e({...T,...T?.blackAddressWarning}),await t(C),C}},wr=$x;var Xx=()=>{let o=(0,BA.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,vA.useBoolean)(!1),{coin:n}=S(),a=y(),c=N(),m=V(),{coinId:d,localType:g}=n,l=Bt(),f=wr();return{onClick:async()=>{try{e();let I=await f({coinId:d,from:a,to:c,amount:m,inputData:"",localType:g}),{isDefraud:T,isSimilar:C,blackAddressWarning:x}=I;T?(o(mt(qt.DEFRAUD)),o(Kt(x))):C?(o(mt(qt.SIMILAR)),o(Kt(x))):o(mt("")),l()}catch(I){console.log(I)}finally{r()}},loading:t}},LA=Xx;var jx=()=>{let{onClick:o,loading:t}=LA();return DA.default.createElement(Q,{confirmButtonProps:{onClick:o,loading:t}})},MA=jx;s();i();var UA=u(h());s();i();var We=u(h()),fi=u(b()),li=u(q());s();i();ST();function Qx({from:o,to:t,coin:e,error:r}){va.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:r?.message}]},level:"info"})}function oh(){let{coin:o}=S(),t=y();return async({value:e,to:r,signInfo:n})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:m=[],budget:d}=n||{},g=c.map((A={})=>{let{digest:I,version:T,objectId:C}=A;return{digest:I,version:T,objectId:C}}),l=new qu;if(l.setGasPrice(a),l.setGasPayment(g||[]),l.setSender(t),d&&l.setGasBudget(d),o.baseCoinId===0){let A=l.splitCoins(l.gas,[e]);l.transferObjects([A],l.pure.address(r))}else if(m.length>1){let A=m.slice(1).map(C=>l.object(C.objectId)),I=l.object(m[0].objectId);l.mergeCoins(I,A);let T=l.splitCoins(I,[e]);l.transferObjects([T],l.pure.address(r))}else{let A=l.splitCoins(l.object(m[0].objectId),[e]);l.transferObjects([A],l.pure.address(r))}let f=Vu(await l.build({client:cd}));return{tx:l,txBytes:f}}catch(a){throw Qx({from:t,to:r,coin:o,error:a}),a}}}var di=oh;s();i();function th(){let{coin:o}=S(),t=y(),e=o.coinId;return async({to:r,value:n})=>(await Xe({address:t,coinId:e},{fromAddr:t,toAddr:r,value:n})).info||{}}var OA=th;function RA(){let o=(0,fi.useDispatch)(),t=(0,fi.useSelector)(bt),{coin:e}=S(),r=y(),n=V(),a=N(),{coinId:c}=e,[m,d]=(0,We.useState)(!1),g=(0,We.useRef)(0),l=OA(),f=di(),A=(0,li.usePrevious)(n),{run:I}=(0,li.useDebounceFn)(async()=>{g.current++;try{o(R(!1));let T={value:n,to:a},C=await l(T),_=(await f({...T,signInfo:C}))?.tx?.blockData?.gasConfig?.budget||"0";o(pm(C)),o(z(_))}catch{o(R(!0))}finally{g.current--,g.current===0&&d(!1)}},{wait:300});return(0,We.useEffect)(()=>{t&&(d(!0),I())},[t]),(0,We.useEffect)(()=>{t&&n!==A||(d(!0),I())},[c,r,a,n,t]),m}function eh(){let o=RA();return to(),UA.default.createElement(j,{confirmButtonProps:{loading:o}})}var WA=eh;s();i();var HA=u(h()),ba=u(b());s();i();var Ea=u(b());To();var GA=()=>{let{coin:o}=S(),t=y(),e=mo(),r=(0,Ea.useSelector)(so),n=(0,Ea.useSelector)(Qc),a=X(),c=wo({fromAddr:t,localType:Ri}),m=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:r,localType:Ri}),d=di();return lo(async()=>await d({value:e,to:r,signInfo:{...n||{},budget:a}}),async({tx:T,txBytes:C})=>{let _=await c({params:{type:"raw",data:C}});return{tx:T,txBytes:C,signedTx:_}},async({tx:T,txBytes:C,signedTx:x}={})=>{let{signature:_,hash:F}=x||{};return await m({request_type:"WaitForEffectsCert",tx_bytes:C,signatures:[_]},{txHash:F,serviceCharge:T?.blockData?.gasConfig?.budget||"0"})},T=>(ao({tx_id:T}),T))};function rh(){let o=GA(),t=async()=>{await o()};eo();let e=(0,ba.useSelector)(ne),r=(0,ba.useSelector)(Mn);return HA.default.createElement(oo,{tipMessageProps:{hidden:r,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var VA=rh;var nh={match:o=>o===Ya,pages:{AddressPage:MA,AmountPage:WA,ConfirmPage:VA}},qA=nh;s();i();To();s();i();var zA=u(h());s();i();var KA=u(b()),JA=u(q());s();i();var Ci=u(h()),Ti=u(b());s();i();var gi=u(h()),pi=u(b());function sh({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),r=N(),n=lr(),a=V(),c=(0,pi.useSelector)(ct),m=(0,pi.useSelector)(mr),d=(0,pi.useSelector)(bt),g=!!c,{fromJettonAccount:l,nonce:f}=c||{},A=(0,gi.useCallback)((I,T)=>{if(!g)return null;let C={to:r,seqno:f,decimal:e.decimals,amount:I,memo:m};return e.baseCoinId===0?C={...C,type:Xi.TRANSFER,sendMode:T}:(C={...C,type:Xi.JETTON_TRANSFER,fromJettonAccount:l,messageAttachedTons:o,invokeNotificationFee:t,sendMode:je.PAY_GAS_SEPARATELY+je.IGNORE_ERRORS},c.customPayload&&(C={...C,customPayload:c.customPayload,stateInit:c.stateInit})),C},[r,g,l,m,o,t]);return(0,gi.useMemo)(()=>d?A(n,je.CARRY_ALL_REMAINING_BALANCE):A(a,je.PAY_GAS_SEPARATELY+je.IGNORE_ERRORS),[d,n,a,A])}var Ai=sh;function ih({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,Ti.useDispatch)(),r=ut(),n=y(),a=(0,Ti.useSelector)(ct),{ttl:c}=a||{},m=Ai({messageAttachedTons:o,invokeNotificationFee:t}),[d,g]=(0,Ci.useState)(null);return(0,Ci.useEffect)(()=>{(async()=>{if(!!m)try{m.expireAt=Fs(c);let l=await md({fromAddress:n,body:m,walletId:r});g(JSON.stringify(l))}catch{g(null),e(R(!0)),e(co(!1))}})()},[m,c]),d}var Ii=ih;var ah=()=>{let o=(0,KA.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,JA.useBoolean)(!1),{coin:n}=S(),a=y(),c=N(),m=V(),d=Ii(),{coinId:g,localType:l}=n,f=Bt(),A=wr();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,blackAddressWarning:_}=T;C?(o(mt(qt.DEFRAUD)),o(Kt(_))):x?(o(mt(qt.SIMILAR)),o(Kt(_))):o(mt("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},YA=ah;var ch=()=>{let{onClick:o,loading:t}=YA();return zA.default.createElement(Q,{confirmButtonProps:{onClick:o,loading:t}})},ZA=ch;s();i();var QA=u(h());s();i();var $A=u(h()),XA=u(b());po();function Pa(){let{coin:o,baseCoin:t}=S(),e=(0,XA.useSelector)(ct),r=X(),n=e?.minTonLimit,a=uo(n||"0",r||"0"),c=gr();return(0,$A.useCallback)(()=>{if(o.baseCoinId!==0&&ot(a,c)){let m=_o(a,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:m}}}return null},[a,c,o.baseCoinId,t.decimals])}function mh(){let o=Pa();to([o])}var jA=mh;function uh(){return jA(),QA.default.createElement(j,null)}var oC=uh;s();i();var un=u(h()),mn=u(b());s();i();var eC=u(h());var cn=u(b());K();var tC=250;function dh({error:o,onChange:t}){let e=(0,cn.useDispatch)(),r=(0,cn.useSelector)(ct),n=(0,cn.useSelector)(mr),c=r?.checkMemo?E("wallet_extension_import_desc_comment_required"):E("wallet_extension_import_desc_comment_optional");return eC.default.createElement(Te,{value:n,placeholder:E("wallet_extension_ton_placeholder_comment_max_character2",{amount:tC}),dashed:!1,title:c,error:o,errorType:Vt.TIP_TYPE.always,maxLength:tC,onChange:m=>{let d=m.target.value;e(Cm(d)),t()}})}var rC=dh;s();i();var Si=u(b());Po();yo();function fh(){let o=go(),t=es(o),e=ft(),{coin:r,baseCoin:n}=S(),a=y(),c=N(),m=(0,Si.useSelector)(st),d=(0,Si.useSelector)(ct),g=(0,Si.useSelector)(em),l=V(),f=Ai({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:g?.invokeNotificationFee}),A=Bo();return lo(async()=>(await e({coinId:r.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async F=>(f.seqno=F,f.expireAt=Fs(d?.ttl),(await no().signTransaction(f,a,n.localType))?.boc),async F=>{let k=await Io(n.localType,F),M={signedTx:F,coinId:r.coinId,coinAmount:l,fromAdr:a,toAdr:f.to,serviceCharge:m,txHash:k,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:rt.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(M)},F=>(ao({tx_id:F}),F))}var nC=fh;s();i();var xi=u(h());function lh(o){return(0,xi.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:ro.COMMON_ERROR}:null,[o])}function ph(o){return(0,xi.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:ro.COMMON_ERROR}:null,[o])}function gh(){let o=Pa();return(0,xi.useCallback)(()=>{let t=o();return t?{...t,highlight:ro.FEE_BALANCE_INSUFFICIENT}:null},[o])}function Ah(o,t){let e=lh(o),r=ph(t),n=gh();eo([r,e,n])}var sC=Ah;function Ch(){let o=(0,mn.useSelector)(ct),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,r=(0,mn.useSelector)(mr),n=(0,mn.useSelector)(Mn),[a,c]=(0,un.useState)(!1),m=nC(),d=async()=>t&&(!r||r.trim()==="")?(c(!0),{pause:!0}):(await m(),null);sC(a,e);let g=(0,mn.useSelector)(ne);return un.default.createElement(oo,{tipMessageProps:{hidden:n,blockAddressInfo:g},slot:{bottom:un.default.createElement(rC,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var iC=Ch;s();i();s();i();var hi=u(h());var aC=u(b());var _i=u(q());po();function Th(){let o=(0,aC.useDispatch)(),t=y(),{coin:e,baseCoin:r}=S(),n=(0,hi.useRef)(null),a=(0,_i.useDebounce)(Ii(),{wait:500});(0,_i.useMount)(()=>{o(co(!0))}),(0,hi.useEffect)(()=>{let c=()=>{o(R(!0)),o(Yi(null)),o(z("0"))},m=async()=>{try{let{code:g,data:l}=await Pn({address:t,tokenAddress:e.address,chainId:r.chainId,coinId:r.coinId,value:"0",inputData:a});if(g!==0||!l||l?.queryGasLimitErrorUseDefault)c();else{o(R(!1)),o(Yi(l));let{invokeNotificationFee:f="0",gasLimit:A="0"}=l;o(z(e.baseCoinId===0?A:uo(A,f)))}}catch{c()}finally{o(co(!1))}};return(()=>{!a||(n.current=setInterval(m,7e3),m())})(),()=>{clearInterval(n.current)}},[a])}var cC=Th;s();i();var mC=u(h()),uC=u(b()),dC=u(q());function Ih(){let o=(0,uC.useDispatch)(),t=ft(),e=ud(),{coin:r}=S(),n=y(),a=(0,dC.useDebounce)(N(),{wait:500}),{coinId:c,baseCoinId:m}=r;(0,mC.useEffect)(()=>{c&&n&&a&&(async()=>{try{let g=await t({coinId:c,address:n,fromAddr:n,toAddr:a,value:"0"}),l=await e(g,m);o(R(!l)),o(Ji(l))}catch{o(R(!0)),o(Ji(null)),o(co(!1))}})()},[a])}var fC=Ih;function Sh({children:o}){return fC(),cC(),o}var lC=Sh;var xh={match:o=>o===oc,Container:lC,pages:{AddressPage:ZA,AmountPage:oC,ConfirmPage:iC}},pC=xh;s();i();Ee();s();i();var yC=u(h());s();i();var gC=u(b()),AC=u(q());s();i();var Fi=u(h()),yi=u(b());var hh=()=>{let o=(0,yi.useSelector)(rr),t=(0,yi.useSelector)(so),e=V(),r=(0,yi.useSelector)(Ln),n=!t||!!r.key,[a,c]=(0,Fi.useState)("");return(0,Fi.useEffect)(()=>{(async()=>{if(!n)try{let d=await os(t);c(o?Tr(d,e):"")}catch(d){console.log(d)}})()},[o,n,t,e]),a},Ei=hh;var _h=()=>{let o=(0,gC.useDispatch)(),[t,{setTrue:e,setFalse:r}]=(0,AC.useBoolean)(!1),{coin:n}=S(),a=y(),c=N(),m=V(),d=Ei(),{coinId:g,localType:l}=n,f=Bt(),A=wr();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,tronPermission:_,blackAddressWarning:F}=T;_&&_.wrongPermission?o(im({wrongPermission:_.wrongPermission,msg:_.msg})):C?(o(mt(qt.DEFRAUD)),o(Kt(F))):x?(o(mt(qt.SIMILAR)),o(Kt(F))):o(mt("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},CC=_h;s();i();var TC=u(h()),IC=u(b());var SC=u(q());Ee();var yh=()=>{let[o,{setFalse:t}]=(0,SC.useBoolean)(!0),{coin:e}=S(),r=y(),n=(0,IC.useDispatch)(),{coinId:a}=e;return(0,TC.useEffect)(()=>{(async()=>{if(Number(a)!==In){let d=await Fc({coinId:a,address:r});n(nm(d))}t()})()},[a,r]),o},xC=yh;s();i();var hC=u(h());function Fh(){let o=y();return(0,hC.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function Eh(){return[Fh()]}var _C=Eh;var bh=()=>{let o=xC(),{onClick:t,loading:e}=CC(),r=_C();return yC.default.createElement(Q,{addressProps:{errorFns:r},confirmButtonProps:{onClick:t,loading:e||o}})},FC=bh;s();i();var bC=u(h());s();i();var ka=u(h()),dn=u(b());var Nr=u(q());var Ph=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Nr.useBoolean)(!1),r=(0,dn.useDispatch)(),n=N(),a=(0,dn.useSelector)(rr),c=(0,dn.useSelector)(bt),m=V(),d=(0,Nr.usePrevious)(m),g=Um(),{coin:l}=S(),f=Ei(),{coinId:A}=l,I=async()=>{let C=a?"0":m,x={coinId:A,address:g},_={fromAddr:g,value:C,toAddr:n,inputData:f};try{let F=await bc(x,_);r(z(F)),r(R(!1))}catch{r(R(!0))}finally{e()}},{run:T}=(0,Nr.useDebounceFn)(I,{wait:500});return(0,ka.useEffect)(()=>{c&&(t(),T())},[c]),(0,ka.useEffect)(()=>{c&&m!==d||(t(),T())},[m,f,c]),o},EC=Ph;var kh=()=>{let o=EC();return to(),bC.default.createElement(j,{confirmButtonProps:{loading:o}})},PC=kh;s();i();var vC=u(h()),LC=u(b());s();i();var fn=u(b()),kC=u(_T());Ee();var wh=()=>{let o=Bo(),{coin:t}=S(),e=y(),r=(0,fn.useSelector)(so),n=(0,fn.useSelector)(st),a=(0,fn.useSelector)(rr),c=V(),m=(0,fn.useSelector)(Ft),d=wo({fromAddr:e,localType:Ui,walletId:m});return lo(async()=>{if(!await Ar())throw new Error("mpc error")},async()=>{let T=a?"0":c,C=await os(r),x=a?Tr(C,c):"",_={coinId:t.coinId,address:e};return await Ec(_,{fromAddr:e,toAddr:r,value:T,inputData:x})},async(T={})=>{let{info:C={}}=T,{timestamp:x,expiration:_,ref_block_bytes:F,ref_block_hash:k,feelimit:M,contractAddress:w,asset:P}=C,B={fromAddress:e,toAddress:r,amount:c,timestamp:x,expiration:_,refBlockBytes:F,refBlockHash:k},O={};return t.baseCoinId===0?O={type:Qt.TRANSFER,data:B}:a?O={type:Qt.TOKEN_TRANSFER,data:{...B,feeLimit:M,contractAddress:w}}:O={type:Qt.ASSET_TRANSFER,data:{...B,assetName:(0,kC.bufferToHex)(p.Buffer.from(P))}},await d({params:O})},async T=>{let C=await Io(Ui,T),x={signedTx:T,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:n,txHash:C};return await o(x)},T=>(ao({tx_id:T}),T))},wC=wh;s();i();var NC=u(h()),BC=u(b());function Nh(o,t){return(0,NC.useCallback)(()=>o?{text:t,type:ro.COMMON_ERROR}:null,[o,t])}function wa(){let o=Cu(),t=(0,BC.useSelector)(zc),e=Nh(t.wrongPermission,t.msg);eo({fns:[e,...o],override:!0})}function Bh(){let o=wC(),t=async()=>{await o()},e=(0,LC.useSelector)(ne);return wa(),vC.default.createElement(oo,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var DC=Bh;var vh={match:o=>o===In,pages:{AddressPage:FC,AmountPage:PC,ConfirmPage:DC}},MC=vh;s();i();To();s();i();var UC=u(h());s();i();var OC=u(q());be();Pe();var Lh=()=>{let{baseCoin:o}=S();return(0,OC.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},r;try{r=await Ac(qo.queryAccountExist,e)}catch(n){console.log(n)}return r?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function Dh(){let o=vt(),t=Lh();return[o,t]}var RC=Dh;var Mh=()=>{let o=RC();return UC.default.createElement(Q,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},WC=Mh;s();i();var GC=u(h());function Oh(){return to(),GC.default.createElement(j,null)}var HC=Oh;s();i();var ln=u(h());K();s();i();var VC=u(b());Po();var Rh=o=>{let{coin:t,baseCoin:e}=S(),r=y(),n=(0,VC.useSelector)(so),a=mo(),c=Bo();return lo(async()=>await Xe({coinId:t.coinId,address:r},{fromAddr:r,toAddr:n}),async A=>{let{info:I}=A,{chainid:T,compression:C,refBlockNumber:x,refBlockId:_,refBlockTimestamp:F,expireSeconds:k,precision:M,symbol:w,contract:P}=I,B={type:0,from:r,to:n,amount:a,memo:o,precision:M,symbol:w,contract:P,common:{chainId:T,compression:C,refBlockNumber:x,refBlockId:_,refBlockTimestamp:F,expireSeconds:k}};return await no().signTransaction(B,r,e.localType)},async A=>{let I={memo:o},T=await Io(t.localType,A),C={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:n,serviceCharge:"0",extJson:JSON.stringify(I),txHash:T};return await c(C)},A=>(ao({tx_id:A}),A))},qC=Rh;var KC=256;function Uh(){let[o,t]=(0,ln.useState)(""),e=qC(o),r=async()=>{await e()},n=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=KC&&t(a.target.value)};return eo(),ln.default.createElement(oo,{slot:{bottom:ln.default.createElement(Te,{value:o,placeholder:E("extension_wallet_transaction_input_entermemo_max",{num:KC}),onChange:n})},confirmButtonProps:{onSubmit:r}})}var JC=Uh;var Wh={match:o=>o===Za,pages:{AddressPage:WC,AmountPage:HC,ConfirmPage:JC}},YC=Wh;s();i();s();i();var wi=u(h());s();i();var XC=u(h()),jC=u(q());var ki=u(b());zo();s();i();var zC=u(ko());var ZC=u(b());var $C=u(q());function Gh(){let{coinId:o}=(0,zC.useParams)(),t=y(),e=(0,ZC.useSelector)(so);return(0,$C.useMemoizedFn)(async()=>(await $e({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var bi=Gh;s();i();po();function Hh(){let o=Vm();return(t,e,r)=>{let n=e||0,a=ot(r,0)?_o(n,r):"0",c=o[t];return sc(Ho(a,10**(c.decimals||0)),0)}}var Pi=Hh;function Vh(){let o=(0,ki.useDispatch)(),[t,e]=(0,XC.useState)(!1),r=(0,ki.useSelector)(Mc),n=bi(),a=Tu(),c=Pi();return(0,jC.useMount)(()=>{e(!0),(async()=>{try{let g=(await n())?.info||{},l={};if(r!==-1)l=(g?.coinFeeList||[]).find(({coinId:A})=>A===r);else{let A=Wa(g?.coinFeeList||[],I=>a(I.coinId).currencyAmount||0);A&&(l=A.pop())}let f=c(l?.coinId,g?.methodFeeList?.transfer,l?.rate);o(te(l?.coinId)),o(z(f)),o(sm(g))}finally{e(!1)}})()}),t}var QC=Vh;function qh(){let o=QC();return to(),wi.default.createElement(j,{confirmButtonProps:{loading:o}})}function Kh(){let{coin:o}=S();return wi.default.createElement(vo,{fixed:!!o.vdecimalNum},wi.default.createElement(qh,null))}var oT=Kh;s();i();var Ge=u(h());var sT=u(q());s();i();var tT=u(b());Po();yo();To();function Jh(){let o=Bo(),{coin:t}=S(),e=y(),r=(0,tT.useSelector)(so),n=X(),a=ie(),c=mo(),m=bi(),{coin:d}=ss(a,!1);return lo(m,async(f={})=>{let{info:A={}}=f,{chainId:I,accountId:T,nonce:C,tokenId:x,coinFeeList:_=[]}=A,F=_.find(({coinId:w})=>w===a)||{},k={type:Qt.TRANSFER,accountId:parseInt(T,10),nonce:C,from:e,chainId:I,to:r,tokenId:parseInt(x,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(F.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:n,amounts:c};return await no().signTransaction(k,e,Va)},async f=>{let{signature:A,tx:I}=f||{},{txHash:T,...C}=I||{},x={txSource:rt.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:C}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:r,serviceCharge:f?.tx?.fee,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(x)})}var eT=Jh;s();i();var Wo=u(h()),rT=u(yt());K();var Ni=u(q()),Bi=u(b());s();i();var Br={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var Yh=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:r,setSupplyGas:n,...a})=>{let c=Jt(o),m=c?.coinAmountInt,d=L.gte(m,t);return Wo.default.createElement(zi.Card,{hovered:d,onClick:()=>{d&&r?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Wo.default.createElement(H.Space,{space:12,className:(0,rT.default)(Br["select-networkFee-card-content"],{[Br["select-networkFee-card-content-disable"]]:!d})},Wo.default.createElement(ur,{size:ur.SIZE.lg,src:c?.image,text:c?.text}),Wo.default.createElement(H.Space,{space:2,direction:H.DIRECTION.vertical,...a},Wo.default.createElement(J.Text,{strong:!0},c?.symbol),Wo.default.createElement(J.Text,{size:J.SIZE.xs,type:J.TYPE.secondary},d?E("developer_mode_send_text_balanceprice",{balance:we(m,{decimals:c?.decimals,useApproximate:!1})}):E("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Wo.default.createElement(fo,{category:fo.CATEGORY.fill,type:fo.TYPE.gray,size:fo.SIZE.xxs,onClick:g=>{g?.stopPropagation(),n({supplyGasVisible:!0,supplyGasCoinId:o})}},E("extension_send_btn_fill_up_token",{token:c?.symbol})))},zh=({visible:o,onToggle:t})=>{let e=ie(),r=(0,Bi.useDispatch)(),n=y(),a=ut(),c=Pi(),[{supplyGasVisible:m,supplyGasCoinId:d},g]=(0,Ni.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),l=(0,Bi.useSelector)(Zc),f=l?.coinFeeList||[],A=l?.methodFeeList?.transfer,I=(0,Ni.useCreation)(()=>f.map(({rate:x,coinId:_})=>{let F=c(_,A,x);return{coinId:_,feeCoinAmountInt:F}}),[f,A]),T=({coinId:x,feeCoinAmountInt:_})=>{t?.(),r(te(x)),r(z(_))},C=({coinId:x,feeCoinAmountInt:_})=>Wo.default.createElement(Yh,{coinId:x,selectedCoinId:e,feeCoinAmountInt:_,onSelect:T,setSupplyGas:g});return o?Wo.default.createElement(H.Portal,{component:H.Container,className:Br["select-networkFee"]},Wo.default.createElement(Hm,{onBack:t,onClose:t,title:E("wallet_transfer_subtitle_network_fee")}),Wo.default.createElement(H.Box,{className:Br["select-networkFee-content"]},Wo.default.createElement(J.Text,{className:Br["select-networkFee-title"]},E("wallet_extension_send_alert_choose_token")),Wo.default.createElement(zi,{space:16,dataSource:I,renderItem:C})),Wo.default.createElement(Zm,{walletId:a,address:n,visible:m,closeCallback:()=>{g({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},nT=zh;function Zh(){let[o,{toggle:t}]=(0,sT.useBoolean)(!1),e=eT(),r=async()=>{await e()};return eo(),Ge.default.createElement(Ge.default.Fragment,null,Ge.default.createElement(oo,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:r}}),Ge.default.createElement(nT,{visible:o,onToggle:t}))}function $h(){let{coin:o}=S();return Ge.default.createElement(vo,{fixed:!!o.vdecimalNum},Ge.default.createElement(Zh,null))}var iT=$h;var Xh={match:o=>Pm(o),pages:{AddressPage:Q,AmountPage:oT,ConfirmPage:iT}},aT=Xh;s();i();To();s();i();var Li=u(h());s();i();var cT=u(h()),mT=u(q());var vi=u(b());function jh(){let o=(0,vi.useDispatch)(),{coin:t}=S(),e=y(),r=(0,vi.useSelector)(so),n=Yu(),[a,c]=(0,cT.useState)(!1);return(0,mT.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},g={fromAddr:e,toAddr:r,value:"0"};try{let l=await n("Transfer",d,g);if(l){let{info:f,feeCoin:A,fee:I}=l;o(lm({info:f,feeCoin:A})),o(te(A.coinId)),o(z(I)),o(R(!1))}}catch{o(R(!0))}finally{c(!1)}})()}),a}var uT=jh;s();i();var dT=u(h());K();po();function Na(){let{coin:o}=S();return(0,dT.useCallback)(async t=>{let{ZksyncWallet:e}=await Vr(),r=Ho(t,10**o.decimals),n=await e.getCloseAmounts(r);return Sn(n,r)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:L.showFloorTruncation(_o(n,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:ro.COMMON_ERROR}},[])}function Qh(){let t=[Na()];to(t)}var fT=Qh;function o_(){let o=uT();return fT(),Li.default.createElement(j,{confirmButtonProps:{loading:o}})}function t_(){let{coin:o}=S();return Li.default.createElement(vo,{fixed:!!o.vdecimalNum},Li.default.createElement(o_,null))}var lT=t_;s();i();var Di=u(h());s();i();var Ba=u(b());Po();To();yo();function e_(){let o=Bo(),{coin:t}=S(),e=y(),r=(0,Ba.useSelector)(so),n=X(),a=ie(),c=V(),m=(0,Ba.useSelector)(jc),d=async()=>{let{info:l,feeCoin:f}=m||{},{accountId:A,nonce:I}=l||{},T={type:Qt.TRANSFER,from:e,to:r,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:n,decimals:t.decimals,nonce:parseInt(I,10)};return await no().signTransaction(T,e,qa)},g=async l=>{if(l?.code)throw new Error(ps);let{signature:f,tx:A}=l||{},{txHash:I,...T}=A||{},C={txSource:rt.NORMAL,signedTx:JSON.stringify({signature:f,tx:T}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(C)};return async()=>{let l=await d();return g(l)}}var pT=e_;s();i();var gT=u(h());function r_(){let o=Na();return(0,gT.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])}function n_(){let t=[r_()];eo(t)}var AT=n_;function s_(){let o=pT(),t=async()=>o();return AT(),Di.default.createElement(oo,{confirmButtonProps:{onSubmit:t}})}function i_(){let{coin:o}=S();return Di.default.createElement(vo,{fixed:!!o.vdecimalNum},Di.default.createElement(s_,null))}var CT=i_;var a_={match:o=>o===Ja,pages:{AddressPage:Q,AmountPage:lT,ConfirmPage:CT}},TT=a_;var c_=[zl,el,zd,xl,Ep,ig,lA,MC,aT,TT,qA,hA,YC,NA,pp,Ag,Rg,pC],IT=c_;var m_=({coinId:o,protocolId:t,baseCoinId:e})=>{let r=IT.find(({match:d})=>d(e,o,t))||{},{Container:n=({children:d})=>At.default.createElement(At.default.Fragment,null,d)}=r,{AddressPage:a,AmountPage:c,ConfirmPage:m}=r.pages||{};return Ve(r)?null:At.default.createElement(n,null,At.default.createElement(he.Switch,null,At.default.createElement(he.Route,{exact:!0,path:`${Jo}/:coinId?${kn}`,component:a}),At.default.createElement(he.Route,{exact:!0,path:`${Jo}/:coinId?${Qe}`,component:c}),At.default.createElement(he.Route,{exact:!0,path:`${Jo}/:coinId?${or}`,component:m})),At.default.createElement(fd,null))},u_=(0,At.memo)(m_),d_=()=>{let{coinId:o}=(0,he.useParams)(),{coin:t,baseCoin:e}=ss(o,!0);return At.default.createElement(u_,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},F$=d_;export{F$ as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-7RWRR3FA.js.map
