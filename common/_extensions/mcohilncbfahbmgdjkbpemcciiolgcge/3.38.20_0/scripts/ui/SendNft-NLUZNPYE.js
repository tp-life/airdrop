import{a as lr}from"./chunk-F23OPFFP.js";import{a as ir}from"./chunk-3SNY26AW.js";import{a as Le,b as mr}from"./chunk-CBPSBTBL.js";import"./chunk-O6IGNLRS.js";import{a as cr}from"./chunk-4BNLNYIE.js";import{a as sr}from"./chunk-SJX4MPU6.js";import{c as ar}from"./chunk-CP6ZYOGS.js";import"./chunk-KPYSN5PV.js";import{a as nr}from"./chunk-JYZR3KF2.js";import"./chunk-MOISJT5B.js";import{d as Qo}from"./chunk-ZVOB6UOQ.js";import"./chunk-OSVZOFON.js";import"./chunk-7JDG2FPM.js";import"./chunk-ADRJK2SB.js";import"./chunk-VT47VYXB.js";import{a as Ko,d as de}from"./chunk-KSO662WW.js";import"./chunk-6TPN273S.js";import"./chunk-SF64G75T.js";import"./chunk-5AU4SCQT.js";import"./chunk-HCXRQ4GY.js";import{a as Xo}from"./chunk-Q4NRZ4HK.js";import"./chunk-AHNTWQZY.js";import{a as bt}from"./chunk-3L4KZ2SK.js";import"./chunk-WMQSMBLA.js";import"./chunk-XKK5N6CR.js";import{a as Wt,c as qo,d as ut,e as jo}from"./chunk-ICLH7VK5.js";import"./chunk-3RJOXTRR.js";import{D as Ro,E as tr,F as er,H as or}from"./chunk-J2MASCEL.js";import"./chunk-J2Y34YM2.js";import{a as fe}from"./chunk-NNO7KFUF.js";import{a as rr}from"./chunk-3L5C5CQB.js";import"./chunk-CGBWDXEW.js";import"./chunk-NRWOOVOJ.js";import{a as Jo}from"./chunk-P6MBUJNT.js";import{a as ce}from"./chunk-2XYRURE2.js";import"./chunk-LYFECSNW.js";import"./chunk-M7CDJYYG.js";import"./chunk-VUB7XYHG.js";import"./chunk-QZXK25MX.js";import"./chunk-J7ZUOIII.js";import"./chunk-Q2BK5I52.js";import"./chunk-QVG4GOA5.js";import{d as Zo,f as le,g as Vo}from"./chunk-4NCQWC2K.js";import"./chunk-BSEC3HD3.js";import"./chunk-SR5VKAMR.js";import"./chunk-2L5V4MTR.js";import"./chunk-762Y5MQL.js";import"./chunk-L56XCX6G.js";import"./chunk-7UJMDFGU.js";import"./chunk-PB7BCSCP.js";import"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import{j as Mo}from"./chunk-ERN756XV.js";import"./chunk-SUOZFPDI.js";import"./chunk-UWTAV26V.js";import{a as Ho,c as Yo}from"./chunk-A6RKGNRU.js";import{b as Ot,c as Lo,d as Go,e as De,f as B,g as b,h as ot,i as rt,j as ae,k as Bo,l as Nt,m as se,n as Oo}from"./chunk-IMZZ3LDB.js";import"./chunk-BM73LLRW.js";import"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import{a as pt,c as Do}from"./chunk-36UM4YJX.js";import"./chunk-BM44DQAB.js";import"./chunk-6JGR2L6N.js";import"./chunk-ZBSU6WZQ.js";import"./chunk-S2V4K2JM.js";import"./chunk-GSWJ5GW7.js";import"./chunk-IVCA3VWI.js";import"./chunk-FLZ5KV6J.js";import"./chunk-OCTREJ3R.js";import"./chunk-RG4N2AAJ.js";import"./chunk-JPVBM3R5.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import"./chunk-A52XYJMT.js";import"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-BCT5GPKT.js";import{A as po}from"./chunk-FJBNQZUR.js";import{j as me}from"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import{a as $o}from"./chunk-7OQVWENF.js";import"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import{k as It}from"./chunk-P7X44DVV.js";import"./chunk-PP43MII2.js";import"./chunk-YV3R2S6K.js";import{a as zo}from"./chunk-RJO5LUBF.js";import"./chunk-DRPGNVVL.js";import{a as st}from"./chunk-UEENMIFU.js";import"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{a as M,n as oe,o as re}from"./chunk-PVSNAFN3.js";import"./chunk-JYKQJVIF.js";import{m as Uo}from"./chunk-GBQG32PI.js";import{a as En}from"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import{o as at}from"./chunk-A3FIPWG3.js";import{I as wo,L as Co,Na as Ee,R as bo,S as So,U as Fo,_ as Po,ac as P,ca as ke,m as j,ob as et,p as uo,r as ee,ub as ko,vb as Eo,xb as At,zb as ne}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import{V as Ao,W as No,d as ho,m as Io,r as vo,t as dt}from"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import{a as nt}from"./chunk-QZUNX5I4.js";import{a as wt,b as J}from"./chunk-IVA2TTR4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import{d as vt,f as Pe}from"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import{g as Ct}from"./chunk-35FUKWV2.js";import"./chunk-DHNKVM4B.js";import{a as ie}from"./chunk-VL5VJIZ7.js";import{c as Wo}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{$b as lo,Ac as $,Gb as tt,Hb as Kt,Ib as Xt,Mb as Se,Nb as ao,Ob as so,Oc as Gt,Qa as to,Rb as io,Sc as _o,Tc as go,Uc as xo,Vb as Dt,Wc as yo,Xb as mo,Xc as Bt,Ya as qt,Yc as To,Za as eo,aa as Qe,dc as Qt,fc as q,hb as jt,nb as oo,pb as ro,rb as no,sb as ht,ub as V,wb as Jt,za as Re}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{A as Fe,G,c as te,q as ft}from"./chunk-L4N7WJIQ.js";import"./chunk-LBCQTFOD.js";import{N as U,l as Vt,w as a}from"./chunk-V63HWKAL.js";import"./chunk-ZZ2UZY4M.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as Lt,T as co,Z as fo,ca as v}from"./chunk-2EJYCNYZ.js";import{a as Rt}from"./chunk-V2K75WCG.js";import{a as C}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-SY7RUBBT.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as m,m as s,o as i}from"./chunk-UGZFXKPB.js";s();i();var Ae=m(C()),xt=m(nt()),hn=m(at());var In=m(P());s();i();var Mt=m(C()),wr=m(P()),Cr=m(nt()),br=m(at());U();s();i();var Ut=m(C()),St=m(Rt()),fr=m(P());var Ge=({title:t,children:e,onBack:o,onClose:r,nav:n,loading:l,pageName:f})=>{let c=(0,fr.useSelector)(b);return Ut.default.createElement(Wo.Container,{loading:l,className:`metax-send-nft-page main-container ${f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page":""}`},!n&&Ut.default.createElement(zo,{title:t,onClose:r,onBack:o,closeable:!!r,className:f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page-nav":""}),n,Ut.default.createElement("div",{className:`metax-send-nft-page__content ${f==="confirmDetail"&&c?.chain==0?"metax-send-btc-content":""}`},c&&Ut.default.createElement("div",{className:"metax-send-nft-page__content__main"},e)))};Ge.defaultProps={nav:null,title:"",onBack:null,onClose:null};Ge.propTypes={children:St.default.node.isRequired,onBack:St.default.func,onClose:St.default.func,title:St.default.string,nav:St.default.node};var pe=Ge;s();i();U();var Y=m(C()),ge=m(P()),vr=m(Rt());s();i();Jt();var dr=async(t,e,o)=>{let r="",{coinId:n,baseCoinId:l}=o;return t?((n===ht||l===ht)&&!await tr(t)||(ee({coinId:n})||ee({coinId:l}))&&!(await er(t)).isValid||(n===V||l===V)&&!await Ro(t)||o.coinId!==ht&&o.coinId!==V&&!ee(o)&&!or(t,{allowNonPrefixed:!1}))&&(r="wallet_manage_crypto_errortip_invalid_address_tips"):r="wallet_transfer_errortip_receive_address_empty",r},pr=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");var Ue=m(at());s();i();var L=m(C()),_e=m(Rt()),Tr=m(Lt());U();var hr=m(nt());s();i();var Be=m(C());var ue=m(Rt());var Oe=({disabled:t,buttonText:e,nextJump:o})=>{let r=()=>{t||o&&o()};return Be.default.createElement(st.FooterActions,{usePortal:!0},Be.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:r,disabled:t},e))};Oe.propTypes={disabled:ue.default.bool,buttonText:ue.default.string.isRequired,nextJump:ue.default.func};Oe.defaultProps={disabled:!1,nextJump:()=>{}};var ur=Oe;s();i();var _r=m(C()),gr=m(P()),xr=m(at());qt();To();yo();var Dn=0,Ln=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:r}=(0,gr.useSelector)(b),{loading:n,data:l,error:f}=(0,xr.useRequest)(async()=>{let p={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:Do[r]},{data:d}=await xo(Bt.postBtcNftStatus,p);return d?.assetStatusList||[]},{ready:t===Dn&&[pt.Ordinals,pt.ATOMICAL].includes(r)||t===to&&[pt.FractalOrdinals].includes(r)}),c=(0,_r.useMemo)(()=>[pt.ATOMICAL,pt.Ordinals,pt.FractalOrdinals].includes(r)&&l?.some(({unavailable:p})=>Number(p)===1)?1:0,[l,r]);return[n,c,f]},yr=Ln;var We=({nftBalance:t,nftInfo:e,amount:o,toAddress:r,toError:n,amountError:l,onAmountChange:f,onToAddressChange:c,showAmount:p,onLoadingChange:d,tipMessage:g})=>{let[u,h,x]=yr(),I=(0,hr.useHistory)(),F=()=>{I.replace(re)};(0,L.useEffect)(()=>{d?.(u)},[u]);let _=(0,L.useMemo)(()=>x?a("extension_wallet_header_alert_nft_check_error"):h===1?a("extension_wallet_header_alert_utxo_limit_arc"):null,[x,h]);return L.default.createElement("div",{className:(0,Tr.default)("metax-send-nft-form")},(h||x)&&L.default.createElement(te,{closable:!1,type:x?te.TYPE.error:te.TYPE.warn,className:"metax-send-nft-form__alert",title:_}),L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ft.TextArea,{className:"metax-send-nft-form__address",inputClassName:"metax-send-nft-form__address-input",placeholder:a("wallet_extension_transaction_placeholder_input_address"),label:a("wallet_transfer_subtitle_receive_address"),value:r,error:n?a(n):"",disabled:!!h||u,size:ft.SIZE.xl,errorType:ft.TIP_TYPE.always,onChange:c,tips:g||a("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),p&&L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ft.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:a("wallet_contract_interactiom_subtitle_amount"),size:ft.SIZE.xl,precision:0,enableMinus:!1,value:o,error:l||"",errorType:ft.TIP_TYPE.always,onChange:f}),L.default.createElement("div",{className:"metax-send-nft-form__row__max"},L.default.createElement("span",{className:"metax-send-nft-form__row__max-amount"},a("wallet_extension_nft_toast_owned"),":",t),L.default.createElement("span",{onClick:()=>{f(`${e.totalBalance||0}`)},className:"metax-send-nft-form__row__btn-max"},a("wallet_transfer_btn_max_balance_amount")))),L.default.createElement(ur,{nextJump:F,buttonText:a("wallet_transfer_btn_next"),disabled:!r||n||h||p&&(!o||l)}))};We.propTypes={nftBalance:_e.default.number.isRequired,amount:_e.default.number,toAddress:_e.default.string};We.defaultProps={toAddress:"",amount:void 0};var Ir=We;function Ar(t){let e=Zo(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,ge.useSelector)(se),[r,n]=(0,Y.useState)(null),[l,f]=(0,Y.useState)(null),{run:c}=(0,Ue.useDebounceFn)(async(x,I)=>{!e||(x.toLowerCase()===I.toLowerCase()&&f(Y.default.createElement("div",{className:"metax-send-nft-form__waring"},Y.default.createElement("span",{className:"metax-send-nft-form__waring__tips"},a("wallet_extension_mid_textarea_same_address")))),n(await dr(x,I,e)))},{wait:200}),[p,d]=(0,Y.useState)(null),{run:g}=(0,Ue.useDebounceFn)((x,I)=>{d(pr({amount:x,balance:I,t:a}))},{wait:200}),u=(0,Y.useCallback)(x=>{t.setToAddress(x.target.value),c(x.target.value,t.fromAddress)},[t.fromAddress,c]),h=(0,Y.useCallback)(x=>{let I=x.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(I),g(I,t.nftBalance)},[t.nftBalance,g]);return Y.default.createElement(Ir,{...t,toError:r,tipMessage:l,amountError:p,showAmount:o,onToAddressChange:u,onAmountChange:h})}Ar.propTypes={nftInfo:vr.default.object.isRequired};function Gn(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Bn(t){return{setToAddress:e=>t(Ot.setToAddress(e)),setAmount:e=>t(Ot.setAmount(e))}}var Nr=(0,ge.connect)(Gn,Bn)(Ar);var On=()=>{let t=(0,wr.useDispatch)(),e=(0,Cr.useHistory)(),[o,{set:r}]=(0,br.useBoolean)(!1),n=(0,Mt.useCallback)(()=>{t(Ot.resetSend()),e.goBack()},[e]);return Mt.default.createElement(pe,{onBack:n,loading:o,title:a("wallet_home_btn_send")},Mt.default.createElement(Nr,{onLoadingChange:r}))},Sr=On;s();i();var $t=m(C()),xn=m(P()),yn=m(nt());U();s();i();var Yt=m(C()),_n=m(P());Jt();qt();s();i();var N=m(C()),Ft=m(P()),Yr=m(nt());U();s();i();Gt();Jt();To();yo();q();Pe();var Wn=t=>{let e=et(t),n=(ko(t)?.account||{})[jt]||"";return{walletId:e,address:n}},Un=async t=>{let e={coinId:V,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:r={}}=await wo(e,o),{sequenceNumber:n,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c}=r;return{sequenceNumber:n,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c,maxGasAmount:8e3}},Mn=t=>async e=>{let{signedTx:o,sequenceNumber:r,fromAddress:n,toAddress:l,gasUnitPrice:f,maxGasAmount:c,amount:p}=t,d={nonce:r},g=tt(f,c),u={signedTx:o,coinId:V,fromAdr:n,toAdr:l,serviceCharge:g,extJson:JSON.stringify(d),coinAmount:io(p),txSource:$.NFT};return await e(sr(u))},Me=t=>async(e,o)=>{let r=o(),{address:n}=Wn(r),{type:l,maxGasAmount:f,gasUnitPrice:c,fromAddress:p,toAddress:d,receiver:g,sender:u,creator:h,collectionName:x,tokenName:I,version:F,amount:_}=t,k=await Un({fromAddress:p,toAddress:d,address:n});f&&(k.maxGasAmount=f),c&&(k.gasUnitPrice=c);let w={};l===dt.OFFER_NFT||l===dt.OFFER_NFT_SIMULATE?(w.receiver=g,w.amount=_):w.sender=u;let O={type:l,base:k,data:{...w,creator:h,collectionName:x,tokenName:I,version:F}},E=await vt().signTransaction(O,n,jt);return{base:k,signedTx:E}},Fr=t=>async e=>{let{fromAddress:o,toAddress:r,amount:n}=t,{base:l,signedTx:f}=await e(Me(t)),c=await fe(jt,f);return{txId:await e(Mn({...l,signedTx:f,fromAddress:o,toAddress:r,amount:n})),txHash:c}},Pr=async(t={},e)=>{let o;try{o=await Po(e)}catch(l){o=t.maxGasAmount||2e3,console.log(l)}let{gasUnitPrice:r}=t,n=tt(r,o);return{gasUnitPrice:r,maxGasAmount:o,fee:n}},kr=t=>async e=>{let{base:o,signedTx:r}=await e(Me({...t,type:dt.OFFER_NFT_SIMULATE}));return Pr(o,r)},Er=t=>async e=>{let{base:o,signedTx:r}=await e(Me({...t,type:dt.CLAIM_NFT_SIMULATE}));return Pr(o,r)},Dr=t=>async e=>e(Fr({...t,type:dt.OFFER_NFT})),Lr=t=>async e=>e(Fr({...t,type:dt.CLAIM_NFT})),Gr=async(t,e,o,r)=>{let n=oo({coinId:r})||{},l=Bt.getAptosResourceType.replace("{rpcUrl}",n.rpcUrl),f=Bt.getAptosTable.replace("{rpcUrl}",n.rpcUrl),{data:{data:{token_data:{handle:c}}}}=await _o(l.replace("{creator}",t)),{data:p}=await go(f.replace("{handle}",c),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return p.largest_property_version};s();i();var Br=m(P());q();var Hn=(t,e)=>Ko((n,l)=>Kt(n,10**l.decimals),Qt)(t,e),xe=(t,e={})=>Uo(t,{symbol:e?.symbol,decimals:e?.decimals}),ye=(t,e={})=>{let o=(0,Br.useSelector)(ne),r=me(e.coinId),n=Hn(t,e);return de({amount:n,rate:r,symbol:o.symbol},{useApproximate:!0})};q();s();i();var it=m(C()),Or=m(En());U();var D=({label:t,value:e,valueDisplay:o,canCopy:r})=>{let n=(0,it.useCallback)(()=>{(0,Or.default)(e),G.success({title:a("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:G.DIRECTION.top})},[e]);return it.default.createElement("div",{className:"metax-send-nft-confirm"},it.default.createElement("div",{className:"metax-send-nft-confirm__label"},t),it.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:r?n:void 0},it.default.createElement(Xo,{text:o,maxWidth:"215px"}),r&&it.default.createElement("span",{className:"okds-copy confirm-transaction--copy"})))};s();i();var Wr=m(C()),Ur=m(P()),Mr=m(at());var Hr=(t,e)=>{let o=(0,Ur.useDispatch)(),[r,n]=(0,Wr.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return(0,Mr.useMount)(()=>{(async()=>{n({...r,loading:!0}),t.version=await Gr(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:f,maxGasAmount:c,fee:p}=e?await o(Er(t)):await o(kr(t));n({aptosFee:p,gasUnitPrice:f,maxGasAmount:c,loading:!1,version:t.version})})()}),r};var Yn=()=>{let t=(0,Ft.useDispatch)(),{creatorAddress:e,name:o,projectName:r,accountAddress:n,baseCoinId:l,image:f,chainName:c,claim:p}=(0,Ft.useSelector)(b),d=(0,Yr.useHistory)(),{name:g,keyringName:u}=(0,Ft.useSelector)(At),{toAddress:h,amount:x=1}=(0,Ft.useSelector)(ot),{baseCoin:I,coin:F}=ce(l,!0),_=p?{fromAddress:n,toAddress:h,sender:n,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId}:{fromAddress:n,toAddress:h,receiver:h,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId},{aptosFee:k,gasUnitPrice:w,maxGasAmount:O,loading:E,version:K}=Hr(_,p),[X,Q]=(0,N.useState)(!1),kt=ar(),zt=xe(k,I),lt=ao(kt,mo(k)),H=ye(k,I),Z=Ct({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{className:"metax-send-nft-detail"},N.default.createElement("div",{className:"metax-send-nft-detail__base--container"},N.default.createElement(bt,{src:f,startStatus:!0,alt:"nft",backupImage:Z,classnames:"metax-send-nft-detail__icon"}),N.default.createElement("div",{className:"metax-send-nft-detail__name-container"},N.default.createElement("div",{className:"metax-send-nft-detail__name"},o))),N.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${u} - ${g}`}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:j(n),canCopy:!0}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:j(h),canCopy:!0}),N.default.createElement("div",{className:"metax-send-nft-detail__hr"}),N.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:c}),N.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},N.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),N.default.createElement("div",{className:"metax-send-nft-confirm__value"},E?N.default.createElement(fo,null):N.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},N.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",zt),N.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},H)))),!lt&&!E&&N.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip"))),N.default.createElement(st.FooterActions,null,N.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),lt?d.goBack():d.replace(M)}},a("wallet_dapp_connection_btn_reject")),N.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:X,disabled:!lt||E,onClick:async()=>{try{Q(!0),_.gasUnitPrice=w,_.maxGasAmount=O,_.version=K;let{txId:yt,txHash:Tt}=p?await t(Lr(_)):await t(Dr(_));p?await ke(21,Tt,h):await ke(20,Tt,n),It({tx_id:yt}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),d.replace(M)}catch{G.error({title:a("wallet_home_toast_network_error")})}finally{Q(!1)}}},a("wallet_set_password_btn_confirm"))))},$r=Yn;s();i();var zr=m(C()),Te=m(P());var Zr=()=>{let{accountAddress:t,inscriptionIdProtocol:e,localType:o}=(0,Te.useSelector)(b),{toAddress:r}=(0,Te.useSelector)(ot),n=(0,Te.useSelector)(et);return zr.default.createElement(ir,{unapproved:{walletId:n,params:{transfer:{from:t,to:r,data:e}},localType:o}})};s();i();var A=m(C()),z=m(P()),an=m(nt());U();q();s();i();var He=m(P());q();function Vr(){let{baseCoinKey:t}=(0,He.useSelector)(b),o=le(void 0,void 0,{key:t})?.coinAmountInt,r=(0,He.useSelector)(rt),{gasLimit:n,gasPrice:l,supportEip1559:f,maxFeePerGas:c,maxPriorityFeePerGas:p}=r;if(n==="0"||f&&(c==="0"||p==="0")||!f&&l==="0")return!1;let g=tt(`${(f?c:l)||0}`,`${n||0}`);return so(`${o||0}`,g)}s();i();var Pt=m(P());Jt();Gt();q();Pe();function qr(){let t=(0,Pt.useDispatch)(),{contractAddress:e,accountAddress:o,baseCoinId:r,localType:n}=(0,Pt.useSelector)(b),{gasLimit:l,gasPrice:f,maxFeePerGas:c,maxPriorityFeePerGas:p,supportEip1559:d}=(0,Pt.useSelector)(Bo),g=(0,Pt.useSelector)(ae),u=$o();return{send:async({nonce:h,updateGasInfo:x,activityId:I})=>{let F=ro(n)?.realChainIdHex,_={from:o,to:e,nonce:J(h),data:g,chainId:F,value:"0",gasLimit:J(l)};d?(_.type=Io.FEE_MARKET,_.maxFeePerGas=J(c),_.maxPriorityFeePerGas=J(p)):_.gasPrice=J(f),x&&(_.maxFeePerGas?(_.maxFeePerGas=J(x.maxFeePerGas),_.maxPriorityFeePerGas=J(x.maxPriorityFeePerGas)):_.gasPrice=J(x.gasPrice));let w={...uo(_)};w.walletId=u;let O=wt(d?_.maxFeePerGas:_.gasPrice),E=wt(_.gasLimit),K={..._,value:wt(_.value),from:_.from,to:_.to,gas:E,gasPrice:O,priorityFee:wt(d?_.maxPriorityFeePerGas:0),nonce:wt(_.nonce),repeatTxType:ho.CONFIRMING,oldTxHash:""},X={coinId:r,coinAmount:0,fromAdr:_.from,toAdr:_.to,serviceCharge:tt(E,O),extJson:JSON.stringify(K),txSource:$.NFT,inputData:_.data?_.data:"",activityId:I};return await t(Ho({txParams:w,walletId:u})),{serverTxId:await vt().signAndPublishTransferTransaction({signParams:w,from:w.from,baseChain:eo,publishParams:X})}}}}s();i();var S=m(C()),on=m(Lt()),_t=m(P());var Ie=m(at());U();var rn=m(nt());s();i();s();i();var Jr=m(C()),Kr=m(Lt());U();s();i();var jr={root:"_root_1leh0_1"};function $n({className:t,style:e}){return Jr.default.createElement("div",{className:(0,Kr.default)(jr.root,t),style:e},a("wallet_extension_freegas_notif_networkfee_rebate"))}var Ye=$n;s();i();var Qr=m(C());s();i();var Xr={text:"_text_1qgtl_1"};function zn({status:t}){return t!==ut.ok?null:Qr.default.createElement(Ye,{className:Xr.text})}var $e=zn;s();i();var Rr=m(C()),tn=m(Lt());s();i();var mt={"retina-border-basic":"_retina-border-basic_tetol_1",retinaBorderBasic:"_retina-border-basic_tetol_1",root:"_root_tetol_29",render:"_render_tetol_67",iconWrapper:"_iconWrapper_tetol_71",icon:"_icon_tetol_71",error:"_error_tetol_81"};function Zn({className:t,children:e,error:o}){return Rr.default.createElement("div",{className:(0,tn.default)(mt.root,t,{[mt.error]:o})},e)}var ze=Zn;s();i();U();var Ht=m(C());var Ze=m(Lt());function Vn({className:t,status:e,tip:o,activity:r}){if(e!==ut.error&&e!==ut.ok||!o)return null;let{gas:n,totalTimes:l}=r,{text:f,key:c,args:p,error:d}=o,g=f||a(c,p||{}),u;return c===Wt.availableTimesLimit?u=a("wallet_extension_freegas_tooltip_5refund_day",{num:l}):c===Wt.exceedGasLimit?u=a("wallet_extension_freegas_tooltip_under_10u",{num:n}):c===Wt.exceedTodayGasLimit?u=a("wallet_extension_freegas_tooltip_paused_rules"):c===Wt.walletAssetNotEnough&&(u=a("wallet_extension_freegas_notif_greater_than10",{num:l})),u&&(g=Ht.default.createElement("div",{className:mt.iconWrapper},g,Ht.default.createElement(Fe,{title:u,trigger:Fe.TRIGGER_TYPES.hover},Ht.default.createElement(co,{className:(0,Ze.default)("okx-wallet-plugin-information-circle",mt.icon,{[mt.error]:d})})))),Ht.default.createElement(ze,{className:(0,Ze.default)(mt.render,t),error:d},g)}var Ve=Vn;s();i();var he=m(P());U();q();var en=()=>{let t=(0,he.useSelector)(Nt),e=(0,he.useSelector)(rt),{baseCoin:o}=ce(t,!0),{networkFee:r}=e,n=(0,he.useSelector)(ne),f=Jo(Dt,g=>lo(g,o.vdecimalNum),Qt),c=`${Vt.thousandFormat(f(r))} ${o.symbol}`,p=me(o.coinId),d=de({amount:Dt(r),rate:p,symbol:n.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:c,gasFeeToCurrencyDisplay:d}};s();i();var qe={arrow:"_arrow_1p9f5_1",gasReturnTip:"_gasReturnTip_1p9f5_6"};function qn(){let t=(0,_t.useSelector)(rt),e=Le(),{status:o}=e,{gasType:r}=t,n=No[r],l=n?a(n):"",{gasFeeToETHDisplay:f,gasFeeToCurrencyDisplay:c}=en();return o===ut.ok?S.default.createElement(S.default.Fragment,null,S.default.createElement($e,{status:o}),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},l,"\xA0",f)):S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},l,"\xA0",f),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},c))}var nn=()=>{let t=(0,_t.useDispatch)(),e=(0,rn.useHistory)(),{accountAddress:o,contractAddress:r}=(0,_t.useSelector)(b),n=(0,_t.useSelector)(Nt),l=(0,_t.useSelector)(ae),[f,{setTrue:c,setFalse:p}]=(0,Ie.useBoolean)(!1),d=Le(),g=(0,Ie.useMemoizedFn)(h=>{t(Lo(h))}),u=()=>{t(B()),e.push(M)};return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm"},S.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),S.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:c},S.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},S.default.createElement(qn,null)),S.default.createElement("div",{className:"metax-send-nft-confirm__value__narrow"},S.default.createElement("span",{className:(0,on.default)("okds-arrow-chevron-right-centered-md",qe.arrow)}))),S.default.createElement(Qo,{visible:f,coinId:n,address:o,inputData:l,tokenAddress:r,value:"0",onBack:p,onClose:u,onGasChange:g,gasReturn:d})),S.default.createElement(Ve,{className:qe.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var jn=()=>{let t=(0,z.useDispatch)(),e=(0,z.useSelector)(Oo),{accountAddress:o,baseCoinId:r,image:n,name:l,chainName:f}=(0,z.useSelector)(b),c=Vr(),p=(0,an.useHistory)(),{name:d,keyringName:g}=(0,z.useSelector)(At),u=(0,z.useSelector)(rt),h=(0,z.useSelector)(Nt),[,x]=Vo(h),{toAddress:I,amount:F}=(0,z.useSelector)(ot),_=(0,z.useSelector)(se),[k,w]=(0,A.useState)(!1),{send:O}=qr(),E=jo({coinId:h,txType:qo.nft,fromAddress:o,toAddress:I,unavailable:u.gasType===Ao.CUSTOM,fee:Dt(u.networkFee)}),K=E?.errorCode,X=()=>{w(!0)},Q=()=>{w(!1)},{gasPrice:kt}=u,lt={fetchParams:{coinId:h,from:o,to:I,amount:F,gasPrice:kt},userGasInfo:u,baseCoinAmountUse:"0"},H=(0,A.useMemo)(()=>_?Vt.thousandFormat(F):"",[F,_]),Z=(0,A.useCallback)(()=>{t(B()),c?p.goBack():p.replace(M)},[c]),yt=(0,A.useCallback)(async Ne=>{if(!await rr({callback:Z}))return;let{nonce:we,updateGasInfo:Ce}=Ne;try{let W=await O({nonce:we,updateGasInfo:Ce,activityId:E.activityId}),{serverTxId:Et}=W||{};It({tx_id:Et}),G.success({title:a("wallet_transfer_notif_transaction_submit")}),t(B()),p.replace("/")}catch(W){let Et=W?.data?.originalError?.code;cr(Et)?(G.error({title:W?.data?.originalError.msg||a("wallet_home_toast_network_error")}),E.clear()):W.message!==ie&&G.error({title:a("wallet_home_toast_network_error")})}},[r,o,O]);(0,A.useEffect)(()=>{K===0&&typeof x?.chainId<"u"&&po({wallet_address:o,interactive_address:I,chain_id:x?.chainId,transaction_type:"send_nft"})},[K,x?.chainId]);let Tt=Ct({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(mr,{gasReturn:E},A.default.createElement("div",{className:"metax-send-nft-detail"},A.default.createElement("div",{className:"metax-send-nft-detail__base--container"},A.default.createElement(bt,{src:n,alt:"nft",startStatus:!0,backupImage:Tt,classnames:"metax-send-nft-detail__icon"}),A.default.createElement("div",{className:"metax-send-nft-detail__name-container"},A.default.createElement("div",{className:"metax-send-nft-detail__name"},l))),A.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${g} - ${d}`}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:j(o),canCopy:!0}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:I,valueDisplay:j(I),canCopy:!0}),A.default.createElement("div",{className:"metax-send-nft-detail__hr"}),A.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:f}),A.default.createElement(nn,null),!e&&!c&&A.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip")),_&&A.default.createElement(D,{label:a("wallet_extension_transaction_module_input_label_amount"),valueDisplay:H})),A.default.createElement(st.FooterActions,null,A.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:Z},a("wallet_dapp_connection_btn_reject")),A.default.createElement(lr,{dataForCheck:lt,onClick:yt,beforeClick:X,afterClick:Q,btnProps:{loading:k,width:160,disabled:e||!c}},a("wallet_set_password_btn_confirm"))))},sn=jn;s();i();var y=m(C());U();var dn=m(at());s();i();var ve=m(C()),mn=m(at());qt();q();var ln=(t={},e=!1,o=!1)=>{let[r,n]=(0,ve.useState)({}),[l,f]=(0,ve.useState)(!0),[c,p]=(0,ve.useState)(!1),d=r.fee;return(0,mn.useMount)(()=>{(async()=>{try{let u=await bo(t);u?.fee&&n(u),f(!1)}catch{o&&(p(!0),f(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:r,loading:l,error:c}:d};var gt=m(P()),pn=m(nt());s();i();Gt();qt();s();i();Pe();Gt();var cn=t=>async(e,o)=>{let r=o(),n=et(r),l=t.walletId||n,c=Eo(r,l)?.serverWalletType,p=await vt().getSignRequestHeaders({walletId:l}),d={txSource:$.NORMAL,accountId:l,walletType:c,...t};return await Co(d,{headers:p})};var je=({type:t,from:e,to:o,blockHash:r,coinAmount:n,mint:l,createAssociatedAddress:f,computeUnitPrice:c,computeUnitLimit:p,tokenStandard:d})=>{let g={type:t,payer:e,blockHash:r,from:e,to:o,amount:n,computeUnitPrice:c,computeUnitLimit:p},u;return t===vo.TRANSFER?u={...g}:u={...g,mint:l,createAssociatedAddress:f},d&&(u.tokenStandard=d),u},fn=({type:t,from:e,to:o,coinId:r,blockHash:n,coinAmount:l,mint:f=null,createAssociatedAddress:c,serviceCharge:p,computeUnitPrice:d,computeUnitLimit:g,txSource:u=$.NORMAL,extJson:h=JSON.stringify({}),walletId:x,tokenStandard:I})=>async F=>{let _=je({type:t,from:e,to:o,blockHash:n,coinAmount:l,mint:f,createAssociatedAddress:c,computeUnitPrice:d,computeUnitLimit:g,tokenStandard:I}),k=await F(Yo(_,e,x)),w=await fe(Qe,k);return await F(cn({signedTx:k,coinAmount:l,coinId:r,fromAdr:e,toAdr:o,serviceCharge:p,txSource:u,extJson:h,txHash:w}))};Gt();q();var Jn=()=>{let t=(0,gt.useDispatch)(),e=(0,gt.useSelector)(b),{tokenId:o,accountAddress:r,baseCoinId:n,image:l,name:f,chainName:c,extendProperty:p}=e,d=le(n),{chainId:g}=d,{tokenStandard:u}=p||{},h=nr(),x=(0,pn.useHistory)(),I=(0,y.useRef)(!1),F=(0,y.useRef)(),{name:_,keyringName:k}=(0,gt.useSelector)(At),{toAddress:w}=(0,gt.useSelector)(ot),[O,{setTrue:E,setFalse:K}]=(0,dn.useBoolean)(!0),[X,Q]=(0,y.useState)(""),[kt,zt]=(0,y.useState)("0"),{loading:lt,solanaFeeInfo:H}=ln({coinId:n,address:w},!0),Z=lt||O,{fee:yt,computeUnitPrice:Tt,feelimit:Ne}=H,{priorityFee:Je,priorityGasPrice:we,priorityGasLimit:Ce}=Ee(Ne,Tt,kt),W=Xt(yt,Je),Et=ye(W,d),vn=xe(W,d),An=(0,gt.useSelector)(et),[Nn,Ke]=(0,y.useState)(!1),wn=Ct({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Zt=(0,y.useMemo)(()=>Z?{msg:"",isEnough:!1}:X?{msg:X,isEnough:!0}:Se(d.coinAmountInt,W)?{msg:a("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:Se(d.coinAmountInt,Xt(W,H.selfRent))?{msg:a("walletextension_toast_text_reserve_rent_exempt",{number:Kt(H.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[Z,d.coinAmountInt,d.decimals,W,H.selfRent]),Xe=()=>{let R={from:r,to:w,coinId:n,serviceCharge:W,computeUnitPrice:we,computeUnitLimit:Ce,txSource:$.NFT,coinAmount:1,mint:o,createAssociatedAddress:!F.current,walletId:An,type:"tokenTransfer"};return u===4&&(R.type="mplTransfer",R.tokenStandard=4),R};return(0,y.useEffect)(()=>{o&&w&&g&&H.recentBlockhash&&(E(),Q(""),(async()=>{try{let ct=Xe();ct.blockHash=H.recentBlockhash;let be=je(ct),Cn=Fo({mint:o,address:w}),{SolWallet:bn}=await Mo(),Sn=await new bn().getSerializedTransaction({privateKey:"",data:be}),Fn=h({coinId:n,from:r,chainId:g,simulateTransactionParam:{transaction:Sn}}),[Pn,kn]=await Promise.all([Cn,Fn]);F.current=Pn?.data?.legal,zt(kn.firstUnitLimit)}catch(ct){Q(ct?.message||a("wallet_extension_alert_estimate_unavailable"))}finally{K()}})())},[o,r,w,g,H.recentBlockhash]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"metax-send-nft-detail"},y.default.createElement("div",{className:"metax-send-nft-detail__base--container"},y.default.createElement(bt,{src:l,startStatus:!0,alt:"",backupImage:wn,classnames:"metax-send-nft-detail__icon"}),y.default.createElement("div",{className:"metax-send-nft-detail__name-container"},y.default.createElement("div",{className:"metax-send-nft-detail__name"},f))),y.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${k} - ${_}`}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:j(r),canCopy:!0}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:j(w),canCopy:!0}),y.default.createElement("div",{className:"metax-send-nft-detail__hr"}),y.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:c}),y.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},y.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),y.default.createElement("div",{className:"metax-send-nft-confirm__value"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",vn),y.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},Et)))),!Z&&Zt.msg&&y.default.createElement("div",{className:"metax-send-nft-detail__error"},Zt.msg)),y.default.createElement(st.FooterActions,null,y.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),Zt.isEnough?x.goBack():x.replace(M)}},a("wallet_dapp_connection_btn_reject")),y.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:Z||Nn,disabled:Zt.msg,onClick:async()=>{if(!I.current){I.current=!0,Ke(!0);try{let R=await So({coinId:n,address:r},{fromAddr:r,toAddr:w}),ct=Xe();ct.blockHash=R;let be=await t(fn(ct));It({tx_id:be}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),x.replace(M)}catch(R){R.message!==ie&&G.error({title:a("wallet_home_toast_network_error")})}I.current=!1,Ke(!1)}}},a("wallet_set_password_btn_confirm"))))},un=Jn;var Kn=()=>{let{baseCoinId:t}=(0,_n.useSelector)(b);switch(t){case no:case Re:return Yt.default.createElement(Zr,null);case ht:return Yt.default.createElement(un,null);case V:return Yt.default.createElement($r,null);default:return Yt.default.createElement(sn,null)}},gn=Kn;var Xn=()=>{let t=(0,yn.useHistory)(),e=(0,xn.useDispatch)(),o=(0,$t.useCallback)(()=>{e(De()),t.replace(oe)},[]);return $t.default.createElement(pe,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?a("extension_aptos_nft_title_receiveconfirm"):a("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(B()),e(De()),t.goBack();return}o()}},$t.default.createElement(gn,null))},Tn=Xn;var Qn=()=>{let t=(0,xt.useHistory)(),e=(0,In.useDispatch)();return(0,hn.useMount)(()=>{t.location.state?e(Go(t.location.state?.nftInfo)):t.replace(M)}),Ae.default.createElement(xt.Switch,null,Ae.default.createElement(xt.Route,{exact:!0,path:oe,component:Sr}),Ae.default.createElement(xt.Route,{exact:!0,path:re,component:Tn}))},Mc=Qn;export{Mc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-NLUZNPYE.js.map
