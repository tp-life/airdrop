import{a as F}from"./chunk-6LE7Q5ED.js";import{e as k}from"./chunk-M75TVG7W.js";import{g as P}from"./chunk-GTSNHSPT.js";import{o as K}from"./chunk-A3FIPWG3.js";import{Vb as q,ac as L,qa as R,sb as w,tb as B}from"./chunk-NTISK7TT.js";import{a as b}from"./chunk-B75PPTYD.js";import{f as c,m as p,o as C}from"./chunk-UGZFXKPB.js";p();C();var v=c(b()),y=c(L());function U(t){let o=(0,y.useSelector)(w),i=(0,y.useSelector)(B),s=P(),f=t??s;return(0,v.useCallback)(r=>r?k({coins:r,walletIdentityMap:o,createdMap:i,walletId:f}):[],[o,i,f])}p();C();var d=c(b()),M=c(L()),I=c(K());var Q=t=>{let o=(0,d.useMemo)(()=>i=>F(i,{enableEmptyAccount:t}),[t]);return(0,M.useSelector)(o)},ne=(t,{beforeRequest:o,onFinally:i,reloadDeps:s,enableEmptyAccountCoins:f=!1,enable:r,filter:x=!0}={})=>{let D=Q(f),z=(0,M.useSelector)(q),g=(0,d.useRef)(null),A=U(),n=(0,d.useRef)({}),G=(0,I.useMemoizedFn)(async(e=0)=>{if(r===!1)return{list:[],pageNo:e,isNoMore:!0};let h=await o?.();if(h)return h;let S=0,l=null,u=null,W=e;t?.chainIds||(t.chainIds=D.map(m=>m.chainId));do{n.current[e]=n.current[e]||0;let m=++n.current[e];if(u=await R({...t,userUniqueId:z,pageNo:e}),m<n.current[e]||typeof n.current[e]>"u")return{list:[],pageNo:e};n.current[e]===m&&delete n.current[e],x?l=A(u):l=u,W++,S++}while(u&&u.length>0&&l?.length===0&&S<5);return{list:l,pageNo:W,isNoMore:l.length===0}}),a;typeof r=="boolean"?s?a=[...s,r]:a=[r]:a=s;let{data:j,loading:E,loadingMore:H,reload:J}=(0,I.useInfiniteScroll)(e=>G(e?.pageNo??0),{target:g,isNoMore:e=>e?.isNoMore,onFinally:i,reloadDeps:a});return{data:j,loading:E,loadingMore:H,listRef:g,reload:J}};export{U as a,ne as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-GPZQ3BGW.js.map
