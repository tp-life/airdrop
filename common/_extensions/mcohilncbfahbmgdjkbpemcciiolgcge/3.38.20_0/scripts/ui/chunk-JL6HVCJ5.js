import{a as Yo,b as zo,c as Qo,d as je,e as tr,f as cr,g as pr}from"./chunk-LFPJ5NQJ.js";import{a as jo}from"./chunk-ICBF62IT.js";import{a as Uo}from"./chunk-OG72ZLWD.js";import{a as nr,b as sr,c as ur,d as fr}from"./chunk-UVE477VQ.js";import{a as _r}from"./chunk-ZGCFZT4Y.js";import{a as ir,b as ar}from"./chunk-5UJKFVPM.js";import{a as qo,b as Zo}from"./chunk-L2N7QLF2.js";import{a as Vo}from"./chunk-H5XVQQ3S.js";import{a as or}from"./chunk-JMA73LC5.js";import{a as dr}from"./chunk-SOYTXJQE.js";import{a as mr}from"./chunk-7QD4BOUJ.js";import{a as er}from"./chunk-I32WVZM3.js";import{a as ze,b as $o}from"./chunk-IDME3QFB.js";import{a as lr}from"./chunk-M5O4WWY5.js";import{a as Xo,b as Jo}from"./chunk-VSJEBR4S.js";import{a as Ko,b as rr}from"./chunk-EKT7342N.js";import{a as _e}from"./chunk-7VELIVVA.js";import{a as Po}from"./chunk-2XYRURE2.js";import{a as Do}from"./chunk-M7CDJYYG.js";import{a as Fo,c as Mo}from"./chunk-SR5VKAMR.js";import{a as dt,c as Qt,d as Ho,e as Go}from"./chunk-2DZDNKWN.js";import{b as eo}from"./chunk-XTPLEY4T.js";import{o as Ue}from"./chunk-DD7QHK7G.js";import{b as wo}from"./chunk-6LE7Q5ED.js";import{a as No}from"./chunk-SJ65V67P.js";import{n as Ve,p as uo}from"./chunk-QE5VD2RK.js";import{b as de}from"./chunk-ZBSU6WZQ.js";import{g as ho}from"./chunk-S2V4K2JM.js";import{a as Ao}from"./chunk-A52XYJMT.js";import{a as bo}from"./chunk-YDUQEL3D.js";import{d as Ke}from"./chunk-BCT5GPKT.js";import{S as ut,V as Oe,Z as We,c as Yt}from"./chunk-FJBNQZUR.js";import{g as Ye,h as Wo}from"./chunk-XN45YXW3.js";import{g as wt,k as Lo,l as vo,m as Ro,n as Oo}from"./chunk-M75TVG7W.js";import{d as yt}from"./chunk-OQJOA7JT.js";import{a as So,e as Bo}from"./chunk-7OQVWENF.js";import{e as ko,g as J,h as fe}from"./chunk-GTSNHSPT.js";import{b as Ce}from"./chunk-PP43MII2.js";import{b as Jt}from"./chunk-DRPGNVVL.js";import{b as Io,c as To,d as xo}from"./chunk-3OMHZBKM.js";import{g as Eo}from"./chunk-A264YTOP.js";import{a as Co}from"./chunk-LRVKM4IV.js";import{$ as De,G as _t,W as gt,Wa as ro,_a as no,e as Te,hb as so,i as oo,ib as io,ja as He}from"./chunk-PVSNAFN3.js";import{b as H}from"./chunk-JYKQJVIF.js";import{b as _o,q as U}from"./chunk-GBQG32PI.js";import{o as ue}from"./chunk-A3FIPWG3.js";import{Jb as $e,Zb as co,_b as po,ac as S,ba as to,m as zt,ob as ao,s as jt,t as qt,tb as Ge,ub as lo,xb as mo,y as is}from"./chunk-NTISK7TT.js";import{a as X}from"./chunk-QZUNX5I4.js";import{e as fo,k as ht}from"./chunk-OG3IV3YP.js";import{Fa as Xt,Pa as ss}from"./chunk-KSCBZ3RY.js";import{d as F,f as Pe}from"./chunk-37O7OMRA.js";import{g as go}from"./chunk-35FUKWV2.js";import{a as yo}from"./chunk-DHNKVM4B.js";import{c as d}from"./chunk-TU7CE5HJ.js";import{Eb as ns,Fb as $t,Gb as Kt,Ib as Le,Ob as ve,Oc as ft,Rc as Zt,Uc as pe,W as Ee,Wc as Fe,Xc as Z,Y as le,Ya as Be,Yc as Me,a as Rt,b as ts,d as Ae,e as os,fc as ct,rb as Gt,wb as rs,zc as ce}from"./chunk-YILNSICT.js";import{G as V,L as re,N as Ie,c as Re,j as pt,n as Ut,o as q,y as me}from"./chunk-L4N7WJIQ.js";import{E as Ot,ka as Wt,pa as Ft}from"./chunk-LBCQTFOD.js";import{B as Se,M as Ht,N as v,d as Mt,l as Pt,v as Dt,w as h}from"./chunk-V63HWKAL.js";import{H as Vt,T as j,ca as C}from"./chunk-2EJYCNYZ.js";import{a as y}from"./chunk-B75PPTYD.js";import{f as c,m as o,o as r}from"./chunk-UGZFXKPB.js";o();r();var w=c(y()),lt=c(S()),Dn=c(X()),mt=c(ue());v();o();r();var M=c(y()),Ir=c(S()),Tr=c(ue());o();r();var qe=(t=>(t.ERR_NETWORK="ERR_NETWORK",t.ERR_SERVER_LIMIT="ERR_SERVER_LIMIT",t))(qe||{});Pe();o();r();var gr=(i=>(i.CREATE_FAIL_FROM_NETWORK_ERROR="CREATE_FAIL_FROM_NETWORK_ERROR",i.CREATE_FAIL_FROM_SERVER_ERROR="CREATE_FAIL_FROM_SERVER_ERROR",i.CREATE_FAIL_FROM_SERVER_LIMIT="CREATE_FAIL_FROM_SERVER_LIMIT",i.PENDING="PENDING",i))(gr||{}),T={...gr,...qe};o();r();var hr=c(y());ts();var yr=()=>(0,hr.useCallback)(e=>{try{let n=e===T.CREATE_FAIL_FROM_SERVER_ERROR?"Server":"Local";Rt.captureException(`CreateWalletToServerInHomePage-${n}`)}catch(n){console.log(n)}},[]);o();r();Pe();ft();Me();Fe();var Ze=c(y()),wr=c(S());var Er=()=>{let e=ko({keyringType:ce.MPC}),n=(0,wr.useSelector)(co),t=(0,Ze.useCallback)(async()=>{Promise.all(e.map(s=>{let i=s?.mpcId||"",l=s?.walletIdentities?.length-1;return pe(Z.syncMpcwallet,{mpcId:i,deriveIndex:l})})).then(s=>{F().setIsNeedSyncMpcIndex(!1)}).catch(s=>{console.log("syncMpcWallet error:")})},[e?.length]);(0,Ze.useEffect)(()=>{e?.length&&n&&t()},[e?.length,t,n])};var as=e=>{let{needSyncMap:n={},createdMap:t={}}=(0,Ir.useSelector)(({metamask:f})=>f),s=Boolean(t[e]),i=Boolean(n[e]),l=Vo(),m=!s||i||l,[p,_]=(0,M.useState)(m?T.PENDING:""),[g,a]=(0,M.useState)("");return(0,Tr.useUpdateEffect)(()=>{_(T.PENDING)},[e]),(0,M.useEffect)(()=>{!l&&s&&!i&&_("")},[l,s,i]),{errorMsg:g,errorType:p,isWalletCreated:s,isWalletNeedSync:i,setErrorMsg:a,setErrorType:_}},ls=e=>{let{walletId:n,setErrorMsg:t,setErrorType:s}=e,i=yr();return(0,M.useCallback)(async()=>{let m=await F().getWalletTypeCreated(n);s(T.PENDING);try{await F().createWalletToServer({walletId:n,walletType:m,noticeBackend:!0})}catch(p){switch(p?.message){case"ERR_NETWORK":s(T.CREATE_FAIL_FROM_NETWORK_ERROR),i();break;case"ERR_SERVER_LIMIT":s(T.CREATE_FAIL_FROM_SERVER_LIMIT),i(T.CREATE_FAIL_FROM_SERVER_LIMIT);break;default:s(T.CREATE_FAIL_FROM_SERVER_ERROR),t(p?.message);break}}},[i,n])},ms=e=>(0,M.useCallback)(async()=>{try{await F().syncWalletToServer(e)}catch{console.log("sync wallet error")}},[e]),cs=({walletId:e,setErrorType:n,isWalletCreated:t,isWalletNeedSync:s})=>{let i=(0,M.useCallback)(async()=>{try{await Jt()}catch(l){n(l?.message)}},[]);(0,M.useEffect)(()=>{(async()=>t&&!s&&(await i(),await F().getAccountKeys()))()},[i,t,s,e])},Cr=()=>{Er();let e=J(),{errorMsg:n,errorType:t,isWalletCreated:s,isWalletNeedSync:i,setErrorMsg:l,setErrorType:m}=as(e),p=ls({walletId:e,setErrorMsg:l,setErrorType:m}),_=ms(e);cs({walletId:e,setErrorType:m,isWalletCreated:s,isWalletNeedSync:i});let g=(0,M.useCallback)(async()=>{s?i&&await _():await p()},[p,s,i,_]);return(0,M.useEffect)(()=>{g()},[g]),[{errorType:t,errorMsg:n},{createWalletToServer:p}]};ss();o();r();o();r();var R=c(y());v();o();r();var Et=c(y());Pe();var xr=({walletIds:e})=>{let n=(0,Et.useCallback)(async()=>{try{return await F().fetchApprovalRisk({accountIds:e})}catch{return{}}},[e]),t=(0,Et.useCallback)(async()=>{await F().setApprovalRiskRemindLater()},[]);return{fetchApprovalRisk:n,remindLater:t}};o();r();var br={btn:"_btn_l5kiz_1"};var Nr=({walletId:e,onFetchApprovalRisk:n})=>{let[t,s]=R.default.useState(!1),i=bo(),l=No(),m=(0,R.useMemo)(()=>({walletIds:[e]}),[e]),{fetchApprovalRisk:p,remindLater:_}=xr(m);(0,R.useEffect)(()=>{(async()=>{let{approvalProjectList:f}=await p();f?.length>0&&(s(!0),n(!0)),n(!1)})()},[p,n]);let g=(0,R.useCallback)(()=>{s(!1),ut({go_to_website:!1}),_()},[_]),a=(0,R.useCallback)(()=>{let f=i.web3||`https://${l}/web3`;globalThis.open(f),s(!1),ut({go_to_website:!0})},[l,i.web3]);return R.default.createElement(q.Prompt,{visible:t,title:h("wallet_extension_risk_modaltitle_risk_warning"),text:h("wallet_extension_risk_modalsubtitle_risk_warning"),infoType:q.Prompt.INFO_TYPE.warn,hideCloseBtn:!0,alignBottom:!1,footer:R.default.createElement(R.default.Fragment,null,R.default.createElement(C,{category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.lg,block:!0,onClick:a},h("wallet_extension_risk_btn_official_website")),R.default.createElement(C,{category:C.CATEGORY.outline,type:C.TYPE.default,size:C.SIZE.lg,className:br.btn,block:!0,onClick:g},h("wallet_extension_risk_btn_remind_later")))})};o();r();v();var ge=c(y()),Br=c(S());o();r();var Ar=c(y());v();o();r();var kr={blue:"_blue_1j2vu_1"};var Sr=()=>{let e=qo();return Ar.default.createElement("span",{className:kr.blue,onClick:()=>{Zo(e)}},h("wallet_extension_home_notification_btn_switch_servers"))};var Lr=()=>{let e=J(),n=(0,Br.useSelector)(Ge)||{},t=Boolean(n[e]),s=(0,ge.useCallback)((m=5)=>{V.error({key:"networkError",title:h("wallet_extension_toast_asset_error_try_again"),duration:m,placement:V.DIRECTION.top,desc:ge.default.createElement(Sr,null)})},[]),i=(0,ge.useCallback)((m=5)=>{V.error({key:"serverLimitError",title:h("wallet_extension_home_notif_network_high_traffic"),duration:m,placement:V.DIRECTION.top})},[]),l=(0,ge.useCallback)((m,p=5)=>{V.error({key:"customAlert",title:m,duration:p,placement:V.DIRECTION.top})},[]);return{isWalletCreated:t,networkAlert:s,serverLimitAlert:i,customAlert:l}};o();r();var N=c(y());o();r();var It=c(y());o();r();var Xe={main:"_main_1li3n_1",line:"_line_1li3n_5",dot:"_dot_1li3n_11"};var vr=({total:e,activeIndex:n,className:t})=>It.default.createElement(d.FlexBox,{align:d.ALIGN.center,className:`${Xe.main} ${t}`},Array(e).fill("").map((s,i)=>It.default.createElement("div",{className:n===i?Xe.line:Xe.dot})));o();r();var Je=c(y());o();r();var xe={main:"_main_si9mr_1",icon:"_icon_si9mr_1",left:"_left_si9mr_11"};var Rr=({handlePrev:e,handleNext:n,className:t})=>Je.default.createElement(d.FlexBox,{align:d.ALIGN.center,className:`${xe.main} ${t}`},Je.default.createElement(H,{size:H.SIZE.xxs,onClick:e,icon:"okx-wallet-plugin-left",className:`${xe.icon} ${xe.left} `}),Je.default.createElement(H,{size:H.SIZE.xxs,onClick:n,icon:"okx-wallet-plugin-right",className:xe.icon}));o();r();var Q=c(y()),Qe=c(S());Ft();os();Me();Fe();var Or=()=>{let[e,n]=(0,Q.useState)([]),t=(0,Qe.useSelector)(Qt),s=(0,Qe.useDispatch)(),i=Ut();(0,Q.useEffect)(()=>{(async()=>{let{data:p=[]}=await Zt(Z.getBannerConfig),{uiData:_}=await Ae.get("uiData"),g=_?.closedBannerStore||[];s(dt({allData:p,closedBanners:g,theme:i})),n(p)})()},[i]);let l=(0,Q.useMemo)(()=>t.length,[t]),m=(0,Q.useCallback)(async p=>{let{uiData:_}=await Ae.get("uiData"),{closedBannerStore:g=[]}=_;g.push(p?.id);let a=Ot(g,e,(f,E)=>f===E?.id);await Ae.set({uiData:{..._??{},closedBannerStore:a}}),s(dt({allData:e,closedBanners:a,theme:i}))},[e,i]);return{bannerList:t,total:l,handleClose:m}};o();r();var Wr=c(y()),Fr=c(X());var Mr=()=>{let e=(0,Fr.useHistory)();return{link:(0,Wr.useCallback)(t=>{switch(Oe({click_close:!1,banner_id:t.id}),t.urlType){case 2:{let s=t.url.replace("wallet://","");e.push(s);break}case 1:globalThis.open(t.url);break;default:break}},[])}};o();r();var G={"retina-border-basic":"_retina-border-basic_60npk_1",retinaBorderBasic:"_retina-border-basic_60npk_1",main:"_main_60npk_29",carousel:"_carousel_60npk_63",closeWrapper:"_closeWrapper_60npk_67",banner:"_banner_60npk_75",content:"_content_60npk_80",left:"_left_60npk_83",title:"_title_60npk_87",icon:"_icon_60npk_90",buttonIndex:"_buttonIndex_60npk_95",switch:"_switch_60npk_100"};var Pr=()=>{let[e,n]=(0,N.useState)(0),[t,s]=(0,N.useState)(!1),i=N.default.useRef(null),{link:l}=Mr(),{bannerList:m,total:p,handleClose:_}=Or();return p===0?null:N.default.createElement(d.FlexBox,{className:G.main,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},N.default.createElement(pt,{touchSwitch:p>1,className:G.carousel,autoplay:p>1?5e3:!1,ref:i,loop:p>1,navigation:!1,showIndicators:!1,onChange:g=>{n(g)}},m?.map(g=>N.default.createElement(pt.Slide,null,N.default.createElement(d.FlexBox,{className:G.banner},N.default.createElement(d.FlexBox,{onClick:()=>l(g),className:G.content,align:p===1?d.ALIGN.center:d.ALIGN.start},N.default.createElement("div",{className:G.left},N.default.createElement(U.Text,{ellipsis:{rows:2},size:U.SIZE.sm,strong:500,className:G.title},g.title)),N.default.createElement(H,{type:H.TYPE.image,className:G.icon,src:g.img})),N.default.createElement(d.FlexBox,{align:d.ALIGN.center,className:G.closeWrapper,onClick:()=>{Oe({click_close:!0,banner_id:g.id}),_(g)}},N.default.createElement(j,{className:"okx-wallet-plugin-close"})))))),p>1&&N.default.createElement("div",null,t?N.default.createElement(Rr,{className:G.switch,handlePrev:()=>i.current?.prev(),handleNext:()=>i.current?.next()}):N.default.createElement(vr,{total:p,activeIndex:e,className:G.buttonIndex})))};o();r();var et=c(y());o();r();var Dr={content:"_content_o6jn4_1",wrapper:"_wrapper_o6jn4_9",img:"_img_o6jn4_12",title:"_title_o6jn4_16",text:"_text_o6jn4_19"};o();r();var D=c(y());o();r();var P={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var ps=()=>D.default.createElement(d.FlexBox,{direction:d.DIRECTION.vertical,align:d.ALIGN.unset,className:P.skeletonWrapper},D.default.createElement(re.Input,{active:!0,className:P.tab}),D.default.createElement(d.FlexBox,{direction:d.DIRECTION.vertical,justify:"space-around",className:P.tokenList},Array(5).fill("").map((e,n)=>D.default.createElement(d.FlexBox,{className:P.token,align:d.ALIGN.center,key:n},D.default.createElement(re.Avatar,{active:!0,className:P.logo}),D.default.createElement(d.FlexBox,{direction:d.DIRECTION.vertical,className:P.middle},D.default.createElement(re.Input,{active:!0,className:P.symbol}),D.default.createElement(re.Input,{active:!0,className:P.chain})),D.default.createElement(d.FlexBox,{direction:d.DIRECTION.vertical,align:d.ALIGN.end,className:P.right},D.default.createElement(re.Input,{active:!0,className:P.number}),D.default.createElement(re.Input,{active:!0,className:P.currency})))))),Hr=ps;o();r();var $r=c(y());v();o();r();var Gr={wrapper:"_wrapper_16oot_1"};var Kr=({tryAgain:e})=>$r.default.createElement(me.State,{title:h("wallet_extension_home_title_network_unavailable"),type:me.State.TYPE.noNetwork,description:h("wallet_extension_home_text_check_network_error"),buttonText:h("wallet_extension_home_btn_try_again"),onButtonClick:()=>{e&&e()},className:Gr.wrapper});var Vr=({errorType:e,tryAgain:n})=>{let t=e===T.CREATE_FAIL_FROM_NETWORK_ERROR||e===T.CREATE_FAIL_FROM_SERVER_ERROR;if(!t&&e!==T.PENDING)return null;let s=()=>{switch(e){case T.CREATE_FAIL_FROM_NETWORK_ERROR:case T.CREATE_FAIL_FROM_SERVER_ERROR:return et.default.createElement(Kr,{tryAgain:n});case T.PENDING:return et.default.createElement(Hr,null);default:return null}};return et.default.createElement(d.FlexBox,{align:d.ALIGN.center,justify:t?d.ALIGN.center:d.ALIGN.unset,direction:d.DIRECTION.vertical,className:Dr.content},s())};o();r();var B=c(y()),hn=c(S());o();r();var tt=c(y());var Yr=c(S());var zr=()=>{let[e,n]=(0,tt.useState)([]),t=de("nft-operate"),i=(0,Yr.useSelector)(lo)?.account?.aptos||"",l=Xo();return Jo(),(0,tt.useEffect)(()=>{(!t||t.data.status===2)&&i&&to(i).then(m=>{n(m.list)}),t?.data?.status===2&&setTimeout(()=>{l()},3e3)},[t,l]),{aptosNftOffers:e,aptosAddress:i,fetchNftListData:l}};o();r();var k=c(y()),fn=c(S()),dn=c(X());v();o();r();var qr=c(is());o();r();ct();var jr=({addedCoinIdsSet:e,defaultBaseCoinsCoinIdsSet:n,balanceCoin:t,isDefault:s})=>{let i=e.has(t.coinId),l=n.has(t.coinId)||s||t.isDefault,m=i||l,p=ve(t.currencyAmountUSD,"1");return m||p};var us={showCoins:[],hiddenCoins:[]},Zr=(0,qr.createSelector)(vo,Lo,Oo,Ro,(e,n,t,s)=>{if(!e.length)return us;let i=wt(e,p=>!t.has(p.coinId),{sort:!1}).results,{results:l,uselessResults:m}=wt(i,(p,_)=>jr({defaultBaseCoinsCoinIdsSet:s,addedCoinIdsSet:n,balanceCoin:p,isDefault:_}));return{showCoins:l,hiddenCoins:m}});o();r();var Xr=c(S());function fs(){let e=(0,Xr.useDispatch)(),[n]=To(Io.hiddenSmallAssets),t=m=>{e(Eo(m))};return[n,{toggle:()=>{t(!n)},hide:()=>{t(!0)},show:()=>{t(!1)},setValue:t}]}var Jr=fs;o();r();var en=c(y()),Tt=c(S());v();ct();var ds=e=>e.map(n=>({...n,coinAmount:null})),Qr=e=>e.map(n=>{try{let t=new Ht(n.image),{query:s}=t;if(!s.get("x-oss-process"))return s.set("x-oss-process","image/resize,m_lfit,w_100,h_100/ignore-error,1"),{...n,image:t.get()}}catch{}return n}),Ct=e=>{let n=So(),{currentNetworkUniqueId:t}=_e(),s=(0,Tt.useSelector)(Ge),i=(0,Tt.useSelector)(po),l=Boolean(s[n]),m=Boolean(i[n]);return(!l||m)&&(e=ds(e)),(0,en.useMemo)(()=>{if(t==="")return Qr(e);let _=e.filter(a=>(a?.childrenCoin||[]).find(f=>f.chainId===Number(t))||a.chainId===Number(t)),g=[];return _.forEach(a=>{if(a?.aggregation){let f=(a?.childrenCoin||[]).filter(b=>b.chainId===Number(t)),E=f.reduce((b,I)=>Le(b,I.coinAmount),"0"),x=f.reduce((b,I)=>Le(b,I.currencyAmount),"0"),A=f.reduce((b,I)=>Le(b,I.currencyAmountUSD),"0");g.push({...a,childrenCoin:f,coinAmount:E,currencyAmount:x,currencyAmountUSD:A})}else g.push(a)}),g=g.map(a=>({...a,coinAmount:a?.coinAmount===null?"--":Pt.truncate(a?.coinAmount,6,!1)})).sort((a,f)=>ve(f.currencyAmount,a.currencyAmount)?1:-1),Qr(g)},[e,t])};o();r();var he=c(y()),sn=c(S()),an=c(ue());o();r();var tn=c(ue());var on=()=>{let e=Ye();return(0,tn.useCreation)(()=>Object.keys(e).reduce((n,t)=>{let s=e?.[t]?.priceCoinId;return n[t]=s,n},{}),[e])};ct();o();r();var xt=c(S()),rn=c(X());var nn=()=>{let{currentNetworkUniqueId:e}=(0,xt.useSelector)(Ke),n=Wo(),t=(0,rn.useHistory)(),s=(0,xt.useSelector)(eo),i=J(),l=s?.[i],m=a=>{if(l?.[`${a.symbol}-${a.coinId}`])return l[`${a.symbol}-${a.coinId}`];let f=Ce({nearAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Te}${f}`},p=a=>{if(l?.[`${a.symbol}-${a.coinId}`])return l[`${a.symbol}-${a.coinId}`];let f=Ce({btcAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Te}${f}`},_=async a=>{if(e===""&&l?.[a.symbol])return l[a.symbol];let E=(e!==""?a.childrenCoin.find(A=>A.chainId===Number(e)):null)?.coinId||"",x=Ce({aggregation:!0,coinSymbol:a.symbol,coinId:E});return`${Te}${x}`};return{jumpCoinDetailPage:async a=>{let f="";if(a.aggregation)f=await _(a);else if(jt(a))f=p(a);else if(qt(a))f=m(a);else{let E=Ce({coinId:a.coinId});f=`${Te}${E}`}f&&t.push(f)},coinToCurrencyRate:n}};function _s({dataSource:e,hiddenAssets:n,onMount:t}){let{jumpCoinDetailPage:s,coinToCurrencyRate:i}=nn(),l=on(),m=ar(),p=Ye(),{currentNetworkUniqueId:_}=(0,sn.useSelector)(Ke),g=(0,an.useMemoizedFn)(()=>{t?.()});(0,he.useLayoutEffect)(()=>{g()},[g]);let a=f=>{let{aggregation:E,coinId:x,coinAmount:A,currencyAmount:b}=f,I=x;E&&!_&&(I=l?.[x]||x);let W=i?.[I]||"0",$=E&&!_?Kt(A,W):b,K=p?.[I]?.coinPriceChangePercent24h??void 0;return{price:W,currencyAmount:$,pricePercent:K}};return he.default.createElement(yt,{renderEmpty:!1,dataSource:e,renderItem:f=>{let{image:E,symbol:x,coinAmount:A,riskType:b}=f,I=m(f),{price:W,currencyAmount:$,pricePercent:K}=a(f);return he.default.createElement(yt.Coin,{icon:{lazyload:!0,src:E,type:_o.image,defaultIcon:fo},price:W,pricePercent:K,symbol:x,hidden:n,balance:I?A:void 0,market:I?$:void 0,onClick:async()=>{I&&await s(f)},riskType:b},!I&&he.default.createElement(ir,{coinId:f?.coinId}))}})}var bt=_s;o();r();var Y=c(y());var mn=c(X());Fe();Me();Be();v();o();r();var ln={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function gs(){let[e,n]=(0,Y.useState)(!1),[t,s]=(0,Y.useState)({}),i=(0,mn.useHistory)(),l=Ao(Ee),m=de("dex-across-order-info"),{currentNetworkUniqueId:p}=_e(),_=Fo({localType:Ee})||[],g=Number(p)===_?.[0]?.realChainId||p==="";return(0,Y.useEffect)(()=>{(()=>{pe(Z.postPendingFacetOrder,{userWalletAddresses:l,chainId:_?.[0]?.realChainId||1}).then(f=>{if(f.data?.length>0){if(g)n(!0);else{n(!1);return}let E=f.data.filter(x=>Number(x.status)===11&&Number(x.specialOrderType)===3);E?.length>0?(s({orderId:E[0].orderId,toAmount:E[0].toAmount,toTokenSymbol:E[0].toTokenSymbol}),n(!0)):(s(""),n(!1))}else s({}),n(!1)}).catch(f=>{console.log("err",f),s({}),n(!1)})})()},[m,p,g]),e?Y.default.createElement(d.Box,{className:ln.root},Y.default.createElement(Re,{desc:Y.default.createElement("div",null,h("swaptrade_extension_reminder_desc_pending_withdrawal",{token:t?.toTokenSymbol,amount:t?.toAmount}),Y.default.createElement(Re.Link,{onClick:a=>{a.preventDefault(),i.push(`${ro}/${t?.orderId}`)}},h("swaptrade_extension_cell_btn_confirm_withdrawal"))),type:Re.TYPE.info,onClose:()=>{n(!1)}})):null}var cn=gs;o();r();var ot=c(y()),pn=c(Vt());v();o();r();var Nt={root:"_root_1e5k7_1",icon:"_icon_1e5k7_12"};function hs({length:e,toggle:n,value:t}){let s=t?"okds-arrow-chevron-down-md":"okds-arrow-chevron-up-md",i=h("wallet_extension_main_toggle_hide",{num:Mt.formatNumber(e)});return ot.default.createElement("div",{onClick:n,className:Nt.root},ot.default.createElement("div",null,i),ot.default.createElement(j,{className:(0,pn.default)(s,Nt.icon)}))}var un=hs;o();r();var ye={button:"_button_blxw2_1",showButton:"_showButton_blxw2_5",coinList:"_coinList_blxw2_13",icon:"_icon_blxw2_16",empty:"_empty_blxw2_20"};var ys=190,kt=({scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:s})=>{let{showCoins:i,hiddenCoins:l}=(0,fn.useSelector)(Zr),m=Ct(i),p=Ct(l),[_,{toggle:g}]=Jr(),a=(0,k.useRef)(e),f=()=>{a.current=e,g()},E=()=>{requestAnimationFrame(()=>{s(a.current)})},{fetch:x}=sr();or(x,{cacheKey:nr,staleTime:1e3*60*10});let A=(0,dn.useHistory)(),b=m.length,I=p.length,W=(0,k.useMemo)(()=>e<=ys?!1:b+(_?0:I)>8,[_,I,b,e]),{paddingBottom:$,buttonPaddingBottom:K,absoluteBottom:L}=rr({isButtonAbsolute:W,backupHeight:t});return b===0&&I===0?k.default.createElement("div",{style:{paddingBottom:$+t}},k.default.createElement(me.State,{className:ye.empty,type:me.State.TYPE.noRecord,title:h("extension_wallet_home_text_no_added_currencies"),buttonText:h("extension_wallet_home_btn_add_now"),onButtonClick:()=>{A.push(_t)}})):k.default.createElement("div",null,k.default.createElement("div",{style:{paddingBottom:$},className:ye.coinList},k.default.createElement(cn,null),k.default.createElement(bt,{dataSource:m,hiddenAssets:n}),I>0&&k.default.createElement(k.default.Fragment,null,k.default.createElement(un,{length:I,toggle:f,value:_}),!_&&k.default.createElement(bt,{onMount:E,dataSource:p,hiddenAssets:n}))),k.default.createElement("div",{className:`${W?ye.showButton:""} ${ye.button}`,style:{bottom:L,paddingBottom:K}},k.default.createElement(C,{circle:!0,category:C.CATEGORY.outline,type:C.TYPE.secondary,size:C.SIZE.md,onClick:()=>{A.push(_t)}},k.default.createElement(j,{className:`okx-wallet-plugin-edit-wallet ${ye.icon}`}),h("wallet_home_btn_manage_crypto"))))};o();r();var ne=c(y());v();var nt=c(S());o();r();var rt={homeTabs:"_homeTabs_o2bwr_1",homeTab:"_homeTab_o2bwr_1",active:"_active_o2bwr_13"};var _n=({aptosNftOffers:e})=>{let n=(0,nt.useSelector)(Ve),t=(0,nt.useDispatch)(),s=je(We),i=(0,ne.useMemo)(()=>[h("wallet_extension_nft_tab_coins"),ne.default.createElement("div",null,h("wallet_extension_nft_tab_nfts"),e.length>0&&ne.default.createElement("span",{className:"new-home-nft-aptos-notify"})),h("wallet_extension_tab_defi")],[e]);return ne.default.createElement(Ie,{noLine:!0,className:rt.homeTabs,activeId:n,size:Ie.SIZE.lg,color:Ie.COLOR.grey,paneSpacing:0,onChange:l=>{let m;switch(l){case 1:m="crypto";break;case 2:m="nfts";break;case 3:m="defi";break;default:break}s({homepage:m}),t(uo.setActiveId({id:l}))}},i.map((l,m)=>ne.default.createElement(Ie.TabPane,{className:`${rt.homeTab} ${+n===m+1?rt.active:""}`,tab:l,key:m,id:m+1})))};o();r();var gn={main:"_main_bbmgq_1"};var ws=(0,B.lazy)(()=>import("./Nft-XQKSBDAB.js")),Es=(0,B.lazy)(()=>import("./DefiList-6R2JWPLA.js")),yn=({scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s,changeScrollTop:i})=>{let l=(0,hn.useSelector)(Ve),{aptosNftOffers:m,aptosAddress:p}=zr(),_=(0,B.useMemo)(()=>{switch(l){case 1:return B.default.createElement(kt,{scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:i});case 2:return B.default.createElement(B.Suspense,{fallback:null},B.default.createElement(ws,{scrollTop:e,aptosNftOffers:m,aptosAddress:p,backupHeight:t}));case 3:return B.default.createElement(B.Suspense,{fallback:null},B.default.createElement(Es,{scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s}));default:return B.default.createElement(kt,{scrollTop:e,hiddenAssets:n,backupHeight:t})}},[l,p,m,t,n,e,s]);return B.default.createElement("div",{className:gn.main},B.default.createElement(_n,{aptosNftOffers:m}),_)};o();r();var ee=c(y());v();o();r();var se={iconAniWrapper:"_iconAniWrapper_piy3e_20",iconItem:"_iconItem_piy3e_29",text:"_text_piy3e_35",moveOutAnimation:"_moveOutAnimation_piy3e_38",moveOut:"_moveOut_piy3e_38",moveInAnimation:"_moveInAnimation_piy3e_42",moveIn:"_moveIn_piy3e_42",iconTitle:"_iconTitle_piy3e_54"};var wn=({width:e})=>ee.default.createElement(d.FlexBox,{align:d.ALIGN.center,direction:d.DIRECTION.vertical,style:{width:e}},ee.default.createElement(d.Box,{className:se.iconAniWrapper},ee.default.createElement(d.FlexBox,{align:d.ALIGN.center,justify:d.ALIGN.center,className:`${se.iconItem} ${se.moveInAnimation}`},ee.default.createElement(H,{className:"okx-wallet-plugin-toolkit"})),ee.default.createElement(d.FlexBox,{align:d.ALIGN.center,justify:d.ALIGN.center,direction:d.DIRECTION.vertical,className:`${se.iconItem} ${se.moveOutAnimation}`},ee.default.createElement(H,{className:"okx-wallet-plugin-swap-for-gas"}))),ee.default.createElement(U.Text,{className:se.iconTitle,ellipsis:!0,size:U.SIZE.xs},h("wallet_extension_home_text_toolkit")));o();r();var O=c(y()),it=c(S()),xn=c(X()),bn=c(ue()),Nn=c(Vt());v();rs();o();r();var st={"retina-border-basic":"_retina-border-basic_1a6hn_1",retinaBorderBasic:"_retina-border-basic_1a6hn_1",main:"_main_1a6hn_29",dot:"_dot_1a6hn_64",title:"_title_1a6hn_73",icon:"_icon_1a6hn_77"};o();r();var En=c(y());Be();Me();Fe();var In=c(ue());Pe();var Tn=c(S());var Cn=()=>{let e=Bo(le),n=(0,En.useMemo)(()=>e?.map(i=>i.address)||[],[e]),t=(0,Tn.useSelector)(ao);return(0,In.useMemoizedFn)(async()=>{try{let i=await F().getRequestHeaders({walletId:t,needSign:!0,currency:"usd"}),{data:l=[]}=await pe(Z.getBtcPendingTx,{txPendingCountReqList:[{addressList:n,chainId:0}]},{headers:i});return l[0]}catch{return{}}})};var kn=()=>{let[e,n]=(0,O.useState)({}),t=(0,it.useSelector)(Ho),s=(0,xn.useHistory)(),i=(0,it.useDispatch)(),l=Cn(),m=(0,bn.useMemoizedFn)(async()=>{let a=await l();n(a)});(0,O.useEffect)(()=>{t&&m()},[t]);let p=de("wallet-notice");(0,O.useEffect)(()=>{p&&m()},[p,m]);let _=(0,O.useMemo)(()=>!e||typeof e?.pendingCount!="number"?"":e?.hasMoreCount?h("extension_defi_mid_notif_btc_over100_receive",{minAmt:"100"}):e?.pendingCount&&e?.pendingCount>0?h("extension_defi_mid_notif_btc100_receive",{extension_defi_mid_notif_btc100_receive:e?.pendingCount,maxAmt:e?.pendingCount}):"",[e]),g=()=>{i(Ue({mainCoinId:Gt})),s.push(`${He}?filterByChain=${0}`)};return!e||typeof e?.pendingCount!="number"||e?.pendingCount===0?null:O.default.createElement(d.FlexBox,{className:st.main,align:"center",justify:"space-between",onClick:g},O.default.createElement(d.FlexBox,{align:"center"},O.default.createElement("div",{className:st.dot}),O.default.createElement(U.Text,{type:U.TYPE.default,size:U.SIZE.xs},_)),O.default.createElement(j,{className:(0,Nn.default)("okx-wallet-plugin-right",st.icon)}))};o();r();var z=c(y()),be=c(S()),Sn=c(X());Be();o();r();var Ts=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"wallet_extension_homepage_feature_name_swap",icon:"okx-wallet-plugin-swap-2",type:"DEX",disabledText:""},{text:"wallet_extension_header_text_history",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}],An=Ts;var Bn=()=>{let e=(0,be.useSelector)($e),n=ze(),t=(0,Sn.useHistory)(),s=(0,be.useDispatch)(),i=mr(),m=Mo({networkId:i?.id?String(i?.id):void 0})?.coinId,{baseCoin:p={}}=Po(m,!0),_=fr(p,"",ur.home),g=(0,be.useSelector)(mo),a=(0,z.useMemo)(()=>{let{initialType:L,accountMap:ke}=g;if(yo(L)){let oe=Object.keys(ke);return![le,Ee].some(ae=>oe.includes(ae))}return!1},[g]),f=(0,z.useCallback)(()=>{e?n():t.push(`${gt}?type=${ht.RECEIVE}`)},[t,e,n]),E=(0,z.useCallback)(()=>{p?.coinId&&s(Ue({mainCoinId:p?.coinId})),t.push(He)},[p?.coinId,s,t]),{hasNewFeature:x}=er(),A=(0,z.useCallback)(()=>{t.push(oo)},[t]),b=(0,z.useCallback)(()=>{t.push(`${gt}?type=${ht.SEND}`)},[t]),I=je(We),{impactHaptic:W}=Co(),$=(0,z.useCallback)(L=>{switch(W(),L.type){case"SEND":{I({homepage:"send"}),b();break}case"RECEIVE":{I({homepage:"receive"}),f();break}case"DEX":{I({homepage:"trade"}),_();break}case"HISTORY":{I({homepage:"history"}),E();break}case"DAPP_CONNECT":{A();break}case"GIFT":{I({homepage:"gift"}),Yt(),t.push(so+io);break}default:break}},[f,_,E,A,b,t,W,I]),K=(0,z.useMemo)(()=>An.map(L=>L.type==="DEX"?{...L,disabled:a}:L.type==="MORE"?{...L,hasNewFeature:x}:L),[a,x]);return{clickHandle:$,iconOptions:K}};o();r();var at=c(y()),vn=c(S());o();r();var Ln=c(y());Ft();ft();Be();function At(){let e=fe();return(0,Ln.useMemo)(()=>{let n=dr.find(t=>{let s=e?.account?.[t],i=Wt(Object.values(e?.account??{}));return t===le?!1:s&&e.keyringIdentityType===ce.PRIVATE_KEY&&i.length===1&&i[0]===s});return n?{isFactionPKAccount:!0,chain:n}:{isFactionPKAccount:!1}},[e])}var Rn=()=>{let e=fe(),{isFactionPKAccount:n,chain:t}=At(),{currentNetworkUniqueId:s}=_e(),{addresses:i=[],hotAddresses:l=[]}=(0,vn.useSelector)(wo),m=(0,at.useCallback)(a=>n?a.localType===t:s===""?!0:a.chainId===Number(s),[s,n,t]),{filterAddress:p,filterHotAddress:_}=(0,at.useMemo)(()=>({filterAddress:i.filter(m),filterHotAddress:l.filter(m)}),[i,m,l]),g=p.length===1;return{filterAddress:p,filterHotAddress:_,address:g?p[0]?.address:"",chainName:g?p[0]?.chainName:"",titleLeft:e?.keyringName,titleRight:g?e?.walletName:"",subTitle:g?zt(p[0]?.address):e?.walletName,isFactionPKAccount:n}};o();r();var On=c(y()),Wn=c(X());v();ft();var Fn=({address:e})=>{let n=(0,Wn.useHistory)(),t=fe(),s=()=>{n.push(`${De}?fromHome=1`)};return t?.keyringIdentityType===ce.PRIVATE_KEY&&e==="UQCiCTSKMQTIF8VSGc3F7DxWxJrV09SAbJzc1YvWZ5pgiQAP"?On.default.createElement(q.Prompt,{visible:!0,infoType:q.Prompt.INFO_TYPE.warn,title:h("wallet_extension_errormsg_unavailable_address"),confirmText:h("wallet_extension_connect_btn_switch_wallet"),onConfirm:s,hideCloseBtn:!0,alignBottom:!1,maskClosable:!1,confirmBtnProps:{type:C.TYPE.highlight,size:C.SIZE.lg}}):null};o();r();var te=c(y());o();r();o();r();var St={version:"3.33.51",web:!0,extension:!1,title:"wallet_extension_main_popup_shortcut",description:"wallet_extension_main_toast_shortcut",imgLight:"/cdn/assets/imgs/2412/EEC46FC3302CEC12.svg",imgDark:"/cdn/assets/imgs/2412/026A26E3C0C3D875.svg",mainButtonText:"commonall_text_btn_ok_passive"};o();r();var Ne=c(y());v();ns();var Mn=(e,n,t)=>{let{version:s,imgLight:i,imgDark:l,title:m,description:p,mainButtonText:_}=e,g=go({dark:l,light:i}),[a,f]=(0,Ne.useState)(!1),E=Dt.init({project:"whatsNew"});return(0,Ne.useEffect)(()=>{if(!n){f(!1);return}if(s!==$t.version){f(!1);return}if(E.get("whatsNewVersion")===s){f(!1);return}if(typeof t=="boolean"&&!t){f(!1);return}f(!0)},[E,t,s,n]),(0,Ne.useEffect)(()=>{a&&E.set("whatsNewVersion",s)},[a,E,s]),{visible:a,title:Se(m),description:Se(p),img:g,mainButtonText:Se(_),onMainButtonClick:()=>{f(!1)}}};function Bt(){let{extension:e}=St;return Mn(St,e)}o();r();var ie={"whats-new-img":"_whats-new-img_fow6p_1",whatsNewImg:"_whats-new-img_fow6p_1","whats-new-box":"_whats-new-box_fow6p_5",whatsNewBox:"_whats-new-box_fow6p_5","whats-new-title":"_whats-new-title_fow6p_10",whatsNewTitle:"_whats-new-title_fow6p_10","whats-new-desc":"_whats-new-desc_fow6p_15",whatsNewDesc:"_whats-new-desc_fow6p_15","whats-new-footer":"_whats-new-footer_fow6p_20",whatsNewFooter:"_whats-new-footer_fow6p_20","whats-new-dialog":"_whats-new-dialog_fow6p_23",whatsNewDialog:"_whats-new-dialog_fow6p_23"};var Cs=({shouldWhatsNewShow:e})=>{let{visible:n,title:t,description:s,img:i,mainButtonText:l,onMainButtonClick:m}=Bt();return te.default.createElement(q,{whiteboard:!0,visible:e&&n,hideCloseBtn:!0,noMargin:!1,alignBottom:!1,windowClass:ie.whatsNewDialog},te.default.createElement("img",{className:ie.whatsNewImg,src:i,alt:""}),te.default.createElement("div",{className:ie.whatsNewBox},te.default.createElement("h2",{className:ie.whatsNewTitle},t),te.default.createElement("p",{className:ie.whatsNewDesc},s),te.default.createElement("div",{className:ie.whatsNewFooter},te.default.createElement(C,{category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.md,onClick:m,block:!0},l))))},Pn=Cs;var xs=()=>{let e=(0,lt.useSelector)(ho),{isWalletCreated:n,networkAlert:t,serverLimitAlert:s,customAlert:i}=Lr(),l=J(),{walletAsset:m}=(0,lt.useSelector)(Go),p=ze(),[{errorType:_,errorMsg:g},{createWalletToServer:a}]=Cr(),f=Yo(),[E,x]=xo(),A=(0,w.useRef)(null),[b,I]=(0,w.useState)(0),[W,$]=(0,w.useState)(!1),{isNeedShowDisconnectUpgrade:K,setDisconnectUpgrade:L}=Uo(),ke=(0,w.useCallback)(()=>{K&&(V.success({title:h("wallet_extension_card_subtitle_disconnect_update")}),L())},[K,L]),oe=(0,lt.useSelector)($e),ae=(0,w.useRef)(null),Lt=(0,Dn.useHistory)(),[Hn,Gn]=(0,w.useState)(0),{clickHandle:$n,iconOptions:Kn}=Bn();(0,w.useEffect)(()=>{switch(_){case T.CREATE_FAIL_FROM_NETWORK_ERROR:case T.ERR_NETWORK:t();break;case T.CREATE_FAIL_FROM_SERVER_LIMIT:case T.ERR_SERVER_LIMIT:s();break;case T.CREATE_FAIL_FROM_SERVER_ERROR:i(g);break;default:break}},[i,g,_,t,s]),(0,mt.useMount)(()=>{Xt()});let{run:Vn}=(0,mt.useDebounceFn)(()=>{Gn(ae.current?.scrollTop||0)},{wait:50,maxWait:50});_r();let{titleLeft:Un,titleRight:Yn,subTitle:zn,address:vt,chainName:jn,filterAddress:qn,filterHotAddress:Zn,isFactionPKAccount:Xn}=Rn(),Jn=async()=>{_!==T.PENDING&&(V.destroyAll(),await a())};(0,w.useLayoutEffect)(()=>{A.current&&oe&&n&&I(A.current?.clientHeight||0)},[oe,n]);let Qn=we=>{ae.current&&(ae.current.scrollTop=we)},es=(0,w.useCallback)(we=>{$(!we)},[]);return w.default.createElement("div",{id:lr,className:"ok-home-page main-container",ref:ae,onScroll:()=>{Vn()}},w.default.createElement(cr,{titleLeft:Un,titleRight:Yn,subTitle:zn,address:vt,chainName:jn,filterAddress:qn,filterHotAddress:Zn,isNotBackupWallet:oe,isFactionPKAccount:Xn}),w.default.createElement(Qo,{balance:m,hiddenAssets:E,onToggleHiddenAssets:x}),w.default.createElement(tr,{clickHandle:$n,iconOptions:Kn,customMore:we=>w.default.createElement(wn,{width:we})}),w.default.createElement(kn,null),w.default.createElement(Pr,null),w.default.createElement(yn,{scrollTop:Hn,hiddenAssets:E,backupHeight:oe?b+24:0,isWalletCreated:n,changeScrollTop:Qn}),n&&w.default.createElement("div",{ref:A},w.default.createElement($o,{offsetBottom:24+Ko})),w.default.createElement(zo,{disconnectCallback:ke}),n&&w.default.createElement(pr,{showBackup:()=>{p({text:h("wallet_dapp_conncetion_alert_backup_wallet")},e)}}),f&&w.default.createElement(jo,{actionMap:{["RECOVER"]:()=>{Lt.push(`${no}?action=${Do.RECOVER}&walletId=${l}`)},["SWITCH_WALLET"]:()=>{Lt.push(`${De}?fromHome=1`)}}}),w.default.createElement(Nr,{walletId:l,onFetchApprovalRisk:es}),w.default.createElement(Vr,{tryAgain:Jn,errorType:_}),w.default.createElement(Fn,{address:vt}),w.default.createElement(Pn,{shouldWhatsNewShow:W}))},Ed=xs;export{Ed as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JL6HVCJ5.js.map
