import{a as gr}from"./chunk-TNGW2OJP.js";import{a as G}from"./chunk-CNX3VVOM.js";import{a as Cr}from"./chunk-5SOXH2CS.js";import{a as Tr}from"./chunk-L5MAEEVU.js";import{b as pr,c as fe,m as lr,n as fr,o as dr}from"./chunk-MOISJT5B.js";import{a as tr}from"./chunk-OSVZOFON.js";import{a as Qo}from"./chunk-7JDG2FPM.js";import{a as er}from"./chunk-KSO662WW.js";import{a as jo}from"./chunk-5AU4SCQT.js";import{a as At,b as yr,d as St}from"./chunk-WMQSMBLA.js";import{a as xr}from"./chunk-XKK5N6CR.js";import{a as Yt,b as dt,c as _r,d as de}from"./chunk-3RJOXTRR.js";import{A as ae,B as me,L as ir,O as ar,P as mr,T as ue,U as ur,W as cr,Y as ce,Z as pe,b as or,c as rr,ca as le,d as nr,e as Lt,f as $,g as ne,i as vt,k as se,l as sr,q as ie,v as Mt}from"./chunk-J2MASCEL.js";import{a as Zo,b as Xo,e as qo,f as z,v as Jo}from"./chunk-NNO7KFUF.js";import{a as Vo}from"./chunk-2XYRURE2.js";import{e as Ko}from"./chunk-VUB7XYHG.js";import{d as Q,g as Go,j as wt}from"./chunk-4NCQWC2K.js";import{b as $o}from"./chunk-NXLWHU4N.js";import{A as ko,da as Do}from"./chunk-XWBWLTOV.js";import{D as ke,E as ho,F as bo,G as Fo,I as No,J as Bo,L as Oo,M as Po,N as wo,O as Lo,P as vo,Q as Mo,b as yo,f as To,j as Co,k as go,n as Io,q as Ao,t as So,x as Eo}from"./chunk-GSWJ5GW7.js";import{k as zo}from"./chunk-XN45YXW3.js";import{a as oe,g as Yo}from"./chunk-7OQVWENF.js";import{a as Vn,l as Ho,m as Wo}from"./chunk-GTSNHSPT.js";import{a as re}from"./chunk-RJO5LUBF.js";import{a as ft}from"./chunk-UEENMIFU.js";import{Za as xo,a as lo,f as fo,ka as _o}from"./chunk-PVSNAFN3.js";import{b as Ue}from"./chunk-JYKQJVIF.js";import{l as Uo,m as Ro,q as A}from"./chunk-GBQG32PI.js";import{o as lt}from"./chunk-A3FIPWG3.js";import{O as co,ac as Y,la as po,zb as ee}from"./chunk-NTISK7TT.js";import{U as Qt,V as b,X as te,Y as uo,b as w,da as j,j as mo}from"./chunk-CU7RFE6B.js";import{a as De}from"./chunk-QZUNX5I4.js";import{d as jt,f as ao}from"./chunk-37O7OMRA.js";import{c as F}from"./chunk-TU7CE5HJ.js";import{$b as Zt,Ac as no,Gb as J,Hb as ve,Ib as ct,Lb as Vt,Mb as Qe,Nb as Me,Oc as Gn,Uc as qt,Wb as to,Wc as so,Xc as Jt,Y as Ht,Ya as Wt,Yc as io,cc as gt,fc as pt,ya as ut}from"./chunk-YILNSICT.js";import{B as oo,H as ro,c as eo,o as Kt,q as It}from"./chunk-L4N7WJIQ.js";import{K as $t,pa as Le,s as je}from"./chunk-LBCQTFOD.js";import{N as D,l as Ct,w as f}from"./chunk-V63HWKAL.js";import{H as Xt,ca as R}from"./chunk-2EJYCNYZ.js";import{a as x}from"./chunk-B75PPTYD.js";import{f as u,m as r,o as n}from"./chunk-UGZFXKPB.js";r();n();var Te=u(x()),hr=u(Y()),br=u(lt());r();n();var _e=u(x());pt();var Re=(0,_e.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Qt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function tt(){return(0,_e.useContext)(Re)}function kt(){let{signInfo:t}=tt();return t}function xe(){let{currencyId:t}=tt();return t}function nt(){let{params:t}=tt();return t}function $e(){let{feeData:t}=tt();return t}function ye(){let{onFeeDataChange:t}=tt();return t}function et(){let t=kt(),{inscriptions:e}=nt(),{inscriptionOutput:o}=$e(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:J(i,e.length)}}function Et(){let{feeData:t}=tt();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>ct(e,o),"0")}}function ht(){let{feeData:t}=tt();return t.commitTxFee}function q(){let{feeData:{feeSelectedSat:t={}}}=tt(),{type:e}=t,o=kt(),i;return e===b.CUSTOM?i=t.satBytes:i=o?.[uo[e]],{...t,satBytes:i||o?.normal||0}}function Ir(){let{feeData:t}=tt();return t.canTransferAmount}function Ar(){let{lifecycle:t}=tt();return t}r();n();var Sr=u(x());function Zn(t,e){let o=Q(e),[,i]=jo({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Sr.useMemo)(()=>i||{},[i])}var Er=Zn;function Xn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:c,...p}=o,d=(0,hr.useSelector)(ee),_=Er(m,c),[T,y]=(0,Te.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:b.STANDARD},canTransferAmount:"0"}),h=(0,br.useMemoizedFn)((g,C)=>{y(S=>({...S,[g]:C}))});return Te.default.createElement(Re.Provider,{value:{signInfo:_,currencyId:e??d.currencyId,params:{...p,netWorkCoinId:c,from:m,to:a||m},lifecycle:i,feeData:T,onFeeDataChange:h}},s)}var He=Xn;r();n();r();n();var v=u(x()),be=u(lt());D();r();n();var bt=u(x()),We=u(Xt());r();n();var Dt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Kn({className:t,loading:e,slot:o={},children:i,footerActions:s,contentClassName:m}){let{header:a,footer:c,top:p}=o;return bt.default.createElement(F.Container,{loading:e,className:(0,We.default)(Dt.root,t)},bt.default.createElement(F.Box,{className:Dt["send-page-base-container__header"]},a),bt.default.createElement(F.Box,{className:Dt["send-page-base-container__wrapper"]},p,bt.default.createElement(F.Box,{className:Dt["send-page-base-container__inner-wrapper"]},bt.default.createElement(F.Box,{className:(0,We.default)(Dt["send-page-base-container__content"],m)},i),!!s?.length&&bt.default.createElement(ft.FooterActions,{usePortal:!0,placeholder:!0,renderNative:!0,buttonGroup:s}),c)))}var Ce=Kn;r();n();var ze=u(x());Le();r();n();var V=u(x());D();r();n();var Fr=u(x()),Ye=u(Y());pt();var Nr=(t,e)=>{let o=t.coinId,i=zo(o),s=(0,Ye.useSelector)(ee),m=(0,Ye.useSelector)(({metamask:p})=>p.currencies),a=(0,Fr.useMemo)(()=>e&&m?.find(p=>p.currencyId===e)||s,[e]),c=J(i,a?.usdToThisRate);return er(to,p=>{let d=Ro(p,{symbol:t.symbol}),_=Uo(J(p,c),{useApproximate:!1,symbol:a.symbol});return`${d}(${_})`})};Wt();pt();var Br=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m,supportDecimal:a})=>{let c=tr(),{coin:p,baseCoin:d}=Vo(i,!0),[_,T]=(0,V.useState)(e?.customSatBytes),y=Nr(d,s),h=f("extension_wallet_transaction_text_minute");(0,V.useEffect)(()=>{!_&&o?.normal&&T(o?.normal)},[o]);let g=(0,V.useCallback)(P=>{T(P)},[]),C=(0,V.useCallback)(()=>{m?.({customSatBytes:_,type:b.CUSTOM,satBytes:_})},[_]),S=p.localType===Ht?f("wallet_extension_transfer_unit_sat_b"):"",N=(0,V.useMemo)(()=>{let{min:P,mempoolMin:L}=o,B=L||P||0;return Vt(_,B)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:B}):""},[_,o]);return(0,V.useMemo)(()=>[b.SLOW,b.STANDARD,b.FAST,b.CUSTOM].map(P=>{switch(P){case b.SLOW:return{data:{type:b.SLOW,satBytes:o.min,estimatedTime:`${gt(o.maxCost)} ${h}`},unitPrice:`${o.min} ${S}`,totalPrice:y(J(o.min,t),s),type:f(te[b.SLOW]),typeKey:b.SLOW,estimatedTime:`${gt(o.maxCost)} ${h}`};case b.STANDARD:return{data:{type:b.STANDARD,satBytes:o.normal,estimatedTime:`${gt(o.normalCost)} ${h}`},unitPrice:`${o.normal} ${S}`,totalPrice:y(J(o.normal,t),s),type:f(te[b.STANDARD]),typeKey:b.STANDARD,estimatedTime:`${gt(o.normalCost)} ${h}`};case b.FAST:return{data:{type:b.FAST,satBytes:o.max,estimatedTime:`${gt(o.minCost)} ${h}`},unitPrice:`${o.max} ${S}`,totalPrice:y(J(o.max,t),s),type:f(te[b.FAST]),typeKey:b.FAST,estimatedTime:`${gt(o.minCost)} ${h}`};default:return{unitPrice:`${o.max} ${S}`,totalPrice:y(J(_,t),s),estimatedTime:c(o,_),canConfirm:!N,onConfirm:C,components:()=>V.default.createElement(It.Number,{enableMinus:!1,precision:a?1:0,error:N,errorType:It.TIP_TYPE.always,onChange:g,value:_,size:It.SIZE.sm,title:S,className:"custom-network-fee__satb"})}}}),[t,o,_,a])};var qn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:c,supportDecimal:p})=>{let d=Br({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m,supportDecimal:p});return ze.default.createElement(Qo,{feeType:t?.type,feeDataList:d?.slice(0,3),onBack:a,visible:c,custom:je(d),onChange:({data:_})=>{s?.(_)}})},Or=ze.default.memo(qn);Wt();r();n();var st=u(x());Wt();D();var wr=u(lt());r();n();var k=u(x());D();r();n();var Ft={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var ge=330,Ie=1e4,Jn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,c]=(0,k.useState)(String(o));(0,k.useEffect)(()=>{c(String(o))},[o]),(0,k.useEffect)(()=>{e&&c(String(o))},[o,e]);let p=wt(t,a,{currencyId:i,useApproximate:!1});return k.default.createElement(Kt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},k.default.createElement(F.Box,{className:Ft["output-panel__content"]},k.default.createElement(It.Number,{precision:0,value:a,max:Ie,min:ge,size:It.SIZE.xl,onChange:d=>{c(d)},suffix:k.default.createElement(A.Text,{size:A.SIZE.sm},"sats")}),k.default.createElement(A.Text,{className:Ft["output-panel__compare"],type:A.TYPE.secondary,size:A.SIZE.sm},p),k.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},k.default.createElement(oo,{value:a,min:ge,max:Ie,contentClassName:Ft["output-panel-slider__content"],onChange:d=>{c(String(d))}}),k.default.createElement(F.FlexBox,{justify:"space-between"},k.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${ge} sats`),k.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Ie} sats`)))),k.default.createElement(F.Box,{className:Ft["output-panel__button"]},k.default.createElement(R,{disabled:!a||!a?.trim(),category:R.CATEGORY.fill,type:R.TYPE.highlight,size:R.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,ge),Ie)),s?.()}},f("extension_transactions_btn_confirm"))))},Pr=Jn;var jn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=ut,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[c,{toggle:p}]=(0,wr.useBoolean)(!1),d=Ct.gt(m,0)?m:"0",_=wt(s,d,{currencyId:e,useApproximate:!0}),T=(0,st.useMemo)(()=>mo(t),[t]);return st.default.createElement(st.default.Fragment,null,st.default.createElement(dt,{clickable:t===w.RUNES_ETCH?!1:void 0,onClick:()=>{Ct.gt(i,0)&&p()},title:f(T)},st.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&st.default.createElement(A.Text,{className:Ft["output-tag"]},"x",o),_)),st.default.createElement(Pr,{coinId:s,visible:c,currencyId:e,outputValue:i,onClose:p,onChange:a}))},Lr=jn;r();n();D();var Ae=u(x()),Qn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=Q(t),s=wt(t,o,{currencyId:e,useApproximate:!0});return Ae.default.createElement(dt,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},Ae.default.createElement(A.Text,{inherit:!0,strong:700},Ae.default.createElement(A.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},vr=Qn;r();n();var Ur=u(x()),Rr=u(De()),$r=u(lt()),Hr=u(Vn());D();r();n();D();ao();r();n();var Mr=u(x());Le();ao();Wt();io();so();function ts({walletId:t,utxoType:e=1,coinId:o=ut}={}){let i=oe();return(0,Mr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:c})=>{let p=await jt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),d={address:s,coinAmount:m,serviceCharge:a,utxoType:e};$t(c);let _={coinId:o,utxoRequests:[d]};try{let{data:T}=await qt(Jt.getBTCUTXO,_,{headers:p});return T?.[0]||{}}catch(T){return{error:!0,errorResp:T}}},[o,i,e,t])}var Se=ts;Wt();pt();r();n();var kr=u(x());function es(t){let{inscriptionOutput:e}=et(),{satBytes:o}=q(),{walletId:i,from:s,to:m,inscriptions:a,txType:c,mintType:p}=nt(),d=fr(t),_=dr();return(0,kr.useCallback)(async T=>{let y={};return c===w.RUNES_ETCH?(y={input:T.map(({txHash:C,vout:S,coinAmount:N})=>({vOut:S,txId:C,amount:N})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:C})=>JSON.parse(C))},await _({walletId:i,address:s,tx:y,txType:c,mintType:p})):(y={commitTxPrevOutputList:T.map(({txHash:g,vout:C,coinAmount:S})=>({vOut:C,txId:g,amount:S})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:g,body:C})=>({contentType:g,body:C})),revealOutValue:e,changeAddress:s,toAddr:m},await d({walletId:i,address:s,tx:y,txType:c}))},[s,m,a,e,o])}var Ee=es;function os(t=ut){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:c,mintType:p}=nt(),d=kt(),_=xe(),T=lr({address:o,coinId:t,currencyId:_,txType:a,protocolId:c}),y=Ee(fe.CONFIRM),h=Se({walletId:e,utxoType:s,coinId:t}),{beforePostTx:g}=Ar(),{inscriptionOutput:C,total:S}=et(),{totalFee:N}=Et(),P=ht(),{satBytes:L}=q(),B=async E=>{let{commitTx:I,revealTxs:O,commitAddrs:U,commitTxFee:X,revealTxFees:ot}=await y(E.utxoList||[]),K=await Zo(Ht,I),at=await Xo(Ht,O),Ot=[K,...at],yt={signedTx:I,fromAdr:o,serviceCharge:X,toAdr:i||o,itemId:"commitTx",txHash:K,txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e},mt=O.map((Pt,Tt)=>({signedTx:Pt,fromAdr:U?.[Tt]||o,serviceCharge:ot?.[Tt],toAdr:i||o,itemId:`revealTx${Tt}`,txHash:at[Tt],dependTx:p===Qt.serial?[Ot[Tt]]:[K],txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e})),rt=!1;if(g&&(rt=g(yt,mt)),rt)return{commitParams:yt,revealParams:mt,commitTx:I,revealTxs:O,commitAddrs:U,commitTxFee:X,revealTxFees:ot,feeRate:parseInt(L,10),size:parseInt(C,10)};let W=await jt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await co({txList:[yt,...mt]},{headers:W}),commitTx:I,revealTxs:O,commitAddrs:U,commitTxFee:X,revealTxFees:ot,feeRate:parseInt(L,10),size:parseInt(C,10)}},M=async()=>{let E=await h({from:o,coinAmount:ct(S,N),serviceCharge:P,feeRate:L}),I=E.utxoList||[];return await T(I,()=>{}),await B(E)};return()=>new Promise((E,I)=>{if(typeof d?.txSizeLimit=="number"&&m.length>d.txSizeLimit){let O=Kt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let U=await M();E(U)}catch(U){I(U)}O.destroy()},onConfirm:()=>{I(new Error(le)),O.destroy()}})}else(async()=>{try{let O=await M();E(O)}catch(O){I(O)}})()})}var Dr=os;var rs=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:c,addressType:p,useTipMessageFillUp:d,onFillUp:_,netWorkCoinId:T},y)=>{let h=(0,Rr.useHistory)(),g=Dr(T),C=Jo(o,a),S=(0,$r.useMemoizedFn)(async()=>{try{await C();let M=await g();m&&await m(M)}catch(M){if(!(M?.message===le)){let I=M?.data?.msg||M?.msg||M?.data?.originalError?.msg||f("wallet_home_toast_network_error");ro.error({title:I})}}},[m]),{loading:N,onClick:P}=Yt(S),{loading:L,onClick:B}=Yt(a);return(0,Ur.useMemo)(()=>{let M=a?{loading:L,actionType:z.ACTION_TYPE.CANCEL,onClick:B}:null,E={loading:N,disabled:c,actionType:z.ACTION_TYPE.CONFIRM,onClick:P};return!i&&[j.BALANCE_INSUFFICIENT,j.FEE_BALANCE_INSUFFICIENT].includes(y)&&(M=M||{actionType:z.ACTION_TYPE.CANCEL,onClick:()=>{h.goBack()}},d?E={actionType:z.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let I=Hr.default.stringify({addressType:p,coinId:e},{skipEmptyString:!0,skipNull:!0}),O=I?`?${I}`:"";h.push(xo+O)}}:E={txId:t,coinId:e,address:s,walletId:o,actionType:z.ACTION_TYPE.FILL_UP}),[M,E]},[a,L,B,N,c,P,i,y,d,h,_,p,e,t,s,o])},Wr=rs;r();n();D();r();n();var Yr=u(x());pt();function zr(){let{totalFee:t}=Et(),{satBytes:e}=q();return Zt(ve(t,e),0)}function Gr(){let t=ht(),{satBytes:e}=q();return Zt(ve(t,e),0)}function Vr(){let{totalFee:t}=Et(),e=ht();return(0,Yr.useMemo)(()=>ct(t,e),[t,e])}r();n();r();n();var Nt=u(x());pt();function ns(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=nt(),[a,c]=(0,Nt.useState)(!0),[p,d]=(0,Nt.useState)(!0),[_,T]=(0,Nt.useState)(null),[y,h]=(0,Nt.useState)([]),g=Se({walletId:o,utxoType:s,coinId:m}),C=Ee(fe.CAL_FEE),{satBytes:S}=q(),{total:N}=et(),P=ye(),{totalFee:L}=Et(),B=ht();return(0,Nt.useEffect)(()=>{!e&&(async()=>{if(!Qe(N,0))try{d(!0);let E=await g({from:i,coinAmount:ct(N,L),serviceCharge:B,feeRate:S});if(!E?.utxoList?.length){T(G.BALANCE_NOT_ENOUGH);return}if(E.error){let U=E.errorResp.code,X=G.COMMON_ERROR;[G.BALANCE_NOT_ENOUGH,G.PURE_UTXO_NOT_ENOUGH].includes(U)&&(X=U),T(X);return}P("canTransferAmount",E.canTransferAmount||"0"),T(null);let{commitTxFee:I,revealTxFees:O}=await C(E.utxoList);h(E.utxoList),P("commitTxFee",I),P("revealTxFees",O)}catch{T(G.COMMON_ERROR),P("commitTxFee","0"),P("revealTxFees",[])}finally{c(!1),d(!1)}})()},[i,S,N,L,B,C,e]),{isInitLoading:a,isLoading:p,error:_,utxoList:y}}var Zr=ns;function ss(t){let{disabled:e=!1}=t||{},o=Vr(),{total:i}=et(),s=Ir(),m=$e(),{isInitLoading:a,isLoading:c,error:p,utxoList:d}=Zr({disabled:e});return{isInitLoading:a,isLoading:c,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:d}}var he=ss;var is=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=he(),m=kt(),a=Gr(),c=zr(),p=Ct.add(a,c),d=q(),_=ye();return{bytes:p,signInfo:m,feeError:o,selectedSat:d,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:_}},Xr=is;r();n();var qr=u(x());D();r();n();var as=[w.BRC20_DEPLOY,w.BRC20_MINT,w.BRC20_INSCRIBE,w.ORDINAL_NFT,w.ORDINAL_TEXT,w.EARN_BRC30_DEPLOY,w.EARN_BRC30_APPLY,w.EARN_BRC30_REDEEM,w.EARN_BRC30_CLAIM,w.BRC30_INSCRIBE,w.RUNES_ETCH];function Kr(t){return as.indexOf(t)>-1}var ms=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a})=>(0,qr.useMemo)(()=>Kr(t)?i&&t===w.RUNES_ETCH?{type:St.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:St.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===G.COMMON_ERROR?{type:St.TIP_TYPE.FEE_ERROR}:e===G.BALANCE_NOT_ENOUGH?{type:de.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===G.PURE_UTXO_NOT_ENOUGH?{type:de.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:de.BALANCE_INSUFFICIENT}:{message:m}:{type:St.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m]),Jr=ms;r();n();var Ge={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function us({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=ut}){let{from:m,walletId:a,txType:c}=nt(),p=Wo(a),d=Ho(a),[_,{toggle:T}]=(0,be.useBoolean)(!1),y=xe(),g=Yo()[m],{bytes:C,signInfo:S,feeError:N,selectedSat:P,feeLoading:L,networkFee:B,canTransferAmount:M,utxoListCount:E,onFeeDataChange:I}=Xr(),{title:O,...U}=e,{inscriptionOutput:X,inscriptionsCount:ot,total:K}=et(),at=(0,v.useMemo)(()=>Ct.add(B,K),[B,K]),Ot=Q(s),{showManageUTXO:yt}=gr(Ot||{},g,!0),mt=yt&&N!==G.PURE_UTXO_NOT_ENOUGH,{type:rt,message:W}=Jr({txType:c,feeError:N,feeLoading:L,utxoListCount:E,isHardware:p,isMpcWallet:d,canTransferAmount:M,networkFee:B,totalUsedCoinAmount:at,coin:Ot}),Gt=Wr({txId:t,walletId:a,coinId:s,addressType:g,disabled:!!rt||!!N||!!L||p||E>100,useTipMessageFillUp:mt,netWorkCoinId:s,...i},rt),Pt=Tr(a),Tt=(0,be.useMemoizedFn)(we=>{I("commitTxFee","0"),I("revealTxFees",[]),I("inscriptionOutput",we)},[]),{top:Yn,footer:zn}=o;return v.default.createElement(Ce,{slot:{header:v.default.createElement(re,{title:O||f("extension_wallet_header_maintitle_inscribe"),...U}),footer:zn||v.default.createElement(ft,{placeholder:!0,offsetBottom:0},v.default.createElement("div",{className:Ge.actions},v.default.createElement(St,{type:rt||eo.TYPE.warn,address:m,message:W,coinId:s,walletId:a,fillUpAble:mt}),v.default.createElement(z,{buttonGroup:Gt})))}},Yn,v.default.createElement(At,null,v.default.createElement(dt,{title:f("wallet_info_title_inscribe_service_fee")},v.default.createElement(A.Text,{className:Ge["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),v.default.createElement(xr,{coinId:s,loading:L,currencyId:y,networkFee:L&&B==="0"?void 0:B,estimateFailed:!L&&!Number(B),onClick:()=>{T?.(),Pt({trade:"brc20",all_confirmation:"network_fee"})}}),v.default.createElement(Lr,{txType:c,currencyId:y,inscriptionsCount:ot,inscriptionOutput:X,totalInscriptionCoinAmount:K,onInscriptionOutputChange:Tt,coinId:s})),v.default.createElement(At,null,v.default.createElement(vr,{coinId:s,currencyId:y,totalCoinAmount:at})),v.default.createElement(At,{bordered:!1},v.default.createElement(_r,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Pt({trade:"brc20",all_confirmation:"wallet_used_address"})}})),v.default.createElement(Or,{bytes:C,currencyId:y,value:P,coinId:s,onClose:T,signInfo:S,visible:_,onChange:we=>{I("commitTxFee","0"),I("revealTxFees",[]),I("feeSelectedSat",we)},supportDecimal:!0}))}var Ve=us;r();n();var xt=u(x());D();r();n();var H=u(x()),Rt=u(Y()),hn=u(Xt());Le();D();r();n();var Qr=u(x()),tn=u(De()),en=u(Xt());r();n();var jr={root:"_root_ryl3e_1"};function cs({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,tn.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return Qr.default.createElement(re,{className:(0,en.default)(jr.root,i.className),onClose:a,onBack:m,...i})}var on=cs;r();n();var rn=u(De()),Ze=u(Y());var nn=u(lt());function ps(t){let e=(0,rn.useHistory)(),o=(0,Ze.useSelector)(yo),i=Lt(),{coin:s}=$(),m=(0,Ze.useSelector)(To),a=nr();(0,nn.useMount)(()=>{if(!!t){if($o(s))e.replace(o||lo);else if(!m){let c={pathname:`${fo}/${i}${_o}`};a&&(c.search=`?from=${a}`),e.replace(c)}}})}var sn=ps;r();n();var _n=u(x()),xn=u(Y());r();n();var Bt=u(x());D();r();n();var pn=u(x());r();n();var it=u(x()),mn=u(lt()),un=u(Xt());D();r();n();var an={root:"_root_26a1b_1"};var ls=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s,className:m})=>{let[a,{setTrue:c,setFalse:p}]=(0,mn.useBoolean)();(0,it.useEffect)(()=>{e&&e(a)},[a]);let d=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return it.default.createElement(it.default.Fragment,null,it.default.createElement("div",{className:(0,un.default)(an.root,m),onClick:c,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:d})),it.default.createElement(qo,{address:i,visible:a,closeCallback:p,coinId:t.coinId,receiveOnly:o}))},cn=(0,it.memo)(ls);var ln=u(Y());function fs(t){let e=(0,ln.useDispatch)(),o=Mt();return pn.default.createElement(cn,{address:o,...t,onVisible:s=>{e(Lo(s))}})}var Xe=fs;var ds=()=>{let{coin:t}=$(),e=ne();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===j.BALANCE_INSUFFICIENT?Bt.default.createElement(Bt.default.Fragment,null,s," ",Bt.default.createElement(Xe,{coin:t,receiveOnly:!0})):i?.type===j.FEE_BALANCE_INSUFFICIENT?Bt.default.createElement(Bt.default.Fragment,null,s," ",Bt.default.createElement(Xe,{coin:e})):s}},fn=ds;r();n();var dn={root:"_root_g697e_1"};function _s({renderError:t}){let e=(0,xn.useSelector)(Co),o=fn(),i=t||o;if(!e.key)return null;let s=i(e);return _n.default.createElement("div",{className:dn.root},s)}var yn=_s;r();n();var _t=u(x());D();r();n();var Ut={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var xs=(t,e)=>{let{coin:o}=$(),i=or(),s=cr(),m=ce(),a=pe(),p={total:s,amount:m,available:a}[t];return`${i(e||p,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},Tn=xs;function ys(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function Ts({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...c}){let{coin:p}=$(),d=Tn(t,i),{bottom:_}=a;return _t.default.createElement(F.Box,{className:Ut.container},_t.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Ut.totalAmount,...c},_t.default.createElement(Ue,{size:Ue.SIZE.lg,src:p?.image,text:p?.symbol}),_t.default.createElement(F.Box,{className:Ut["totalAmount-content"]},_t.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs,className:Ut["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),_t.default.createElement(A.Text,{ellipsis:{tooltip:!0},className:Ut["totalAmount-amount"],style:{fontSize:ys(d)}},d)),!s&&_t.default.createElement(R,{category:R.CATEGORY.fill,type:R.TYPE.gray,size:R.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),_)}var Cn=Ts;r();n();pt();var Cs=()=>{let t=pe();return Vt(t,0)&&(t="0"),t},gn=Cs;r();n();r();n();var gs=()=>0,In=gs;var An=In;r();n();var Sn=u(lt());D();var Is=({loading:t,disabled:e,onClick:o,...i})=>(0,Sn.useCreation)(()=>{let s=!e&&t;return[{onClick:o,disabled:e,size:R.SIZE.lg,loading:s,type:R.TYPE.highlight,category:R.CATEGORY.fill,btnText:f("wallet_extension_send_btn_continue"),...i}]},[e,t,o,i]),As=({disabled:t,onClick:e,...o})=>{let i=ur(),s=ue();return Is({...o,disabled:t||s,onClick:e||i})},En=As;r();n();var Ke={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function Ss({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:c={},checkEmpty:p=!0,inputAmount:d,customMaxAmount:_,footerActions:T}){let y=(0,Rt.useDispatch)(),{content:h}=c,{header:g,bottom:C,footer:S}=a,N=(0,H.useRef)(),P=(0,Rt.useSelector)(So),L=Lt(),B=vt(),M=(0,Rt.useSelector)(go),E=(0,Rt.useSelector)(Ao),I=ie(),O=sr(),U=gn(),X=_||U,{amount:ot}=Cr(),K=(0,H.useRef)(!!B),at=W=>{y(Oo(W))},Ot=()=>{y(ke(X)),at(!0)},yt=m.onMax||Ot;sn(p),(0,H.useEffect)(()=>{$t(d)||N.current?.setInputAmount(d.toString()),$t(ot)||N.current?.setInputAmount(ot)},[d,ot]);let mt=En(i),rt=An();return H.default.createElement(Ce,{loading:t,footerActions:!t&&!S&&(T||mt),slot:{header:g||H.default.createElement(on,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:!t&&S}},H.default.createElement("div",{className:(0,hn.default)(h,Ke.content)},H.default.createElement(Ko,{ref:N,...s,autoFocus:!P,coinId:L,maximumMode:O,maximumAmount:O?X:null,initialValue:{value:[B||"0",M||"0"],mode:E,flatCurrencyId:I},onAmountChange:([W,Gt],Pt)=>{y(bo(Gt)),y(ke(W)),Pt&&(at(!1),K.current=!0)},onModeChnage:W=>{y(Fo(W))},onFlatChange:W=>{W&&y(Po(W.currencyId))}}),K.current&&H.default.createElement(yn,{renderError:e}),H.default.createElement(ft,{usePortal:!0,offsetBottom:m?.fixBottom?80-rt:104-rt,className:Ke.totalAmountWrap},H.default.createElement(Cn,{...m,onMax:()=>{yt(),K.current=!0}})),C))}var bn=Ss;r();n();var Bn=u(x()),On=u(Y());Gn();r();n();var Fn=u(x());function Es(){let{coin:t}=$(),e=vt();return(0,Fn.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var Nn=Es;function hs({walletId:t,txSource:e,children:o}){let i=Nn(),s=ie(),m=se(),{coin:a}=$(),c=ne(),p=Mt(),d=oe(),_=w.BRC20_INSCRIBE,T=(0,On.useSelector)(ko),y=(g,C)=>{g.coinAmount=m,g.coinId=C?c.coinId:a.coinId,g.txSource=e||no.NORMAL},h=(g,C)=>{g&&y(g,!0),Array.isArray(C)&&C.forEach(S=>{y(S,!1)})};return Bn.default.createElement(He,{defaultFeeData:T,currencyId:s,params:{walletId:t||d,from:p,inscriptions:i,utxoType:pr.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:h}},o)}var Fe=hs;r();n();var zt=u(x());var Pn=u(Y());function bs(){let t=(0,Pn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=he();return(0,zt.useEffect)(()=>{t(Mo(m))},[m]),(0,zt.useEffect)(()=>{t(No(i))},[i]),(0,zt.useEffect)(()=>{t(Do(s))},[s]),(0,zt.useEffect)(()=>{t(Bo(!!o))},[o]),e}var Ne=bs;r();n();var wn=u(x());pt();var Ln=u(Y());function qe(){let t=ce();return(0,wn.useCallback)(e=>Me(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:j.COMMON_ERROR}:null,[t])}function Fs(){let t=(0,Ln.useDispatch)(),e=ir(),o=qe(),i=[e,o],{runErrorFns:s}=me(i);ae(s,m=>{t(ho(m))})}var vn=Fs;r();n();var Mn=u(Y()),Be=u(x());so();io();function Ns(){let t=(0,Mn.useDispatch)(),e=Mt(),{coin:o}=$(),[i,s]=(0,Be.useState)(!0);return(0,Be.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await qt(Jt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(vo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var kn=Ns;function Bs({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ue(),a=Ne(),c=kn(),{loading:p,onClick:d}=Yt(e),_=(0,xt.useMemo)(()=>{let T=null;return typeof e=="function"&&(T={loading:p,actionType:z.ACTION_TYPE.CANCEL,onClick:d}),[T,{actionType:z.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[e,o,m,a,p,d]);return vn(),xt.default.createElement(bn,{...s,inputAmount:t,isGlobalLoading:c,slot:{...i||{},footer:xt.default.createElement(ft,{usePortal:!0,placeholder:!0,offsetBottom:0},xt.default.createElement(z,{buttonGroup:_}))},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Os({walletId:t,...e}){return xt.default.createElement(Fe,{walletId:t},xt.default.createElement(Bs,{...e}))}var Kl=Os;r();n();var Z=u(x()),Hn=u(Y());D();r();n();var Oe=u(x()),Un=u(lt());D();r();n();var Dn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Ps=({coinId:t,amount:e})=>{let o=Q(t),{loading:i,data:s}=(0,Un.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await po(m))?.brcJson||""});return Oe.default.createElement(dt,{title:f("extension_wallet_transaction_item_inscribe_preview")},Oe.default.createElement(F.Spin,{loading:i},Oe.default.createElement(A.Text,{className:Dn["preview-json"]},s)))},Rn=Ps;r();n();var Je=u(x()),Pe=u(Y());function ws(t){let e=(0,Pe.useSelector)(Io);return(0,Je.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:j.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Ls(){let t=qe();return(0,Je.useCallback)(e=>{let o=t(e);return o?{...o,highlight:ar.AMOUNT}:null},[t])}function vs(t,e){let o=(0,Pe.useDispatch)(),i=Q(e),s=ws(i),m=mr(),a=Ls(),c=[s,m,a],{runErrorFns:p}=me(c);ae(p,d=>{o(wo(d))},t)}var $n=vs;function Ms({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,Hn.useDispatch)(),m=vt(),a=Lt(),[,c]=Go(a),p=se(),d=Ne(),_=(0,Z.useCallback)(async()=>{await s(Eo(!1))},[s]);return $n(d,a),Z.default.createElement(Ve,{walletId:i,slot:{top:Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(At,null,Z.default.createElement(yr,{summaryList:[{coinId:a,coinAmount:p}],title:f("extension_wallet_transaction_item_inscribe")})),Z.default.createElement(At,null,Z.default.createElement(Rn,{coinId:a,amount:m})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:_},netWorkCoinId:c?.coinId})}function ks({txSource:t,walletId:e,...o}){return Z.default.createElement(Fe,{txSource:t,walletId:e},Z.default.createElement(Ms,{walletId:e,...o}))}var Df=ks;r();n();var Wn=u(x());function Ds({children:t,...e}){return Wn.default.createElement(rr.Provider,{value:e},t)}var Wf=Ds;export{Ce as a,on as b,sn as c,Xe as d,Is as e,bn as f,Se as g,Or as h,nt as i,Ve as j,He as k,Kl as l,Df as m,Wf as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-VIUQAQ72.js.map
