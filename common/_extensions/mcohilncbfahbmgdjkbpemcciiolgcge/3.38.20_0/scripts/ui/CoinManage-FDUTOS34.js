import{a as ke}from"./chunk-BOYH7KLE.js";import{a as Te}from"./chunk-FXCKGMTP.js";import{a as H,b as q}from"./chunk-GPZQ3BGW.js";import{a as Ne}from"./chunk-M4BU6CG6.js";import{a as W}from"./chunk-3LIMLX72.js";import{a as Ie,b as be}from"./chunk-5UJKFVPM.js";import"./chunk-ZBEWIS2U.js";import{a as xe}from"./chunk-H5XVQQ3S.js";import"./chunk-JMA73LC5.js";import{a as N}from"./chunk-Q6CQ4QF7.js";import"./chunk-2XYRURE2.js";import"./chunk-4NCQWC2K.js";import"./chunk-BSEC3HD3.js";import{c as we}from"./chunk-SR5VKAMR.js";import{l as ye}from"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import{c as Le,d as O}from"./chunk-QO3FK7IQ.js";import"./chunk-UWTAV26V.js";import"./chunk-A6RKGNRU.js";import"./chunk-BM73LLRW.js";import"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import"./chunk-S2V4K2JM.js";import"./chunk-FLZ5KV6J.js";import"./chunk-RG4N2AAJ.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import"./chunk-A52XYJMT.js";import{d as fe}from"./chunk-BCT5GPKT.js";import"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import{d as A}from"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import"./chunk-7OQVWENF.js";import"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import{g as Ae}from"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import{a as Se}from"./chunk-RJO5LUBF.js";import"./chunk-DRPGNVVL.js";import{a as ve}from"./chunk-UEENMIFU.js";import{d as he}from"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{G as ue,H as D,a as pe}from"./chunk-PVSNAFN3.js";import{b as Ce}from"./chunk-JYKQJVIF.js";import{q as I}from"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import{o as T}from"./chunk-A3FIPWG3.js";import{ac as dt,m as se,r as de,ta as _e,v as me}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import{a as ge}from"./chunk-QZUNX5I4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import"./chunk-35FUKWV2.js";import"./chunk-DHNKVM4B.js";import"./chunk-VL5VJIZ7.js";import{c as x}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{Uc as le,Wc as at,Xc as ce,Yc as st,qb as re,wb as it}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{q as J,y as ae}from"./chunk-L4N7WJIQ.js";import"./chunk-LBCQTFOD.js";import{N as M,w as _}from"./chunk-V63HWKAL.js";import"./chunk-ZZ2UZY4M.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as ne,T as ie,Z as P}from"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as h}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as a,m as o,o as r}from"./chunk-UGZFXKPB.js";o();r();var d=a(h()),Xe=a(ge()),et=a(ne());M();o();r();var Ee=a(ke()),Z=a(h());M();o();r();var L={"list-title":"_list-title_17ipt_1",listTitle:"_list-title_17ipt_1","empty-box":"_empty-box_17ipt_6",emptyBox:"_empty-box_17ipt_6","search-text":"_search-text_17ipt_10",searchText:"_search-text_17ipt_10","coin-box":"_coin-box_17ipt_13",coinBox:"_coin-box_17ipt_13","icon-add":"_icon-add_17ipt_13",iconAdd:"_icon-add_17ipt_13","icon-remove":"_icon-remove_17ipt_16",iconRemove:"_icon-remove_17ipt_16","icon-not-remove":"_icon-not-remove_17ipt_20",iconNotRemove:"_icon-not-remove_17ipt_20","clear-icon":"_clear-icon_17ipt_23",clearIcon:"_clear-icon_17ipt_23"};var Be=({renderCoin:e,list:n})=>Z.default.createElement(x.Box,null,Z.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_list_added_crypto")),Z.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n,component:Ee.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));o();r();var K=a(h()),Fe=a(T());M();it();var Q=({coin:e,deleteAddedCoinAbled:n,onAction:t,isSearchStatus:s})=>{let[i]=he(),m="",l="",p=be(),f=e?.aggregation;e?.added?n?(m="okx-wallet-plugin-take",l="icon-remove"):(m="okx-wallet-plugin-take",l="icon-not-remove"):(m="okx-wallet-plugin-add",l="icon-add");let S=de({coinId:e?.baseCoinId})&&!!e?.address,w=s&&!f&&!S&&!!e?.address,g=(0,Fe.useCreation)(()=>p(e),[e?.coinId,p]);return K.default.createElement(A.Coin,{className:L["coin-box"],hovered:!1,name:e?.coinId===re?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:w&&`${_("wallet_manage_crypto_label_contract_address")}: ${se(e?.address)}`,tag:f?_("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType,hidden:i,balance:g?e.coinAmount:void 0,market:g?e.currencyAmount:void 0},!g&&e?.added?K.default.createElement(Ie,{coinId:e?.coinId,from:ue}):K.default.createElement(Ce.IconButton,{className:L[l],disabled:e?.added&&!n,onClick:()=>{t(e)},icon:{icon:m}}))};o();r();var Y=a(h()),Me=a(ne());var Pe=Y.default.memo(({search:e,setSearch:n,spinLoading:t})=>!e||e.length===0?null:t?Y.default.createElement(P.Circle,{size:P.SIZE.sm}):Y.default.createElement(ie,{className:(0,Me.default)("okds-clear-fill",L.clearIcon),onClick:()=>{n("")}}));o();r();var V=a(h());o();r();var Re=a(h()),ze=a(ge());M();var Ue=()=>{let e=(0,ze.useHistory)();return Re.default.createElement(ae.State,{className:L["empty-box"],title:_("wallet_search_text_search_no_results"),buttonText:_("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(D)}})};var De=({loadingMore:e,searchCoins:n,renderCoin:t,spinLoading:s})=>V.default.createElement(A,{itemKey:"coinId",dataSource:n,renderItem:t,loadingMore:e,renderEmpty:()=>s?null:V.default.createElement(Ue,null)});o();r();var k=a(h()),Oe=a(ke());M();var We=(0,k.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedLoading:t,unAddedList:s})=>s.length===0?null:k.default.createElement(x.Box,null,k.default.createElement(I.Text,{className:L.listTitle,size:I.SIZE.xs,type:I.TYPE.secondary},_("wallet_manage_crypto_subtitle_popular_crypto")),k.default.createElement(A,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:s,component:!t&&Oe.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));o();r();var qe=a(T());o();r();var X=a(h()),He=a(T());function $(e,n){let t=(0,X.useRef)(null),s=(0,X.useRef)(Date.now());return(0,He.useMemoizedFn)((...m)=>{t.current||(e(...m),s.current=Date.now(),t.current=setTimeout(()=>{t.current=null},n))})}o();r();var G=(e,n)=>{if(e.aggregation){let t=n(e.childrenCoin);return{...e,childrenCoin:t}}return e};var Ze=()=>{let e=W(),n=N();return(0,qe.useCreation)(()=>ye(e,n).map(i=>({...i,added:!0})),[e])},Ke=()=>{let e=H();return $(n=>{let t=G(n,e);O(t)},500)};o();r();var Ye=a(dt());var $e=()=>{let{currentNetworkUniqueId:e}=(0,Ye.useSelector)(fe),n=we({netWorkId:e?String(e):void 0}),{data:t,loading:s,run:i}=Ne(),m=t?.supportNetworkList,l=s&&!t?.supportNetworkList?.length,p=!!m&&m.length>0,f="";if(e!==""){let w=n?.coinId;f=(m||[]).find(g=>g.coinId===w)?.name||""}let S=`${D}?network=${f}`;return{supportCustomCoin:p,customCryptoPath:S,customCoinLoading:l,reloadCustomNetworkData:i}};o();r();var b=a(h()),R=a(T());var Ge=()=>{let e=W(),n=N(),[t,s]=(0,b.useState)(""),i=(0,R.useDebounce)(t,{wait:500}),m=(0,b.useCallback)(C=>{s(C.target.value)},[]),[l,p]=(0,b.useState)(!0);(0,b.useEffect)(()=>{p(!!t)},[t]);let{data:f,loadingMore:S,listRef:w}=q({symbolLike:i,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[i],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!i)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){p(!1)}}),g=(0,R.useCreation)(()=>new Set(e.map(C=>C.aggregation?C.symbol:C.coinId)),[e]),u=(0,R.useCreation)(()=>(f?.list??[]).map(y=>(y.added=g.has(y.aggregation?y.symbol:y.coinId),y)).sort((y,B)=>B.added-y.added),[g,f?.list]);return{searchListRef:w,search:t,searchCoins:u,searchLoading:l,searchLoadingMore:S,onSearch:m,setSearch:s}};o();r();o();r();var je=a(T());at();st();function Je(){let e=Ae();return(0,je.useMemoizedFn)(async n=>{try{let{code:t}=await le(ce.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return t===0}catch{return!1}})}var Qe=()=>{let e=H(),n=Je();return $(async t=>{let s=me(t),i;if(s){if(i=await _e(t),!i)return}else i=t;i=G(i,e),t.added?O(i):await n(i.coinId)&&Le(i)},500)};o();r();var z=a(h()),E=a(T());var Ve=(e=[],n)=>{let t=N(),s=xe(),i=(0,E.useCreation)(()=>new Set(e.map(v=>v.aggregation?v.symbol:v.coinId)),[e]),m=(0,E.useCreation)(()=>Array.from(new Set(Te(e).map(v=>v.coinId))),[e]),{data:l,loading:p,loadingMore:f,listRef:S,reload:w}=q({aggregation:!0,chainIds:t?[Number(t)]:void 0,excludeCoinIds:m},{enable:!s,reloadDeps:[t],enableEmptyAccountCoins:!0}),g=(0,E.usePrevious)(i.size),u=i.size<g;(0,z.useEffect)(()=>{!n&&u&&w()},[u,i.size,n]);let C=(0,E.useCreation)(()=>l?.list?.filter(F=>!i.has(F.aggregation?F.symbol:F.coinId))??[],[l?.list,e])??[],[y,B]=(0,z.useState)(!0);return(0,z.useEffect)(()=>{p||B(!1)},[p]),{unAddedList:C,unAddedListRef:S,unAddedLoading:y,unAddedLoadingMore:f}};o();r();var U={"wallet-coin__manage":"_wallet-coin__manage_1imve_1",walletCoinManage:"_wallet-coin__manage_1imve_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1imve_4",walletCoinManageSearch:"_wallet-coin__manage__search_1imve_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1imve_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1imve_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1imve_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1imve_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1imve_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1imve_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1imve_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1imve_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1imve_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1imve_21","fade-enter":"_fade-enter_1imve_25",fadeEnter:"_fade-enter_1imve_25","fade-added-enter":"_fade-added-enter_1imve_26",fadeAddedEnter:"_fade-added-enter_1imve_26","fade-enter-active":"_fade-enter-active_1imve_30",fadeEnterActive:"_fade-enter-active_1imve_30","fade-added-enter-active":"_fade-added-enter-active_1imve_31",fadeAddedEnterActive:"_fade-added-enter-active_1imve_31",fade:"_fade_1imve_25","fade-added":"_fade-added_1imve_26",fadeAdded:"_fade-added_1imve_26","fade-leave-active":"_fade-leave-active_1imve_41",fadeLeaveActive:"_fade-leave-active_1imve_41","fade-added-leave-active":"_fade-added-leave-active_1imve_42",fadeAddedLeaveActive:"_fade-added-leave-active_1imve_42"};var mt=()=>{let e=(0,Xe.useHistory)(),{customCryptoPath:n,supportCustomCoin:t,customCoinLoading:s,reloadCustomNetworkData:i}=$e(),{searchListRef:m,search:l,searchCoins:p,onSearch:f,searchLoading:S,searchLoadingMore:w,setSearch:g}=Ge(),u=!!l,C=Ze(),{unAddedList:y,unAddedListRef:B,unAddedLoading:v,unAddedLoadingMore:F}=Ve(C,u),tt=Ke(),ee=C?.length>1,ot=Qe();(0,d.useEffect)(()=>{i()},[]);let rt=j=>d.default.createElement(Q,{isSearchStatus:u,coin:j,onAction:tt,deleteAddedCoinAbled:ee}),te=j=>d.default.createElement(Q,{isSearchStatus:u,coin:j,deleteAddedCoinAbled:ee,onAction:ot}),oe=l?S:v,nt=_("wallet_manage_crypto_placeholder_search_coin");return d.default.createElement(x.Container,{className:"wallet-coin__manage"},d.default.createElement(ve,{offsetTop:0,style:{zIndex:100}},d.default.createElement(Se,{sticky:!1,closeable:!1,onBack:()=>{e.push(pe)},title:_("wallet_manage_crypto_maintitle_manage_crypto")}),t&&d.default.createElement(x.Box,{className:U["wallet-coin__manage__search"]},d.default.createElement(J.Search,{value:l,size:J.SIZE.md,placeholder:nt,onChange:f,cleanable:!1,suffix:d.default.createElement(Pe,{search:l,setSearch:g,spinLoading:oe})}))),d.default.createElement(x.Spin,{ref:u?m:B,className:(0,et.default)(U["wallet-coin__manage__spin"],U["wallet-coin__manage__spin__auto"]),loading:!1,size:P.SIZE.lg},!u&&!!t&&d.default.createElement(x.Spin,{loading:s&&!v},d.default.createElement(A.Cell,{className:U["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:_("wallet_manage_crypto_text_custom_crypto")})),u&&d.default.createElement(De,{itemKey:"coinId",searchCoins:p,renderCoin:te,spinLoading:oe,loadingMore:w}),!u&&d.default.createElement(Be,{list:C,renderCoin:rt}),!u&&d.default.createElement(We,{unAddedList:y,unAddedLoading:v,unAddedLoadingMore:F,renderCoin:te})))},kr=d.default.memo(mt);export{kr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-FDUTOS34.js.map
