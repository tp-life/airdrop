import{a as Ie}from"./chunk-IU6WF2YA.js";import{a as Co,b as Eo}from"./chunk-PD74JHYW.js";import{a as To,b as Io}from"./chunk-PGJ24XFB.js";import{a as to,b as oo}from"./chunk-DJXYRA6P.js";import{a as So,b as wo}from"./chunk-K25ILOFJ.js";import"./chunk-OZVA7WG5.js";import{a as yo}from"./chunk-UVEUQXM6.js";import"./chunk-AAPWD6I6.js";import"./chunk-ZM5QX5NG.js";import"./chunk-TTRHX25W.js";import"./chunk-ZORPRUU7.js";import"./chunk-6A6OIVCT.js";import"./chunk-AWNSSJAG.js";import"./chunk-QCAVIM5G.js";import"./chunk-B7P7Y7YD.js";import"./chunk-RN3CEAG6.js";import"./chunk-3K6OE4O5.js";import"./chunk-BGIT66CC.js";import"./chunk-SEL5SOAI.js";import"./chunk-EMVP43OQ.js";import"./chunk-XHGPSNTM.js";import{k as ho}from"./chunk-NQSB2CI7.js";import{a as xo}from"./chunk-PGNWRBKO.js";import{a as lo,d as uo,e as po}from"./chunk-DOWV6C3B.js";import"./chunk-TCYNB4II.js";import"./chunk-JKOFAFN3.js";import"./chunk-64U6VGZH.js";import"./chunk-TW5NSKIQ.js";import"./chunk-JOGFEK3S.js";import"./chunk-TEHSOGCP.js";import"./chunk-L5MAEEVU.js";import"./chunk-64YCTTWL.js";import"./chunk-3LIMLX72.js";import{a as Fo}from"./chunk-CP6ZYOGS.js";import{b as go}from"./chunk-KPYSN5PV.js";import"./chunk-JYZR3KF2.js";import{i as Zt,m as Qt,q as $t,s as eo}from"./chunk-MOISJT5B.js";import{a as Kt,b as Te,c as qt,d as Yt}from"./chunk-ZVOB6UOQ.js";import"./chunk-OSVZOFON.js";import"./chunk-7JDG2FPM.js";import"./chunk-ADRJK2SB.js";import"./chunk-VT47VYXB.js";import"./chunk-KSO662WW.js";import"./chunk-6TPN273S.js";import{a as Jt}from"./chunk-SF64G75T.js";import"./chunk-5AU4SCQT.js";import"./chunk-HCXRQ4GY.js";import"./chunk-Q4NRZ4HK.js";import"./chunk-AHNTWQZY.js";import{a as ar}from"./chunk-735DFIOL.js";import{a as ro}from"./chunk-JDOLDE6V.js";import"./chunk-UYBGGUFD.js";import"./chunk-4U65LWXX.js";import"./chunk-OZPHJXRI.js";import"./chunk-4MFRD43G.js";import{g as Rt}from"./chunk-PUJJBUFH.js";import"./chunk-G4AWS3BQ.js";import"./chunk-BSUDBTGH.js";import"./chunk-BANGSZ4B.js";import"./chunk-ZUICTOPN.js";import{a as fo}from"./chunk-5DLXZM4G.js";import"./chunk-QW3J3F5T.js";import"./chunk-K7NQPTP4.js";import"./chunk-RH3TXJ4N.js";import"./chunk-ZY3ECFNE.js";import{a as so,b as co,d as mo}from"./chunk-WMQSMBLA.js";import{a as io}from"./chunk-XKK5N6CR.js";import{e as Ot}from"./chunk-ICLH7VK5.js";import{b as no,c as ao}from"./chunk-3RJOXTRR.js";import"./chunk-J2MASCEL.js";import"./chunk-J2Y34YM2.js";import{a as Ht,e as Vt,m as Ut,r as zt,t as Xt}from"./chunk-NNO7KFUF.js";import{a as jt}from"./chunk-3L5C5CQB.js";import"./chunk-CGBWDXEW.js";import"./chunk-NRWOOVOJ.js";import"./chunk-P6MBUJNT.js";import{a as Bt}from"./chunk-2XYRURE2.js";import"./chunk-LYFECSNW.js";import"./chunk-M7CDJYYG.js";import"./chunk-VUB7XYHG.js";import"./chunk-QZXK25MX.js";import"./chunk-J7ZUOIII.js";import"./chunk-Q2BK5I52.js";import"./chunk-QVG4GOA5.js";import{d as Wt,f as Gt}from"./chunk-4NCQWC2K.js";import"./chunk-BSEC3HD3.js";import"./chunk-SR5VKAMR.js";import"./chunk-AKSYFHB2.js";import"./chunk-J4KP2IFN.js";import"./chunk-KGDIAQCZ.js";import"./chunk-TLXUERY6.js";import"./chunk-O3IVWG6F.js";import"./chunk-A3P4N2T2.js";import"./chunk-QBZA6BV4.js";import"./chunk-5UQNMD2N.js";import"./chunk-A46LBMBO.js";import"./chunk-BU5U5Q5F.js";import"./chunk-VZDVLWJS.js";import"./chunk-OHQLZX54.js";import"./chunk-FHG3YZGF.js";import"./chunk-JQX3GV43.js";import"./chunk-OMSBOWDZ.js";import"./chunk-VSDQKS4O.js";import"./chunk-MXDITV4U.js";import"./chunk-R56TBW5W.js";import"./chunk-KWSTGWJV.js";import"./chunk-2L5V4MTR.js";import"./chunk-762Y5MQL.js";import{k as $}from"./chunk-L56XCX6G.js";import"./chunk-7UJMDFGU.js";import"./chunk-PB7BCSCP.js";import{c as At}from"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import{a as pe,i as Pt}from"./chunk-ERN756XV.js";import"./chunk-SUOZFPDI.js";import{a as nr}from"./chunk-GTKGSYH4.js";import"./chunk-MCNCFA4F.js";import"./chunk-5Y6FZJ5A.js";import"./chunk-2KGWCKRX.js";import{a as He,b as Ve,g as pt}from"./chunk-777QWPHY.js";import"./chunk-PHVYXSWP.js";import"./chunk-L3G6DHBI.js";import"./chunk-QO3FK7IQ.js";import"./chunk-UWTAV26V.js";import{a as Lt,b as _t}from"./chunk-A6RKGNRU.js";import"./chunk-V3N76XMD.js";import"./chunk-BM73LLRW.js";import{a as de}from"./chunk-6LE7Q5ED.js";import"./chunk-XD7VJART.js";import"./chunk-BM44DQAB.js";import"./chunk-6JGR2L6N.js";import"./chunk-ZBSU6WZQ.js";import"./chunk-S2V4K2JM.js";import"./chunk-4PWYQIAG.js";import"./chunk-GSWJ5GW7.js";import"./chunk-IVCA3VWI.js";import"./chunk-FLZ5KV6J.js";import"./chunk-OCTREJ3R.js";import"./chunk-RG4N2AAJ.js";import"./chunk-JPVBM3R5.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import{a as bt}from"./chunk-A52XYJMT.js";import"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-BCT5GPKT.js";import"./chunk-FJBNQZUR.js";import{j as Mt}from"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import{a as ye}from"./chunk-7OQVWENF.js";import{a as ge}from"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import{h as Nt}from"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import"./chunk-PP43MII2.js";import"./chunk-YV3R2S6K.js";import{a as vt}from"./chunk-RJO5LUBF.js";import"./chunk-DRPGNVVL.js";import{a as Dt}from"./chunk-UEENMIFU.js";import"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{a as ut}from"./chunk-PVSNAFN3.js";import"./chunk-JYKQJVIF.js";import"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import{e as dt}from"./chunk-VWYA3Z7M.js";import{o as Q}from"./chunk-A3FIPWG3.js";import{H as le,Ha as mt,I as q,J as Y,Ja as ft,N as it,Ob as ht,Q as st,R as ct,Va as lt,ac as Ft,eb as gt,ob as yt,p as qe,qb as Tt,sb as It,ub as St,yb as wt,zb as j}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import{D as tt,F as ot,M as fe,V as rt,_ as nt,fa as at,p as $e,v as me,x as et}from"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import{a as rr}from"./chunk-QZUNX5I4.js";import{a as xt,b as Z}from"./chunk-IVA2TTR4.js";import"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import"./chunk-KSCBZ3RY.js";import{d as w,f as se}from"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import"./chunk-35FUKWV2.js";import{a as kt}from"./chunk-DHNKVM4B.js";import{a as Ct,u as Et}from"./chunk-VL5VJIZ7.js";import{c as ue}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{Aa as z,Ac as J,Ba as Me,Bb as Be,Cb as Oe,Db as Zo,Gb as H,Hb as Ue,Ia as Re,Ib as X,Ka as ae,Oc as K,Qc as Ye,Vb as ze,W as ne,Wc as er,Xc as je,Y as _e,Ya as _,Yc as tr,aa as R,ba as F,d as Ce,dc as Xe,e as Yo,ea as De,fc as Je,gc as Ke,hc as Qo,ic as ie,ja as Ne,ka as be,ma as U,nb as O,o as re,oc as $o,ra as W,u as ke,wb as We,ya as ve,yb as Ge,z as Le,zc as D}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import"./chunk-L4N7WJIQ.js";import{f as Ee,j as E,o as Pe,pa as B,r as Ae}from"./chunk-LBCQTFOD.js";import{N as oe,w as P}from"./chunk-V63HWKAL.js";import"./chunk-S2ACKULX.js";import"./chunk-ZZ2UZY4M.js";import{b as jo}from"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import"./chunk-2EJYCNYZ.js";import"./chunk-V2K75WCG.js";import{a as L}from"./chunk-B75PPTYD.js";import{W as Qe,t as ce,v as Ze}from"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import{a as or}from"./chunk-Y5BBPTSN.js";import"./chunk-4AXTMWMB.js";import"./chunk-X6UTFQFS.js";import"./chunk-5LMNZ6ME.js";import"./chunk-CEF6LCM2.js";import"./chunk-SY7RUBBT.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-LLWJFPQV.js";import"./chunk-XYCKE5Q7.js";import"./chunk-PJE3AWUO.js";import"./chunk-U5KK4TZK.js";import"./chunk-HQ74Q4WH.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as g,l as process,m as T,o as I}from"./chunk-UGZFXKPB.js";T();I();var V=g(L()),C=g(Ft()),te=g(rr()),qo=g(Q());B();oe();Qo();Yo();Le();K();We();_();tr();er();Zo();T();I();var Se=g(L());oe();_();var Po=({visible:t,onClose:e,onChange:o,walletId:n})=>Se.default.createElement(Ie,{visible:t,onClose:e,onChange:o,coinId:ve,walletId:n},Se.default.createElement(Ie.Header,{title:P("extension_defi_top_header_title_select_address_type"),subTitle:P("extension_defi_popup_desc_new_address_default")}));T();I();var ee=g(L()),Ao=g(Q());var ir=({txParams:t,chainId:e,children:o,...n})=>{let[a,r]=(0,ee.useState)({}),i=async()=>{try{let{mevInfo:s}=await st({from:t.from,chainIndex:e,dappData:JSON.stringify(t),method:tt.SIGN_TRANSACTION,dappInfo:{}});r(s)}catch{}};return(0,Ao.useDebounceEffect)(()=>{t.data&&i()},[t.data],{wait:1e3}),a?.supportMev?ee.default.createElement(uo,{serverMevInfo:a,...n},o):null},ko=ir;T();I();var Lo=g(L()),_o=g(Q());B();var Do=g(nr());se();K();_();var sr=({walletId:t,txParams:e,onConfirm:o,onCancel:n,backable:a=!1,onBack:r,asPage:i})=>{let s=Nt(t),m=bt(F,s?.walletId),c=Xt({coinAmount:0,localType:F,coinId:Me,fromAddr:m,walletId:s?.walletId,txSource:J.DAPP}),f={localType:F,params:{transaction:e},walletId:s?.walletId},l=(0,_o.useMemoizedFn)(async({networkFee:u})=>{let{raw_data:p,raw_data_hex:d,txID:S,visible:x}=e||{};try{let h=await w().signCommonMessage(m,{type:"protobuf",message:JSON.stringify({txID:S,visible:x,raw_data:p,raw_data_hex:d})},F),b=Do.default.address.fromHex(E(p,"contract[0].parameter.value.contract_address",m)),v=await Ht(F,h);await c(h,{toAdr:b,txHash:v,serviceCharge:u}),o?.({txHash:v})}catch(h){o({error:h})}});return Lo.default.createElement(Io,{backable:a,onBack:r,asPage:i,unapproved:f,onCancel:n,onConfirm:l})},No=sr;T();I();var k=g(L()),Vo=g(Ft());var Uo=g(Q());B();oe();T();I();var bo=g(L());jo();_();var cr=async(t={})=>{let{contractAddress:e,contractName:o,functionName:n,functionArgs:a}=t,{getRawTransaction:r}=await pe(),i={data:{type:me.CONTRACT_CALL,data:{contract:e,contractName:o,functionName:n,functionArgs:a}}};return await r(5757,i)},mr=async(t={})=>{let{recipient:e,amount:o,memo:n}=t,{getRawTransaction:a}=await pe(),r={data:{type:me.TRANSFER,data:{to:e,amount:o,memo:n}}};return await a(5757,r)},fr=async(t={})=>t.txType===fe.CONTRACT_CALL?cr(t):t.txType===fe.STX_TRANSFER?mr(t):"",vo=async({transaction:t={},fromAddress:e,value:o})=>{let n=await fr(t);return(await xo({coinId:Re,fromAddress:e,value:o,inputData:n}))?.gasLimit||"0"};T();I();var lr=g(L());B();_();se();async function Mo(t,e){let o=async()=>await q({coinId:ae,address:t},{fromAddr:t,toAddr:""}),n=async m=>{let c=E(m,"info.nonce",0),f={type:et.MULTI_CONTRACT_CALL,nonce:c,maxFee:0,chainId:to.StarknetChainId.SN_MAIN,multiContractCallData:{from:t,calls:e}};return(await w().signTransaction(f,t,U))?.signature},a=async m=>{let{data:c}=await Y({coinId:ae,address:t,inputData:m});return c?.gasLimit},r=await o(),i=await n(r);return await a(i)}$o();Le();K();_();Je();se();T();I();var Ro=g(ar()),we=g(or());B();K();We();_();Je();async function Wo(t,e){return(await Pt()).address.fromHex(E(t,"raw_data.contract[0].parameter.value.contract_address",e))}function Go(t){return E(t,"raw_data.contract[0].parameter.value.data","")}function Bo(t){let e=E(t,"raw_data.contract[0].parameter.value.call_value"),o=E(t,"raw_data.contract[0].parameter.value.amount","");return e||o}async function ur(t){let{data:e={}}=await le({coinId:z,address:t},{fromAddr:t}),{info:o={}}=e;return o}async function pr(t,e){let{transaction:o,bizType:n,bizId:a=[],notReplaceBlockhash:r=!1}=t,i=null,s=()=>typeof t?.toJSON=="function"?t:t?.instruction,{recentBlockhash:m,lastValidBlockHeight:c}=await ur(e),f=s();return f?i=new ce({feePayer:e,blockhash:m,lastValidBlockHeight:c}).add(f):o&&(r||(o instanceof Ze?o.message.recentBlockhash=m:(o.signatures=[],o.recentBlockhash=m),o.lastValidBlockHeight=c,a.forEach(l=>{let u=(0,Ro.mnemonicToSeed)(n,l),p=Qe.fromSeed(u.slice(0,32));o?.version>=0?o.sign([p]):o.partialSign(p)})),i=o),i}async function Oo(t,e){let o=await pr(t,e);return o instanceof ce?we.default.encode(o.serialize({requireAllSignatures:!1,verifySignatures:!1})):we.default.encode(o.serialize())}function G(t){let e=O({netWorkId:String(t)}),o=e?.baseChain||"",n=e?.localType||"",a=e?.coinId||3,r=e?.realChainIdHex;return{baseCoinId:a,networkType:n,chainId:r,baseChain:o}}async function he({networkId:t,address:e,data:o,tokenAddress:n}){let a={},{baseCoinId:r}=G(t),i={coinId:r,address:e},s={fromAddr:e,value:"0"},m={address:e,inputData:o,coinId:r,value:"0",tokenAddress:n},{data:c}=await Y(m),{gasLimit:f}=c,{data:{info:l}}=await le(i,s),u=l?.needExtFee||!1,p=l?.gasPrice||{},{normal:d,proposePriorityFee:S,supportEip1559:x}=p;if(!u)return a={maxFeePerGas:d,maxPriorityFeePerGas:S,gasPrice:d,gasLimit:f,supportEip1559:x,networkFee:H(d,f)},a;let h={from:e,to:n,data:o,value:Z(0),gasPrice:Z(d),gasLimit:Z(f)},b=qe(h),v=await Jt(b),M=await it({coinId:r},{inputData:v}),y=X(H(d,f),M);return a.networkFee=y,a.extFee=M,a}function A(t,e){return Xe(Ue(t,10**e))}var dr=({code:t,data:e,error_message:o,error:n})=>{if(t!==0||!e||e.queryGasLimitErrorUseDefault||n)return{fee:0,error:o};let{gasLimit:a="0"}=e;return{...e,fee:a,error:!1}};async function xe({walletId:t,coinId:e,fromAddr:o,tx:n}){let a=n[0],r=a?.messages||[],i=a?.network||1,s=r?.valid_until||Math.floor(Date.now()/1e3)+600,{address:m}=r[0]||{},c=await q({coinId:e,address:o,toAddr:m,fromAddr:o}),f=c?.chainId,l=c?.info?.nonce,u=await Co({nonce:l,localType:W,fromAddr:o,walletId:t,messages:r,network:i,validUntil:s}),p=JSON.stringify(u.stringInputParams),d=await Eo({fromAddr:o,chainId:f,coinId:e,inputData:p}),S=dr(d),x={coinId:e,coinAmount:0,inputData:p,fromAdr:o,toAdr:m,serviceCharge:S?.fee,extJson:JSON.stringify({nonce:l}),txSource:J.DEX,accountId:t,walletType:at.IMPORT,transactionParams:u?.transactionParams};return{feeInfo:S,extParams:x}}var Ho=-42412,gr=-42418,yr=Ae(qt,500);function zo(t,e){let{baseCoinId:o}=G(t),n=ye(),a=Wt(e?void 0:o,void 0,e?{chainId:+t,address:e}:void 0);return Gt(a?.coinId,n,{withBalanceStatus:!0})}async function Tr({coinId:t=3},{gasInfo:e={},calldata:o}){let{networkFee:n,isNetworkFeeLoading:a,isGasLimitLoading:r}=e,i=a||r,{minGasFee:s}=Kt(e),m=ze(s),c=Te(e,"swap"),f=await yr(t,o),l=c||f;return l===!0&&(l=P("swaptrade_extension_cinteraction_might_error")),{fee:m,feeInt:s,maxFeeInt:n,loading:i,error:l}}async function Ir(t,{decimals:e},{calldata:o}){let{transaction:n}=o,{fee:a}=await ct({coinId:z,address:t}),r;if(n){let c=ft(n);r=mt(n,c)}let{totalPriorityFee:i}=await So([r]),s=X(a,i);return{fee:A(s,e),feeInt:s}}async function Sr(t,{decimals:e},{calldata:o}){let n=await Fo({address:t,transaction:o});return{fee:A(n,e),feeInt:n}}async function wr(t,{decimals:e},{calldata:o}){let n=await To({address:t,inputData:Go(o),toAddr:await Wo(o,t),value:Bo(o)});return{fee:A(n,e),feeInt:n}}async function hr(t,{decimals:e},{calldata:o}){let n=ho.from(o.transactionBlock);n.setSenderIfNotSet(t);let a=n?.blockData?.gasConfig?.budget||"0";return{fee:A(a,e),feeInt:a}}async function xr(t,{decimals:e},{calldata:o}){let n=await vo({transaction:o,fromAddress:t,value:"0"});return{fee:A(n,e),feeInt:n}}async function Fr(t,{decimals:e},{calldata:o}){let n=await Mo(t,o);return{fee:A(n,e),feeInt:n}}async function Cr(t,{decimals:e,coinId:o,chainId:n},a,{calldata:r}){let i=await xe({walletId:a,fromAddr:t,coinId:o,chainId:n,tx:r}),s=i.feeInfo.fee,m=i.feeInfo.error;return{fee:A(s,e),feeInt:s,error:m}}function Xo(t,e){let o=ye(),{baseChain:n,baseCoinId:a}=G(t),{baseCoin:r}=Bt(a,!0),i=ge(n),{symbol:s}=(0,Vo.useSelector)(j),m=Mt(a)||0,[c,f]=(0,k.useState)(0),[l,u]=(0,k.useState)(0),[p,d]=(0,k.useState)(0),[S,x]=(0,k.useState)(!1),[h,b]=(0,k.useState)(!1),v=(0,k.useMemo)(()=>{let M=H(c,m);return{estimatedGasFeeInt:l,maxGasFeeInt:p,decimals:r?.decimals,currencyAmount:M,currencySymbol:s,coinSymbol:r?.symbol,loading:S,error:h}},[r.decimals,r.symbol,s,h,l,p,S,m,t,e,e?.gasInfo?.isNetworkFeeLoading,e?.gasInfo?.isGasLimitLoading]);return(0,Uo.useDeepCompareEffect)(()=>{async function M(){let y={fee:0,feeInt:0};x(!0),b(!1);try{n===ne?y=await Tr(r,e):n===R?y=await Ir(i,r,e):n===De?y=await Sr(i,r,e):n===Ne?y=await hr(i,r,e):n===F?y=await wr(i,r,e):n===be?y=await xr(i,r,e):n===U?y=await Fr(i,r,e):n===W&&(y=await Cr(i,r,o,e)),f(y.fee),u(y.feeInt),d(y.maxFeeInt||y.feeInt)}catch{f(0),u(0)}finally{x(!!y.loading),b(y.error)}}M()},[t,e]),v}async function Er({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){let r=e,{baseChain:i,chainId:s,baseCoinId:m}=G(t);if(i===R){let{account:c}=a,f=c[R];return r.transaction=await Oo(e,f),{target:r}}if(i===ne){if(Te(e?.gasInfo,"swap"))throw new Error(P("wallet_home_toast_network_error"));let f=r.value||r.amount||0,l=G(t).baseCoinId;r={...r,...r.gasInfo};let u=await n({...r,userGasInfo:r.gasInfo,coinId:l,amount:f,baseCoinAmountUse:f}),{nonce:p,updateGasInfo:d={}}=u||{};r.nonce=p,r.maxFeePerGas=d.maxFeePerGas||r.maxFeePerGas,r.maxPriorityFeePerGas=d.maxPriorityFeePerGas||r.maxPriorityFeePerGas,r.gasPrice=d.gasPrice||r.gasPrice;let S=await w().getSelectedWallet(),x=await w().generateFormatedTxParams(t,r),{dispatch:h}=o||{};return h&&(await h(Lt({txParams:x,walletId:S})),r.result=x.result,r.walletId=S),{target:r}}if(i===_e){let c=await w().getSelectedWallet(),f=await w().generateFormatedTxParams(t,r),l=await _t(f,f.address,i,c);return r.result=l,r.walletId=c,{target:r}}if(i===W){let{walletId:c,account:f}=a,l=f[W],{extParams:u}=await xe({walletId:c,fromAddr:l,coinId:m,chainId:s,tx:e});return{target:r,extParams:u}}return{target:r}}async function Fe({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){if(!e)throw new Error("tx is required");let r=e;try{let{target:i,extParams:s}=await Er({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a});return r=i,await w().dexSignAndSubmitTransaction(t,r,s)}catch(i){throw i?.data?.originalError?(i.message=i?.data?.originalError?.error_message,i.code=Ho):i?.message===Et?(i.message=P("wallet_extension_swap_error_hardware_not_support"),i.code=Ho):i.code=gr,i}finally{ie()===re&&w().focusLastOkPopupWithCache()}}async function Jo(t,e){let o=e;try{return typeof e=="string"&&(o=JSON.parse(e)),await w().dexSignTypedDataV4(t,o)}finally{ie()===re&&w().focusLastOkPopupWithCache()}}var Ko=t=>{let{chainId:e}=gt(t),o=de(t).some(c=>At(c.coinId)),n=o?ht(t):de(t),a;o?a=n.find(c=>c.realChainIdHex===e)||{}:a=n[0]||{};let r=Number(o?a.netWorkId:a.chainId),i=yt(t),s=It(t);return{walletType:{isMNEMONIC:s[i].keyringIdentityType===D.MNEMONIC,isPRIVATE:s[i].keyringIdentityType===D.PRIVATE_KEY,isHARDWARE:s[i].keyringIdentityType===D.HARDWARE,isMPC:s[i].keyringIdentityType===D.MPC},chainId:r}};$.initSentry(Ve,He,process.env.APP_VERSION);$.setGlobal({HARDWALLETERROR:Ct,getApiHostname:Ge,getStaticHostname:Oe,getWssHostname:Be,LocalStore:Ce,interceptorHeaders:Ye,urlConfig:je,FeeTypeEnum:rt,TxToastCheckTypeEnum:nt,SolanaTransactionInstanceTypeEnum:ot,netWorkIdToLocalType:new Proxy({},{get(t,e){return O({netWorkId:String(e)})?.localType}}),localTypeToBaseCoinId:new Proxy({},{get(t,e){return O({localType:e})?.coinId}}),isTelegramMiniApp:Ke()===ke,KeyringIdentityTypeEnum:D,RegisterLocalStatusEnum:$e,hexToDecimal:xt,signAndSubmitTransaction:Fe,signTypedDataV4:Jo,signSolanaCommonTransaction:lt,getGasPrice:he,checkMPCStatus:jt,hooks:{useCoin:zo,useUtxoListFn:Zt,useFeeDisplay:Xo,useRegisterStatus:oo,useGasReturnActivity:Ot,useSignInfo:zt,useUtxoEstimateFee:$t,useUtxoCheckBeforePublishFn:Qt,useUtxoSignAndPublishTransactionFn:eo,usePreExecuteFn:Ut},components:{EvmConfirm:po,TronConfirm:No,EthereumNetworkFee:Yt,SupplyGas:Vt,StarknetRegister:fo,Affix:Dt,InteractiveAddress:ao,NetworkFeeEnter:io,ViewData:yo,SectionWrap:so,ModuleWrap:no,TipMessage:mo,CoinSummary:co,UtxoNetworkFeePanel:go,Mev:ko,Layout:ue,SwitchAddress:Po,Navigator:vt,SolanaEntry:wo}});var Pr=()=>{let t=(0,te.useHistory)(),{pathname:e}=(0,te.useLocation)(),o=(0,C.useSelector)(wt);return(0,V.useCallback)((n,a)=>{if(o&&a){t.replace(ut);return}n()},[o,e])},mi=({visibleBar:t})=>{let e=(0,C.useDispatch)(),o=(0,C.useSelector)(j),n=(0,C.useSelector)(St),a=(0,C.useSelector)(pt),r=ro(),i=(0,C.useSelector)(Tt),s=(0,C.useSelector)(dt),m=(0,C.useSelector)(Ko),c=i.map(u=>{if(kt(u.initialType)){u=Pe(u);try{delete u.account[R],delete u.account[F]}catch{Ee()}}return u}),f=Pr(),l=lo();return(0,qo.useMount)(()=>{$.updateGlobal({signAndSubmitTransaction:async(u,p,d)=>await Fe({networkId:u,tx:p,hardwareExtParams:d,checkTxBeforePublish:l,currentWallet:n})})}),V.default.createElement(ue.Box,{style:{height:t?"calc(100% - 54px)":"100%"}},V.default.createElement(Rt,{t:P,dispatch:e,onBack:f,currency:o,currentWallet:n,localeData:a,addressBookList:r,walletList:c,locale:s,walletInfo:m}))};export{mi as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=dex-A5C6WAHO.js.map
