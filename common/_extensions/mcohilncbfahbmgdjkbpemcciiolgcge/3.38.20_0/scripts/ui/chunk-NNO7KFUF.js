import{c as ro}from"./chunk-CGBWDXEW.js";import{d as dn}from"./chunk-NRWOOVOJ.js";import{a as mn}from"./chunk-2XYRURE2.js";import{a as pn,b as un,c as Ye,d as rt}from"./chunk-M7CDJYYG.js";import{g as gn}from"./chunk-VUB7XYHG.js";import{a as fn}from"./chunk-Q2BK5I52.js";import{d as _n}from"./chunk-4NCQWC2K.js";import{a as ln,b as cn}from"./chunk-SR5VKAMR.js";import{d as He,f as Ne,g as sn}from"./chunk-2L5V4MTR.js";import{e as no}from"./chunk-PB7BCSCP.js";import{c as oo}from"./chunk-ERN756XV.js";import{d as on}from"./chunk-FLZ5KV6J.js";import{g as jo,h as qo}from"./chunk-OCTREJ3R.js";import{b as nn}from"./chunk-RG4N2AAJ.js";import{a as an}from"./chunk-JPVBM3R5.js";import{a as At}from"./chunk-YDUQEL3D.js";import{B as Lo,e as Po,ea as jt,f as zt,fa as qt,ga as Kt,h as Ut,i as Wt,j as Vt,l as Ht,m as Yt,n as Zt,o as $t,p as Rt,q as yt}from"./chunk-FJBNQZUR.js";import{d as se}from"./chunk-OQJOA7JT.js";import{g as St,h as Ve,l as rn}from"./chunk-GTSNHSPT.js";import{a as kt}from"./chunk-RJO5LUBF.js";import{a as Ct}from"./chunk-UEENMIFU.js";import{b as Ue,c as We}from"./chunk-3OMHZBKM.js";import{$ as Jo,T as Ko,Wa as ot}from"./chunk-PVSNAFN3.js";import{b as W}from"./chunk-JYKQJVIF.js";import{f as to,q as f}from"./chunk-GBQG32PI.js";import{o as ze}from"./chunk-A3FIPWG3.js";import{Aa as $o,Ba as ht,G as Uo,H as Wo,J as Qt,K as Vo,Oa as Ro,Y as Ho,ac as Nt,m as Oo,ob as Xo,ya as Yo,yb as Qo,za as Zo,zb as en}from"./chunk-NTISK7TT.js";import{F as zo,_ as ke,b as pe,ba as Ee,ja as $,k as Mo,ka as tt,la as ae,m as Go,y as Xt,z as Do}from"./chunk-CU7RFE6B.js";import{a as eo}from"./chunk-QZUNX5I4.js";import{a as nt,b as De}from"./chunk-IVA2TTR4.js";import{e as Ge}from"./chunk-OG3IV3YP.js";import{d as q,f as wt}from"./chunk-37O7OMRA.js";import{u as tn}from"./chunk-VL5VJIZ7.js";import{c as T}from"./chunk-TU7CE5HJ.js";import{$a as ko,Ac as Jt,Gb as Io,Jb as bo,Oc as br,Uc as Qe,W as Ao,Wc as Bo,Xc as et,Ya as kr,Yc as Fo,a as ho,b as Ar,fc as Er,ja as So,jc as Be,nb as Gt,oc as Ir,wb as Eo}from"./chunk-YILNSICT.js";import{E as Fe,G as Me,c as me,o as Z,q as vo,y as Dt}from"./chunk-L4N7WJIQ.js";import{F as xt,M as Co,a as Ft,f as Ae,j as Mt,pa as Se,r as No}from"./chunk-LBCQTFOD.js";import{N as z,l as O,w as o}from"./chunk-V63HWKAL.js";import{b as Sr}from"./chunk-XFAFBXWC.js";import{H as he,T as Tt,Z as Xe,ca as h}from"./chunk-2EJYCNYZ.js";import{a as L}from"./chunk-B75PPTYD.js";import{f as y,m as i,o as l}from"./chunk-UGZFXKPB.js";i();l();var E=y(L()),pr=y(Nt()),ur=y(he());z();i();l();var F=y(L()),sr=y(eo()),ir=y(ze());z();i();l();var Et=y(L());i();l();var ie=y(L()),wn=y(Nt()),hn=y(he());z();i();l();var xn=y(ze()),at=y(L()),Tn=y(Nt());function yn({chainId:t,walletId:e}){let[n,r]=(0,at.useState)(!1),[a,s]=(0,at.useState)([]),c=(0,Tn.useSelector)(Xo);e=e||c;let m=(0,xn.useMemoizedFn)(async()=>{r(!0),s([]);try{let _=await Zo({chainId:t,walletId:e}),{data:p=[]}=_;s(p)}catch{s([])}finally{r(!1)}});return(0,at.useEffect)(()=>{t&&m()},[m,t]),{loading:n,coinList:a}}i();l();var oe={container:"_container_1vjlb_1",scrollable:"_scrollable_1vjlb_7",wrapContainer:"_wrapContainer_1vjlb_12",icon:"_icon_1vjlb_20",tokenLogo:"_tokenLogo_1vjlb_23",tokenLogoLarger:"_tokenLogoLarger_1vjlb_30",chainLogo:"_chainLogo_1vjlb_37",tab:"_tab_1vjlb_52",list:"_list_1vjlb_55",chainSmall:"_chainSmall_1vjlb_58",chainLarge:"_chainLarge_1vjlb_62"};var vr=({iconUrl:t,chainUrl:e})=>ie.default.createElement(T.Box,{className:(0,hn.default)(oe.icon,e?oe.chainSmall:oe.chainLarge)},ie.default.createElement(Fe,{className:e?oe.tokenLogo:oe.tokenLogoLarger,alt:"coin-icon",errorImg:Ge,src:t}),!!e&&ie.default.createElement(Fe,{className:oe.chainLogo,alt:"coin-icon",errorImg:Ge,src:e,width:16,height:16}));function ao({onSelect:t,onBack:e,chainId:n,walletId:r,chainName:a}){let{usdToThisRate:s}=(0,wn.useSelector)(en),{coinList:c}=yn({chainId:n,walletId:r}),m=_=>{t({..._}),e()};return ie.default.createElement(T.Container,{className:oe.container},ie.default.createElement(Ct,{offsetTop:0},ie.default.createElement(kt,{title:o("wallet_extension_swapforgas_dialog_header_chain_token",{chain:a}),onBack:e,closeable:!1,sticky:!1,asPage:!0})),ie.default.createElement(se,{className:oe.list,loading:!c.length&&{size:Xe.SIZE.lg},dataSource:c,renderItem:_=>{let{amountNum:p,tokenSymbol:u,tokenLogoUrl:x,currencyAmount:d,tokenName:N}=_;return ie.default.createElement(se.Coin,{icon:ie.default.createElement(vr,{iconUrl:x}),symbol:u,balance:p,name:N,market:O.mul(d,s),onClick:()=>{m(_)}})}}))}var Nn=({visible:t,closeCallback:e,onSelect:n,chainId:r,walletId:a,chainName:s})=>Et.default.createElement(T.Portal,{noStyle:!0},t&&Et.default.createElement(T.Box,{className:oe.wrapContainer},Et.default.createElement(ao,{onSelect:n,onBack:e,chainId:r,chainName:s,walletId:a})));i();l();var An=y(he()),so=y(L());i();l();var Cn={errorContainer:"_errorContainer_12hl2_1"};var Sn=({errorText:t,onClick:e,btnText:n,className:r})=>so.default.createElement("div",{className:(0,An.default)(Cn.errorContainer,r)},so.default.createElement(Dt.State,{type:Dt.State.TYPE.noNetwork,title:t,onButtonClick:e,buttonText:n}));i();l();var st=y(L());Se();z();var kn=({visible:t,checkFlag:e,code:n,enoughFlag:r,onCancel:a,onConfirm:s,onClose:c,chainName:m,reminderInfo:_})=>{let p=[{message:o("swaptrade_dialog_text_irregular_operations"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.BLACK_LIST,code:ae.BLACK_LIST},{message:o("swaptrade_dialog_modal_service_closed"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.CLOSE,code:ae.CLOSE},{message:o("swaptrade_dialog_text_daily_orderlimit"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.LIMIT,code:ae.LIMIT},{message:o("swaptrade_extension_dialog_desc_swapgas_inprogress"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:$.PENDING_GAS_STATION,code:ae.PENDING_GAS_STATION},{message:o("swaptrade_extension_dialog_desc_similar_order_processing"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_extension_dialog_btn_continue_submit_swap"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:$.PENDING_SWAP,enoughFlag:tt.ENOUGH,code:ae.PENDING_SWAP},{message:o("swaptrade_extension_dialog_desc_swap_order_processing"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:$.PENDING_SWAP,enoughFlag:tt.NOT_ENOUGH,code:ae.PENDING_SWAP},{message:o("swaptrade_swapforgas_desc_in_progress",{chain:m}),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.WALLET_HAS_PENDING_ORDER},{message:o("defi_dextrade_errormsg_tron_change"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.TRON_PERMISSION,code:ae.TRON_PERMISSION},{title:o("wallet_extension_swapforgas_dialog_title_high_payment"),message:o("wallet_extension_swapforgas_dialog_desc_high_payment"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.PAY_TOO_LARGE,code:ae.PAY_TOO_LARGE},{title:o("wallet_extension_swapforgas_dialog_title_low_payment"),message:o("wallet_extension_swapforgas_dialog_desc_low_payment"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:$.PAY_TOO_SMALL,code:ae.PAY_TOO_SMALL}],{needReminder:u,reminderContent:x,reminderTitle:d}=_||{},{confirmName:N,cancelName:g,message:I,title:C}=(0,st.useMemo)(()=>u?{confirmName:o("swaptrade_extension_dialog_btn_continue_submit_swap"),cancelName:o("wallet_extension_btn_general_cancel"),message:x,title:d}:p.find(A=>Co(e)?A.code===+n:A.checkFlag===$.PENDING_SWAP?A.checkFlag===+e&&A.enoughFlag===+r:A.checkFlag===+e)||p[1],[e,n,r,u,x,d]);return st.default.createElement(Z.Tip,{visible:t,title:C,confirmText:N,cancelText:g,onConfirm:s,onCancel:a,onClose:c,btnFull:!1},st.default.createElement("div",null,I))};i();l();z();var lt=y(L());i();l();var it={alert:"_alert_1txjs_1"};i();l();var In=({priceInfo:t})=>{let{fromTokenSymbol:e,toTokenSymbol:n,currencyAbnormalType:r}=t;switch(r){case"1":return lt.default.createElement(me,{className:it.alert,title:o("swaptrade_top_reminder_paysymbol_failed",{paySymbol:e}),type:me.TYPE.error,closable:!1});case"2":return lt.default.createElement(me,{className:it.alert,title:o("swaptrade_top_reminder_receivesymbol_failed",{receiveSymbol:n}),type:me.TYPE.error,closable:!1});case"3":return lt.default.createElement(me,{className:it.alert,title:o("swaptrade_top_reminder_payreceive_failed",{paySymbol:e,receiveSymbol:n}),type:me.TYPE.error,closable:!1});default:break}return t.isQuoteAvailable==="0"?lt.default.createElement(me,{className:it.alert,title:o("wallet_extension_swapforgas_error_gas_price_flux"),type:me.TYPE.error,closable:!1}):null};i();l();var po=y(L()),mt=y(Nt()),qn=y(eo());z();i();l();var bn={min:"0",max:"0",normal:"0",minGasPrice:"0",supportEip1559:!1,suggestBaseFee:"0",safePriorityFee:"0",proposePriorityFee:"0",fastPriorityFee:"0",baseFee:"0"};i();l();var le=y(L()),$n=y(eo()),_t=y(ze());z();Ar();wt();br();Fo();Bo();i();l();Eo();i();l();var io=(t,e)=>`Failed to get tx hash, localType is ${t}, signedTx is ${e}`;async function It(t,e){try{let r=Gt({localType:t})?.coinType,{wallet:a}=await oo(r);return await a?.calcTxHash({data:e})}catch{throw new Error(io(t,e))}}async function Ns(t,e){try{e=e||[];let r=Gt({localType:t})?.coinType,{wallet:a}=await oo(r);return await Promise.all(e.map(c=>a?.calcTxHash({data:c})))}catch{throw new Error(io(t,e.toString()))}}i();l();wt();Se();var vn=async t=>{try{return await q().getMpcIdByWalletId(t)}catch{return null}},Pn=async t=>{try{return await q().accountCheck(t)}catch{return!1}},Ln=async t=>{try{let{data:e}=await dn([{mpcId:t}]);return{mpcStatus:Mt(e,"[0].mpcStatus"),accountStatus:Mt(e,"[0].accountStatus")}}catch{return{mpcStatus:rt.ESCAPE,accountStatus:Ye.FROZEN}}};i();l();var Yn=y(L()),ct=y(ze());Se();z();i();l();var Ze=y(L());Se();z();i();l();var On={extLink:"_extLink_f58rv_1"};var bt=({link:t,monitorEvt:e=Ae})=>{let n=()=>{e({is_click_risk_link:!0}),globalThis.platform.openTab({url:t?.scamsUrl})};return Ze.default.createElement("span",{className:On.extLink,onClick:n},o("wallet_extension_function_link_case"))},Pr=()=>{let t=At(),e=(C,A)=>({title:o("wallet_extension_header_title_transaction_risk"),desc:o(C,{case:Ze.default.createElement(bt,{link:t,monitorEvt:A})}),mainBtnText:o("wallet_extension_function_btn_cancel"),subBtnText:o("wallet_extension_function_btn_advanced")}),n=(C="")=>({screenOne:{title:o("wallet_extension_function_title_approve_to_eoa"),desc:o("wallet_extension_function_desc_approve_to_eoa",{address:no(C),link:Ze.default.createElement(bt,{link:t,monitorEvt:zt})}),mainBtnText:o("wallet_extension_function_btn_cancel"),subBtnText:o("wallet_extension_function_btn_advanced")},screenTwo:{title:o("wallet_extension_function_title_approve_to_eoa"),desc:o("wallet_extension_function_desc_developer_continue"),mainBtnText:o("wallet_extension_mid_dialog_btn_cancel"),subBtnText:o("wallet_extension_function_btn_continue_transaction")},monitorEvt:zt}),r=()=>({screenOne:e("wallet_extension_mid_desc_transaction_account_risk",Vt),screenTwo:{title:o("wallet_extension_header_title_transaction_risk"),desc:o("wallet_extension_mid_desc_continue_transaction"),mainBtnText:o("wallet_extension_mid_dialog_btn_cancel"),subBtnText:o("wallet_extension_mid_btn_continue_transaction")},monitorEvt:Vt}),a=()=>({screenOne:e("wallet_extension_mid_desc_transaction_account_risk",Wt),monitorEvt:Wt}),s={title:o("wallet_extension_header_title_transaction_risk"),desc:o("wallet_extension_function_desc_developer_continue"),mainBtnText:o("wallet_extension_mid_dialog_btn_cancel"),subBtnText:o("wallet_extension_function_btn_continue_transaction")};return{getEoaModalParams:n,getEthSignModalParams:()=>({screenOne:e("wallet_extension_sign_card_desc_risky_blocked",Ut),monitorEvt:Ut}),getLowerValueModalParams:()=>({screenOne:e("wallet_extension_sign_card_desc_risky_unusual",jt),screenTwo:s,monitorEvt:jt}),getSolPermissionsModalParams:a,getTronPermissionsModalParams:r,getBlackAddressWarnModalParams:(C="")=>({screenOne:{title:o("wallet_extension_header_title_transaction_risk"),desc:C,mainBtnText:o("wallet_extension_function_btn_cancel"),subBtnText:o("wallet_extension_function_btn_advanced")},screenTwo:s,monitorEvt:yt}),getStrongBlackAddressModalParams:(C="")=>({screenOne:{title:o("wallet_extension_header_title_transaction_risk"),desc:o("wallet_extension_address_card_desc_risky_blocked",{address:no(C),case:Ze.default.createElement(bt,{link:t,monitorEvt:Rt})}),mainBtnText:o("wallet_extension_function_btn_cancel"),subBtnText:o("wallet_extension_function_btn_advanced")},monitorEvt:Rt}),getSuspicionWithdrawAddressModalParams:()=>({screenOne:e("wallet_extension_mid_desc_transaction_address_risk",qt),screenTwo:s,monitorEvt:qt}),getNotSameParamsModalParams:()=>({screenOne:e("wallet_extension_warning_tampered_blocking",Ht),monitorEvt:Ht}),getRiskRejectParamsModalParams:()=>({screenOne:e("wallet_extension_warning_risky_blocking",Zt),monitorEvt:Zt}),getRiskAlertParamsModalParams:()=>({screenOne:e("wallet_extension_warning_risky_doublecheck",Yt),screenTwo:s,monitorEvt:Yt}),getMaliciousTokenModalParams:()=>({screenOne:e("wallet_extension_warning_risky_doublecheck_token",$t),monitorEvt:$t}),getConnectRiskModalParams:C=>({screenOne:{title:o("wallet_extension_tg_risk_alert_title_link"),desc:o("wallet_extension_tg_risk_alert_desc_link",{host:C,case:Ze.default.createElement(bt,{link:t})}),mainBtnText:o("wallet_extension_tg_risk_alert_btn_link")}})}},Bn=Pr;i();l();var G=y(L()),_o=y(he());Se();i();l();var Q=y(L()),$e=y(ze()),Mn=y(he());z();i();l();var Ie={FILL_UP:"FILL_UP",CONFIRM:"CONFIRM",CANCEL:"CANCEL",ETH_SIGN:"ETH_SIGN"},lo=t=>{t&&typeof t!="string"&&(t=String(t));let e=t?.length;return e<14?16:e<16?14:12},Lr=t=>{t&&typeof t!="string"&&(t=String(t));let e=t?.length;return e<8?16:e<9?14:12},co={[Ie.ETH_SIGN]:{size:h.SIZE.lg,type:h.TYPE.red,category:h.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:lo},[Ie.CONFIRM]:{size:h.SIZE.lg,type:h.TYPE.highlight,category:h.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:lo},[Ie.CANCEL]:{size:h.SIZE.lg,type:h.TYPE.primary,category:h.CATEGORY.outline,autoSize:Lr,btnText:"wallet_extension_btn_general_cancel"},[Ie.FILL_UP]:{size:h.SIZE.lg,type:h.TYPE.highlight,category:h.CATEGORY.fill,autoSize:lo,btnText:"wallet_extension_placeorder_textbtn_replenish"}};i();l();var vt={"action-buttons":"_action-buttons_j3bvq_1",actionButtons:"_action-buttons_j3bvq_1","action-button":"_action-button_j3bvq_1",actionButton:"_action-button_j3bvq_1","action-button__content":"_action-button__content_j3bvq_12",actionButtonContent:"_action-button__content_j3bvq_12"};var Gn=({coinId:t,onClick:e,actionType:n,btnText:r,children:a,autoSize:s,...c})=>{let[m,{toggle:_}]=(0,$e.useBoolean)(!1),{btnText:p,autoSize:u,...x}=co[n]||{},d=(0,Q.useMemo)(()=>r||o(p),[r,p]),N=(0,$e.useMemoizedFn)(async()=>{if(typeof e=="function")try{_(),e&&await e?.(n)}catch(g){console.log(g)}finally{_()}},[n,e]);return Q.default.createElement(h,{loading:m,...x,...c,className:vt["action-button"],contentClassName:vt["action-button__content"],onClick:N},Q.default.createElement(f.AdaptiveText,{inherit:!0,autoSize:s||u,ellipsis:{tooltip:!0},style:{lineHeight:"20px"}},d))},Or=({txId:t,coinId:e,walletId:n,address:r,actionType:a,onClick:s,receiveOnly:c,...m})=>{let _=_n(e),[p,{toggle:u}]=(0,$e.useBoolean)(),{btnText:x}=co[a],d=(0,$e.useMemoizedFn)(async()=>{u(),s&&await s()},[]);return Q.default.createElement(Q.default.Fragment,null,Q.default.createElement(Gn,{onClick:d,actionType:a,btnText:o(x,{token:_?.symbol}),...m}),Q.default.createElement(Fn,{walletId:n,address:r,visible:p,closeCallback:u,coinId:e,txId:t,receiveOnly:c}))},Dn=({className:t,buttonGroup:e,children:n})=>Q.default.createElement(T.FlexBox,{className:(0,Mn.default)(vt["action-buttons"],t)},(e||[])?.map((r,a)=>r?r?.children?r?.children:r?.actionType===Ie.FILL_UP?Q.default.createElement(Or,{...r,key:a}):Q.default.createElement(Gn,{...r,key:r.btnText}):null),n);Dn.ACTION_TYPE=Ie;var Pt=Dn;i();l();var ee={main:"_main_1fewt_1",box:"_box_1fewt_6",isPureScreen:"_isPureScreen_1fewt_12",tipImg:"_tipImg_1fewt_15",tipImgIcon:"_tipImgIcon_1fewt_24",title:"_title_1fewt_28",decs:"_decs_1fewt_36",extLink:"_extLink_1fewt_42",footerWrap:"_footerWrap_1fewt_46",screenOneButtons:"_screenOneButtons_1fewt_49",extButton:"_extButton_1fewt_53"};var zn=t=>{let{children:e,desc:n,title:r,isPureScreen:a}=t;return G.default.createElement(T.FlexBox,{className:ee.main,direction:T.DIRECTION.vertical},G.default.createElement(T.Box,{className:(0,_o.default)(ee.box,{[ee.isPureScreen]:a})},G.default.createElement(T.Box,{className:ee.tipImg},G.default.createElement(Tt,{className:(0,_o.default)("okx-wallet-plugin-risk-trading",ee.tipImgIcon)})),G.default.createElement(f.Text,{className:ee.title,align:f.ALIGN.center},r),G.default.createElement(f.Text,{className:ee.decs,size:f.SIZE.sm,align:f.ALIGN.center},n)),G.default.createElement(T.Box,{className:ee.footerWrap},e))},Br=({modalParams:t,handleCancel:e,handleNext:n})=>{let{screenOne:r,screenTwo:a,monitorEvt:s=Ae}=t,[c,m]=(0,G.useState)(!1),_=async()=>{s({is_click_cancel_link:!0}),m(!0),await e(),m(!1)},p=async()=>{s({is_click_advanced_link:!0}),n()};return G.default.createElement(zn,{desc:r.desc,title:r.title},G.default.createElement(T.Box,{className:ee.screenOneButtons},G.default.createElement(h,{block:!0,loading:c,size:h.SIZE.lg,onClick:_,type:h.TYPE.highlight,category:h.CATEGORY.fill},r.mainBtnText),a?G.default.createElement(T.Box,{className:ee.extButton,onClick:p},r.subBtnText):null))},Fr=({handleCancel:t,handleNext:e,modalParams:n})=>{let{screenTwo:r={},monitorEvt:a=Ae}=n,s=[{actionType:Pt.ACTION_TYPE.CANCEL,btnText:r.subBtnText,onClick:()=>{a({is_click_advanced_continue_link:!0}),e()}},{actionType:Pt.ACTION_TYPE.CONFIRM,btnText:r.mainBtnText,onClick:()=>{a({is_click_advanced_cancel_link:!0}),t()}}];return G.default.createElement(zn,{isPureScreen:!0,desc:r.desc,title:r.title},G.default.createElement(T.Box,{className:ee.screenTwoButtons},G.default.createElement(Pt,{buttonGroup:s})))},Mr=({handleCancel:t,closeModal:e,modalParams:n})=>{let[r,a]=(0,G.useState)(1);return r===2?G.default.createElement(Fr,{modalParams:n,handleCancel:t,handleNext:e}):G.default.createElement(Br,{modalParams:n,handleCancel:t,handleNext:()=>{a(2)}})},Un=Mr;i();l();Se();z();var be={NATIVE:132,TOKEN:99,NFT:66,OTHERS:33},Re={add:"+",sub:"-"},Gr="306001",Dr=t=>{let{approveList:e=[],assetChange:n=[]}=t||{};if(e.length){let r=e[0];if([pe.AUTHORIZATION,pe.CANCEL_AUTHORIZATION,pe.INCREASE_ALLOWANCE,pe.DECREASE_ALLOWANCE,pe.COMMON_APPROVE,pe.NFT_AUTHORIZATION,pe.NFT_CANCEL_AUTHORIZATION].includes(r?.approvalType))return r.approvalType}return n.length?pe.TRANS_OUT:""},Wn=(t,e)=>{let n=t.filter(({operator:s})=>s===Re.sub),r=t.filter(({operator:s})=>s===Re.add),a=(s,c)=>{let m=s[e],_=c[e],p=s.asset?.decimals,u=c.asset?.decimals;return p&&u&&(m=O.div(m,O.pow(10,p)),_=O.div(_,O.pow(10,u))),O.sub(_,m)};return n.sort(a),r.sort(a),[...n,...r]},zr=(t,e)=>{let n=t.assetsDiffs?.[e]||{},r=t.exposures?.[e]||[],a=t.permissions?.[e]||[],s=t.permissionMsg||"",c=t.intention||{},m=t.blackAddressWarning||{},_=t.causeRiskItem||[];return{assetsDiff:n,exposure:r,permission:a,permissionMsg:s,intention:c,blackAddress:m,causeRiskItem:_}},Ur=t=>{let e=[];return Ft(t)&&t.forEach(n=>{let{asset:r}=n||{};if(n?.diff){let a=O.gt(n.diff,0);e.push({asset:r,usdValue:n.diffUsdValue,operator:a?Re.add:Re.sub,rawValue:a?n.diff:n.diff?.slice(1)})}else n?.out?.forEach(a=>{e.push({asset:r,operator:Re.sub,...a})}),n?.in?.forEach(a=>{e.push({asset:r,operator:Re.add,...a})})}),e},Wr=(t,e)=>{if(!t||xt(t))return{};let{assetsDiff:n,exposure:r,permission:a,permissionMsg:s,intention:c,blackAddress:m,causeRiskItem:_}=zr(t,e),p=[];if(Ft(r)){let C=r[0]||{},{asset:A={},spenders:M={}}=C;Object.entries(M).forEach(([H,D])=>{p.push({asset:A,address:H,...D})})}let u=Ur(n),x={};[be.NATIVE,be.TOKEN,be.OTHERS].forEach(C=>{let A=u.filter(M=>M?.asset?.assetType===C);x[C]=Wn(A,"rawValue")});let N=u.filter(C=>C?.asset?.assetType===be.NFT),g=Wn(N,"tokenNum"),I=[...x[be.NATIVE],...x[be.TOKEN],...g,...x[be.OTHERS]];return{intention:c,permission:a,permissionMsg:s,assetChange:I,approveList:p,blackAddress:m,causeRiskItem:_}},Vn=t=>t&&t?.result===!1,Hn=t=>t&&(t?.resultCode===Gr||t?.addFundsFlag),Vr=t=>Vn(t)&&!Hn(t),mo=(t,e,n={})=>{let{from:r,preExecuteFailed:a=!1}=n||{},s={};return e?.forEach(c=>{let m=t?.find(_=>_?.checkType===c)||{};if(c===ke.SAFE_ADDRESS){let _=Boolean(m?.blackAddress),p=m?.isSimilar||Ee.FAILED;s[c]={...m,isDefraud:_,similarType:p,isSimilar:[Ee.EXACT,Ee.ROUGH].includes(p)}}else if(c===ke.CONTRACT_ADDRESS)s[c]={...m,isContract:typeof m?.result=="boolean"&&!m?.result};else if(c===ke.KYS){let _=Wr(m,r);s[c]={..._,txType:Dr(_)}}else if(c===ke.VERIFY_GAS_LIMIT){let _={...m};a&&(_.result=!1),s[c]={..._,isPreExecuteFailed:Vn(_),isPreExecuteGasError:Hn(_),isPreExecuteNonGasError:Vr(_)}}else s[c]=m}),s};var Zn=()=>(0,ct.useMemoizedFn)(async t=>{try{let{data:e}=await Vo(t);return mo(e,t?.checkTypes,t)}catch{return mo([],t?.checkTypes,{preExecuteFailed:!0})}},[]);var Hr=()=>{let{getStrongBlackAddressModalParams:t}=Bn();return(0,ct.useMemoizedFn)(async(e,n)=>{let r=e;if(r?.similarType!==Ee.EXACT&&!r?.isDefraud)return Promise.resolve();let a=e?.address||n?.address||"";r?.similarType===Ee.EXACT&&Lo({resource:"extension",black_address:a});let s=e?.rawAddress||Oo(a),c={};if(r?.tagExt)c=t(r.address);else{let m=r?.isDefraud?r.msg:o("wallet_extension_modaldesc_riskaddress",{accountAddress:s});c={screenOne:{title:o("wallet_extension_protocol_popup_risk_warning"),desc:m,mainBtnText:o("wallet_extension_function_btn_cancel"),subBtnText:o("wallet_extension_function_btn_advanced")},screenTwo:{title:o("wallet_extension_protocol_popup_risk_warning"),desc:o("wallet_extension_function_desc_developer_continue"),mainBtnText:o("wallet_extension_mid_dialog_btn_cancel"),subBtnText:o("wallet_extension_function_btn_continue_transaction")},monitorEvt:r?.isDefraud?yt:Ae}}return new Promise((m,_)=>{let p=Z.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:Yn.default.createElement(Un,{modalParams:c,handleCancel:()=>{Po(),_(),p.destroy()},closeModal:()=>{m(),p.destroy()}})})})},[])},Yr=()=>{let t=Zn();return(0,ct.useMemoizedFn)(async(e,n)=>{let r=e;return xt(e)&&(r=(await t(n))[ke.CONTRACT_ADDRESS]||{}),new Promise((a,s)=>{if(r?.isContract){let c=Z.prompt({alignBottom:!1,hideCloseBtn:!0,infoType:Z.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:h.TYPE.highlight,size:h.SIZE.lg},cancelBtnProps:{category:h.CATEGORY.outline,size:h.SIZE.lg},title:o("wallet_extension_address_popup_security_alert"),confirmText:o("wallet_extension_address_popup_btn_cancel"),cancelText:o("wallet_extension_address_popup_btn_continue"),text:o("wallet_extension_address_popup_security_alert_desc"),onConfirm:()=>{Kt({is_click_cancel_reject_link:!0}),c.destroy(),s()},onCancel:()=>{Kt({is_click_continue_link:!0}),c.destroy(),a()}})}else a()})},[])};var Zr=()=>(0,_t.useMemoizedFn)(async t=>{let{coinId:e,address:n,chainId:r,...a}=t||{};if(!n||!e)return{};try{let s={coinId:e,address:n},{data:c}=await Wo(s,{chainId:r,...a}),{info:m,..._}=c||{};return{..._,...m||{}}}catch(s){return Promise.reject(s)}},[]),fl=()=>(0,_t.useMemoizedFn)(async t=>{try{let n=await(await fetch(t)).json();return n&&n?.custom_payload&&n?.state_init&&n?.jetton_wallet?{customPayload:n?.custom_payload,stateInit:n?.state_init,fromJettonAccount:n?.jetton_wallet}:{}}catch(e){return console.log("error:",e),{}}},[]),$r=7e3,gl=({coinId:t,address:e,chainId:n,...r},a={})=>{let s=Zr(),[c,m]=(0,le.useState)({}),{ready:_=!0,pollingInterval:p,...u}=a||{},x={ready:!!t&&!!e&&!!_,pollingInterval:p||$r,...u};return(0,_t.useRequest)(async()=>await s({coinId:t,address:e,chainId:n,...r}),{...x,onSuccess:d=>{m(d),x?.onSuccess?.(d)}}),c};var Rr=({fromAddr:t,localType:e})=>(0,le.useCallback)(({params:n,isSignError:r})=>{ho.captureEvent({message:`signTxError: ${t}`,contexts:{report:{info:JSON.stringify({params:n,isSignError:r,localType:e})}},exception:{values:[{type:"BIZ_ERROR_signTxError",value:t}]},level:"error"})},[t,e]),Rn=({fromAddr:t,localType:e,walletId:n})=>{let r=Ve(n),a=Rr({fromAddr:t,localType:e});return(0,le.useCallback)(async({params:s={},fromAddr:c,needCapture:m=!1,..._})=>{try{let p=c||t;return nn(r?.initialType)?await on({walletInfo:r,txParams:s,baseChain:e}):await q().signTransaction(s,p,e,n,_)}catch(p){throw m&&a({params:s,isSignError:p?.message===Xt}),[tn,Do].includes(p?.message)?p:new Error(Xt)}},[t,e,r,n])},xl=({coinId:t,txType:e,walletId:n,coinAmount:r,fromAddr:a,toAddr:s,localType:c,networkFee:m,extJson:_,...p})=>{let u=Ve(n),x=u?.walletId;return(0,le.useCallback)(async(d,N={})=>{let g=N?.walletId||x,I=N?.txHash||await It(c,d),C={coinId:t,txHash:I,txType:e,extJson:_,signedTx:d,coinAmount:r,toAdr:s,fromAdr:a,serviceCharge:m,accountId:g,walletType:u?.serverWalletType,txSource:Jt.NORMAL,...p,...N},A=await q().getRequestHeaders({needSign:!0,currency:"usd",walletId:g}),{data:M}=await Qe(et.postTx,C,{headers:A});return M},[c,t,e,_,r,s,a,m,x,u?.serverWalletType,p])},Tl=({walletId:t,...e})=>{let n=Ve(t),r=n?.walletId;return(0,le.useCallback)(async(a,s={})=>{let c=s?.walletId||r,m=a.map(u=>({...u,accountId:c,walletType:n?.serverWalletType,txSource:Jt.NORMAL,...e,...s})),_=await q().getRequestHeaders({needSign:!0,currency:"usd",walletId:c}),{data:p}=await Qe(et.postBatchTxV2,{txList:m},{headers:_});return p},[r,n?.serverWalletType,e])},yl=(t,e)=>{let n=(0,le.useRef)(),r=(0,$n.useHistory)(),a=St(),s=t||a,c=rn(s),m=At();return(0,le.useCallback)(async()=>{if(!c)return Promise.resolve();let _=await vn(s);if(!_)return Promise.resolve();let p=await Pn(_),{mpcStatus:u,accountStatus:x}=await Ln(_);if(x===Ye.NORMAL&&u!==rt.ESCAPE&&p)return Promise.resolve();let N={},g=()=>{e?.(),r.replace(Jo),n.current?.destroy()},I=window.location.pathname.includes(Ko);return p?x===Ye.DELETE?N={title:o("extension_wallet_error_toast_modatitle_deleteacct"),text:o("extension_wallet_error_toast_modaldesc_deleteacct"),confirmText:o("extension_wallet_error_toast_btn_switch_wallet"),onConfirm:g}:x===Ye.FROZEN?N={title:o("extension_wallet_error_toast_title_freeze_account"),text:o("extension_wallet_error_toast_text_freeze_desc"),confirmText:o("extension_wallet_error_toast_btn_switch_wallet"),onConfirm:g}:u===rt.ESCAPE&&(N={title:o("extension_wallet_error_toast_modaltitle_wallet_escaped"),text:o("extension_wallet_error_toast_modaldesc_wallet_escapeddesc"),confirmText:o("extension_wallet_error_toast_btn_switch_wallet"),onConfirm:g}):N={text:o("extension_wallet_error_toast_text_verify_again1"),title:o("extension_wallet_error_toast_title_verify_again"),confirmText:o("extension_wallet_error_toast_btn_verification"),onConfirm:async()=>{e?.(),n.current?.destroy();let C=o("wallet_common_okx_link");await q().setMpcAction(pn.VERIFY,s),globalThis.open(m?.mpcLogin||`https://${C}${un}`),window.close()},cancelText:I?void 0:o("extension_wallet_error_toast_btn_switch_wallet"),cancelBtnProps:I?void 0:{category:h.CATEGORY.outline,size:h.SIZE.lg},onCancel:I?void 0:g},n.current=Z.prompt({visible:!0,hideCloseBtn:!0,infoType:Z.Prompt.INFO_TYPE.warn,alignBottom:!1,maskClosable:!1,confirmBtnProps:{type:h.TYPE.highlight,size:h.SIZE.lg},...N}),Promise.reject()},[r,c,s,e])};Ir();Sr();Eo();kr();Er();wt();var Kn=({priceInfo:t,setLoading:e,loading:n,setErrorInfo:r,coinId:a,toChainId:s,chainList:c,txId:m,amount:_,isValidateAmount:p})=>{let u=(0,mt.useDispatch)(),x=(0,qn.useHistory)(),{toTokenSymbol:d,fromTokenValue:N,fromTokenContractAddress:g,toTokenAddress:I,currencyAbnormalType:C,fromChainName:A,fromTokenSymbol:M,balance:H,fromChainId:D,balanceAbnormalType:ne,isQuoteAvailable:xe}=t,{allAddress:Te,currentAddress:U}=(0,mt.useSelector)(S=>ro(S,D)),{currentAddress:ye}=(0,mt.useSelector)(S=>ro(S,s)),re=()=>xe==="0"||C!=="0"||ne!=="0"?!1:H&&_&&p?+H>=+_:!1,J=()=>C!=="0"||ne!=="0"?o("swaptrade_footer_btn_fill_up",{nativeToken:d}):H&&_?+H>=+_?o("swaptrade_footer_btn_fill_up",{nativeToken:d}):o("swaptrade_bot_btn_insufficient_balance",{token:M}):o("swaptrade_footer_btn_fill_up",{nativeToken:d}),we=async()=>{let S={amount:_,chainId:D,currentUserWalletAddress:U,fromTokenAddress:g,toChainId:s,toTokenAddress:I,walletAddresses:Te},{data:k}=await $o(S);return k},je=async()=>{let{data:S}=await Uo({coinId:a,address:U});return S},ft=async({from:S,to:k,data:b,value:P},j)=>{let te={address:U,inputData:b,coinId:a,value:P,tokenAddress:k},{data:X}=await Qt(te),Ce=j?.info?.gasPrice||bn,Oe=j?.info?.newNonce,{normal:qe}=Ce,Ke={chainId:D,from:S,to:k,data:b,gasPrice:Be(De(qe)),value:Be(De(P)),nonce:Be(De(Oe)),gas:Be(De(X.gasLimit)),gasLimit:Be(De(X.gasLimit))},Je=await q().signTransaction(Ke,Ke.from),gt=await It(Ao,Je);return{rawTx:Je,txHash:gt,txParams:Ke,gasLimitInfo:X}},dr=async S=>await q().silentOfflineSignTron(S),fr=async S=>{let b=JSON.parse(S.unsignedTx)?.data,{signature:P}=await Ro({coinId:a,fromAddress:U,instanceType:zo.TRANSACTION,serializedMessage:b,needToReplaceRecentBlockhash:!1,onSign:({finalizedMessage:j})=>q().signCommonMessage(U,j,ko)});return{signature:P}},gr=Rn({fromAddr:U,localType:So}),xr=async S=>{let b=JSON.parse(S.unsignedTx)?.data;return{signature:await gr({params:{data:b,type:"raw"},fromAddr:U})}},Ot=S=>({chainId:D,fromAmount:_,fromTokenAddress:g,payValue:N,toChainId:s,userWalletAddress:U,walletAddresses:Te,receiveWalletAddress:ye,...S}),Tr=async(S,k)=>{let{txID:b,signedTx:P}=S,{to:j,data:te}=k,{info:{fee:X}}=await Ho({coinId:a,address:U},{fromAddr:U,scenario:Mo.SCENARIO_INTERACTION,inputData:te,toAddr:j,dataLength:te.length}),Ce=JSON.stringify({chainId:D,serviceCharge:X,inputData:k.data,toAdr:k.to,coinAmount:k.value,signedTx:P,txSource:3,fromAdr:k.from,txHash:b,extJson:JSON.stringify({nonce:"",priorityFee:"",feeType:"",oldTxHash:"",maxBaseFee:"",gasPrice:"",gas:"",decimal:6})}),Oe=Ot({inputData:Ce,approveTransactionHash:b,signedTx:P});return await ht(Oe)},yo=async(S,k)=>{let{signature:b}=S,P=Ot({quoteId:k,inputData:JSON.stringify({signedTx:b,txSource:3})});return await ht(P)},yr=async(S,k,b)=>{let{txHash:P,rawTx:j,gasLimitInfo:te,txParams:X}=S,{gasPrice:Ce,nonce:Oe,gas:qe}={...X,nonce:nt(X.nonce),gasPrice:nt(X.gasPrice),value:nt(X.value),gas:nt(X.gas)},{normal:Ke,proposePriorityFee:Je,supportEip1559:gt}=b.info.gasPrice,Bt=qe;te?.originGasLimit&&k.approveGasLimitCoefficient&&(Bt=O.floorMul(te.originGasLimit,k.approveGasLimitCoefficient,0).toString());let hr=Io(Ce,qe),Nr=JSON.stringify({chainId:D,serviceCharge:hr,inputData:k.data,toAdr:k.to,coinAmount:k.value,signedTx:j,txSource:3,fromAdr:k.from,txHash:P,extJson:JSON.stringify({nonce:Oe,priorityFee:Je||"",feeType:gt?Go.FEE_MARKET:"",oldTxHash:"",maxBaseFee:gt?bo(Ke,Je):"",gasPrice:Ce,gas:Bt})}),Cr=Ot({inputData:Nr,approveTransactionHash:P,approveGasLimit:Bt,approveGasPrice:Ce,approveNonce:Oe});return await ht(Cr)},wo=async(S,k)=>{let b;if(+D==195){let P=await dr(S);b=await Tr(P,S)}else if(+D==501){let P=await fr(S);b=await yo(P,k)}else if(+D==784){let P=await xr(S);b=await yo(P,k)}else{S.networkType=c.find(te=>+te.netWorkId==+D)?.chain;let P=await je(),j=await ft(S,P);b=await yr(j,S,P)}b.code!==0?r({...b,visible:!0}):x.length===1?x.push(`${ot}/${b.data}`):x.replace(`${ot}/${b.data}`)},wr=async()=>{if(n)return;e(!0);let S=await we(),{checkFlag:k,approveInfo:b,reminderInfo:P,quoteId:j}=S,te=P?.needReminder??!1;k===0&&m&&(u(jo.setKeepOpen({show:!0})),await u(qo(m)));try{k!==0||te?r({...S,visible:!0,chainName:A,reConfirm:()=>{wo(b,j)}}):await wo(b,j),e(!1)}catch{Me.error({title:o("wallet_extension_toast_asset_error_try_again"),duration:1,placement:Me.DIRECTION.top}),e(!1)}finally{e(!1)}};return po.default.createElement(Ct.FooterActions,{usePortal:!0,zIndex:1002},po.default.createElement(h,{block:!0,category:h.CATEGORY.fill,type:h.TYPE.highlight,size:h.SIZE.lg,onClick:wr,disabled:!re()||n},J()))};i();l();z();var xo=y(he()),B=y(L());i();l();var ue=y(L()),Jn=y(he());i();l();var ce={container:"_container_1hqzh_1",textContainer:"_textContainer_1hqzh_10",tokenName:"_tokenName_1hqzh_17",chainName:"_chainName_1hqzh_21",imgContainer:"_imgContainer_1hqzh_26",tokenImg:"_tokenImg_1hqzh_31",chainImg:"_chainImg_1hqzh_36",arrowIcon:"_arrowIcon_1hqzh_44",disabled:"_disabled_1hqzh_47"};var jr=({onClick:t,token:e,chain:n,disabled:r,className:a})=>ue.default.createElement(T.Box,{onClick:t,className:(0,Jn.default)(ce.container,a,{[ce.disabled]:r})},ue.default.createElement(T.Box,{className:ce.imgContainer},ue.default.createElement(Fe,{className:ce.tokenImg,alt:"token-img",errorImg:Ge,src:e.imgSrc}),ue.default.createElement(Fe,{className:ce.chainImg,alt:"chain-img",errorImg:Ge,src:n.imgSrc})),ue.default.createElement(T.Box,{className:ce.textContainer},ue.default.createElement(f.Text,{strong:700,className:ce.tokenName,ellipsis:{tooltip:e.name}},e.name),ue.default.createElement(f.Text,{size:"sm",className:ce.chainName,ellipsis:{tooltip:n.name}},n.name)),!r&&ue.default.createElement(W,{size:W.SIZE.xxs,className:`okx-wallet-plugin-select-unfold ${ce.arrowIcon}`})),fo=jr;i();l();var v=y(L());z();i();l();var Pe=y(L());z();i();l();var K=y(L());z();i();l();var ve={"text-color":"_text-color_3kntd_1",textColor:"_text-color_3kntd_1","tips-content":"_tips-content_3kntd_4",tipsContent:"_tips-content_3kntd_4"};var Xn=({approveAmount:t,approveAmountUsd:e,transferFee:n,transferFeeUsd:r,swapFee:a,swapFeeUsd:s,gasTokenSymbol:c})=>K.default.createElement(K.default.Fragment,null,K.default.createElement(T.Box,null,K.default.createElement(f.Text,{size:f.SIZE.sm,className:ve.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details1"))),K.default.createElement("ul",{className:ve.tipsContent},K.default.createElement("li",null,K.default.createElement(f.Text,{size:f.SIZE.sm,className:ve.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details",{value1:e,approveFee:t,token1:c}))),K.default.createElement("li",null,K.default.createElement(f.Text,{size:f.SIZE.sm,className:ve.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_detaila",{value2:r,transferFee:n,token2:c}))),K.default.createElement("li",null,K.default.createElement(f.Text,{size:f.SIZE.sm,className:ve.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_detailb",{value3:s,swapFee:a,token3:c})))),K.default.createElement(T.Box,null,K.default.createElement(f.Text,{size:f.SIZE.sm,className:ve.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details2"))));var Lt=({amount:t,usdPrice:e,usdToThisRate:n,symbol:r})=>{if(t&&e&&n){let a=O.mul(O.mul(t,e),n);return`${He(a,r)}`}return""},qr=({amount:t,symbol:e,usdPrice:n,usdToThisRate:r,usdSymbol:a})=>{if(!t)return"";let s=Ne(t);if(!s)return"";let c=Lt({amount:t,usdPrice:n,usdToThisRate:r,symbol:a});return`${s} ${e} (${c})`},Qn=t=>{let[{symbol:e,usdToThisRate:n}]=We(Ue.selectedCurrency),{approveTokenAmount:r,gasTokenPriceUSD:a,gasTokenSymbol:s,swapGasFeeAmount:c,totalGasFeeAmount:m,transferApproveTokenGasFeeAmount:_}=t||{},{approveAmount:p,approveAmountUsd:u,transferFee:x,transferFeeUsd:d,swapFee:N,swapFeeUsd:g}=(0,Pe.useMemo)(()=>({approveAmount:Ne(r),approveAmountUsd:Lt({amount:r,usdPrice:a,usdToThisRate:n,symbol:e}),transferFee:Ne(_),transferFeeUsd:Lt({amount:_,usdPrice:a,usdToThisRate:n,symbol:e}),swapFee:Ne(c),swapFeeUsd:Lt({amount:c,usdPrice:a,usdToThisRate:n,symbol:e})}),[r,a,c,e,_,n]),I=(0,Pe.useCallback)(()=>{let C=Z.show({hideCloseBtn:!0,title:o("wallet_extension_swapforgas_label_est_netfee"),children:Pe.default.createElement(Xn,{approveAmount:p,approveAmountUsd:u,transferFee:x,transferFeeUsd:d,swapFee:N,swapFeeUsd:g,gasTokenSymbol:s}),confirmText:o("commonall_text_btn_ok_active"),onConfirm:()=>{C.destroy()}})},[p,u,s,N,g,x,d]);return(0,Pe.useMemo)(()=>({totalAmount:qr({amount:m,symbol:s,usdPrice:a,usdToThisRate:n,usdSymbol:e}),handleNetworkFeeTips:I}),[m,s,a,n,e,I])};i();l();var Y={container:"_container_dngvz_1",infoIcon:"_infoIcon_dngvz_6",exchangeRate:"_exchangeRate_dngvz_9",exchangeRateValue:"_exchangeRateValue_dngvz_19",contentTertiary:"_contentTertiary_dngvz_24",finalReceive:"_finalReceive_dngvz_27",finalReceiveValue:"_finalReceiveValue_dngvz_28",max:"_max_dngvz_32",rangeAmount:"_rangeAmount_dngvz_38",amountText:"_amountText_dngvz_41",receiveText:"_receiveText_dngvz_44",displayAmount:"_displayAmount_dngvz_47",tradeTimes:"_tradeTimes_dngvz_50"};var pt="--",er=({priceInfo:t,pay:e})=>{let[{symbol:n,usdToThisRate:r}]=We(Ue.selectedCurrency),{toTokenSymbol:a,toAmount:s,rate:c,tradeTimes:m,currencyAbnormalType:_,toTokenValue:p,dexGasStationFeeDetailVO:u}=t,{totalAmount:x,handleNetworkFeeTips:d}=Qn(u),N=()=>!c||_!=="0"?pt:f.formatCryptoNumbericalValue(c),g=`1 ${e.token.name} \u2248 ${N()} ${a}`;return v.default.createElement(T.Box,{className:Y.container},v.default.createElement(se.Line,{size:"sm",label:v.default.createElement(T.FlexBox,{align:T.ALIGN.center},v.default.createElement("div",{className:Y.exchangeRate},o("swaptrade_list_title_reference")),v.default.createElement(to,{title:o("swaptrade_intro_text_gassation_reference_explained")},v.default.createElement(W,{size:W.SIZE.xs,className:`okx-wallet-plugin-information-circle ${Y.infoIcon}`})))},v.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:Y.exchangeRateValue},v.default.createElement(f.Text,{size:f.SIZE.sm,ellipsis:{tooltip:`${g} ${a}`},className:Y.contentTertiary},`1 ${e.token.name} \u2248 ${N()} ${a}`))),v.default.createElement(se.Line,{size:"sm",className:Y.receiveText,label:v.default.createElement(T.FlexBox,{align:T.ALIGN.center},v.default.createElement("div",{className:Y.exchangeRate},o("wallet_extension_swapforgas_label_est_netfee")),v.default.createElement(W,{onClick:d,size:W.SIZE.xs,className:`okx-wallet-plugin-information-circle ${Y.infoIcon}`}))},v.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:Y.exchangeRateValue},v.default.createElement(f.Text,{size:f.SIZE.sm,ellipsis:{tooltip:x},className:Y.contentTertiary},x))),v.default.createElement(se.Line,{className:Y.receiveText,size:"sm",label:v.default.createElement(T.FlexBox,{align:T.ALIGN.center},v.default.createElement("div",{className:Y.finalReceive},o("swaptrade_list_title_you_receive")),v.default.createElement(to,{title:o("swaptrade_list_tooltip_receive_describe")},v.default.createElement(W,{size:W.SIZE.xs,className:`okx-wallet-plugin-information-circle ${Y.infoIcon}`}))),value:v.default.createElement(T.FlexBox,{align:"center",className:Y.finalReceiveValue},v.default.createElement(f.DisplayAmount,{className:Y.displayAmount,size:"lg",strong:700,mode:f.CRYPTO,symbol:a},s))}),v.default.createElement(T.FlexBox,{justify:"flex-end",className:Y.tradeTimes},v.default.createElement(f.Text,{size:f.SIZE.sm},o("wallet_extension_swapforgas_label_num_transactions",{num:m||pt})),v.default.createElement(f.Text,{type:f.TYPE.secondary,size:f.SIZE.sm},He(O.mul(p,r),n,{needBillionMillionUnit:!1}))))};i();l();var de=y(L());var go=y(he());z();i();l();var _e={swapInput:"_swapInput_6oxu1_1",inputWrapper:"_inputWrapper_6oxu1_8",input:"_input_6oxu1_8",inputInner:"_inputInner_6oxu1_15",inputClass:"_inputClass_6oxu1_22",symbol:"_symbol_6oxu1_31",currency:"_currency_6oxu1_34",currencyError:"_currencyError_6oxu1_38",error:"_error_6oxu1_41"};var Kr=12,tr=({priceInfo:t,setAmount:e,amount:n,error:r})=>{let{fromTokenValue:a,fromTokenSymbol:s,currencyAbnormalType:c,fromTokenDecimals:m}=t,_=Math.min(Kr,Number(m)),p,[{symbol:u,usdToThisRate:x}]=We(Ue.selectedCurrency),d=(0,de.useMemo)(()=>c==="1"||c==="3",[c]),N=(0,de.useMemo)(()=>d?`${u}0.0`:Number(n)?He(O.mul(a,x),u,{needBillionMillionUnit:!1}):"",[n,a,d,u,x]);return de.default.createElement(T.FlexBox,{className:(0,go.default)(_e.swapInput,{[_e.error]:r}),direction:T.DIRECTION.vertical,onClick:()=>{p?.focus()}},de.default.createElement(T.FlexBox,{className:_e.inputWrapper,align:T.ALIGN.center},de.default.createElement(vo.Number,{onRef:g=>{p=g},placeholder:"0.0",precision:_,inputMode:"decimal",className:_e.input,inputClassName:_e.inputClass,innerClassName:_e.inputInner,onChange:g=>{g!==n&&e(g)},value:n}),de.default.createElement(f.Text,{strong:700,className:_e.symbol},s)),de.default.createElement(f.Text,{size:f.SIZE.sm,className:(0,go.default)(_e.currency,{[_e.currencyError]:d}),type:f.TYPE.secondary},N))};i();l();var R={container:"_container_khgyn_1",swapTokenContainer:"_swapTokenContainer_khgyn_4",swapToken:"_swapToken_khgyn_4",swapIcon:"_swapIcon_khgyn_12",rightArrow:"_rightArrow_khgyn_16",walletIcon:"_walletIcon_khgyn_19",rate:"_rate_khgyn_22",flex:"_flex_khgyn_25",infoIcon:"_infoIcon_khgyn_29",exchangeRate:"_exchangeRate_khgyn_32",exchangeRateValue:"_exchangeRateValue_khgyn_42",finalReceive:"_finalReceive_khgyn_47",finalReceiveValue:"_finalReceiveValue_khgyn_48",max:"_max_khgyn_52",rangeAmount:"_rangeAmount_khgyn_58",error:"_error_khgyn_61",disabled:"_disabled_khgyn_64",textContainer:"_textContainer_khgyn_69",selectCoinText:"_selectCoinText_khgyn_76",selectAmountText:"_selectAmountText_khgyn_79",rateText:"_rateText_khgyn_82",receiveText:"_receiveText_khgyn_85",displayAmount:"_displayAmount_khgyn_88"};var Jr=({coinInfo:t,priceInfo:e,clickPayToken:n,setAmount:r,amount:a,isValidateAmount:s})=>{let{toTokenSymbol:c,toTokenLogoUrl:m,toChainName:_,toChainLogoUrl:p,fromTokenSymbol:u,fromTokenLogoUrl:x,balance:d,fromChainLogoUrl:N,fromChainName:g,minimumAmount:I,maximumAmount:C,currencyAbnormalType:A,balanceAbnormalType:M,isQuoteAvailable:H}=e,D=t?{token:{name:t.tokenSymbol,imgSrc:t.tokenLogoUrl},chain:{name:t.chainName,imgSrc:t.chainLogoUrl}}:{token:{name:u,imgSrc:x},chain:{name:g,imgSrc:N}},ne={token:{name:c,imgSrc:m},chain:{name:_,imgSrc:p}},xe=(0,B.useMemo)(()=>{let J=H==="1",we=o("wallet_extension_swapforgas_label_amount_range",{minAmount:J?Ne(I):pt}),je=o("wallet_extension_swapforgas_label_amount_limit",{maxAmount:J?Ne(C):pt});return`${we} \uFF5E ${je}`},[H,C,I]),Te=()=>{let J=sn(d,{ifFromMax:!0,noNeedThousandth:!0});r(J)},U=(0,B.useMemo)(()=>A!=="0"||M!=="0"?!1:s,[M,A,s]),ye=(0,B.useMemo)(()=>M!=="0",[M]),re=(0,B.useMemo)(()=>a!==""&&!s,[a,s]);return B.default.createElement(T.Box,{className:R.container},B.default.createElement(se.Line,{className:R.selectCoinText,size:"sm",label:o("swaptrade_function_title_select_token")}),B.default.createElement(T.Box,{className:R.swapTokenContainer},B.default.createElement(fo,{...D,onClick:n,className:R.swapToken}),B.default.createElement(W,{size:W.SIZE.md,className:`okx-wallet-plugin-to ${R.rightArrow}`}),B.default.createElement(fo,{disabled:!0,...ne,className:R.swapToken})),B.default.createElement(se.Line,{className:R.selectAmountText,size:"sm",label:B.default.createElement("div",{className:R.flex},o("wallet_extension_swapforgas_label_pay_amount"),B.default.createElement(W,{size:W.SIZE.xs,className:(0,xo.default)("okx-wallet-plugin-wallet",R.walletIcon,{[R.error]:ye})}),ye?B.default.createElement(f.Text,{className:R.error,size:f.SIZE.sm},o("wallet_extension_swapforgas_error_unknown_balance")):B.default.createElement(B.default.Fragment,null,B.default.createElement(f.DisplayAmount,{noStyle:!0,mode:f.CRYPTO},d),d&&O.BigNumber(d).gt(0)&&B.default.createElement(f.Text,{className:R.max,onClick:Te,size:f.SIZE.sm},o("wallet_extension_transaction_input_max"))))}),B.default.createElement(tr,{priceInfo:e,setAmount:r,amount:a,error:re}),B.default.createElement(f.Text,{type:f.TYPE.secondary,size:f.SIZE.sm,className:(0,xo.default)(R.rangeAmount,{[R.error]:re})},xe),U&&B.default.createElement(er,{priceInfo:e,pay:D}))},or=Jr;i();l();var ge=y(L());z();i();l();var fe=y(L());z();i();l();var ut={container:"_container_klk6c_1",title:"_title_klk6c_5",content:"_content_klk6c_9",footer:"_footer_klk6c_14"};var nr=({visible:t,closeCallback:e})=>fe.default.createElement(Z.Action,{onClose:()=>{e()},visible:t,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"}},fe.default.createElement(fe.default.Fragment,null,fe.default.createElement("div",{className:ut.container},fe.default.createElement(f.Text,{strong:700,className:ut.title},o("swaptrade_intro_title_swap_forgas")),fe.default.createElement(f.Text,{size:f.SIZE.sm,className:ut.content},o("swaptrade_intro_text_swap_forgas_desc"))),fe.default.createElement("div",{className:ut.footer},fe.default.createElement(h,{block:!0,category:h.CATEGORY.fill,type:h.TYPE.highlight,size:h.SIZE.lg,onClick:()=>e(!1)},o("swaptrade_intro_btn_ok")))));i();l();var To={title:"_title_vcieq_1",infoIcon:"_infoIcon_vcieq_5"};var rr=({onClose:t=()=>{}})=>{let[e,n]=(0,ge.useState)(!1);return ge.default.createElement(ge.default.Fragment,null,ge.default.createElement(kt,{title:ge.default.createElement("div",{className:To.title},o("swaptrade_header_title_swap_forgas"),ge.default.createElement(W,{size:W.SIZE.sm,className:`okx-wallet-plugin-information-circle ${To.infoIcon}`,onClick:()=>n(!0)})),closeable:!1,onBack:t,asPage:!0}),ge.default.createElement(nr,{visible:e,closeCallback:n}))};i();l();wt();z();Fo();Bo();Se();var Le=y(L());var ar=({coinInfo:t,chainId:e,walletId:n,setLoading:r})=>{let[a,s]=(0,Le.useState)({tradeTimes:"",balance:"",balanceAbnormalType:"0",currencyAbnormalType:"0"}),c=St(),m=n||c,_=(0,Le.useCallback)(x=>{s({...x,...a})},[]),p=(0,Le.useCallback)(async x=>{if(O.BigNumber(x).isZero())return;let d;t?d={fromChainId:t.chainId,fromTokenContractAddress:t.tokenContractAddress,toChainId:e}:d={toChainId:e};try{let N=await q().getUserUniqueId(),{data:g}=await Qe(et.getPriceInfoUrl,{...d,userUniqueId:N,walletId:m,amount:x===""?"":O.BigNumber(x).toString(10)});r(!1),s(g)}catch{_({error:!0}),r(!1)}},[e,t,m,_,r]),u=(0,Le.useMemo)(()=>No(p,500),[p]);return{priceInfo:a,fetchPriceInfo:u}};i();l();var dt={container:"_container_1g0r0_1",contentContainer:"_contentContainer_1g0r0_8",loaderContainer:"_loaderContainer_1g0r0_14",errorContainer:"_errorContainer_1g0r0_17"};var Xr=t=>{let e=(0,sr.useHistory)(),n=fn(),r=t.chainId||n.get("chainId"),a=t.txId||n.get("txId"),s=t.walletId||n.get("walletId"),[c,m]=(0,F.useState)(!0),[_,p]=(0,F.useState)(!1),[u,x]=(0,F.useState)(null),[d,N]=(0,F.useState)(""),[g,I]=(0,F.useState)({orderId:"",checkFlag:-1,enoughFlag:0,visible:!1,code:0,reConfirm:()=>{}}),C=ln(),{priceInfo:A,fetchPriceInfo:M}=ar({coinInfo:u,chainId:r,walletId:s,setLoading:m});(0,F.useEffect)(()=>{u&&A.error&&Me.error({title:o("wallet_extension_toast_asset_error_try_again"),placement:Me.DIRECTION.top})},[A.error,u]);let H=an(),{coinId:D}=(0,ir.useCreation)(()=>H.find(re=>+re.chainId==+A.fromChainId)||{},[H,A?.fromChainId]);(0,F.useEffect)(()=>{let re=setInterval(()=>{M(d)},1e4);return M?.(d),()=>clearInterval(re)},[d,M]);let ne=!u&&A.error,xe=(0,F.useMemo)(()=>Number(d)>=Number(A?.minimumAmount)&&Number(d)<=Number(A?.maximumAmount),[d,A]),Te=()=>ne?F.default.createElement(Sn,{className:dt.errorContainer,errorText:o("swaptrade_mid_title_network_error"),btnText:o("swaptrade_mid_btn_reload"),onClick:()=>{m(!0),M(d)}}):null,U=()=>ne?null:F.default.createElement("div",{className:dt.contentContainer},F.default.createElement(or,{coinInfo:u,priceInfo:A,amount:d,setAmount:N,isValidateAmount:xe,clickPayToken:()=>p(!0)}),F.default.createElement(In,{priceInfo:A})),ye=()=>F.default.createElement(T.Box,{className:dt.loaderContainer},F.default.createElement(Xe.Circle,{hasMask:!0,maskColor:"var(--okd-color-background-base-primary)",size:Xe.SIZE.xl}));return F.default.createElement("div",{className:dt.container},F.default.createElement(rr,{onClose:t.onClose}),Te(),c?ye():U(),!ne&&F.default.createElement(Kn,{priceInfo:A,setLoading:m,loading:c,setErrorInfo:I,coinId:D,toChainId:r,chainList:C,txId:a,amount:d,isValidateAmount:xe}),F.default.createElement(kn,{...g,onConfirm:()=>{(g.checkFlag===$.PENDING_GAS_STATION||g.checkFlag===$.PENDING_SWAP)&&e.replace(`${ot}/${g.orderId}`),g.reminderInfo?.needReminder&&g.reConfirm(),I({...g,visible:!1})},onCancel:()=>{g.checkFlag===$.PENDING_SWAP&&g.enoughFlag===tt.ENOUGH&&g.reConfirm(),I({...g,visible:!1})},onClose:()=>{I({...g,visible:!1})}}),F.default.createElement(Nn,{visible:_,closeCallback:()=>p(!1),chainName:t.chainName,onSelect:x,chainId:r,walletId:s}))},lr=Xr;i();l();var cr=y(L()),_r=y(ze());var Qr="DEX_CHAIN_LIST";function ea({toChainId:t}){let e=cn(),n=Ve(),r=(0,cr.useMemo)(()=>[...new Set(Object.values(n?.account||{}))].filter(Boolean),[n?.account]),{data:a,loading:s,error:c}=(0,_r.useRequest)(async()=>{if(!t)return Promise.reject();try{let{data:m,code:_}=await Yo({deviceId:"",userWalletAddresses:r,toChainId:t});if(Number(_)===0){let{gasStationSupportChainList:p=[],isInBlackList:u}=m;return u===1?[]:p.filter(x=>!!e.find(d=>Number(d.chainId)===Number(x.chainId)))}return Promise.reject()}catch{return Promise.reject()}},{cacheKey:Qr,onError:()=>{},ready:!!t});return{chainList:a||[],isError:!!c,loading:s}}var mr=ea;i();l();var V={"supply-gas":"_supply-gas_1rvpg_1",supplyGas:"_supply-gas_1rvpg_1","supply-gas__nav":"_supply-gas__nav_1rvpg_7",supplyGasNav:"_supply-gas__nav_1rvpg_7","supply-gas__nav-icon":"_supply-gas__nav-icon_1rvpg_17",supplyGasNavIcon:"_supply-gas__nav-icon_1rvpg_17","supply-gas__item":"_supply-gas__item_1rvpg_21",supplyGasItem:"_supply-gas__item_1rvpg_21","supply-gas__side":"_supply-gas__side_1rvpg_31",supplyGasSide:"_supply-gas__side_1rvpg_31","supply-gas__image":"_supply-gas__image_1rvpg_35",supplyGasImage:"_supply-gas__image_1rvpg_35","supply-gas__title":"_supply-gas__title_1rvpg_39",supplyGasTitle:"_supply-gas__title_1rvpg_39","supply-gas__title-text":"_supply-gas__title-text_1rvpg_44",supplyGasTitleText:"_supply-gas__title-text_1rvpg_44","supply-gas__title-label":"_supply-gas__title-label_1rvpg_48",supplyGasTitleLabel:"_supply-gas__title-label_1rvpg_48","supply-gas__desc":"_supply-gas__desc_1rvpg_62",supplyGasDesc:"_supply-gas__desc_1rvpg_62","supply-gas__container":"_supply-gas__container_1rvpg_67",supplyGasContainer:"_supply-gas__container_1rvpg_67",dialog:"_dialog_1rvpg_75",mask:"_mask_1rvpg_78",window:"_window_1rvpg_81"};var Fn=({visible:t,closeCallback:e,receiveOnly:n,walletId:r,coinId:a,txId:s,address:c})=>{let[m,_]=(0,E.useState)(!1),[p,u]=(0,E.useState)(!1),[x,d]=(0,E.useState)(!1),N=(0,pr.useSelector)(Qo),{coin:g}=mn(a,!1),{chainList:I,loading:C,isError:A}=mr({toChainId:g?.chainId}),M=(0,E.useMemo)(()=>{if(n||N||A)return!1;let{chainId:J}=g;return!!I.find(we=>`${we.chainId}`==`${J}`)},[N,g,I,n,A]);(0,E.useEffect)(()=>{t&&!C?M?d(!0):u(!0):(u(!1),d(!1),_(!1))},[t,M,C]);let H={GAS_STATION:"gas-station",GAS_RECEIVE:"gas-receive"},D=[{title:o("swaptrade_transfer_title_swap_forgas"),label:o("swaptrade_transfer_tag_recommend"),desc:o("swaptrade_transfer_text_swap_forgasdesc",{token:g?.symbol}),type:H.GAS_STATION},{title:o("swaptrade_transfer_title_receive_gas"),label:null,desc:o("swaptrade_transfer_text_receive_gasdesc",{token:g?.symbol}),type:H.GAS_RECEIVE}],ne=()=>{_(!0)},xe=()=>{_(!1)},Te=()=>{u(!0)},U=()=>{u(!1),x||e()},ye=J=>{switch(J){case H.GAS_STATION:ne();break;case H.GAS_RECEIVE:default:Te();break}},re=()=>E.default.createElement("div",{className:V["supply-gas"]},E.default.createElement("div",{className:V["supply-gas__nav"]},E.default.createElement("div",null,o("swaptrade_header_title_fillup_gas",{token:g?.symbol})),E.default.createElement(Tt,{className:(0,ur.default)(V["supply-gas__nav-icon"],V["okx-wallet-plugin-close"]),onClick:e})),D.map(({title:J,label:we,desc:je,type:ft})=>E.default.createElement("div",{className:V["supply-gas__item"],key:ft,onClick:()=>{ye(ft)}},E.default.createElement("div",{className:V["supply-gas__main"]},E.default.createElement("div",{className:V["supply-gas__title"]},E.default.createElement("div",{className:V["supply-gas__title-text"]},J),we&&E.default.createElement("div",{className:V["supply-gas__title-label"]},we)),E.default.createElement("div",{className:V["supply-gas__desc"]},je)))));return C||A?null:E.default.createElement(E.default.Fragment,null,E.default.createElement(Z.Action,{onClose:()=>{e()},visible:x,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden",padding:"0"},zIndex:1e3,alignBottom:!0,noContentPadding:!0,className:V.dialog,maskClassName:V.mask,windowClass:V.window,getContainer:()=>document.querySelector(".app-content")},re()),E.default.createElement(T.Portal,{noStyle:!0},m?E.default.createElement(T.Box,{className:V["supply-gas__container"]},E.default.createElement(lr,{walletId:r,onClose:xe,chainId:g?.chainId,chainName:g?.chainName,txId:s})):null),E.default.createElement(Z.Action,{title:o("wallet_home_btn_receive"),onClose:U,visible:p,maskClosable:!0,noTopRadius:!1,windowStyle:{overflow:"hidden",padding:"0"},zIndex:1001,alignBottom:!0,noContentPadding:!0,className:V.dialog,maskClassName:V.mask,windowClass:V.window,getContainer:()=>document.querySelector(".app-content")},E.default.createElement(gn,{coinId:a,address:c,onBack:U,onClose:U,closeable:!1,hideNavigator:!0,showTop:!0})))};export{It as a,Ns as b,Bn as c,bn as d,Fn as e,Pt as f,Un as g,be as h,Re as i,Vn as j,Hn as k,Vr as l,Zn as m,Hr as n,Yr as o,Zr as p,fl as q,gl as r,Rn as s,xl as t,Tl as u,yl as v};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-NNO7KFUF.js.map
