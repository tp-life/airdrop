import{f as G,o as K,q as V}from"./chunk-M75TVG7W.js";import{a as b,b as q}from"./chunk-YOJOUOFP.js";import{a as k}from"./chunk-7OQVWENF.js";import{b as P}from"./chunk-DRPGNVVL.js";import{o as j}from"./chunk-A3FIPWG3.js";import{Ab as O,Wa as E,ac as U,zb as x}from"./chunk-NTISK7TT.js";import{d as W,f as I}from"./chunk-37O7OMRA.js";import{Gb as S,fc as H}from"./chunk-YILNSICT.js";import{la as F,pa as v}from"./chunk-LBCQTFOD.js";import{a as A}from"./chunk-B75PPTYD.js";import{f as C,m as T,o as g}from"./chunk-UGZFXKPB.js";T();g();var f=C(A()),h=C(U()),y=C(j());v();T();g();I();async function J(e,r){return(await W().getWalletsBalance({walletIds:e,chainId:r})).map(t=>({walletId:t?.walletId,balanceData:t?.balanceData,coinsMap:t?.coins.reduce((a,o)=>(a[o.coinId]=o,a),{})}))}async function $(e){return(await J([e])).find(n=>n.walletId===e)}async function Y({walletIds:e,chainId:r,coinId:n,flatten:t=!1}){let a=await W().getWalletsCoinBalance({walletIds:e,chainId:r,coinId:n}),o={};return a.forEach(i=>{let s=i.coins.reduce((c,p)=>(c[p.coinId]=p,c),{}),u=i.balanceCoins,l=[],d=["walletId","default"];u.forEach(c=>{if(c.childrenCoin){let p=c.childrenCoin.map(m=>({...m,...s[m.coinId]}));t?(p.forEach(m=>{d.forEach(B=>{m[B]=c[B]})}),l.push(...p)):l.push({...c,...s[c.coinId],childrenCoin:p})}else l.push({...c,...s[c.coinId]})}),o[i.walletId]=l}),o}function z(e,r,{defaultValue:n,forceRequest:t}={}){let a=k(),{data:o,error:i,loading:s,run:u}=(0,y.useRequest)($,{manual:!0,cacheKey:r}),l=!!i,d=r!==a||t;(0,f.useEffect)(()=>{r&&d&&u(r)},[r,d]);let c=(0,y.useMemoizedFn)(async()=>{r&&d?u(r):await P()});return(0,f.useMemo)(()=>m=>{if(r&&d)return{data:o?e(m,r,o):n,loading:s,error:l,request:c};let B=e(m,a);return{data:B??n,loading:!B?.[a],error:!!B?.[a]?.error,request:c}},[e,r,a,o,n,l,s,d])}var _=(e,r={})=>{let n=(0,f.useRef)({}),t=r.withBalanceStatus,a=z(K,e,{defaultValue:n.current,forceRequest:t}),{data:o,loading:i,error:s,request:u}=(0,h.useSelector)(a);return(0,y.useCreation)(()=>t?{loading:i,error:s,request:u,balance:o[e]}:o[e],[o,e,t,i,s,u])},le=e=>{let r=_(e),t=((0,h.useSelector)(E)[e]??[]).map(a=>G(a));return F([...r?.coins??[],...t],a=>`${a.coinId}_${"addressType"in a?a.addressType:0}`)},N=()=>{let e=k();return _(e)},de=()=>N()?.coins??[];function pe(e){let r=(0,f.useRef)([]),n=z(V,e,{defaultValue:r.current});return(0,h.useSelector)(n).data}T();g();var w=C(A()),M=C(U()),D=C(j());H();var he=e=>(0,M.useSelector)(O).find(({currencyId:t})=>t===e)||{},Q={},R=()=>{let{data:e}=b(q.coinTickers);return(0,w.useMemo)(()=>e||Q,[e])},Me=()=>{let e=R(),r=(0,M.useSelector)(x);return(0,D.useCreation)(()=>Object.keys(e).reduce((n,t)=>(n[t]=S(e?.[t]?.coinToUSDRate,r?.usdToThisRate),n),{}),[e,r?.usdToThisRate])},Re=()=>{let e=R();return(0,D.useCreation)(()=>Object.keys(e).reduce((r,n)=>(r[n]=e?.[n]?.coinToUSDRate,r),{}),[e])},Se=e=>{let r=R(),n=(0,M.useSelector)(x),t=r?.[e]?.coinToUSDRate;return(0,w.useMemo)(()=>S(t,n?.usdToThisRate),[t,n?.usdToThisRate])},We=e=>R()?.[e]?.coinToUSDRate,xe=e=>{let{data:r}=b(q.coinTickers);return r?.[e]?.coinPriceChangePercent24h};export{Y as a,_ as b,le as c,de as d,pe as e,he as f,R as g,Me as h,Re as i,Se as j,We as k,xe as l};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-XN45YXW3.js.map
