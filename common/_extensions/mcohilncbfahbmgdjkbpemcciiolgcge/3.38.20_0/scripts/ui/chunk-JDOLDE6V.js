import{a as y,b as z}from"./chunk-CGBWDXEW.js";import{c as q}from"./chunk-SR5VKAMR.js";import{a as J}from"./chunk-JPVBM3R5.js";import{d as $}from"./chunk-7OQVWENF.js";import{ac as ee,qb as x}from"./chunk-NTISK7TT.js";import{n as p}from"./chunk-CU7RFE6B.js";import{$ as R,Va as U,Wa as M,Y as h,Ya as K,Z as F,_ as b,ca as D,nb as j,wb as v}from"./chunk-YILNSICT.js";import{G}from"./chunk-L4N7WJIQ.js";import{A as S,N as w,ga as d,pa as W}from"./chunk-LBCQTFOD.js";import{N as Z,w as _}from"./chunk-V63HWKAL.js";import{a as Y}from"./chunk-B75PPTYD.js";import{f as k,m as O,o as L}from"./chunk-UGZFXKPB.js";O();L();var N=k(Y()),I=k(ee());W();Z();K();O();L();W();v();K();function E(t,e){return!e||!t||!t.length?null:t.find(o=>d(o.address)===d(e))||null}function H(t,e,i){let r,o=E(t,i);return o&&o.networks.indexOf(e)!==-1&&(r=o.name),r}function P(t,e,i){let r,o=j({localType:e});if(o){let a=t.find(g=>{let A=d(g.account[o.chain]),u=d(i),m=!1;if(e===h||e===D||e===F||e===b||e===R){let l=M(e),c=g.accountsMap[l];if(c){let B=Object.values(c).map(f=>f.address);m=B.find(f=>d(f)===A)&&B.find(f=>d(f)===u),m=Boolean(m)}}return A===u||m});a&&(r=`${a.keyringName} - ${a.walletName}`)}return r}function re(t){let{baseCoinId:e,network:i,name:r}=t||{},o=q({coinId:e}),a=(0,I.useSelector)(y),g=J(),A=i||o?.localType;return(0,N.useMemo)(()=>{let u=a||[];r&&(u=u.filter(({name:l,address:c})=>l.indexOf(r)!==-1||c.indexOf(r)!==-1)),A&&(u=u.filter(({networks:l})=>l.indexOf(A)!==-1));let m=w(g,"localType");return u.map(l=>({...l,networks:l.networks.map(c=>{let B=m[c];return{name:c,iconUrl:B?.image}})}))},[a,g,r,A])}function Q(t){let e=(0,I.useSelector)(y);return(0,N.useCallback)((i,r)=>H(e,r??t,i),[e])}function V(t){let e=(0,I.useSelector)(x);return(0,N.useCallback)((i,r)=>P(e,r??t,i),[e])}function ne(t){let e=Q(t),i=V(t);return(0,N.useCallback)((r,o)=>{let a=e(r,o);return a?{name:a,address:r,type:p.ADDRESS_BOOK}:(a=i(r,o),a?{name:a,address:r,type:p.WALLET_ACCOUNT}:null)},[e,i])}function se(t){return(0,I.useSelector)(z)[t]||[]}function ye(t){let e=(0,I.useSelector)(y);return E(e,t)}function Oe(t,e){let i=[],r=[],o=[],a=[],g=ne(t),A=Q(t),u=V(t),m=se(t),l=re({network:t}),c=(0,I.useSelector)(x),B=$();return(0,N.useMemo)(()=>{m?.length&&(r=m.map(({type:n,name:s,address:T})=>{if(n===p.ADDRESS_BOOK)s=A(T);else if(n===p.WALLET_ACCOUNT)s=u(T);else if(n===p.DIRECT){let C=g(T);C&&(s=C.name)}return{type:n,address:T,name:s}}),r=r.filter(({address:n})=>d(n)!==d(e)),r?.length&&i.push({group:_("wallet_extension_send_dropdown_recent_address"),list:r}));let f;if(U.includes(t))f=[],c.forEach(n=>{B(h,n.walletId)?.forEach((s,T)=>{d(s.address)!==d(e)&&f.push({address:s.address,group:n.keyringName,name:n.walletName,type:p.WALLET_ACCOUNT,addressType:s.addressType,hideName:T!==0,walletId:n.walletId})})});else{let n=c.filter(s=>{let T=!s.needBackup,C=d(s.account[t]),X=d(e);return T&&C!==X&&!!C});n?.length&&(f=n.map(s=>({address:s.account[t],group:s.keyringName,name:s.walletName,type:p.WALLET_ACCOUNT,walletId:s.walletId})))}return a=Object.entries(S(f,"group")),a.forEach(([n,s])=>{i.push({group:n,list:s})}),l?.length&&(o=l.map(({address:n,name:s})=>({address:n,name:s,type:p.ADDRESS_BOOK})),o=o.filter(({address:n})=>d(n)!==d(e)),o?.length&&i.push({group:_("wallet_extension_send_dropdown_address_book"),list:o})),i},[e,m,l,c])}function Le(t){let e=(0,I.useSelector)(y);return()=>{e&&e?.length>=200?G.error({title:_("wallet_extension_addressbook_toast_address_limit_reached")}):t&&t()}}export{re as a,ne as b,ye as c,Oe as d,Le as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JDOLDE6V.js.map
