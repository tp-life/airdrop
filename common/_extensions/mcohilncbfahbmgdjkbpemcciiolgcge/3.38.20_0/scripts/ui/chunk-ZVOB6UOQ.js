import{a as ri}from"./chunk-OSVZOFON.js";import{a as si}from"./chunk-7JDG2FPM.js";import{a as ai}from"./chunk-ADRJK2SB.js";import{a as O}from"./chunk-VT47VYXB.js";import{a as ti,b as ii}from"./chunk-6TPN273S.js";import{a as ni}from"./chunk-SF64G75T.js";import{a as ei}from"./chunk-5AU4SCQT.js";import{a as oi}from"./chunk-Q4NRZ4HK.js";import{a as Xt,d as Qt}from"./chunk-ICLH7VK5.js";import{d as Ze}from"./chunk-NNO7KFUF.js";import{g as ft,j as pt}from"./chunk-4NCQWC2K.js";import{c as lt}from"./chunk-SR5VKAMR.js";import{a as mt}from"./chunk-BM44DQAB.js";import{m as ut}from"./chunk-GBQG32PI.js";import{o as Jt}from"./chunk-A3FIPWG3.js";import{Ca as qt,K as Zt,N as jt,p as Kt}from"./chunk-NTISK7TT.js";import{V as t,Y as ct,_ as ye,aa as De}from"./chunk-CU7RFE6B.js";import{b as de}from"./chunk-IVA2TTR4.js";import{Gb as P,Ib as x,Jb as ee,Kb as ie,Lb as R,Mb as ae,Nb as D,Ob as zt,Pb as le,Rb as ze,Sb as $,Ub as we,Vb as ot,Zb as Ye,_b as Yt,a as Ut,b as Xi,fc as Ke}from"./chunk-YILNSICT.js";import{c as nt,q as B}from"./chunk-L4N7WJIQ.js";import{F as Ht,K as Vt,pa as Qi}from"./chunk-LBCQTFOD.js";import{N as $t,l as Q,w as g}from"./chunk-V63HWKAL.js";import{a as es}from"./chunk-V2K75WCG.js";import{a as Rt}from"./chunk-B75PPTYD.js";import{f as Me,m as H,o as V}from"./chunk-UGZFXKPB.js";H();V();var a=Me(Rt()),Pi=Me(Jt());Qi();var y=Me(es());$t();Ke();H();V();var Y=Me(Rt()),li=Me(Jt());Xi();H();V();$t();Ke();var ci=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:n,supportEip1559:u,extFee:c}={})=>{let m="",o="";if(!u)m=P(r,e),o=e;else{let l=x(n,i);o=Math.min(l,s),m=P(r,o)}return{minGasFee:x(m,c),minGasPrice:o}},mi=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c={},gasLimitInfo:m={},gasType:o})=>{let{baseFee:l}=c,{originGasLimit:M}=m;if(o!==t.CUSTOM)return ci({gasLimit:M,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:l,supportEip1559:n,extFee:u});let d=ee(s,i),L=Math.min(d,l),F=Math.min(r,M);return ci({gasLimit:F,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:L,supportEip1559:n,extFee:u})};function ms(r,e){let{isNetworkFeeLoading:i,gasLimit:s,gasPrice:n,maxFeePerGas:u,maxPriorityFeePerGas:c,supportEip1559:m,gasLimitInfo:o}=r;return!i&&(ae(s,0)||m&&(ae(u,0)||R(c,0))||!m&&ae(n,0)||o?.queryGasLimitErrorUseDefault&&e!==qt.DEPLOY_CONTRACT)}async function us(r,e){let{from:i,to:s,data:n,value:u="0"}=e,c={checkTypes:[ye.VERIFY_GAS_LIMIT],coinId:r,from:i,to:s,amount:u,inputData:n,tokenAddress:s},{data:m=[]}=await Zt(c),o=m?.find((l={})=>l.checkType===ye.VERIFY_GAS_LIMIT);return o&&o?.result===!1&&o?.resultCode!=="306001"?o.msg||g("wallet_extension_toast_text_unknown_error"):!1}Ke();var fi=()=>e=>Yt(e,0),pi=({gasPrice:r,gasLimit:e,extFee:i,baseCoin:s={},currencyId:n})=>{let u=x(P(r,e),i),c=ot(u),m=ut(c,{symbol:s?.symbol}),o=pt(s?.coinId,u,{currencyId:n,useApproximate:!0});return{gasFeeDisplay:`${m}${o}`,gasFee:c}},je=({gasPrice:r,gasLimit:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o,baseCoin:l={},currencyId:M})=>{let{minGasFee:d,minGasPrice:L}=mi({gasLimit:e,gasPrice:r,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o}),F=ot(d),T=ut(F,{symbol:l?.symbol}),p=pt(l?.coinId,d,{currencyId:M,useApproximate:!0});return{minGasPrice:L,minGasFee:F,minGasFeeDisplay:`${T}${p}`}},ui=(r={},e={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:i,disabled:s,fetchOnce:n,signInfo:u={}}=e,{coinId:c,supportEip1559:m,tx:o,needExtFee:l=!1}=r,[M,d]=(0,Y.useState)(null),[L,F]=(0,Y.useState)({data:"",loading:!1,error:""});(0,Y.useEffect)(()=>{!l||s||F(p=>({...p,loading:!0,error:""}))},[o,l,s]);let T=()=>{try{if(!c){let p=u;Ut.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window?.location?.href,rawData:p})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}};return(0,li.useDebounceEffect)(()=>{if(!l||s){F(f=>({...f,loading:!1,error:""}));return}if(n===M&&n!==null){F(f=>({...f,loading:!1,error:""}));return}let p=D(o.gasPrice,"0")&&D(o.gasLimit,"0"),E=D(o.maxFeePerGas,"0")&&D(o.maxPriorityFeePerGas,"0")&&D(o.gasLimit,"0");if(!(m?E:p)){F(f=>({...f,loading:!1,error:""}));return}(async()=>{try{let f={...o,value:de(o.value),gasLimit:de(o.gasLimit)},I=m?{...f,maxFeePerGas:de(o.maxFeePerGas),maxPriorityFeePerGas:de(o.maxPriorityFeePerGas)}:{...f,gasPrice:de(o.gasPrice)},K=Kt(I),Z=await ni(K);T();let _=await jt({coinId:c},{inputData:Z});F(oe=>({...oe,data:_,loading:!1,error:""}))}catch(f){F(I=>({...I,loading:!1,error:f.error_message||"Network error"}))}finally{n&&d(n)}})()},[c,o,n,l],{wait:i}),L},ts=({commonTx:r,gasPrice:e,priorityFee:i,supportEip1559:s})=>(0,Y.useMemo)(()=>s?{...r,maxFeePerGas:e,maxPriorityFeePerGas:i}:{...r,gasPrice:e},[r,e,i,s]),Fi=({coinId:r,from:e,to:i,value:s,inputData:n,gasLimit:u,supportEip1559:c,needExtFee:m,fastGasPrice:o,fastPriorityFee:l,customGasPrice:M,customMaxBaseFee:d,customMaxPriorityFee:L,customGasLimit:F,estimatedL1FeeOptions:T})=>{let p=(0,Y.useMemo)(()=>({from:e,to:i,value:s,data:n}),[e,i,s,n]),E=(0,Y.useMemo)(()=>({...p,gasLimit:u}),[p,u]),w=ts({commonTx:E,gasPrice:o,priorityFee:l,supportEip1559:c}),W=(0,Y.useMemo)(()=>c?{...p,maxFeePerGas:$(x(d,L)),maxPriorityFeePerGas:$(L),gasLimit:F}:{...p,gasPrice:$(M),gasLimit:F},[p,c,M,d,L,F]),f=ui({coinId:r,tx:w,type:"fast",supportEip1559:c,needExtFee:m},T),I=ui({coinId:r,tx:W,type:"custom",supportEip1559:c,needExtFee:m},T);return(0,Y.useMemo)(()=>{let K=f.loading||I.loading,Z=f.error||I.error,_={[t.SLOW]:f.data,[t.STANDARD]:f.data,[t.FAST]:f.data,[t.CUSTOM]:I.data};return{loading:K,error:Z,data:_}},[f,I])};H();V();var te={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};var fe=r=>Vt(r)||ae(r,0);function Gi({className:r}){return a.default.createElement(nt,{className:r,desc:g("wallet_extension_transfer_text_higher_than_necessary"),type:nt.TYPE.warn,closable:!1})}var is=({isSignInfoLoading:r,signInfo:e,initialGasLimitInfo:i,isGasLimitLoading:s,visible:n,address:u,inputData:c,tokenAddress:m,coinId:o,value:l,initialGasData:M,estimatedL1FeeOptions:d,onBack:L,onClose:F,onGasChange:T,currencyId:p,minimumGasLimit:E,gasReturn:w,onServerDataChange:W,onGasTypeManualChange:f,isMev:I,mevInfo:K})=>{let Z=(0,a.useRef)(!1),[,_]=ft(o,{withPrice:!0}),oe=lt({coinId:_?.coinId}),[pe,ge,Se]=ii(oe?.realChainIdHex),ne=ri(),Fe=fi(),{initialGasType:Ee=t.STANDARD,initialCustomMaxBaseFee:ce,initialCustomMaxPriorityFee:Te,initialCustomGasPrice:Ge,initialCustomGasLimit:b}=M||{},Ne=fe(ce)?void 0:we(ce),he=fe(Te)?void 0:we(Te),Ae=fe(Ge)?void 0:we(Ge),qe=fe(b)?void 0:b,[Oe,ke]=(0,a.useState)(),[We,xi]=(0,a.useState)(),[Gt,yi]=(0,a.useState)(),[Pt,xt]=(0,a.useState)(),[be,yt]=(0,a.useState)(Ee),[N,ve]=(0,a.useState)(Ee),di=G=>{let{priorityRate:C}=K||{},k=at=>P(at,C),A=(at,qi)=>{let Ji=ie([0,P(qi,ee(C,1))]);return x(at,Ji)},{supportEip1559:z,max:re,min:rt,normal:bt,fastPriorityFee:$e,proposePriorityFee:vt,safePriorityFee:Bt}=G,ue={};return z&&C&&(ue.fastPriorityFee=k($e),ue.safePriorityFee=k(Bt),ue.proposePriorityFee=k(vt),ue.max=A(re,$e),ue.normal=A(bt,vt),ue.min=A(rt,Bt)),{...G,...ue}},U=(0,a.useMemo)(()=>I?e?.gasPrice?di(e?.gasPrice):Ze:e?.gasPrice||Ze,[e?.gasPrice,I]),gi=e?.needExtFee,{min:Ti,normal:_i,max:Ci,minGasPrice:Li,supportEip1559:v,suggestBaseFee:Mi,safePriorityFee:_e,proposePriorityFee:Ce,fastPriorityFee:Le}=U,j=Fe(Ti),q=Fe(_i),J=Fe(Ci),h=(0,a.useMemo)(()=>{let G=zt(i?.minGasLimit,E)?i?.minGasLimit:E,C={...i,minGasLimit:G};return R(C?.gasLimit,C?.minGasLimit)&&(C.gasLimit=C?.minGasLimit),C},[i,E]),dt=`${h?.gasLimit||0}`,X=qe||dt,Je=`${h?.minGasLimit||dt}`,Xe=`${h?.maxGasLimit||1500*1e4}`,wi=O(j),gt=O(q),Di=O(J),Tt=we(Li),Qe=O(Mi),Ii=O(ee(j,_e)),_t=O(ee(q,Ce)),Si=O(ee(J,Le)),Ei=O(_e),Ct=O(Ce),Ni=O(Le),Be=(0,a.useRef)(),Ue=(0,a.useRef)(),He=(0,a.useRef)(),et=(0,a.useRef)(),Lt={[t.SLOW]:wi,[t.STANDARD]:gt,[t.FAST]:Di,[t.CUSTOM]:fe(Be.current)?gt:Be.current},Mt={[t.SLOW]:Ii,[t.STANDARD]:_t,[t.FAST]:Si,[t.CUSTOM]:fe(Ue.current)?_t:Ue.current},wt={[t.SLOW]:Ei,[t.STANDARD]:Ct,[t.FAST]:Ni,[t.CUSTOM]:fe(He.current)?Ct:He.current},Pe=typeof Gt=="string"?Gt:Ae||Lt[N],me=typeof Oe=="string"?Oe:Ne||Mt[N],xe=typeof We=="string"?We:he||wt[N],se=typeof Pt=="string"?Pt:X,S=Fi({coinId:o,from:u,to:m,value:l,inputData:c,gasLimit:X,supportEip1559:v,needExtFee:gi,slowGasPrice:j,safePriorityFee:_e,standardGasPrice:q,proposePriorityFee:Ce,fastGasPrice:J,fastPriorityFee:Le,customGasPrice:Pe,customMaxBaseFee:me,customMaxPriorityFee:xe,customGasLimit:se,estimatedL1FeeOptions:{wait:200,...d,signInfo:e}}),Ve=r||s||S.loading,{minGasFeeDisplay:hi,minGasFee:Ai,minGasPrice:Oi}=je({gasPrice:j,gasLimit:X,maxPriorityFeePerGas:_e,maxFeePerGas:j,supportEip1559:v,extFee:S?.data?.[t.SLOW],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),ki=O(Oi),{minGasFeeDisplay:Wi,minGasFee:bi,minGasPrice:vi}=je({gasPrice:q,gasLimit:X,maxPriorityFeePerGas:Ce,maxFeePerGas:q,supportEip1559:v,extFee:S?.data?.[t.STANDARD],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),Bi=O(vi),{minGasFeeDisplay:Ui,minGasFee:Hi,minGasPrice:Vi}=je({gasPrice:J,gasLimit:X,maxPriorityFeePerGas:Le,maxFeePerGas:J,supportEip1559:v,extFee:S?.data?.[t.FAST],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),Ri=O(Vi),Dt=ae(me,0)?g("extension_wallet_transaction_errortip_basefeelimit"):"",It=R(me,Qe)&&D(me,0)?g("extension_wallet_transaction_errortip_notsuccess",{baseFee:Qe}):"",St=ae(xe,0)?g("extension_wallet_transaction_errortip_priorityfeelimit"):"",Et=R(Pe,Tt)?g("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:Tt}):"",Nt=R(se,Je)||D(se,Xe)?g("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:mt(Je,0),maxGasLimit:mt(Xe)}):"",ht=!Nt&&(!v&&!Et||v&&!Dt&&!St),At=x(me,xe),Re=$(ze((v?At:Pe)||0)),$i=O(Re),{gasFeeDisplay:Ot}=pi({gasPrice:ze(Re),gasLimit:ze(se),extFee:S?.data?.[t.CUSTOM],baseCoin:_,currencyId:p}),zi=x(P(j,X),S?.data?.[t.SLOW]),Yi=x(P(q,X),S?.data?.[t.STANDARD]),kt=x(P(J,X),S?.data?.[t.FAST]),Wt=x(P(Re,se),S?.data?.[t.CUSTOM]),tt=D(Wt,P(kt,2)),it=[{typeKey:t.SLOW,gasFee:Ai,unitPrice:`${Q.ceilShort(ki,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:hi,estimatedTime:ne(U,j),onClick:()=>(f?.(),ve(t.SLOW))},{typeKey:t.STANDARD,gasFee:bi,unitPrice:`${Q.ceilShort(Bi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Wi,estimatedTime:ne(U,q),onClick:()=>(f?.(),ve(t.STANDARD))},{typeKey:t.FAST,gasFee:Hi,unitPrice:`${Q.ceilShort(Ri,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Ui,estimatedTime:ne(U,J),onClick:()=>(f?.(),ve(t.FAST))}],Ki=(0,a.useMemo)(()=>w&&w?.status!==Qt.empty&&(!w?.tip?.error||w?.tip?.key===Xt.exceedGasLimit)?it?.map(G=>G?.typeKey!==t.CUSTOM&&Q.lte(Q.mul(G?.gasFee,_?.usdPrice),w?.activity?.gas)?{supportGasReturn:!0,...G}:G):it,[w,it,_?.usdPrice]),Zi=ne(U,Re,!ht),ji={unitPricePrefix:Q.ceilShort($i,2),unitPriceSuffix:g("extension_wallet_transaction_input_gwei"),totalPrice:Ot?a.default.createElement(oi,{style:{color:tt?"var(--okd-color-semantic-notice)":null},text:Ot,maxWidth:"120px"}):"",renderWarning:G=>!G&&tt?a.default.createElement(Gi,{className:te.customGasFeeWarningFold}):null,estimatedTime:Zi,onClick:()=>{yt(t.CUSTOM)},canConfirm:ht,onConfirm:G=>{ve(t.CUSTOM),f?.();let C=$(Pe),k=$(At),A=$(xe),z=se,re=S?.data?.[t.CUSTOM];Z.current=!0,T({gasType:t.CUSTOM,maxFeePerGas:k,maxPriorityFeePerGas:A,gasPrice:C,gasLimit:z,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:Wt,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:re,customConfirmed:Z.current}),Be.current=Pe,Ue.current=me,He.current=xe,et.current=se,G?ge({gasPrice:C,isDefault:!0,maxFeePerGas:k,isSupportEip1559:v,maxPriorityFeePerGas:A,baseFeePerGas:Q.sub(k,A)}):Se(oe?.realChainIdHex)}};(0,a.useEffect)(()=>{yt(N)},[n]),(0,a.useEffect)(()=>{if(N===t.CUSTOM)return;let G,C,k,A,z,re=X;N===t.SLOW?(k=j,G=j,C=_e,z=zi,A=S?.data?.[t.SLOW]):N===t.STANDARD?(k=q,G=q,C=Ce,z=Yi,A=S?.data?.[t.STANDARD]):N===t.FAST&&(k=J,G=J,C=Le,z=kt,A=S?.data?.[t.FAST]),T({gasType:N,maxFeePerGas:G,maxPriorityFeePerGas:C,gasPrice:k,gasLimit:re,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:z,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:A})},[N,j,q,J,h,s,Ve,T]),(0,a.useEffect)(()=>{if(N===t.CUSTOM&&!n){let G=et.current;typeof G=="string"&&R(G,h?.minGasLimit)&&(G=h?.minGasLimit,xt(h?.minGasLimit),et.current=h?.minGasLimit);let C=$(Be.current||Ae||Lt[N]),k=$(Ue.current||Ne||Mt[N]),A=$(He.current||he||wt[N]),z=x(k,A),re=typeof G=="string"?G:X,rt=S?.data?.[t.CUSTOM],$e=x(P((v?z:C)||0,re),S?.data?.[t.CUSTOM]);T({gasType:N,maxFeePerGas:z,maxPriorityFeePerGas:A,gasPrice:C,gasLimit:re,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:$e,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:rt,useDefaultGas:!!pe,customConfirmed:Z.current})}},[pe,h,U,S]),(0,a.useEffect)(()=>{typeof W=="function"&&W({signInfo:e})},[e]);let st=()=>a.default.createElement("span",{className:te.customGWei},g("extension_wallet_transaction_input_gwei"));return a.default.createElement(si,{feeType:be,baseCoinId:_?.coinId,feeDataList:Ki,onBack:L,onClose:F,visible:n,supportDefaultGas:!0,custom:{useDefaultGas:!!pe,chainName:oe?.chainName,...ji,components:()=>a.default.createElement(a.default.Fragment,null,v?a.default.createElement(a.default.Fragment,null,a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:a.default.createElement("div",{className:"network-fee--refresh-animation"},g("extension_wallet_transaction_text_maxbase_fee"),a.default.createElement("span",{className:te.customInputSubTitle},g("extension_wallet_transaction_text_current",{number:Q.ceilShort(Qe,2)}))),value:me,error:Dt,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:ke,max:1e7,tips:It&&a.default.createElement("div",{className:te.maxBaseFeeWarning},It),suffix:st()}),a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:g("extension_wallet_transaction_text_priority_fee"),value:xe,error:St,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:xi,max:1e7,suffix:st()})):a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:a.default.createElement(a.default.Fragment,null,g("wallet_transfer_gasfee_subtitle_gas_price"),a.default.createElement("span",{className:te.customInputSubTitle},g("extension_wallet_transaction_input_gwei"))),value:Pe,error:Et,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:yi,max:1e7,suffix:st()}),a.default.createElement(B.Number,{size:B.SIZE.sm,title:g("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:se,error:Nt,errorType:B.TIP_TYPE.always,enableMinus:!1,onChange:xt,max:Xe,min:Je,precision:0}),tt&&a.default.createElement(Gi,{className:te.customGasFeeWarning}))}})};function Ft(r){let{coinId:e,address:i,inputData:s,tokenAddress:n,value:u,gasLimitOptions:c,initialGasData:m,onDappGasIllegal:o}=r,[l,M]=ft(e)||[{},{}],d=lt({coinId:M?.coinId}),L=ti(),[F,T]=(0,a.useState)(m),[p,E]=(0,a.useState)(!1),[w,W]=ei({coinId:e,address:i,chainId:l?.chainId}),[f,I,K]=ai({address:i,inputData:s,tokenAddress:n,coinId:e,value:u},{wait:200,...c}),Z=w||K;return(0,Pi.useAsyncEffect)(async()=>{if(Z)return;if(d?.realChainIdHex)try{let b=await L(d?.realChainIdHex);if(!Ht(b)){T({initialGasType:t.CUSTOM,initialCustomGasPrice:b?.gasPrice,initialCustomMaxPriorityFee:b?.maxPriorityFeePerGas,initialCustomMaxBaseFee:Q.sub(b?.maxFeePerGas,b?.maxPriorityFeePerGas)}),E(!0);return}}catch(b){console.log(b)}let _={...m||{}},{initialGasType:oe,initialCustomMaxBaseFee:pe,initialCustomMaxPriorityFee:ge,initialCustomGasPrice:Se,initialCustomGasLimit:ne}=_,{min:Fe,safePriorityFee:Ee,supportEip1559:ce,max:Te}=W?.gasPrice||Ze,{gasLimit:Ge}=f||{};if(oe===t.CUSTOM){let b=R(ne,Ge);b&&(_.initialCustomGasLimit=Ge);let Ne=ce&&(R(ge,Ee)||R(x(pe,ge),Fe)),he=!ce&&R(Se,Fe),Ae=D(ne,P(Ge,1.2)),qe=!ce&&D(Se,P(Te,1.2)),Oe=ce&&D(x(pe,ge),P(Te,1.2)),ke=b||Ne||he,We=Ae||qe||Oe;ke&&(_.initialCustomMaxPriorityFee=null,_.initialCustomMaxBaseFee=null,_.initialCustomGasPrice=null,_.initialGasType=t.STANDARD,o?.(ct[t.SLOW])),!ke&&We&&o?.(ct[t.FAST]),T(_)}E(!0)},[Z]),p?a.default.createElement(is,{...r,initialGasData:F,isSignInfoLoading:w,signInfo:W,initialGasLimitInfo:f,isGasLimitLoading:I,onGasTypeManualChange:()=>{o?.("")}}):null}Ft.propTypes={visible:y.default.bool,address:y.default.string,inputData:y.default.string,tokenAddress:y.default.string,coinId:y.default.oneOfType([y.default.string,y.default.number]),value:y.default.string,initialGasData:y.default.shape({initialGasType:y.default.string,initialCustomMaxBaseFee:y.default.string,initialCustomMaxPriorityFee:y.default.string,initialCustomGasPrice:y.default.string,initialCustomGasLimit:y.default.string}),gasLimitOptions:y.default.object,estimatedL1FeeOptions:y.default.object,onBack:y.default.func,onClose:y.default.func,onGasChange:y.default.func,onServerDataChange:y.default.func,minimumGasLimit:y.default.string};Ft.defaultProps={visible:!1,address:"",inputData:"",tokenAddress:"",coinId:"",value:"0",initialGasData:{initialGasType:t.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},gasLimitOptions:{},estimatedL1FeeOptions:{},onBack:()=>{},onClose:()=>{},onGasChange:()=>{},onServerDataChange:()=>{},minimumGasLimit:"0"};var ir=(0,a.memo)(Ft);H();V();Ke();var cr=(r,e)=>{let i=r.find(s=>s?.checkType===e);return i?!i?.result:!1},mr=(r,e,i)=>{let s=r.find(n=>n?.checkType===ye.OVERWRITTEN)||{};return s.toastType===De.FAILED?e():s.toastType===De.PENDING?i():r},ur=(r=[])=>{let e={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},i=r.find(s=>s?.checkType===ye.OVERWRITTEN)||{};return e.nonce=i.nonce,e.newNonce=i.newNonce,e.originGasPrice=P(i?.gasPrice,1.1),e.originPriorityFee=P(i?.originPriorityFee,1.1),i.toastType===De.FAILED?e.hasFailedTx=!0:i.toastType===De.PENDING&&(e.hasPendingTx=!0),e},lr=(r,e,i)=>{let{userGasInfo:s,serverGasInfo:n,originTxGasInfo:u}=e,{originGasPrice:c,originPriorityFee:m}=u,{supportEip1559:o}=s;if(o){let L=!1,{maxFeePerGas:F,maxPriorityFeePerGas:T}=s,{normal:p,proposePriorityFee:E}=n,w=c,W=m,f=ie([F,p,w]);le(f,F)||(L=!0);let I=ie([T,E,W]),K="0";return le(I,T)||(K=ee(I,T),L=!0),L?i({maxFeePerGas:x(f,K),maxPriorityFeePerGas:I}):r}let{gasPrice:l}=s,{normal:M}=n,d=ie([l,M,c]);return le(d,l)?r:i({gasPrice:d})},fr=({userGasInfo:r,serverGasInfo:e,originTxGasInfo:i})=>{let{originGasPrice:s,originPriorityFee:n}=i,{supportEip1559:u}=r;if(u){let l=!1,{maxFeePerGas:M,maxPriorityFeePerGas:d}=r,{normal:L,proposePriorityFee:F}=e,T=s,p=n,E=ie([M,L,T]);le(E,M)||(l=!0);let w=ie([d,F,p]),W="0";if(le(w,d)||(W=ee(w,d),l=!0),l)return{maxFeePerGas:Ye(x(E,W),0),maxPriorityFeePerGas:Ye(w,0)}}let{gasPrice:c}=r,{normal:m}=e,o=ie([c,m,s]);return le(o,c)?{}:{gasPrice:Ye(o,0)}},pr=(r,e,i)=>{let{userGasInfo:s,updateGasInfo:n,baseCoinAmountAvailable:u}=e,{supportEip1559:c,gasLimit:m}=s;if(c){let{maxFeePerGas:l}=n;return D(P(l,m),u)?i():r}let{gasPrice:o}=n;return D(P(o,m),u)?i():r},Fr=({userGasInfo:r,updateGasInfo:e,baseCoinAmountAvailable:i,L1FEE:s})=>{let{supportEip1559:n,gasLimit:u}=r;if(n){let{maxFeePerGas:m}=e;return!!D(x(P(m,u),s),i)}let{gasPrice:c}=e;return!!D(x(P(c,u),s),i)};H();V();var yr={ON_CHAIN:0,NEW:1},dr="UserReject";export{mi as a,ms as b,us as c,ir as d,cr as e,mr as f,ur as g,lr as h,fr as i,pr as j,Fr as k,yr as l,dr as m};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ZVOB6UOQ.js.map
