import{d as te}from"./chunk-J2Y34YM2.js";import{a as se}from"./chunk-3L5C5CQB.js";import{f as oo,g as W}from"./chunk-P6MBUJNT.js";import{a as X}from"./chunk-2XYRURE2.js";import{c as Qo}from"./chunk-ERN756XV.js";import{E as Zo,N as Ko,b as ko,d as Oo,e as Do,f as N,g as vo,h as wo,i as Po,j as Mo,l as Vo,m as Uo,n as Ho,o as $o,p as Go,r as qo,s as Q,u as Wo,v as zo,y as Yo}from"./chunk-GSWJ5GW7.js";import{d as ne}from"./chunk-IVCA3VWI.js";import{f as ee,g as re}from"./chunk-XN45YXW3.js";import{a as Xo}from"./chunk-WD7752PC.js";import{a as oe}from"./chunk-PP43MII2.js";import{a as No,f as q,la as Ro,ma as Bo}from"./chunk-PVSNAFN3.js";import{l as jo}from"./chunk-GBQG32PI.js";import{o as R}from"./chunk-A3FIPWG3.js";import{M as _o,ac as g,zb as Lo}from"./chunk-NTISK7TT.js";import{da as C}from"./chunk-CU7RFE6B.js";import{a as w}from"./chunk-QZUNX5I4.js";import{a as Ue}from"./chunk-45FKVGCF.js";import{a as Jo}from"./chunk-VL5VJIZ7.js";import{$b as To,Gb as F,Hb as go,Jb as G,Lb as ho,Mb as _,Nb as j,_b as yo,dc as So,fc as I,nb as Eo,rc as J,sb as Fo,ub as Io,wb as Ve,xc as He}from"./chunk-YILNSICT.js";import{H as bo}from"./chunk-L4N7WJIQ.js";import{F as $,K as Co,pa as Ao}from"./chunk-LBCQTFOD.js";import{N as Pe,w as xo}from"./chunk-V63HWKAL.js";import{b as Me}from"./chunk-XFAFBXWC.js";import{a as b}from"./chunk-B75PPTYD.js";import{f as u,m as t,o as s}from"./chunk-UGZFXKPB.js";t();s();var ie="DontShowError";t();s();var Ee=u(g()),Fe=u(R());Pe();t();s();Ao();var Ce=u(w());t();s();var p=u(g());I();t();s();var z=u(b());t();s();function $e(){return(o,e,r)=>{if(!o)return o;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...a}=r||{};return ne(o,{fixed:e.orderDecimalNum,isFixedUp:n,useApproximate:i,...a})}}var eo=$e;I();var Ge=(0,z.createContext)({coinId:null,fromAddress:""});function ue(){return(0,z.useContext)(Ge)}function ce(){let{coinId:o}=ue();return o}function B(){let{fromAddress:o}=ue();return o}function h(){return(o,e,r)=>{if(!o)return o;let n;return r?n=To(o,e.orderDecimalNum):n=yo(o,e.orderDecimalNum),So(n)}}var ae=()=>(0,p.useSelector)(ko),_r=()=>(0,p.useSelector)(N),E=()=>{let o=h(),e=(0,p.useSelector)(Po),{coin:r}=m();return o(e,r,!1)},me=()=>(0,p.useSelector)(Mo),Nr=()=>{let o=E(),{coin:e}=m();return F(o,10**e.decimals)},ro=()=>(0,p.useSelector)(Go),no=()=>(0,p.useSelector)(Uo),to=()=>{let o=h(),e=no(),r=A();return o(go(e,10**r.decimals),r,!0)},fe=()=>(0,p.useSelector)($o),so=()=>(0,p.useSelector)(Ho),le=()=>{let o=(0,p.useSelector)(Lo),e=(0,p.useSelector)(qo);return e===-1?o.currencyId:e},pe=()=>{let o=(0,p.useSelector)(Vo),{baseCoin:e}=m();return o===-1?e.coinId:o},io=()=>(0,p.useSelector)(Wo),de=()=>(0,p.useSelector)(zo);var uo={vdecimalNum:0,decimals:0,symbol:""};function y(){let{coinId:o}=(0,Ce.useParams)(),e=ce();return Number(e)||Number(o)}var m=()=>{let o=y(),{coin:e,baseCoin:r}=X(o,!0),n=$(e)?uo:e,i=$(r)?uo:r;return{coin:n,baseCoin:i}},A=()=>{let o=pe(),{coin:e}=X(o,!1);return $(e)?uo:e};t();s();var co=u(g()),Ae=u(w());var xe=()=>{let o=(0,Ae.useHistory)(),e=(0,co.useSelector)(wo),r=(0,co.useSelector)(N),{coin:n}=m();return async()=>{await te(n.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};function en(){let o=(0,Ee.useSelector)(Q),e=fe(),r=so(),{coin:n}=m();return(!!o.key||!!o.text)&&o.type!==C.COMMON_TIP||e||r||!n.coinId}function rn(o){let[e,{setTrue:r,setFalse:n}]=(0,Fe.useBoolean)(),i=xe();return{loading:e,onClick:async(...a)=>{r();try{if(!await se()){n();return}if(o){let l=await o(...a),{pause:d}=l||{};d||await i()}}catch(f){if(f?.message===Jo||f?.message===ie)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||xo("wallet_home_toast_network_error");bo.error({title:d})}}n()}}}t();s();t();s();var P=u(R()),M=u(b());var L=Symbol("UNSET_INPUT");function qe(){let[o,e]=(0,M.useState)(L),r=(0,P.useLatest)(o);return(0,M.useEffect)(()=>{Yo(o!==L)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function We({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:a}=qe(),f=(0,P.useLatest)(o),{run:l,cancel:d}=(0,P.useDebounceFn)(v=>{_o({coinId:e,domain:v}).then(({data:T})=>{v===f.current&&T?.address&&r({address:T?.address,domain:v})}).catch(T=>{console.log(T)}).finally(()=>{i.current===v&&a(L)})},{wait:800});return(0,M.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(a(o),l(o)):a(L),()=>{d&&d()}),[o,n]),{loading:i.current!==L,abort:()=>{d&&d(),a(L)}}}var ze=We;t();s();var Ie=u(w());function Ye(){let o=(0,Ie.useHistory)(),e=ae();return()=>{o.push(e||No)}}var Ze=Ye;t();s();var In=()=>{let o=B(),{baseCoin:e}=m(),r=Xo(e.localType);return e.localType?o||r:""};t();s();var V=u(g()),ge=u(w()),he=u(R());function Rn(){return(0,V.useSelector)(Oo)}function Bn(){let o=(0,V.useSelector)(Do),e=(0,V.useSelector)(N),r=(0,V.useSelector)(vo);return!e||o||!!r.key}function Ln(){let o=y(),e=(0,ge.useHistory)(),r=B(),{amount:n}=oe(e?.location.search.slice(1));return(0,he.useMemoizedFn)(()=>{let i={pathname:`${q}/${o}${Ro}`};r&&(i.search=`?from=${r}`),n&&(i.search=i.search?`${i.search}&amount=${n}`:`?amount=${n}`),e.push(i)})}t();s();t();s();t();s();var k=u(b()),ye=u(R());function Ke(o,e){let[r,n]=(0,k.useState)(0),i=(0,k.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let a=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,k.useCallback)((l,d)=>{(async()=>{let T=++i.current;n(S=>S+1);try{let S={key:"",args:{}};for(let we of a){let po=await we(l);if(po){S=po;break}}T===i.current&&d(S)}finally{n(S=>S-1)}})()},a);return{isCheckingError:r>0,runErrorFns:f}}function Te(o,e,r){let{callback:n,disabled:i}=r||{};(0,ye.useDebounceEffect)(()=>{(async()=>{i||e(o,n)})()},[e,o,i],{wait:100})}var Se=Ke;function Un(o,e,r){let n=E();Te(n,o,{callback:e,disabled:r})}var U=Se;t();s();var ao=u(R());t();s();var x=u(Ue());Me();Ve();He();async function be(o,e,r=""){let n=!1,{wallet:i}=await Qo(e);try{n=(await i?.validAddress({address:o,hrp:r})).isValid}catch{return n}return n}async function Y(o,e,r=""){return be(o,Eo({coinId:e})?.coinType,r)}async function jn(o){return Y(o,Io)}async function Jn(o){return Y(o,Fo)}async function je(o,e){let r=await be(o,0);return r?e===J.SEGWIT_TAPROOT?{isValid:/^(bc1p)/.test(o),addressType:e}:{isValid:r,addressType:e}:{isValid:r,addressType:e}}async function Qn(o){return je(o,J.SEGWIT_TAPROOT)}function Xn(o,{allowNonPrefixed:e=!0,mixedCaseUseChecksum:r=!1}={}){let n=e?(0,x.addHexPrefix)(o):o;if(!(0,x.isHexString)(n))return!1;if(r){let i=n.slice(2),a=i.toLowerCase(),f=i.toUpperCase();if(!(i===a||i===f))return(0,x.isValidChecksumAddress)(n)}return(0,x.isValidAddress)(n)}function Je(){return(0,ao.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function Qe(){let{baseCoin:o}=m();return(0,ao.useMemoizedFn)(async e=>await Y(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function st(){let o=Je(),e=Qe();return[o,e]}t();s();var O=u(b()),Re=u(g());t();s();var _e=u(b());I();var Xe=o=>{let e=ee(o),r=re();return(0,_e.useCallback)((n,i,a)=>{let{useApproximate:f=!0}=a||{},l=r?.[n]?.coinToUSDRate;return jo(F(i,F(l,e.usdToThisRate)),{useApproximate:f,symbol:e.symbol})},[r,e.symbol,e.usdToThisRate])},Ne=Xe;I();function or(){let{coin:o}=m(),e=Z();return(0,O.useCallback)(()=>o.baseCoinId===0&&_(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT}:null,[e])}function mo(){let o=lo();return(0,O.useCallback)(e=>j(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:C.BALANCE_INSUFFICIENT}:null,[o])}function fo(){let o=le(),e=eo(),r=Ne(o),{coin:n}=m(),i=Z();return(0,O.useCallback)(a=>{if(j(a,i)){let f=r(n.coinId,i,{useApproximate:!1}),l=`${e(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:l},type:C.BALANCE_INSUFFICIENT}}return null},[i])}var ht=o=>{let e=(0,Re.useDispatch)(),r=or(),n=mo(),i=fo(),a=[r,n,i],{runErrorFns:f}=U(a,o),l=K();(0,O.useEffect)(()=>{f(l,d=>{e(Zo(d))})},[f,l])};t();s();var D=u(b()),Be=u(g());I();t();s();var H={AMOUNT:"amount",FEE:"fee"};function er(){let o=A(),e=Le();return(0,D.useCallback)(()=>_(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT,highlight:H.FEE}:null,[e,o.symbol])}function rr(){let o=mo();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:H.AMOUNT}:null},[o])}function nr(){let o=fo();return(0,D.useCallback)(e=>{let r=o(e);return r?{...r,highlight:H.AMOUNT}:null},[o])}function tr(){let o=er(),e=rr(),r=nr();return[o,e,r]}function vt(o){let e=(0,Be.useDispatch)(),r=tr(),{runErrorFns:n}=U(r,o),i=K();(0,D.useEffect)(()=>{n(i,a=>{e(Ko(a))})},[n,i])}t();s();var ke=u(w()),Oe=u(R());I();Ao();function Xt(){let o=me(),e=E();return!!o.key&&o.type!==C.COMMON_TIP||Co(e)||e===""||_(e,0)}function os(){let o=y(),e=(0,ke.useHistory)(),r=B();return(0,Oe.useMemoizedFn)(()=>{let n={pathname:`${q}/${o}${Bo}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();I();var De=()=>{let o=y();return oo(o)},as=()=>{let o=h(),e=De(),{coin:r}=m();return o(W(e,r.decimals),r,!1)},ve=()=>{let o=De(),e=io();return e===null?o:e},lo=()=>{let o=h(),e=ve(),{coin:r}=m();return o(W(e,r.decimals),r,!1)},sr=()=>{let{coin:o}=m(),e=A(),r=no(),n=ve();return o.coinId===e.coinId?G(n,r):n},Z=()=>{let{coin:o}=m(),e=A(),r=to(),n=lo();return o.coinId===e.coinId?G(n,r):n},K=()=>{let o=ro(),e=Z(),r=E();return o?ho(e,0)?"0":e:r},ir=()=>{let o=A();return oo(o.coinId)},ur=()=>{let{coin:o}=m(),e=A(),r=ir(),n=de(),i=io();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},cr=()=>{let o=h(),e=ur(),r=A();return o(W(e,r.decimals),r,!1)},Le=()=>{let o=cr(),e=to();return G(o,e)},ms=()=>{let{coin:o}=m(),e=ro(),r=E(),n=sr();return e?n:F(r,10**o.decimals)};t();s();t();s();var ar=u(g());export{ze as a,eo as b,Ge as c,B as d,y as e,m as f,A as g,_r as h,E as i,me as j,Nr as k,ro as l,no as m,to as n,fe as o,so as p,le as q,pe as r,io as s,de as t,Ze as u,In as v,xe as w,Rn as x,Bn as y,Ln as z,Un as A,U as B,Y as C,jn as D,Jn as E,je as F,Qn as G,Xn as H,Je as I,Qe as J,st as K,or as L,mo as M,ht as N,H as O,er as P,rr as Q,tr as R,vt as S,Xt as T,os as U,De as V,as as W,ve as X,lo as Y,Z,ir as _,ur as $,Le as aa,ms as ba,ie as ca,en as da,rn as ea};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-J2MASCEL.js.map
