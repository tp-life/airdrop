import{b as Ut}from"./chunk-PCXL7FJY.js";import{c as qe}from"./chunk-Q255HBS7.js";import{a as Ne}from"./chunk-3K6OE4O5.js";import{a as Pe}from"./chunk-SEL5SOAI.js";import"./chunk-XHGPSNTM.js";import{a as Me}from"./chunk-TEHSOGCP.js";import{a as it}from"./chunk-L5MAEEVU.js";import{a as De,b as Le}from"./chunk-ICBF62IT.js";import{a as We,c as St,d as ve}from"./chunk-SPHEGRLN.js";import{a as Oe,b as be}from"./chunk-UVBPD3PC.js";import"./chunk-5WVZJUXW.js";import"./chunk-4U65LWXX.js";import{a as k,d as P}from"./chunk-WMQSMBLA.js";import{a as st,b as xe,c as kt}from"./chunk-3RJOXTRR.js";import{f as N}from"./chunk-NNO7KFUF.js";import"./chunk-CGBWDXEW.js";import{e as Ie}from"./chunk-NRWOOVOJ.js";import"./chunk-2XYRURE2.js";import"./chunk-LYFECSNW.js";import{a as Ee}from"./chunk-M7CDJYYG.js";import"./chunk-VUB7XYHG.js";import"./chunk-QZXK25MX.js";import"./chunk-J7ZUOIII.js";import"./chunk-Q2BK5I52.js";import"./chunk-QVG4GOA5.js";import"./chunk-4NCQWC2K.js";import"./chunk-BSEC3HD3.js";import"./chunk-SR5VKAMR.js";import"./chunk-2L5V4MTR.js";import"./chunk-762Y5MQL.js";import"./chunk-L56XCX6G.js";import"./chunk-7UJMDFGU.js";import"./chunk-PB7BCSCP.js";import"./chunk-6ZM3C6AR.js";import"./chunk-QOIOEYFC.js";import"./chunk-ERN756XV.js";import"./chunk-SUOZFPDI.js";import{b as Bt}from"./chunk-UWTAV26V.js";import{a as Te,b as Ce}from"./chunk-BM73LLRW.js";import{a as he}from"./chunk-XD7VJART.js";import{e as ge}from"./chunk-S2V4K2JM.js";import"./chunk-FLZ5KV6J.js";import{e as S,g as ht}from"./chunk-OCTREJ3R.js";import"./chunk-RG4N2AAJ.js";import"./chunk-JPVBM3R5.js";import"./chunk-DMPLD3VG.js";import"./chunk-WWUOPI5T.js";import"./chunk-HVADQEJS.js";import"./chunk-A52XYJMT.js";import"./chunk-YDUQEL3D.js";import"./chunk-SWHCYDK2.js";import"./chunk-BCT5GPKT.js";import{F as Zt,H as Qt}from"./chunk-FJBNQZUR.js";import"./chunk-XN45YXW3.js";import"./chunk-M75TVG7W.js";import"./chunk-YXS5E7TI.js";import"./chunk-XUKRDQIU.js";import"./chunk-OQJOA7JT.js";import"./chunk-YOJOUOFP.js";import"./chunk-7OQVWENF.js";import"./chunk-WD7752PC.js";import"./chunk-SLWKMGPD.js";import"./chunk-UC77E3WD.js";import{e as ye,g as At,i as Ae}from"./chunk-GTSNHSPT.js";import"./chunk-LVPRDSPO.js";import"./chunk-YV3R2S6K.js";import{a as Se}from"./chunk-RJO5LUBF.js";import{j as ie}from"./chunk-DRPGNVVL.js";import{a as we}from"./chunk-UEENMIFU.js";import"./chunk-3OMHZBKM.js";import"./chunk-A264YTOP.js";import"./chunk-LRVKM4IV.js";import{_a as pe,a as Rt,b as me,h as b,j as B}from"./chunk-PVSNAFN3.js";import"./chunk-JYKQJVIF.js";import"./chunk-GBQG32PI.js";import"./chunk-Q6XXIWBJ.js";import"./chunk-VWYA3Z7M.js";import{o as yt}from"./chunk-A3FIPWG3.js";import{$b as fe,Ea as ce,Gb as ue,ac as I,ob as V,qb as le}from"./chunk-NTISK7TT.js";import"./chunk-MXRUZQZ7.js";import{A as ae}from"./chunk-CU7RFE6B.js";import"./chunk-J4UWPXXS.js";import{a as wt}from"./chunk-QZUNX5I4.js";import"./chunk-IVA2TTR4.js";import{f as de}from"./chunk-OG3IV3YP.js";import"./chunk-45FKVGCF.js";import{La as R,Na as se,Pa as Ct,ra as Tt,sa as Bo}from"./chunk-KSCBZ3RY.js";import{d as rt,f as ne}from"./chunk-37O7OMRA.js";import"./chunk-5PGNMLJO.js";import{g as _e}from"./chunk-35FUKWV2.js";import"./chunk-DHNKVM4B.js";import"./chunk-VL5VJIZ7.js";import{c as nt}from"./chunk-TU7CE5HJ.js";import"./chunk-2NE2FMGV.js";import{E as Yt,Na as dt,Oc as oe,Pb as gt,S as Vt,Sc as re,U as Ht,V as jt,Wc as ko,Ya as _t,fc as Kt,ic as Lt,n as Dt,oc as Lo,ra as ot,yc as te,z as Do,zc as ee}from"./chunk-YILNSICT.js";import"./chunk-ORQMOT6Z.js";import{H as Jt,c as zt,e as Xt}from"./chunk-L4N7WJIQ.js";import{K as ft,f as ut,pa as vt}from"./chunk-LBCQTFOD.js";import{N as q,w as _}from"./chunk-V63HWKAL.js";import"./chunk-ZZ2UZY4M.js";import"./chunk-XFAFBXWC.js";import"./chunk-7EEPBGCR.js";import"./chunk-CY6DCOJP.js";import{H as Ro,Z as qt}from"./chunk-2EJYCNYZ.js";import{a as qo}from"./chunk-V2K75WCG.js";import{a as h}from"./chunk-B75PPTYD.js";import"./chunk-2AWSM2JA.js";import"./chunk-QXPU36HD.js";import"./chunk-QI5O5UGB.js";import"./chunk-2OGSVQVK.js";import"./chunk-Y5BBPTSN.js";import"./chunk-5LMNZ6ME.js";import"./chunk-SY7RUBBT.js";import"./chunk-M3FHVHHL.js";import"./chunk-BL7VW4RD.js";import"./chunk-LQWZRQFF.js";import"./chunk-VGOLUGG3.js";import"./chunk-DCDI35O2.js";import"./chunk-YEL3LVD4.js";import"./chunk-6SIBAM5N.js";import"./chunk-42IJDSSW.js";import"./chunk-BMKS7XLD.js";import"./chunk-MTFM4GGW.js";import{f as p,m as e,o}from"./chunk-UGZFXKPB.js";e();o();var v=p(h()),Q=p(I()),D=p(wt()),Oo=p(yt());Lo();Do();Ct();e();o();var Re=p(h()),Be=(0,Re.lazy)(()=>import("./Comp-5R4PBXAK.js"));e();o();e();o();var ke=p(I());Ct();function Ue(){let t=(0,ke.useDispatch)();return()=>t(se())}var Ge=Ue;e();o();e();o();var W=p(h());jt();e();o();var to=p(h());e();o();var x=p(h()),He=p(I()),je=p(wt());q();oe();e();o();var E=p(h()),$e=p(wt());vt();var Fe=p(qo());q();jt();e();o();var Et={root:"_root_oli0p_1",multiAccount:"_multiAccount_oli0p_4",count:"_count_oli0p_9"};var Go="account-selector",Ye=t=>{let r=(0,$e.useHistory)(),{permissionsRequestId:n,request:s,dappSelectAccount:a,walletInfo:i={},connectable:c=!0,hiddenAddress:m=!1,disableSelectAccount:f=!1}=t,{method:d,provider:g,status:T}=St({dappUrl:s?.metadata?.origin}),l=()=>{r.push({pathname:`${b}/${n}${B}`})},C=(0,E.useMemo)(()=>m?"":s?.providerType===Yt?_("wallet_extension_cosmos_text_cosmos_network"):i.address,[m,s?.providerType,i.address]),w=We({provider:g,method:d}),y=()=>a.length<=1?w?E.default.createElement(k,{bordered:!1},E.default.createElement(kt,{onClick:f?void 0:ut,hiddenAddress:m,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:_("wallet_extension_expand_all_networks")})):E.default.createElement(k,{bordered:!1},E.default.createElement(kt,{onClick:f?void 0:ut,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:C,hiddenAddress:m,connectable:c})):E.default.createElement(k,{bordered:!1},E.default.createElement(xe,{title:_("wallet_dapp_conncetion_requesr_subtitle_current_account")},E.default.createElement(nt.Box,{className:Et.multiAccount},E.default.createElement(nt.Box,{className:Et.count},_("wallet_extension_mid_text_accounts",{num:a.length})),E.default.createElement(Ut,{className:`${Go}__info-arrow`,side:Ut.SIDE.RIGHT}))));return E.default.createElement("div",{className:Et.root,onClick:f?ut:l},T!=="PENDING"&&y())};Ye.propTypes={permissionsRequestId:Fe.default.string.isRequired};var Ve=Ye;function $o({targetDomainMetadata:t,permissionsRequestId:r,request:n,walletInfo:s,connectable:a,tipMessage:i,buttonGroup:c,hiddenAddress:m,disableSelectAccount:f,RequestedNetworks:d,children:g,title:T}){let l=(0,je.useHistory)(),C=(0,He.useSelector)(S),w=ye();return x.default.createElement(nt.Container,null,x.default.createElement(Se,{backable:!1,closeable:!1,title:T??_("wallet_dapp_conncetion_maintitle_conncet_account")}),x.default.createElement(k,null,x.default.createElement(Ne,{...t})),x.default.createElement(Ve,{targetDomainMetadata:t,permissionsRequestId:r,request:n,dappSelectAccount:C,walletInfo:s,disableSelectAccount:f,hiddenAddress:m,connectable:a}),d&&x.default.createElement(d,{request:n}),g,x.default.createElement(we,{placeholder:!0,offsetBottom:0,borderTop:!0},x.default.createElement(P,{...i}),x.default.createElement(N,{buttonGroup:c})),s?.keyringIdentityType===ee.MPC&&x.default.createElement(De,{keyringId:s.keyringId,customConfig:w?.length===1?{confirmText:_("wallet_extension_btn_general_gotit")}:{},actionMap:{["RECOVER"]:()=>{l.push(`${pe}?action=${Ee.RECOVER}&walletId=${s.walletId}`)},["SWITCH_WALLET"]:async()=>w?.length===1?(await c[0]?.onClick(),l.push(me)):l.push({pathname:`${b}/${r}${B}`})}}))}var H=$o;e();o();var Ke=p(I());function Fo(t){let r=At(),s=(0,Ke.useSelector)(S)[0]||r,{walletInfo:a,connectable:i,chainName:c,status:m}=ve({dappUrl:t,walletId:s}),f=Le(s);return{targetWalletId:s,walletInfo:a,connectable:i,chainName:c,mpcConnectable:f,status:m}}var j=Fo;e();o();var K=p(I()),ze=p(wt()),Gt=p(yt());q();Ct();function $t({disabled:t,request:r,targetDomainMetadata:n,cancelPermissionsRequest:s,approvePermissionsRequest:a,connectSource:i,connectChains:c}){let m=(0,K.useDispatch)(),f=n?.origin,d=it(),g=(0,K.useSelector)(S),T=St({dappUrl:f});return async()=>{if(t)return;d({trade:"connect_wallet",all_confirmation:"confirm"});let C={...r,permissions:{...r.permissions}};if(Object.keys(C.permissions).length>0){if(await a(C,g),g.length===1&&await m(ie(g[0],!0)),Qt({dapp_url:f}),T?.dappUrl&&T?.provider){let w={dappurl:T.dappUrl,connect_method:i||T.provider,dappname:n?.name};c&&(w.chain=c),Zt(w)}}else await s(C.metadata.id);await R(m)}}var Yo=({props:t,isMpcError:r,connectable:n,confirmBtnText:s,onConfirm:a,onCancel:i,connectSource:c,connectChains:m,disabledConfirmBtn:f=!1})=>{let d=(0,K.useDispatch)(),g=(0,ze.useHistory)(),T=(0,K.useSelector)(S),{permissionsRequestId:l,targetDomainMetadata:C,cancelPermissionsRequest:w,approvePermissionsRequest:y,request:U}=t,L=it(),M=(0,Gt.useMemoizedFn)(async()=>{L({trade:"connect_wallet",all_confirmation:"cancel"}),i?await i(l):await w(l),await R(d)}),{loading:tt,onClick:et}=st(M),G={actionType:N.ACTION_TYPE.CANCEL,onClick:et,loading:tt},F=$t({request:U,targetDomainMetadata:C,approvePermissionsRequest:y,cancelPermissionsRequest:w,connectSource:c,connectChains:m}),Y=(0,Gt.useMemoizedFn)(async()=>{n?a?await a():await F():g.push({pathname:`${b}/${l}${B}`})}),{loading:pt,onClick:Wt}=st(Y),lt={actionType:N.ACTION_TYPE.CONFIRM,disabled:f||n&&(T.length===0||r),btnText:n?s||_("wallet_extension_connect_btn_connect"):_("wallet_extension_connect_btn_switch_wallet"),onClick:Wt,loading:pt};return[G,lt]},z=Yo;e();o();var Xe=p(h());var It=p(I());function Vo(t,r){let n=(0,It.useDispatch)(),s=(0,It.useSelector)(S),{connectable:a,mpcConnectable:i}=t;(0,Xe.useEffect)(()=>{if(!s.length&&a&&i&&r){let c=Array.isArray(r)?r:[r];n(ht.setSelectAccounts(c))}},[s,a,i,r])}var X=Vo;e();o();var Je=p(h());q();function Ho({isMpcError:t,connectable:r,chainName:n}){return(0,Je.useMemo)(()=>t?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:r?{type:P.TIP_TYPE.NORMAL,message:_("wallet_dapp_conncetion_notify_conncet_permission")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:n})},[t,r,n])}var xt=Ho;e();o();var Qe=p(h()),Ft=p(I());oe();e();o();var Mt=p(h());var Ze=(t,r)=>{let[n,s]=(0,Mt.useState)(!1);return(0,Mt.useEffect)(()=>{(async()=>{if(t&&r){let{data:a}=await Ie({dappUrl:t});s(a.result)}})()},[t,r]),n};function jo(t){let r=(0,Ft.useSelector)(S),n=(0,Ft.useSelector)(le),s=(0,Qe.useMemo)(()=>r.some(i=>n.find(c=>c.walletId===i)?.initialType===te.MPC_KEYRING),[r,n]),a=Ze(t?.host,s);return s&&!a}var J=jo;function Ko(t){let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=At(),i=j(r?.origin),{walletInfo:c,connectable:m,chainName:f,status:d}=i,g=J(r),T=xt({isMpcError:g,connectable:m,chainName:f}),l=z({props:t,isMpcError:g,connectable:m});return X(i,a),d==="PENDING"?null:to.default.createElement(H,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:T,buttonGroup:l})}var eo=Ko;e();o();var so=p(h()),io=p(I());_t();e();o();vt();_t();Kt();var zo=({props:t,isMpcError:r,connectable:n,walletInfo:s={},nearAmount:a})=>{let{walletId:i,address:c}=s,m=z({props:t,isMpcError:r,connectable:n});return!ft(a)&&gt(a,0)&&(m[1]={actionType:N.ACTION_TYPE.FILL_UP,coinId:dt,walletId:i,address:c,receiveOnly:!0}),m},oo=zo;e();o();var ro=p(h());vt();q();Kt();function Xo({nearAmount:t,isMpcError:r,connectable:n,chainName:s}){return(0,ro.useMemo)(()=>!ft(t)&&gt(t,0)?{type:zt.TYPE.warn,message:_("wallet_extension_conncetion_alert_add_more")}:r?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:n?{type:P.TIP_TYPE.NORMAL,message:_("wallet_extension_conncetion_alert_check_balance")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:s})},[t,r,n,s])}var no=Xo;var Jo=t=>{let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=(0,io.useSelector)(V),i=j(r?.origin),{walletInfo:c,connectable:m,chainName:f,targetWalletId:d}=i,g=J(r),T=Me(dt,d)?.coinAmountInt,l=no({targetWalletId:d,isMpcError:g,connectable:m,chainName:f,nearAmount:T}),C=oo({props:t,isMpcError:g,connectable:m,walletInfo:c,nearAmount:T});return X(i,a),so.default.createElement(H,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:l,buttonGroup:C})},ao=Jo;e();o();e();o();var Zo=()=>null,co=Zo;var mo=co;e();o();var mt=p(h());q();e();o();var at=p(h()),lo=p(Ro());e();o();var po={item:"_item_11fx7_1"};function Qo({className:t,message:r}){return at.default.createElement(at.default.Fragment,null,at.default.createElement(k,{bordered:!1,className:(0,lo.default)(po.item,t)},at.default.createElement(Pe,{message:r})))}var uo=Qo;e();o();var wo=p(h());q();ne();_t();Bo();e();o();var fo=p(I()),_o=p(yt());Ct();function tr({disabledSubmit:t,confirmBtnLoading:r,permissionsRequestId:n,cancelPermissionsRequest:s,request:a,targetDomainMetadata:i,approvePermissionsRequest:c}){let m=(0,fo.useDispatch)(),f=it(),d=(0,_o.useMemoizedFn)(async()=>{f({trade:"connect_wallet",all_confirmation:"cancel"}),await s(n),await R(m)}),{loading:g,onClick:T}=st(d),l={loading:g,actionType:N.ACTION_TYPE.CANCEL,onClick:T},C=$t({request:a,targetDomainMetadata:i,approvePermissionsRequest:c,cancelPermissionsRequest:s}),w={loading:r,disabled:t,actionType:N.ACTION_TYPE.CONFIRM,onClick:C};return[l,w]}var go=tr;e();o();var Nt=p(h()),To=p(yt());_t();ko();function er(t,r){let n=(0,Nt.useRef)(r?.origin),a=(t?.providersExts?.[ot]??t?.exts)?.message?.manifestUrl,[i,c]=(0,Nt.useState)(!0);return(0,To.useMount)(()=>{(async()=>{if(a)try{let f=await re(a);if(f?.status===200){let d=f.data;typeof d?.url=="string"&&(n.current=d.url)}}finally{c(!1)}else c(!1)})()}),{loading:i,domain:n.current}}var Co=er;e();o();var Ot=p(h()),Pt=p(I());function or(t){let r=(0,Pt.useSelector)(V),n=(0,Pt.useSelector)(S),s=(0,Pt.useSelector)(fe),a=he(t?.origin,s),[i,c]=(0,Ot.useState)(null);return(0,Ot.useEffect)(()=>{(async()=>{r&&n.includes(r)?c(r):a&&n.includes(a)?c(a):c(n[0])})()},[r,n,a]),i}var ho=or;var rr=({request:t,targetDomainMetadata:r,permissionsRequestId:n,approvePermissionsRequest:s,cancelPermissionsRequest:a,isSilentConnected:i})=>{let c=ho(r),{loading:m,domain:f}=Co(t,r),d=Ae(c,ot),l=((t?.providersExts?.[ot]??t?.exts)?.message?.items||[]).filter(({name:y})=>y===ce.TON_PROOF),C=l.length===1?`${l[0].payload||""}`:l.map(({payload:y})=>({value:y}));(0,wo.useEffect)(()=>{Tt("Sign Ton Proof UI",{tonAddress:d})},[d]);let w=go({disabledSubmit:m,permissionsRequestId:n,request:t,targetDomainMetadata:r,approvePermissionsRequest:async(y,U,L)=>{try{let M=Math.round(Date.now()/1e3),tt=new URL(f).host,et=await Promise.all(l.map(async({payload:G})=>{let F;try{Tt("Call Sign Ton Proof",{tonAddress:d}),F=await rt().signTonProof({proof:{timestamp:M,domain:tt,payload:G}},d,c)}catch(Y){throw Tt("Error Sign Ton Proof",{tonAddress:d,isReject:Y?.message===ae}),Y}return{payload:G,signature:F}}));y.resultParams={domain:f,timestamp:M,signatures:et}}catch{return Jt.error({title:_("wallet_extension_ton_error_signature_support")}),null}return s(y,U,L,!i)},cancelPermissionsRequest:a});return{tonProofs:l,message:C,buttonGroup:w}},yo=rr;e();o();var ct=p(h()),Ao=p(I());ne();function nr({targetDomainMetadata:t,dappMetadata:r,alwaysNeedProof:n}){let s=(0,Ao.useSelector)(V),[a,i]=(0,ct.useState)(null),[c,m]=(0,ct.useState)(!0);return(0,ct.useEffect)(()=>{(async()=>{if(!n){m(!1);return}try{(await rt().getPermittedWallets(t?.origin,!1)).length>0&&i(await rt().getPermittedWallets(t?.origin,!0))}finally{m(!1)}})()},[n]),X(r,c?null:a||s),{loading:c,isSilentConnected:!!a}}var So=nr;e();o();var Eo={loading:"_loading_po7pc_1"};function sr(t){let{alwaysNeedProof:r,targetDomainMetadata:n,permissionsRequestId:s,request:a}=t,i=j(n?.origin),{walletInfo:c,connectable:m,chainName:f}=i,d=J(n),g=xt({isMpcError:d,connectable:m,chainName:f}),T={props:t,isMpcError:d,connectable:m,connectSource:a?.exts?.connectSource},l=z(T),{loading:C,isSilentConnected:w}=So({targetDomainMetadata:n,dappMetadata:i,alwaysNeedProof:r}),{tonProofs:y,message:U,buttonGroup:L}=yo({...t,isSilentConnected:w}),M=y?.length>0;return C?mt.default.createElement("div",{className:Eo.loading},mt.default.createElement(qt.Circle,{size:qt.SIZE.lg})):mt.default.createElement(H,{targetDomainMetadata:{...n,host:n.origin||n.host},permissionsRequestId:s,request:a,walletInfo:c,connectable:m,tipMessage:g,buttonGroup:M?L:l,title:M?_("wallet_extension_header_connect_sign"):void 0},mt.default.createElement(uo,{message:U}))}var Io=sr;e();o();e();o();var ir=()=>null,xo=ir;var Mo=xo;e();o();var Z=p(h());q();e();o();var bt={root:"_root_h6iyb_1",animation:"_animation_h6iyb_14",text:"_text_h6iyb_17"};var ar=({onComplete:t})=>{let[r,n]=(0,Z.useState)(!1),s=_e({dark:"/static/images/dapp/success-dark.json",light:"/static/images/dapp/success-light.json"});return Z.default.createElement("div",{className:bt.root},Z.default.createElement(Xt,{className:bt.animation,path:s,loop:!1,onDataReady:()=>{n(!0)},onComplete:t}),r?Z.default.createElement("span",{className:bt.text},_("wallet_home_foot_dapp_connceted")):null)},No=ar;var Po=({chooseAccountProps:t,showAni:r})=>{let n=t?.request?.providerTypes,s=t?.request?.providersExts,a=t?.request?.exts?.alwaysNeedProof,i=t?.request?.providerType,c=!!n,m=t?.request?.exts?.isShowWalletConnect;return W.default.createElement(W.default.Fragment,null,(()=>{switch(!0){case m:return W.default.createElement(Mo,{providerTypes:n,providersExts:s,...t});case c:return W.default.createElement(mo,{providerTypes:n,providersExts:s,...t});case(i===Vt&&a):return W.default.createElement(ao,{...t});case i===Ht:return W.default.createElement(Io,{alwaysNeedProof:a,...t});default:return W.default.createElement(eo,{...t})}})(),r&&W.default.createElement(No,{onComplete:()=>{t?.onComplete()}}))};var ec=()=>{let t=(0,Q.useDispatch)(),r=(0,D.useHistory)(),s=(0,D.useRouteMatch)().params.id,i=(0,Q.useSelector)(ge).find(A=>A.metadata.id===s),c=i?.providerTypes,[m,f]=(0,v.useState)(!1),d=(0,Q.useSelector)(Ce),g=(0,Q.useSelector)(ue),{metadata:T={}}=i||{},{origin:l}=T,C=null;if(l)if(g[l])C={...g[l],origin:l},C.icon??=de;else{let A=new URL(l);C={host:A.host,name:A.hostname,origin:l}}let w=`${b}/${s}`,y=`${b}/${s}${B}`,U=async(A,O,$)=>{await t(Oe(A,O,$))},L=async(A,O,$)=>{await t(be(A,O,$)),await t(Bt())},M=()=>t(qe()),tt=Ge(),et=()=>t(ht.setSelectAccounts([])),G=()=>{s&&d===Te.connect&&L(s,l)},F=()=>{Lt()===Dt&&window.addEventListener("beforeunload",G)},Y=()=>{Lt()===Dt&&window.removeEventListener("beforeunload",G)},pt=()=>(Y(),r.push(Rt)),Wt=async(A,O)=>{A&&(await L(A,l,O),await R(t),pt())},lt=()=>{f(!1),pt(),t(Bt())};(0,Oo.useMount)(()=>{if(tt(),M(),!i){r.push(Rt);return}F(),et()});let bo=c;return v.default.createElement("div",{className:"page-container permissions-connect"},v.default.createElement(D.Switch,null,v.default.createElement(D.Route,{path:y,exact:!0,render:()=>v.default.createElement(Be,{request:i||{},multi:!bo})}),v.default.createElement(D.Route,{path:w,exact:!0,render:()=>v.default.createElement(Po,{chooseAccountProps:{request:i||{},cancelPermissionsRequest:(O,$)=>Wt(O,$),permissionsRequestId:s,targetDomainMetadata:C,onComplete:lt,approvePermissionsRequest:async(O,$,Wo,vo=!0)=>{await U(O,$,Wo),await R(t),vo?f(!0):lt()}},showAni:m})})))};export{ec as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=PermissionsConnect-DZJTQ6TI.js.map
