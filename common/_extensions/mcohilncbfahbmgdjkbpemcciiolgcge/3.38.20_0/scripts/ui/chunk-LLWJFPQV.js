import{a as qo,b as Uo,c as Po}from"./chunk-PJE3AWUO.js";import{a as Bo,b as _o,c as Ro,d as To,e as Io,f as ko,g as No}from"./chunk-U5KK4TZK.js";import{N as Gn}from"./chunk-MTFM4GGW.js";import{b as Mr,c as N,d as Kn,m as g,o as w}from"./chunk-UGZFXKPB.js";var Yn=N((Ja,Xn)=>{"use strict";g();w();Xn.exports=re;var $t=$e();function re(r,e){this.lo=r>>>0,this.hi=e>>>0}var ct=re.zero=new re(0,0);ct.toNumber=function(){return 0};ct.zzEncode=ct.zzDecode=function(){return this};ct.length=function(){return 1};var $o=re.zeroHash="\0\0\0\0\0\0\0\0";re.fromNumber=function(e){if(e===0)return ct;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new re(n,i)};re.from=function(e){if(typeof e=="number")return re.fromNumber(e);if($t.isString(e))if($t.Long)e=$t.Long.fromString(e);else return re.fromNumber(parseInt(e,10));return e.low||e.high?new re(e.low>>>0,e.high>>>0):ct};re.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};re.prototype.toLong=function(e){return $t.Long?new $t.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Ke=String.prototype.charCodeAt;re.fromHash=function(e){return e===$o?ct:new re((Ke.call(e,0)|Ke.call(e,1)<<8|Ke.call(e,2)<<16|Ke.call(e,3)<<24)>>>0,(Ke.call(e,4)|Ke.call(e,5)<<8|Ke.call(e,6)<<16|Ke.call(e,7)<<24)>>>0)};re.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};re.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};re.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};re.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var $e=N(Zr=>{"use strict";g();w();var O=Zr;O.asPromise=Bo();O.base64=_o();O.EventEmitter=Ro();O.float=To();O.inquire=Io();O.utf8=ko();O.pool=No();O.LongBits=Yn();O.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);O.global=O.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Zr;O.emptyArray=Object.freeze?Object.freeze([]):[];O.emptyObject=Object.freeze?Object.freeze({}):{};O.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};O.isString=function(e){return typeof e=="string"||e instanceof String};O.isObject=function(e){return e&&typeof e=="object"};O.isset=O.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};O.Buffer=function(){try{var r=O.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();O._Buffer_from=null;O._Buffer_allocUnsafe=null;O.newBuffer=function(e){return typeof e=="number"?O.Buffer?O._Buffer_allocUnsafe(e):new O.Array(e):O.Buffer?O._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};O.Array=typeof Uint8Array<"u"?Uint8Array:Array;O.Long=O.global.dcodeIO&&O.global.dcodeIO.Long||O.global.Long||O.inquire("long");O.key2Re=/^true|false|0|1$/;O.key32Re=/^-?(?:0|[1-9][0-9]*)$/;O.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;O.longToHash=function(e){return e?O.LongBits.from(e).toHash():O.LongBits.zeroHash};O.longFromHash=function(e,t){var n=O.LongBits.fromHash(e);return O.Long?O.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function Qn(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}O.merge=Qn;O.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function ei(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Qn(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}O.newError=ei;O.ProtocolError=ei("ProtocolError");O.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(t[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};O.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};O.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};O._configure=function(){var r=O.Buffer;if(!r){O._Buffer_from=O._Buffer_allocUnsafe=null;return}O._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},O._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var nr=N((eu,ii)=>{"use strict";g();w();ii.exports=V;var be=$e(),jr,rr=be.LongBits,ti=be.base64,ri=be.utf8;function zt(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function Jr(){}function zo(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function V(){this.len=0,this.head=new zt(Jr,0,0),this.tail=this.head,this.states=null}var ni=function(){return be.Buffer?function(){return(V.create=function(){return new jr})()}:function(){return new V}};V.create=ni();V.alloc=function(e){return new be.Array(e)};be.Array!==Array&&(V.alloc=be.pool(V.alloc,be.Array.prototype.subarray));V.prototype._push=function(e,t,n){return this.tail=this.tail.next=new zt(e,t,n),this.len+=t,this};function Kr(r,e,t){e[t]=r&255}function Do(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function Gr(r,e){this.len=r,this.next=void 0,this.val=e}Gr.prototype=Object.create(zt.prototype);Gr.prototype.fn=Do;V.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Gr((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};V.prototype.int32=function(e){return e<0?this._push(Xr,10,rr.fromNumber(e)):this.uint32(e)};V.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Xr(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}V.prototype.uint64=function(e){var t=rr.from(e);return this._push(Xr,t.length(),t)};V.prototype.int64=V.prototype.uint64;V.prototype.sint64=function(e){var t=rr.from(e).zzEncode();return this._push(Xr,t.length(),t)};V.prototype.bool=function(e){return this._push(Kr,1,e?1:0)};function Wr(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}V.prototype.fixed32=function(e){return this._push(Wr,4,e>>>0)};V.prototype.sfixed32=V.prototype.fixed32;V.prototype.fixed64=function(e){var t=rr.from(e);return this._push(Wr,4,t.lo)._push(Wr,4,t.hi)};V.prototype.sfixed64=V.prototype.fixed64;V.prototype.float=function(e){return this._push(be.float.writeFloatLE,4,e)};V.prototype.double=function(e){return this._push(be.float.writeDoubleLE,8,e)};var Fo=be.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};V.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(Kr,1,0);if(be.isString(e)){var n=V.alloc(t=ti.length(e));ti.decode(e,n,0),e=n}return this.uint32(t)._push(Fo,t,e)};V.prototype.string=function(e){var t=ri.length(e);return t?this.uint32(t)._push(ri.write,t,e):this._push(Kr,1,0)};V.prototype.fork=function(){return this.states=new zo(this),this.head=this.tail=new zt(Jr,0,0),this.len=0,this};V.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new zt(Jr,0,0),this.len=0),this};V.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};V.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};V._configure=function(r){jr=r,V.create=ni(),jr._configure()}});var fi=N((nu,oi)=>{"use strict";g();w();oi.exports=ze;var si=nr();(ze.prototype=Object.create(si.prototype)).constructor=ze;var Ge=$e();function ze(){si.call(this)}ze._configure=function(){ze.alloc=Ge._Buffer_allocUnsafe,ze.writeBytesBuffer=Ge.Buffer&&Ge.Buffer.prototype instanceof Uint8Array&&Ge.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};ze.prototype.bytes=function(e){Ge.isString(e)&&(e=Ge._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(ze.writeBytesBuffer,t,e),this};function Ho(r,e,t){r.length<40?Ge.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}ze.prototype.string=function(e){var t=Ge.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Ho,t,e),this};ze._configure()});var sr=N((ou,hi)=>{"use strict";g();w();hi.exports=Q;var Be=$e(),Qr,ci=Be.LongBits,Co=Be.utf8;function _e(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Q(r){this.buf=r,this.pos=0,this.len=r.length}var ai=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Q(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Q(e);throw Error("illegal buffer")},li=function(){return Be.Buffer?function(t){return(Q.create=function(i){return Be.Buffer.isBuffer(i)?new Qr(i):ai(i)})(t)}:ai};Q.create=li();Q.prototype._slice=Be.Array.prototype.subarray||Be.Array.prototype.slice;Q.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,_e(this,10);return e}}();Q.prototype.int32=function(){return this.uint32()|0};Q.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Yr(){var r=new ci(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw _e(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw _e(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Q.prototype.bool=function(){return this.uint32()!==0};function ir(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Q.prototype.fixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return ir(this.buf,this.pos+=4)};Q.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return ir(this.buf,this.pos+=4)|0};function ui(){if(this.pos+8>this.len)throw _e(this,8);return new ci(ir(this.buf,this.pos+=4),ir(this.buf,this.pos+=4))}Q.prototype.float=function(){if(this.pos+4>this.len)throw _e(this,4);var e=Be.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Q.prototype.double=function(){if(this.pos+8>this.len)throw _e(this,4);var e=Be.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Q.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw _e(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,n);if(t===n){var i=Be.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,n)};Q.prototype.string=function(){var e=this.bytes();return Co.read(e,0,e.length)};Q.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw _e(this,e);this.pos+=e}else do if(this.pos>=this.len)throw _e(this);while(this.buf[this.pos++]&128);return this};Q.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Q._configure=function(r){Qr=r,Q.create=li(),Qr._configure();var e=Be.Long?"toLong":"toNumber";Be.merge(Q.prototype,{int64:function(){return Yr.call(this)[e](!1)},uint64:function(){return Yr.call(this)[e](!0)},sint64:function(){return Yr.call(this).zzDecode()[e](!1)},fixed64:function(){return ui.call(this)[e](!0)},sfixed64:function(){return ui.call(this)[e](!1)}})}});var mi=N((uu,yi)=>{"use strict";g();w();yi.exports=lt;var pi=sr();(lt.prototype=Object.create(pi.prototype)).constructor=lt;var di=$e();function lt(r){pi.call(this,r)}lt._configure=function(){di.Buffer&&(lt.prototype._slice=di.Buffer.prototype.slice)};lt.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};lt._configure()});var wi=N((hu,gi)=>{"use strict";g();w();gi.exports=Dt;var en=$e();(Dt.prototype=Object.create(en.EventEmitter.prototype)).constructor=Dt;function Dt(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");en.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Dt.prototype.rpcCall=function r(e,t,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return en.asPromise(r,o,e,t,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(a,u){if(a)return o.emit("error",a,e),s(a);if(u===null){o.end(!0);return}if(!(u instanceof n))try{u=n[o.responseDelimited?"decodeDelimited":"decode"](u)}catch(h){return o.emit("error",h,e),s(h)}return o.emit("data",u,e),s(null,u)})}catch(f){o.emit("error",f,e),setTimeout(function(){s(f)},0);return}};Dt.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var tn=N(vi=>{"use strict";g();w();var Vo=vi;Vo.Service=wi()});var rn=N((wu,bi)=>{"use strict";g();w();bi.exports={}});var nn=N(Si=>{"use strict";g();w();var he=Si;he.build="minimal";he.Writer=nr();he.BufferWriter=fi();he.Reader=sr();he.BufferReader=mi();he.util=$e();he.rpc=tn();he.roots=rn();he.configure=Ei;function Ei(){he.util._configure(),he.Writer._configure(he.BufferWriter),he.Reader._configure(he.BufferReader)}Ei()});var ht=N(xi=>{"use strict";g();w();var Ft=xi,Lo=ne(),Mo=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Ht(r,e){var t=0,n={};for(e|=0;t<r.length;)n[Mo[t+e]]=r[t++];return n}Ft.basic=Ht([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Ft.defaults=Ht([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",Lo.emptyArray,null]);Ft.long=Ht([0,0,0,1,1],7);Ft.mapKey=Ht([0,0,0,5,5,0,0,0,1,1,0,2],2);Ft.packed=Ht([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Xe=N((_u,Bi)=>{"use strict";g();w();Bi.exports=Ee;var or=dt();((Ee.prototype=Object.create(or.prototype)).constructor=Ee).className="Field";var Oi=Re(),Ai=ht(),te=ne(),sn,Zo=/^required|optional|repeated$/;Ee.fromJSON=function(e,t){return new Ee(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)};function Ee(r,e,t,n,i,s,o){if(te.isObject(n)?(o=i,s=n,n=i=void 0):te.isObject(i)&&(o=s,s=i,i=void 0),or.call(this,r,s),!te.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!te.isString(t))throw TypeError("type must be a string");if(n!==void 0&&!Zo.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!te.isString(i))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=t,this.id=e,this.extend=i||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=te.Long?Ai.long[t]!==void 0:!1,this.bytes=t==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(Ee.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Ee.prototype.setOption=function(e,t,n){return e==="packed"&&(this._packed=null),or.prototype.setOption.call(this,e,t,n)};Ee.prototype.toJSON=function(e){var t=e?Boolean(e.keepComments):!1;return te.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};Ee.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=Ai.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof sn?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof Oi&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof Oi))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=te.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;te.base64.test(this.typeDefault)?te.base64.decode(this.typeDefault,e=te.newBuffer(te.base64.length(this.typeDefault)),0):te.utf8.write(this.typeDefault,e=te.newBuffer(te.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=te.emptyObject:this.repeated?this.defaultValue=te.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof sn&&(this.parent.ctor.prototype[this.name]=this.defaultValue),or.prototype.resolve.call(this)};Ee.d=function(e,t,n,i){return typeof t=="function"?t=te.decorateType(t).name:t&&typeof t=="object"&&(t=te.decorateEnum(t).name),function(o,f){te.decorateType(o.constructor).add(new Ee(f,e,t,n,{default:i}))}};Ee._configure=function(e){sn=e}});var bt=N((Iu,Ti)=>{"use strict";g();w();Ti.exports=Se;var ar=dt();((Se.prototype=Object.create(ar.prototype)).constructor=Se).className="OneOf";var _i=Xe(),fr=ne();function Se(r,e,t,n){if(Array.isArray(e)||(t=e,e=void 0),ar.call(this,r,t),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}Se.fromJSON=function(e,t){return new Se(e,t.oneof,t.options,t.comment)};Se.prototype.toJSON=function(e){var t=e?Boolean(e.keepComments):!1;return fr.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])};function Ri(r){if(r.parent)for(var e=0;e<r.fieldsArray.length;++e)r.fieldsArray[e].parent||r.parent.add(r.fieldsArray[e])}Se.prototype.add=function(e){if(!(e instanceof _i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,Ri(this),this};Se.prototype.remove=function(e){if(!(e instanceof _i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this};Se.prototype.onAdd=function(e){ar.prototype.onAdd.call(this,e);for(var t=this,n=0;n<this.oneof.length;++n){var i=e.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}Ri(this)};Se.prototype.onRemove=function(e){for(var t=0,n;t<this.fieldsArray.length;++t)(n=this.fieldsArray[t]).parent&&n.parent.remove(n);ar.prototype.onRemove.call(this,e)};Se.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(i,s){fr.decorateType(i.constructor).add(new Se(s,e)),Object.defineProperty(i,s,{get:fr.oneOfGetter(e),set:fr.oneOfSetter(e)})}}});var xt=N((qu,qi)=>{"use strict";g();w();qi.exports=M;var on=dt();((M.prototype=Object.create(on.prototype)).constructor=M).className="Namespace";var Ii=Xe(),ur=ne(),jo=bt(),Et,Ct,St;M.fromJSON=function(e,t){return new M(e,t.options).addJSON(t.nested)};function ki(r,e){if(!!(r&&r.length)){for(var t={},n=0;n<r.length;++n)t[r[n].name]=r[n].toJSON(e);return t}}M.arrayToJSON=ki;M.isReservedId=function(e,t){if(e){for(var n=0;n<e.length;++n)if(typeof e[n]!="string"&&e[n][0]<=t&&e[n][1]>t)return!0}return!1};M.isReservedName=function(e,t){if(e){for(var n=0;n<e.length;++n)if(e[n]===t)return!0}return!1};function M(r,e){on.call(this,r,e),this.nested=void 0,this._nestedArray=null}function Ni(r){return r._nestedArray=null,r}Object.defineProperty(M.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=ur.toArray(this.nested))}});M.prototype.toJSON=function(e){return ur.toObject(["options",this.options,"nested",ki(this.nestedArray,e)])};M.prototype.addJSON=function(e){var t=this;if(e)for(var n=Object.keys(e),i=0,s;i<n.length;++i)s=e[n[i]],t.add((s.fields!==void 0?Et.fromJSON:s.values!==void 0?St.fromJSON:s.methods!==void 0?Ct.fromJSON:s.id!==void 0?Ii.fromJSON:M.fromJSON)(n[i],s));return this};M.prototype.get=function(e){return this.nested&&this.nested[e]||null};M.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof St)return this.nested[e].values;throw Error("no such enum: "+e)};M.prototype.add=function(e){if(!(e instanceof Ii&&e.extend!==void 0||e instanceof Et||e instanceof jo||e instanceof St||e instanceof Ct||e instanceof M))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t)if(t instanceof M&&e instanceof M&&!(t instanceof Et||t instanceof Ct)){for(var n=t.nestedArray,i=0;i<n.length;++i)e.add(n[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),Ni(this)};M.prototype.remove=function(e){if(!(e instanceof on))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),Ni(this)};M.prototype.define=function(e,t){if(ur.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var n=this;e.length>0;){var i=e.shift();if(n.nested&&n.nested[i]){if(n=n.nested[i],!(n instanceof M))throw Error("path conflicts with non-namespace objects")}else n.add(n=new M(i))}return t&&n.addJSON(t),n};M.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof M?e[t++].resolveAll():e[t++].resolve();return this.resolve()};M.prototype.lookup=function(e,t,n){if(typeof t=="boolean"?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),ur.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),t);var i=this.get(e[0]);if(i){if(e.length===1){if(!t||t.indexOf(i.constructor)>-1)return i}else if(i instanceof M&&(i=i.lookup(e.slice(1),t,!0)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof M&&(i=this._nestedArray[s].lookup(e,t,!0)))return i;return this.parent===null||n?null:this.parent.lookup(e,t)};M.prototype.lookupType=function(e){var t=this.lookup(e,[Et]);if(!t)throw Error("no such type: "+e);return t};M.prototype.lookupEnum=function(e){var t=this.lookup(e,[St]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};M.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[Et,St]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};M.prototype.lookupService=function(e){var t=this.lookup(e,[Ct]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};M._configure=function(r,e,t){Et=r,Ct=e,St=t}});var cr=N(($u,Ui)=>{"use strict";g();w();Ui.exports=Me;var fn=Xe();((Me.prototype=Object.create(fn.prototype)).constructor=Me).className="MapField";var Wo=ht(),Vt=ne();function Me(r,e,t,n,i,s){if(fn.call(this,r,e,n,void 0,void 0,i,s),!Vt.isString(t))throw TypeError("keyType must be a string");this.keyType=t,this.resolvedKeyType=null,this.map=!0}Me.fromJSON=function(e,t){return new Me(e,t.id,t.keyType,t.type,t.options,t.comment)};Me.prototype.toJSON=function(e){var t=e?Boolean(e.keepComments):!1;return Vt.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};Me.prototype.resolve=function(){if(this.resolved)return this;if(Wo.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return fn.prototype.resolve.call(this)};Me.d=function(e,t,n){return typeof n=="function"?n=Vt.decorateType(n).name:n&&typeof n=="object"&&(n=Vt.decorateEnum(n).name),function(s,o){Vt.decorateType(s.constructor).add(new Me(o,e,t,n))}}});var lr=N((Fu,Pi)=>{"use strict";g();w();Pi.exports=pt;var an=dt();((pt.prototype=Object.create(an.prototype)).constructor=pt).className="Method";var Ot=ne();function pt(r,e,t,n,i,s,o,f,a){if(Ot.isObject(i)?(o=i,i=s=void 0):Ot.isObject(s)&&(o=s,s=void 0),!(e===void 0||Ot.isString(e)))throw TypeError("type must be a string");if(!Ot.isString(t))throw TypeError("requestType must be a string");if(!Ot.isString(n))throw TypeError("responseType must be a string");an.call(this,r,o),this.type=e||"rpc",this.requestType=t,this.requestStream=i?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=f,this.parsedOptions=a}pt.fromJSON=function(e,t){return new pt(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};pt.prototype.toJSON=function(e){var t=e?Boolean(e.keepComments):!1;return Ot.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])};pt.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),an.prototype.resolve.call(this))}});var hr=N((Vu,zi)=>{"use strict";g();w();zi.exports=xe;var Ye=xt();((xe.prototype=Object.create(Ye.prototype)).constructor=xe).className="Service";var un=lr(),Lt=ne(),Jo=tn();function xe(r,e){Ye.call(this,r,e),this.methods={},this._methodsArray=null}xe.fromJSON=function(e,t){var n=new xe(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),s=0;s<i.length;++s)n.add(un.fromJSON(i[s],t.methods[i[s]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n};xe.prototype.toJSON=function(e){var t=Ye.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return Lt.toObject(["options",t&&t.options||void 0,"methods",Ye.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(xe.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Lt.toArray(this.methods))}});function $i(r){return r._methodsArray=null,r}xe.prototype.get=function(e){return this.methods[e]||Ye.prototype.get.call(this,e)};xe.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return Ye.prototype.resolve.call(this)};xe.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof un?(this.methods[e.name]=e,e.parent=this,$i(this)):Ye.prototype.add.call(this,e)};xe.prototype.remove=function(e){if(e instanceof un){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,$i(this)}return Ye.prototype.remove.call(this,e)};xe.prototype.create=function(e,t,n){for(var i=new Jo.Service(e,t,n),s=0,o;s<this.methodsArray.length;++s){var f=Lt.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[f]=Lt.codegen(["r","c"],Lt.isReserved(f)?f+"_":f)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var dr=N((Zu,Di)=>{"use strict";g();w();Di.exports=De;var Ko=$e();function De(r){if(r)for(var e=Object.keys(r),t=0;t<e.length;++t)this[e[t]]=r[e[t]]}De.create=function(e){return this.$type.create(e)};De.encode=function(e,t){return this.$type.encode(e,t)};De.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)};De.decode=function(e){return this.$type.decode(e)};De.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};De.verify=function(e){return this.$type.verify(e)};De.fromObject=function(e){return this.$type.fromObject(e)};De.toObject=function(e,t){return this.$type.toObject(e,t)};De.prototype.toJSON=function(){return this.$type.toObject(this,Ko.toJSONOptions)}});var cn=N((Ju,Hi)=>{"use strict";g();w();Hi.exports=Yo;var Go=Re(),Ze=ht(),Fi=ne();function Xo(r){return"missing required '"+r.name+"'"}function Yo(r){var e=Fi.codegen(["r","l"],r.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(r.fieldsArray.filter(function(f){return f.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");r.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var t=0;t<r.fieldsArray.length;++t){var n=r._fieldsArray[t].resolve(),i=n.resolvedType instanceof Go?"int32":n.type,s="m"+Fi.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),Ze.defaults[n.keyType]!==void 0?e("k=%j",Ze.defaults[n.keyType]):e("k=null"),Ze.defaults[i]!==void 0?e("value=%j",Ze.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),Ze.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",t):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),Ze.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):n.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),Ze.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),Ze.basic[i]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,t):e("%s.push(r.%s())",s,i)):Ze.basic[i]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,t):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),t=0;t<r._fieldsArray.length;++t){var o=r._fieldsArray[t];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",Xo(o))}return e("return m")}});var dn=N((Xu,Ci)=>{"use strict";g();w();Ci.exports=tf;var Qo=Re(),ln=ne();function Oe(r,e){return r.name+": "+e+(r.repeated&&e!=="array"?"[]":r.map&&e!=="object"?"{k:"+r.keyType+"}":"")+" expected"}function hn(r,e,t,n){if(e.resolvedType)if(e.resolvedType instanceof Qo){r("switch(%s){",n)("default:")("return%j",Oe(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)r("case %i:",e.resolvedType.values[i[s]]);r("break")("}")}else r("{")("var e=types[%i].verify(%s);",t,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.isInteger(%s))",n)("return%j",Oe(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",Oe(e,"integer|Long"));break;case"float":case"double":r('if(typeof %s!=="number")',n)("return%j",Oe(e,"number"));break;case"bool":r('if(typeof %s!=="boolean")',n)("return%j",Oe(e,"boolean"));break;case"string":r("if(!util.isString(%s))",n)("return%j",Oe(e,"string"));break;case"bytes":r('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",Oe(e,"buffer"));break}return r}function ef(r,e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.key32Re.test(%s))",t)("return%j",Oe(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.key64Re.test(%s))",t)("return%j",Oe(e,"integer|Long key"));break;case"bool":r("if(!util.key2Re.test(%s))",t)("return%j",Oe(e,"boolean key"));break}return r}function tf(r){var e=ln.codegen(["m"],r.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),t=r.oneofsArray,n={};t.length&&e("var p={}");for(var i=0;i<r.fieldsArray.length;++i){var s=r._fieldsArray[i].resolve(),o="m"+ln.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",Oe(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),ef(e,s,"k[i]"),hn(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",Oe(s,"array"))("for(var i=0;i<%s.length;++i){",o),hn(e,s,i,o+"[i]")("}");else{if(s.partOf){var f=ln.safeProp(s.partOf.name);n[s.partOf.name]===1&&e("if(p%s===1)",f)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,e("p%s=1",f)}hn(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var mn=N(Li=>{"use strict";g();w();var Vi=Li,Mt=Re(),Fe=ne();function pn(r,e,t,n){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof Mt){r("switch(d%s){",n);for(var s=e.resolvedType.values,o=Object.keys(s),f=0;f<o.length;++f)s[o[f]]===e.typeDefault&&!i&&(r("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),e.repeated||r("break"),i=!0),r("case%j:",o[f])("case %i:",s[o[f]])("m%s=%j",n,s[o[f]])("break");r("}")}else r('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,t,n);else{var a=!1;switch(e.type){case"double":case"float":r("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":r("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":r("m%s=d%s|0",n,n);break;case"uint64":a=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,a)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,a?"true":"");break;case"bytes":r('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":r("m%s=String(d%s)",n,n);break;case"bool":r("m%s=Boolean(d%s)",n,n);break}}return r}Vi.fromObject=function(e){var t=e.fieldsArray,n=Fe.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<t.length;++i){var s=t[i].resolve(),o=Fe.safeProp(s.name);s.map?(n("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),pn(n,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),pn(n,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Mt||n("if(d%s!=null){",o),pn(n,s,i,o),s.resolvedType instanceof Mt||n("}"))}return n("return m")};function yn(r,e,t,n){if(e.resolvedType)e.resolvedType instanceof Mt?r("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,t,n,n,t,n,n):r("d%s=types[%i].toObject(m%s,o)",n,t,n);else{var i=!1;switch(e.type){case"double":case"float":r("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":r("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:r("d%s=m%s",n,n);break}}return r}Vi.toObject=function(e){var t=e.fieldsArray.slice().sort(Fe.compareFieldsById);if(!t.length)return Fe.codegen()("return {}");for(var n=Fe.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],f=0;f<t.length;++f)t[f].partOf||(t[f].resolve().repeated?i:t[f].map?s:o).push(t[f]);if(i.length){for(n("if(o.arrays||o.defaults){"),f=0;f<i.length;++f)n("d%s=[]",Fe.safeProp(i[f].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),f=0;f<s.length;++f)n("d%s={}",Fe.safeProp(s[f].name));n("}")}if(o.length){for(n("if(o.defaults){"),f=0;f<o.length;++f){var a=o[f],u=Fe.safeProp(a.name);if(a.resolvedType instanceof Mt)n("d%s=o.enums===String?%j:%j",u,a.resolvedType.valuesById[a.typeDefault],a.typeDefault);else if(a.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",a.typeDefault.low,a.typeDefault.high,a.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,a.typeDefault.toString(),a.typeDefault.toNumber());else if(a.bytes){var h="["+Array.prototype.slice.call(a.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,a.typeDefault))("else{")("d%s=%s",u,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else n("d%s=%j",u,a.typeDefault)}n("}")}var l=!1;for(f=0;f<t.length;++f){var a=t[f],y=e._fieldsArray.indexOf(a),u=Fe.safeProp(a.name);a.map?(l||(l=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){"),yn(n,a,y,u+"[ks2[j]]")("}")):a.repeated?(n("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u),yn(n,a,y,u+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",u,a.name),yn(n,a,y,u),a.partOf&&n("if(o.oneofs)")("d%s=%j",Fe.safeProp(a.partOf.name),a.name)),n("}")}return n("return d")}});var gn=N(Mi=>{"use strict";g();w();var rf=Mi,nf=dr();rf[".google.protobuf.Any"]={fromObject:function(r){if(r&&r["@type"]){var e=r["@type"].substring(r["@type"].lastIndexOf("/")+1),t=this.lookup(e);if(t){var n=r["@type"].charAt(0)==="."?r["@type"].slice(1):r["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:t.encode(t.fromObject(r)).finish()})}}return this.fromObject(r)},toObject:function(r,e){var t="type.googleapis.com/",n="",i="";if(e&&e.json&&r.type_url&&r.value){i=r.type_url.substring(r.type_url.lastIndexOf("/")+1),n=r.type_url.substring(0,r.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(r=s.decode(r.value))}if(!(r instanceof this.ctor)&&r instanceof nf){var o=r.$type.toObject(r,e),f=r.$type.fullName[0]==="."?r.$type.fullName.slice(1):r.$type.fullName;return n===""&&(n=t),i=n+f,o["@type"]=i,o}return this.toObject(r,e)}}});var mr=N((oc,ji)=>{"use strict";g();w();ji.exports=J;var Te=xt();((J.prototype=Object.create(Te.prototype)).constructor=J).className="Type";var sf=Re(),bn=bt(),pr=Xe(),of=cr(),ff=hr(),wn=dr(),vn=sr(),af=nr(),ae=ne(),uf=En(),cf=cn(),lf=dn(),Zi=mn(),hf=gn();function J(r,e){Te.call(this,r,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(J.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var r=Object.keys(this.fields),e=0;e<r.length;++e){var t=this.fields[r[e]],n=t.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=t}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ae.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ae.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=J.generateConstructor(this)())},set:function(r){var e=r.prototype;e instanceof wn||((r.prototype=new wn).constructor=r,ae.merge(r.prototype,e)),r.$type=r.prototype.$type=this,ae.merge(r,wn,!0),this._ctor=r;for(var t=0;t<this.fieldsArray.length;++t)this._fieldsArray[t].resolve();var n={};for(t=0;t<this.oneofsArray.length;++t)n[this._oneofsArray[t].resolve().name]={get:ae.oneOfGetter(this._oneofsArray[t].oneof),set:ae.oneOfSetter(this._oneofsArray[t].oneof)};t&&Object.defineProperties(r.prototype,n)}}});J.generateConstructor=function(e){for(var t=ae.codegen(["p"],e.name),n=0,i;n<e.fieldsArray.length;++n)(i=e._fieldsArray[n]).map?t("this%s={}",ae.safeProp(i.name)):i.repeated&&t("this%s=[]",ae.safeProp(i.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function yr(r){return r._fieldsById=r._fieldsArray=r._oneofsArray=null,delete r.encode,delete r.decode,delete r.verify,r}J.fromJSON=function(e,t){var n=new J(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)n.add((typeof t.fields[i[s]].keyType<"u"?of.fromJSON:pr.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)n.add(bn.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var o=t.nested[i[s]];n.add((o.id!==void 0?pr.fromJSON:o.fields!==void 0?J.fromJSON:o.values!==void 0?sf.fromJSON:o.methods!==void 0?ff.fromJSON:Te.fromJSON)(i[s],o))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n};J.prototype.toJSON=function(e){var t=Te.prototype.toJSON.call(this,e),n=e?Boolean(e.keepComments):!1;return ae.toObject(["options",t&&t.options||void 0,"oneofs",Te.arrayToJSON(this.oneofsArray,e),"fields",Te.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])};J.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return Te.prototype.resolveAll.call(this)};J.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};J.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof pr&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),yr(this)}return e instanceof bn?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),yr(this)):Te.prototype.add.call(this,e)};J.prototype.remove=function(e){if(e instanceof pr&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),yr(this)}if(e instanceof bn){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),yr(this)}return Te.prototype.remove.call(this,e)};J.prototype.isReservedId=function(e){return Te.isReservedId(this.reserved,e)};J.prototype.isReservedName=function(e){return Te.isReservedName(this.reserved,e)};J.prototype.create=function(e){return new this.ctor(e)};J.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=uf(this)({Writer:af,types:t,util:ae}),this.decode=cf(this)({Reader:vn,types:t,util:ae}),this.verify=lf(this)({types:t,util:ae}),this.fromObject=Zi.fromObject(this)({types:t,util:ae}),this.toObject=Zi.toObject(this)({types:t,util:ae});var i=hf[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};J.prototype.encode=function(e,t){return this.setup().encode(e,t)};J.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};J.prototype.decode=function(e,t){return this.setup().decode(e,t)};J.prototype.decodeDelimited=function(e){return e instanceof vn||(e=vn.create(e)),this.decode(e,e.uint32())};J.prototype.verify=function(e){return this.setup().verify(e)};J.prototype.fromObject=function(e){return this.setup().fromObject(e)};J.prototype.toObject=function(e,t){return this.setup().toObject(e,t)};J.d=function(e){return function(n){ae.decorateType(n,e)}}});var vr=N((uc,Xi)=>{"use strict";g();w();Xi.exports=ye;var wr=xt();((ye.prototype=Object.create(wr.prototype)).constructor=ye).className="Root";var xn=Xe(),Ji=Re(),df=bt(),Qe=ne(),Ki,Sn,Zt;function ye(r){wr.call(this,"",r),this.deferred=[],this.files=[]}ye.fromJSON=function(e,t){return t||(t=new ye),e.options&&t.setOptions(e.options),t.addJSON(e.nested)};ye.prototype.resolvePath=Qe.path.resolve;ye.prototype.fetch=Qe.fetch;function Gi(){}ye.prototype.load=function r(e,t,n){typeof t=="function"&&(n=t,t=void 0);var i=this;if(!n)return Qe.asPromise(r,i,e,t);var s=n===Gi;function o(v,E){if(!!n){var x=n;if(n=null,s)throw v;x(v,E)}}function f(v){var E=v.lastIndexOf("google/protobuf/");if(E>-1){var x=v.substring(E);if(x in Zt)return x}return null}function a(v,E){try{if(Qe.isString(E)&&E.charAt(0)==="{"&&(E=JSON.parse(E)),!Qe.isString(E))i.setOptions(E.options).addJSON(E.nested);else{Sn.filename=v;var x=Sn(E,i,t),R,T=0;if(x.imports)for(;T<x.imports.length;++T)(R=f(x.imports[T])||i.resolvePath(v,x.imports[T]))&&u(R);if(x.weakImports)for(T=0;T<x.weakImports.length;++T)(R=f(x.weakImports[T])||i.resolvePath(v,x.weakImports[T]))&&u(R,!0)}}catch(S){o(S)}!s&&!h&&o(null,i)}function u(v,E){if(v=f(v)||v,!(i.files.indexOf(v)>-1)){if(i.files.push(v),v in Zt){s?a(v,Zt[v]):(++h,setTimeout(function(){--h,a(v,Zt[v])}));return}if(s){var x;try{x=Qe.fs.readFileSync(v).toString("utf8")}catch(R){E||o(R);return}a(v,x)}else++h,i.fetch(v,function(R,T){if(--h,!!n){if(R){E?h||o(null,i):o(R);return}a(v,T)}})}}var h=0;Qe.isString(e)&&(e=[e]);for(var l=0,y;l<e.length;++l)(y=i.resolvePath("",e[l]))&&u(y);if(s)return i;h||o(null,i)};ye.prototype.loadSync=function(e,t){if(!Qe.isNode)throw Error("not supported");return this.load(e,t,Gi)};ye.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return wr.prototype.resolveAll.call(this)};var gr=/^[A-Z]/;function Wi(r,e){var t=e.parent.lookup(e.extend);if(t){var n=new xn(e.fullName,e.id,e.type,e.rule,void 0,e.options);return t.get(n.name)||(n.declaringField=e,e.extensionField=n,t.add(n)),!0}return!1}ye.prototype._handleAdd=function(e){if(e instanceof xn)e.extend!==void 0&&!e.extensionField&&(Wi(this,e)||this.deferred.push(e));else if(e instanceof Ji)gr.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof df)){if(e instanceof Ki)for(var t=0;t<this.deferred.length;)Wi(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);gr.test(e.name)&&(e.parent[e.name]=e)}};ye.prototype._handleRemove=function(e){if(e instanceof xn){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof Ji)gr.test(e.name)&&delete e.parent[e.name];else if(e instanceof wr){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);gr.test(e.name)&&delete e.parent[e.name]}};ye._configure=function(r,e,t){Ki=r,Sn=e,Zt=t}});var ne=N((hc,Qi)=>{"use strict";g();w();var ee=Qi.exports=$e(),Yi=rn(),On,An;ee.codegen=qo();ee.fetch=Uo();ee.path=Po();ee.fs=ee.inquire("fs");ee.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),i=0;i<t.length;)n[i]=e[t[i++]];return n}return[]};ee.toObject=function(e){for(var t={},n=0;n<e.length;){var i=e[n++],s=e[n++];s!==void 0&&(t[i]=s)}return t};var pf=/\\/g,yf=/"/g;ee.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};ee.safeProp=function(e){return!/^[$\w_]+$/.test(e)||ee.isReserved(e)?'["'+e.replace(pf,"\\\\").replace(yf,'\\"')+'"]':"."+e};ee.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var mf=/_([a-z])/g;ee.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(mf,function(t,n){return n.toUpperCase()})};ee.compareFieldsById=function(e,t){return e.id-t.id};ee.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(ee.decorateRoot.remove(e.$type),e.$type.name=t,ee.decorateRoot.add(e.$type)),e.$type;On||(On=mr());var n=new On(t||e.name);return ee.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var gf=0;ee.decorateEnum=function(e){if(e.$type)return e.$type;An||(An=Re());var t=new An("Enum"+gf++,e);return ee.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t};ee.setProperty=function(e,t,n){function i(s,o,f){var a=o.shift();if(a==="__proto__"||a==="prototype")return s;if(o.length>0)s[a]=i(s[a]||{},o,f);else{var u=s[a];u&&(f=[].concat(u).concat(f)),s[a]=f}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return t=t.split("."),i(e,t,n)};Object.defineProperty(ee,"decorateRoot",{get:function(){return Yi.decorated||(Yi.decorated=new(vr()))}})});var dt=N((yc,es)=>{"use strict";g();w();es.exports=me;me.className="ReflectionObject";var br=ne(),Er;function me(r,e){if(!br.isString(r))throw TypeError("name must be a string");if(e&&!br.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=r,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(me.prototype,{root:{get:function(){for(var r=this;r.parent!==null;)r=r.parent;return r}},fullName:{get:function(){for(var r=[this.name],e=this.parent;e;)r.unshift(e.name),e=e.parent;return r.join(".")}}});me.prototype.toJSON=function(){throw Error()};me.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof Er&&t._handleAdd(this)};me.prototype.onRemove=function(e){var t=e.root;t instanceof Er&&t._handleRemove(this),this.parent=null,this.resolved=!1};me.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Er&&(this.resolved=!0),this)};me.prototype.getOption=function(e){if(this.options)return this.options[e]};me.prototype.setOption=function(e,t,n){return(!n||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=t),this};me.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(n){var s=i.find(function(a){return Object.prototype.hasOwnProperty.call(a,e)});if(s){var o=s[e];br.setProperty(o,n,t)}else s={},s[e]=br.setProperty({},n,t),i.push(s)}else{var f={};f[e]=t,i.push(f)}return this};me.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),i=0;i<n.length;++i)this.setOption(n[i],e[n[i]],t);return this};me.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e};me._configure=function(r){Er=r}});var Re=N((wc,ns)=>{"use strict";g();w();ns.exports=He;var ts=dt();((He.prototype=Object.create(ts.prototype)).constructor=He).className="Enum";var rs=xt(),Sr=ne();function He(r,e,t,n,i,s){if(ts.call(this,r,t),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.valuesOptions=s,this.reserved=void 0,e)for(var o=Object.keys(e),f=0;f<o.length;++f)typeof e[o[f]]=="number"&&(this.valuesById[this.values[o[f]]=e[o[f]]]=o[f])}He.fromJSON=function(e,t){var n=new He(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n};He.prototype.toJSON=function(e){var t=e?Boolean(e.keepComments):!1;return Sr.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])};He.prototype.add=function(e,t,n,i){if(!Sr.isString(e))throw TypeError("name must be a string");if(!Sr.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=n||null,this};He.prototype.remove=function(e){if(!Sr.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};He.prototype.isReservedId=function(e){return rs.isReservedId(this.reserved,e)};He.prototype.isReservedName=function(e){return rs.isReservedName(this.reserved,e)}});var En=N((Ec,ss)=>{"use strict";g();w();ss.exports=vf;var wf=Re(),Bn=ht(),_n=ne();function is(r,e,t,n){return e.resolvedType.group?r("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",t,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):r("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",t,n,(e.id<<3|2)>>>0)}function vf(r){for(var e=_n.codegen(["m","w"],r.name+"$encode")("if(!w)")("w=Writer.create()"),t,n,i=r.fieldsArray.slice().sort(_n.compareFieldsById),t=0;t<i.length;++t){var s=i[t].resolve(),o=r._fieldsArray.indexOf(s),f=s.resolvedType instanceof wf?"int32":s.type,a=Bn.basic[f];n="m"+_n.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|Bn.mapKey[s.keyType],s.keyType),a===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|a,f,n),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",n,n),s.packed&&Bn.packed[f]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",f,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),a===void 0?is(e,s,o,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|a)>>>0,f,n)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),a===void 0?is(e,s,o,n):e("w.uint32(%i).%s(%s)",(s.id<<3|a)>>>0,f,n))}return e("return w")}});var fs=N((Oc,os)=>{"use strict";g();w();var F=os.exports=nn();F.build="light";function bf(r,e,t){return typeof e=="function"?(t=e,e=new F.Root):e||(e=new F.Root),e.load(r,t)}F.load=bf;function Ef(r,e){return e||(e=new F.Root),e.loadSync(r)}F.loadSync=Ef;F.encoder=En();F.decoder=cn();F.verifier=dn();F.converter=mn();F.ReflectionObject=dt();F.Namespace=xt();F.Root=vr();F.Enum=Re();F.Type=mr();F.Field=Xe();F.OneOf=bt();F.MapField=cr();F.Service=hr();F.Method=lr();F.Message=dr();F.wrappers=gn();F.types=ht();F.util=ne();F.ReflectionObject._configure(F.Root);F.Namespace._configure(F.Type,F.Service,F.Enum);F.Root._configure(F.Type);F.Field._configure(F.Type)});var Tn=N((_c,cs)=>{"use strict";g();w();cs.exports=us;var Rn=/[\s{}=;:[\],'"()<>]/g,Sf=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,xf=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,Of=/^ *[*/]+ */,Af=/^\s*\*?\/*/,Bf=/\n/g,_f=/\s/,Rf=/\\(.?)/g,Tf={0:"\0",r:"\r",n:`
`,t:"	"};function as(r){return r.replace(Rf,function(e,t){switch(t){case"\\":case"":return t;default:return Tf[t]||""}})}us.unescape=as;function us(r,e){r=r.toString();var t=0,n=r.length,i=1,s=0,o={},f=[],a=null;function u(_){return Error("illegal "+_+" (line "+i+")")}function h(){var _=a==="'"?xf:Sf;_.lastIndex=t-1;var $=_.exec(r);if(!$)throw u("string");return t=_.lastIndex,R(a),a=null,as($[1])}function l(_){return r.charAt(_)}function y(_,$,C){var G={type:r.charAt(_++),lineEmpty:!1,leading:C},ue;e?ue=2:ue=3;var oe=_-ue,le;do if(--oe<0||(le=r.charAt(oe))===`
`){G.lineEmpty=!0;break}while(le===" "||le==="	");for(var de=r.substring(_,$).split(Bf),X=0;X<de.length;++X)de[X]=de[X].replace(e?Af:Of,"").trim();G.text=de.join(`
`).trim(),o[i]=G,s=i}function v(_){var $=E(_),C=r.substring(_,$),G=/^\s*\/\//.test(C);return G}function E(_){for(var $=_;$<n&&l($)!==`
`;)$++;return $}function x(){if(f.length>0)return f.shift();if(a)return h();var _,$,C,G,ue,oe=t===0;do{if(t===n)return null;for(_=!1;_f.test(C=l(t));)if(C===`
`&&(oe=!0,++i),++t===n)return null;if(l(t)==="/"){if(++t===n)throw u("comment");if(l(t)==="/")if(e){if(G=t,ue=!1,v(t-1)){ue=!0;do if(t=E(t),t===n||(t++,!oe))break;while(v(t))}else t=Math.min(n,E(t)+1);ue&&(y(G,t,oe),oe=!0),i++,_=!0}else{for(ue=l(G=t+1)==="/";l(++t)!==`
`;)if(t===n)return null;++t,ue&&(y(G,t-1,oe),oe=!0),++i,_=!0}else if((C=l(t))==="*"){G=t+1,ue=e||l(G)==="*";do{if(C===`
`&&++i,++t===n)throw u("comment");$=C,C=l(t)}while($!=="*"||C!=="/");++t,ue&&(y(G,t-2,oe),oe=!0),_=!0}else return"/"}}while(_);var le=t;Rn.lastIndex=0;var de=Rn.test(l(le++));if(!de)for(;le<n&&!Rn.test(l(le));)++le;var X=r.substring(t,t=le);return(X==='"'||X==="'")&&(a=X),X}function R(_){f.push(_)}function T(){if(!f.length){var _=x();if(_===null)return null;R(_)}return f[0]}function S(_,$){var C=T(),G=C===_;if(G)return x(),!0;if(!$)throw u("token '"+C+"', '"+_+"' expected");return!1}function ie(_){var $=null,C;return _===void 0?(C=o[i-1],delete o[i-1],C&&(e||C.type==="*"||C.lineEmpty)&&($=C.leading?C.text:null)):(s<_&&T(),C=o[_],delete o[_],C&&!C.lineEmpty&&(e||C.type==="/")&&($=C.leading?null:C.text)),$}return Object.defineProperty({next:x,peek:T,push:R,skip:S,cmnt:ie},"line",{get:function(){return i}})}});var ms=N((Ic,ys)=>{"use strict";g();w();ys.exports=je;je.filename=null;je.defaults={keepCase:!1};var If=Tn(),ls=vr(),hs=mr(),ds=Xe(),kf=cr(),ps=bt(),Nf=Re(),qf=hr(),Uf=lr(),In=ht(),kn=ne(),Pf=/^[1-9][0-9]*$/,$f=/^-?[1-9][0-9]*$/,zf=/^0[x][0-9a-fA-F]+$/,Df=/^-?0[x][0-9a-fA-F]+$/,Ff=/^0[0-7]+$/,Hf=/^-?0[0-7]+$/,Cf=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Ce=/^[a-zA-Z_][a-zA-Z_0-9]*$/,Ve=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,Vf=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function je(r,e,t){e instanceof ls||(t=e,e=new ls),t||(t=je.defaults);var n=t.preferTrailingComment||!1,i=If(r,t.alternateCommentMode||!1),s=i.next,o=i.push,f=i.peek,a=i.skip,u=i.cmnt,h=!0,l,y,v,E,x=!1,R=e,T=t.keepCase?function(d){return d}:kn.camelCase;function S(d,p,m){var B=je.filename;return m||(je.filename=null),Error("illegal "+(p||"token")+" '"+d+"' ("+(B?B+", ":"")+"line "+i.line+")")}function ie(){var d=[],p;do{if((p=s())!=='"'&&p!=="'")throw S(p);d.push(s()),a(p),p=f()}while(p==='"'||p==="'");return d.join("")}function _(d){var p=s();switch(p){case"'":case'"':return o(p),ie();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return C(p,!0)}catch{if(d&&Ve.test(p))return p;throw S(p,"value")}}function $(d,p){var m,B;do p&&((m=f())==='"'||m==="'")?d.push(ie()):d.push([B=G(s()),a("to",!0)?G(s()):B]);while(a(",",!0));a(";")}function C(d,p){var m=1;switch(d.charAt(0)==="-"&&(m=-1,d=d.substring(1)),d){case"inf":case"INF":case"Inf":return m*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(Pf.test(d))return m*parseInt(d,10);if(zf.test(d))return m*parseInt(d,16);if(Ff.test(d))return m*parseInt(d,8);if(Cf.test(d))return m*parseFloat(d);throw S(d,"number",p)}function G(d,p){switch(d){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!p&&d.charAt(0)==="-")throw S(d,"id");if($f.test(d))return parseInt(d,10);if(Df.test(d))return parseInt(d,16);if(Hf.test(d))return parseInt(d,8);throw S(d,"id")}function ue(){if(l!==void 0)throw S("package");if(l=s(),!Ve.test(l))throw S(l,"name");R=R.define(l),a(";")}function oe(){var d=f(),p;switch(d){case"weak":p=v||(v=[]),s();break;case"public":s();default:p=y||(y=[]);break}d=ie(),a(";"),p.push(d)}function le(){if(a("="),E=ie(),x=E==="proto3",!x&&E!=="proto2")throw S(E,"syntax");a(";")}function de(d,p){switch(p){case"option":return Pe(d,p),a(";"),!0;case"message":return jn(d,p),!0;case"enum":return Wn(d,p),!0;case"service":return xo(d,p),!0;case"extend":return Ao(d,p),!0}return!1}function X(d,p,m){var B=i.line;if(d&&(typeof d.comment!="string"&&(d.comment=u()),d.filename=je.filename),a("{",!0)){for(var A;(A=s())!=="}";)p(A);a(";",!0)}else m&&m(),a(";"),d&&(typeof d.comment!="string"||n)&&(d.comment=u(B)||d.comment)}function jn(d,p){if(!Ce.test(p=s()))throw S(p,"type name");var m=new hs(p);X(m,function(A){if(!de(m,A))switch(A){case"map":vo(m,A);break;case"required":case"repeated":ve(m,A);break;case"optional":x?ve(m,"proto3_optional"):ve(m,"optional");break;case"oneof":bo(m,A);break;case"extensions":$(m.extensions||(m.extensions=[]));break;case"reserved":$(m.reserved||(m.reserved=[]),!0);break;default:if(!x||!Ve.test(A))throw S(A);o(A),ve(m,"optional");break}}),d.add(m)}function ve(d,p,m){var B=s();if(B==="group"){wo(d,p);return}for(;B.endsWith(".")||f().startsWith(".");)B+=s();if(!Ve.test(B))throw S(B,"type");var A=s();if(!Ce.test(A))throw S(A,"name");A=T(A),a("=");var k=new ds(A,G(s()),B,p,m);if(X(k,function(pe){if(pe==="option")Pe(k,pe),a(";");else throw S(pe)},function(){Vr(k)}),p==="proto3_optional"){var se=new ps("_"+A);k.setOption("proto3_optional",!0),se.add(k),d.add(se)}else d.add(k);!x&&k.repeated&&(In.packed[B]!==void 0||In.basic[B]===void 0)&&k.setOption("packed",!1,!0)}function wo(d,p){var m=s();if(!Ce.test(m))throw S(m,"name");var B=kn.lcFirst(m);m===B&&(m=kn.ucFirst(m)),a("=");var A=G(s()),k=new hs(m);k.group=!0;var se=new ds(B,A,m,p);se.filename=je.filename,X(k,function(pe){switch(pe){case"option":Pe(k,pe),a(";");break;case"required":case"repeated":ve(k,pe);break;case"optional":x?ve(k,"proto3_optional"):ve(k,"optional");break;case"message":jn(k,pe);break;case"enum":Wn(k,pe);break;default:throw S(pe)}}),d.add(k).add(se)}function vo(d){a("<");var p=s();if(In.mapKey[p]===void 0)throw S(p,"type");a(",");var m=s();if(!Ve.test(m))throw S(m,"type");a(">");var B=s();if(!Ce.test(B))throw S(B,"name");a("=");var A=new kf(T(B),G(s()),p,m);X(A,function(se){if(se==="option")Pe(A,se),a(";");else throw S(se)},function(){Vr(A)}),d.add(A)}function bo(d,p){if(!Ce.test(p=s()))throw S(p,"name");var m=new ps(T(p));X(m,function(A){A==="option"?(Pe(m,A),a(";")):(o(A),ve(m,"optional"))}),d.add(m)}function Wn(d,p){if(!Ce.test(p=s()))throw S(p,"name");var m=new Nf(p);X(m,function(A){switch(A){case"option":Pe(m,A),a(";");break;case"reserved":$(m.reserved||(m.reserved=[]),!0);break;default:Eo(m,A)}}),d.add(m)}function Eo(d,p){if(!Ce.test(p))throw S(p,"name");a("=");var m=G(s(),!0),B={options:void 0};B.setOption=function(A,k){this.options===void 0&&(this.options={}),this.options[A]=k},X(B,function(k){if(k==="option")Pe(B,k),a(";");else throw S(k)},function(){Vr(B)}),d.add(p,m,B.comment,B.options)}function Pe(d,p){var m=a("(",!0);if(!Ve.test(p=s()))throw S(p,"name");var B=p,A=B,k;m&&(a(")"),B="("+B+")",A=B,p=f(),Vf.test(p)&&(k=p.slice(1),B+=p,s())),a("=");var se=Jn(d,B);So(d,A,se,k)}function Jn(d,p){if(a("{",!0)){for(var m={};!a("}",!0);){if(!Ce.test(fe=s()))throw S(fe,"name");if(fe===null)throw S(fe,"end of input");var B,A=fe;if(a(":",!0),f()==="{")B=Jn(d,p+"."+fe);else if(f()==="["){B=[];var k;if(a("[",!0)){do k=_(!0),B.push(k);while(a(",",!0));a("]"),typeof k<"u"&&Cr(d,p+"."+fe,k)}}else B=_(!0),Cr(d,p+"."+fe,B);var se=m[A];se&&(B=[].concat(se).concat(B)),m[A]=B,a(",",!0),a(";",!0)}return m}var Je=_(!0);return Cr(d,p,Je),Je}function Cr(d,p,m){d.setOption&&d.setOption(p,m)}function So(d,p,m,B){d.setParsedOption&&d.setParsedOption(p,m,B)}function Vr(d){if(a("[",!0)){do Pe(d,"option");while(a(",",!0));a("]")}return d}function xo(d,p){if(!Ce.test(p=s()))throw S(p,"service name");var m=new qf(p);X(m,function(A){if(!de(m,A))if(A==="rpc")Oo(m,A);else throw S(A)}),d.add(m)}function Oo(d,p){var m=u(),B=p;if(!Ce.test(p=s()))throw S(p,"name");var A=p,k,se,Je,pe;if(a("("),a("stream",!0)&&(se=!0),!Ve.test(p=s())||(k=p,a(")"),a("returns"),a("("),a("stream",!0)&&(pe=!0),!Ve.test(p=s())))throw S(p);Je=p,a(")");var tr=new Uf(A,B,k,Je,se,pe);tr.comment=m,X(tr,function(Lr){if(Lr==="option")Pe(tr,Lr),a(";");else throw S(Lr)}),d.add(tr)}function Ao(d,p){if(!Ve.test(p=s()))throw S(p,"reference");var m=p;X(null,function(A){switch(A){case"required":case"repeated":ve(d,A,m);break;case"optional":x?ve(d,"proto3_optional",m):ve(d,"optional",m);break;default:if(!x||!Ve.test(A))throw S(A);o(A),ve(d,"optional",m);break}})}for(var fe;(fe=s())!==null;)switch(fe){case"package":if(!h)throw S(fe);ue();break;case"import":if(!h)throw S(fe);oe();break;case"syntax":if(!h)throw S(fe);le();break;case"option":Pe(R,fe),a(";");break;default:if(de(R,fe)){h=!1;continue}throw S(fe)}return je.filename=null,{package:l,imports:y,weakImports:v,syntax:E,root:e}}});var vs=N((qc,ws)=>{"use strict";g();w();ws.exports=Ie;var Lf=/\/|\./;function Ie(r,e){Lf.test(r)||(r="google/protobuf/"+r+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),Ie[r]=e}Ie("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var gs;Ie("duration",{Duration:gs={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});Ie("timestamp",{Timestamp:gs});Ie("empty",{Empty:{fields:{}}});Ie("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});Ie("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});Ie("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});Ie.get=function(e){return Ie[e]||null}});var Es=N(($c,bs)=>{"use strict";g();w();var et=bs.exports=fs();et.build="full";et.tokenize=Tn();et.parse=ms();et.common=vs();et.Root._configure(et.Type,et.parse,et.common)});var Mf=N((Fc,Ss)=>{"use strict";g();w();Ss.exports=Es()});var Zf=N((Vc,xs)=>{"use strict";g();w();xs.exports=nn()});var da=N(z=>{"use strict";g();w();Object.defineProperty(z,"__esModule",{value:!0});z.utils=z.curve25519=z.getSharedSecret=z.sync=z.verify=z.sign=z.getPublicKey=z.Signature=z.Point=z.RistrettoPoint=z.ExtendedPoint=z.CURVE=void 0;var jf=Gn(),Y=BigInt(0),q=BigInt(1),nt=BigInt(2),Wf=BigInt(8),Os=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Z=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Os,n:Os,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});z.CURVE=Z;var Ts=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),jt=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Zc=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Jf=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Kf=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Gf=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Xf=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),U=class{constructor(e,t,n,i){this.x=e,this.y=t,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof W))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(W.ZERO)?U.ZERO:new U(e.x,e.y,q,c(e.x*e.y))}static toAffineBatch(e){let t=ea(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(t[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){Bs(e);let{x:t,y:n,z:i}=this,{x:s,y:o,z:f}=e,a=c(t*f),u=c(s*i),h=c(n*f),l=c(o*i);return a===u&&h===l}negate(){return new U(c(-this.x),this.y,this.z,c(-this.t))}double(){let{x:e,y:t,z:n}=this,{a:i}=Z,s=c(e*e),o=c(t*t),f=c(nt*c(n*n)),a=c(i*s),u=e+t,h=c(c(u*u)-s-o),l=a+o,y=l-f,v=a-o,E=c(h*y),x=c(l*v),R=c(h*v),T=c(y*l);return new U(E,x,T,R)}add(e){Bs(e);let{x:t,y:n,z:i,t:s}=this,{x:o,y:f,z:a,t:u}=e,h=c((n-t)*(f+o)),l=c((n+t)*(f-o)),y=c(l-h);if(y===Y)return this.double();let v=c(i*nt*u),E=c(s*nt*a),x=E+v,R=l+h,T=E-v,S=c(x*y),ie=c(R*T),_=c(x*T),$=c(y*R);return new U(S,ie,$,_)}subtract(e){return this.add(e.negate())}precomputeWindow(e){let t=1+256/e,n=[],i=this,s=i;for(let o=0;o<t;o++){s=i,n.push(s);for(let f=1;f<2**(e-1);f++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,t){!t&&this.equals(U.BASE)&&(t=W.BASE);let n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&Pn.get(t);i||(i=this.precomputeWindow(n),t&&n!==1&&(i=U.normalizeZ(i),Pn.set(t,i)));let s=U.ZERO,o=U.BASE,f=1+256/n,a=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let y=0;y<f;y++){let v=y*a,E=Number(e&u);e>>=l,E>a&&(E-=h,e+=q);let x=v,R=v+Math.abs(E)-1,T=y%2!==0,S=E<0;E===0?o=o.add(As(T,i[x])):s=s.add(As(S,i[R]))}return U.normalizeZ([s,o])[0]}multiply(e,t){return this.wNAF(_t(e,Z.l),t)}multiplyUnsafe(e){let t=_t(e,Z.l,!1),n=U.BASE,i=U.ZERO;if(t===Y)return i;if(this.equals(i)||t===q)return this;if(this.equals(n))return this.wNAF(t);let s=i,o=this;for(;t>Y;)t&q&&(s=s.add(o)),o=o.double(),t>>=q;return s}isSmallOrder(){return this.multiplyUnsafe(Z.h).equals(U.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(Z.l/nt).double();return Z.l%nt&&(e=e.add(this)),e.equals(U.ZERO)}toAffine(e){let{x:t,y:n,z:i}=this,s=this.equals(U.ZERO);e==null&&(e=s?Wf:Ar(i));let o=c(t*e),f=c(n*e),a=c(i*e);if(s)return W.ZERO;if(a!==q)throw new Error("invZ was invalid");return new W(o,f)}fromRistrettoBytes(){qn()}toRistrettoBytes(){qn()}fromRistrettoHash(){qn()}};z.ExtendedPoint=U;U.BASE=new U(Z.Gx,Z.Gy,q,c(Z.Gx*Z.Gy));U.ZERO=new U(Y,q,q,Y);function As(r,e){let t=e.negate();return r?t:e}function Bs(r){if(!(r instanceof U))throw new TypeError("ExtendedPoint expected")}function Nn(r){if(!(r instanceof ce))throw new TypeError("RistrettoPoint expected")}function qn(){throw new Error("Legacy method: switch to RistrettoPoint")}var ce=class{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){let{d:t}=Z,n=c(jt*e*e),i=c((n+q)*Gf),s=BigInt(-1),o=c((s-t*n)*c(n+t)),{isValid:f,value:a}=zn(i,o),u=c(a*e);rt(u)||(u=c(-u)),f||(a=u),f||(s=n);let h=c(s*(n-q)*Xf-o),l=a*a,y=c((a+a)*o),v=c(h*Jf),E=c(q-l),x=c(q+l);return new U(c(y*x),c(E*v),c(v*x),c(y*E))}static hashToCurve(e){e=Ne(e,64);let t=Un(e.slice(0,32)),n=this.calcElligatorRistrettoMap(t),i=Un(e.slice(32,64)),s=this.calcElligatorRistrettoMap(i);return new ce(n.add(s))}static fromHex(e){e=Ne(e,32);let{a:t,d:n}=Z,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=Un(e);if(!ta(At(s),e)||rt(s))throw new Error(i);let o=c(s*s),f=c(q+t*o),a=c(q-t*o),u=c(f*f),h=c(a*a),l=c(t*n*u-h),{isValid:y,value:v}=Rs(c(l*h)),E=c(v*a),x=c(v*E*l),R=c((s+s)*E);rt(R)&&(R=c(-R));let T=c(f*x),S=c(R*T);if(!y||rt(S)||T===Y)throw new Error(i);return new ce(new U(R,T,q,S))}toRawBytes(){let{x:e,y:t,z:n,t:i}=this.ep,s=c(c(n+t)*c(n-t)),o=c(e*t),f=c(o*o),{value:a}=Rs(c(s*f)),u=c(a*s),h=c(a*o),l=c(u*h*i),y;if(rt(i*l)){let E=c(t*jt),x=c(e*jt);e=E,t=x,y=c(u*Kf)}else y=h;rt(e*l)&&(t=c(-t));let v=c((n-t)*y);return rt(v)&&(v=c(-v)),At(v)}toHex(){return Jt(this.toRawBytes())}toString(){return this.toHex()}equals(e){Nn(e);let t=this.ep,n=e.ep,i=c(t.x*n.y)===c(t.y*n.x),s=c(t.y*n.y)===c(t.x*n.x);return i||s}add(e){return Nn(e),new ce(this.ep.add(e.ep))}subtract(e){return Nn(e),new ce(this.ep.subtract(e.ep))}multiply(e){return new ce(this.ep.multiply(e))}multiplyUnsafe(e){return new ce(this.ep.multiplyUnsafe(e))}};z.RistrettoPoint=ce;ce.BASE=new ce(U.BASE);ce.ZERO=new ce(U.ZERO);var Pn=new WeakMap,W=class{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Pn.delete(this)}static fromHex(e,t=!0){let{d:n,P:i}=Z;e=Ne(e,32);let s=e.slice();s[31]=e[31]&-129;let o=yt(s);if(t&&o>=i)throw new Error("Expected 0 < hex < P");if(!t&&o>=Ts)throw new Error("Expected 0 < hex < 2**256");let f=c(o*o),a=c(f-q),u=c(n*f+q),{isValid:h,value:l}=zn(a,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let y=(l&q)===q;return(e[31]&128)!==0!==y&&(l=c(-l)),new W(l,o)}static async fromPrivateKey(e){return(await Kt(e)).point}toRawBytes(){let e=At(this.y);return e[31]|=this.x&q?128:0,e}toHex(){return Jt(this.toRawBytes())}toX25519(){let{y:e}=this,t=c((q+e)*Ar(q-e));return At(t)}isTorsionFree(){return U.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new W(c(-this.x),this.y)}add(e){return U.fromAffine(this).add(U.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return U.fromAffine(this).multiply(e,this).toAffine()}};z.Point=W;W.BASE=new W(Z.Gx,Z.Gy);W.ZERO=new W(Y,q);var We=class{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){let t=Ne(e,64),n=W.fromHex(t.slice(0,32),!1),i=yt(t.slice(32,64));return new We(n,i)}assertValidity(){let{r:e,s:t}=this;if(!(e instanceof W))throw new Error("Expected Point instance");return _t(t,Z.l,!1),this}toRawBytes(){let e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(At(this.s),32),e}toHex(){return Jt(this.toRawBytes())}};z.Signature=We;function _s(...r){if(!r.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(r.length===1)return r[0];let e=r.reduce((n,i)=>n+i.length,0),t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let s=r[n];t.set(s,i),i+=s.length}return t}var Yf=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Jt(r){if(!(r instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=Yf[r[t]];return e}function $n(r){if(typeof r!="string")throw new TypeError("hexToBytes: expected string, got "+typeof r);if(r.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++){let n=t*2,i=r.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[t]=s}return e}function Is(r){let t=r.toString(16).padStart(64,"0");return $n(t)}function At(r){return Is(r).reverse()}function rt(r){return(c(r)&q)===q}function yt(r){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Jt(Uint8Array.from(r).reverse()))}var Qf=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Un(r){return c(yt(r)&Qf)}function c(r,e=Z.P){let t=r%e;return t>=Y?t:e+t}function Ar(r,e=Z.P){if(r===Y||e<=Y)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=c(r,e),n=e,i=Y,s=q,o=q,f=Y;for(;t!==Y;){let u=n/t,h=n%t,l=i-o*u,y=s-f*u;n=t,t=h,i=o,s=f,o=l,f=y}if(n!==q)throw new Error("invert: does not exist");return c(i,e)}function ea(r,e=Z.P){let t=new Array(r.length),n=r.reduce((s,o,f)=>o===Y?s:(t[f]=s,c(s*o,e)),q),i=Ar(n,e);return r.reduceRight((s,o,f)=>o===Y?s:(t[f]=c(s*t[f],e),c(s*o,e)),i),t}function ke(r,e){let{P:t}=Z,n=r;for(;e-- >Y;)n*=n,n%=t;return n}function ks(r){let{P:e}=Z,t=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),a=r*r%e*r%e,u=ke(a,nt)*a%e,h=ke(u,q)*r%e,l=ke(h,t)*h%e,y=ke(l,n)*l%e,v=ke(y,i)*y%e,E=ke(v,s)*v%e,x=ke(E,o)*E%e,R=ke(x,o)*E%e,T=ke(R,n)*l%e;return{pow_p_5_8:ke(T,nt)*r%e,b2:a}}function zn(r,e){let t=c(e*e*e),n=c(t*t*e),i=ks(r*n).pow_p_5_8,s=c(r*t*i),o=c(e*s*s),f=s,a=c(s*jt),u=o===r,h=o===c(-r),l=o===c(-r*jt);return u&&(s=f),(h||l)&&(s=a),rt(s)&&(s=c(-s)),{isValid:u||h,value:s}}function Rs(r){return zn(q,r)}function Bt(r){return c(yt(r),Z.l)}function ta(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ne(r,e){let t=r instanceof Uint8Array?Uint8Array.from(r):$n(r);if(typeof e=="number"&&t.length!==e)throw new Error(`Expected ${e} bytes`);return t}function _t(r,e,t=!0){if(!e)throw new TypeError("Specify max value");if(typeof r=="number"&&Number.isSafeInteger(r)&&(r=BigInt(r)),typeof r=="bigint"&&r<e){if(t){if(Y<r)return r}else if(Y<=r)return r}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Ns(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function ra(r){return yt(Ns(Ne(r,32)))}function qs(r){if(r=typeof r=="bigint"||typeof r=="number"?Is(_t(r,Ts)):Ne(r),r.length!==32)throw new Error("Expected 32 bytes");return r}function Us(r){let e=Ns(r.slice(0,32)),t=r.slice(32,64),n=Bt(e),i=W.BASE.multiply(n),s=i.toRawBytes();return{head:e,prefix:t,scalar:n,point:i,pointBytes:s}}var Wt;function Or(...r){if(typeof Wt!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Wt(...r)}async function Kt(r){return Us(await z.utils.sha512(qs(r)))}function Dn(r){return Us(Or(qs(r)))}async function na(r){return(await Kt(r)).pointBytes}z.getPublicKey=na;function ia(r){return Dn(r).pointBytes}async function sa(r,e){r=Ne(r);let{prefix:t,scalar:n,pointBytes:i}=await Kt(e),s=Bt(await z.utils.sha512(t,r)),o=W.BASE.multiply(s),f=Bt(await z.utils.sha512(o.toRawBytes(),i,r)),a=c(s+f*n,Z.l);return new We(o,a).toRawBytes()}z.sign=sa;function oa(r,e){r=Ne(r);let{prefix:t,scalar:n,pointBytes:i}=Dn(e),s=Bt(Or(t,r)),o=W.BASE.multiply(s),f=Bt(Or(o.toRawBytes(),i,r)),a=c(s+f*n,Z.l);return new We(o,a).toRawBytes()}function Ps(r,e,t){e=Ne(e),t instanceof W||(t=W.fromHex(t,!1));let{r:n,s:i}=r instanceof We?r.assertValidity():We.fromHex(r),s=U.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:s,pub:t,msg:e}}function $s(r,e,t,n){let i=Bt(n),s=U.fromAffine(r).multiplyUnsafe(i);return U.fromAffine(e).add(s).subtract(t).multiplyUnsafe(Z.h).equals(U.ZERO)}async function fa(r,e,t){let{r:n,SB:i,msg:s,pub:o}=Ps(r,e,t),f=await z.utils.sha512(n.toRawBytes(),o.toRawBytes(),s);return $s(o,n,i,f)}z.verify=fa;function aa(r,e,t){let{r:n,SB:i,msg:s,pub:o}=Ps(r,e,t),f=Or(n.toRawBytes(),o.toRawBytes(),s);return $s(o,n,i,f)}z.sync={getExtendedPublicKey:Dn,getPublicKey:ia,sign:oa,verify:aa};async function ua(r,e){let{head:t}=await Kt(r),n=W.fromHex(e).toX25519();return z.curve25519.scalarMult(t,n)}z.getSharedSecret=ua;W.BASE._setWindowSize(8);function xr(r,e,t){let n=c(r*(e-t));return e=c(e-n),t=c(t+n),[e,t]}function ca(r,e){let{P:t}=Z,n=_t(r,t),i=_t(e,t),s=BigInt(121665),o=n,f=q,a=Y,u=n,h=q,l=Y,y;for(let R=BigInt(255-1);R>=Y;R--){let T=i>>R&q;l^=T,y=xr(l,f,u),f=y[0],u=y[1],y=xr(l,a,h),a=y[0],h=y[1],l=T;let S=f+a,ie=c(S*S),_=f-a,$=c(_*_),C=ie-$,G=u+h,ue=u-h,oe=c(ue*S),le=c(G*_),de=oe+le,X=oe-le;u=c(de*de),h=c(o*c(X*X)),f=c(ie*$),a=c(C*(ie+c(s*C)))}y=xr(l,f,u),f=y[0],u=y[1],y=xr(l,a,h),a=y[0],h=y[1];let{pow_p_5_8:v,b2:E}=ks(a),x=c(ke(v,BigInt(3))*E);return c(f*x)}function la(r){return At(c(r,Z.P))}function ha(r){let e=Ne(r,32);return e[31]&=127,yt(e)}z.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(r,e){let t=ha(e),n=ra(r),i=ca(t,n);if(i===Y)throw new Error("Invalid private or public key received");return la(i)},scalarMultBase(r){return z.curve25519.scalarMult(r,z.curve25519.BASE_POINT_U)}};var tt={node:jf,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};z.utils={bytesToHex:Jt,hexToBytes:$n,concatBytes:_s,getExtendedPublicKey:Kt,mod:c,invert:Ar,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:r=>{if(r=Ne(r),r.length<40||r.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return c(yt(r),Z.l-q)+q},randomBytes:(r=32)=>{if(tt.web)return tt.web.getRandomValues(new Uint8Array(r));if(tt.node){let{randomBytes:e}=tt.node;return new Uint8Array(e(r).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>z.utils.randomBytes(32),sha512:async(...r)=>{let e=_s(...r);if(tt.web){let t=await tt.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}else{if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(r=8,e=W.BASE){let t=e.equals(W.BASE)?e:new W(e.x,e.y);return t._setWindowSize(r),t.multiply(nt),t},sha512Sync:void 0};Object.defineProperties(z.utils,{sha512Sync:{configurable:!1,get(){return Wt},set(r){Wt||(Wt=r)}}})});var Na=N(P=>{"use strict";g();w();Object.defineProperty(P,"__esModule",{value:!0});P.utils=P.schnorr=P.verify=P.signSync=P.sign=P.getSharedSecret=P.recoverPublicKey=P.getPublicKey=P.Signature=P.Point=P.CURVE=void 0;var pa=Gn(),D=BigInt(0),K=BigInt(1),ot=BigInt(2),Xt=BigInt(3),zs=BigInt(8),j=Object.freeze({a:D,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:K,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});P.CURVE=j;var Ds=(r,e)=>(r+e/ot)/e,Br={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(r){let{n:e}=j,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-K*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),f=Ds(s*r,e),a=Ds(-n*r,e),u=b(r-f*t-a*i,e),h=b(-f*n-a*s,e),l=u>o,y=h>o;if(l&&(u=e-u),y&&(h=e-h),u>o||h>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+r);return{k1neg:l,k1:u,k2neg:y,k2:h}}},qe=32,mt=32,Zs=32,kr=qe+1,Nr=2*qe+1;function Fs(r){let{a:e,b:t}=j,n=b(r*r),i=b(n*r);return b(i+e*r+t)}var _r=j.a===D,Qt=class extends Error{constructor(e){super(e)}};function Hs(r){if(!(r instanceof L))throw new TypeError("JacobianPoint expected")}var L=class{constructor(e,t,n){this.x=e,this.y=t,this.z=n}static fromAffine(e){if(!(e instanceof H))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(H.ZERO)?L.ZERO:new L(e.x,e.y,K)}static toAffineBatch(e){let t=va(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(t[i]))}static normalizeZ(e){return L.toAffineBatch(e).map(L.fromAffine)}equals(e){Hs(e);let{x:t,y:n,z:i}=this,{x:s,y:o,z:f}=e,a=b(i*i),u=b(f*f),h=b(t*u),l=b(s*a),y=b(b(n*f)*u),v=b(b(o*i)*a);return h===l&&y===v}negate(){return new L(this.x,b(-this.y),this.z)}double(){let{x:e,y:t,z:n}=this,i=b(e*e),s=b(t*t),o=b(s*s),f=e+s,a=b(ot*(b(f*f)-i-o)),u=b(Xt*i),h=b(u*u),l=b(h-ot*a),y=b(u*(a-l)-zs*o),v=b(ot*t*n);return new L(l,y,v)}add(e){Hs(e);let{x:t,y:n,z:i}=this,{x:s,y:o,z:f}=e;if(s===D||o===D)return this;if(t===D||n===D)return e;let a=b(i*i),u=b(f*f),h=b(t*u),l=b(s*a),y=b(b(n*f)*u),v=b(b(o*i)*a),E=b(l-h),x=b(v-y);if(E===D)return x===D?this.double():L.ZERO;let R=b(E*E),T=b(E*R),S=b(h*R),ie=b(x*x-T-ot*S),_=b(x*(S-ie)-y*T),$=b(i*f*E);return new L(ie,_,$)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let t=L.ZERO;if(typeof e=="bigint"&&e===D)return t;let n=Ls(e);if(n===K)return this;if(!_r){let l=t,y=this;for(;n>D;)n&K&&(l=l.add(y)),y=y.double(),n>>=K;return l}let{k1neg:i,k1:s,k2neg:o,k2:f}=Br.splitScalar(n),a=t,u=t,h=this;for(;s>D||f>D;)s&K&&(a=a.add(h)),f&K&&(u=u.add(h)),h=h.double(),s>>=K,f>>=K;return i&&(a=a.negate()),o&&(u=u.negate()),u=new L(b(u.x*Br.beta),u.y,u.z),a.add(u)}precomputeWindow(e){let t=_r?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<t;o++){s=i,n.push(s);for(let f=1;f<2**(e-1);f++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,t){!t&&this.equals(L.BASE)&&(t=H.BASE);let n=t&&t._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&Fn.get(t);i||(i=this.precomputeWindow(n),t&&n!==1&&(i=L.normalizeZ(i),Fn.set(t,i)));let s=L.ZERO,o=L.BASE,f=1+(_r?128/n:256/n),a=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let y=0;y<f;y++){let v=y*a,E=Number(e&u);e>>=l,E>a&&(E-=h,e+=K);let x=v,R=v+Math.abs(E)-1,T=y%2!==0,S=E<0;E===0?o=o.add(Rr(T,i[x])):s=s.add(Rr(S,i[R]))}return{p:s,f:o}}multiply(e,t){let n=Ls(e),i,s;if(_r){let{k1neg:o,k1:f,k2neg:a,k2:u}=Br.splitScalar(n),{p:h,f:l}=this.wNAF(f,t),{p:y,f:v}=this.wNAF(u,t);h=Rr(o,h),y=Rr(a,y),y=new L(b(y.x*Br.beta),y.y,y.z),i=h.add(y),s=l.add(v)}else{let{p:o,f}=this.wNAF(n,t);i=o,s=f}return L.normalizeZ([i,s])[0]}toAffine(e){let{x:t,y:n,z:i}=this,s=this.equals(L.ZERO);e==null&&(e=s?zs:Nt(i));let o=e,f=b(o*o),a=b(f*o),u=b(t*f),h=b(n*a),l=b(i*o);if(s)return H.ZERO;if(l!==K)throw new Error("invZ was invalid");return new H(u,h)}};L.BASE=new L(j.Gx,j.Gy,K);L.ZERO=new L(D,K,D);function Rr(r,e){let t=e.negate();return r?t:e}var Fn=new WeakMap,H=class{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Fn.delete(this)}hasEvenY(){return this.y%ot===D}static fromCompressedHex(e){let t=e.length===32,n=we(t?e:e.subarray(1));if(!Ir(n))throw new Error("Point is not on curve");let i=Fs(n),s=wa(i),o=(s&K)===K;t?o&&(s=b(-s)):(e[0]&1)===1!==o&&(s=b(-s));let f=new H(n,s);return f.assertValidity(),f}static fromUncompressedHex(e){let t=we(e.subarray(1,qe+1)),n=we(e.subarray(qe+1,qe*2+1)),i=new H(t,n);return i.assertValidity(),i}static fromHex(e){let t=Le(e),n=t.length,i=t[0];if(n===qe)return this.fromCompressedHex(t);if(n===kr&&(i===2||i===3))return this.fromCompressedHex(t);if(n===Nr&&i===4)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${kr} compressed bytes or ${Nr} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return H.BASE.multiply(gt(e))}static fromSignature(e,t,n){let{r:i,s}=Ws(t);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let o=Hn(Le(e)),{n:f}=j,a=n===2||n===3?i+f:i,u=Nt(a,f),h=b(-o*u,f),l=b(s*u,f),y=n&1?"03":"02",v=H.fromHex(y+ft(a)),E=H.BASE.multiplyAndAddUnsafe(v,h,l);if(!E)throw new Error("Cannot recover signature: point at infinify");return E.assertValidity(),E}toRawBytes(e=!1){return at(this.toHex(e))}toHex(e=!1){let t=ft(this.x);return e?`${this.hasEvenY()?"02":"03"}${t}`:`04${t}${ft(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:t,y:n}=this;if(!Ir(t)||!Ir(n))throw new Error(e);let i=b(n*n),s=Fs(t);if(b(i-s)!==D)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new H(this.x,b(-this.y))}double(){return L.fromAffine(this).double().toAffine()}add(e){return L.fromAffine(this).add(L.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return L.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,n){let i=L.fromAffine(this),s=t===D||t===K||this!==H.BASE?i.multiplyUnsafe(t):i.multiply(t),o=L.fromAffine(e).multiplyUnsafe(n),f=s.add(o);return f.equals(L.ZERO)?void 0:f.toAffine()}};P.Point=H;H.BASE=new H(j.Gx,j.Gy);H.ZERO=new H(D,D);function Cs(r){return Number.parseInt(r[0],16)>=8?"00"+r:r}function Vs(r){if(r.length<2||r[0]!==2)throw new Error(`Invalid signature integer tag: ${Tt(r)}`);let e=r[1],t=r.subarray(2,e+2);if(!e||t.length!==e)throw new Error("Invalid signature integer: wrong length");if(t[0]===0&&t[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:we(t),left:r.subarray(e+2)}}function ya(r){if(r.length<2||r[0]!=48)throw new Error(`Invalid signature tag: ${Tt(r)}`);if(r[1]!==r.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:t}=Vs(r.subarray(2)),{data:n,left:i}=Vs(t);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Tt(i)}`);return{r:e,s:n}}var Ue=class{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){let t=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!t)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=t?Tt(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Ue(qr(i.slice(0,64)),qr(i.slice(64,128)))}static fromDER(e){let t=e instanceof Uint8Array;if(typeof e!="string"&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=ya(t?e:at(e));return new Ue(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:t}=this;if(!kt(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!kt(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=j.n>>K;return this.s>e}normalizeS(){return this.hasHighS()?new Ue(this.r,b(-this.s,j.n)):this}toDERRawBytes(){return at(this.toDERHex())}toDERHex(){let e=Cs(Gt(this.s)),t=Cs(Gt(this.r)),n=e.length/2,i=t.length/2,s=Gt(n),o=Gt(i);return`30${Gt(i+n+4)}02${o}${t}02${s}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return at(this.toCompactHex())}toCompactHex(){return ft(this.r)+ft(this.s)}};P.Signature=Ue;function st(...r){if(!r.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(r.length===1)return r[0];let e=r.reduce((n,i)=>n+i.length,0),t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let s=r[n];t.set(s,i),i+=s.length}return t}var ma=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Tt(r){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let t=0;t<r.length;t++)e+=ma[r[t]];return e}var ga=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ft(r){if(typeof r!="bigint")throw new Error("Expected bigint");if(!(D<=r&&r<ga))throw new Error("Expected number 0 <= n < 2^256");return r.toString(16).padStart(64,"0")}function It(r){let e=at(ft(r));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Gt(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function qr(r){if(typeof r!="string")throw new TypeError("hexToNumber: expected string, got "+typeof r);return BigInt(`0x${r}`)}function at(r){if(typeof r!="string")throw new TypeError("hexToBytes: expected string, got "+typeof r);if(r.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+r.length);let e=new Uint8Array(r.length/2);for(let t=0;t<e.length;t++){let n=t*2,i=r.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[t]=s}return e}function we(r){return qr(Tt(r))}function Le(r){return r instanceof Uint8Array?Uint8Array.from(r):at(r)}function Ls(r){if(typeof r=="number"&&Number.isSafeInteger(r)&&r>0)return BigInt(r);if(typeof r=="bigint"&&kt(r))return r;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function b(r,e=j.P){let t=r%e;return t>=D?t:e+t}function Ae(r,e){let{P:t}=j,n=r;for(;e-- >D;)n*=n,n%=t;return n}function wa(r){let{P:e}=j,t=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),f=BigInt(88),a=r*r*r%e,u=a*a*r%e,h=Ae(u,Xt)*u%e,l=Ae(h,Xt)*u%e,y=Ae(l,ot)*a%e,v=Ae(y,n)*y%e,E=Ae(v,i)*v%e,x=Ae(E,o)*E%e,R=Ae(x,f)*x%e,T=Ae(R,o)*E%e,S=Ae(T,Xt)*u%e,ie=Ae(S,s)*v%e,_=Ae(ie,t)*a%e,$=Ae(_,ot);if($*$%e!==r)throw new Error("Cannot find square root");return $}function Nt(r,e=j.P){if(r===D||e<=D)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=b(r,e),n=e,i=D,s=K,o=K,f=D;for(;t!==D;){let u=n/t,h=n%t,l=i-o*u,y=s-f*u;n=t,t=h,i=o,s=f,o=l,f=y}if(n!==K)throw new Error("invert: does not exist");return b(i,e)}function va(r,e=j.P){let t=new Array(r.length),n=r.reduce((s,o,f)=>o===D?s:(t[f]=s,b(s*o,e)),K),i=Nt(n,e);return r.reduceRight((s,o,f)=>o===D?s:(t[f]=b(s*t[f],e),b(s*o,e)),i),t}function ba(r){let e=r.length*8-mt*8,t=we(r);return e>0?t>>BigInt(e):t}function Hn(r,e=!1){let t=ba(r);if(e)return t;let{n}=j;return t>=n?t-n:t}var Rt,Yt,Ur=class{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return P.utils.hmacSha256(this.k,...e)}hmacSync(...e){return Yt(this.k,...e)}checkSync(){if(typeof Yt!="function")throw new Qt("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();t.push(n),e+=this.v.length}return st(...t)}generateSync(){this.checkSync(),this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();t.push(n),e+=this.v.length}return st(...t)}};function kt(r){return D<r&&r<j.n}function Ir(r){return D<r&&r<j.P}function js(r,e,t,n=!0){let{n:i}=j,s=Hn(r,!0);if(!kt(s))return;let o=Nt(s,i),f=H.BASE.multiply(s),a=b(f.x,i);if(a===D)return;let u=b(o*b(e+t*a,i),i);if(u===D)return;let h=new Ue(a,u),l=(f.x===h.r?0:2)|Number(f.y&K);return n&&h.hasHighS()&&(h=h.normalizeS(),l^=1),{sig:h,recovery:l}}function gt(r){let e;if(typeof r=="bigint")e=r;else if(typeof r=="number"&&Number.isSafeInteger(r)&&r>0)e=BigInt(r);else if(typeof r=="string"){if(r.length!==2*mt)throw new Error("Expected 32 bytes of private key");e=qr(r)}else if(r instanceof Uint8Array){if(r.length!==mt)throw new Error("Expected 32 bytes of private key");e=we(r)}else throw new TypeError("Expected valid private key");if(!kt(e))throw new Error("Expected private key: 0 < key < n");return e}function Cn(r){return r instanceof H?(r.assertValidity(),r):H.fromHex(r)}function Ws(r){if(r instanceof Ue)return r.assertValidity(),r;try{return Ue.fromDER(r)}catch{return Ue.fromCompact(r)}}function Ea(r,e=!1){return H.fromPrivateKey(r).toRawBytes(e)}P.getPublicKey=Ea;function Sa(r,e,t,n=!1){return H.fromSignature(r,e,t).toRawBytes(n)}P.recoverPublicKey=Sa;function Ms(r){let e=r instanceof Uint8Array,t=typeof r=="string",n=(e||t)&&r.length;return e?n===kr||n===Nr:t?n===kr*2||n===Nr*2:r instanceof H}function xa(r,e,t=!1){if(Ms(r))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ms(e))throw new TypeError("getSharedSecret: second arg must be public key");let n=Cn(e);return n.assertValidity(),n.multiply(gt(r)).toRawBytes(t)}P.getSharedSecret=xa;function Js(r){let e=r.length>qe?r.slice(0,qe):r;return we(e)}function Oa(r){let e=Js(r),t=b(e,j.n);return Ks(t<D?e:t)}function Ks(r){return It(r)}function Gs(r,e,t){if(r==null)throw new Error(`sign: expected valid message hash, not "${r}"`);let n=Le(r),i=gt(e),s=[Ks(i),Oa(n)];if(t!=null){t===!0&&(t=P.utils.randomBytes(qe));let a=Le(t);if(a.length!==qe)throw new Error(`sign: Expected ${qe} bytes of extra data`);s.push(a)}let o=st(...s),f=Js(n);return{seed:o,m:f,d:i}}function Xs(r,e){let{sig:t,recovery:n}=r,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},e),o=i?t.toDERRawBytes():t.toCompactRawBytes();return s?[o,n]:o}async function Aa(r,e,t={}){let{seed:n,m:i,d:s}=Gs(r,e,t.extraEntropy),o=new Ur(Zs,mt);await o.reseed(n);let f;for(;!(f=js(await o.generate(),i,s,t.canonical));)await o.reseed();return Xs(f,t)}P.sign=Aa;function Ba(r,e,t={}){let{seed:n,m:i,d:s}=Gs(r,e,t.extraEntropy),o=new Ur(Zs,mt);o.reseedSync(n);let f;for(;!(f=js(o.generateSync(),i,s,t.canonical));)o.reseedSync();return Xs(f,t)}P.signSync=Ba;var _a={strict:!0};function Ra(r,e,t,n=_a){let i;try{i=Ws(r),e=Le(e)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let f=Hn(e),a;try{a=Cn(t)}catch{return!1}let{n:u}=j,h=Nt(o,u),l=b(f*h,u),y=b(s*h,u),v=H.BASE.multiplyAndAddUnsafe(a,l,y);return v?b(v.x,u)===s:!1}P.verify=Ra;function Pr(r){return b(we(r),j.n)}var ut=class{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){let t=Le(e);if(t.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);let n=we(t.subarray(0,32)),i=we(t.subarray(32,64));return new ut(n,i)}assertValidity(){let{r:e,s:t}=this;if(!Ir(e)||!kt(t))throw new Error("Invalid signature")}toHex(){return ft(this.r)+ft(this.s)}toRawBytes(){return at(this.toHex())}};function Ta(r){return H.fromPrivateKey(r).toRawX()}var $r=class{constructor(e,t,n=P.utils.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=Le(e);let{x:i,scalar:s}=this.getScalar(gt(t));if(this.px=i,this.d=s,this.rand=Le(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){let t=H.fromPrivateKey(e),n=t.hasEvenY()?e:j.n-e;return{point:t,scalar:n,x:t.toRawX()}}initNonce(e,t){return It(e^we(t))}finalizeNonce(e){let t=b(we(e),j.n);if(t===D)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:s}=this.getScalar(t);return{R:n,rx:i,k:s}}finalizeSig(e,t,n,i){return new ut(e.x,b(t+n*i,j.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:e,d:t,px:n,rand:i}=this,s=P.utils.taggedHash,o=this.initNonce(t,await s(it.aux,i)),{R:f,rx:a,k:u}=this.finalizeNonce(await s(it.nonce,o,n,e)),h=Pr(await s(it.challenge,a,n,e)),l=this.finalizeSig(f,u,h,t);return await eo(l,e,n)||this.error(),l}calcSync(){let{m:e,d:t,px:n,rand:i}=this,s=P.utils.taggedHashSync,o=this.initNonce(t,s(it.aux,i)),{R:f,rx:a,k:u}=this.finalizeNonce(s(it.nonce,o,n,e)),h=Pr(s(it.challenge,a,n,e)),l=this.finalizeSig(f,u,h,t);return to(l,e,n)||this.error(),l}};async function Ia(r,e,t){return new $r(r,e,t).calc()}function ka(r,e,t){return new $r(r,e,t).calcSync()}function Ys(r,e,t){let n=r instanceof ut,i=n?r:ut.fromHex(r);return n&&i.assertValidity(),{...i,m:Le(e),P:Cn(t)}}function Qs(r,e,t,n){let i=H.BASE.multiplyAndAddUnsafe(e,gt(t),b(-n,j.n));return!(!i||!i.hasEvenY()||i.x!==r)}async function eo(r,e,t){try{let{r:n,s:i,m:s,P:o}=Ys(r,e,t),f=Pr(await P.utils.taggedHash(it.challenge,It(n),o.toRawX(),s));return Qs(n,o,i,f)}catch{return!1}}function to(r,e,t){try{let{r:n,s:i,m:s,P:o}=Ys(r,e,t),f=Pr(P.utils.taggedHashSync(it.challenge,It(n),o.toRawX(),s));return Qs(n,o,i,f)}catch(n){if(n instanceof Qt)throw n;return!1}}P.schnorr={Signature:ut,getPublicKey:Ta,sign:Ia,verify:eo,signSync:ka,verifySync:to};H.BASE._setWindowSize(8);var ge={node:pa,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},it={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Tr={};P.utils={bytesToHex:Tt,hexToBytes:at,concatBytes:st,mod:b,invert:Nt,isValidPrivateKey(r){try{return gt(r),!0}catch{return!1}},_bigintTo32Bytes:It,_normalizePrivateKey:gt,hashToPrivateKey:r=>{r=Le(r);let e=mt+8;if(r.length<e||r.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let t=b(we(r),j.n-K)+K;return It(t)},randomBytes:(r=32)=>{if(ge.web)return ge.web.getRandomValues(new Uint8Array(r));if(ge.node){let{randomBytes:e}=ge.node;return Uint8Array.from(e(r))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>P.utils.hashToPrivateKey(P.utils.randomBytes(mt+8)),precompute(r=8,e=H.BASE){let t=e===H.BASE?e:new H(e.x,e.y);return t._setWindowSize(r),t.multiply(Xt),t},sha256:async(...r)=>{if(ge.web){let e=await ge.web.subtle.digest("SHA-256",st(...r));return new Uint8Array(e)}else if(ge.node){let{createHash:e}=ge.node,t=e("sha256");return r.forEach(n=>t.update(n)),Uint8Array.from(t.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(r,...e)=>{if(ge.web){let t=await ge.web.subtle.importKey("raw",r,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=st(...e),i=await ge.web.subtle.sign("HMAC",t,n);return new Uint8Array(i)}else if(ge.node){let{createHmac:t}=ge.node,n=t("sha256",r);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(r,...e)=>{let t=Tr[r];if(t===void 0){let n=await P.utils.sha256(Uint8Array.from(r,i=>i.charCodeAt(0)));t=st(n,n),Tr[r]=t}return P.utils.sha256(t,...e)},taggedHashSync:(r,...e)=>{if(typeof Rt!="function")throw new Qt("sha256Sync is undefined, you need to set it");let t=Tr[r];if(t===void 0){let n=Rt(Uint8Array.from(r,i=>i.charCodeAt(0)));t=st(n,n),Tr[r]=t}return Rt(t,...e)},_JacobianPoint:L};Object.defineProperties(P.utils,{sha256Sync:{configurable:!1,get(){return Rt},set(r){Rt||(Rt=r)}},hmacSha256Sync:{configurable:!1,get(){return Yt},set(r){Yt||(Yt=r)}}})});function ro(r,e=!1,t=!0){let n="";return n=(i=>{let s=[];for(let o=0;o<i.length;o+=32768)s.push(String.fromCharCode.apply(null,i.subarray(o,o+32768)));return btoa(s.join(""))})(typeof r=="string"?new TextEncoder().encode(r):new Uint8Array(r)),e&&(n=function(i){return i.replace(/\+/g,"-").replace(/\//g,"_")}(n)),t||(n=n.replace(/=/g,"")),n}function no(r,e=!1){{let t=!1;if(/^[0-9a-zA-Z_-]+={0,2}$/.test(r))t=!0;else if(!/^[0-9a-zA-Z+/]*={0,2}$/.test(r))throw new Error("Not a valid base64 input");t&&(r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/=/g,""));let n=new Uint8Array(atob(r).split("").map(i=>i.charCodeAt(0)));return e?new TextDecoder().decode(n):n}}var io=Mr(()=>{g();w()});var Da={};Kn(Da,{base64ToBigint:()=>za,bigintToBase64:()=>$a,bigintToBuf:()=>so,bigintToHex:()=>fo,bigintToText:()=>Ua,bufToBigint:()=>oo,bufToHex:()=>lo,bufToText:()=>uo,hexToBigint:()=>ao,hexToBuf:()=>Vn,parseHex:()=>er,textToBigint:()=>Pa,textToBuf:()=>co});function er(r,e=!1,t){let n=r.match(/^(0x)?([\da-fA-F]+)$/);if(n==null)throw new RangeError("input must be a hexadecimal string, e.g. '0x124fe3a' or '0214f1b2'");let i=n[2];if(t!==void 0){if(t<i.length/2)throw new RangeError(`expected byte length ${t} < input hex byte length ${Math.ceil(i.length/2)}`);i=i.padStart(2*t,"0")}return e?"0x"+i:i}function so(r,e=!1){if(r<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return Vn(fo(r),e)}function oo(r){let e=8n;ArrayBuffer.isView(r)?e=BigInt(8*r.BYTES_PER_ELEMENT):r=new Uint8Array(r);let t=0n;for(let n of r.values())t=(t<<e)+BigInt(n);return t}function fo(r,e=!1,t){if(r<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return r.toString(16)}function ao(r){return BigInt(er(r,!0))}function Ua(r){if(r<0)throw RangeError("a should be a non-negative integer. Negative values are not supported");return uo(Vn(r.toString(16)))}function Pa(r){return ao(lo(co(r)))}function uo(r){return new TextDecoder().decode(new Uint8Array(r))}function co(r,e=!1){return new TextEncoder().encode(r).buffer}function lo(r,e=!1,t){{let n="",i="0123456789abcdef";return(r=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):new Uint8Array(r)).forEach(s=>{n+=i[s>>4]+i[15&s]}),er(n,e,t)}}function Vn(r,e=!1){let t=er(r);return t=er(r,!1,Math.ceil(t.length/2)),Uint8Array.from(t.match(/[\da-fA-F]{2}/g).map(n=>parseInt(n,16))).buffer}function $a(r,e=!1,t=!0){return ro(so(r),e,t)}function za(r){return oo(no(r))}var Fa=Mr(()=>{g();w();io()});var Za={};Kn(Za,{abs:()=>wt,bitLength:()=>Mn,eGcd:()=>zr,gcd:()=>ho,isProbablyPrime:()=>Ln,lcm:()=>Ha,max:()=>Ca,min:()=>Va,modInv:()=>Dr,modPow:()=>Pt,prime:()=>La,primeSync:()=>Ma,randBetween:()=>Hr,randBits:()=>yo,randBitsSync:()=>vt,randBytes:()=>po,randBytesSync:()=>Fr,toZn:()=>Ut});function wt(r){return r>=0?r:-r}function Mn(r){if(typeof r=="number"&&(r=BigInt(r)),r===1n)return 1;let e=1;do e++;while((r>>=1n)>1n);return e}function zr(r,e){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),r<=0n||e<=0n)throw new RangeError("a and b MUST be > 0");let t=0n,n=1n,i=1n,s=0n;for(;r!==0n;){let o=e/r,f=e%r,a=t-i*o,u=n-s*o;e=r,r=f,t=i,n=s,i=a,s=u}return{g:e,x:t,y:n}}function ho(r,e){let t=typeof r=="number"?BigInt(wt(r)):wt(r),n=typeof e=="number"?BigInt(wt(e)):wt(e);if(t===0n)return n;if(n===0n)return t;let i=0n;for(;(1n&(t|n))===0n;)t>>=1n,n>>=1n,i++;for(;(1n&t)===0n;)t>>=1n;do{for(;(1n&n)===0n;)n>>=1n;if(t>n){let s=t;t=n,n=s}n-=t}while(n!==0n);return t<<i}function Ha(r,e){return typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),r===0n&&e===0n?BigInt(0):wt(r/ho(r,e)*e)}function Ca(r,e){return r>=e?r:e}function Va(r,e){return r>=e?e:r}function Ut(r,e){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),e<=0n)throw new RangeError("n must be > 0");let t=r%e;return t<0n?t+e:t}function Dr(r,e){let t=zr(Ut(r,e),e);if(t.g!==1n)throw new RangeError(`${r.toString()} does not have inverse modulo ${e.toString()}`);return Ut(t.x,e)}function Pt(r,e,t){if(typeof r=="number"&&(r=BigInt(r)),typeof e=="number"&&(e=BigInt(e)),typeof t=="number"&&(t=BigInt(t)),t<=0n)throw new RangeError("n must be > 0");if(t===1n)return 0n;if(r=Ut(r,t),e<0n)return Dr(Pt(r,wt(e),t),t);let n=1n;for(;e>0;)e%2n===1n&&(n=n*r%t),e/=2n,r=r**2n%t;return n}function qt(r){let e=0n;for(let t of r.values())e=(e<<8n)+BigInt(t);return e}function po(r,e=!1){if(r<1)throw new RangeError("byteLength MUST be > 0");return new Promise(function(t,n){{let i=new Uint8Array(r);if(r<=65536)self.crypto.getRandomValues(i);else for(let s=0;s<Math.ceil(r/65536);s++){let o=65536*s,f=o+65535<r?o+65535:r-1;self.crypto.getRandomValues(i.subarray(o,f))}e&&(i[0]=128|i[0]),t(i)}})}function Fr(r,e=!1){if(r<1)throw new RangeError("byteLength MUST be > 0");{let t=new Uint8Array(r);if(r<=65536)self.crypto.getRandomValues(t);else for(let n=0;n<Math.ceil(r/65536);n++){let i=65536*n,s=i+65535<r?i+65535:r-1;self.crypto.getRandomValues(t.subarray(i,s))}return e&&(t[0]=128|t[0]),t}}function yo(r,e=!1){if(r<1)throw new RangeError("bitLength MUST be > 0");let t=Math.ceil(r/8),n=r%8;return new Promise((i,s)=>{po(t,!1).then(function(o){if(n!==0&&(o[0]=o[0]&2**n-1),e){let f=n!==0?2**(n-1):128;o[0]=o[0]|f}i(o)})})}function vt(r,e=!1){if(r<1)throw new RangeError("bitLength MUST be > 0");let t=Fr(Math.ceil(r/8),!1),n=r%8;if(n!==0&&(t[0]=t[0]&2**n-1),e){let i=n!==0?2**(n-1):128;t[0]=t[0]|i}return t}function Hr(r,e=1n){if(r<=e)throw new RangeError("Arguments MUST be: max > min");let t=r-e,n=Mn(t),i;do i=qt(vt(n));while(i>t);return i+e}function Ln(r,e=16,t=!1){if(typeof r=="number"&&(r=BigInt(r)),r<0n)throw RangeError("w MUST be >= 0");return new Promise((n,i)=>{let s=new Worker(go());s.onmessage=f=>{f?.data?._bcu?.isPrime!==void 0&&(s.terminate(),n(f.data._bcu.isPrime))},s.onmessageerror=f=>{i(f)};let o={_bcu:{rnd:r,iterations:e,id:0}};s.postMessage(o)})}function Zn(r,e){if(r===2n)return!0;if((1n&r)===0n||r===1n)return!1;let t=[3n,5n,7n,11n,13n,17n,19n,23n,29n,31n,37n,41n,43n,47n,53n,59n,61n,67n,71n,73n,79n,83n,89n,97n,101n,103n,107n,109n,113n,127n,131n,137n,139n,149n,151n,157n,163n,167n,173n,179n,181n,191n,193n,197n,199n,211n,223n,227n,229n,233n,239n,241n,251n,257n,263n,269n,271n,277n,281n,283n,293n,307n,311n,313n,317n,331n,337n,347n,349n,353n,359n,367n,373n,379n,383n,389n,397n,401n,409n,419n,421n,431n,433n,439n,443n,449n,457n,461n,463n,467n,479n,487n,491n,499n,503n,509n,521n,523n,541n,547n,557n,563n,569n,571n,577n,587n,593n,599n,601n,607n,613n,617n,619n,631n,641n,643n,647n,653n,659n,661n,673n,677n,683n,691n,701n,709n,719n,727n,733n,739n,743n,751n,757n,761n,769n,773n,787n,797n,809n,811n,821n,823n,827n,829n,839n,853n,857n,859n,863n,877n,881n,883n,887n,907n,911n,919n,929n,937n,941n,947n,953n,967n,971n,977n,983n,991n,997n,1009n,1013n,1019n,1021n,1031n,1033n,1039n,1049n,1051n,1061n,1063n,1069n,1087n,1091n,1093n,1097n,1103n,1109n,1117n,1123n,1129n,1151n,1153n,1163n,1171n,1181n,1187n,1193n,1201n,1213n,1217n,1223n,1229n,1231n,1237n,1249n,1259n,1277n,1279n,1283n,1289n,1291n,1297n,1301n,1303n,1307n,1319n,1321n,1327n,1361n,1367n,1373n,1381n,1399n,1409n,1423n,1427n,1429n,1433n,1439n,1447n,1451n,1453n,1459n,1471n,1481n,1483n,1487n,1489n,1493n,1499n,1511n,1523n,1531n,1543n,1549n,1553n,1559n,1567n,1571n,1579n,1583n,1597n];for(let f=0;f<t.length&&t[f]<=r;f++){let a=t[f];if(r===a)return!0;if(r%a===0n)return!1}let n=0n,i=r-1n,s=i;for(;s%2n===0n;)s/=2n,++n;let o=i/2n**n;do{let f=Pt(Hr(i,2n),o,r);if(f===1n||f===i)continue;let a=1;for(;a<n&&(f=Pt(f,2n,r),f!==i);){if(f===1n)return!1;a++}if(f!==i)return!1}while(--e!=0);return!0}function go(){let r=`
  'use strict';
  const ${zr.name} = ${zr.toString()};
  const ${Dr.name} = ${Dr.toString()};
  const ${Pt.name} = ${Pt.toString()};
  const ${Ut.name} = ${Ut.toString()};
  const ${vt.name} = ${vt.toString()};
  const ${Fr.name} = ${Fr.toString()};
  const ${Hr.name} = ${Hr.toString()};
  const ${Ln.name} = ${Zn.toString()};
  ${Mn.toString()};
  ${qt.toString()};`;return r+=`
  onmessage = async function(msg) {
    if (msg !== undefined && msg.data !== undefined && msg.data._bcu !== undefined && msg.data._bcu.id !== undefined && msg.data._bcu.iterations !== undefined && msg.data._bcu.rnd !== undefined) {
      const msgToParent = {
        _bcu: {
          isPrime: await ${Ln.name}(msg.data._bcu.rnd, msg.data._bcu.iterations),
          value: msg.data._bcu.rnd,
          id: msg.data._bcu.id
        }
      };
      postMessage(msgToParent);
    }
  }`,function(e){e=`(() => {${e}})()`;let t=new Blob([e],{type:"text/javascript"});return window.URL.createObjectURL(t)}(r)}function La(r,e=16){if(r<1)throw new RangeError("bitLength MUST be > 0");if(!mo){let t=0n;do t=qt(vt(r,!0));while(!Zn(t,e));return new Promise(n=>{n(t)})}return new Promise((t,n)=>{let i=[],s=(o,f)=>{if(o._bcu.isPrime){for(let a=0;a<i.length;a++)i[a].terminate();for(;i.length>0;)i.pop();t(o._bcu.value)}else{let a=qt(vt(r,!0));try{let u={_bcu:{rnd:a,iterations:e,id:o._bcu.id}};f.postMessage(u)}catch{}}};{let o=go();for(let f=0;f<self.navigator.hardwareConcurrency-1;f++){let a=new Worker(o);a.onmessage=u=>s(u.data,a),i.push(a)}}for(let o=0;o<i.length;o++)yo(r,!0).then(function(f){let a=qt(f);i[o].postMessage({_bcu:{rnd:a,iterations:e,id:o}})}).catch(n)})}function Ma(r,e=16){if(r<1)throw new RangeError("bitLength MUST be > 0");let t=0n;do t=qt(vt(r,!0));while(!Zn(t,e));return t}var mo,ja=Mr(()=>{g();w();mo=!1;self.Worker!==void 0&&(mo=!0)});export{Mf as a,Zf as b,da as c,Na as d,Da as e,Fa as f,Za as g,ja as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-LLWJFPQV.js.map
