import{$b as Gi,Aa as Oy,Ba as z2,Db as Sc,Ea as G2,Ha as Z2,Ia as Y2,Ja as J2,Jb as xl,Kb as Sl,Lb as Ry,M as ml,Ma as Cy,Mb as Fr,Mc as Ol,N as Sy,Na as mr,Nb as Rn,Nc as Ac,O as Ay,Oa as wl,P as Ey,Pa as Ny,Qa as vl,R as Ty,Rb as Al,S as Py,Sa as qt,Sb as Ze,T as Iy,U as My,Ua as Ly,Ub as ti,V as ta,Vb as oa,Wb as Lo,Xb as El,Y as ra,Ya as zi,Yb as Tl,Z as na,Zb as Pl,_b as sa,ac as Il,bc as Ml,cc as aa,dc as ri,ec as Dy,gc as Bl,hc as kl,ic as _l,ja as By,jc as Vl,kc as qy,qa as ky,ra as bl,rc as Hy,sa as Yt,sb as ia,sc as jy,ta as kt,tc as Ul,ua as xc,uc as ca,va as Fi,wa as _y,xa as M,ya as Vy,yc as Gy,za as Uy}from"./chunk-D7Z6MPRS.js";import{b as j2,d as No,i as cy,k as uy,l as fy,m as ly,p as dy,q as hy}from"./chunk-NZAWO25Q.js";import{a as py,b as yy,c as bc,d as gy,e as my,f as Kt,l as Wy,m as $y,o as zr,p as Fy,q as zy}from"./chunk-E2H5RB2U.js";import{e as Ky}from"./chunk-27TD4NX4.js";import{B as gr,C as gl,D as xy,b as mc,g as dl,h as hl,i as by,j as wy,k as wc,l as pl,m as W2,n as $2,o as F2,p as vc}from"./chunk-YJV3X2ON.js";import{D as wt,K as $i,b as iy,c as D2,d as oy,e as K2,g as sy,h as q2,j as ay,k as H2}from"./chunk-FBDT5S2M.js";import{W as vy,k as Ge,m as yl}from"./chunk-TKSJVOQZ.js";import{h as F}from"./chunk-UA6ADLWZ.js";import{c as W,d as ny,f as ze,h as S,i as k,l as Wi,m as Buffer,n as A}from"./chunk-3KENBVE7.js";var Hg=W((fa,Do)=>{S();A();var gA=200,dg="__lodash_hash_undefined__",hg=9007199254740991,Fl="[object Arguments]",mA="[object Array]",pg="[object Boolean]",yg="[object Date]",bA="[object Error]",zl="[object Function]",gg="[object GeneratorFunction]",Tc="[object Map]",mg="[object Number]",Gl="[object Object]",tg="[object Promise]",bg="[object RegExp]",Pc="[object Set]",wg="[object String]",vg="[object Symbol]",Kl="[object WeakMap]",xg="[object ArrayBuffer]",Ic="[object DataView]",Sg="[object Float32Array]",Ag="[object Float64Array]",Eg="[object Int8Array]",Tg="[object Int16Array]",Pg="[object Int32Array]",Ig="[object Uint8Array]",Mg="[object Uint8ClampedArray]",Bg="[object Uint16Array]",kg="[object Uint32Array]",wA=/[\\^$.*+?()[\]{}|]/g,vA=/\w*$/,xA=/^\[object .+?Constructor\]$/,SA=/^(?:0|[1-9]\d*)$/,tt={};tt[Fl]=tt[mA]=tt[xg]=tt[Ic]=tt[pg]=tt[yg]=tt[Sg]=tt[Ag]=tt[Eg]=tt[Tg]=tt[Pg]=tt[Tc]=tt[mg]=tt[Gl]=tt[bg]=tt[Pc]=tt[wg]=tt[vg]=tt[Ig]=tt[Mg]=tt[Bg]=tt[kg]=!0;tt[bA]=tt[zl]=tt[Kl]=!1;var AA=typeof self=="object"&&self&&self.Object===Object&&self,EA=typeof self=="object"&&self&&self.Object===Object&&self,Dn=AA||EA||Function("return this")(),_g=typeof fa=="object"&&fa&&!fa.nodeType&&fa,rg=_g&&typeof Do=="object"&&Do&&!Do.nodeType&&Do,TA=rg&&rg.exports===_g;function PA(e,t){return e.set(t[0],t[1]),e}function IA(e,t){return e.add(t),e}function MA(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function BA(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Vg(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function kA(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function _A(e,t){return e?.[t]}function Ug(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function ng(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Zl(e,t){return function(r){return e(t(r))}}function ig(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var VA=Array.prototype,UA=Function.prototype,Mc=Object.prototype,Dl=Dn["__core-js_shared__"],og=function(){var e=/[^.]+$/.exec(Dl&&Dl.keys&&Dl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Og=UA.toString,ni=Mc.hasOwnProperty,Bc=Mc.toString,OA=RegExp("^"+Og.call(ni).replace(wA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sg=TA?Dn.Buffer:void 0,ag=Dn.Symbol,cg=Dn.Uint8Array,CA=Zl(Object.getPrototypeOf,Object),NA=Object.create,LA=Mc.propertyIsEnumerable,RA=VA.splice,ug=Object.getOwnPropertySymbols,DA=sg?sg.isBuffer:void 0,KA=Zl(Object.keys,Object),ql=Ho(Dn,"DataView"),la=Ho(Dn,"Map"),Hl=Ho(Dn,"Promise"),jl=Ho(Dn,"Set"),Wl=Ho(Dn,"WeakMap"),da=Ho(Object,"create"),qA=Ji(ql),HA=Ji(la),jA=Ji(Hl),WA=Ji(jl),$A=Ji(Wl),fg=ag?ag.prototype:void 0,lg=fg?fg.valueOf:void 0;function Yi(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function FA(){this.__data__=da?da(null):{}}function zA(e){return this.has(e)&&delete this.__data__[e]}function GA(e){var t=this.__data__;if(da){var r=t[e];return r===dg?void 0:r}return ni.call(t,e)?t[e]:void 0}function ZA(e){var t=this.__data__;return da?t[e]!==void 0:ni.call(t,e)}function YA(e,t){var r=this.__data__;return r[e]=da&&t===void 0?dg:t,this}Yi.prototype.clear=FA;Yi.prototype.delete=zA;Yi.prototype.get=GA;Yi.prototype.has=ZA;Yi.prototype.set=YA;function Kn(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function JA(){this.__data__=[]}function XA(e){var t=this.__data__,r=kc(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():RA.call(t,r,1),!0}function QA(e){var t=this.__data__,r=kc(t,e);return r<0?void 0:t[r][1]}function eE(e){return kc(this.__data__,e)>-1}function tE(e,t){var r=this.__data__,n=kc(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}Kn.prototype.clear=JA;Kn.prototype.delete=XA;Kn.prototype.get=QA;Kn.prototype.has=eE;Kn.prototype.set=tE;function Ko(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rE(){this.__data__={hash:new Yi,map:new(la||Kn),string:new Yi}}function nE(e){return _c(this,e).delete(e)}function iE(e){return _c(this,e).get(e)}function oE(e){return _c(this,e).has(e)}function sE(e,t){return _c(this,e).set(e,t),this}Ko.prototype.clear=rE;Ko.prototype.delete=nE;Ko.prototype.get=iE;Ko.prototype.has=oE;Ko.prototype.set=sE;function qo(e){this.__data__=new Kn(e)}function aE(){this.__data__=new Kn}function cE(e){return this.__data__.delete(e)}function uE(e){return this.__data__.get(e)}function fE(e){return this.__data__.has(e)}function lE(e,t){var r=this.__data__;if(r instanceof Kn){var n=r.__data__;if(!la||n.length<gA-1)return n.push([e,t]),this;r=this.__data__=new Ko(n)}return r.set(e,t),this}qo.prototype.clear=aE;qo.prototype.delete=cE;qo.prototype.get=uE;qo.prototype.has=fE;qo.prototype.set=lE;function dE(e,t){var r=Jl(e)||NE(e)?kA(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||ni.call(e,o))&&!(i&&(o=="length"||VE(o,n)))&&r.push(o);return r}function Cg(e,t,r){var n=e[t];(!(ni.call(e,t)&&Dg(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function kc(e,t){for(var r=e.length;r--;)if(Dg(e[r][0],t))return r;return-1}function hE(e,t){return e&&Ng(t,Xl(t),e)}function $l(e,t,r,n,i,o,a){var u;if(n&&(u=o?n(e,i,o,a):n(e)),u!==void 0)return u;if(!Vc(e))return e;var l=Jl(e);if(l){if(u=BE(e),!t)return PE(e,u)}else{var p=Zi(e),x=p==zl||p==gg;if(RE(e))return wE(e,t);if(p==Gl||p==Fl||x&&!o){if(Ug(e))return o?e:{};if(u=kE(x?{}:e),!t)return IE(e,hE(u,e))}else{if(!tt[p])return o?e:{};u=_E(e,p,$l,t)}}a||(a=new qo);var b=a.get(e);if(b)return b;if(a.set(e,u),!l)var T=r?ME(e):Xl(e);return MA(T||e,function(I,B){T&&(B=I,I=e[B]),Cg(u,B,$l(I,t,r,n,B,e,a))}),u}function pE(e){return Vc(e)?NA(e):{}}function yE(e,t,r){var n=t(e);return Jl(e)?n:BA(n,r(e))}function gE(e){return Bc.call(e)}function mE(e){if(!Vc(e)||OE(e))return!1;var t=qg(e)||Ug(e)?OA:xA;return t.test(Ji(e))}function bE(e){if(!Rg(e))return KA(e);var t=[];for(var r in Object(e))ni.call(e,r)&&r!="constructor"&&t.push(r);return t}function wE(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function Yl(e){var t=new e.constructor(e.byteLength);return new cg(t).set(new cg(e)),t}function vE(e,t){var r=t?Yl(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function xE(e,t,r){var n=t?r(ng(e),!0):ng(e);return Vg(n,PA,new e.constructor)}function SE(e){var t=new e.constructor(e.source,vA.exec(e));return t.lastIndex=e.lastIndex,t}function AE(e,t,r){var n=t?r(ig(e),!0):ig(e);return Vg(n,IA,new e.constructor)}function EE(e){return lg?Object(lg.call(e)):{}}function TE(e,t){var r=t?Yl(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function PE(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Ng(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;Cg(r,a,u===void 0?e[a]:u)}return r}function IE(e,t){return Ng(e,Lg(e),t)}function ME(e){return yE(e,Xl,Lg)}function _c(e,t){var r=e.__data__;return UE(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ho(e,t){var r=_A(e,t);return mE(r)?r:void 0}var Lg=ug?Zl(ug,Object):qE,Zi=gE;(ql&&Zi(new ql(new ArrayBuffer(1)))!=Ic||la&&Zi(new la)!=Tc||Hl&&Zi(Hl.resolve())!=tg||jl&&Zi(new jl)!=Pc||Wl&&Zi(new Wl)!=Kl)&&(Zi=function(e){var t=Bc.call(e),r=t==Gl?e.constructor:void 0,n=r?Ji(r):void 0;if(n)switch(n){case qA:return Ic;case HA:return Tc;case jA:return tg;case WA:return Pc;case $A:return Kl}return t});function BE(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&ni.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function kE(e){return typeof e.constructor=="function"&&!Rg(e)?pE(CA(e)):{}}function _E(e,t,r,n){var i=e.constructor;switch(t){case xg:return Yl(e);case pg:case yg:return new i(+e);case Ic:return vE(e,n);case Sg:case Ag:case Eg:case Tg:case Pg:case Ig:case Mg:case Bg:case kg:return TE(e,n);case Tc:return xE(e,n,r);case mg:case wg:return new i(e);case bg:return SE(e);case Pc:return AE(e,n,r);case vg:return EE(e)}}function VE(e,t){return t=t??hg,!!t&&(typeof e=="number"||SA.test(e))&&e>-1&&e%1==0&&e<t}function UE(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function OE(e){return!!og&&og in e}function Rg(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Mc;return e===r}function Ji(e){if(e!=null){try{return Og.call(e)}catch{}try{return e+""}catch{}}return""}function CE(e){return $l(e,!0,!0)}function Dg(e,t){return e===t||e!==e&&t!==t}function NE(e){return LE(e)&&ni.call(e,"callee")&&(!LA.call(e,"callee")||Bc.call(e)==Fl)}var Jl=Array.isArray;function Kg(e){return e!=null&&DE(e.length)&&!qg(e)}function LE(e){return KE(e)&&Kg(e)}var RE=DA||HE;function qg(e){var t=Vc(e)?Bc.call(e):"";return t==zl||t==gg}function DE(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hg}function Vc(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function KE(e){return!!e&&typeof e=="object"}function Xl(e){return Kg(e)?dE(e):bE(e)}function qE(){return[]}function HE(){return!1}Do.exports=CE});var bb=W((EO,mb)=>{S();A();var Fe={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function vr(e,t){if(!e)throw new Error(t)}function $e(e,t,r){if(vr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;vr(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;vr(t.length===r,n)}}function so(e){vr(rs(e)==="Boolean","Expected compressed to be a Boolean")}function en(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),$e("output",e,t),e}function rs(e){return Object.prototype.toString.call(e).slice(8,-1)}mb.exports=e=>({contextRandomize(t){switch(vr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&$e("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(Fe.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return $e("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch($e("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(Fe.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch($e("private key",t,32),$e("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(Fe.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch($e("private key",t,32),$e("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(Fe.TWEAK_MUL)}},publicKeyVerify(t){return $e("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch($e("private key",t,32),so(r),n=en(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(Fe.SECKEY_INVALID);case 2:throw new Error(Fe.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch($e("public key",t,[33,65]),so(r),n=en(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch($e("public key",t,[33,65]),so(r),n=en(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.IMPOSSIBLE_CASE);case 3:throw new Error(Fe.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){vr(Array.isArray(t),"Expected public keys to be an Array"),vr(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)$e("public key",i,[33,65]);switch(so(r),n=en(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.PUBKEY_COMBINE);case 3:throw new Error(Fe.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch($e("public key",t,[33,65]),$e("tweak",r,32),so(n),i=en(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch($e("public key",t,[33,65]),$e("tweak",r,32),so(n),i=en(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.TWEAK_MUL)}},signatureNormalize(t){switch($e("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(Fe.SIG_PARSE)}},signatureExport(t,r){$e("signature",t,64),r=en(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Fe.SIG_PARSE);case 2:throw new Error(Fe.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch($e("signature",t),r=en(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(Fe.SIG_PARSE);case 2:throw new Error(Fe.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){$e("message",t,32),$e("private key",r,32),vr(rs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&$e("options.data",n.data),n.noncefn!==void 0&&vr(rs(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=en(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(Fe.SIGN);case 2:throw new Error(Fe.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch($e("signature",t,64),$e("message",r,32),$e("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Fe.SIG_PARSE);case 2:throw new Error(Fe.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch($e("signature",t,64),vr(rs(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),$e("message",n,32),so(i),o=en(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(Fe.SIG_PARSE);case 2:throw new Error(Fe.RECOVER);case 3:throw new Error(Fe.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch($e("public key",t,[33,65]),$e("private key",r,32),vr(rs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&$e("options.data",n.data),n.hashfn!==void 0?(vr(rs(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&$e("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&$e("options.ybuf",n.ybuf,32),$e("output",i)):i=en(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Fe.PUBKEY_PARSE);case 2:throw new Error(Fe.ECDH)}}})});var vb=W((IO,wb)=>{S();A();var a6=ay().ec,mn=new a6("secp256k1"),We=mn.curve,Qe=We.n.constructor;function c6(e,t){let r=new Qe(t);if(r.cmp(We.p)>=0)return null;r=r.toRed(We.red);let n=r.redSqr().redIMul(r).redIAdd(We.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),mn.keyPair({pub:{x:r,y:n}})}function u6(e,t,r){let n=new Qe(t),i=new Qe(r);if(n.cmp(We.p)>=0||i.cmp(We.p)>=0||(n=n.toRed(We.red),i=i.toRed(We.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(We.b)).isZero()?mn.keyPair({pub:{x:n,y:i}}):null}function fi(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:c6(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:u6(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function ao(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}wb.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new Qe(e);return t.cmp(We.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new Qe(e),r=We.n.sub(t).umod(We.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new Qe(t);if(r.cmp(We.n)>=0||(r.iadd(new Qe(e)),r.cmp(We.n)>=0&&r.isub(We.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new Qe(t);if(r.cmp(We.n)>=0||r.isZero())return 1;r.imul(new Qe(e)),r.cmp(We.n)>=0&&(r=r.umod(We.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return fi(e)===null?1:0},publicKeyCreate(e,t){let r=new Qe(t);if(r.cmp(We.n)>=0||r.isZero())return 1;let n=mn.keyFromPrivate(t).getPublic();return ao(e,n),0},publicKeyConvert(e,t){let r=fi(t);if(r===null)return 1;let n=r.getPublic();return ao(e,n),0},publicKeyNegate(e,t){let r=fi(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),ao(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=fi(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(ao(e,n),0)},publicKeyTweakAdd(e,t,r){let n=fi(t);if(n===null)return 1;if(r=new Qe(r),r.cmp(We.n)>=0)return 2;let i=n.getPublic().add(We.g.mul(r));return i.isInfinity()?2:(ao(e,i),0)},publicKeyTweakMul(e,t,r){let n=fi(t);if(n===null)return 1;if(r=new Qe(r),r.cmp(We.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return ao(e,i),0},signatureNormalize(e){let t=new Qe(e.subarray(0,32)),r=new Qe(e.subarray(32,64));return t.cmp(We.n)>=0||r.cmp(We.n)>=0?1:(r.cmp(mn.nh)===1&&e.set(We.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new Qe(r).cmp(We.n)>=0||new Qe(n).cmp(We.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let a=33,u=0;for(;a>1&&o[u]===0&&!(o[u+1]&128);--a,++u);if(o=o.subarray(u),o[0]&128||a>1&&o[0]===0&&!(o[1]&128))return 1;let l=i.subarray(39,72);l[0]=0,l.set(n,1);let p=33,x=0;for(;p>1&&l[x]===0&&!(l[x+1]&128);--p,++x);return l=l.subarray(x),l[0]&128||p>1&&l[0]===0&&!(l[1]&128)?1:(e.outputlen=6+a+p,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+a]=2,i[5+a]=l.length,i.set(l,6+a),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let a=new Qe(i);a.cmp(We.n)>=0&&(a=new Qe(0));let u=new Qe(t.subarray(6+r));return u.cmp(We.n)>=0&&(u=new Qe(0)),e.set(a.toArrayLike(Uint8Array,"be",32),0),e.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let u=i;i=l=>{let p=u(t,r,null,n,l);if(!(p instanceof Uint8Array&&p.length===32))throw new Error("This is the way");return new Qe(p)}}let o=new Qe(r);if(o.cmp(We.n)>=0||o.isZero())return 1;let a;try{a=mn.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),e.recid=a.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new Qe(n.r),o=new Qe(n.s);if(i.cmp(We.n)>=0||o.cmp(We.n)>=0)return 1;if(o.cmp(mn.nh)===1||i.isZero()||o.isZero())return 3;let a=fi(r);if(a===null)return 2;let u=a.getPublic();return mn.verify(t,n,u)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new Qe(i.r),a=new Qe(i.s);if(o.cmp(We.n)>=0||a.cmp(We.n)>=0)return 1;if(o.isZero()||a.isZero())return 2;let u;try{u=mn.recoverPubKey(n,i,r)}catch{return 2}return ao(e,u),0},ecdh(e,t,r,n,i,o,a){let u=fi(t);if(u===null)return 1;let l=new Qe(r);if(l.cmp(We.n)>=0||l.isZero())return 2;let p=u.getPublic().mul(l);if(i===void 0){let x=p.encode(null,!0),b=mn.hash().update(x).digest();for(let T=0;T<32;++T)e[T]=b[T]}else{o||(o=new Uint8Array(32));let x=p.getX().toArray("be",32);for(let B=0;B<32;++B)o[B]=x[B];a||(a=new Uint8Array(32));let b=p.getY().toArray("be",32);for(let B=0;B<32;++B)a[B]=b[B];let T=i(o,a,n);if(!(T instanceof Uint8Array&&T.length===e.length))return 2;e.set(T)}return 0}}});var Jd=W((kO,xb)=>{S();A();xb.exports=bb()(vb())});var Ab=W(wu=>{"use strict";S();A();Object.defineProperty(wu,"__esModule",{value:!0});var Sb=iy();function f6(e){return new Promise(function(t,r){Sb(e,function(n,i){if(n){r(n);return}t(i)})})}wu.getRandomBytes=f6;function l6(e){return Sb(e)}wu.getRandomBytesSync=l6});var Ib=W(bn=>{"use strict";S();A();var d6=bn&&bn.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(x){try{p(n.next(x))}catch(b){a(b)}}function l(x){try{p(n.throw(x))}catch(b){a(b)}}function p(x){x.done?o(x.value):i(x.value).then(u,l)}p((n=n.apply(e,t||[])).next())})},h6=bn&&bn.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(p){return function(x){return l([p,x])}}function l(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,i=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(x){p=[6,x],i=0}finally{n=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};function p6(e){for(var t in e)bn.hasOwnProperty(t)||(bn[t]=e[t])}Object.defineProperty(bn,"__esModule",{value:!0});var Eb=Jd(),Tb=Ab(),Pb=32;function y6(){return d6(this,void 0,void 0,function(){var e;return h6(this,function(t){switch(t.label){case 0:return[4,Tb.getRandomBytes(Pb)];case 1:return e=t.sent(),Eb.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}bn.createPrivateKey=y6;function g6(){for(;;){var e=Tb.getRandomBytesSync(Pb);if(Eb.privateKeyVerify(e))return e}}bn.createPrivateKeySync=g6;p6(Jd())});var co=W((Mb,Xd)=>{S();A();(function(e,t){"use strict";function r(v,s){if(!v)throw new Error(s||"Assertion failed")}function n(v,s){v.super_=s;var f=function(){};f.prototype=s.prototype,v.prototype=new f,v.prototype.constructor=v}function i(v,s,f){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((s==="le"||s==="be")&&(f=s,s=10),this._init(v||0,s||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=sy().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,f){return s.cmp(f)>0?s:f},i.min=function(s,f){return s.cmp(f)<0?s:f},i.prototype._init=function(s,f,d){if(typeof s=="number")return this._initNumber(s,f,d);if(typeof s=="object")return this._initArray(s,f,d);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(f===16?this._parseHex(s,y,d):(this._parseBase(s,f,y),d==="le"&&this._initArray(this.toArray(),f,d)))},i.prototype._initNumber=function(s,f,d){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},i.prototype._initArray=function(s,f,d){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var h,w,E=0;if(d==="be")for(y=s.length-1,h=0;y>=0;y-=3)w=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[h]|=w<<E&67108863,this.words[h+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);else if(d==="le")for(y=0,h=0;y<s.length;y+=3)w=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[h]|=w<<E&67108863,this.words[h+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);return this.strip()};function a(v,s){var f=v.charCodeAt(s);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function u(v,s,f){var d=a(v,f);return f-1>=s&&(d|=a(v,f-1)<<4),d}i.prototype._parseHex=function(s,f,d){this.length=Math.ceil((s.length-f)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var h=0,w=0,E;if(d==="be")for(y=s.length-1;y>=f;y-=2)E=u(s,f,y)<<h,this.words[w]|=E&67108863,h>=18?(h-=18,w+=1,this.words[w]|=E>>>26):h+=8;else{var g=s.length-f;for(y=g%2===0?f+1:f;y<s.length;y+=2)E=u(s,f,y)<<h,this.words[w]|=E&67108863,h>=18?(h-=18,w+=1,this.words[w]|=E>>>26):h+=8}this.strip()};function l(v,s,f,d){for(var y=0,h=Math.min(v.length,f),w=s;w<h;w++){var E=v.charCodeAt(w)-48;y*=d,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i.prototype._parseBase=function(s,f,d){this.words=[0],this.length=1;for(var y=0,h=1;h<=67108863;h*=f)y++;y--,h=h/f|0;for(var w=s.length-d,E=w%y,g=Math.min(w,w-E)+d,c=0,m=d;m<g;m+=y)c=l(s,m,m+y,f),this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var O=1;for(c=l(s,m,s.length,f),m=0;m<E;m++)O*=f;this.imuln(O),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var f=0;f<this.length;f++)s.words[f]=this.words[f];s.length=this.length,s.negative=this.negative,s.red=this.red},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,f){s=s||10,f=f|0||1;var d;if(s===16||s==="hex"){d="";for(var y=0,h=0,w=0;w<this.length;w++){var E=this.words[w],g=((E<<y|h)&16777215).toString(16);h=E>>>24-y&16777215,h!==0||w!==this.length-1?d=p[6-g.length]+g+d:d=g+d,y+=2,y>=26&&(y-=26,w--)}for(h!==0&&(d=h.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(s===(s|0)&&s>=2&&s<=36){var c=x[s],m=b[s];d="";var O=this.clone();for(O.negative=0;!O.isZero();){var N=O.modn(m).toString(s);O=O.idivn(m),O.isZero()?d=N+d:d=p[c-N.length]+N+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(s,f){return r(typeof o<"u"),this.toArrayLike(o,s,f)},i.prototype.toArray=function(s,f){return this.toArrayLike(Array,s,f)},i.prototype.toArrayLike=function(s,f,d){var y=this.byteLength(),h=d||Math.max(1,y);r(y<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var w=f==="le",E=new s(h),g,c,m=this.clone();if(w){for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[c]=g;for(;c<h;c++)E[c]=0}else{for(c=0;c<h-y;c++)E[c]=0;for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[h-c-1]=g}return E},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var f=s,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},i.prototype._zeroBits=function(s){if(s===0)return 26;var f=s,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},i.prototype.bitLength=function(){var s=this.words[this.length-1],f=this._countBits(s);return(this.length-1)*26+f};function T(v){for(var s=new Array(v.bitLength()),f=0;f<s.length;f++){var d=f/26|0,y=f%26;s[f]=(v.words[d]&1<<y)>>>y}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(s+=d,d!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var f=0;f<s.length;f++)this.words[f]=this.words[f]|s.words[f];return this.strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var f;this.length>s.length?f=s:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&s.words[d];return this.length=f.length,this.strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var f,d;this.length>s.length?(f=this,d=s):(f=s,d=this);for(var y=0;y<d.length;y++)this.words[y]=f.words[y]^d.words[y];if(this!==f)for(;y<f.length;y++)this.words[y]=f.words[y];return this.length=f.length,this.strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var f=Math.ceil(s/26)|0,d=s%26;this._expand(f),d>0&&f--;for(var y=0;y<f;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this.strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,f){r(typeof s=="number"&&s>=0);var d=s/26|0,y=s%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this.strip()},i.prototype.iadd=function(s){var f;if(this.negative!==0&&s.negative===0)return this.negative=0,f=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,f=this.isub(s),s.negative=1,f._normSign();var d,y;this.length>s.length?(d=this,y=s):(d=s,y=this);for(var h=0,w=0;w<y.length;w++)f=(d.words[w]|0)+(y.words[w]|0)+h,this.words[w]=f&67108863,h=f>>>26;for(;h!==0&&w<d.length;w++)f=(d.words[w]|0)+h,this.words[w]=f&67108863,h=f>>>26;if(this.length=d.length,h!==0)this.words[this.length]=h,this.length++;else if(d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this},i.prototype.add=function(s){var f;return s.negative!==0&&this.negative===0?(s.negative=0,f=this.sub(s),s.negative^=1,f):s.negative===0&&this.negative!==0?(this.negative=0,f=s.sub(this),this.negative=1,f):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var f=this.iadd(s);return s.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var d=this.cmp(s);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,h;d>0?(y=this,h=s):(y=s,h=this);for(var w=0,E=0;E<h.length;E++)f=(y.words[E]|0)-(h.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;for(;w!==0&&E<y.length;E++)f=(y.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;if(w===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function I(v,s,f){f.negative=s.negative^v.negative;var d=v.length+s.length|0;f.length=d,d=d-1|0;var y=v.words[0]|0,h=s.words[0]|0,w=y*h,E=w&67108863,g=w/67108864|0;f.words[0]=E;for(var c=1;c<d;c++){for(var m=g>>>26,O=g&67108863,N=Math.min(c,s.length-1),R=Math.max(0,c-v.length+1);R<=N;R++){var H=c-R|0;y=v.words[H]|0,h=s.words[R]|0,w=y*h+O,m+=w/67108864|0,O=w&67108863}f.words[c]=O|0,g=m|0}return g!==0?f.words[c]=g|0:f.length--,f.strip()}var B=function(s,f,d){var y=s.words,h=f.words,w=d.words,E=0,g,c,m,O=y[0]|0,N=O&8191,R=O>>>13,H=y[1]|0,$=H&8191,Z=H>>>13,Ne=y[2]|0,X=Ne&8191,Y=Ne>>>13,ht=y[3]|0,re=ht&8191,J=ht>>>13,pt=y[4]|0,ee=pt&8191,ne=pt>>>13,Zt=y[5]|0,Ie=Zt&8191,Me=Zt>>>13,Xn=y[6]|0,Be=Xn&8191,ke=Xn>>>13,Qn=y[7]|0,_e=Qn&8191,Ve=Qn>>>13,ei=y[8]|0,Ue=ei&8191,Oe=ei>>>13,In=y[9]|0,oe=In&8191,se=In>>>13,Mn=h[0]|0,ae=Mn&8191,ce=Mn>>>13,Bn=h[1]|0,ue=Bn&8191,fe=Bn>>>13,kn=h[2]|0,le=kn&8191,de=kn>>>13,_n=h[3]|0,he=_n&8191,pe=_n>>>13,Vn=h[4]|0,ye=Vn&8191,ge=Vn>>>13,Un=h[5]|0,me=Un&8191,be=Un>>>13,On=h[6]|0,we=On&8191,ve=On>>>13,Cn=h[7]|0,xe=Cn&8191,Se=Cn>>>13,Nn=h[8]|0,Ae=Nn&8191,Ee=Nn>>>13,Ln=h[9]|0,Te=Ln&8191,Pe=Ln>>>13;d.negative=s.negative^f.negative,d.length=19,g=Math.imul(N,ae),c=Math.imul(N,ce),c=c+Math.imul(R,ae)|0,m=Math.imul(R,ce);var Br=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Br>>>26)|0,Br&=67108863,g=Math.imul($,ae),c=Math.imul($,ce),c=c+Math.imul(Z,ae)|0,m=Math.imul(Z,ce),g=g+Math.imul(N,ue)|0,c=c+Math.imul(N,fe)|0,c=c+Math.imul(R,ue)|0,m=m+Math.imul(R,fe)|0;var kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(X,ae),c=Math.imul(X,ce),c=c+Math.imul(Y,ae)|0,m=Math.imul(Y,ce),g=g+Math.imul($,ue)|0,c=c+Math.imul($,fe)|0,c=c+Math.imul(Z,ue)|0,m=m+Math.imul(Z,fe)|0,g=g+Math.imul(N,le)|0,c=c+Math.imul(N,de)|0,c=c+Math.imul(R,le)|0,m=m+Math.imul(R,de)|0;var _r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,g=Math.imul(re,ae),c=Math.imul(re,ce),c=c+Math.imul(J,ae)|0,m=Math.imul(J,ce),g=g+Math.imul(X,ue)|0,c=c+Math.imul(X,fe)|0,c=c+Math.imul(Y,ue)|0,m=m+Math.imul(Y,fe)|0,g=g+Math.imul($,le)|0,c=c+Math.imul($,de)|0,c=c+Math.imul(Z,le)|0,m=m+Math.imul(Z,de)|0,g=g+Math.imul(N,he)|0,c=c+Math.imul(N,pe)|0,c=c+Math.imul(R,he)|0,m=m+Math.imul(R,pe)|0;var Vr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,g=Math.imul(ee,ae),c=Math.imul(ee,ce),c=c+Math.imul(ne,ae)|0,m=Math.imul(ne,ce),g=g+Math.imul(re,ue)|0,c=c+Math.imul(re,fe)|0,c=c+Math.imul(J,ue)|0,m=m+Math.imul(J,fe)|0,g=g+Math.imul(X,le)|0,c=c+Math.imul(X,de)|0,c=c+Math.imul(Y,le)|0,m=m+Math.imul(Y,de)|0,g=g+Math.imul($,he)|0,c=c+Math.imul($,pe)|0,c=c+Math.imul(Z,he)|0,m=m+Math.imul(Z,pe)|0,g=g+Math.imul(N,ye)|0,c=c+Math.imul(N,ge)|0,c=c+Math.imul(R,ye)|0,m=m+Math.imul(R,ge)|0;var Ur=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,g=Math.imul(Ie,ae),c=Math.imul(Ie,ce),c=c+Math.imul(Me,ae)|0,m=Math.imul(Me,ce),g=g+Math.imul(ee,ue)|0,c=c+Math.imul(ee,fe)|0,c=c+Math.imul(ne,ue)|0,m=m+Math.imul(ne,fe)|0,g=g+Math.imul(re,le)|0,c=c+Math.imul(re,de)|0,c=c+Math.imul(J,le)|0,m=m+Math.imul(J,de)|0,g=g+Math.imul(X,he)|0,c=c+Math.imul(X,pe)|0,c=c+Math.imul(Y,he)|0,m=m+Math.imul(Y,pe)|0,g=g+Math.imul($,ye)|0,c=c+Math.imul($,ge)|0,c=c+Math.imul(Z,ye)|0,m=m+Math.imul(Z,ge)|0,g=g+Math.imul(N,me)|0,c=c+Math.imul(N,be)|0,c=c+Math.imul(R,me)|0,m=m+Math.imul(R,be)|0;var Or=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Or>>>26)|0,Or&=67108863,g=Math.imul(Be,ae),c=Math.imul(Be,ce),c=c+Math.imul(ke,ae)|0,m=Math.imul(ke,ce),g=g+Math.imul(Ie,ue)|0,c=c+Math.imul(Ie,fe)|0,c=c+Math.imul(Me,ue)|0,m=m+Math.imul(Me,fe)|0,g=g+Math.imul(ee,le)|0,c=c+Math.imul(ee,de)|0,c=c+Math.imul(ne,le)|0,m=m+Math.imul(ne,de)|0,g=g+Math.imul(re,he)|0,c=c+Math.imul(re,pe)|0,c=c+Math.imul(J,he)|0,m=m+Math.imul(J,pe)|0,g=g+Math.imul(X,ye)|0,c=c+Math.imul(X,ge)|0,c=c+Math.imul(Y,ye)|0,m=m+Math.imul(Y,ge)|0,g=g+Math.imul($,me)|0,c=c+Math.imul($,be)|0,c=c+Math.imul(Z,me)|0,m=m+Math.imul(Z,be)|0,g=g+Math.imul(N,we)|0,c=c+Math.imul(N,ve)|0,c=c+Math.imul(R,we)|0,m=m+Math.imul(R,ve)|0;var Cr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,g=Math.imul(_e,ae),c=Math.imul(_e,ce),c=c+Math.imul(Ve,ae)|0,m=Math.imul(Ve,ce),g=g+Math.imul(Be,ue)|0,c=c+Math.imul(Be,fe)|0,c=c+Math.imul(ke,ue)|0,m=m+Math.imul(ke,fe)|0,g=g+Math.imul(Ie,le)|0,c=c+Math.imul(Ie,de)|0,c=c+Math.imul(Me,le)|0,m=m+Math.imul(Me,de)|0,g=g+Math.imul(ee,he)|0,c=c+Math.imul(ee,pe)|0,c=c+Math.imul(ne,he)|0,m=m+Math.imul(ne,pe)|0,g=g+Math.imul(re,ye)|0,c=c+Math.imul(re,ge)|0,c=c+Math.imul(J,ye)|0,m=m+Math.imul(J,ge)|0,g=g+Math.imul(X,me)|0,c=c+Math.imul(X,be)|0,c=c+Math.imul(Y,me)|0,m=m+Math.imul(Y,be)|0,g=g+Math.imul($,we)|0,c=c+Math.imul($,ve)|0,c=c+Math.imul(Z,we)|0,m=m+Math.imul(Z,ve)|0,g=g+Math.imul(N,xe)|0,c=c+Math.imul(N,Se)|0,c=c+Math.imul(R,xe)|0,m=m+Math.imul(R,Se)|0;var Nr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,g=Math.imul(Ue,ae),c=Math.imul(Ue,ce),c=c+Math.imul(Oe,ae)|0,m=Math.imul(Oe,ce),g=g+Math.imul(_e,ue)|0,c=c+Math.imul(_e,fe)|0,c=c+Math.imul(Ve,ue)|0,m=m+Math.imul(Ve,fe)|0,g=g+Math.imul(Be,le)|0,c=c+Math.imul(Be,de)|0,c=c+Math.imul(ke,le)|0,m=m+Math.imul(ke,de)|0,g=g+Math.imul(Ie,he)|0,c=c+Math.imul(Ie,pe)|0,c=c+Math.imul(Me,he)|0,m=m+Math.imul(Me,pe)|0,g=g+Math.imul(ee,ye)|0,c=c+Math.imul(ee,ge)|0,c=c+Math.imul(ne,ye)|0,m=m+Math.imul(ne,ge)|0,g=g+Math.imul(re,me)|0,c=c+Math.imul(re,be)|0,c=c+Math.imul(J,me)|0,m=m+Math.imul(J,be)|0,g=g+Math.imul(X,we)|0,c=c+Math.imul(X,ve)|0,c=c+Math.imul(Y,we)|0,m=m+Math.imul(Y,ve)|0,g=g+Math.imul($,xe)|0,c=c+Math.imul($,Se)|0,c=c+Math.imul(Z,xe)|0,m=m+Math.imul(Z,Se)|0,g=g+Math.imul(N,Ae)|0,c=c+Math.imul(N,Ee)|0,c=c+Math.imul(R,Ae)|0,m=m+Math.imul(R,Ee)|0;var Lr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,g=Math.imul(oe,ae),c=Math.imul(oe,ce),c=c+Math.imul(se,ae)|0,m=Math.imul(se,ce),g=g+Math.imul(Ue,ue)|0,c=c+Math.imul(Ue,fe)|0,c=c+Math.imul(Oe,ue)|0,m=m+Math.imul(Oe,fe)|0,g=g+Math.imul(_e,le)|0,c=c+Math.imul(_e,de)|0,c=c+Math.imul(Ve,le)|0,m=m+Math.imul(Ve,de)|0,g=g+Math.imul(Be,he)|0,c=c+Math.imul(Be,pe)|0,c=c+Math.imul(ke,he)|0,m=m+Math.imul(ke,pe)|0,g=g+Math.imul(Ie,ye)|0,c=c+Math.imul(Ie,ge)|0,c=c+Math.imul(Me,ye)|0,m=m+Math.imul(Me,ge)|0,g=g+Math.imul(ee,me)|0,c=c+Math.imul(ee,be)|0,c=c+Math.imul(ne,me)|0,m=m+Math.imul(ne,be)|0,g=g+Math.imul(re,we)|0,c=c+Math.imul(re,ve)|0,c=c+Math.imul(J,we)|0,m=m+Math.imul(J,ve)|0,g=g+Math.imul(X,xe)|0,c=c+Math.imul(X,Se)|0,c=c+Math.imul(Y,xe)|0,m=m+Math.imul(Y,Se)|0,g=g+Math.imul($,Ae)|0,c=c+Math.imul($,Ee)|0,c=c+Math.imul(Z,Ae)|0,m=m+Math.imul(Z,Ee)|0,g=g+Math.imul(N,Te)|0,c=c+Math.imul(N,Pe)|0,c=c+Math.imul(R,Te)|0,m=m+Math.imul(R,Pe)|0;var Rr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,g=Math.imul(oe,ue),c=Math.imul(oe,fe),c=c+Math.imul(se,ue)|0,m=Math.imul(se,fe),g=g+Math.imul(Ue,le)|0,c=c+Math.imul(Ue,de)|0,c=c+Math.imul(Oe,le)|0,m=m+Math.imul(Oe,de)|0,g=g+Math.imul(_e,he)|0,c=c+Math.imul(_e,pe)|0,c=c+Math.imul(Ve,he)|0,m=m+Math.imul(Ve,pe)|0,g=g+Math.imul(Be,ye)|0,c=c+Math.imul(Be,ge)|0,c=c+Math.imul(ke,ye)|0,m=m+Math.imul(ke,ge)|0,g=g+Math.imul(Ie,me)|0,c=c+Math.imul(Ie,be)|0,c=c+Math.imul(Me,me)|0,m=m+Math.imul(Me,be)|0,g=g+Math.imul(ee,we)|0,c=c+Math.imul(ee,ve)|0,c=c+Math.imul(ne,we)|0,m=m+Math.imul(ne,ve)|0,g=g+Math.imul(re,xe)|0,c=c+Math.imul(re,Se)|0,c=c+Math.imul(J,xe)|0,m=m+Math.imul(J,Se)|0,g=g+Math.imul(X,Ae)|0,c=c+Math.imul(X,Ee)|0,c=c+Math.imul(Y,Ae)|0,m=m+Math.imul(Y,Ee)|0,g=g+Math.imul($,Te)|0,c=c+Math.imul($,Pe)|0,c=c+Math.imul(Z,Te)|0,m=m+Math.imul(Z,Pe)|0;var Dr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,g=Math.imul(oe,le),c=Math.imul(oe,de),c=c+Math.imul(se,le)|0,m=Math.imul(se,de),g=g+Math.imul(Ue,he)|0,c=c+Math.imul(Ue,pe)|0,c=c+Math.imul(Oe,he)|0,m=m+Math.imul(Oe,pe)|0,g=g+Math.imul(_e,ye)|0,c=c+Math.imul(_e,ge)|0,c=c+Math.imul(Ve,ye)|0,m=m+Math.imul(Ve,ge)|0,g=g+Math.imul(Be,me)|0,c=c+Math.imul(Be,be)|0,c=c+Math.imul(ke,me)|0,m=m+Math.imul(ke,be)|0,g=g+Math.imul(Ie,we)|0,c=c+Math.imul(Ie,ve)|0,c=c+Math.imul(Me,we)|0,m=m+Math.imul(Me,ve)|0,g=g+Math.imul(ee,xe)|0,c=c+Math.imul(ee,Se)|0,c=c+Math.imul(ne,xe)|0,m=m+Math.imul(ne,Se)|0,g=g+Math.imul(re,Ae)|0,c=c+Math.imul(re,Ee)|0,c=c+Math.imul(J,Ae)|0,m=m+Math.imul(J,Ee)|0,g=g+Math.imul(X,Te)|0,c=c+Math.imul(X,Pe)|0,c=c+Math.imul(Y,Te)|0,m=m+Math.imul(Y,Pe)|0;var Kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(oe,he),c=Math.imul(oe,pe),c=c+Math.imul(se,he)|0,m=Math.imul(se,pe),g=g+Math.imul(Ue,ye)|0,c=c+Math.imul(Ue,ge)|0,c=c+Math.imul(Oe,ye)|0,m=m+Math.imul(Oe,ge)|0,g=g+Math.imul(_e,me)|0,c=c+Math.imul(_e,be)|0,c=c+Math.imul(Ve,me)|0,m=m+Math.imul(Ve,be)|0,g=g+Math.imul(Be,we)|0,c=c+Math.imul(Be,ve)|0,c=c+Math.imul(ke,we)|0,m=m+Math.imul(ke,ve)|0,g=g+Math.imul(Ie,xe)|0,c=c+Math.imul(Ie,Se)|0,c=c+Math.imul(Me,xe)|0,m=m+Math.imul(Me,Se)|0,g=g+Math.imul(ee,Ae)|0,c=c+Math.imul(ee,Ee)|0,c=c+Math.imul(ne,Ae)|0,m=m+Math.imul(ne,Ee)|0,g=g+Math.imul(re,Te)|0,c=c+Math.imul(re,Pe)|0,c=c+Math.imul(J,Te)|0,m=m+Math.imul(J,Pe)|0;var qr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,g=Math.imul(oe,ye),c=Math.imul(oe,ge),c=c+Math.imul(se,ye)|0,m=Math.imul(se,ge),g=g+Math.imul(Ue,me)|0,c=c+Math.imul(Ue,be)|0,c=c+Math.imul(Oe,me)|0,m=m+Math.imul(Oe,be)|0,g=g+Math.imul(_e,we)|0,c=c+Math.imul(_e,ve)|0,c=c+Math.imul(Ve,we)|0,m=m+Math.imul(Ve,ve)|0,g=g+Math.imul(Be,xe)|0,c=c+Math.imul(Be,Se)|0,c=c+Math.imul(ke,xe)|0,m=m+Math.imul(ke,Se)|0,g=g+Math.imul(Ie,Ae)|0,c=c+Math.imul(Ie,Ee)|0,c=c+Math.imul(Me,Ae)|0,m=m+Math.imul(Me,Ee)|0,g=g+Math.imul(ee,Te)|0,c=c+Math.imul(ee,Pe)|0,c=c+Math.imul(ne,Te)|0,m=m+Math.imul(ne,Pe)|0;var Hr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(oe,me),c=Math.imul(oe,be),c=c+Math.imul(se,me)|0,m=Math.imul(se,be),g=g+Math.imul(Ue,we)|0,c=c+Math.imul(Ue,ve)|0,c=c+Math.imul(Oe,we)|0,m=m+Math.imul(Oe,ve)|0,g=g+Math.imul(_e,xe)|0,c=c+Math.imul(_e,Se)|0,c=c+Math.imul(Ve,xe)|0,m=m+Math.imul(Ve,Se)|0,g=g+Math.imul(Be,Ae)|0,c=c+Math.imul(Be,Ee)|0,c=c+Math.imul(ke,Ae)|0,m=m+Math.imul(ke,Ee)|0,g=g+Math.imul(Ie,Te)|0,c=c+Math.imul(Ie,Pe)|0,c=c+Math.imul(Me,Te)|0,m=m+Math.imul(Me,Pe)|0;var jr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,g=Math.imul(oe,we),c=Math.imul(oe,ve),c=c+Math.imul(se,we)|0,m=Math.imul(se,ve),g=g+Math.imul(Ue,xe)|0,c=c+Math.imul(Ue,Se)|0,c=c+Math.imul(Oe,xe)|0,m=m+Math.imul(Oe,Se)|0,g=g+Math.imul(_e,Ae)|0,c=c+Math.imul(_e,Ee)|0,c=c+Math.imul(Ve,Ae)|0,m=m+Math.imul(Ve,Ee)|0,g=g+Math.imul(Be,Te)|0,c=c+Math.imul(Be,Pe)|0,c=c+Math.imul(ke,Te)|0,m=m+Math.imul(ke,Pe)|0;var Wr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,g=Math.imul(oe,xe),c=Math.imul(oe,Se),c=c+Math.imul(se,xe)|0,m=Math.imul(se,Se),g=g+Math.imul(Ue,Ae)|0,c=c+Math.imul(Ue,Ee)|0,c=c+Math.imul(Oe,Ae)|0,m=m+Math.imul(Oe,Ee)|0,g=g+Math.imul(_e,Te)|0,c=c+Math.imul(_e,Pe)|0,c=c+Math.imul(Ve,Te)|0,m=m+Math.imul(Ve,Pe)|0;var $r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(oe,Ae),c=Math.imul(oe,Ee),c=c+Math.imul(se,Ae)|0,m=Math.imul(se,Ee),g=g+Math.imul(Ue,Te)|0,c=c+Math.imul(Ue,Pe)|0,c=c+Math.imul(Oe,Te)|0,m=m+Math.imul(Oe,Pe)|0;var Hi=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,g=Math.imul(oe,Te),c=Math.imul(oe,Pe),c=c+Math.imul(se,Te)|0,m=Math.imul(se,Pe);var ji=(E+g|0)+((c&8191)<<13)|0;return E=(m+(c>>>13)|0)+(ji>>>26)|0,ji&=67108863,w[0]=Br,w[1]=kr,w[2]=_r,w[3]=Vr,w[4]=Ur,w[5]=Or,w[6]=Cr,w[7]=Nr,w[8]=Lr,w[9]=Rr,w[10]=Dr,w[11]=Kr,w[12]=qr,w[13]=Hr,w[14]=jr,w[15]=Wr,w[16]=$r,w[17]=Hi,w[18]=ji,E!==0&&(w[19]=E,d.length++),d};Math.imul||(B=I);function P(v,s,f){f.negative=s.negative^v.negative,f.length=v.length+s.length;for(var d=0,y=0,h=0;h<f.length-1;h++){var w=y;y=0;for(var E=d&67108863,g=Math.min(h,s.length-1),c=Math.max(0,h-v.length+1);c<=g;c++){var m=h-c,O=v.words[m]|0,N=s.words[c]|0,R=O*N,H=R&67108863;w=w+(R/67108864|0)|0,H=H+E|0,E=H&67108863,w=w+(H>>>26)|0,y+=w>>>26,w&=67108863}f.words[h]=E,d=w,w=y}return d!==0?f.words[h]=d:f.length--,f.strip()}function _(v,s,f){var d=new V;return d.mulp(v,s,f)}i.prototype.mulTo=function(s,f){var d,y=this.length+s.length;return this.length===10&&s.length===10?d=B(this,s,f):y<63?d=I(this,s,f):y<1024?d=P(this,s,f):d=_(this,s,f),d};function V(v,s){this.x=v,this.y=s}V.prototype.makeRBT=function(s){for(var f=new Array(s),d=i.prototype._countBits(s)-1,y=0;y<s;y++)f[y]=this.revBin(y,d,s);return f},V.prototype.revBin=function(s,f,d){if(s===0||s===d-1)return s;for(var y=0,h=0;h<f;h++)y|=(s&1)<<f-h-1,s>>=1;return y},V.prototype.permute=function(s,f,d,y,h,w){for(var E=0;E<w;E++)y[E]=f[s[E]],h[E]=d[s[E]]},V.prototype.transform=function(s,f,d,y,h,w){this.permute(w,s,f,d,y,h);for(var E=1;E<h;E<<=1)for(var g=E<<1,c=Math.cos(2*Math.PI/g),m=Math.sin(2*Math.PI/g),O=0;O<h;O+=g)for(var N=c,R=m,H=0;H<E;H++){var $=d[O+H],Z=y[O+H],Ne=d[O+H+E],X=y[O+H+E],Y=N*Ne-R*X;X=N*X+R*Ne,Ne=Y,d[O+H]=$+Ne,y[O+H]=Z+X,d[O+H+E]=$-Ne,y[O+H+E]=Z-X,H!==g&&(Y=c*N-m*R,R=c*R+m*N,N=Y)}},V.prototype.guessLen13b=function(s,f){var d=Math.max(f,s)|1,y=d&1,h=0;for(d=d/2|0;d;d=d>>>1)h++;return 1<<h+1+y},V.prototype.conjugate=function(s,f,d){if(!(d<=1))for(var y=0;y<d/2;y++){var h=s[y];s[y]=s[d-y-1],s[d-y-1]=h,h=f[y],f[y]=-f[d-y-1],f[d-y-1]=-h}},V.prototype.normalize13b=function(s,f){for(var d=0,y=0;y<f/2;y++){var h=Math.round(s[2*y+1]/f)*8192+Math.round(s[2*y]/f)+d;s[y]=h&67108863,h<67108864?d=0:d=h/67108864|0}return s},V.prototype.convert13b=function(s,f,d,y){for(var h=0,w=0;w<f;w++)h=h+(s[w]|0),d[2*w]=h&8191,h=h>>>13,d[2*w+1]=h&8191,h=h>>>13;for(w=2*f;w<y;++w)d[w]=0;r(h===0),r((h&-8192)===0)},V.prototype.stub=function(s){for(var f=new Array(s),d=0;d<s;d++)f[d]=0;return f},V.prototype.mulp=function(s,f,d){var y=2*this.guessLen13b(s.length,f.length),h=this.makeRBT(y),w=this.stub(y),E=new Array(y),g=new Array(y),c=new Array(y),m=new Array(y),O=new Array(y),N=new Array(y),R=d.words;R.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(f.words,f.length,m,y),this.transform(E,w,g,c,y,h),this.transform(m,w,O,N,y,h);for(var H=0;H<y;H++){var $=g[H]*O[H]-c[H]*N[H];c[H]=g[H]*N[H]+c[H]*O[H],g[H]=$}return this.conjugate(g,c,y),this.transform(g,c,R,w,y,h),this.conjugate(R,w,y),this.normalize13b(R,y),d.negative=s.negative^f.negative,d.length=s.length+f.length,d.strip()},i.prototype.mul=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),this.mulTo(s,f)},i.prototype.mulf=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),_(this,s,f)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){r(typeof s=="number"),r(s<67108864);for(var f=0,d=0;d<this.length;d++){var y=(this.words[d]|0)*s,h=(y&67108863)+(f&67108863);f>>=26,f+=y/67108864|0,f+=h>>>26,this.words[d]=h&67108863}return f!==0&&(this.words[d]=f,this.length++),this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var f=T(s);if(f.length===0)return new i(1);for(var d=this,y=0;y<f.length&&f[y]===0;y++,d=d.sqr());if(++y<f.length)for(var h=d.sqr();y<f.length;y++,h=h.sqr())f[y]!==0&&(d=d.mul(h));return d},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=67108863>>>26-f<<26-f,h;if(f!==0){var w=0;for(h=0;h<this.length;h++){var E=this.words[h]&y,g=(this.words[h]|0)-E<<f;this.words[h]=g|w,w=E>>>26-f}w&&(this.words[h]=w,this.length++)}if(d!==0){for(h=this.length-1;h>=0;h--)this.words[h+d]=this.words[h];for(h=0;h<d;h++)this.words[h]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,f,d){r(typeof s=="number"&&s>=0);var y;f?y=(f-f%26)/26:y=0;var h=s%26,w=Math.min((s-h)/26,this.length),E=67108863^67108863>>>h<<h,g=d;if(y-=w,y=Math.max(0,y),g){for(var c=0;c<w;c++)g.words[c]=this.words[c];g.length=w}if(w!==0)if(this.length>w)for(this.length-=w,c=0;c<this.length;c++)this.words[c]=this.words[c+w];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=y);c--){var O=this.words[c]|0;this.words[c]=m<<26-h|O>>>h,m=O&E}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(s,f,d){return r(this.negative===0),this.iushrn(s,f,d)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return!1;var h=this.words[d];return!!(h&y)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var y=67108863^67108863>>>f<<f;this.words[this.length-1]&=y}return this.strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,f,d){var y=s.length+d,h;this._expand(y);var w,E=0;for(h=0;h<s.length;h++){w=(this.words[h+d]|0)+E;var g=(s.words[h]|0)*f;w-=g&67108863,E=(w>>26)-(g/67108864|0),this.words[h+d]=w&67108863}for(;h<this.length-d;h++)w=(this.words[h+d]|0)+E,E=w>>26,this.words[h+d]=w&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,h=0;h<this.length;h++)w=-(this.words[h]|0)+E,E=w>>26,this.words[h]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(s,f){var d=this.length-s.length,y=this.clone(),h=s,w=h.words[h.length-1]|0,E=this._countBits(w);d=26-E,d!==0&&(h=h.ushln(d),y.iushln(d),w=h.words[h.length-1]|0);var g=y.length-h.length,c;if(f!=="mod"){c=new i(null),c.length=g+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var O=y.clone()._ishlnsubmul(h,1,g);O.negative===0&&(y=O,c&&(c.words[g]=1));for(var N=g-1;N>=0;N--){var R=(y.words[h.length+N]|0)*67108864+(y.words[h.length+N-1]|0);for(R=Math.min(R/w|0,67108863),y._ishlnsubmul(h,R,N);y.negative!==0;)R--,y.negative=0,y._ishlnsubmul(h,1,N),y.isZero()||(y.negative^=1);c&&(c.words[N]=R)}return c&&c.strip(),y.strip(),f!=="div"&&d!==0&&y.iushrn(d),{div:c||null,mod:y}},i.prototype.divmod=function(s,f,d){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,h,w;return this.negative!==0&&s.negative===0?(w=this.neg().divmod(s,f),f!=="mod"&&(y=w.div.neg()),f!=="div"&&(h=w.mod.neg(),d&&h.negative!==0&&h.iadd(s)),{div:y,mod:h}):this.negative===0&&s.negative!==0?(w=this.divmod(s.neg(),f),f!=="mod"&&(y=w.div.neg()),{div:y,mod:w.mod}):this.negative&s.negative?(w=this.neg().divmod(s.neg(),f),f!=="div"&&(h=w.mod.neg(),d&&h.negative!==0&&h.isub(s)),{div:w.div,mod:h}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?f==="div"?{div:this.divn(s.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modn(s.words[0]))}:this._wordDiv(s,f)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var f=this.divmod(s);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(s):f.mod,y=s.ushrn(1),h=s.andln(1),w=d.cmp(y);return w<0||h===1&&w===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(s){r(s<=67108863);for(var f=(1<<26)%s,d=0,y=this.length-1;y>=0;y--)d=(f*d+(this.words[y]|0))%s;return d},i.prototype.idivn=function(s){r(s<=67108863);for(var f=0,d=this.length-1;d>=0;d--){var y=(this.words[d]|0)+f*67108864;this.words[d]=y/s|0,f=y%s}return this.strip()},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),h=new i(0),w=new i(0),E=new i(1),g=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++g;for(var c=d.clone(),m=f.clone();!f.isZero();){for(var O=0,N=1;!(f.words[0]&N)&&O<26;++O,N<<=1);if(O>0)for(f.iushrn(O);O-- >0;)(y.isOdd()||h.isOdd())&&(y.iadd(c),h.isub(m)),y.iushrn(1),h.iushrn(1);for(var R=0,H=1;!(d.words[0]&H)&&R<26;++R,H<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(c),E.isub(m)),w.iushrn(1),E.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(w),h.isub(E)):(d.isub(f),w.isub(y),E.isub(h))}return{a:w,b:E,gcd:d.iushln(g)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),h=new i(0),w=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,g=1;!(f.words[0]&g)&&E<26;++E,g<<=1);if(E>0)for(f.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);for(var c=0,m=1;!(d.words[0]&m)&&c<26;++c,m<<=1);if(c>0)for(d.iushrn(c);c-- >0;)h.isOdd()&&h.iadd(w),h.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(h)):(d.isub(f),h.isub(y))}var O;return f.cmpn(1)===0?O=y:O=h,O.cmpn(0)<0&&O.iadd(s),O},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var f=this.clone(),d=s.clone();f.negative=0,d.negative=0;for(var y=0;f.isEven()&&d.isEven();y++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var h=f.cmp(d);if(h<0){var w=f;f=d,d=w}else if(h===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(y)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var h=y,w=d;h!==0&&w<this.length;w++){var E=this.words[w]|0;E+=h,h=E>>>26,E&=67108863,this.words[w]=E}return h!==0&&(this.words[w]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var f=s<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var d;if(this.length>1)d=1;else{f&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;d=y===s?0:y<s?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var f=this.ucmp(s);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,h=s.words[d]|0;if(y!==h){y<h?f=-1:y>h&&(f=1);break}}return f},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new C(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var L={k256:null,p224:null,p192:null,p25519:null};function U(v,s){this.name=v,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},U.prototype.ireduce=function(s){var f=s,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var y=d<this.n?-1:f.ucmp(this.p);return y===0?(f.words[0]=0,f.length=1):y>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},U.prototype.split=function(s,f){s.iushrn(this.n,0,f)},U.prototype.imulK=function(s){return s.imul(this.k)};function j(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(j,U),j.prototype.split=function(s,f){for(var d=4194303,y=Math.min(s.length,9),h=0;h<y;h++)f.words[h]=s.words[h];if(f.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var w=s.words[9];for(f.words[f.length++]=w&d,h=10;h<s.length;h++){var E=s.words[h]|0;s.words[h-10]=(E&d)<<4|w>>>22,w=E}w>>>=22,s.words[h-10]=w,w===0&&s.length>10?s.length-=10:s.length-=9},j.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var f=0,d=0;d<s.length;d++){var y=s.words[d]|0;f+=y*977,s.words[d]=f&67108863,f=y*64+(f/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function K(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(K,U);function D(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(D,U);function q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,U),q.prototype.imulK=function(s){for(var f=0,d=0;d<s.length;d++){var y=(s.words[d]|0)*19+f,h=y&67108863;y>>>=26,s.words[d]=h,f=y}return f!==0&&(s.words[s.length++]=f),s},i._prime=function(s){if(L[s])return L[s];var f;if(s==="k256")f=new j;else if(s==="p224")f=new K;else if(s==="p192")f=new D;else if(s==="p25519")f=new q;else throw new Error("Unknown prime "+s);return L[s]=f,f};function C(v){if(typeof v=="string"){var s=i._prime(v);this.m=s.p,this.prime=s}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}C.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},C.prototype._verify2=function(s,f){r((s.negative|f.negative)===0,"red works only with positives"),r(s.red&&s.red===f.red,"red works only with red numbers")},C.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},C.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},C.prototype.add=function(s,f){this._verify2(s,f);var d=s.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},C.prototype.iadd=function(s,f){this._verify2(s,f);var d=s.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},C.prototype.sub=function(s,f){this._verify2(s,f);var d=s.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},C.prototype.isub=function(s,f){this._verify2(s,f);var d=s.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},C.prototype.shl=function(s,f){return this._verify1(s),this.imod(s.ushln(f))},C.prototype.imul=function(s,f){return this._verify2(s,f),this.imod(s.imul(f))},C.prototype.mul=function(s,f){return this._verify2(s,f),this.imod(s.mul(f))},C.prototype.isqr=function(s){return this.imul(s,s.clone())},C.prototype.sqr=function(s){return this.mul(s,s)},C.prototype.sqrt=function(s){if(s.isZero())return s.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(s,d)}for(var y=this.m.subn(1),h=0;!y.isZero()&&y.andln(1)===0;)h++,y.iushrn(1);r(!y.isZero());var w=new i(1).toRed(this),E=w.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,g).cmp(E)!==0;)c.redIAdd(E);for(var m=this.pow(c,y),O=this.pow(s,y.addn(1).iushrn(1)),N=this.pow(s,y),R=h;N.cmp(w)!==0;){for(var H=N,$=0;H.cmp(w)!==0;$++)H=H.redSqr();r($<R);var Z=this.pow(m,new i(1).iushln(R-$-1));O=O.redMul(Z),m=Z.redSqr(),N=N.redMul(m),R=$}return O},C.prototype.invm=function(s){var f=s._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},C.prototype.pow=function(s,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return s.clone();var d=4,y=new Array(1<<d);y[0]=new i(1).toRed(this),y[1]=s;for(var h=2;h<y.length;h++)y[h]=this.mul(y[h-1],s);var w=y[0],E=0,g=0,c=f.bitLength()%26;for(c===0&&(c=26),h=f.length-1;h>=0;h--){for(var m=f.words[h],O=c-1;O>=0;O--){var N=m>>O&1;if(w!==y[0]&&(w=this.sqr(w)),N===0&&E===0){g=0;continue}E<<=1,E|=N,g++,!(g!==d&&(h!==0||O!==0))&&(w=this.mul(w,y[E]),g=0,E=0)}c=26}return w},C.prototype.convertTo=function(s){var f=s.umod(this.m);return f===s?f.clone():f},C.prototype.convertFrom=function(s){var f=s.clone();return f.red=null,f},i.mont=function(s){return new G(s)};function G(v){C.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,C),G.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},G.prototype.convertFrom=function(s){var f=this.imod(s.mul(this.rinv));return f.red=null,f},G.prototype.imul=function(s,f){if(s.isZero()||f.isZero())return s.words[0]=0,s.length=1,s;var d=s.imul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(y).iushrn(this.shift),w=h;return h.cmp(this.m)>=0?w=h.isub(this.m):h.cmpn(0)<0&&(w=h.iadd(this.m)),w._forceRed(this)},G.prototype.mul=function(s,f){if(s.isZero()||f.isZero())return new i(0)._forceRed(this);var d=s.mul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(y).iushrn(this.shift),w=h;return h.cmp(this.m)>=0?w=h.isub(this.m):h.cmpn(0)<0&&(w=h.iadd(this.m)),w._forceRed(this)},G.prototype.invm=function(s){var f=this.imod(s._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof Xd>"u"||Xd,Mb)});var kb=W(is=>{"use strict";S();A();Object.defineProperty(is,"__esModule",{value:!0});var uo=co(),m6=ay().ec,Qd=new m6("secp256k1"),ns=Qd.curve;is.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new uo(e);if(r.ucmp(ns.n)>=0)throw new Error("couldn't export to DER format");var n=Qd.g.mul(r);return Bb(n.getX(),n.getY(),t)};is.privateKeyModInverse=function(e){var t=new uo(e);if(t.ucmp(ns.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(ns.n).toArrayLike(Buffer,"be",32)};is.signatureImport=function(e){var t=new uo(e.r);t.ucmp(ns.n)>=0&&(t=new uo(0));var r=new uo(e.s);return r.ucmp(ns.n)>=0&&(r=new uo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};is.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=Qd.keyFromPublic(e),i=new uo(t);if(i.ucmp(ns.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return Bb(o.getX(),o.getY(),r)};var Bb=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var _b=W(Pa=>{"use strict";S();A();Object.defineProperty(Pa,"__esModule",{value:!0});var{Buffer:Ta}=Wi(),b6=Ta.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),w6=Ta.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Pa.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Ta.from(r?b6:w6);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};Pa.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Pa.signatureImportLax=function(e){var t=Ta.alloc(32,0),r=Ta.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var a=e[i++];if(a&128){if(o=a-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+e[i]}if(a>n-i)return null;var u=i;if(i+=a,e[i++]!==2)return null;var l=e[i++];if(l&128){if(o=l-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(l=0;o>0;i+=1,o-=1)l=(l<<8)+e[i]}if(l>n-i)return null;var p=i;for(i+=l;a>0&&e[u]===0;a-=1,u+=1);if(a>32)return null;var x=e.slice(u,u+a);for(x.copy(t,32-x.length);l>0&&e[p]===0;l-=1,p+=1);if(l>32)return null;var b=e.slice(p,p+l);return b.copy(r,32-b.length),{r:t,s:r}}});var xu=W(ie=>{"use strict";S();A();Object.defineProperty(ie,"__esModule",{value:!0});ie.ecdhUnsafe=ie.ecdh=ie.recover=ie.verify=ie.sign=ie.signatureImportLax=ie.signatureImport=ie.signatureExport=ie.signatureNormalize=ie.publicKeyCombine=ie.publicKeyTweakMul=ie.publicKeyTweakAdd=ie.publicKeyVerify=ie.publicKeyConvert=ie.publicKeyCreate=ie.privateKeyTweakMul=ie.privateKeyTweakAdd=ie.privateKeyModInverse=ie.privateKeyNegate=ie.privateKeyImport=ie.privateKeyExport=ie.privateKeyVerify=void 0;var Rt=Ib(),vu=kb(),eh=_b();ie.privateKeyVerify=function(e){return e.length!==32?!1:Rt.privateKeyVerify(Uint8Array.from(e))};ie.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=vu.privateKeyExport(e,t);return eh.privateKeyExport(e,r,t)};ie.privateKeyImport=function(e){if(e=eh.privateKeyImport(e),e!==null&&e.length===32&&ie.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};ie.privateKeyNegate=function(e){return Buffer.from(Rt.privateKeyNegate(Uint8Array.from(e)))};ie.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(vu.privateKeyModInverse(Uint8Array.from(e)))};ie.privateKeyTweakAdd=function(e,t){return Buffer.from(Rt.privateKeyTweakAdd(Uint8Array.from(e),t))};ie.privateKeyTweakMul=function(e,t){return Buffer.from(Rt.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};ie.publicKeyCreate=function(e,t){return Buffer.from(Rt.publicKeyCreate(Uint8Array.from(e),t))};ie.publicKeyConvert=function(e,t){return Buffer.from(Rt.publicKeyConvert(Uint8Array.from(e),t))};ie.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Rt.publicKeyVerify(Uint8Array.from(e))};ie.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Rt.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};ie.publicKeyTweakMul=function(e,t,r){return Buffer.from(Rt.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};ie.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(Rt.publicKeyCombine(r,t))};ie.signatureNormalize=function(e){return Buffer.from(Rt.signatureNormalize(Uint8Array.from(e)))};ie.signatureExport=function(e){return Buffer.from(Rt.signatureExport(Uint8Array.from(e)))};ie.signatureImport=function(e){return Buffer.from(Rt.signatureImport(Uint8Array.from(e)))};ie.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=eh.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return vu.signatureImport(t)};ie.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,a,u,l,p){var x=u!=null?Buffer.from(u):null,b=l!=null?Buffer.from(l):null,T=Buffer.from("");return r.noncefn&&(T=r.noncefn(Buffer.from(o),Buffer.from(a),x,b,p)),new Uint8Array(T)})}var i=Rt.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};ie.verify=function(e,t,r){return Rt.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};ie.recover=function(e,t,r,n){return Buffer.from(Rt.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};ie.ecdh=function(e,t){return Buffer.from(Rt.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};ie.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(vu.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var th=W((YO,Vb)=>{S();A();Vb.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var Ob=W((QO,Ub)=>{S();A();var v6=th();Ub.exports=function(t){return typeof t!="string"?t:v6(t)?t.slice(2):t}});var fo=W((rC,Lb)=>{"use strict";S();A();var x6=th(),Cb=Ob();function Su(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function Nb(e){var t=e.toString(16);return"0x"+t}function S6(e){var t=Nb(e);return new Buffer(Su(t.slice(2)),"hex")}function A6(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function E6(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function T6(e){var t=new Buffer(Su(Cb(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function P6(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function I6(e){var t=new Buffer(e,"utf8");return"0x"+Su(t.toString("hex")).replace(/^0+|0+$/g,"")}function M6(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function B6(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function k6(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}Lb.exports={arrayContainsArray:E6,intToBuffer:S6,getBinarySize:A6,isHexPrefixed:x6,stripHexPrefix:Cb,padToEven:Su,intToHex:Nb,fromAscii:M6,fromUtf8:I6,toAscii:P6,toUtf8:T6,getKeys:B6,isHexString:k6}});var Au=W(wn=>{"use strict";S();A();var _6=wn&&wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wn,"__esModule",{value:!0});wn.getLength=wn.decode=wn.encode=void 0;var V6=_6(q2());function Db(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(Db(e[r]));var n=Buffer.concat(t);return Buffer.concat([Rb(n.length,192),n])}else{var i=oh(e);return i.length===1&&i[0]<128?i:Buffer.concat([Rb(i.length,128),i])}}wn.encode=Db;function rh(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function Rb(e,t){if(e<56)return Buffer.from([e+t]);var r=ih(e),n=r.length/2,i=ih(t+55+n);return Buffer.from(i+r,"hex")}function U6(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=oh(e),n=nh(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}wn.decode=U6;function O6(e){if(!e||e.length===0)return Buffer.from([]);var t=oh(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=rh(t.slice(1,n).toString("hex"),16);return n+i}wn.getLength=O6;function nh(e){var t,r,n,i,o,a=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,u===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=rh(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(u<=247){for(t=u-191,i=e.slice(1,t);i.length;)o=nh(i),a.push(o.data),i=o.remainder;return{data:a,remainder:e.slice(t)}}else{r=u-246,t=rh(e.slice(1,r).toString("hex"),16);var l=r+t;if(l>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,l),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=nh(i),a.push(o.data),i=o.remainder;return{data:a,remainder:e.slice(l)}}}function Kb(e){return e.slice(0,2)==="0x"}function C6(e){return typeof e!="string"?e:Kb(e)?e.slice(2):e}function ih(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function N6(e){return e.length%2?"0"+e:e}function L6(e){var t=ih(e);return Buffer.from(t,"hex")}function oh(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return Kb(e)?Buffer.from(N6(C6(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?L6(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(V6.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var Hb=W(mt=>{"use strict";S();A();Object.defineProperty(mt,"__esModule",{value:!0});mt.KECCAK256_RLP=mt.KECCAK256_RLP_S=mt.KECCAK256_RLP_ARRAY=mt.KECCAK256_RLP_ARRAY_S=mt.KECCAK256_NULL=mt.KECCAK256_NULL_S=mt.TWO_POW256=mt.MAX_INTEGER=void 0;var qb=co(),{Buffer:sh}=Wi();mt.MAX_INTEGER=new qb("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);mt.TWO_POW256=new qb("10000000000000000000000000000000000000000000000000000000000000000",16);mt.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";mt.KECCAK256_NULL=sh.from(mt.KECCAK256_NULL_S,"hex");mt.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";mt.KECCAK256_RLP_ARRAY=sh.from(mt.KECCAK256_RLP_ARRAY_S,"hex");mt.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";mt.KECCAK256_RLP=sh.from(mt.KECCAK256_RLP_S,"hex")});var $b=W((lC,Wb)=>{"use strict";S();A();var R6=Object.prototype.toString,D6=Function.prototype.toString,K6=/^\s*(?:function)?\*/,jb=pl()(),ah=Object.getPrototypeOf,q6=function(){if(!jb)return!1;try{return Function("return function*() {}")()}catch{}},ch;Wb.exports=function(t){if(typeof t!="function")return!1;if(K6.test(D6.call(t)))return!0;if(!jb){var r=R6.call(t);return r==="[object GeneratorFunction]"}if(!ah)return!1;if(typeof ch>"u"){var n=q6();ch=n?ah(n):!1}return ah(t)===ch}});var Gb=W((pC,zb)=>{"use strict";S();A();var H6=F2(),j6=Object.prototype.toString,Fb=Object.prototype.hasOwnProperty,W6=function(t,r,n){for(var i=0,o=t.length;i<o;i++)Fb.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},$6=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},F6=function(t,r,n){for(var i in t)Fb.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},z6=function(t,r,n){if(!H6(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),j6.call(t)==="[object Array]"?W6(t,r,i):typeof t=="string"?$6(t,r,i):F6(t,r,i)};zb.exports=z6});var fh=W((mC,Zb)=>{"use strict";S();A();var uh=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],G6=typeof globalThis>"u"?self:globalThis;Zb.exports=function(){for(var t=[],r=0;r<uh.length;r++)typeof G6[uh[r]]=="function"&&(t[t.length]=uh[r]);return t}});var Xb=W((vC,Jb)=>{"use strict";S();A();var Z6="Function.prototype.bind called on incompatible ",Y6=Object.prototype.toString,J6=Math.max,X6="[object Function]",Yb=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},Q6=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},e8=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};Jb.exports=function(t){var r=this;if(typeof r!="function"||Y6.apply(r)!==X6)throw new TypeError(Z6+r);for(var n=Q6(arguments,1),i,o=function(){if(this instanceof i){var x=r.apply(this,Yb(n,arguments));return Object(x)===x?x:this}return r.apply(t,Yb(n,arguments))},a=J6(0,r.length-n.length),u=[],l=0;l<a;l++)u[l]="$"+l;if(i=Function("binder","return function ("+e8(u,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var p=function(){};p.prototype=r.prototype,i.prototype=new p,p.prototype=null}return i}});var ew=W((AC,Qb)=>{"use strict";S();A();var t8=Xb();Qb.exports=Function.prototype.bind||t8});var Eu=W((PC,rw)=>{"use strict";S();A();var tw={foo:{}},r8=Object;rw.exports=function(){return{__proto__:tw}.foo===tw.foo&&!({__proto__:null}instanceof r8)}});var iw=W((BC,nw)=>{"use strict";S();A();var n8="Function.prototype.bind called on incompatible ",lh=Array.prototype.slice,i8=Object.prototype.toString,o8="[object Function]";nw.exports=function(t){var r=this;if(typeof r!="function"||i8.call(r)!==o8)throw new TypeError(n8+r);for(var n=lh.call(arguments,1),i,o=function(){if(this instanceof i){var x=r.apply(this,n.concat(lh.call(arguments)));return Object(x)===x?x:this}else return r.apply(t,n.concat(lh.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var p=function(){};p.prototype=r.prototype,i.prototype=new p,p.prototype=null}return i}});var sw=W((VC,ow)=>{"use strict";S();A();var s8=iw();ow.exports=Function.prototype.bind||s8});var ph=W((CC,lw)=>{"use strict";S();A();var Ke,cs=SyntaxError,fw=Function,as=TypeError,dh=function(e){try{return fw('"use strict"; return ('+e+").constructor;")()}catch{}},lo=Object.getOwnPropertyDescriptor;if(lo)try{lo({},"")}catch{lo=null}var hh=function(){throw new as},a8=lo?function(){try{return arguments.callee,hh}catch{try{return lo(arguments,"callee").get}catch{return hh}}}():hh,os=dl()(),c8=Eu()(),_t=Object.getPrototypeOf||(c8?function(e){return e.__proto__}:null),ss={},u8=typeof Uint8Array>"u"||!_t?Ke:_t(Uint8Array),ho={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":os&&_t?_t([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":ss,"%AsyncGenerator%":ss,"%AsyncGeneratorFunction%":ss,"%AsyncIteratorPrototype%":ss,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ke:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ke:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":fw,"%GeneratorFunction%":ss,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":os&&_t?_t(_t([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!os||!_t?Ke:_t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!os||!_t?Ke:_t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":os&&_t?_t(""[Symbol.iterator]()):Ke,"%Symbol%":os?Symbol:Ke,"%SyntaxError%":cs,"%ThrowTypeError%":a8,"%TypedArray%":u8,"%TypeError%":as,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet};if(_t)try{null.error}catch(e){aw=_t(_t(e)),ho["%Error.prototype%"]=aw}var aw,f8=function e(t){var r;if(t==="%AsyncFunction%")r=dh("async function () {}");else if(t==="%GeneratorFunction%")r=dh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=dh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&_t&&(r=_t(i.prototype))}return ho[t]=r,r},cw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ia=sw(),Tu=hl(),l8=Ia.call(Function.call,Array.prototype.concat),d8=Ia.call(Function.apply,Array.prototype.splice),uw=Ia.call(Function.call,String.prototype.replace),Pu=Ia.call(Function.call,String.prototype.slice),h8=Ia.call(Function.call,RegExp.prototype.exec),p8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,y8=/\\(\\)?/g,g8=function(t){var r=Pu(t,0,1),n=Pu(t,-1);if(r==="%"&&n!=="%")throw new cs("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new cs("invalid intrinsic syntax, expected opening `%`");var i=[];return uw(t,p8,function(o,a,u,l){i[i.length]=u?uw(l,y8,"$1"):a||o}),i},m8=function(t,r){var n=t,i;if(Tu(cw,n)&&(i=cw[n],n="%"+i[0]+"%"),Tu(ho,n)){var o=ho[n];if(o===ss&&(o=f8(n)),typeof o>"u"&&!r)throw new as("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new cs("intrinsic "+t+" does not exist!")};lw.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new as("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new as('"allowMissing" argument must be a boolean');if(h8(/^%?[^%]*%?$/,t)===null)throw new cs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=g8(t),i=n.length>0?n[0]:"",o=m8("%"+i+"%",r),a=o.name,u=o.value,l=!1,p=o.alias;p&&(i=p[0],d8(n,l8([0,1],p)));for(var x=1,b=!0;x<n.length;x+=1){var T=n[x],I=Pu(T,0,1),B=Pu(T,-1);if((I==='"'||I==="'"||I==="`"||B==='"'||B==="'"||B==="`")&&I!==B)throw new cs("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",Tu(ho,a))u=ho[a];else if(u!=null){if(!(T in u)){if(!r)throw new as("base intrinsic for "+t+" exists, but the property is not available.");return}if(lo&&x+1>=n.length){var P=lo(u,T);b=!!P,b&&"get"in P&&!("originalValue"in P.get)?u=P.get:u=u[T]}else b=Tu(u,T),u=u[T];b&&!l&&(ho[a]=u)}}return u}});var hw=W((RC,dw)=>{"use strict";S();A();var b8="Function.prototype.bind called on incompatible ",yh=Array.prototype.slice,w8=Object.prototype.toString,v8="[object Function]";dw.exports=function(t){var r=this;if(typeof r!="function"||w8.call(r)!==v8)throw new TypeError(b8+r);for(var n=yh.call(arguments,1),i,o=function(){if(this instanceof i){var x=r.apply(this,n.concat(yh.call(arguments)));return Object(x)===x?x:this}else return r.apply(t,n.concat(yh.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var p=function(){};p.prototype=r.prototype,i.prototype=new p,p.prototype=null}return i}});var yw=W((qC,pw)=>{"use strict";S();A();var x8=hw();pw.exports=Function.prototype.bind||x8});var xw=W((WC,vw)=>{"use strict";S();A();var qe,ds=SyntaxError,ww=Function,ls=TypeError,gh=function(e){try{return ww('"use strict"; return ('+e+").constructor;")()}catch{}},po=Object.getOwnPropertyDescriptor;if(po)try{po({},"")}catch{po=null}var mh=function(){throw new ls},S8=po?function(){try{return arguments.callee,mh}catch{try{return po(arguments,"callee").get}catch{return mh}}}():mh,us=dl()(),A8=Eu()(),Vt=Object.getPrototypeOf||(A8?function(e){return e.__proto__}:null),fs={},E8=typeof Uint8Array>"u"||!Vt?qe:Vt(Uint8Array),yo={"%AggregateError%":typeof AggregateError>"u"?qe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?qe:ArrayBuffer,"%ArrayIteratorPrototype%":us&&Vt?Vt([][Symbol.iterator]()):qe,"%AsyncFromSyncIteratorPrototype%":qe,"%AsyncFunction%":fs,"%AsyncGenerator%":fs,"%AsyncGeneratorFunction%":fs,"%AsyncIteratorPrototype%":fs,"%Atomics%":typeof Atomics>"u"?qe:Atomics,"%BigInt%":typeof BigInt>"u"?qe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?qe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?qe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?qe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?qe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?qe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?qe:FinalizationRegistry,"%Function%":ww,"%GeneratorFunction%":fs,"%Int8Array%":typeof Int8Array>"u"?qe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?qe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?qe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":us&&Vt?Vt(Vt([][Symbol.iterator]())):qe,"%JSON%":typeof JSON=="object"?JSON:qe,"%Map%":typeof Map>"u"?qe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!us||!Vt?qe:Vt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?qe:Promise,"%Proxy%":typeof Proxy>"u"?qe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?qe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?qe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!us||!Vt?qe:Vt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?qe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":us&&Vt?Vt(""[Symbol.iterator]()):qe,"%Symbol%":us?Symbol:qe,"%SyntaxError%":ds,"%ThrowTypeError%":S8,"%TypedArray%":E8,"%TypeError%":ls,"%Uint8Array%":typeof Uint8Array>"u"?qe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?qe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?qe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?qe:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?qe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?qe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?qe:WeakSet};if(Vt)try{null.error}catch(e){gw=Vt(Vt(e)),yo["%Error.prototype%"]=gw}var gw,T8=function e(t){var r;if(t==="%AsyncFunction%")r=gh("async function () {}");else if(t==="%GeneratorFunction%")r=gh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=gh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Vt&&(r=Vt(i.prototype))}return yo[t]=r,r},mw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ma=yw(),Iu=hl(),P8=Ma.call(Function.call,Array.prototype.concat),I8=Ma.call(Function.apply,Array.prototype.splice),bw=Ma.call(Function.call,String.prototype.replace),Mu=Ma.call(Function.call,String.prototype.slice),M8=Ma.call(Function.call,RegExp.prototype.exec),B8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k8=/\\(\\)?/g,_8=function(t){var r=Mu(t,0,1),n=Mu(t,-1);if(r==="%"&&n!=="%")throw new ds("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ds("invalid intrinsic syntax, expected opening `%`");var i=[];return bw(t,B8,function(o,a,u,l){i[i.length]=u?bw(l,k8,"$1"):a||o}),i},V8=function(t,r){var n=t,i;if(Iu(mw,n)&&(i=mw[n],n="%"+i[0]+"%"),Iu(yo,n)){var o=yo[n];if(o===fs&&(o=T8(n)),typeof o>"u"&&!r)throw new ls("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new ds("intrinsic "+t+" does not exist!")};vw.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new ls("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ls('"allowMissing" argument must be a boolean');if(M8(/^%?[^%]*%?$/,t)===null)throw new ds("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_8(t),i=n.length>0?n[0]:"",o=V8("%"+i+"%",r),a=o.name,u=o.value,l=!1,p=o.alias;p&&(i=p[0],I8(n,P8([0,1],p)));for(var x=1,b=!0;x<n.length;x+=1){var T=n[x],I=Mu(T,0,1),B=Mu(T,-1);if((I==='"'||I==="'"||I==="`"||B==='"'||B==="'"||B==="`")&&I!==B)throw new ds("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",Iu(yo,a))u=yo[a];else if(u!=null){if(!(T in u)){if(!r)throw new ls("base intrinsic for "+t+" exists, but the property is not available.");return}if(po&&x+1>=n.length){var P=po(u,T);b=!!P,b&&"get"in P&&!("originalValue"in P.get)?u=P.get:u=u[T]}else b=Iu(u,T),u=u[T];b&&!l&&(yo[a]=u)}}return u}});var Aw=W((zC,Sw)=>{"use strict";S();A();var U8="Function.prototype.bind called on incompatible ",bh=Array.prototype.slice,O8=Object.prototype.toString,C8="[object Function]";Sw.exports=function(t){var r=this;if(typeof r!="function"||O8.call(r)!==C8)throw new TypeError(U8+r);for(var n=bh.call(arguments,1),i,o=function(){if(this instanceof i){var x=r.apply(this,n.concat(bh.call(arguments)));return Object(x)===x?x:this}else return r.apply(t,n.concat(bh.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],l=0;l<a;l++)u.push("$"+l);if(i=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var p=function(){};p.prototype=r.prototype,i.prototype=new p,p.prototype=null}return i}});var Tw=W((YC,Ew)=>{"use strict";S();A();var N8=Aw();Ew.exports=Function.prototype.bind||N8});var _w=W((QC,kw)=>{"use strict";S();A();var He,gs=SyntaxError,Bw=Function,ys=TypeError,wh=function(e){try{return Bw('"use strict"; return ('+e+").constructor;")()}catch{}},go=Object.getOwnPropertyDescriptor;if(go)try{go({},"")}catch{go=null}var vh=function(){throw new ys},L8=go?function(){try{return arguments.callee,vh}catch{try{return go(arguments,"callee").get}catch{return vh}}}():vh,hs=dl()(),R8=Eu()(),Ut=Object.getPrototypeOf||(R8?function(e){return e.__proto__}:null),ps={},D8=typeof Uint8Array>"u"||!Ut?He:Ut(Uint8Array),mo={"%AggregateError%":typeof AggregateError>"u"?He:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?He:ArrayBuffer,"%ArrayIteratorPrototype%":hs&&Ut?Ut([][Symbol.iterator]()):He,"%AsyncFromSyncIteratorPrototype%":He,"%AsyncFunction%":ps,"%AsyncGenerator%":ps,"%AsyncGeneratorFunction%":ps,"%AsyncIteratorPrototype%":ps,"%Atomics%":typeof Atomics>"u"?He:Atomics,"%BigInt%":typeof BigInt>"u"?He:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?He:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?He:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?He:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?He:Float32Array,"%Float64Array%":typeof Float64Array>"u"?He:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?He:FinalizationRegistry,"%Function%":Bw,"%GeneratorFunction%":ps,"%Int8Array%":typeof Int8Array>"u"?He:Int8Array,"%Int16Array%":typeof Int16Array>"u"?He:Int16Array,"%Int32Array%":typeof Int32Array>"u"?He:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hs&&Ut?Ut(Ut([][Symbol.iterator]())):He,"%JSON%":typeof JSON=="object"?JSON:He,"%Map%":typeof Map>"u"?He:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hs||!Ut?He:Ut(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?He:Promise,"%Proxy%":typeof Proxy>"u"?He:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?He:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?He:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hs||!Ut?He:Ut(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?He:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hs&&Ut?Ut(""[Symbol.iterator]()):He,"%Symbol%":hs?Symbol:He,"%SyntaxError%":gs,"%ThrowTypeError%":L8,"%TypedArray%":D8,"%TypeError%":ys,"%Uint8Array%":typeof Uint8Array>"u"?He:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?He:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?He:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?He:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?He:WeakMap,"%WeakRef%":typeof WeakRef>"u"?He:WeakRef,"%WeakSet%":typeof WeakSet>"u"?He:WeakSet};if(Ut)try{null.error}catch(e){Pw=Ut(Ut(e)),mo["%Error.prototype%"]=Pw}var Pw,K8=function e(t){var r;if(t==="%AsyncFunction%")r=wh("async function () {}");else if(t==="%GeneratorFunction%")r=wh("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=wh("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ut&&(r=Ut(i.prototype))}return mo[t]=r,r},Iw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ba=Tw(),Bu=hl(),q8=Ba.call(Function.call,Array.prototype.concat),H8=Ba.call(Function.apply,Array.prototype.splice),Mw=Ba.call(Function.call,String.prototype.replace),ku=Ba.call(Function.call,String.prototype.slice),j8=Ba.call(Function.call,RegExp.prototype.exec),W8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$8=/\\(\\)?/g,F8=function(t){var r=ku(t,0,1),n=ku(t,-1);if(r==="%"&&n!=="%")throw new gs("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new gs("invalid intrinsic syntax, expected opening `%`");var i=[];return Mw(t,W8,function(o,a,u,l){i[i.length]=u?Mw(l,$8,"$1"):a||o}),i},z8=function(t,r){var n=t,i;if(Bu(Iw,n)&&(i=Iw[n],n="%"+i[0]+"%"),Bu(mo,n)){var o=mo[n];if(o===ps&&(o=K8(n)),typeof o>"u"&&!r)throw new ys("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new gs("intrinsic "+t+" does not exist!")};kw.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new ys("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ys('"allowMissing" argument must be a boolean');if(j8(/^%?[^%]*%?$/,t)===null)throw new gs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=F8(t),i=n.length>0?n[0]:"",o=z8("%"+i+"%",r),a=o.name,u=o.value,l=!1,p=o.alias;p&&(i=p[0],H8(n,q8([0,1],p)));for(var x=1,b=!0;x<n.length;x+=1){var T=n[x],I=ku(T,0,1),B=ku(T,-1);if((I==='"'||I==="'"||I==="`"||B==='"'||B==="'"||B==="`")&&I!==B)throw new gs("property names with quotes must have matching quotes");if((T==="constructor"||!b)&&(l=!0),i+="."+T,a="%"+i+"%",Bu(mo,a))u=mo[a];else if(u!=null){if(!(T in u)){if(!r)throw new ys("base intrinsic for "+t+" exists, but the property is not available.");return}if(go&&x+1>=n.length){var P=go(u,T);b=!!P,b&&"get"in P&&!("originalValue"in P.get)?u=P.get:u=u[T]}else b=Bu(u,T),u=u[T];b&&!l&&(mo[a]=u)}}return u}});var Ow=W((rN,Uw)=>{"use strict";S();A();var G8=wy()(),xh=_w(),ka=G8&&xh("%Object.defineProperty%",!0);if(ka)try{ka({},"a",{value:1})}catch{ka=!1}var Z8=xh("%SyntaxError%"),ms=xh("%TypeError%"),Vw=vc();Uw.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new ms("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ms("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ms("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ms("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ms("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ms("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,l=!!Vw&&Vw(t,r);if(ka)ka(t,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(u||!i&&!o&&!a)t[r]=n;else throw new Z8("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Kw=W((oN,Dw)=>{"use strict";S();A();var Rw=xw(),Cw=Ow(),Y8=wy()(),Nw=vc(),Lw=Rw("%TypeError%"),J8=Rw("%Math.floor%");Dw.exports=function(t,r){if(typeof t!="function")throw new Lw("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||J8(r)!==r)throw new Lw("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&Nw){var a=Nw(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(Y8?Cw(t,"length",r,!0,!0):Cw(t,"length",r)),t}});var Ah=W((cN,_u)=>{"use strict";S();A();var Sh=ew(),bs=ph(),X8=Kw(),Q8=bs("%TypeError%"),Hw=bs("%Function.prototype.apply%"),jw=bs("%Function.prototype.call%"),Ww=bs("%Reflect.apply%",!0)||Sh.call(jw,Hw),_a=bs("%Object.defineProperty%",!0),eP=bs("%Math.max%");if(_a)try{_a({},"a",{value:1})}catch{_a=null}_u.exports=function(t){if(typeof t!="function")throw new Q8("a function is required");var r=Ww(Sh,jw,arguments);return X8(r,1+eP(0,t.length-(arguments.length-1)),!0)};var qw=function(){return Ww(Sh,Hw,arguments)};_a?_a(_u.exports,"apply",{value:qw}):_u.exports.apply=qw});var Gw=W((lN,zw)=>{"use strict";S();A();var $w=ph(),Fw=Ah(),tP=Fw($w("String.prototype.indexOf"));zw.exports=function(t,r){var n=$w(t,!!r);return typeof n=="function"&&tP(t,".prototype.")>-1?Fw(n):n}});var Qw=W((pN,Xw)=>{"use strict";S();A();var Uu=Gb(),rP=fh(),Zw=Ah(),Ph=Gw(),Vu=vc(),nP=Ph("Object.prototype.toString"),Jw=pl()(),Yw=typeof globalThis>"u"?self:globalThis,Th=rP(),Ih=Ph("String.prototype.slice"),Eh=Object.getPrototypeOf,iP=Ph("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},Ou={__proto__:null};Jw&&Vu&&Eh?Uu(Th,function(e){var t=new Yw[e];if(Symbol.toStringTag in t){var r=Eh(t),n=Vu(r,Symbol.toStringTag);if(!n){var i=Eh(r);n=Vu(i,Symbol.toStringTag)}Ou["$"+e]=Zw(n.get)}}):Uu(Th,function(e){var t=new Yw[e],r=t.slice||t.set;r&&(Ou["$"+e]=Zw(r))});var oP=function(t){var r=!1;return Uu(Ou,function(n,i){if(!r)try{"$"+n(t)===i&&(r=Ih(i,1))}catch{}}),r},sP=function(t){var r=!1;return Uu(Ou,function(n,i){if(!r)try{n(t),r=Ih(i,1)}catch{}}),r};Xw.exports=function(t){if(!t||typeof t!="object")return!1;if(!Jw){var r=Ih(nP(t),8,-1);return iP(Th,r)>-1?r:r!=="Object"?!1:sP(t)}return Vu?oP(t):null}});var tv=W((mN,ev)=>{S();A();var aP=Object.prototype.hasOwnProperty,cP=Object.prototype.toString;ev.exports=function(t,r,n){if(cP.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var a in t)aP.call(t,a)&&r.call(n,t[a],a,t)}});var nv=W((vN,rv)=>{"use strict";S();A();rv.exports=vc()});var uv=W((AN,cv)=>{"use strict";S();A();var iv=tv(),uP=fh(),Bh=W2(),fP=Bh("Object.prototype.toString"),ov=pl()(),lP=typeof globalThis>"u"?self:globalThis,sv=uP(),dP=Bh("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},hP=Bh("String.prototype.slice"),av={},Cu=nv(),Mh=Object.getPrototypeOf;ov&&Cu&&Mh&&iv(sv,function(e){var t=new lP[e];if(Symbol.toStringTag in t){var r=Mh(t),n=Cu(r,Symbol.toStringTag);if(!n){var i=Mh(r);n=Cu(i,Symbol.toStringTag)}av[e]=n.get}});var pP=function(t){var r=!1;return iv(av,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};cv.exports=function(t){if(!t||typeof t!="object")return!1;if(!ov||!(Symbol.toStringTag in t)){var r=hP(fP(t),8,-1);return dP(sv,r)>-1}return Cu?pP(t):!1}});var Av=W(Re=>{"use strict";S();A();var yP=$2(),gP=$b(),tn=Qw(),fv=uv();function ws(e){return e.call.bind(e)}var lv=typeof BigInt<"u",dv=typeof Symbol<"u",xr=ws(Object.prototype.toString),mP=ws(Number.prototype.valueOf),bP=ws(String.prototype.valueOf),wP=ws(Boolean.prototype.valueOf);lv&&(hv=ws(BigInt.prototype.valueOf));var hv;dv&&(pv=ws(Symbol.prototype.valueOf));var pv;function Ua(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}Re.isArgumentsObject=yP;Re.isGeneratorFunction=gP;Re.isTypedArray=fv;function vP(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}Re.isPromise=vP;function xP(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):fv(e)||gv(e)}Re.isArrayBufferView=xP;function SP(e){return tn(e)==="Uint8Array"}Re.isUint8Array=SP;function AP(e){return tn(e)==="Uint8ClampedArray"}Re.isUint8ClampedArray=AP;function EP(e){return tn(e)==="Uint16Array"}Re.isUint16Array=EP;function TP(e){return tn(e)==="Uint32Array"}Re.isUint32Array=TP;function PP(e){return tn(e)==="Int8Array"}Re.isInt8Array=PP;function IP(e){return tn(e)==="Int16Array"}Re.isInt16Array=IP;function MP(e){return tn(e)==="Int32Array"}Re.isInt32Array=MP;function BP(e){return tn(e)==="Float32Array"}Re.isFloat32Array=BP;function kP(e){return tn(e)==="Float64Array"}Re.isFloat64Array=kP;function _P(e){return tn(e)==="BigInt64Array"}Re.isBigInt64Array=_P;function VP(e){return tn(e)==="BigUint64Array"}Re.isBigUint64Array=VP;function Nu(e){return xr(e)==="[object Map]"}Nu.working=typeof Map<"u"&&Nu(new Map);function UP(e){return typeof Map>"u"?!1:Nu.working?Nu(e):e instanceof Map}Re.isMap=UP;function Lu(e){return xr(e)==="[object Set]"}Lu.working=typeof Set<"u"&&Lu(new Set);function OP(e){return typeof Set>"u"?!1:Lu.working?Lu(e):e instanceof Set}Re.isSet=OP;function Ru(e){return xr(e)==="[object WeakMap]"}Ru.working=typeof WeakMap<"u"&&Ru(new WeakMap);function CP(e){return typeof WeakMap>"u"?!1:Ru.working?Ru(e):e instanceof WeakMap}Re.isWeakMap=CP;function _h(e){return xr(e)==="[object WeakSet]"}_h.working=typeof WeakSet<"u"&&_h(new WeakSet);function NP(e){return _h(e)}Re.isWeakSet=NP;function Du(e){return xr(e)==="[object ArrayBuffer]"}Du.working=typeof ArrayBuffer<"u"&&Du(new ArrayBuffer);function yv(e){return typeof ArrayBuffer>"u"?!1:Du.working?Du(e):e instanceof ArrayBuffer}Re.isArrayBuffer=yv;function Ku(e){return xr(e)==="[object DataView]"}Ku.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ku(new DataView(new ArrayBuffer(1),0,1));function gv(e){return typeof DataView>"u"?!1:Ku.working?Ku(e):e instanceof DataView}Re.isDataView=gv;var kh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Va(e){return xr(e)==="[object SharedArrayBuffer]"}function mv(e){return typeof kh>"u"?!1:(typeof Va.working>"u"&&(Va.working=Va(new kh)),Va.working?Va(e):e instanceof kh)}Re.isSharedArrayBuffer=mv;function LP(e){return xr(e)==="[object AsyncFunction]"}Re.isAsyncFunction=LP;function RP(e){return xr(e)==="[object Map Iterator]"}Re.isMapIterator=RP;function DP(e){return xr(e)==="[object Set Iterator]"}Re.isSetIterator=DP;function KP(e){return xr(e)==="[object Generator]"}Re.isGeneratorObject=KP;function qP(e){return xr(e)==="[object WebAssembly.Module]"}Re.isWebAssemblyCompiledModule=qP;function bv(e){return Ua(e,mP)}Re.isNumberObject=bv;function wv(e){return Ua(e,bP)}Re.isStringObject=wv;function vv(e){return Ua(e,wP)}Re.isBooleanObject=vv;function xv(e){return lv&&Ua(e,hv)}Re.isBigIntObject=xv;function Sv(e){return dv&&Ua(e,pv)}Re.isSymbolObject=Sv;function HP(e){return bv(e)||wv(e)||vv(e)||xv(e)||Sv(e)}Re.isBoxedPrimitive=HP;function jP(e){return typeof Uint8Array<"u"&&(yv(e)||mv(e))}Re.isAnyArrayBuffer=jP;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(Re,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var Tv=W((BN,Ev)=>{S();A();Ev.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var xs=W(De=>{S();A();var Pv=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},WP=/%[sdj%]/g;De.format=function(e){if(!zu(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(li(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(WP,function(u){if(u==="%%")return"%";if(r>=i)return u;switch(u){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return u}}),a=n[r];r<i;a=n[++r])Fu(a)||!vs(a)?o+=" "+a:o+=" "+li(a);return o};De.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return De.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var qu={},Iv=/^$/;k.NODE_DEBUG&&(Hu=k.NODE_DEBUG,Hu=Hu.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Iv=new RegExp("^"+Hu+"$","i"));var Hu;De.debuglog=function(e){if(e=e.toUpperCase(),!qu[e])if(Iv.test(e)){var t=process.pid;qu[e]=function(){var r=De.format.apply(De,arguments);console.error("%s %d: %s",e,t,r)}}else qu[e]=function(){};return qu[e]};function li(e,t){var r={seen:[],stylize:FP};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Ch(t)?r.showHidden=t:t&&De._extend(r,t),wo(r.showHidden)&&(r.showHidden=!1),wo(r.depth)&&(r.depth=2),wo(r.colors)&&(r.colors=!1),wo(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=$P),Wu(r,e,r.depth)}De.inspect=li;li.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};li.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function $P(e,t){var r=li.styles[t];return r?"\x1B["+li.colors[r][0]+"m"+e+"\x1B["+li.colors[r][1]+"m":e}function FP(e,t){return e}function zP(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function Wu(e,t,r){if(e.customInspect&&t&&ju(t.inspect)&&t.inspect!==De.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return zu(n)||(n=Wu(e,n,r)),n}var i=GP(e,t);if(i)return i;var o=Object.keys(t),a=zP(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Ca(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Vh(t);if(o.length===0){if(ju(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(Oa(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if($u(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ca(t))return Vh(t)}var l="",p=!1,x=["{","}"];if(Mv(t)&&(p=!0,x=["[","]"]),ju(t)){var b=t.name?": "+t.name:"";l=" [Function"+b+"]"}if(Oa(t)&&(l=" "+RegExp.prototype.toString.call(t)),$u(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Ca(t)&&(l=" "+Vh(t)),o.length===0&&(!p||t.length==0))return x[0]+l+x[1];if(r<0)return Oa(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var T;return p?T=ZP(e,t,r,a,o):T=o.map(function(I){return Oh(e,t,r,a,I,p)}),e.seen.pop(),YP(T,l,x)}function GP(e,t){if(wo(t))return e.stylize("undefined","undefined");if(zu(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Bv(t))return e.stylize(""+t,"number");if(Ch(t))return e.stylize(""+t,"boolean");if(Fu(t))return e.stylize("null","null")}function Vh(e){return"["+Error.prototype.toString.call(e)+"]"}function ZP(e,t,r,n,i){for(var o=[],a=0,u=t.length;a<u;++a)kv(t,String(a))?o.push(Oh(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(l){l.match(/^\d+$/)||o.push(Oh(e,t,r,n,l,!0))}),o}function Oh(e,t,r,n,i,o){var a,u,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?l.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),kv(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(l.value)<0?(Fu(r)?u=Wu(e,l.value,null):u=Wu(e,l.value,r-1),u.indexOf(`
`)>-1&&(o?u=u.split(`
`).map(function(p){return"  "+p}).join(`
`).slice(2):u=`
`+u.split(`
`).map(function(p){return"   "+p}).join(`
`))):u=e.stylize("[Circular]","special")),wo(a)){if(o&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function YP(e,t,r){var n=0,i=e.reduce(function(o,a){return n++,a.indexOf(`
`)>=0&&n++,o+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}De.types=Av();function Mv(e){return Array.isArray(e)}De.isArray=Mv;function Ch(e){return typeof e=="boolean"}De.isBoolean=Ch;function Fu(e){return e===null}De.isNull=Fu;function JP(e){return e==null}De.isNullOrUndefined=JP;function Bv(e){return typeof e=="number"}De.isNumber=Bv;function zu(e){return typeof e=="string"}De.isString=zu;function XP(e){return typeof e=="symbol"}De.isSymbol=XP;function wo(e){return e===void 0}De.isUndefined=wo;function Oa(e){return vs(e)&&Nh(e)==="[object RegExp]"}De.isRegExp=Oa;De.types.isRegExp=Oa;function vs(e){return typeof e=="object"&&e!==null}De.isObject=vs;function $u(e){return vs(e)&&Nh(e)==="[object Date]"}De.isDate=$u;De.types.isDate=$u;function Ca(e){return vs(e)&&(Nh(e)==="[object Error]"||e instanceof Error)}De.isError=Ca;De.types.isNativeError=Ca;function ju(e){return typeof e=="function"}De.isFunction=ju;function QP(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}De.isPrimitive=QP;De.isBuffer=Tv();function Nh(e){return Object.prototype.toString.call(e)}function Uh(e){return e<10?"0"+e.toString(10):e.toString(10)}var eI=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function tI(){var e=new Date,t=[Uh(e.getHours()),Uh(e.getMinutes()),Uh(e.getSeconds())].join(":");return[e.getDate(),eI[e.getMonth()],t].join(" ")}De.log=function(){console.log("%s - %s",tI(),De.format.apply(De,arguments))};De.inherits=D2();De._extend=function(e,t){if(!t||!vs(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function kv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var bo=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;De.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(bo&&t[bo]){var r=t[bo];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,bo,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(l,p){n=l,i=p}),a=[],u=0;u<arguments.length;u++)a.push(arguments[u]);a.push(function(l,p){l?i(l):n(p)});try{t.apply(this,a)}catch(l){i(l)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),bo&&Object.defineProperty(r,bo,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Pv(t))};De.promisify.custom=bo;function rI(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function nI(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(u){process.nextTick(a.bind(null,null,u))},function(u){process.nextTick(rI.bind(null,u,a))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Pv(e)),t}De.callbackify=nI});var Kh=W((CN,Uv)=>{"use strict";S();A();function Ss(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ss=function(r){return typeof r}:Ss=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ss(e)}function iI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oI(e,t){return t&&(Ss(t)==="object"||typeof t=="function")?t:sI(e)}function sI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Rh(e)}function aI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dh(e,t)}function Dh(e,t){return Dh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Dh(e,t)}var Vv={},As,Lh;function Na(e,t,r){r||(r=Error);function n(o,a,u){return typeof t=="string"?t:t(o,a,u)}var i=function(o){aI(a,o);function a(u,l,p){var x;return iI(this,a),x=oI(this,Rh(a).call(this,n(u,l,p))),x.code=e,x}return a}(r);Vv[e]=i}function _v(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function cI(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function uI(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function fI(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Na("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);Na("ERR_INVALID_ARG_TYPE",function(e,t,r){As===void 0&&(As=La()),As(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&cI(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if(uI(e," argument"))i="The ".concat(e," ").concat(n," ").concat(_v(t,"type"));else{var o=fI(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(_v(t,"type"))}return i+=". Received type ".concat(Ss(r)),i},TypeError);Na("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";Lh===void 0&&(Lh=xs());var n=Lh.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);Na("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(Ss(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);Na("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];As===void 0&&(As=La()),As(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);Uv.exports.codes=Vv});var Rv=W((RN,Lv)=>{"use strict";S();A();function lI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){dI(e,i,r[i])})}return e}function dI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ov(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pI(e,t,r){return t&&Ov(e.prototype,t),r&&Ov(e,r),e}function Es(e,t){return t&&(Sr(t)==="object"||typeof t=="function")?t:qh(e)}function qh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}function Hh(e){var t=typeof Map=="function"?new Map:void 0;return Hh=function(n){if(n===null||!mI(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return Gu(n,arguments,di(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),qa(i,n)},Hh(e)}function gI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Gu(e,t,r){return gI()?Gu=Reflect.construct:Gu=function(i,o,a){var u=[null];u.push.apply(u,o);var l=Function.bind.apply(i,u),p=new l;return a&&qa(p,a.prototype),p},Gu.apply(null,arguments)}function mI(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function qa(e,t){return qa=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},qa(e,t)}function di(e){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},di(e)}function Sr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sr=function(r){return typeof r}:Sr=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sr(e)}var bI=xs(),jh=bI.inspect,wI=Kh(),vI=wI.codes.ERR_INVALID_ARG_TYPE;function Cv(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function xI(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var rn="",Ra="",Da="",Dt="",vo={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},SI=10;function Nv(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function Ka(e){return jh(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function AI(e,t,r){var n="",i="",o=0,a="",u=!1,l=Ka(e),p=l.split(`
`),x=Ka(t).split(`
`),b=0,T="";if(r==="strictEqual"&&Sr(e)==="object"&&Sr(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),p.length===1&&x.length===1&&p[0]!==x[0]){var I=p[0].length+x[0].length;if(I<=SI){if((Sr(e)!=="object"||e===null)&&(Sr(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(vo[r],`

`)+"".concat(p[0]," !== ").concat(x[0],`
`)}else if(r!=="strictEqualObject"){var B=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(I<B){for(;p[0][b]===x[0][b];)b++;b>2&&(T=`
  `.concat(xI(" ",b),"^"),b=0)}}}for(var P=p[p.length-1],_=x[x.length-1];P===_&&(b++<2?a=`
  `.concat(P).concat(a):n=P,p.pop(),x.pop(),!(p.length===0||x.length===0));)P=p[p.length-1],_=x[x.length-1];var V=Math.max(p.length,x.length);if(V===0){var L=l.split(`
`);if(L.length>30)for(L[26]="".concat(rn,"...").concat(Dt);L.length>27;)L.pop();return"".concat(vo.notIdentical,`

`).concat(L.join(`
`),`
`)}b>3&&(a=`
`.concat(rn,"...").concat(Dt).concat(a),u=!0),n!==""&&(a=`
  `.concat(n).concat(a),n="");var U=0,j=vo[r]+`
`.concat(Ra,"+ actual").concat(Dt," ").concat(Da,"- expected").concat(Dt),K=" ".concat(rn,"...").concat(Dt," Lines skipped");for(b=0;b<V;b++){var D=b-o;if(p.length<b+1)D>1&&b>2&&(D>4?(i+=`
`.concat(rn,"...").concat(Dt),u=!0):D>3&&(i+=`
  `.concat(x[b-2]),U++),i+=`
  `.concat(x[b-1]),U++),o=b,n+=`
`.concat(Da,"-").concat(Dt," ").concat(x[b]),U++;else if(x.length<b+1)D>1&&b>2&&(D>4?(i+=`
`.concat(rn,"...").concat(Dt),u=!0):D>3&&(i+=`
  `.concat(p[b-2]),U++),i+=`
  `.concat(p[b-1]),U++),o=b,i+=`
`.concat(Ra,"+").concat(Dt," ").concat(p[b]),U++;else{var q=x[b],C=p[b],G=C!==q&&(!Cv(C,",")||C.slice(0,-1)!==q);G&&Cv(q,",")&&q.slice(0,-1)===C&&(G=!1,C+=","),G?(D>1&&b>2&&(D>4?(i+=`
`.concat(rn,"...").concat(Dt),u=!0):D>3&&(i+=`
  `.concat(p[b-2]),U++),i+=`
  `.concat(p[b-1]),U++),o=b,i+=`
`.concat(Ra,"+").concat(Dt," ").concat(C),n+=`
`.concat(Da,"-").concat(Dt," ").concat(q),U+=2):(i+=n,n="",(D===1||b===0)&&(i+=`
  `.concat(C),U++))}if(U>20&&b<V-2)return"".concat(j).concat(K,`
`).concat(i,`
`).concat(rn,"...").concat(Dt).concat(n,`
`)+"".concat(rn,"...").concat(Dt)}return"".concat(j).concat(u?K:"",`
`).concat(i).concat(n).concat(a).concat(T)}var EI=function(e){yI(t,e);function t(r){var n;if(hI(this,t),Sr(r)!=="object"||r===null)throw new vI("options","Object",r);var i=r.message,o=r.operator,a=r.stackStartFn,u=r.actual,l=r.expected,p=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=Es(this,di(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(rn="\x1B[34m",Ra="\x1B[32m",Dt="\x1B[39m",Da="\x1B[31m"):(rn="",Ra="",Dt="",Da="")),Sr(u)==="object"&&u!==null&&Sr(l)==="object"&&l!==null&&"stack"in u&&u instanceof Error&&"stack"in l&&l instanceof Error&&(u=Nv(u),l=Nv(l)),o==="deepStrictEqual"||o==="strictEqual")n=Es(this,di(t).call(this,AI(u,l,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var x=vo[o],b=Ka(u).split(`
`);if(o==="notStrictEqual"&&Sr(u)==="object"&&u!==null&&(x=vo.notStrictEqualObject),b.length>30)for(b[26]="".concat(rn,"...").concat(Dt);b.length>27;)b.pop();b.length===1?n=Es(this,di(t).call(this,"".concat(x," ").concat(b[0]))):n=Es(this,di(t).call(this,"".concat(x,`

`).concat(b.join(`
`),`
`)))}else{var T=Ka(u),I="",B=vo[o];o==="notDeepEqual"||o==="notEqual"?(T="".concat(vo[o],`

`).concat(T),T.length>1024&&(T="".concat(T.slice(0,1021),"..."))):(I="".concat(Ka(l)),T.length>512&&(T="".concat(T.slice(0,509),"...")),I.length>512&&(I="".concat(I.slice(0,509),"...")),o==="deepEqual"||o==="equal"?T="".concat(B,`

`).concat(T,`

should equal

`):I=" ".concat(o," ").concat(I)),n=Es(this,di(t).call(this,"".concat(T).concat(I)))}return Error.stackTraceLimit=p,n.generatedMessage=!i,Object.defineProperty(qh(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=u,n.expected=l,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(qh(n),a),n.stack,n.name="AssertionError",Es(n)}return pI(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:jh.custom,value:function(n,i){return jh(this,lI({},i,{customInspect:!1,depth:0}))}}]),t}(Hh(Error));Lv.exports=EI});var qv=W((qN,Kv)=>{"use strict";S();A();function Dv(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),a=0,u=o.length;a<u;a++){var l=o[a],p=Object.getOwnPropertyDescriptor(i,l);p!==void 0&&p.enumerable&&(r[l]=i[l])}}return r}function TI(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:Dv})}Kv.exports={assign:Dv,polyfill:TI}});var Wh=W((WN,jv)=>{"use strict";S();A();var Hv=function(e){return e!==e};jv.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Hv(t)&&Hv(r))}});var $h=W((zN,Wv)=>{"use strict";S();A();var PI=Wh();Wv.exports=function(){return typeof Object.is=="function"?Object.is:PI}});var Fv=W((YN,$v)=>{"use strict";S();A();var II=$h(),MI=wc();$v.exports=function(){var t=II();return MI(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var Fh=W((QN,Zv)=>{"use strict";S();A();var BI=wc(),kI=by(),_I=Wh(),zv=$h(),VI=Fv(),Gv=kI(zv(),Object);BI(Gv,{getPolyfill:zv,implementation:_I,shim:VI});Zv.exports=Gv});var zh=W((rL,Yv)=>{"use strict";S();A();Yv.exports=function(t){return t!==t}});var Gh=W((oL,Jv)=>{"use strict";S();A();var UI=zh();Jv.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:UI}});var Qv=W((cL,Xv)=>{"use strict";S();A();var OI=wc(),CI=Gh();Xv.exports=function(){var t=CI();return OI(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var nx=W((lL,rx)=>{"use strict";S();A();var NI=by(),LI=wc(),RI=zh(),ex=Gh(),DI=Qv(),tx=NI(ex(),Number);LI(tx,{getPolyfill:ex,implementation:RI,shim:DI});rx.exports=tx});var Sx=W((pL,xx)=>{"use strict";S();A();function ix(e,t){return HI(e)||qI(e,t)||KI()}function KI(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function qI(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a=e[Symbol.iterator](),u;!(n=(u=a.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,o=l}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}function HI(e){if(Array.isArray(e))return e}function lr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lr=function(r){return typeof r}:lr=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lr(e)}var jI=/a/g.flags!==void 0,tf=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},ox=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},gx=Object.is?Object.is:Fh(),Qu=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},Zh=Number.isNaN?Number.isNaN:nx();function Jh(e){return e.call.bind(e)}var ja=Jh(Object.prototype.hasOwnProperty),ef=Jh(Object.prototype.propertyIsEnumerable),sx=Jh(Object.prototype.toString),Ft=xs().types,WI=Ft.isAnyArrayBuffer,$I=Ft.isArrayBufferView,ax=Ft.isDate,Zu=Ft.isMap,cx=Ft.isRegExp,Yu=Ft.isSet,FI=Ft.isNativeError,zI=Ft.isBoxedPrimitive,ux=Ft.isNumberObject,fx=Ft.isStringObject,lx=Ft.isBooleanObject,dx=Ft.isBigIntObject,GI=Ft.isSymbolObject,ZI=Ft.isFloat32Array,YI=Ft.isFloat64Array;function JI(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function Ju(e){return Object.keys(e).filter(JI).concat(Qu(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function mx(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var Xu=void 0,XI=!0,QI=!1,Yh=0,Xh=1,bx=2,wx=3;function eM(e,t){return jI?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function tM(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function rM(e,t){return e.byteLength!==t.byteLength?!1:mx(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function nM(e,t){return e.byteLength===t.byteLength&&mx(new Uint8Array(e),new Uint8Array(t))===0}function iM(e,t){return ux(e)?ux(t)&&gx(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):fx(e)?fx(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):lx(e)?lx(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):dx(e)?dx(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):GI(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function Ar(e,t,r,n){if(e===t)return e!==0?!0:r?gx(e,t):!0;if(r){if(lr(e)!=="object")return typeof e=="number"&&Zh(e)&&Zh(t);if(lr(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||lr(e)!=="object")return t===null||lr(t)!=="object"?e==t:!1;if(t===null||lr(t)!=="object")return!1}var i=sx(e),o=sx(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var a=Ju(e,Xu),u=Ju(t,Xu);return a.length!==u.length?!1:Ha(e,t,r,n,Xh,a)}if(i==="[object Object]"&&(!Zu(e)&&Zu(t)||!Yu(e)&&Yu(t)))return!1;if(ax(e)){if(!ax(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(cx(e)){if(!cx(t)||!eM(e,t))return!1}else if(FI(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if($I(e)){if(!r&&(ZI(e)||YI(e))){if(!tM(e,t))return!1}else if(!rM(e,t))return!1;var l=Ju(e,Xu),p=Ju(t,Xu);return l.length!==p.length?!1:Ha(e,t,r,n,Yh,l)}else{if(Yu(e))return!Yu(t)||e.size!==t.size?!1:Ha(e,t,r,n,bx);if(Zu(e))return!Zu(t)||e.size!==t.size?!1:Ha(e,t,r,n,wx);if(WI(e)){if(!nM(e,t))return!1}else if(zI(e)&&!iM(e,t))return!1}return Ha(e,t,r,n,Yh)}function hx(e,t){return t.filter(function(r){return ef(e,r)})}function Ha(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var u=0;u<o.length;u++)if(!ja(t,o[u]))return!1;if(r&&arguments.length===5){var l=Qu(e);if(l.length!==0){var p=0;for(u=0;u<l.length;u++){var x=l[u];if(ef(e,x)){if(!ef(t,x))return!1;o.push(x),p++}else if(ef(t,x))return!1}var b=Qu(t);if(l.length!==b.length&&hx(t,b).length!==p)return!1}else{var T=Qu(t);if(T.length!==0&&hx(t,T).length!==0)return!1}}if(o.length===0&&(i===Yh||i===Xh&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var I=n.val1.get(e);if(I!==void 0){var B=n.val2.get(t);if(B!==void 0)return I===B}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var P=uM(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),P}function px(e,t,r,n){for(var i=tf(e),o=0;o<i.length;o++){var a=i[o];if(Ar(t,a,r,n))return e.delete(a),!0}return!1}function vx(e){switch(lr(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(Zh(e))return!1}return!0}function oM(e,t,r){var n=vx(r);return n??(t.has(n)&&!e.has(n))}function sM(e,t,r,n,i){var o=vx(r);if(o!=null)return o;var a=t.get(o);return a===void 0&&!t.has(o)||!Ar(n,a,!1,i)?!1:!e.has(o)&&Ar(n,a,!1,i)}function aM(e,t,r,n){for(var i=null,o=tf(e),a=0;a<o.length;a++){var u=o[a];if(lr(u)==="object"&&u!==null)i===null&&(i=new Set),i.add(u);else if(!t.has(u)){if(r||!oM(e,t,u))return!1;i===null&&(i=new Set),i.add(u)}}if(i!==null){for(var l=tf(t),p=0;p<l.length;p++){var x=l[p];if(lr(x)==="object"&&x!==null){if(!px(i,x,r,n))return!1}else if(!r&&!e.has(x)&&!px(i,x,r,n))return!1}return i.size===0}return!0}function yx(e,t,r,n,i,o){for(var a=tf(e),u=0;u<a.length;u++){var l=a[u];if(Ar(r,l,i,o)&&Ar(n,t.get(l),i,o))return e.delete(l),!0}return!1}function cM(e,t,r,n){for(var i=null,o=ox(e),a=0;a<o.length;a++){var u=ix(o[a],2),l=u[0],p=u[1];if(lr(l)==="object"&&l!==null)i===null&&(i=new Set),i.add(l);else{var x=t.get(l);if(x===void 0&&!t.has(l)||!Ar(p,x,r,n)){if(r||!sM(e,t,l,p,n))return!1;i===null&&(i=new Set),i.add(l)}}}if(i!==null){for(var b=ox(t),T=0;T<b.length;T++){var I=ix(b[T],2),l=I[0],B=I[1];if(lr(l)==="object"&&l!==null){if(!yx(i,e,l,B,r,n))return!1}else if(!r&&(!e.has(l)||!Ar(e.get(l),B,!1,n))&&!yx(i,e,l,B,!1,n))return!1}return i.size===0}return!0}function uM(e,t,r,n,i,o){var a=0;if(o===bx){if(!aM(e,t,r,i))return!1}else if(o===wx){if(!cM(e,t,r,i))return!1}else if(o===Xh)for(;a<e.length;a++)if(ja(e,a)){if(!ja(t,a)||!Ar(e[a],t[a],r,i))return!1}else{if(ja(t,a))return!1;for(var u=Object.keys(e);a<u.length;a++){var l=u[a];if(!ja(t,l)||!Ar(e[l],t[l],r,i))return!1}return u.length===Object.keys(t).length}for(a=0;a<n.length;a++){var p=n[a];if(!Ar(e[p],t[p],r,i))return!1}return!0}function fM(e,t){return Ar(e,t,QI)}function lM(e,t){return Ar(e,t,XI)}xx.exports={isDeepEqual:fM,isDeepStrictEqual:lM}});var La=W((mL,Rx)=>{"use strict";S();A();function hi(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hi=function(r){return typeof r}:hi=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hi(e)}function dM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var hM=Kh(),$a=hM.codes,Ax=$a.ERR_AMBIGUOUS_ARGUMENT,Wa=$a.ERR_INVALID_ARG_TYPE,pM=$a.ERR_INVALID_ARG_VALUE,yM=$a.ERR_INVALID_RETURN_VALUE,yi=$a.ERR_MISSING_ARGS,xo=Rv(),gM=xs(),mM=gM.inspect,Ix=xs().types,bM=Ix.isPromise,Qh=Ix.isRegExp,wM=Object.assign?Object.assign:qv().assign,Mx=Object.is?Object.is:Fh(),pi,rf;function Fa(){var e=Sx();pi=e.isDeepEqual,rf=e.isDeepStrictEqual}var Ex=!1,ut=Rx.exports=ep,nf={};function nn(e){throw e.message instanceof Error?e.message:new xo(e)}function Bx(e,t,r,n,i){var o=arguments.length,a;if(o===0)a="Failed";else if(o===1)r=e,e=void 0;else{if(Ex===!1){Ex=!0;var u=process.emitWarning?process.emitWarning:console.warn.bind(console);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var l={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||Bx};r!==void 0&&(l.message=r);var p=new xo(l);throw a&&(p.message=a,p.generatedMessage=!0),p}ut.fail=Bx;ut.AssertionError=xo;function kx(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new xo({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function ep(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];kx.apply(void 0,[ep,t.length].concat(t))}ut.ok=ep;ut.equal=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");t!=r&&nn({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};ut.notEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");t==r&&nn({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};ut.deepEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");pi===void 0&&Fa(),pi(t,r)||nn({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};ut.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");pi===void 0&&Fa(),pi(t,r)&&nn({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};ut.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");pi===void 0&&Fa(),rf(t,r)||nn({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};ut.notDeepStrictEqual=_x;function _x(e,t,r){if(arguments.length<2)throw new yi("actual","expected");pi===void 0&&Fa(),rf(e,t)&&nn({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:_x})}ut.strictEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");Mx(t,r)||nn({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};ut.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new yi("actual","expected");Mx(t,r)&&nn({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var Tx=function e(t,r,n){var i=this;dM(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&Qh(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function vM(e,t,r,n,i,o){if(!(r in e)||!rf(e[r],t[r])){if(!n){var a=new Tx(e,i),u=new Tx(t,i,e),l=new xo({actual:a,expected:u,operator:"deepStrictEqual",stackStartFn:o});throw l.actual=e,l.expected=t,l.operator=o.name,l}nn({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function Vx(e,t,r,n){if(typeof t!="function"){if(Qh(t))return t.test(e);if(arguments.length===2)throw new Wa("expected",["Function","RegExp"],t);if(hi(e)!=="object"||e===null){var i=new xo({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new pM("error",t,"may not be an empty object");return pi===void 0&&Fa(),o.forEach(function(a){typeof e[a]=="string"&&Qh(t[a])&&t[a].test(e[a])||vM(e,t,a,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function Ux(e){if(typeof e!="function")throw new Wa("fn","Function",e);try{e()}catch(t){return t}return nf}function Px(e){return bM(e)||e!==null&&hi(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function Ox(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!Px(t))throw new yM("instance of Promise","promiseFn",t)}else if(Px(e))t=e;else throw new Wa("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return nf}).catch(function(r){return r})})}function Cx(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Wa("error",["Object","Error","Function","RegExp"],r);if(hi(t)==="object"&&t!==null){if(t.message===r)throw new Ax("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new Ax("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&hi(r)!=="object"&&typeof r!="function")throw new Wa("error",["Object","Error","Function","RegExp"],r);if(t===nf){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";nn({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!Vx(t,r,n,e))throw t}function Nx(e,t,r,n){if(t!==nf){if(typeof r=="string"&&(n=r,r=void 0),!r||Vx(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";nn({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}ut.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Cx.apply(void 0,[e,Ux(t)].concat(n))};ut.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Ox(t).then(function(o){return Cx.apply(void 0,[e,o].concat(n))})};ut.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Nx.apply(void 0,[e,Ux(t)].concat(n))};ut.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Ox(t).then(function(o){return Nx.apply(void 0,[e,o].concat(n))})};ut.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";hi(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=mM(t);var n=new xo({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var a=n.stack.split(`
`),u=0;u<o.length;u++){var l=a.indexOf(o[u]);if(l!==-1){a=a.slice(0,l);break}}n.stack="".concat(a.join(`
`),`
`).concat(o.join(`
`))}throw n}};function Lx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];kx.apply(void 0,[Lx,t.length].concat(t))}ut.strict=wM(Lx,ut,{equal:ut.strictEqual,deepEqual:ut.deepStrictEqual,notEqual:ut.notStrictEqual,notDeepEqual:ut.notDeepStrictEqual});ut.strict.strict=ut.strict});var Ps=W(je=>{"use strict";S();A();Object.defineProperty(je,"__esModule",{value:!0});je.baToJSON=je.addHexPrefix=je.toUnsigned=je.fromSigned=je.bufferToHex=je.bufferToInt=je.toBuffer=je.stripZeros=je.unpad=je.setLengthRight=je.setLength=je.setLengthLeft=je.zeros=void 0;var Ts=fo(),tp=co();je.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};je.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=je.zeros(t);return e=je.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};je.setLength=je.setLengthLeft;je.setLengthRight=function(e,t){return je.setLength(e,t,!0)};je.unpad=function(e){e=Ts.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};je.stripZeros=je.unpad;je.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Ts.isHexString(e))e=Buffer.from(Ts.padToEven(Ts.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Ts.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(tp.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};je.bufferToInt=function(e){return new tp(je.toBuffer(e)).toNumber()};je.bufferToHex=function(e){return e=je.toBuffer(e),"0x"+e.toString("hex")};je.fromSigned=function(e){return new tp(e).fromTwos(256)};je.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};je.addHexPrefix=function(e){return typeof e!="string"||Ts.isHexPrefixed(e)?e:"0x"+e};je.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(je.baToJSON(e[r]));return t}}});var Dx=W(rp=>{"use strict";S();A();Object.defineProperty(rp,"__esModule",{value:!0});function xM(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}rp.createHashFunction=xM});var Hx=W((PL,qx)=>{S();A();var{Transform:SM}=oy();qx.exports=e=>class Kx extends SM{constructor(r,n,i,o,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(a){o=a}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Kx(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var $x=W((BL,Wx)=>{S();A();var{Transform:AM}=oy();Wx.exports=e=>class jx extends AM{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(a){o=a}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new jx(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var zx=W((VL,Fx)=>{S();A();var EM=Hx(),TM=$x();Fx.exports=function(e){let t=EM(e),r=TM(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var Yx=W(Zx=>{S();A();var Gx=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Zx.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],p=e[7]^e[17]^e[27]^e[37]^e[47],x=e[8]^e[18]^e[28]^e[38]^e[48],b=e[9]^e[19]^e[29]^e[39]^e[49],T=x^(i<<1|o>>>31),I=b^(o<<1|i>>>31),B=e[0]^T,P=e[1]^I,_=e[10]^T,V=e[11]^I,L=e[20]^T,U=e[21]^I,j=e[30]^T,K=e[31]^I,D=e[40]^T,q=e[41]^I;T=r^(a<<1|u>>>31),I=n^(u<<1|a>>>31);let C=e[2]^T,G=e[3]^I,v=e[12]^T,s=e[13]^I,f=e[22]^T,d=e[23]^I,y=e[32]^T,h=e[33]^I,w=e[42]^T,E=e[43]^I;T=i^(l<<1|p>>>31),I=o^(p<<1|l>>>31);let g=e[4]^T,c=e[5]^I,m=e[14]^T,O=e[15]^I,N=e[24]^T,R=e[25]^I,H=e[34]^T,$=e[35]^I,Z=e[44]^T,Ne=e[45]^I;T=a^(x<<1|b>>>31),I=u^(b<<1|x>>>31);let X=e[6]^T,Y=e[7]^I,ht=e[16]^T,re=e[17]^I,J=e[26]^T,pt=e[27]^I,ee=e[36]^T,ne=e[37]^I,Zt=e[46]^T,Ie=e[47]^I;T=l^(r<<1|n>>>31),I=p^(n<<1|r>>>31);let Me=e[8]^T,Xn=e[9]^I,Be=e[18]^T,ke=e[19]^I,Qn=e[28]^T,_e=e[29]^I,Ve=e[38]^T,ei=e[39]^I,Ue=e[48]^T,Oe=e[49]^I,In=B,oe=P,se=V<<4|_>>>28,Mn=_<<4|V>>>28,ae=L<<3|U>>>29,ce=U<<3|L>>>29,Bn=K<<9|j>>>23,ue=j<<9|K>>>23,fe=D<<18|q>>>14,kn=q<<18|D>>>14,le=C<<1|G>>>31,de=G<<1|C>>>31,_n=s<<12|v>>>20,he=v<<12|s>>>20,pe=f<<10|d>>>22,Vn=d<<10|f>>>22,ye=h<<13|y>>>19,ge=y<<13|h>>>19,Un=w<<2|E>>>30,me=E<<2|w>>>30,be=c<<30|g>>>2,On=g<<30|c>>>2,we=m<<6|O>>>26,ve=O<<6|m>>>26,Cn=R<<11|N>>>21,xe=N<<11|R>>>21,Se=H<<15|$>>>17,Nn=$<<15|H>>>17,Ae=Ne<<29|Z>>>3,Ee=Z<<29|Ne>>>3,Ln=X<<28|Y>>>4,Te=Y<<28|X>>>4,Pe=re<<23|ht>>>9,Br=ht<<23|re>>>9,kr=J<<25|pt>>>7,_r=pt<<25|J>>>7,Vr=ee<<21|ne>>>11,Ur=ne<<21|ee>>>11,Or=Ie<<24|Zt>>>8,Cr=Zt<<24|Ie>>>8,Nr=Me<<27|Xn>>>5,Lr=Xn<<27|Me>>>5,Rr=Be<<20|ke>>>12,Dr=ke<<20|Be>>>12,Kr=_e<<7|Qn>>>25,qr=Qn<<7|_e>>>25,Hr=Ve<<8|ei>>>24,jr=ei<<8|Ve>>>24,Wr=Ue<<14|Oe>>>18,$r=Oe<<14|Ue>>>18;e[0]=In^~_n&Cn,e[1]=oe^~he&xe,e[10]=Ln^~Rr&ae,e[11]=Te^~Dr&ce,e[20]=le^~we&kr,e[21]=de^~ve&_r,e[30]=Nr^~se&pe,e[31]=Lr^~Mn&Vn,e[40]=be^~Pe&Kr,e[41]=On^~Br&qr,e[2]=_n^~Cn&Vr,e[3]=he^~xe&Ur,e[12]=Rr^~ae&ye,e[13]=Dr^~ce&ge,e[22]=we^~kr&Hr,e[23]=ve^~_r&jr,e[32]=se^~pe&Se,e[33]=Mn^~Vn&Nn,e[42]=Pe^~Kr&Bn,e[43]=Br^~qr&ue,e[4]=Cn^~Vr&Wr,e[5]=xe^~Ur&$r,e[14]=ae^~ye&Ae,e[15]=ce^~ge&Ee,e[24]=kr^~Hr&fe,e[25]=_r^~jr&kn,e[34]=pe^~Se&Or,e[35]=Vn^~Nn&Cr,e[44]=Kr^~Bn&Un,e[45]=qr^~ue&me,e[6]=Vr^~Wr&In,e[7]=Ur^~$r&oe,e[16]=ye^~Ae&Ln,e[17]=ge^~Ee&Te,e[26]=Hr^~fe&le,e[27]=jr^~kn&de,e[36]=Se^~Or&Nr,e[37]=Nn^~Cr&Lr,e[46]=Bn^~Un&be,e[47]=ue^~me&On,e[8]=Wr^~In&_n,e[9]=$r^~oe&he,e[18]=Ae^~Ln&Rr,e[19]=Ee^~Te&Dr,e[28]=fe^~le&we,e[29]=kn^~de&ve,e[38]=Or^~Nr&se,e[39]=Cr^~Lr&Mn,e[48]=Un^~be&Pe,e[49]=me^~On&Br,e[0]^=Gx[t*2],e[1]^=Gx[t*2+1]}}});var Xx=W((RL,Jx)=>{S();A();var of=Yx();function Is(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Is.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};Is.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(of.p1600(this.state),this.count=0)};Is.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&of.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),of.p1600(this.state),this.count=0,this.squeezing=!0};Is.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(of.p1600(this.state),this.count=0);return t};Is.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};Jx.exports=Is});var e1=W((qL,Qx)=>{S();A();Qx.exports=zx()(Xx())});var t1=W(Ms=>{"use strict";S();A();Object.defineProperty(Ms,"__esModule",{value:!0});var sf=Dx(),af=e1();Ms.keccak224=sf.createHashFunction(function(){return af("keccak224")});Ms.keccak256=sf.createHashFunction(function(){return af("keccak256")});Ms.keccak384=sf.createHashFunction(function(){return af("keccak384")});Ms.keccak512=sf.createHashFunction(function(){return af("keccak512")})});var ff=W(Qt=>{"use strict";S();A();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.rlphash=Qt.ripemd160=Qt.sha256=Qt.keccak256=Qt.keccak=void 0;var uf=t1(),PM=uf.keccak224,IM=uf.keccak384,MM=uf.keccak256,BM=uf.keccak512,r1=K2(),kM=fo(),_M=Au(),cf=Ps();Qt.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!kM.isHexString(e)?e=Buffer.from(e,"utf8"):e=cf.toBuffer(e),t||(t=256),t){case 224:return PM(e);case 256:return MM(e);case 384:return IM(e);case 512:return BM(e);default:throw new Error("Invald algorithm: keccak"+t)}};Qt.keccak256=function(e){return Qt.keccak(e)};Qt.sha256=function(e){return e=cf.toBuffer(e),r1("sha256").update(e).digest()};Qt.ripemd160=function(e,t){e=cf.toBuffer(e);var r=r1("rmd160").update(e).digest();return t===!0?cf.setLength(r,32):r};Qt.rlphash=function(e){return Qt.keccak(_M.encode(e))}});var n1=W(Le=>{"use strict";S();A();Object.defineProperty(Le,"__esModule",{value:!0});Le.importPublic=Le.privateToPublic=Le.privateToAddress=Le.publicToAddress=Le.pubToAddress=Le.isValidPublic=Le.isValidPrivate=Le.isPrecompiled=Le.generateAddress2=Le.generateAddress=Le.isValidChecksumAddress=Le.toChecksumAddress=Le.isZeroAddress=Le.isValidAddress=Le.zeroAddress=void 0;var np=La(),VM=fo(),Bs=xu(),UM=co(),on=Ps(),ks=ff();Le.zeroAddress=function(){var e=20,t=on.zeros(e);return on.bufferToHex(t)};Le.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};Le.isZeroAddress=function(e){var t=Le.zeroAddress();return t===on.addHexPrefix(e)};Le.toChecksumAddress=function(e,t){e=VM.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=ks.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};Le.isValidChecksumAddress=function(e,t){return Le.isValidAddress(e)&&Le.toChecksumAddress(e,t)===e};Le.generateAddress=function(e,t){e=on.toBuffer(e);var r=new UM(t);return r.isZero()?ks.rlphash([e,null]).slice(-20):ks.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};Le.generateAddress2=function(e,t,r){var n=on.toBuffer(e),i=on.toBuffer(t),o=on.toBuffer(r);np(n.length===20),np(i.length===32);var a=ks.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,ks.keccak256(o)]));return a.slice(-20)};Le.isPrecompiled=function(e){var t=on.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};Le.isValidPrivate=function(e){return Bs.privateKeyVerify(e)};Le.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Bs.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Bs.publicKeyVerify(e):!1};Le.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=on.toBuffer(e),t&&e.length!==64&&(e=Bs.publicKeyConvert(e,!1).slice(1)),np(e.length===64),ks.keccak(e).slice(-20)};Le.publicToAddress=Le.pubToAddress;Le.privateToAddress=function(e){return Le.publicToAddress(Le.privateToPublic(e))};Le.privateToPublic=function(e){return e=on.toBuffer(e),Bs.publicKeyCreate(e,!1).slice(1)};Le.importPublic=function(e){return e=on.toBuffer(e),e.length!==64&&(e=Bs.publicKeyConvert(e,!1).slice(1)),e}});var i1=W(er=>{"use strict";S();A();Object.defineProperty(er,"__esModule",{value:!0});er.hashPersonalMessage=er.isValidSignature=er.fromRpcSig=er.toRpcSig=er.ecrecover=er.ecsign=void 0;var ip=xu(),lf=co(),So=Ps(),OM=ff();er.ecsign=function(e,t,r){var n=ip.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};er.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([So.setLength(r,32),So.setLength(n,32)],64),a=op(t,i);if(!sp(a))throw new Error("Invalid signature v value");var u=ip.recover(e,o,a);return ip.publicKeyConvert(u,!1).slice(1)};er.toRpcSig=function(e,t,r,n){var i=op(e,n);if(!sp(i))throw new Error("Invalid signature v value");return So.bufferToHex(Buffer.concat([So.setLengthLeft(t,32),So.setLengthLeft(r,32),So.toBuffer(e)]))};er.fromRpcSig=function(e){var t=So.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};er.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new lf("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),a=new lf("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!sp(op(e,i)))return!1;var u=new lf(t),l=new lf(r);return!(u.isZero()||u.gt(a)||l.isZero()||l.gt(a)||n&&l.cmp(o)===1)};er.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return OM.keccak(Buffer.concat([t,e]))};function op(e,t){return t?e-(2*t+35):e-27}function sp(e){return e===0||e===1}});var a1=W(hf=>{"use strict";S();A();Object.defineProperty(hf,"__esModule",{value:!0});hf.defineProperties=void 0;var o1=La(),CM=fo(),s1=Au(),df=Ps();hf.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(a){o[a]="0x"+e[a].toString("hex")}),o}return df.baToJSON(e.raw)},e.serialize=function(){return s1.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function a(){return e.raw[o]}function u(l){l=df.toBuffer(l),l.toString("hex")==="00"&&!i.allowZero&&(l=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(l=df.stripZeros(l),o1(i.length>=l.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&l.length===0)&&i.length&&o1(i.length===l.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=l}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:a,set:u}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:u,get:a})}),r)if(typeof r=="string"&&(r=Buffer.from(CM.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=s1.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=df.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var za=W(Mt=>{"use strict";S();A();var NM=Mt&&Mt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_s=Mt&&Mt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&NM(t,e,r)};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.secp256k1=Mt.rlp=Mt.BN=void 0;var LM=xu();Mt.secp256k1=LM;var RM=fo(),DM=co();Mt.BN=DM;var KM=Au();Mt.rlp=KM;Object.assign(Mt,RM);_s(Hb(),Mt);_s(n1(),Mt);_s(ff(),Mt);_s(i1(),Mt);_s(Ps(),Mt);_s(a1(),Mt)});var Ga=W(tr=>{"use strict";S();A();Object.defineProperty(tr,"__esModule",{value:!0});tr.normalize=tr.recoverPublicKey=tr.concatSig=tr.legacyToBuffer=tr.isNullish=tr.padWithZeroes=void 0;var Er=za(),ap=fo();function cp(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}tr.padWithZeroes=cp;function qM(e){return e==null}tr.isNullish=qM;function HM(e){return typeof e=="string"&&!ap.isHexString(e)?Buffer.from(e):Er.toBuffer(e)}tr.legacyToBuffer=HM;function jM(e,t,r){let n=Er.fromSigned(t),i=Er.fromSigned(r),o=Er.bufferToInt(e),a=cp(Er.toUnsigned(n).toString("hex"),64),u=cp(Er.toUnsigned(i).toString("hex"),64),l=ap.stripHexPrefix(ap.intToHex(o));return Er.addHexPrefix(a.concat(u,l))}tr.concatSig=jM;function WM(e,t){let r=Er.fromRpcSig(t);return Er.ecrecover(e,r.v,r.r,r.s)}tr.recoverPublicKey=WM;function $M(e){if(e){if(typeof e=="number"){let t=Er.toBuffer(e);e=Er.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Er.addHexPrefix(e.toLowerCase())}}tr.normalize=$M});var u1=W(gi=>{"use strict";S();A();Object.defineProperty(gi,"__esModule",{value:!0});gi.extractPublicKey=gi.recoverPersonalSignature=gi.personalSign=void 0;var Vs=za(),vn=Ga();function FM({privateKey:e,data:t}){if(vn.isNullish(t))throw new Error("Missing data parameter");if(vn.isNullish(e))throw new Error("Missing privateKey parameter");let r=vn.legacyToBuffer(t),n=Vs.hashPersonalMessage(r),i=Vs.ecsign(n,e);return vn.concatSig(Vs.toBuffer(i.v),i.r,i.s)}gi.personalSign=FM;function zM({data:e,signature:t}){if(vn.isNullish(e))throw new Error("Missing data parameter");if(vn.isNullish(t))throw new Error("Missing signature parameter");let r=c1(e,t),n=Vs.publicToAddress(r);return Vs.bufferToHex(n)}gi.recoverPersonalSignature=zM;function GM({data:e,signature:t}){if(vn.isNullish(e))throw new Error("Missing data parameter");if(vn.isNullish(t))throw new Error("Missing signature parameter");return`0x${c1(e,t).toString("hex")}`}gi.extractPublicKey=GM;function c1(e,t){let r=Vs.hashPersonalMessage(vn.legacyToBuffer(e));return vn.recoverPublicKey(r,t)}});var l1=W((f1,up)=>{S();A();(function(e,t){"use strict";function r(v,s){if(!v)throw new Error(s||"Assertion failed")}function n(v,s){v.super_=s;var f=function(){};f.prototype=s.prototype,v.prototype=new f,v.prototype.constructor=v}function i(v,s,f){if(i.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((s==="le"||s==="be")&&(f=s,s=10),this._init(v||0,s||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=sy().Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,f){return s.cmp(f)>0?s:f},i.min=function(s,f){return s.cmp(f)<0?s:f},i.prototype._init=function(s,f,d){if(typeof s=="number")return this._initNumber(s,f,d);if(typeof s=="object")return this._initArray(s,f,d);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(f===16?this._parseHex(s,y,d):(this._parseBase(s,f,y),d==="le"&&this._initArray(this.toArray(),f,d)))},i.prototype._initNumber=function(s,f,d){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},i.prototype._initArray=function(s,f,d){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var h,w,E=0;if(d==="be")for(y=s.length-1,h=0;y>=0;y-=3)w=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[h]|=w<<E&67108863,this.words[h+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);else if(d==="le")for(y=0,h=0;y<s.length;y+=3)w=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[h]|=w<<E&67108863,this.words[h+1]=w>>>26-E&67108863,E+=24,E>=26&&(E-=26,h++);return this.strip()};function a(v,s){var f=v.charCodeAt(s);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function u(v,s,f){var d=a(v,f);return f-1>=s&&(d|=a(v,f-1)<<4),d}i.prototype._parseHex=function(s,f,d){this.length=Math.ceil((s.length-f)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var h=0,w=0,E;if(d==="be")for(y=s.length-1;y>=f;y-=2)E=u(s,f,y)<<h,this.words[w]|=E&67108863,h>=18?(h-=18,w+=1,this.words[w]|=E>>>26):h+=8;else{var g=s.length-f;for(y=g%2===0?f+1:f;y<s.length;y+=2)E=u(s,f,y)<<h,this.words[w]|=E&67108863,h>=18?(h-=18,w+=1,this.words[w]|=E>>>26):h+=8}this.strip()};function l(v,s,f,d){for(var y=0,h=Math.min(v.length,f),w=s;w<h;w++){var E=v.charCodeAt(w)-48;y*=d,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i.prototype._parseBase=function(s,f,d){this.words=[0],this.length=1;for(var y=0,h=1;h<=67108863;h*=f)y++;y--,h=h/f|0;for(var w=s.length-d,E=w%y,g=Math.min(w,w-E)+d,c=0,m=d;m<g;m+=y)c=l(s,m,m+y,f),this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var O=1;for(c=l(s,m,s.length,f),m=0;m<E;m++)O*=f;this.imuln(O),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(s){s.words=new Array(this.length);for(var f=0;f<this.length;f++)s.words[f]=this.words[f];s.length=this.length,s.negative=this.negative,s.red=this.red},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,f){s=s||10,f=f|0||1;var d;if(s===16||s==="hex"){d="";for(var y=0,h=0,w=0;w<this.length;w++){var E=this.words[w],g=((E<<y|h)&16777215).toString(16);h=E>>>24-y&16777215,h!==0||w!==this.length-1?d=p[6-g.length]+g+d:d=g+d,y+=2,y>=26&&(y-=26,w--)}for(h!==0&&(d=h.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(s===(s|0)&&s>=2&&s<=36){var c=x[s],m=b[s];d="";var O=this.clone();for(O.negative=0;!O.isZero();){var N=O.modn(m).toString(s);O=O.idivn(m),O.isZero()?d=N+d:d=p[c-N.length]+N+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(s,f){return r(typeof o<"u"),this.toArrayLike(o,s,f)},i.prototype.toArray=function(s,f){return this.toArrayLike(Array,s,f)},i.prototype.toArrayLike=function(s,f,d){var y=this.byteLength(),h=d||Math.max(1,y);r(y<=h,"byte array longer than desired length"),r(h>0,"Requested array length <= 0"),this.strip();var w=f==="le",E=new s(h),g,c,m=this.clone();if(w){for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[c]=g;for(;c<h;c++)E[c]=0}else{for(c=0;c<h-y;c++)E[c]=0;for(c=0;!m.isZero();c++)g=m.andln(255),m.iushrn(8),E[h-c-1]=g}return E},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var f=s,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},i.prototype._zeroBits=function(s){if(s===0)return 26;var f=s,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},i.prototype.bitLength=function(){var s=this.words[this.length-1],f=this._countBits(s);return(this.length-1)*26+f};function T(v){for(var s=new Array(v.bitLength()),f=0;f<s.length;f++){var d=f/26|0,y=f%26;s[f]=(v.words[d]&1<<y)>>>y}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(s+=d,d!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var f=0;f<s.length;f++)this.words[f]=this.words[f]|s.words[f];return this.strip()},i.prototype.ior=function(s){return r((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var f;this.length>s.length?f=s:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&s.words[d];return this.length=f.length,this.strip()},i.prototype.iand=function(s){return r((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var f,d;this.length>s.length?(f=this,d=s):(f=s,d=this);for(var y=0;y<d.length;y++)this.words[y]=f.words[y]^d.words[y];if(this!==f)for(;y<f.length;y++)this.words[y]=f.words[y];return this.length=f.length,this.strip()},i.prototype.ixor=function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){r(typeof s=="number"&&s>=0);var f=Math.ceil(s/26)|0,d=s%26;this._expand(f),d>0&&f--;for(var y=0;y<f;y++)this.words[y]=~this.words[y]&67108863;return d>0&&(this.words[y]=~this.words[y]&67108863>>26-d),this.strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,f){r(typeof s=="number"&&s>=0);var d=s/26|0,y=s%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<y:this.words[d]=this.words[d]&~(1<<y),this.strip()},i.prototype.iadd=function(s){var f;if(this.negative!==0&&s.negative===0)return this.negative=0,f=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,f=this.isub(s),s.negative=1,f._normSign();var d,y;this.length>s.length?(d=this,y=s):(d=s,y=this);for(var h=0,w=0;w<y.length;w++)f=(d.words[w]|0)+(y.words[w]|0)+h,this.words[w]=f&67108863,h=f>>>26;for(;h!==0&&w<d.length;w++)f=(d.words[w]|0)+h,this.words[w]=f&67108863,h=f>>>26;if(this.length=d.length,h!==0)this.words[this.length]=h,this.length++;else if(d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this},i.prototype.add=function(s){var f;return s.negative!==0&&this.negative===0?(s.negative=0,f=this.sub(s),s.negative^=1,f):s.negative===0&&this.negative!==0?(this.negative=0,f=s.sub(this),this.negative=1,f):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var f=this.iadd(s);return s.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var d=this.cmp(s);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,h;d>0?(y=this,h=s):(y=s,h=this);for(var w=0,E=0;E<h.length;E++)f=(y.words[E]|0)-(h.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;for(;w!==0&&E<y.length;E++)f=(y.words[E]|0)+w,w=f>>26,this.words[E]=f&67108863;if(w===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function I(v,s,f){f.negative=s.negative^v.negative;var d=v.length+s.length|0;f.length=d,d=d-1|0;var y=v.words[0]|0,h=s.words[0]|0,w=y*h,E=w&67108863,g=w/67108864|0;f.words[0]=E;for(var c=1;c<d;c++){for(var m=g>>>26,O=g&67108863,N=Math.min(c,s.length-1),R=Math.max(0,c-v.length+1);R<=N;R++){var H=c-R|0;y=v.words[H]|0,h=s.words[R]|0,w=y*h+O,m+=w/67108864|0,O=w&67108863}f.words[c]=O|0,g=m|0}return g!==0?f.words[c]=g|0:f.length--,f.strip()}var B=function(s,f,d){var y=s.words,h=f.words,w=d.words,E=0,g,c,m,O=y[0]|0,N=O&8191,R=O>>>13,H=y[1]|0,$=H&8191,Z=H>>>13,Ne=y[2]|0,X=Ne&8191,Y=Ne>>>13,ht=y[3]|0,re=ht&8191,J=ht>>>13,pt=y[4]|0,ee=pt&8191,ne=pt>>>13,Zt=y[5]|0,Ie=Zt&8191,Me=Zt>>>13,Xn=y[6]|0,Be=Xn&8191,ke=Xn>>>13,Qn=y[7]|0,_e=Qn&8191,Ve=Qn>>>13,ei=y[8]|0,Ue=ei&8191,Oe=ei>>>13,In=y[9]|0,oe=In&8191,se=In>>>13,Mn=h[0]|0,ae=Mn&8191,ce=Mn>>>13,Bn=h[1]|0,ue=Bn&8191,fe=Bn>>>13,kn=h[2]|0,le=kn&8191,de=kn>>>13,_n=h[3]|0,he=_n&8191,pe=_n>>>13,Vn=h[4]|0,ye=Vn&8191,ge=Vn>>>13,Un=h[5]|0,me=Un&8191,be=Un>>>13,On=h[6]|0,we=On&8191,ve=On>>>13,Cn=h[7]|0,xe=Cn&8191,Se=Cn>>>13,Nn=h[8]|0,Ae=Nn&8191,Ee=Nn>>>13,Ln=h[9]|0,Te=Ln&8191,Pe=Ln>>>13;d.negative=s.negative^f.negative,d.length=19,g=Math.imul(N,ae),c=Math.imul(N,ce),c=c+Math.imul(R,ae)|0,m=Math.imul(R,ce);var Br=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Br>>>26)|0,Br&=67108863,g=Math.imul($,ae),c=Math.imul($,ce),c=c+Math.imul(Z,ae)|0,m=Math.imul(Z,ce),g=g+Math.imul(N,ue)|0,c=c+Math.imul(N,fe)|0,c=c+Math.imul(R,ue)|0,m=m+Math.imul(R,fe)|0;var kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(X,ae),c=Math.imul(X,ce),c=c+Math.imul(Y,ae)|0,m=Math.imul(Y,ce),g=g+Math.imul($,ue)|0,c=c+Math.imul($,fe)|0,c=c+Math.imul(Z,ue)|0,m=m+Math.imul(Z,fe)|0,g=g+Math.imul(N,le)|0,c=c+Math.imul(N,de)|0,c=c+Math.imul(R,le)|0,m=m+Math.imul(R,de)|0;var _r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,g=Math.imul(re,ae),c=Math.imul(re,ce),c=c+Math.imul(J,ae)|0,m=Math.imul(J,ce),g=g+Math.imul(X,ue)|0,c=c+Math.imul(X,fe)|0,c=c+Math.imul(Y,ue)|0,m=m+Math.imul(Y,fe)|0,g=g+Math.imul($,le)|0,c=c+Math.imul($,de)|0,c=c+Math.imul(Z,le)|0,m=m+Math.imul(Z,de)|0,g=g+Math.imul(N,he)|0,c=c+Math.imul(N,pe)|0,c=c+Math.imul(R,he)|0,m=m+Math.imul(R,pe)|0;var Vr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,g=Math.imul(ee,ae),c=Math.imul(ee,ce),c=c+Math.imul(ne,ae)|0,m=Math.imul(ne,ce),g=g+Math.imul(re,ue)|0,c=c+Math.imul(re,fe)|0,c=c+Math.imul(J,ue)|0,m=m+Math.imul(J,fe)|0,g=g+Math.imul(X,le)|0,c=c+Math.imul(X,de)|0,c=c+Math.imul(Y,le)|0,m=m+Math.imul(Y,de)|0,g=g+Math.imul($,he)|0,c=c+Math.imul($,pe)|0,c=c+Math.imul(Z,he)|0,m=m+Math.imul(Z,pe)|0,g=g+Math.imul(N,ye)|0,c=c+Math.imul(N,ge)|0,c=c+Math.imul(R,ye)|0,m=m+Math.imul(R,ge)|0;var Ur=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,g=Math.imul(Ie,ae),c=Math.imul(Ie,ce),c=c+Math.imul(Me,ae)|0,m=Math.imul(Me,ce),g=g+Math.imul(ee,ue)|0,c=c+Math.imul(ee,fe)|0,c=c+Math.imul(ne,ue)|0,m=m+Math.imul(ne,fe)|0,g=g+Math.imul(re,le)|0,c=c+Math.imul(re,de)|0,c=c+Math.imul(J,le)|0,m=m+Math.imul(J,de)|0,g=g+Math.imul(X,he)|0,c=c+Math.imul(X,pe)|0,c=c+Math.imul(Y,he)|0,m=m+Math.imul(Y,pe)|0,g=g+Math.imul($,ye)|0,c=c+Math.imul($,ge)|0,c=c+Math.imul(Z,ye)|0,m=m+Math.imul(Z,ge)|0,g=g+Math.imul(N,me)|0,c=c+Math.imul(N,be)|0,c=c+Math.imul(R,me)|0,m=m+Math.imul(R,be)|0;var Or=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Or>>>26)|0,Or&=67108863,g=Math.imul(Be,ae),c=Math.imul(Be,ce),c=c+Math.imul(ke,ae)|0,m=Math.imul(ke,ce),g=g+Math.imul(Ie,ue)|0,c=c+Math.imul(Ie,fe)|0,c=c+Math.imul(Me,ue)|0,m=m+Math.imul(Me,fe)|0,g=g+Math.imul(ee,le)|0,c=c+Math.imul(ee,de)|0,c=c+Math.imul(ne,le)|0,m=m+Math.imul(ne,de)|0,g=g+Math.imul(re,he)|0,c=c+Math.imul(re,pe)|0,c=c+Math.imul(J,he)|0,m=m+Math.imul(J,pe)|0,g=g+Math.imul(X,ye)|0,c=c+Math.imul(X,ge)|0,c=c+Math.imul(Y,ye)|0,m=m+Math.imul(Y,ge)|0,g=g+Math.imul($,me)|0,c=c+Math.imul($,be)|0,c=c+Math.imul(Z,me)|0,m=m+Math.imul(Z,be)|0,g=g+Math.imul(N,we)|0,c=c+Math.imul(N,ve)|0,c=c+Math.imul(R,we)|0,m=m+Math.imul(R,ve)|0;var Cr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,g=Math.imul(_e,ae),c=Math.imul(_e,ce),c=c+Math.imul(Ve,ae)|0,m=Math.imul(Ve,ce),g=g+Math.imul(Be,ue)|0,c=c+Math.imul(Be,fe)|0,c=c+Math.imul(ke,ue)|0,m=m+Math.imul(ke,fe)|0,g=g+Math.imul(Ie,le)|0,c=c+Math.imul(Ie,de)|0,c=c+Math.imul(Me,le)|0,m=m+Math.imul(Me,de)|0,g=g+Math.imul(ee,he)|0,c=c+Math.imul(ee,pe)|0,c=c+Math.imul(ne,he)|0,m=m+Math.imul(ne,pe)|0,g=g+Math.imul(re,ye)|0,c=c+Math.imul(re,ge)|0,c=c+Math.imul(J,ye)|0,m=m+Math.imul(J,ge)|0,g=g+Math.imul(X,me)|0,c=c+Math.imul(X,be)|0,c=c+Math.imul(Y,me)|0,m=m+Math.imul(Y,be)|0,g=g+Math.imul($,we)|0,c=c+Math.imul($,ve)|0,c=c+Math.imul(Z,we)|0,m=m+Math.imul(Z,ve)|0,g=g+Math.imul(N,xe)|0,c=c+Math.imul(N,Se)|0,c=c+Math.imul(R,xe)|0,m=m+Math.imul(R,Se)|0;var Nr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,g=Math.imul(Ue,ae),c=Math.imul(Ue,ce),c=c+Math.imul(Oe,ae)|0,m=Math.imul(Oe,ce),g=g+Math.imul(_e,ue)|0,c=c+Math.imul(_e,fe)|0,c=c+Math.imul(Ve,ue)|0,m=m+Math.imul(Ve,fe)|0,g=g+Math.imul(Be,le)|0,c=c+Math.imul(Be,de)|0,c=c+Math.imul(ke,le)|0,m=m+Math.imul(ke,de)|0,g=g+Math.imul(Ie,he)|0,c=c+Math.imul(Ie,pe)|0,c=c+Math.imul(Me,he)|0,m=m+Math.imul(Me,pe)|0,g=g+Math.imul(ee,ye)|0,c=c+Math.imul(ee,ge)|0,c=c+Math.imul(ne,ye)|0,m=m+Math.imul(ne,ge)|0,g=g+Math.imul(re,me)|0,c=c+Math.imul(re,be)|0,c=c+Math.imul(J,me)|0,m=m+Math.imul(J,be)|0,g=g+Math.imul(X,we)|0,c=c+Math.imul(X,ve)|0,c=c+Math.imul(Y,we)|0,m=m+Math.imul(Y,ve)|0,g=g+Math.imul($,xe)|0,c=c+Math.imul($,Se)|0,c=c+Math.imul(Z,xe)|0,m=m+Math.imul(Z,Se)|0,g=g+Math.imul(N,Ae)|0,c=c+Math.imul(N,Ee)|0,c=c+Math.imul(R,Ae)|0,m=m+Math.imul(R,Ee)|0;var Lr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,g=Math.imul(oe,ae),c=Math.imul(oe,ce),c=c+Math.imul(se,ae)|0,m=Math.imul(se,ce),g=g+Math.imul(Ue,ue)|0,c=c+Math.imul(Ue,fe)|0,c=c+Math.imul(Oe,ue)|0,m=m+Math.imul(Oe,fe)|0,g=g+Math.imul(_e,le)|0,c=c+Math.imul(_e,de)|0,c=c+Math.imul(Ve,le)|0,m=m+Math.imul(Ve,de)|0,g=g+Math.imul(Be,he)|0,c=c+Math.imul(Be,pe)|0,c=c+Math.imul(ke,he)|0,m=m+Math.imul(ke,pe)|0,g=g+Math.imul(Ie,ye)|0,c=c+Math.imul(Ie,ge)|0,c=c+Math.imul(Me,ye)|0,m=m+Math.imul(Me,ge)|0,g=g+Math.imul(ee,me)|0,c=c+Math.imul(ee,be)|0,c=c+Math.imul(ne,me)|0,m=m+Math.imul(ne,be)|0,g=g+Math.imul(re,we)|0,c=c+Math.imul(re,ve)|0,c=c+Math.imul(J,we)|0,m=m+Math.imul(J,ve)|0,g=g+Math.imul(X,xe)|0,c=c+Math.imul(X,Se)|0,c=c+Math.imul(Y,xe)|0,m=m+Math.imul(Y,Se)|0,g=g+Math.imul($,Ae)|0,c=c+Math.imul($,Ee)|0,c=c+Math.imul(Z,Ae)|0,m=m+Math.imul(Z,Ee)|0,g=g+Math.imul(N,Te)|0,c=c+Math.imul(N,Pe)|0,c=c+Math.imul(R,Te)|0,m=m+Math.imul(R,Pe)|0;var Rr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,g=Math.imul(oe,ue),c=Math.imul(oe,fe),c=c+Math.imul(se,ue)|0,m=Math.imul(se,fe),g=g+Math.imul(Ue,le)|0,c=c+Math.imul(Ue,de)|0,c=c+Math.imul(Oe,le)|0,m=m+Math.imul(Oe,de)|0,g=g+Math.imul(_e,he)|0,c=c+Math.imul(_e,pe)|0,c=c+Math.imul(Ve,he)|0,m=m+Math.imul(Ve,pe)|0,g=g+Math.imul(Be,ye)|0,c=c+Math.imul(Be,ge)|0,c=c+Math.imul(ke,ye)|0,m=m+Math.imul(ke,ge)|0,g=g+Math.imul(Ie,me)|0,c=c+Math.imul(Ie,be)|0,c=c+Math.imul(Me,me)|0,m=m+Math.imul(Me,be)|0,g=g+Math.imul(ee,we)|0,c=c+Math.imul(ee,ve)|0,c=c+Math.imul(ne,we)|0,m=m+Math.imul(ne,ve)|0,g=g+Math.imul(re,xe)|0,c=c+Math.imul(re,Se)|0,c=c+Math.imul(J,xe)|0,m=m+Math.imul(J,Se)|0,g=g+Math.imul(X,Ae)|0,c=c+Math.imul(X,Ee)|0,c=c+Math.imul(Y,Ae)|0,m=m+Math.imul(Y,Ee)|0,g=g+Math.imul($,Te)|0,c=c+Math.imul($,Pe)|0,c=c+Math.imul(Z,Te)|0,m=m+Math.imul(Z,Pe)|0;var Dr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,g=Math.imul(oe,le),c=Math.imul(oe,de),c=c+Math.imul(se,le)|0,m=Math.imul(se,de),g=g+Math.imul(Ue,he)|0,c=c+Math.imul(Ue,pe)|0,c=c+Math.imul(Oe,he)|0,m=m+Math.imul(Oe,pe)|0,g=g+Math.imul(_e,ye)|0,c=c+Math.imul(_e,ge)|0,c=c+Math.imul(Ve,ye)|0,m=m+Math.imul(Ve,ge)|0,g=g+Math.imul(Be,me)|0,c=c+Math.imul(Be,be)|0,c=c+Math.imul(ke,me)|0,m=m+Math.imul(ke,be)|0,g=g+Math.imul(Ie,we)|0,c=c+Math.imul(Ie,ve)|0,c=c+Math.imul(Me,we)|0,m=m+Math.imul(Me,ve)|0,g=g+Math.imul(ee,xe)|0,c=c+Math.imul(ee,Se)|0,c=c+Math.imul(ne,xe)|0,m=m+Math.imul(ne,Se)|0,g=g+Math.imul(re,Ae)|0,c=c+Math.imul(re,Ee)|0,c=c+Math.imul(J,Ae)|0,m=m+Math.imul(J,Ee)|0,g=g+Math.imul(X,Te)|0,c=c+Math.imul(X,Pe)|0,c=c+Math.imul(Y,Te)|0,m=m+Math.imul(Y,Pe)|0;var Kr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(oe,he),c=Math.imul(oe,pe),c=c+Math.imul(se,he)|0,m=Math.imul(se,pe),g=g+Math.imul(Ue,ye)|0,c=c+Math.imul(Ue,ge)|0,c=c+Math.imul(Oe,ye)|0,m=m+Math.imul(Oe,ge)|0,g=g+Math.imul(_e,me)|0,c=c+Math.imul(_e,be)|0,c=c+Math.imul(Ve,me)|0,m=m+Math.imul(Ve,be)|0,g=g+Math.imul(Be,we)|0,c=c+Math.imul(Be,ve)|0,c=c+Math.imul(ke,we)|0,m=m+Math.imul(ke,ve)|0,g=g+Math.imul(Ie,xe)|0,c=c+Math.imul(Ie,Se)|0,c=c+Math.imul(Me,xe)|0,m=m+Math.imul(Me,Se)|0,g=g+Math.imul(ee,Ae)|0,c=c+Math.imul(ee,Ee)|0,c=c+Math.imul(ne,Ae)|0,m=m+Math.imul(ne,Ee)|0,g=g+Math.imul(re,Te)|0,c=c+Math.imul(re,Pe)|0,c=c+Math.imul(J,Te)|0,m=m+Math.imul(J,Pe)|0;var qr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,g=Math.imul(oe,ye),c=Math.imul(oe,ge),c=c+Math.imul(se,ye)|0,m=Math.imul(se,ge),g=g+Math.imul(Ue,me)|0,c=c+Math.imul(Ue,be)|0,c=c+Math.imul(Oe,me)|0,m=m+Math.imul(Oe,be)|0,g=g+Math.imul(_e,we)|0,c=c+Math.imul(_e,ve)|0,c=c+Math.imul(Ve,we)|0,m=m+Math.imul(Ve,ve)|0,g=g+Math.imul(Be,xe)|0,c=c+Math.imul(Be,Se)|0,c=c+Math.imul(ke,xe)|0,m=m+Math.imul(ke,Se)|0,g=g+Math.imul(Ie,Ae)|0,c=c+Math.imul(Ie,Ee)|0,c=c+Math.imul(Me,Ae)|0,m=m+Math.imul(Me,Ee)|0,g=g+Math.imul(ee,Te)|0,c=c+Math.imul(ee,Pe)|0,c=c+Math.imul(ne,Te)|0,m=m+Math.imul(ne,Pe)|0;var Hr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,g=Math.imul(oe,me),c=Math.imul(oe,be),c=c+Math.imul(se,me)|0,m=Math.imul(se,be),g=g+Math.imul(Ue,we)|0,c=c+Math.imul(Ue,ve)|0,c=c+Math.imul(Oe,we)|0,m=m+Math.imul(Oe,ve)|0,g=g+Math.imul(_e,xe)|0,c=c+Math.imul(_e,Se)|0,c=c+Math.imul(Ve,xe)|0,m=m+Math.imul(Ve,Se)|0,g=g+Math.imul(Be,Ae)|0,c=c+Math.imul(Be,Ee)|0,c=c+Math.imul(ke,Ae)|0,m=m+Math.imul(ke,Ee)|0,g=g+Math.imul(Ie,Te)|0,c=c+Math.imul(Ie,Pe)|0,c=c+Math.imul(Me,Te)|0,m=m+Math.imul(Me,Pe)|0;var jr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,g=Math.imul(oe,we),c=Math.imul(oe,ve),c=c+Math.imul(se,we)|0,m=Math.imul(se,ve),g=g+Math.imul(Ue,xe)|0,c=c+Math.imul(Ue,Se)|0,c=c+Math.imul(Oe,xe)|0,m=m+Math.imul(Oe,Se)|0,g=g+Math.imul(_e,Ae)|0,c=c+Math.imul(_e,Ee)|0,c=c+Math.imul(Ve,Ae)|0,m=m+Math.imul(Ve,Ee)|0,g=g+Math.imul(Be,Te)|0,c=c+Math.imul(Be,Pe)|0,c=c+Math.imul(ke,Te)|0,m=m+Math.imul(ke,Pe)|0;var Wr=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,g=Math.imul(oe,xe),c=Math.imul(oe,Se),c=c+Math.imul(se,xe)|0,m=Math.imul(se,Se),g=g+Math.imul(Ue,Ae)|0,c=c+Math.imul(Ue,Ee)|0,c=c+Math.imul(Oe,Ae)|0,m=m+Math.imul(Oe,Ee)|0,g=g+Math.imul(_e,Te)|0,c=c+Math.imul(_e,Pe)|0,c=c+Math.imul(Ve,Te)|0,m=m+Math.imul(Ve,Pe)|0;var $r=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,g=Math.imul(oe,Ae),c=Math.imul(oe,Ee),c=c+Math.imul(se,Ae)|0,m=Math.imul(se,Ee),g=g+Math.imul(Ue,Te)|0,c=c+Math.imul(Ue,Pe)|0,c=c+Math.imul(Oe,Te)|0,m=m+Math.imul(Oe,Pe)|0;var Hi=(E+g|0)+((c&8191)<<13)|0;E=(m+(c>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,g=Math.imul(oe,Te),c=Math.imul(oe,Pe),c=c+Math.imul(se,Te)|0,m=Math.imul(se,Pe);var ji=(E+g|0)+((c&8191)<<13)|0;return E=(m+(c>>>13)|0)+(ji>>>26)|0,ji&=67108863,w[0]=Br,w[1]=kr,w[2]=_r,w[3]=Vr,w[4]=Ur,w[5]=Or,w[6]=Cr,w[7]=Nr,w[8]=Lr,w[9]=Rr,w[10]=Dr,w[11]=Kr,w[12]=qr,w[13]=Hr,w[14]=jr,w[15]=Wr,w[16]=$r,w[17]=Hi,w[18]=ji,E!==0&&(w[19]=E,d.length++),d};Math.imul||(B=I);function P(v,s,f){f.negative=s.negative^v.negative,f.length=v.length+s.length;for(var d=0,y=0,h=0;h<f.length-1;h++){var w=y;y=0;for(var E=d&67108863,g=Math.min(h,s.length-1),c=Math.max(0,h-v.length+1);c<=g;c++){var m=h-c,O=v.words[m]|0,N=s.words[c]|0,R=O*N,H=R&67108863;w=w+(R/67108864|0)|0,H=H+E|0,E=H&67108863,w=w+(H>>>26)|0,y+=w>>>26,w&=67108863}f.words[h]=E,d=w,w=y}return d!==0?f.words[h]=d:f.length--,f.strip()}function _(v,s,f){var d=new V;return d.mulp(v,s,f)}i.prototype.mulTo=function(s,f){var d,y=this.length+s.length;return this.length===10&&s.length===10?d=B(this,s,f):y<63?d=I(this,s,f):y<1024?d=P(this,s,f):d=_(this,s,f),d};function V(v,s){this.x=v,this.y=s}V.prototype.makeRBT=function(s){for(var f=new Array(s),d=i.prototype._countBits(s)-1,y=0;y<s;y++)f[y]=this.revBin(y,d,s);return f},V.prototype.revBin=function(s,f,d){if(s===0||s===d-1)return s;for(var y=0,h=0;h<f;h++)y|=(s&1)<<f-h-1,s>>=1;return y},V.prototype.permute=function(s,f,d,y,h,w){for(var E=0;E<w;E++)y[E]=f[s[E]],h[E]=d[s[E]]},V.prototype.transform=function(s,f,d,y,h,w){this.permute(w,s,f,d,y,h);for(var E=1;E<h;E<<=1)for(var g=E<<1,c=Math.cos(2*Math.PI/g),m=Math.sin(2*Math.PI/g),O=0;O<h;O+=g)for(var N=c,R=m,H=0;H<E;H++){var $=d[O+H],Z=y[O+H],Ne=d[O+H+E],X=y[O+H+E],Y=N*Ne-R*X;X=N*X+R*Ne,Ne=Y,d[O+H]=$+Ne,y[O+H]=Z+X,d[O+H+E]=$-Ne,y[O+H+E]=Z-X,H!==g&&(Y=c*N-m*R,R=c*R+m*N,N=Y)}},V.prototype.guessLen13b=function(s,f){var d=Math.max(f,s)|1,y=d&1,h=0;for(d=d/2|0;d;d=d>>>1)h++;return 1<<h+1+y},V.prototype.conjugate=function(s,f,d){if(!(d<=1))for(var y=0;y<d/2;y++){var h=s[y];s[y]=s[d-y-1],s[d-y-1]=h,h=f[y],f[y]=-f[d-y-1],f[d-y-1]=-h}},V.prototype.normalize13b=function(s,f){for(var d=0,y=0;y<f/2;y++){var h=Math.round(s[2*y+1]/f)*8192+Math.round(s[2*y]/f)+d;s[y]=h&67108863,h<67108864?d=0:d=h/67108864|0}return s},V.prototype.convert13b=function(s,f,d,y){for(var h=0,w=0;w<f;w++)h=h+(s[w]|0),d[2*w]=h&8191,h=h>>>13,d[2*w+1]=h&8191,h=h>>>13;for(w=2*f;w<y;++w)d[w]=0;r(h===0),r((h&-8192)===0)},V.prototype.stub=function(s){for(var f=new Array(s),d=0;d<s;d++)f[d]=0;return f},V.prototype.mulp=function(s,f,d){var y=2*this.guessLen13b(s.length,f.length),h=this.makeRBT(y),w=this.stub(y),E=new Array(y),g=new Array(y),c=new Array(y),m=new Array(y),O=new Array(y),N=new Array(y),R=d.words;R.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(f.words,f.length,m,y),this.transform(E,w,g,c,y,h),this.transform(m,w,O,N,y,h);for(var H=0;H<y;H++){var $=g[H]*O[H]-c[H]*N[H];c[H]=g[H]*N[H]+c[H]*O[H],g[H]=$}return this.conjugate(g,c,y),this.transform(g,c,R,w,y,h),this.conjugate(R,w,y),this.normalize13b(R,y),d.negative=s.negative^f.negative,d.length=s.length+f.length,d.strip()},i.prototype.mul=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),this.mulTo(s,f)},i.prototype.mulf=function(s){var f=new i(null);return f.words=new Array(this.length+s.length),_(this,s,f)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){r(typeof s=="number"),r(s<67108864);for(var f=0,d=0;d<this.length;d++){var y=(this.words[d]|0)*s,h=(y&67108863)+(f&67108863);f>>=26,f+=y/67108864|0,f+=h>>>26,this.words[d]=h&67108863}return f!==0&&(this.words[d]=f,this.length++),this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var f=T(s);if(f.length===0)return new i(1);for(var d=this,y=0;y<f.length&&f[y]===0;y++,d=d.sqr());if(++y<f.length)for(var h=d.sqr();y<f.length;y++,h=h.sqr())f[y]!==0&&(d=d.mul(h));return d},i.prototype.iushln=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=67108863>>>26-f<<26-f,h;if(f!==0){var w=0;for(h=0;h<this.length;h++){var E=this.words[h]&y,g=(this.words[h]|0)-E<<f;this.words[h]=g|w,w=E>>>26-f}w&&(this.words[h]=w,this.length++)}if(d!==0){for(h=this.length-1;h>=0;h--)this.words[h+d]=this.words[h];for(h=0;h<d;h++)this.words[h]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(s){return r(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,f,d){r(typeof s=="number"&&s>=0);var y;f?y=(f-f%26)/26:y=0;var h=s%26,w=Math.min((s-h)/26,this.length),E=67108863^67108863>>>h<<h,g=d;if(y-=w,y=Math.max(0,y),g){for(var c=0;c<w;c++)g.words[c]=this.words[c];g.length=w}if(w!==0)if(this.length>w)for(this.length-=w,c=0;c<this.length;c++)this.words[c]=this.words[c+w];else this.words[0]=0,this.length=1;var m=0;for(c=this.length-1;c>=0&&(m!==0||c>=y);c--){var O=this.words[c]|0;this.words[c]=m<<26-h|O>>>h,m=O&E}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(s,f,d){return r(this.negative===0),this.iushrn(s,f,d)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return!1;var h=this.words[d];return!!(h&y)},i.prototype.imaskn=function(s){r(typeof s=="number"&&s>=0);var f=s%26,d=(s-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var y=67108863^67108863>>>f<<f;this.words[this.length-1]&=y}return this.strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,f,d){var y=s.length+d,h;this._expand(y);var w,E=0;for(h=0;h<s.length;h++){w=(this.words[h+d]|0)+E;var g=(s.words[h]|0)*f;w-=g&67108863,E=(w>>26)-(g/67108864|0),this.words[h+d]=w&67108863}for(;h<this.length-d;h++)w=(this.words[h+d]|0)+E,E=w>>26,this.words[h+d]=w&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,h=0;h<this.length;h++)w=-(this.words[h]|0)+E,E=w>>26,this.words[h]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(s,f){var d=this.length-s.length,y=this.clone(),h=s,w=h.words[h.length-1]|0,E=this._countBits(w);d=26-E,d!==0&&(h=h.ushln(d),y.iushln(d),w=h.words[h.length-1]|0);var g=y.length-h.length,c;if(f!=="mod"){c=new i(null),c.length=g+1,c.words=new Array(c.length);for(var m=0;m<c.length;m++)c.words[m]=0}var O=y.clone()._ishlnsubmul(h,1,g);O.negative===0&&(y=O,c&&(c.words[g]=1));for(var N=g-1;N>=0;N--){var R=(y.words[h.length+N]|0)*67108864+(y.words[h.length+N-1]|0);for(R=Math.min(R/w|0,67108863),y._ishlnsubmul(h,R,N);y.negative!==0;)R--,y.negative=0,y._ishlnsubmul(h,1,N),y.isZero()||(y.negative^=1);c&&(c.words[N]=R)}return c&&c.strip(),y.strip(),f!=="div"&&d!==0&&y.iushrn(d),{div:c||null,mod:y}},i.prototype.divmod=function(s,f,d){if(r(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var y,h,w;return this.negative!==0&&s.negative===0?(w=this.neg().divmod(s,f),f!=="mod"&&(y=w.div.neg()),f!=="div"&&(h=w.mod.neg(),d&&h.negative!==0&&h.iadd(s)),{div:y,mod:h}):this.negative===0&&s.negative!==0?(w=this.divmod(s.neg(),f),f!=="mod"&&(y=w.div.neg()),{div:y,mod:w.mod}):this.negative&s.negative?(w=this.neg().divmod(s.neg(),f),f!=="div"&&(h=w.mod.neg(),d&&h.negative!==0&&h.isub(s)),{div:w.div,mod:h}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?f==="div"?{div:this.divn(s.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modn(s.words[0]))}:this._wordDiv(s,f)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var f=this.divmod(s);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(s):f.mod,y=s.ushrn(1),h=s.andln(1),w=d.cmp(y);return w<0||h===1&&w===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modn=function(s){r(s<=67108863);for(var f=(1<<26)%s,d=0,y=this.length-1;y>=0;y--)d=(f*d+(this.words[y]|0))%s;return d},i.prototype.idivn=function(s){r(s<=67108863);for(var f=0,d=this.length-1;d>=0;d--){var y=(this.words[d]|0)+f*67108864;this.words[d]=y/s|0,f=y%s}return this.strip()},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),h=new i(0),w=new i(0),E=new i(1),g=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++g;for(var c=d.clone(),m=f.clone();!f.isZero();){for(var O=0,N=1;!(f.words[0]&N)&&O<26;++O,N<<=1);if(O>0)for(f.iushrn(O);O-- >0;)(y.isOdd()||h.isOdd())&&(y.iadd(c),h.isub(m)),y.iushrn(1),h.iushrn(1);for(var R=0,H=1;!(d.words[0]&H)&&R<26;++R,H<<=1);if(R>0)for(d.iushrn(R);R-- >0;)(w.isOdd()||E.isOdd())&&(w.iadd(c),E.isub(m)),w.iushrn(1),E.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(w),h.isub(E)):(d.isub(f),w.isub(y),E.isub(h))}return{a:w,b:E,gcd:d.iushln(g)}},i.prototype._invmp=function(s){r(s.negative===0),r(!s.isZero());var f=this,d=s.clone();f.negative!==0?f=f.umod(s):f=f.clone();for(var y=new i(1),h=new i(0),w=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var E=0,g=1;!(f.words[0]&g)&&E<26;++E,g<<=1);if(E>0)for(f.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);for(var c=0,m=1;!(d.words[0]&m)&&c<26;++c,m<<=1);if(c>0)for(d.iushrn(c);c-- >0;)h.isOdd()&&h.iadd(w),h.iushrn(1);f.cmp(d)>=0?(f.isub(d),y.isub(h)):(d.isub(f),h.isub(y))}var O;return f.cmpn(1)===0?O=y:O=h,O.cmpn(0)<0&&O.iadd(s),O},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var f=this.clone(),d=s.clone();f.negative=0,d.negative=0;for(var y=0;f.isEven()&&d.isEven();y++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var h=f.cmp(d);if(h<0){var w=f;f=d,d=w}else if(h===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(y)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){r(typeof s=="number");var f=s%26,d=(s-f)/26,y=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=y,this;for(var h=y,w=d;h!==0&&w<this.length;w++){var E=this.words[w]|0;E+=h,h=E>>>26,E&=67108863,this.words[w]=E}return h!==0&&(this.words[w]=h,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var f=s<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this.strip();var d;if(this.length>1)d=1;else{f&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;d=y===s?0:y<s?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var f=this.ucmp(s);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var y=this.words[d]|0,h=s.words[d]|0;if(y!==h){y<h?f=-1:y>h&&(f=1);break}}return f},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new C(s)},i.prototype.toRed=function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var L={k256:null,p224:null,p192:null,p25519:null};function U(v,s){this.name=v,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},U.prototype.ireduce=function(s){var f=s,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var y=d<this.n?-1:f.ucmp(this.p);return y===0?(f.words[0]=0,f.length=1):y>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},U.prototype.split=function(s,f){s.iushrn(this.n,0,f)},U.prototype.imulK=function(s){return s.imul(this.k)};function j(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(j,U),j.prototype.split=function(s,f){for(var d=4194303,y=Math.min(s.length,9),h=0;h<y;h++)f.words[h]=s.words[h];if(f.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var w=s.words[9];for(f.words[f.length++]=w&d,h=10;h<s.length;h++){var E=s.words[h]|0;s.words[h-10]=(E&d)<<4|w>>>22,w=E}w>>>=22,s.words[h-10]=w,w===0&&s.length>10?s.length-=10:s.length-=9},j.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var f=0,d=0;d<s.length;d++){var y=s.words[d]|0;f+=y*977,s.words[d]=f&67108863,f=y*64+(f/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function K(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(K,U);function D(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(D,U);function q(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,U),q.prototype.imulK=function(s){for(var f=0,d=0;d<s.length;d++){var y=(s.words[d]|0)*19+f,h=y&67108863;y>>>=26,s.words[d]=h,f=y}return f!==0&&(s.words[s.length++]=f),s},i._prime=function(s){if(L[s])return L[s];var f;if(s==="k256")f=new j;else if(s==="p224")f=new K;else if(s==="p192")f=new D;else if(s==="p25519")f=new q;else throw new Error("Unknown prime "+s);return L[s]=f,f};function C(v){if(typeof v=="string"){var s=i._prime(v);this.m=s.p,this.prime=s}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}C.prototype._verify1=function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},C.prototype._verify2=function(s,f){r((s.negative|f.negative)===0,"red works only with positives"),r(s.red&&s.red===f.red,"red works only with red numbers")},C.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},C.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},C.prototype.add=function(s,f){this._verify2(s,f);var d=s.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},C.prototype.iadd=function(s,f){this._verify2(s,f);var d=s.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},C.prototype.sub=function(s,f){this._verify2(s,f);var d=s.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},C.prototype.isub=function(s,f){this._verify2(s,f);var d=s.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},C.prototype.shl=function(s,f){return this._verify1(s),this.imod(s.ushln(f))},C.prototype.imul=function(s,f){return this._verify2(s,f),this.imod(s.imul(f))},C.prototype.mul=function(s,f){return this._verify2(s,f),this.imod(s.mul(f))},C.prototype.isqr=function(s){return this.imul(s,s.clone())},C.prototype.sqr=function(s){return this.mul(s,s)},C.prototype.sqrt=function(s){if(s.isZero())return s.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(s,d)}for(var y=this.m.subn(1),h=0;!y.isZero()&&y.andln(1)===0;)h++,y.iushrn(1);r(!y.isZero());var w=new i(1).toRed(this),E=w.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,g).cmp(E)!==0;)c.redIAdd(E);for(var m=this.pow(c,y),O=this.pow(s,y.addn(1).iushrn(1)),N=this.pow(s,y),R=h;N.cmp(w)!==0;){for(var H=N,$=0;H.cmp(w)!==0;$++)H=H.redSqr();r($<R);var Z=this.pow(m,new i(1).iushln(R-$-1));O=O.redMul(Z),m=Z.redSqr(),N=N.redMul(m),R=$}return O},C.prototype.invm=function(s){var f=s._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},C.prototype.pow=function(s,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return s.clone();var d=4,y=new Array(1<<d);y[0]=new i(1).toRed(this),y[1]=s;for(var h=2;h<y.length;h++)y[h]=this.mul(y[h-1],s);var w=y[0],E=0,g=0,c=f.bitLength()%26;for(c===0&&(c=26),h=f.length-1;h>=0;h--){for(var m=f.words[h],O=c-1;O>=0;O--){var N=m>>O&1;if(w!==y[0]&&(w=this.sqr(w)),N===0&&E===0){g=0;continue}E<<=1,E|=N,g++,!(g!==d&&(h!==0||O!==0))&&(w=this.mul(w,y[E]),g=0,E=0)}c=26}return w},C.prototype.convertTo=function(s){var f=s.umod(this.m);return f===s?f.clone():f},C.prototype.convertFrom=function(s){var f=s.clone();return f.red=null,f},i.mont=function(s){return new G(s)};function G(v){C.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(G,C),G.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},G.prototype.convertFrom=function(s){var f=this.imod(s.mul(this.rinv));return f.red=null,f},G.prototype.imul=function(s,f){if(s.isZero()||f.isZero())return s.words[0]=0,s.length=1,s;var d=s.imul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(y).iushrn(this.shift),w=h;return h.cmp(this.m)>=0?w=h.isub(this.m):h.cmpn(0)<0&&(w=h.iadd(this.m)),w._forceRed(this)},G.prototype.mul=function(s,f){if(s.isZero()||f.isZero())return new i(0)._forceRed(this);var d=s.mul(f),y=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=d.isub(y).iushrn(this.shift),w=h;return h.cmp(this.m)>=0?w=h.isub(this.m):h.cmpn(0)<0&&(w=h.iadd(this.m)),w._forceRed(this)},G.prototype.invm=function(s){var f=this.imod(s._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(typeof up>"u"||up,f1)});var y1=W((gR,p1)=>{S();A();var Sn=za(),rr=l1(),ft=function(){};function pf(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}ft.eventID=function(e,t){var r=e+"("+t.map(pf).join(",")+")";return Sn.keccak256(Buffer.from(r))};ft.methodID=function(e,t){return ft.eventID(e,t).slice(0,4)};function mi(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function fp(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function Ya(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Ao(e){var t=typeof e;if(t==="string")return Sn.isHexPrefixed(e)?new rr(Sn.stripHexPrefix(e),16):new rr(e,10);if(t==="number")return new rr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function h1(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function xn(e,t){var r,n,i,o;if(e==="address")return xn("uint160",Ao(t));if(e==="bool")return xn("uint8",t?1:0);if(e==="string")return xn("bytes",Buffer.from(t,"utf8"));if(Za(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Ya(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(xn(e,t[o]));if(r==="dynamic"){var a=xn("uint256",t.length);i.unshift(a)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([xn("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,Sn.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=mi(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Sn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=mi(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Ao(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=mi(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Ao(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=fp(e),n=Ao(t),n<0)throw new Error("Supplied ufixed is negative");return xn("uint256",n.mul(new rr(2).pow(new rr(r[1]))))}else if(e.startsWith("fixed"))return r=fp(e),xn("int256",Ao(t).mul(new rr(2).pow(new rr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function sn(e,t,r){typeof e=="string"&&(e=lp(e));var n,i,o,a;if(e.name==="address")return sn(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return sn(e.rawType,t,r).toString()===new rr(1).toString();if(e.name==="string"){var u=sn(e.rawType,t,r);return Buffer.from(u,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=sn("uint256",t,r).toNumber(),n=sn("uint256",t,r).toNumber(),r=r+32),a=0;a<n;a++){var l=sn(e.subArray,t,r);o.push(l),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=sn("uint256",t,r).toNumber(),n=sn("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new rr(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new rr(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new rr(2).pow(new rr(e.size[1])),i=sn("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new rr(2).pow(new rr(e.size[1])),i=sn("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function lp(e){var t,r;if(Za(e)){t=Ya(e);var n=e.slice(0,e.lastIndexOf("["));return n=lp(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=mi(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=fp(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function ZM(e){return e==="string"||e==="bytes"||Ya(e)==="dynamic"}function Za(e){return e.lastIndexOf("]")===e.length-1}ft.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(p){if(Za(p)){var x=Ya(p);x!=="dynamic"?i+=32*x:i+=32}else i+=32});for(var o=0;o<e.length;o++){var a=pf(e[o]),u=t[o],l=xn(a,u);ZM(a)?(r.push(xn("uint256",i)),n.push(l),i+=l.length):r.push(l)}return Buffer.concat(r.concat(n))};ft.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=pf(e[i]),a=lp(o,t,n),u=sn(a,t,n);n+=a.memoryUsage,r.push(u)}return r};ft.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=h1(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([ft.methodID(r.method,r.args),ft.rawEncode(r.args,t)])};ft.simpleDecode=function(e,t){var r=h1(e);if(!r.retargs)throw new Error("No return values in method");return ft.rawDecode(r.retargs,t)};function d1(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}ft.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(a){return d1(i,a)}).join(", "):o=d1(i,o),r.push(o)}return r};ft.solidityHexValue=function(e,t,r){var n,i;if(Za(e)){var o=e.replace(/\[.*?\]/,"");if(!Za(o)){var a=Ya(e);if(a!=="dynamic"&&a!==0&&t.length>a)throw new Error("Elements exceed array size: "+a)}var u=t.map(function(x){return ft.solidityHexValue(o,x,256)});return Buffer.concat(u)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var l=Array(r/4).join("0");return Buffer.from(t?l+"1":l+"0","hex")}else if(e==="address"){var p=20;return r&&(p=r/8),Sn.setLengthLeft(t,p)}else if(e.startsWith("bytes")){if(n=mi(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Sn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=mi(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=Ao(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=mi(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=Ao(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};ft.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=pf(e[n]),o=t[n];r.push(ft.solidityHexValue(i,o,null))}return Buffer.concat(r)};ft.soliditySHA3=function(e,t){return Sn.keccak256(ft.solidityPack(e,t))};ft.soliditySHA256=function(e,t){return Sn.sha256(ft.solidityPack(e,t))};ft.solidityRIPEMD160=function(e,t){return Sn.ripemd160(ft.solidityPack(e,t),!0)};function YM(e){return e>="0"&&e<="9"}ft.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&YM(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};ft.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+mi(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};p1.exports=ft});var m1=W((wR,g1)=>{S();A();g1.exports=y1()});var S1=W(Ot=>{"use strict";S();A();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.recoverTypedSignature=Ot.signTypedData=Ot.typedSignatureHash=Ot.TypedDataUtils=Ot.TYPED_MESSAGE_SCHEMA=Ot.SignTypedDataVersion=void 0;var Tr=za(),Ja=m1(),Eo=Ga(),zt;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(zt=Ot.SignTypedDataVersion||(Ot.SignTypedDataVersion={}));Ot.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Us(e,t){if(Object.keys(zt).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function b1(e,t,r,n,i){if(Us(i,[zt.V3,zt.V4]),e[r]!==void 0)return["bytes32",i===zt.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Tr.keccak(hp(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Tr.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",Tr.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===zt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),a=n.map(u=>b1(e,t,o,u,i));return["bytes32",Tr.keccak(Ja.rawEncode(a.map(([u])=>u),a.map(([,u])=>u)))]}return[r,n]}function hp(e,t,r,n){Us(n,[zt.V3,zt.V4]);let i=["bytes32"],o=[v1(e,r)];for(let a of r[e]){if(n===zt.V3&&t[a.name]===void 0)continue;let[u,l]=b1(r,a.name,a.type,t[a.name],n);i.push(u),o.push(l)}return Ja.rawEncode(i,o)}function w1(e,t){let r="",n=pp(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`}return r}function pp(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])pp(n.type,t,r);return r}function dp(e,t,r,n){return Us(n,[zt.V3,zt.V4]),Tr.keccak(hp(e,t,r,n))}function v1(e,t){return Tr.keccak(w1(e,t))}function x1(e){let t={};for(let r in Ot.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function JM(e,t){Us(t,[zt.V3,zt.V4]);let r=x1(e),n=[Buffer.from("1901","hex")];return n.push(dp("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(dp(r.primaryType,r.message,r.types,t)),Tr.keccak(Buffer.concat(n))}Ot.TypedDataUtils={encodeData:hp,encodeType:w1,findTypeDependencies:pp,hashStruct:dp,hashType:v1,sanitizeData:x1,eip712Hash:JM};function XM(e){let t=yp(e);return Tr.bufferToHex(t)}Ot.typedSignatureHash=XM;function yp(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:Eo.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return Ja.soliditySHA3(["bytes32","bytes32"],[Ja.soliditySHA3(new Array(e.length).fill("string"),i),Ja.soliditySHA3(n,r)])}function QM({privateKey:e,data:t,version:r}){if(Us(r),Eo.isNullish(t))throw new Error("Missing data parameter");if(Eo.isNullish(e))throw new Error("Missing private key parameter");let n=r===zt.V1?yp(t):Ot.TypedDataUtils.eip712Hash(t,r),i=Tr.ecsign(n,e);return Eo.concatSig(Tr.toBuffer(i.v),i.r,i.s)}Ot.signTypedData=QM;function e4({data:e,signature:t,version:r}){if(Us(r),Eo.isNullish(e))throw new Error("Missing data parameter");if(Eo.isNullish(t))throw new Error("Missing signature parameter");let n=r===zt.V1?yp(e):Ot.TypedDataUtils.eip712Hash(e,r),i=Eo.recoverPublicKey(n,t),o=Tr.publicToAddress(i);return Tr.bufferToHex(o)}Ot.recoverTypedSignature=e4});var E1=W((A1,yf)=>{S();A();(function(e,t){"use strict";typeof yf<"u"&&yf.exports?yf.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(A1,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var B1=W(Ct=>{"use strict";S();A();var t4=Ct&&Ct.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),r4=Ct&&Ct.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),T1=Ct&&Ct.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&t4(t,e,r);return r4(t,e),t};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getEncryptionPublicKey=Ct.decryptSafely=Ct.decrypt=Ct.encryptSafely=Ct.encrypt=void 0;var To=T1($i()),an=T1(E1()),An=Ga();function P1({publicKey:e,data:t,version:r}){if(An.isNullish(e))throw new Error("Missing publicKey parameter");if(An.isNullish(t))throw new Error("Missing data parameter");if(An.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=To.box.keyPair(),i;try{i=an.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=an.decodeUTF8(t),a=To.randomBytes(To.box.nonceLength),u=To.box(o,a,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:an.encodeBase64(a),ephemPublicKey:an.encodeBase64(n.publicKey),ciphertext:an.encodeBase64(u)}}default:throw new Error("Encryption type/version not supported")}}Ct.encrypt=P1;function n4({publicKey:e,data:t,version:r}){if(An.isNullish(e))throw new Error("Missing publicKey parameter");if(An.isNullish(t))throw new Error("Missing data parameter");if(An.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},u=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,l=0;u>0&&(l=n-u-i),o.padding="0".repeat(l);let p=JSON.stringify(o);return P1({publicKey:e,data:p,version:r})}Ct.encryptSafely=n4;function I1({encryptedData:e,privateKey:t}){if(An.isNullish(e))throw new Error("Missing encryptedData parameter");if(An.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=M1(t),n=To.box.keyPair.fromSecretKey(r).secretKey,i=an.decodeBase64(e.nonce),o=an.decodeBase64(e.ciphertext),a=an.decodeBase64(e.ephemPublicKey),u=To.box.open(o,i,a,n),l;try{l=an.encodeUTF8(u)}catch{throw new Error("Decryption failed.")}if(l)return l;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Ct.decrypt=I1;function i4({encryptedData:e,privateKey:t}){if(An.isNullish(e))throw new Error("Missing encryptedData parameter");if(An.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(I1({encryptedData:e,privateKey:t})).data}Ct.decryptSafely=i4;function o4(e){let t=M1(e),r=To.box.keyPair.fromSecretKey(t).publicKey;return an.encodeBase64(r)}Ct.getEncryptionPublicKey=o4;function M1(e){let t=Buffer.from(e,"hex").toString("base64");return an.decodeBase64(t)}});var _1=W(dr=>{"use strict";S();A();var s4=dr&&dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gp=dr&&dr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&s4(t,e,r)};Object.defineProperty(dr,"__esModule",{value:!0});dr.normalize=dr.concatSig=void 0;gp(u1(),dr);gp(S1(),dr);gp(B1(),dr);var k1=Ga();Object.defineProperty(dr,"concatSig",{enumerable:!0,get:function(){return k1.concatSig}});Object.defineProperty(dr,"normalize",{enumerable:!0,get:function(){return k1.normalize}})});var QS=W(Gs=>{"use strict";S();A();Object.defineProperty(Gs,"__esModule",{value:!0});Gs.testnet=Gs.bitcoin=void 0;Gs.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Gs.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var e2=W(et=>{"use strict";S();A();Object.defineProperty(et,"__esModule",{value:!0});et.maybe=et.Boolean=et.Array=et.Buffer256bit=et.Network=et.typeforce=void 0;et.typeforce=Y2();et.Network=et.typeforce.compile({messagePrefix:et.typeforce.oneOf(et.typeforce.Buffer,et.typeforce.String),bip32:{public:et.typeforce.UInt32,private:et.typeforce.UInt32},pubKeyHash:et.typeforce.UInt8,scriptHash:et.typeforce.UInt8,wif:et.typeforce.UInt8});et.Buffer256bit=et.typeforce.BufferN(32);et.Array=et.typeforce.Array;et.Boolean=et.typeforce.Boolean;et.maybe=et.typeforce.maybe});var t2=W(Xf=>{"use strict";S();A();Object.defineProperty(Xf,"__esModule",{value:!0});Xf.testEcc=void 0;var te=e=>Buffer.from(e,"hex");function Zk(e){it(e.isPoint(te("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),it(!e.isPoint(te("030000000000000000000000000000000000000000000000000000000000000005"))),it(e.isPrivate(te("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),it(e.isPrivate(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),it(!e.isPrivate(te("0000000000000000000000000000000000000000000000000000000000000000"))),it(!e.isPrivate(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),it(!e.isPrivate(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),it(Buffer.from(e.privateAdd(te("0000000000000000000000000000000000000000000000000000000000000001"),te("0000000000000000000000000000000000000000000000000000000000000000"))).equals(te("0000000000000000000000000000000000000000000000000000000000000001"))),it(e.privateAdd(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),te("0000000000000000000000000000000000000000000000000000000000000003"))===null),it(Buffer.from(e.privateAdd(te("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),te("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(te("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),it(Buffer.from(e.privateNegate(te("0000000000000000000000000000000000000000000000000000000000000001"))).equals(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),it(Buffer.from(e.privateNegate(te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(te("0000000000000000000000000000000000000000000000000000000000000003"))),it(Buffer.from(e.privateNegate(te("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(te("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),it(Buffer.from(e.pointCompress(te("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(te("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),it(Buffer.from(e.pointCompress(te("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(te("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),it(Buffer.from(e.pointCompress(te("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(te("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),it(Buffer.from(e.pointCompress(te("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(te("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),it(Buffer.from(e.pointFromScalar(te("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(te("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),it(e.xOnlyPointAddTweak(te("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(te("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),te("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));it(Buffer.from(t.xOnlyPubkey).equals(te("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(te("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),te("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),it(Buffer.from(t.xOnlyPubkey).equals(te("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),it(Buffer.from(e.sign(te("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),te("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(te("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),it(e.verify(te("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),te("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),te("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&it(Buffer.from(e.signSchnorr(te("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),te("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),te("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(te("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&it(e.verifySchnorr(te("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),te("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),te("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}Xf.testEcc=Zk;function it(e){if(!e)throw new Error("ecc library invalid")}});var n2=W(Zs=>{"use strict";S();A();Object.defineProperty(Zs,"__esModule",{value:!0});Zs.ECPairFactory=Zs.networks=void 0;var k0=QS();Zs.networks=k0;var Gt=e2(),Yk=iy(),r2=G2(),Jk=t2(),B0=Gt.typeforce.maybe(Gt.typeforce.compile({compressed:Gt.maybe(Gt.Boolean),network:Gt.maybe(Gt.Network)})),Xk=e=>e.length===32?e:e.slice(1,33);function Qk(e){(0,Jk.testEcc)(e);function t(u){return e.isPoint(u)}function r(u,l){if(Gt.typeforce(Gt.Buffer256bit,u),!e.isPrivate(u))throw new TypeError("Private key not in range [1, n)");return Gt.typeforce(B0,l),new a(u,void 0,l)}function n(u,l){return Gt.typeforce(e.isPoint,u),Gt.typeforce(B0,l),new a(void 0,u,l)}function i(u,l){let p=r2.decode(u),x=p.version;if(Gt.Array(l)){if(l=l.filter(b=>x===b.wif).pop(),!l)throw new Error("Unknown network version")}else if(l=l||k0.bitcoin,x!==l.wif)throw new Error("Invalid network version");return r(p.privateKey,{compressed:p.compressed,network:l})}function o(u){Gt.typeforce(B0,u),u===void 0&&(u={});let l=u.rng||Yk,p;do p=l(32),Gt.typeforce(Gt.Buffer256bit,p);while(!e.isPrivate(p));return r(p,u)}class a{__D;__Q;compressed;network;lowR;constructor(l,p,x){this.__D=l,this.__Q=p,this.lowR=!1,x===void 0&&(x={}),this.compressed=x.compressed===void 0?!0:x.compressed,this.network=x.network||k0.bitcoin,p!==void 0&&(this.__Q=Buffer.from(e.pointCompress(p,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let l=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(l)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return r2.encode(this.network.wif,this.__D,this.compressed)}tweak(l){return this.privateKey?this.tweakFromPrivateKey(l):this.tweakFromPublicKey(l)}sign(l,p){if(!this.__D)throw new Error("Missing private key");if(p===void 0&&(p=this.lowR),p===!1)return Buffer.from(e.sign(l,this.__D));{let x=e.sign(l,this.__D),b=Buffer.alloc(32,0),T=0;for(;x[0]>127;)T++,b.writeUIntLE(T,0,6),x=e.sign(l,this.__D,b);return Buffer.from(x)}}signSchnorr(l){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(l,this.privateKey))}verify(l,p){return e.verify(l,this.publicKey,p)}verifySchnorr(l,p){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(l,this.publicKey.subarray(1,33),p)}tweakFromPublicKey(l){let p=Xk(this.publicKey),x=e.xOnlyPointAddTweak(p,l);if(!x||x.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let b=Buffer.from([x.parity===0?2:3]);return n(Buffer.concat([b,x.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(l){let x=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,b=e.privateAdd(x,l);if(!b)throw new Error("Invalid tweaked private key!");return r(Buffer.from(b),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}Zs.ECPairFactory=Qk});var i2=W(Ri=>{"use strict";S();A();Object.defineProperty(Ri,"__esModule",{value:!0});Ri.networks=Ri.ECPairFactory=Ri.default=void 0;var _0=n2();Object.defineProperty(Ri,"default",{enumerable:!0,get:function(){return _0.ECPairFactory}});Object.defineProperty(Ri,"ECPairFactory",{enumerable:!0,get:function(){return _0.ECPairFactory}});Object.defineProperty(Ri,"networks",{enumerable:!0,get:function(){return _0.networks}})});S();A();var ua=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};S();A();var X2=e=>{let t=e.toString();return ua(t)};S();A();S();A();var Q2=e=>e.includes(".")||e.includes("@")?!1:dy.safeParse(e).success||cy.safeParse(e).success||Ly.safeParse(e).success||hy.safeParse(e).success,Cl=(e,t=5)=>Q2(e)?ua(e,t):e;var eA=(e,t,r,n=4)=>{let i=t?t.name:r,o=Cl(e,n);return i?`${i} (${o})`:o};S();A();var tA=e=>`${e.substring(0,5)}...`;S();A();S();A();var z5=F.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});S();A();var rA=({account:e,syncedAccounts:t,index:r,offsetIndex:n})=>{let i=t.find(a=>a.accountHash===e.identifier),o={name:i?.name??Ky("onboardingImportAccountsAccountName",{walletIndex:n+r+1})};return i?.icon&&(o.icon=i.icon.startsWith("https://")?{type:"image",imageUrl:i.icon}:{type:"emoji",unicode:i.icon}),o};S();A();var Ll=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1}};S();A();var nA=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bip44Sui":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};S();A();S();A();var iA=e=>e==null?!1:["ledger","seedVault"].includes(e);S();A();function Yy(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw Bl;case"eip155":throw kl;case"solana":throw _l;case"sui":throw Vl;default:throw qy}return n}function oA(e,t){return Yy(e,t)?.address}var Ec=e=>{switch(e.type){case"seedless":case"seed":case"privateKey":return!0;case"ledger":case"seedVault":case"readOnly":return!1;default:Ge(e)}};S();A();function sA(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}S();A();function aA(e){return[e.endsWith(".eth")]}S();A();var cA=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(a=>{switch(a.type){case"seed":case"seedless":return a.seedIdentifier===r;case"privateKey":return a.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:Ge(a)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};S();A();var Rl=ze(mc());var Jy=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},Xy=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(Rl.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break;case"sui":i=xy(t.publicKey);break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},Qy=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,a;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,a=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(Rl.default.decode(i.address)).toString("hex")}`,a=i.address;break;case"eip155":o=i.address,a=i.address;break;case"sui":o=`0x${Buffer.from(i.publicKey).toString("hex")}`,a=i.address;break}let u=null;switch(!0){case(Iy(i.pathType)&&zi.isSolanaNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(Py(i.pathType)&&zi.isEVMNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(Ty(i.pathType)&&zi.isBitcoinNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break;case(My(i.pathType)&&zi.isSuiNetworkID(n.networkID)):u={publicKey:o,address:a,pathType:i.pathType,networkId:n.networkID};break}u&&r.push(u)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},fA=e=>{let t=Hy.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=jy.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},lA=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:fA(o.icon)},n),{});await Ol(e,r)},dA=(e,t)=>({signMessages:async r=>{let n=[],i=await Sc(t),o=await Ac(e,t,i);for(let a of o){if(!(a.type==="seed"||a.type==="privateKey"||a.type==="seedless"))continue;let u=a.identifier,l=a.addresses.find(b=>b.addressType==="solana");if(!l||l.addressType!=="solana")continue;let p=Jy(r,l.address),x=await e.sign(u,{signingType:"message",chainType:l.addressType,message:Jy(r,l.address)});x.status!=="error"&&n.push({networkID:l.networkID,address:l.address,message:p,signature:x.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await Sc(t),o=await Ac(e,t,i),a=(await e.fetchAllAccounts()).reduce((l,p)=>(l[p.identifier]=p,l),{}),u={};for(let l of o){if(!Ec(l))continue;let p=a?.[l.identifier]??null,x=null;switch(l.type){case"seedless":case"seed":n.has(l.identifier)&&p.type===l.type&&(x=Qy(l,p));break;case"privateKey":n.has(l.identifier)&&p.type===l.type&&(x=Xy(l,p));break}x&&(u[l.identifier]=x)}return u},getAccountMetadata:async r=>{let n=await Sc(t),i=await Ac(e,t,n),o=(await e.fetchAllAccounts()).reduce((p,x)=>(p[x.identifier]=x,p),{}),a=i.find(p=>p.identifier===r)??null;if(!a)throw new Error(`Unable to get account metadata for account: ${r}`);if(!Ec(a))throw new Error(`Syncing is not supported for account type: ${a.type}`);let u=o?.[a.identifier]??null,l=null;switch(a.type){case"seedless":case"seed":u.type===a.type&&(l=Qy(a,u));break;case"privateKey":u.type===a.type&&(l=Xy(a,u));break}if(!l)throw new Error(`Unable to construct metadata to sync for account: ${a.identifier}`);return l},storeSyncedAccounts:async r=>(wt.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await lA(t,r),wt.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),wt.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});S();A();var hA=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:Ge(r);return}});S();A();function pA(e){return Al.get(e).networkNameOverride?.(e)??zi.getNetworkName(e,!0)}S();A();function yA(e){return{version:1,setting:{solana:xl,eip155:Sl,...e?{sui:Ry}:{}}}}S();A();S();A();function Ro(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}S();A();var ha=ze(Hg());function jE(e){return e=(0,ha.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{Xi(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:Ge(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{Xi(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:Ge(n)}}break;case"seedVault":break;default:Ge(t)}}),e}function WE(e){return e=(0,ha.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:Ge(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:Ge(n)}}break;case"seedVault":break;default:Ge(t)}}),e}function jg(e){return e=(0,ha.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&Xi(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&Xi(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:Ge(t)}}),e}function Wg(e){return e=(0,ha.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:Ge(t)}}),e}function Xi(e){return!!e&&typeof e=="object"&&yl("type",e)&&typeof e.type=="string"&&yl("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}S();A();var Gr=".phantom-labs.vault";var Oc=`${Gr}.accounts`,jo=`${Gr}.secrets`,Cc=e=>`${Gr}.privateKey.${e}`,Nc=e=>`${Gr}.seed.${e}`,Lc=e=>`${Gr}.seedless.${e}`,Uc=`${Gr}.integrityCheck`;async function Je(e){return(await Qg(e))?.accounts??[]}async function zg(e){let t=await sr(e),r=new Set(t.seedIdentifiers),n=await Je(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function Rc(e){let t=await sr(e),r=new Set(t.seedlessIdentifiers),n=await Je(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function sr(e){let t=await e.generalStorage.get(jo);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function Gg(e,t){let r=Nc(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=Lc(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new Gi;return Xi(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function Wo(e,t){let r=Cc(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new aa;return Xi(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Ht(e,t,r=!0){let n=await Qg(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=FE(i,t);if(o.length>0){if(!r)throw new ri(o[0].type,t.type);let a=Fg(t.type);for(let l of o)if(Fg(l.type)>=a)throw new ri(l.type,t.type);let u=o.map(l=>l.identifier);return i=i.filter(l=>!u.includes(l.identifier)),i.push(t),await Zr(e,i),await Ql(e)}else i.push(t);n.accounts=i}return Zr(e,n.accounts)}async function Zr(e,t){let r={version:1,accounts:t};return e.generalStorage.set(Oc,Wg(r))}async function Zg(e,t){let r=Cc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await ZE(e,t.identifier)}async function Yg(e,t){let r=Nc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await zE(e,t.identifier)}async function Jg(e,t){let r=Lc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await GE(e,t.identifier)}async function Ql(e){let t=await Je(e),r=new Set,n=new Set;for(let u of t)switch(u.type){case"seed":case"seedless":r.add(u.seedIdentifier);break;case"privateKey":n.add(u.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:Ge(u)}let i=await sr(e),o={seedIdentifiers:i.seedIdentifiers.filter(u=>r.has(u)),seedlessIdentifiers:i.seedlessIdentifiers.filter(u=>r.has(u)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(u=>n.has(u))},a={seedIdentifiers:i.seedIdentifiers.filter(u=>!r.has(u)),seedlessIdentifiers:i.seedlessIdentifiers.filter(u=>!r.has(u)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(u=>!n.has(u))};await e.generalStorage.set(jo,{version:1,...o}),await e.secretsStorage.removeSecureValue([...a.seedIdentifiers.map(u=>Nc(u)),...a.seedlessIdentifiers.map(u=>Lc(u)),...a.privateKeyIdentifiers.map(u=>Cc(u))])}async function ed(e,t){t?await e.secretsStorage.setSecureValue(Uc,t):await e.secretsStorage.removeSecureValue(Uc)}async function td(e){return e.secretsStorage.getSecureValue(Uc)}async function Xg(e){await e.generalStorage.remove(Oc);let t=await sr(e),r=t.privateKeyIdentifiers.map(o=>Cc(o)),n=t.seedIdentifiers.map(o=>Nc(o)),i=t.seedlessIdentifiers.map(o=>Lc(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(jo),await e.secretsStorage.removeSecureValue(Uc),await e.secureCache.clear()}async function Qg(e){let t=await e.generalStorage.get(Oc);return t?(t=jg(t),t=await $E(e,t),t):null}async function $E(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=$g(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=$g(i)||r});break;case"seedVault":break;default:Ge(n)}}),r&&await Zr(e,t.accounts),t}function $g(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(qt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=mr({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function FE(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}case"sui":{n.push(o.address);break}default:Ge(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}case"sui":{n.push(t.address);break}default:Ge(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let a;switch(o.type){case"seed":case"seedless":case"ledger":{a=Object.values(o.chains).some(u=>{switch(u.chainType){case"eip155":case"solana":return!!n.find(l=>Ro(l,u.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":return!!r.find(l=>Ro(l,u.publicKey));default:Ge(u)}});break}case"readOnly":{a=Object.values(o.addresses).some(u=>!!n.find(l=>Ro(l,u)));break}case"privateKey":{a=!!n.find(u=>Ro(u,o.publicKey));break}case"seedVault":{a=!!n.find(u=>Ro(u,o.publicKey));break}default:(u=>{throw new Error("unknown account type")})(o)}a&&i.push(o)}return i}async function zE(e,t){let r=await sr(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}async function GE(e,t){let r=await sr(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}async function ZE(e,t){let r=await sr(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}function Fg(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}S();A();S();A();var Xt=ze(Wi());S();A();S();A();var pa={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Fo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Yr=(e,t)=>e<<32-t|e>>>t,YE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!YE)throw new Error("Non little-endian hardware is not supported");var RV=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function JE(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function ii(e){if(typeof e=="string"&&(e=JE(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var $o=class{clone(){return this._cloneInto()}},XE=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function em(e,t){if(t!==void 0&&(typeof t!="object"||!XE(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function rd(e){let t=n=>e().update(ii(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ya(e=32){if(pa.web)return pa.web.getRandomValues(new Uint8Array(e));if(pa.node)return new Uint8Array(pa.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}S();A();S();A();S();A();var sd={};ny(sd,{bitGet:()=>o3,bitLen:()=>i3,bitMask:()=>ga,bitSet:()=>s3,bytesToHex:()=>Qi,bytesToNumberBE:()=>Lt,bytesToNumberLE:()=>qc,concatBytes:()=>qn,createHmacDrbg:()=>od,ensureBytes:()=>vt,equalBytes:()=>r3,hexToBytes:()=>eo,hexToNumber:()=>id,numberToBytesBE:()=>Jr,numberToBytesLE:()=>Hc,numberToHexUnpadded:()=>nm,numberToVarBytesBE:()=>t3,utf8ToBytes:()=>n3,validateObject:()=>oi});S();A();var rm=BigInt(0),Dc=BigInt(1),QE=BigInt(2),Kc=e=>e instanceof Uint8Array,e3=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qi(e){if(!Kc(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=e3[e[r]];return t}function nm(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function id(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function eo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),a=Number.parseInt(o,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function Lt(e){return id(Qi(e))}function qc(e){if(!Kc(e))throw new Error("Uint8Array expected");return id(Qi(Uint8Array.from(e).reverse()))}function Jr(e,t){return eo(e.toString(16).padStart(t*2,"0"))}function Hc(e,t){return Jr(e,t).reverse()}function t3(e){return eo(nm(e))}function vt(e,t,r){let n;if(typeof t=="string")try{n=eo(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Kc(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function qn(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!Kc(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function r3(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function n3(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function i3(e){let t;for(t=0;e>rm;e>>=Dc,t+=1);return t}function o3(e,t){return e>>BigInt(t)&Dc}var s3=(e,t,r)=>e|(r?Dc:rm)<<BigInt(t),ga=e=>(QE<<BigInt(e-1))-Dc,nd=e=>new Uint8Array(e),tm=e=>Uint8Array.from(e);function od(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=nd(e),i=nd(e),o=0,a=()=>{n.fill(1),i.fill(0),o=0},u=(...b)=>r(i,n,...b),l=(b=nd())=>{i=u(tm([0]),b),n=u(),b.length!==0&&(i=u(tm([1]),b),n=u())},p=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,T=[];for(;b<t;){n=u();let I=n.slice();T.push(I),b+=n.length}return qn(...T)};return(b,T)=>{a(),l(b);let I;for(;!(I=T(p()));)l();return a(),I}}var a3={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function oi(e,t,r={}){let n=(i,o,a)=>{let u=a3[o];if(typeof u!="function")throw new Error(`Invalid validator "${o}", expected function`);let l=e[i];if(!(a&&l===void 0)&&!u(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var St=BigInt(0),yt=BigInt(1),to=BigInt(2),c3=BigInt(3),ad=BigInt(4),im=BigInt(5),om=BigInt(8),u3=BigInt(9),f3=BigInt(16);function xt(e,t){let r=e%t;return r>=St?r:t+r}function l3(e,t,r){if(r<=St||t<St)throw new Error("Expected power/modulo > 0");if(r===yt)return St;let n=yt;for(;t>St;)t&yt&&(n=n*e%r),e=e*e%r,t>>=yt;return n}function ar(e,t,r){let n=e;for(;t-- >St;)n*=n,n%=r;return n}function jc(e,t){if(e===St||t<=St)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=xt(e,t),n=t,i=St,o=yt,a=yt,u=St;for(;r!==St;){let p=n/r,x=n%r,b=i-a*p,T=o-u*p;n=r,r=x,i=a,o=u,a=b,u=T}if(n!==yt)throw new Error("invert: does not exist");return xt(i,t)}function d3(e){let t=(e-yt)/to,r,n,i;for(r=e-yt,n=0;r%to===St;r/=to,n++);for(i=to;i<e&&l3(i,t,e)!==e-yt;i++);if(n===1){let a=(e+yt)/ad;return function(l,p){let x=l.pow(p,a);if(!l.eql(l.sqr(x),p))throw new Error("Cannot find square root");return x}}let o=(r+yt)/to;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let p=n,x=u.pow(u.mul(u.ONE,i),r),b=u.pow(l,o),T=u.pow(l,r);for(;!u.eql(T,u.ONE);){if(u.eql(T,u.ZERO))return u.ZERO;let I=1;for(let P=u.sqr(T);I<p&&!u.eql(P,u.ONE);I++)P=u.sqr(P);let B=u.pow(x,yt<<BigInt(p-I-1));x=u.sqr(B),b=u.mul(b,B),T=u.mul(T,x),p=I}return b}}function h3(e){if(e%ad===c3){let t=(e+yt)/ad;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%om===im){let t=(e-im)/om;return function(n,i){let o=n.mul(i,to),a=n.pow(o,t),u=n.mul(i,a),l=n.mul(n.mul(u,to),a),p=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(p),i))throw new Error("Cannot find square root");return p}}return e%f3,d3(e)}var p3=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cd(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=p3.reduce((n,i)=>(n[i]="function",n),t);return oi(e,r)}function y3(e,t,r){if(r<St)throw new Error("Expected power > 0");if(r===St)return e.ONE;if(r===yt)return t;let n=e.ONE,i=t;for(;r>St;)r&yt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=yt;return n}function g3(e,t){let r=new Array(t.length),n=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(n);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function ud(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function sm(e,t,r=!1,n={}){if(e<=St)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=ud(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=h3(e),u=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:ga(i),ZERO:St,ONE:yt,create:l=>xt(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return St<=l&&l<e},is0:l=>l===St,isOdd:l=>(l&yt)===yt,neg:l=>xt(-l,e),eql:(l,p)=>l===p,sqr:l=>xt(l*l,e),add:(l,p)=>xt(l+p,e),sub:(l,p)=>xt(l-p,e),mul:(l,p)=>xt(l*p,e),pow:(l,p)=>y3(u,l,p),div:(l,p)=>xt(l*jc(p,e),e),sqrN:l=>l*l,addN:(l,p)=>l+p,subN:(l,p)=>l-p,mulN:(l,p)=>l*p,inv:l=>jc(l,e),sqrt:n.sqrt||(l=>a(u,l)),invertBatch:l=>g3(u,l),cmov:(l,p,x)=>x?p:l,toBytes:l=>r?Hc(l,o):Jr(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return r?qc(l):Lt(l)}});return Object.freeze(u)}function am(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function fd(e){let t=am(e);return t+Math.ceil(t/2)}function cm(e,t,r=!1){let n=e.length,i=am(t),o=fd(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=r?Lt(e):qc(e),u=xt(a,t-yt)+yt;return r?Hc(u,i):Jr(u,i)}S();A();S();A();var b3=BigInt(0),ld=BigInt(1);function um(e,t){let r=(i,o)=>{let a=o.negate();return i?a:o},n=i=>{let o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,o){let a=e.ZERO,u=i;for(;o>b3;)o&ld&&(a=a.add(u)),u=u.double(),o>>=ld;return a},precomputeWindow(i,o){let{windows:a,windowSize:u}=n(o),l=[],p=i,x=p;for(let b=0;b<a;b++){x=p,l.push(x);for(let T=1;T<u;T++)x=x.add(p),l.push(x);p=x.double()}return l},wNAF(i,o,a){let{windows:u,windowSize:l}=n(i),p=e.ZERO,x=e.BASE,b=BigInt(2**i-1),T=2**i,I=BigInt(i);for(let B=0;B<u;B++){let P=B*l,_=Number(a&b);a>>=I,_>l&&(_-=T,a+=ld);let V=P,L=P+Math.abs(_)-1,U=B%2!==0,j=_<0;_===0?x=x.add(r(U,o[V])):p=p.add(r(j,o[L]))}return{p,f:x}},wNAFCached(i,o,a,u){let l=i._WINDOW_SIZE||1,p=o.get(i);return p||(p=this.precomputeWindow(i,l),l!==1&&o.set(i,u(p))),this.wNAF(l,p,a)}}}function dd(e){return cd(e.Fp),oi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ud(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function w3(e){let t=dd(e);oi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:v3,hexToBytes:x3}=sd,ro={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=ro;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:v3(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=ro,r=typeof e=="string"?x3(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=ro._parseInt(r.subarray(2)),{d:a,l:u}=ro._parseInt(o);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=p=>Number.parseInt(p[0],16)&8?"00"+p:p,r=p=>{let x=p.toString(16);return x.length&1?`0${x}`:x},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,a=i.length/2,u=r(o),l=r(a);return`30${r(a+o+4)}02${l}${i}02${u}${n}`}},Hn=BigInt(0),br=BigInt(1),tU=BigInt(2),fm=BigInt(3),rU=BigInt(4);function S3(e){let t=w3(e),{Fp:r}=t,n=t.toBytes||((B,P,_)=>{let V=P.toAffine();return qn(Uint8Array.from([4]),r.toBytes(V.x),r.toBytes(V.y))}),i=t.fromBytes||(B=>{let P=B.subarray(1),_=r.fromBytes(P.subarray(0,r.BYTES)),V=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:_,y:V}});function o(B){let{a:P,b:_}=t,V=r.sqr(B),L=r.mul(V,B);return r.add(r.add(L,r.mul(B,P)),_)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(B){return typeof B=="bigint"&&Hn<B&&B<t.n}function u(B){if(!a(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(B){let{allowedPrivateKeyLengths:P,nByteLength:_,wrapPrivateKey:V,n:L}=t;if(P&&typeof B!="bigint"){if(B instanceof Uint8Array&&(B=Qi(B)),typeof B!="string"||!P.includes(B.length))throw new Error("Invalid key");B=B.padStart(_*2,"0")}let U;try{U=typeof B=="bigint"?B:Lt(vt("private key",B,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof B}`)}return V&&(U=xt(U,L)),u(U),U}let p=new Map;function x(B){if(!(B instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(P,_,V){if(this.px=P,this.py=_,this.pz=V,P==null||!r.isValid(P))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(V==null||!r.isValid(V))throw new Error("z required")}static fromAffine(P){let{x:_,y:V}=P||{};if(!P||!r.isValid(_)||!r.isValid(V))throw new Error("invalid affine point");if(P instanceof b)throw new Error("projective point not allowed");let L=U=>r.eql(U,r.ZERO);return L(_)&&L(V)?b.ZERO:new b(_,V,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){let _=r.invertBatch(P.map(V=>V.pz));return P.map((V,L)=>V.toAffine(_[L])).map(b.fromAffine)}static fromHex(P){let _=b.fromAffine(i(vt("pointHex",P)));return _.assertValidity(),_}static fromPrivateKey(P){return b.BASE.multiply(l(P))}_setWindowSize(P){this._WINDOW_SIZE=P,p.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:P,y:_}=this.toAffine();if(!r.isValid(P)||!r.isValid(_))throw new Error("bad point: x or y not FE");let V=r.sqr(_),L=o(P);if(!r.eql(V,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:P}=this.toAffine();if(r.isOdd)return!r.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){x(P);let{px:_,py:V,pz:L}=this,{px:U,py:j,pz:K}=P,D=r.eql(r.mul(_,K),r.mul(U,L)),q=r.eql(r.mul(V,K),r.mul(j,L));return D&&q}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:P,b:_}=t,V=r.mul(_,fm),{px:L,py:U,pz:j}=this,K=r.ZERO,D=r.ZERO,q=r.ZERO,C=r.mul(L,L),G=r.mul(U,U),v=r.mul(j,j),s=r.mul(L,U);return s=r.add(s,s),q=r.mul(L,j),q=r.add(q,q),K=r.mul(P,q),D=r.mul(V,v),D=r.add(K,D),K=r.sub(G,D),D=r.add(G,D),D=r.mul(K,D),K=r.mul(s,K),q=r.mul(V,q),v=r.mul(P,v),s=r.sub(C,v),s=r.mul(P,s),s=r.add(s,q),q=r.add(C,C),C=r.add(q,C),C=r.add(C,v),C=r.mul(C,s),D=r.add(D,C),v=r.mul(U,j),v=r.add(v,v),C=r.mul(v,s),K=r.sub(K,C),q=r.mul(v,G),q=r.add(q,q),q=r.add(q,q),new b(K,D,q)}add(P){x(P);let{px:_,py:V,pz:L}=this,{px:U,py:j,pz:K}=P,D=r.ZERO,q=r.ZERO,C=r.ZERO,G=t.a,v=r.mul(t.b,fm),s=r.mul(_,U),f=r.mul(V,j),d=r.mul(L,K),y=r.add(_,V),h=r.add(U,j);y=r.mul(y,h),h=r.add(s,f),y=r.sub(y,h),h=r.add(_,L);let w=r.add(U,K);return h=r.mul(h,w),w=r.add(s,d),h=r.sub(h,w),w=r.add(V,L),D=r.add(j,K),w=r.mul(w,D),D=r.add(f,d),w=r.sub(w,D),C=r.mul(G,h),D=r.mul(v,d),C=r.add(D,C),D=r.sub(f,C),C=r.add(f,C),q=r.mul(D,C),f=r.add(s,s),f=r.add(f,s),d=r.mul(G,d),h=r.mul(v,h),f=r.add(f,d),d=r.sub(s,d),d=r.mul(G,d),h=r.add(h,d),s=r.mul(f,h),q=r.add(q,s),s=r.mul(w,h),D=r.mul(y,D),D=r.sub(D,s),s=r.mul(y,f),C=r.mul(w,C),C=r.add(C,s),new b(D,q,C)}subtract(P){return this.add(P.negate())}is0(){return this.equals(b.ZERO)}wNAF(P){return I.wNAFCached(this,p,P,_=>{let V=r.invertBatch(_.map(L=>L.pz));return _.map((L,U)=>L.toAffine(V[U])).map(b.fromAffine)})}multiplyUnsafe(P){let _=b.ZERO;if(P===Hn)return _;if(u(P),P===br)return this;let{endo:V}=t;if(!V)return I.unsafeLadder(this,P);let{k1neg:L,k1:U,k2neg:j,k2:K}=V.splitScalar(P),D=_,q=_,C=this;for(;U>Hn||K>Hn;)U&br&&(D=D.add(C)),K&br&&(q=q.add(C)),C=C.double(),U>>=br,K>>=br;return L&&(D=D.negate()),j&&(q=q.negate()),q=new b(r.mul(q.px,V.beta),q.py,q.pz),D.add(q)}multiply(P){u(P);let _=P,V,L,{endo:U}=t;if(U){let{k1neg:j,k1:K,k2neg:D,k2:q}=U.splitScalar(_),{p:C,f:G}=this.wNAF(K),{p:v,f:s}=this.wNAF(q);C=I.constTimeNegate(j,C),v=I.constTimeNegate(D,v),v=new b(r.mul(v.px,U.beta),v.py,v.pz),V=C.add(v),L=G.add(s)}else{let{p:j,f:K}=this.wNAF(_);V=j,L=K}return b.normalizeZ([V,L])[0]}multiplyAndAddUnsafe(P,_,V){let L=b.BASE,U=(K,D)=>D===Hn||D===br||!K.equals(L)?K.multiplyUnsafe(D):K.multiply(D),j=U(this,_).add(U(P,V));return j.is0()?void 0:j}toAffine(P){let{px:_,py:V,pz:L}=this,U=this.is0();P==null&&(P=U?r.ONE:r.inv(L));let j=r.mul(_,P),K=r.mul(V,P),D=r.mul(L,P);if(U)return{x:r.ZERO,y:r.ZERO};if(!r.eql(D,r.ONE))throw new Error("invZ was invalid");return{x:j,y:K}}isTorsionFree(){let{h:P,isTorsionFree:_}=t;if(P===br)return!0;if(_)return _(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:P,clearCofactor:_}=t;return P===br?this:_?_(b,this):this.multiplyUnsafe(t.h)}toRawBytes(P=!0){return this.assertValidity(),n(b,this,P)}toHex(P=!0){return Qi(this.toRawBytes(P))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let T=t.nBitLength,I=um(b,t.endo?Math.ceil(T/2):T);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function A3(e){let t=dd(e);return oi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function lm(e){let t=A3(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function a(h){return Hn<h&&h<r.ORDER}function u(h){return xt(h,n)}function l(h){return jc(h,n)}let{ProjectivePoint:p,normPrivateKeyToScalar:x,weierstrassEquation:b,isWithinCurveOrder:T}=S3({...t,toBytes(h,w,E){let g=w.toAffine(),c=r.toBytes(g.x),m=qn;return E?m(Uint8Array.from([w.hasEvenY()?2:3]),c):m(Uint8Array.from([4]),c,r.toBytes(g.y))},fromBytes(h){let w=h.length,E=h[0],g=h.subarray(1);if(w===i&&(E===2||E===3)){let c=Lt(g);if(!a(c))throw new Error("Point is not on curve");let m=b(c),O=r.sqrt(m),N=(O&br)===br;return(E&1)===1!==N&&(O=r.neg(O)),{x:c,y:O}}else if(w===o&&E===4){let c=r.fromBytes(g.subarray(0,r.BYTES)),m=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:c,y:m}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),I=h=>Qi(Jr(h,t.nByteLength));function B(h){let w=n>>br;return h>w}function P(h){return B(h)?u(-h):h}let _=(h,w,E)=>Lt(h.slice(w,E));class V{constructor(w,E,g){this.r=w,this.s=E,this.recovery=g,this.assertValidity()}static fromCompact(w){let E=t.nByteLength;return w=vt("compactSignature",w,E*2),new V(_(w,0,E),_(w,E,2*E))}static fromDER(w){let{r:E,s:g}=ro.toSig(vt("DER",w));return new V(E,g)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new V(this.r,this.s,w)}recoverPublicKey(w){let{r:E,s:g,recovery:c}=this,m=q(vt("msgHash",w));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let O=c===2||c===3?E+t.n:E;if(O>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let N=c&1?"03":"02",R=p.fromHex(N+I(O)),H=l(O),$=u(-m*H),Z=u(g*H),Ne=p.BASE.multiplyAndAddUnsafe(R,$,Z);if(!Ne)throw new Error("point at infinify");return Ne.assertValidity(),Ne}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new V(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return eo(this.toDERHex())}toDERHex(){return ro.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eo(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}let L={isValidPrivateKey(h){try{return x(h),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{let h=fd(t.n);return cm(t.randomBytes(h),t.n)},precompute(h=8,w=p.BASE){return w._setWindowSize(h),w.multiply(BigInt(3)),w}};function U(h,w=!0){return p.fromPrivateKey(h).toRawBytes(w)}function j(h){let w=h instanceof Uint8Array,E=typeof h=="string",g=(w||E)&&h.length;return w?g===i||g===o:E?g===2*i||g===2*o:h instanceof p}function K(h,w,E=!0){if(j(h))throw new Error("first arg must be private key");if(!j(w))throw new Error("second arg must be public key");return p.fromHex(w).multiply(x(h)).toRawBytes(E)}let D=t.bits2int||function(h){let w=Lt(h),E=h.length*8-t.nBitLength;return E>0?w>>BigInt(E):w},q=t.bits2int_modN||function(h){return u(D(h))},C=ga(t.nBitLength);function G(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Hn<=h&&h<C))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Jr(h,t.nByteLength)}function v(h,w,E=s){if(["recovered","canonical"].some(Y=>Y in E))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:c}=t,{lowS:m,prehash:O,extraEntropy:N}=E;m==null&&(m=!0),h=vt("msgHash",h),O&&(h=vt("prehashed msgHash",g(h)));let R=q(h),H=x(w),$=[G(H),G(R)];if(N!=null){let Y=N===!0?c(r.BYTES):N;$.push(vt("extraEntropy",Y))}let Z=qn(...$),Ne=R;function X(Y){let ht=D(Y);if(!T(ht))return;let re=l(ht),J=p.BASE.multiply(ht).toAffine(),pt=u(J.x);if(pt===Hn)return;let ee=u(re*u(Ne+pt*H));if(ee===Hn)return;let ne=(J.x===pt?0:2)|Number(J.y&br),Zt=ee;return m&&B(ee)&&(Zt=P(ee),ne^=1),new V(pt,Zt,ne)}return{seed:Z,k2sig:X}}let s={lowS:t.lowS,prehash:!1},f={lowS:t.lowS,prehash:!1};function d(h,w,E=s){let{seed:g,k2sig:c}=v(h,w,E),m=t;return od(m.hash.outputLen,m.nByteLength,m.hmac)(g,c)}p.BASE._setWindowSize(8);function y(h,w,E,g=f){let c=h;if(w=vt("msgHash",w),E=vt("publicKey",E),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:m,prehash:O}=g,N,R;try{if(typeof c=="string"||c instanceof Uint8Array)try{N=V.fromDER(c)}catch(J){if(!(J instanceof ro.Err))throw J;N=V.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:J,s:pt}=c;N=new V(J,pt)}else throw new Error("PARSE");R=p.fromHex(E)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&N.hasHighS())return!1;O&&(w=t.hash(w));let{r:H,s:$}=N,Z=q(w),Ne=l($),X=u(Z*Ne),Y=u(H*Ne),ht=p.BASE.multiplyAndAddUnsafe(R,X,Y)?.toAffine();return ht?u(ht.x)===H:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:K,sign:d,verify:y,ProjectivePoint:p,Signature:V,utils:L}}S();A();function E3(e){return{hash:e,hmac:(t,...r)=>gy(e,t,py(...r)),randomBytes:bc}}function dm(e,t){let r=n=>lm({...e,...E3(n)});return Object.freeze({...r(t),create:r})}var zc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ym=BigInt(1),$c=BigInt(2),hm=(e,t)=>(e+t/$c)/t;function gm(e){let t=zc,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),l=BigInt(88),p=e*e*e%t,x=p*p*e%t,b=ar(x,r,t)*x%t,T=ar(b,r,t)*x%t,I=ar(T,$c,t)*p%t,B=ar(I,i,t)*I%t,P=ar(B,o,t)*B%t,_=ar(P,u,t)*P%t,V=ar(_,l,t)*_%t,L=ar(V,u,t)*P%t,U=ar(L,r,t)*x%t,j=ar(U,a,t)*B%t,K=ar(j,n,t)*p%t,D=ar(K,$c,t);if(!pd.eql(pd.sqr(D),e))throw new Error("Cannot find square root");return D}var pd=sm(zc,void 0,void 0,{sqrt:gm}),zo=dm({a:BigInt(0),b:BigInt(7),Fp:pd,n:Wc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Wc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ym*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),u=hm(o*e,t),l=hm(-n*e,t),p=xt(e-u*r-l*i,t),x=xt(-u*n-l*o,t),b=p>a,T=x>a;if(b&&(p=t-p),T&&(x=t-x),p>a||x>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:b,k1:p,k2neg:T,k2:x}}}},Kt),Gc=BigInt(0),mm=e=>typeof e=="bigint"&&Gc<e&&e<zc,T3=e=>typeof e=="bigint"&&Gc<e&&e<Wc,pm={};function Fc(e,...t){let r=pm[e];if(r===void 0){let n=Kt(Uint8Array.from(e,i=>i.charCodeAt(0)));r=qn(n,n),pm[e]=r}return Kt(qn(r,...t))}var md=e=>e.toRawBytes(!0).slice(1),yd=e=>Jr(e,32),hd=e=>xt(e,zc),ma=e=>xt(e,Wc),bd=zo.ProjectivePoint,P3=(e,t,r)=>bd.BASE.multiplyAndAddUnsafe(e,t,r);function gd(e){let t=zo.utils.normPrivateKeyToScalar(e),r=bd.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:ma(-t),bytes:md(r)}}function bm(e){if(!mm(e))throw new Error("bad x: need 0 < x < p");let t=hd(e*e),r=hd(t*e+BigInt(7)),n=gm(r);n%$c!==Gc&&(n=hd(-n));let i=new bd(e,n,ym);return i.assertValidity(),i}function wm(...e){return ma(Lt(Fc("BIP0340/challenge",...e)))}function I3(e){return gd(e).bytes}function M3(e,t,r=bc(32)){let n=vt("message",e),{bytes:i,scalar:o}=gd(t),a=vt("auxRand",r,32),u=yd(o^Lt(Fc("BIP0340/aux",a))),l=Fc("BIP0340/nonce",u,i,n),p=ma(Lt(l));if(p===Gc)throw new Error("sign failed: k is zero");let{bytes:x,scalar:b}=gd(p),T=wm(x,i,n),I=new Uint8Array(64);if(I.set(x,0),I.set(yd(ma(b+T*o)),32),!vm(I,n,i))throw new Error("sign: Invalid signature produced");return I}function vm(e,t,r){let n=vt("signature",e,64),i=vt("message",t),o=vt("publicKey",r,32);try{let a=bm(Lt(o)),u=Lt(n.subarray(0,32));if(!mm(u))return!1;let l=Lt(n.subarray(32,64));if(!T3(l))return!1;let p=wm(yd(u),md(a),i),x=P3(a,l,ma(-p));return!(!x||!x.hasEvenY()||x.toAffine().x!==u)}catch{return!1}}var cr={getPublicKey:I3,sign:M3,verify:vm,utils:{randomPrivateKey:zo.utils.randomPrivateKey,lift_x:bm,pointToBytes:md,numberToBytesBE:Jr,bytesToNumberBE:Lt,taggedHash:Fc,mod:xt}};S();A();var B3=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Sm=Uint8Array.from({length:16},(e,t)=>t),k3=Sm.map(e=>(9*e+5)%16),vd=[Sm],xd=[k3];for(let e=0;e<4;e++)for(let t of[vd,xd])t.push(t[e].map(r=>B3[r]));var Am=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),_3=vd.map((e,t)=>e.map(r=>Am[t][r])),V3=xd.map((e,t)=>e.map(r=>Am[t][r])),U3=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),O3=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Zc=(e,t)=>e<<t|e>>>32-t;function xm(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var Yc=new Uint32Array(16),wd=class extends my{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let I=0;I<16;I++,r+=4)Yc[I]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,a=o,u=this.h2|0,l=u,p=this.h3|0,x=p,b=this.h4|0,T=b;for(let I=0;I<5;I++){let B=4-I,P=U3[I],_=O3[I],V=vd[I],L=xd[I],U=_3[I],j=V3[I];for(let K=0;K<16;K++){let D=Zc(n+xm(I,o,u,p)+Yc[V[K]]+P,U[K])+b|0;n=b,b=p,p=Zc(u,10)|0,u=o,o=D}for(let K=0;K<16;K++){let D=Zc(i+xm(B,a,l,x)+Yc[L[K]]+_,j[K])+T|0;i=T,T=x,x=Zc(l,10)|0,l=a,a=D}}this.set(this.h1+u+x|0,this.h2+p+T|0,this.h3+b+i|0,this.h4+n+a|0,this.h0+o+l|0)}roundClean(){Yc.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},Em=yy(()=>new wd);S();A();function Go(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Xc(...e){let t=(i,o)=>a=>i(o(a)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function Ed(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function Td(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function C3(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Tm(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(a=>{if(a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let l=n;l<o.length;l++){let p=o[l],x=t*a+p;if(!Number.isSafeInteger(x)||t*a/t!==a||x-p!==t*a)throw new Error("convertRadix: carry overflow");a=x%r;let b=Math.floor(x/r);if(o[l]=b,!Number.isSafeInteger(b)||b*r+a!==x)throw new Error("convertRadix: carry overflow");if(u)b?u=!1:n=l;else continue}if(i.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}var Bm=(e,t)=>t?Bm(t,e%t):e,Jc=(e,t)=>e+(t-Bm(e,t));function Sd(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Jc(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${Jc(t,r)}`);let i=0,o=0,a=2**r-1,u=[];for(let l of e){if(l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)u.push((i>>o-r&a)>>>0);i&=2**o-1}if(i=i<<r-o&a,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&u.push(i>>>0),u}function N3(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Tm(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Tm(t,e,2**8))}}}function km(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Jc(8,e)>32||Jc(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Sd(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Sd(r,e,8,t))}}}function Pm(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function L3(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let a=0;a<e;a++)if(i[a]!==o[a])throw new Error("Invalid checksum");return n}}}var R3=e=>Xc(N3(58),Ed(e),Td("")),D3=R3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var _m=e=>Xc(L3(4,t=>e(e(t))),D3),Ad=Xc(Ed("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Td("")),Im=[996825010,642813549,513874426,1027748829,705979059];function ba(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<Im.length;n++)(t>>n&1)===1&&(r^=Im[n]);return r}function Mm(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let a=e.charCodeAt(o);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);i=ba(i)^a>>5}i=ba(i);for(let o=0;o<n;o++)i=ba(i)^e.charCodeAt(o)&31;for(let o of t)i=ba(i)^o;for(let o=0;o<6;o++)i=ba(i);return i^=r,Ad.encode(Sd([i%2**30],30,5,!1))}function Vm(e){let t=e==="bech32"?1:734539939,r=km(5),n=r.decode,i=r.encode,o=Pm(n);function a(x,b,T=90){if(typeof x!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof x}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);let I=x.length+7+b.length;if(T!==!1&&I>T)throw new TypeError(`Length ${I} exceeds limit ${T}`);let B=x.toLowerCase(),P=Mm(B,b,t);return`${B}1${Ad.encode(b)}${P}`}function u(x,b=90){if(typeof x!="string")throw new Error(`bech32.decode input should be string, not ${typeof x}`);if(x.length<8||b!==!1&&x.length>b)throw new TypeError(`Wrong string length: ${x.length} (${x}). Expected (8..${b})`);let T=x.toLowerCase();if(x!==T&&x!==x.toUpperCase())throw new Error("String must be lowercase or uppercase");x=T;let I=x.lastIndexOf("1");if(I===0||I===-1)throw new Error('Letter "1" must be present between prefix and data only');let B=x.slice(0,I),P=x.slice(I+1);if(P.length<6)throw new Error("Data must be at least 6 characters long");let _=Ad.decode(P).slice(0,-6),V=Mm(B,_,t);if(!P.endsWith(V))throw new Error(`Invalid checksum in ${x}: expected "${V}"`);return{prefix:B,words:_}}let l=Pm(u);function p(x){let{prefix:b,words:T}=u(x,!1);return{prefix:b,words:T,bytes:n(T)}}return{encode:a,decode:u,decodeToBytes:p,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}var Qc=Vm("bech32"),Pd=Vm("bech32m"),Id={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},lt=Xc(km(4),Ed("0123456789abcdef"),Td(""),C3(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));S();A();var dt=new Uint8Array,ou=new Uint8Array([0]);function rt(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function eu(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var ur=e=>e instanceof Uint8Array,tu=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if(si(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=iu(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!ur(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(rt(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${lt.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},ru=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=eu(...this.buffers);for(let r of this.ptrs){let n=t.length;t=eu(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if(si(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=iu(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},nu=e=>Uint8Array.from(e).reverse();function Um(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function At(e){return{...e,encode:t=>{let r=new ru;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new tu(t),n=e.decodeStream(r);return r.finish(),n}}}function iu(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function si(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function q3(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var H3={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function j3(e){return{encode:t=>e[t],decode:t=>e[t]}}function W3(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[a,u]=[n.slice(0,i),n.slice(i,o+1)];return a||(a="0"),r<0n&&(a="-"+a),u?`${a}.${u}`:a},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,a]=[r.slice(0,i),r.slice(i+1)],u=BigInt(o)*t,l=Math.min(a.length,e),p=BigInt(a.slice(0,l))*10n**BigInt(e-l),x=u+p;return n?-x:x}}}function $3(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var Zo={dict:q3,number:H3,tsEnum:j3,decimal:W3,match:$3};var fr=(e,t=!1,r=!1)=>At({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),a=BigInt(e);Um(n,o,8n*a,!!r);let u=2n**(8n*a-1n);r&&o<0&&(o=o|u);let l=[];for(let x=0;x<e;x++)l.push(Number(o&255n)),o>>=8n;let p=new Uint8Array(l).reverse();n.bytes(t?p.reverse():p)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=nu(o));let a=nu(o),u=2n**(8n*i-1n),l=0n;for(let p=0;p<a.length;p++)l|=BigInt(a[p])<<8n*BigInt(p);return r&&l&u&&(l=(l^u)-u),Um(n,l,8n*i,!!r),l}}),kU=fr(32,!0),Om=fr(32,!1),_U=fr(32,!0,!0),VU=fr(32,!1,!0),UU=fr(16,!0),OU=fr(16,!1),CU=fr(16,!0,!0),NU=fr(16,!1,!0),wa=fr(8,!0),LU=fr(8,!1),Cm=fr(8,!0,!0),RU=fr(8,!1,!0),pn=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return xa(fr(e,t,r),Zo.number)},Xe=pn(4,!0),Nm=pn(4,!1),Yo=pn(4,!0,!0),DU=pn(4,!1,!0),Md=pn(2,!0),KU=pn(2,!1),qU=pn(2,!0,!0),HU=pn(2,!1,!0),jn=pn(1,!1),jU=pn(1,!1,!0),WU=At({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),ot=(e,t=!1)=>At({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!ur(n))throw r.err(`bytes: invalid value ${n}`);ur(e)||r.length(e,n.length),r.bytes(t?nu(n):n),ur(e)&&r.bytes(e)},decodeStream:r=>{let n;if(ur(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?nu(n):n}}),va=(e,t=!1)=>{let r=ot(e,t);return At({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,Id.decode(i)),decodeStream:n=>Id.encode(r.decodeStream(n))})},$U=va(ou),Lm=(e,t=!1,r=!1)=>{let n=ot(e,t);return At({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let a=lt.decode(r?o.slice(2):o);return n.encodeStream(i,a)},decodeStream:i=>(r?"0x":"")+lt.encode(n.decodeStream(i))})};function xa(e,t){if(!si(e))throw new Error(`apply: invalid inner value ${e}`);return At({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function wr(e,t){if(!si(e))throw new Error(`validate: invalid inner value ${e}`);return At({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var Rm=(e,t=!1)=>At({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=rt(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function Dm(e,t,r){if(!si(t))throw new Error(`flagged: invalid inner value ${t}`);return At({encodeStream:(n,i)=>{typeof e=="string"?iu(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=iu(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function Sa(e,t,r=!0){if(!si(e))throw new Error(`flagged: invalid inner value ${e}`);return At({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||ur(t)&&!rt(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function Km(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function jt(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return At({size:Km(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function qm(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return At({size:Km(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function Hm(e,t){if(!si(t))throw new Error(`prefix: invalid inner value ${t}`);if(ur(e))throw new Error("prefix: len cannot be Uint8Array");let r=ot(e);return At({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new ru(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new tu(i,n.path,n.fieldPath))}})}function $t(e,t){if(!si(t))throw new Error(`array: invalid inner value ${t}`);return At({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);ur(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],a=r.pos;if(t.encodeStream(r,o),ur(e)){if(e.length>r.pos-a)continue;let u=r.buffer.subarray(a,r.pos);if(rt(u.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${u}`)}r.fieldPathPop()}r.path.pop(),ur(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(ur(e)){let i=0;for(r.path.push(n);;){if(rt(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var FU=Sa(ot(0),dt);var{ProjectivePoint:pu,sign:jm,getPublicKey:z3}=zo,uu=zo.CURVE.n,Ea=(e,t)=>e===void 0?t:e,at=ur,yu=e=>Em(Kt(e)),ai=(...e)=>Kt(Kt(ci(...e))),ci=eu,nb=_m(Kt);function fu(e){if(Array.isArray(e))return e.map(t=>fu(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,fu(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var Wt;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})(Wt||(Wt={}));function es(e,t){let r=e.length;if(t===Wt.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return pu.fromHex(e),e}else if(t===Wt.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return cr.utils.lift_x(cr.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function io(e,t){try{return es(e,t),!0}catch{return!1}}var Wm=e=>e.r<uu/2n;function G3(e,t,r=!1){let n=jm(e,t);if(r&&!Wm(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(Xe.encode(o)),n=jm(e,t,{extraEntropy:i}),!Wm(n));o++);}return n.toDERRawBytes()}function ib(e,t){let r=cr.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=uu)throw new Error("tweak higher than curve order");return i}function Z3(e,t=new Uint8Array){let r=cr.utils,n=r.bytesToNumberBE(e),i=pu.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,uu),a=r.pointToBytes(i),u=ib(a,t);return r.numberToBytesBE(r.mod(o+u,uu),32)}function ob(e,t){let r=cr.utils,n=ib(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(pu.fromPrivateKey(n)),a=o.hasEvenY()?0:1;return[r.pointToBytes(o),a]}var Ud=wr(ot(null),e=>es(e,Wt.ecdsa)),lu=wr(ot(32),e=>es(e,Wt.schnorr)),$m=wr(ot(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var ui={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var Y3=8,J3=2,no=0,sb=4294967295,su=new Uint8Array(32),QU=Zo.decimal(Y3);function Od(e,t){if(!at(e)||!at(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var Et;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(Et||(Et={}));var Tt=At({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(Et[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(Et[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(Et.OP_1-1+r);continue}}if(typeof r=="number"&&(r=ab().encode(BigInt(r))),!at(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<Et.PUSHDATA1?e.byte(n):n<=255?(e.byte(Et.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(Et.PUSHDATA2),e.bytes(Md.encode(n))):(e.byte(Et.PUSHDATA4),e.bytes(Xe.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(Et.OP_0<r&&r<=Et.PUSHDATA4){let n;if(r<Et.PUSHDATA1)n=r;else if(r===Et.PUSHDATA1)n=jn.decodeStream(e);else if(r===Et.PUSHDATA2)n=Md.decodeStream(e);else if(r===Et.PUSHDATA4)n=Xe.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(Et.OP_1<=r&&r<=Et.OP_16)t.push(r-(Et.OP_1-1));else{let n=Et[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function ab(e=6,t=!1){return At({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),a=[];for(let u=i?-o:o;u;u>>=8n)a.push(Number(u&0xffn));a[a.length-1]>=128?a.push(i?128:0):i&&(a[a.length-1]|=128),r.bytes(new Uint8Array(a))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let a=0;a<n;++a)i=r.byte(),o|=BigInt(i)<<8n*BigInt(a);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function X3(e,t=4,r=!0){if(typeof e=="number")return e;if(at(e))try{let n=ab(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var Fm={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},gu=At({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(Fm))if(!(i>t||t>o)){e.byte(r);for(let a=0;a<n;a++)e.byte(Number(t>>8n*BigInt(a)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=Fm[t],o=0n;for(let a=0;a<n;a++)o|=BigInt(e.byte())<<8n*BigInt(a);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),Qr=xa(gu,Zo.number),zm=e=>$t(gu,e),Xr=ot(gu),Q3=jt({txid:ot(32,!0),index:Xe,finalScriptSig:Xr,sequence:Xe}),Xo=jt({amount:wa,script:Xr}),eT={amount:0xffffffffffffffffn,script:dt},Hd=$t(Qr,Xr),tT=jt({version:Yo,segwitFlag:Rm(new Uint8Array([0,1])),inputs:zm(Q3),outputs:zm(Xo),witnesses:Dm("segwitFlag",$t("inputs/length",Hd)),lockTime:Xe});function rT(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var yn=wr(tT,rT);function Cd(e){let[t,r,n,i,o,a]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:a}}var mu=jt({fingerprint:Nm,path:$t(null,Xe)}),nT=jt({version:jn,internalKey:ot(32),merklePath:$t(null,ot(32))}),Qo=wr(nT,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),cb=jt({hashes:$t(Qr,ot(32)),der:mu}),iT=ot(78),oT=jt({pubKey:lu,leafHash:ot(32)}),sT=$t(null,jt({depth:jn,version:jn,script:Xr})),Pt=ot(null),Gm=ot(20),Aa=ot(32),jd={unsignedTx:[0,!1,yn,[0],[0],!1],xpub:[1,iT,mu,[],[0,2],!1],txVersion:[2,!1,Xe,[2],[2],!1],fallbackLocktime:[3,!1,Xe,[],[2],!1],inputCount:[4,!1,Qr,[2],[2],!1],outputCount:[5,!1,Qr,[2],[2],!1],txModifiable:[6,!1,jn,[],[2],!1],version:[251,!1,Xe,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},du={nonWitnessUtxo:[0,!1,yn,[],[0,2],!1],witnessUtxo:[1,!1,Xo,[],[0,2],!1],partialSig:[2,Ud,Pt,[],[0,2],!1],sighashType:[3,!1,Xe,[],[0,2],!1],redeemScript:[4,!1,Pt,[],[0,2],!1],witnessScript:[5,!1,Pt,[],[0,2],!1],bip32Derivation:[6,Ud,mu,[],[0,2],!1],finalScriptSig:[7,!1,Pt,[],[0,2],!1],finalScriptWitness:[8,!1,Hd,[],[0,2],!1],porCommitment:[9,!1,Pt,[],[0,2],!1],ripemd160:[10,Gm,Pt,[],[0,2],!1],sha256:[11,Aa,Pt,[],[0,2],!1],hash160:[12,Gm,Pt,[],[0,2],!1],hash256:[13,Aa,Pt,[],[0,2],!1],txid:[14,!1,Aa,[2],[2],!0],index:[15,!1,Xe,[2],[2],!0],sequence:[16,!1,Xe,[],[2],!0],requiredTimeLocktime:[17,!1,Xe,[],[2],!1],requiredHeightLocktime:[18,!1,Xe,[],[2],!1],tapKeySig:[19,!1,$m,[],[0,2],!1],tapScriptSig:[20,oT,$m,[],[0,2],!1],tapLeafScript:[21,Qo,Pt,[],[0,2],!1],tapBip32Derivation:[22,Aa,cb,[],[0,2],!1],tapInternalKey:[23,!1,lu,[],[0,2],!1],tapMerkleRoot:[24,!1,Aa,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},aT=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],cT=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],hu={redeemScript:[0,!1,Pt,[],[0,2],!1],witnessScript:[1,!1,Pt,[],[0,2],!1],bip32Derivation:[2,Ud,mu,[],[0,2],!1],amount:[3,!1,Cm,[2],[2],!0],script:[4,!1,Pt,[2],[2],!0],tapInternalKey:[5,!1,lu,[],[0,2],!1],tapTree:[6,!1,sT,[],[0,2],!1],tapBip32Derivation:[7,lu,cb,[],[0,2],!1],proprietary:[252,Pt,Pt,[],[0,2],!1]},uT=[],Zm=$t(ou,jt({key:Hm(Qr,jt({type:Qr,key:ot(null)})),value:ot(Qr)})),eO=jt({type:Qr,key:ot(null)});function Wd(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return At({encodeStream:(r,n)=>{let i=[];for(let o in e){let a=n[o];if(a===void 0)continue;let[u,l,p]=e[o];if(!l)i.push({key:{type:u,key:dt},value:p.encode(a)});else{let x=a.map(([b,T])=>[l.encode(b),p.encode(T)]);x.sort((b,T)=>Od(b[0],T[0]));for(let[b,T]of x)i.push({key:{key:b,type:u},value:T})}}if(n.unknown){n.unknown.sort((o,a)=>Od(o[0].key,a[0].key));for(let[o,a]of n.unknown)i.push({key:o,value:a})}Zm.encodeStream(r,i)},decodeStream:r=>{let n=Zm.decodeStream(r),i={},o={};for(let a of n){let u="unknown",l=a.key.key,p=a.value;if(t[a.key.type]){let[x,b,T]=t[a.key.type];if(u=x,!b&&l.length)throw new Error(`PSBT: Non-empty key for ${u} (key=${lt.encode(l)} value=${lt.encode(p)}`);if(l=b?b.decode(l):void 0,p=T.decode(p),!b){if(i[u])throw new Error(`PSBT: Same keys: ${u} (key=${l} value=${p})`);i[u]=p,o[u]=!0;continue}}else l={type:a.key.type,key:a.key.key};if(o[u])throw new Error(`PSBT: Key type with empty key and no key=${u} val=${p}`);i[u]||(i[u]=[]),i[u].push([l,p])}return i}})}function Ym(e,t){if(!rt(e.hash,Kt(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=It.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function Nd(e,t,r){if(e){let n=It.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!rt(n.hash,yu(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=It.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&Ym(n,r)}if(t){let n=It.decode(t);n.type==="wsh"&&r&&Ym(n,r)}}var $d=wr(Wd(du),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)es(t,Wt.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)es(t,Wt.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!rt(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=oo.fromRaw(yn.encode(e.nonWitnessUtxo)),n=lt.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),Fd=wr(Wd(hu),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)es(t,Wt.ecdsa);return e}),ub=wr(Wd(jd),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),fT=jt({magic:Sa(va(new Uint8Array([255])),"psbt"),global:ub,inputs:$t("global/unsignedTx/inputs/length",$d),outputs:$t(null,Fd)}),lT=jt({magic:Sa(va(new Uint8Array([255])),"psbt"),global:ub,inputs:$t("global/inputCount",$d),outputs:$t("global/outputCount",Fd)}),tO=jt({magic:Sa(va(new Uint8Array([255])),"psbt"),items:$t(null,xa($t(ou,qm([Lm(Qr),ot(gu)])),Zo.dict()))});function Bd(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=Cd(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=Cd(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function Jm(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:a,silentIgnore:u}=Cd(t[o]);if(!a.includes(e)){if(u)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${a}`)}}n[o]=r[o]}return n}function fb(e){let t=e&&e.global&&e.global.version||0;Bd(t,jd,e.global);for(let a of e.inputs)Bd(t,du,a);for(let a of e.outputs)Bd(t,hu,a);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function kd(e,t,r,n){let i={...r,...t};for(let o in e){let a=o,[u,l,p]=e[a],x=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(x)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(l){let b=r&&r[o]?r[o]:[],T=t[a];if(T){if(!Array.isArray(T))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);T=T.map(P=>{if(P.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof P[0]=="string"?l.decode(lt.decode(P[0])):P[0],typeof P[1]=="string"?p.decode(lt.decode(P[1])):P[1]]});let I={},B=(P,_,V)=>{if(I[P]===void 0){I[P]=[_,V];return}let L=lt.encode(p.encode(I[P][1])),U=lt.encode(p.encode(V));if(L!==U)throw new Error(`keyMap(${a}): same key=${P} oldVal=${L} newVal=${U}`)};for(let[P,_]of b){let V=lt.encode(l.encode(P));B(V,P,_)}for(let[P,_]of T){let V=lt.encode(l.encode(P));if(_===void 0){if(x)throw new Error(`Cannot remove signed field=${a}/${P}`);delete I[V]}else B(V,P,_)}i[a]=Object.values(I)}}else if(typeof i[o]=="string")i[o]=p.decode(lt.decode(i[o]));else if(x&&o in t&&r&&r[o]!==void 0&&!rt(p.encode(t[o]),p.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var Xm=wr(fT,fb),Qm=wr(lT,fb),_d=jt({txid:ot(32,!0),index:Xe}),dT={encode(e){if(!(e.length!==2||!at(e[0])||!io(e[0],Wt.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var hT={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!at(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var pT={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!at(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},lb=(e,t=ui)=>{let r=e.script;if(!at(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=yu(r),i=It.encode({type:"sh",hash:n});Nd(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:It.encode({type:"sh",hash:n}),address:bu(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},yT={encode(e){if(!(e.length!==2||e[0]!==0||!at(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var gT={encode(e){if(!(e.length!==2||e[0]!==0||!at(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},zd=(e,t=ui)=>{if(!io(e,Wt.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=yu(e);return{type:"wpkh",script:It.encode({type:"wpkh",hash:r}),address:bu(t).encode({type:"wpkh",hash:r})}},mT={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!at(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var bT={encode(e){if(!(e.length!==2||e[0]!==1||!at(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function wT(e){let t=Array.from(e);for(;t.length>=2;){t.sort((a,u)=>(u.weight||1)-(a.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function vT(e,t,r=!1){let n=It.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(rt(o,db))throw new Error("Unspendable taproot key in leaf script");if(rt(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function Ld(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:u,script:l}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!rt(e.tapMerkleRoot,dt))throw new Error("P2TR: tapRoot leafScript cannot have tree");let p=typeof l=="string"?lt.decode(l):l;if(!at(p))throw new Error(`checkScript: wrong script type=${p}`);return vT(p,t,r),{type:"leaf",version:u,script:p,hash:cu(p,u)}}if(e.length!==2&&(e=wT(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=Ld(e[0],t,r),i=Ld(e[1],t,r),[o,a]=[n.hash,i.hash];return Od(a,o)===-1&&([o,a]=[a,o]),{type:"branch",left:n,right:i,hash:cr.utils.taggedHash("TapBranch",o,a)}}function Rd(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:Rd(e.left,[e.right.hash,...t]),right:Rd(e.right,[e.left.hash,...t])}}function Dd(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...Dd(e.left),...Dd(e.right)]}var db=Kt(pu.BASE.toRawBytes(!1));function hb(e,t,r=ui,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?lt.decode(e):e||db;if(!io(i,Wt.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?Rd(Ld(t,i,n)):void 0,a=o?o.hash:void 0,[u,l]=ob(i,a||dt),p;o&&(p=Dd(o).map(T=>({...T,controlBlock:Qo.encode({version:(T.version||qd)+l,internalKey:i,merklePath:T.path})})));let x;p&&(x=p.map(T=>[Qo.decode(T.controlBlock),ci(T.script,new Uint8Array([T.version||qd]))]));let b={type:"tr",script:It.encode({type:"tr",pubkey:u}),address:bu(r).encode({type:"tr",pubkey:u}),tweakedPubkey:u,tapInternalKey:i};return p&&(b.leaves=p),x&&(b.tapLeafScript=x),a&&(b.tapMerkleRoot=a),b}var xT={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!at(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var ST={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=X3(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!at(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var AT={encode(e){return{type:"unknown",script:Tt.encode(e)}},decode:e=>e.type==="unknown"?Tt.decode(e.script):void 0},ET=[dT,hT,pT,yT,gT,mT,bT,xT,ST,AT],TT=xa(Tt,Zo.match(ET)),It=wr(TT,e=>{if(e.type==="pk"&&!io(e.pubkey,Wt.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!at(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!at(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!at(e.pubkey)||!io(e.pubkey,Wt.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!io(r,Wt.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!io(t,Wt.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function pb(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function Vd(e,t,r=ui){pb(e,t);let n=e===0?Qc:Pd;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function eb(e,t){return nb.encode(ci(Uint8Array.from(t),e))}function bu(e=ui){return{encode(t){let{type:r}=t;if(r==="wpkh")return Vd(0,t.hash,e);if(r==="wsh")return Vd(0,t.hash,e);if(r==="tr")return Vd(1,t.pubkey,e);if(r==="pkh")return eb(t.hash,[e.pubKeyHash]);if(r==="sh")return eb(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=Qc.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=Pd.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,a=Qc.fromWords(o);if(pb(i,a),i===0&&a.length===32)return{type:"wsh",hash:a};if(i===0&&a.length===20)return{type:"wpkh",hash:a};if(i===1&&a.length===32)return{type:"tr",pubkey:a};throw new Error("Unknown witness program")}let r=nb.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var st;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(st||(st={}));var Kd;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(Kd||(Kd={}));function PT(e){if(typeof e!="number"||typeof Kd[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function tb(e){let t=e&31;return{isAny:!!(e&st.ANYONECANPAY),isNone:t===st.NONE,isSingle:t===st.SINGLE}}function au(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:Ea(e.sequence,sb),finalScriptSig:Ea(e.finalScriptSig,dt)}}function rb(e){for(let t in e){let r=t;aT.includes(r)||delete e[r]}}function Jo(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var qd=192,cu=(e,t=qd)=>cr.utils.taggedHash("TapLeaf",new Uint8Array([t]),Xr.encode(e));function IT(e,t,r,n=dt){return rt(r,t)&&(e=Z3(e,n),t=cr.getPublicKey(e)),{privKey:e,pubKey:t}}var MT={}.toString;function BT(e){if(e!==void 0&&MT.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:Ea(e.version,J3),lockTime:Ea(e.lockTime,0),PSBTVersion:Ea(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(Xe.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var oo=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=BT(t);r.lockTime!==no&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=yn.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=Xm.decode(t)}catch(b){try{n=Qm.decode(t)}catch{throw b}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,a=i===0?o?.version:n.global.txVersion,u=i===0?o?.lockTime:n.global.fallbackLocktime,l=new e({...r,version:a,lockTime:u,PSBTVersion:i}),p=i===0?o?.inputs.length:n.global.inputCount;l.inputs=n.inputs.slice(0,p).map((b,T)=>({finalScriptSig:dt,...n.global.unsignedTx?.inputs[T],...b}));let x=i===0?o?.outputs.length:n.global.outputCount;return l.outputs=n.outputs.slice(0,x).map((b,T)=>({...b,...n.global.unsignedTx?.outputs[T]})),l.global={...n.global,txVersion:a},u!==no&&(l.global.fallbackLocktime=u),l}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>Jm(t,du,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>Jm(t,hu,o)),i={...this.global};return t===0?(i.unsignedTx=yn.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===no&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?Xm:Qm).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=no,r=0,n=no,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==no?n:this.global.fallbackLocktime||no}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===st.DEFAULT?st.ALL:r&3;return{sigInputs:r&st.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:u,sigOutputs:l}=this.inputSighash(o);if(u===st.ANYONECANPAY?n.push(o):t=!1,l===st.ALL)r=!1;else if(l===st.SINGLE)i.push(o);else if(l!==st.NONE)throw new Error(`Wrong signature hash output type: ${l}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(Jo);this.hasWitnesses&&(t+=2),t+=4*Qr.encode(this.inputs.length).length,t+=4*Qr.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*Xr.encode(n.finalScriptSig||dt).length;for(let n of r)t+=32+4*Xr.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=Hd.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return yn.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(au).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||dt})),outputs:this.outputs.map(Jo),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return lt.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return lt.encode(ai(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return lt.encode(ai(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),fu(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=lt.decode(i)),at(i)&&(i=yn.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=lt.decode(o)),o===void 0&&(o=r?.txid);let a={...r,...t,nonWitnessUtxo:i,txid:o};a.nonWitnessUtxo===void 0&&delete a.nonWitnessUtxo,a.sequence===void 0&&(a.sequence=sb),a.tapMerkleRoot===null&&delete a.tapMerkleRoot,a=kd(du,a,r,n),$d.encode(a);let u;return a.nonWitnessUtxo&&a.index!==void 0?u=a.nonWitnessUtxo.outputs[a.index]:a.witnessUtxo&&(u=a.witnessUtxo),u&&!this.opts.disableScriptCheck&&Nd(u&&u.script,a.redeemScript,a.witnessScript),a}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=cT)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),fu(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=lt.decode(o)),o===void 0&&(o=r?.script);let a={...r,...t,amount:i,script:o};if(a.amount===void 0&&delete a.amount,a=kd(hu,a,r,n),Fd.encode(a),a.script&&!this.opts.allowUnknownOutputs&&It.decode(a.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||Nd(a.script,a.redeemScript,a.witnessScript),a}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=uT)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=ui){return this.addOutput({script:It.encode(bu(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(Jo);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:a}=tb(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(a&&t>=this.outputs.length||t>=this.inputs.length)return Om.encode(1n);r=Tt.encode(Tt.decode(r).filter(x=>x!=="CODESEPARATOR"));let u=this.inputs.map(au).map((x,b)=>({...x,finalScriptSig:b===t?r:dt}));i?u=[u[t]]:(o||a)&&(u=u.map((x,b)=>({...x,sequence:b===t?x.sequence:0})));let l=this.outputs.map(Jo);o?l=[]:a&&(l=l.slice(0,t).fill(eT).concat([l[t]]));let p=yn.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:u,outputs:l});return ai(p,Yo.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:a,isSingle:u}=tb(n),l=su,p=su,x=su,b=this.inputs.map(au),T=this.outputs.map(Jo);o||(l=ai(...b.map(_d.encode))),!o&&!u&&!a&&(p=ai(...b.map(B=>Xe.encode(B.sequence)))),!u&&!a?x=ai(...T.map(Xo.encode)):u&&t<T.length&&(x=ai(Xo.encode(T[t])));let I=b[t];return ai(Yo.encode(this.version),l,p,ot(32,!0).encode(I.txid),Xe.encode(I.index),Xr.encode(r),wa.encode(i),Xe.encode(I.sequence),x,Xe.encode(this.lockTime),Xe.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,a,u=192,l){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let p=[jn.encode(0),jn.encode(n),Yo.encode(this.version),Xe.encode(this.lockTime)],x=n===st.DEFAULT?st.ALL:n&3,b=n&st.ANYONECANPAY,T=this.inputs.map(au),I=this.outputs.map(Jo);b!==st.ANYONECANPAY&&p.push(...[T.map(_d.encode),i.map(wa.encode),r.map(Xr.encode),T.map(P=>Xe.encode(P.sequence))].map(P=>Kt(ci(...P)))),x===st.ALL&&p.push(Kt(ci(...I.map(Xo.encode))));let B=(l?1:0)|(a?2:0);if(p.push(new Uint8Array([B])),b===st.ANYONECANPAY){let P=T[t];p.push(_d.encode(P),wa.encode(i[t]),Xr.encode(r[t]),Xe.encode(P.sequence))}else p.push(Xe.encode(t));return B&1&&p.push(Kt(Xr.encode(l||dt))),x===st.SINGLE&&p.push(t<I.length?Kt(Xo.encode(I[t])):su),a&&p.push(cu(a,u),jn.encode(0),Yo.encode(o)),cr.utils.taggedHash("TapSighash",...p)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=st.ALL,i=this.prevOut(t),o=It.decode(i.script),a=o.type,u=o,l=[o];if(o.type==="tr")return n=st.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let T=It.decode(t.redeemScript);(T.type==="wpkh"||T.type==="wsh")&&(r="segwit"),l.push(T),u=T,a+=`-${T.type}`}if(u.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let T=It.decode(t.witnessScript);T.type==="wsh"&&(r="segwit"),l.push(T),u=T,a+=`-${T.type}`}let p=l[l.length-1];if(p.type==="sh"||p.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let x=It.encode(p),b={type:a,txType:r,last:p,lastScript:x,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return b}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],a=this.inputType(o);if(!at(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let x=o.bip32Derivation.filter(T=>T[1].fingerprint==t.fingerprint).map(([T,{path:I}])=>{let B=t;for(let P of I)B=B.deriveChild(P);if(!rt(B.publicKey,T))throw new Error("bip32Derivation: wrong pubKey");if(!B.privateKey)throw new Error("bip32Derivation: no privateKey");return B});if(!x.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let b=!1;for(let T of x)this.signIdx(T.privateKey,r)&&(b=!0);return b}n?n.forEach(PT):n=[a.defaultSighash];let u=a.sighash;if(!n.includes(u))throw new Error(`Input with not allowed sigHash=${u}. Allowed: ${n.join(", ")}`);let{sigOutputs:l}=this.inputSighash(r);if(l===st.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let p=this.prevOut(o);if(a.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let x=this.inputs.map(this.prevOut),b=x.map(_=>_.script),T=x.map(_=>_.amount),I=!1,B=cr.getPublicKey(t),P=o.tapMerkleRoot||dt;if(o.tapInternalKey){let{pubKey:_,privKey:V}=IT(t,B,o.tapInternalKey,P),[L,U]=ob(o.tapInternalKey,P);if(rt(L,_)){let j=this.preimageWitnessV1(r,b,u,T),K=ci(cr.sign(j,V,i),u!==st.DEFAULT?new Uint8Array([u]):dt);this.updateInput(r,{tapKeySig:K},!0),I=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[_,V]of o.tapLeafScript){let L=V.subarray(0,-1),U=Tt.decode(L),j=V[V.length-1],K=cu(L,j);if(U.findIndex(G=>at(G)&&rt(G,B))===-1)continue;let q=this.preimageWitnessV1(r,b,u,T,void 0,L,j),C=ci(cr.sign(q,t,i),u!==st.DEFAULT?new Uint8Array([u]):dt);this.updateInput(r,{tapScriptSig:[[{pubKey:B,leafHash:K},C]]},!0),I=!0}}if(!I)throw new Error("No taproot scripts signed");return!0}else{let x=z3(t),b=!1,T=yu(x);for(let P of Tt.decode(a.lastScript))at(P)&&(rt(P,x)||rt(P,T))&&(b=!0);if(!b)throw new Error(`Input script doesn't have pubKey: ${a.lastScript}`);let I;if(a.txType==="legacy")I=this.preimageLegacy(r,a.lastScript,u);else if(a.txType==="segwit"){let P=a.lastScript;a.last.type==="wpkh"&&(P=It.encode({type:"pkh",hash:a.last.hash})),I=this.preimageWitnessV0(r,P,u,p.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${a.txType}`);let B=G3(I,t,this.opts.lowR);this.updateInput(r,{partialSig:[[x,ci(B,new Uint8Array([u]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let l=r.tapLeafScript.sort((p,x)=>Qo.encode(p[0]).length-Qo.encode(x[0]).length);for(let[p,x]of l){let b=x.slice(0,-1),T=x[x.length-1],I=It.decode(b),B=cu(b,T),P=r.tapScriptSig.filter(V=>rt(V[0].leafHash,B)),_=[];if(I.type==="tr_ms"){let V=I.m,L=I.pubkeys,U=0;for(let j of L){let K=P.findIndex(D=>rt(D[0].pubKey,j));if(U===V||K===-1){_.push(dt);continue}_.push(P[K][1]),U++}if(U!==V)continue}else if(I.type==="tr_ns"){for(let V of I.pubkeys){let L=P.findIndex(U=>rt(U[0].pubKey,V));L!==-1&&_.push(P[L][1])}if(_.length!==I.pubkeys.length)continue}else if(I.type==="unknown"&&this.opts.allowUnknownInputs){let V=Tt.decode(b);if(_=P.map(([{pubKey:L},U])=>{let j=V.findIndex(K=>at(K)&&rt(K,L));if(j===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:U,pos:j}}).sort((L,U)=>L.pos-U.pos).map(L=>L.signature),!_.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=_.reverse().concat([b,Qo.encode(p)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=dt,rb(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=dt,o=[];if(n.last.type==="ms"){let l=n.last.m,p=n.last.pubkeys,x=[];for(let b of p){let T=r.partialSig.find(I=>rt(b,I[0]));T&&x.push(T[1])}if(x=x.slice(0,l),x.length!==l)throw new Error(`Multisig: wrong signatures count, m=${l} n=${p.length} signatures=${x.length}`);i=Tt.encode([0,...x])}else if(n.last.type==="pk")i=Tt.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=Tt.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=dt,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let a,u;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=Tt.decode(i).map(l=>{if(l===0)return dt;if(at(l))return l;throw new Error(`Wrong witness op=${l}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(u=o),n.type.startsWith("sh-wsh-")?a=Tt.encode([Tt.encode([0,Kt(n.lastScript)])]):n.type.startsWith("sh-")?a=Tt.encode([...Tt.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(a=i),!a&&!u)throw new Error("Unknown error finalizing input");a&&(r.finalScriptSig=a),u&&(r.finalScriptWitness=u),rb(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?yn.encode(this.global.unsignedTx):dt,n=t.global.unsignedTx?yn.encode(t.global.unsignedTx):dt;if(!rt(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=kd(jd,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var yb=ze(Cy()),Zd=ze(J2());S();A();S();A();var _T=F.array(F.object({address:F.string(),signingIndexes:F.array(F.number()),sigHash:F.number().optional(),isScriptSpend:F.boolean().optional()})),VT=F.object({chainType:ra,signingType:F.literal("transaction"),message:F.string().min(1),inputsToSign:_T.optional(),finalize:F.boolean()}),UT=F.object({chainType:ra,signingType:F.literal("message"),message:F.instanceof(Uint8Array)}),OT=VT.or(UT),CT=F.object({chainType:F.literal("sui"),signingType:F.literal("transaction"),transaction:F.instanceof(Uint8Array)}),NT=F.object({chainType:F.literal("sui"),signingType:F.literal("personalMessage"),message:F.instanceof(Uint8Array)}),LT=CT.or(NT),RT=F.object({chainType:F.literal("solana"),signingType:F.literal("transaction"),message:F.union([F.string().min(1),F.instanceof(Uint8Array)])}),DT=F.object({chainType:F.literal("solana"),signingType:F.literal("message"),message:F.string().min(1)}),KT=RT.or(DT),qT=F.object({chainType:F.literal("eip155"),signingType:F.literal("transaction"),message:F.string().min(1)}),HT=F.object({chainType:F.literal("eip155"),signingType:F.literal("message"),message:F.string().min(1)}),jT=F.object({chainType:F.literal("eip155"),signingType:F.literal("typedData"),version:F.literal(1),data:uy}),WT=F.object({chainType:F.literal("eip155"),signingType:F.literal("typedData"),version:F.literal(3),data:fy}),$T=F.object({chainType:F.literal("eip155"),signingType:F.literal("typedData"),version:F.literal(4),data:ly}),FT=qT.or(HT).or(jT).or(WT).or($T),zT=F.object({isJWT:F.literal(!0),data:zy}),GT=F.object({status:F.literal("success"),signature:F.string()}),ZT=F.object({status:F.literal("success"),signature:F.string()}),YT=F.object({status:F.literal("success"),signature:F.string(),message:F.instanceof(Uint8Array).optional()}),JT=F.object({status:F.literal("success"),signature:F.string()}),XT=F.object({status:F.literal("success"),signature:F.string(),signedJWT:Fy.optional()}),Gd=KT.or(FT).or(OT).or(LT).or(zT),gn=(P=>(P.InvalidInput="invalidInput",P.InvalidAccountId="invalidAccountId",P.InvalidAddressType="invalidAddressType",P.InvalidMessageEncoding="invalidMessageEncoding",P.InvalidDerivationPath="invalidDerivationPath",P.LedgerAppNotOpen="ledgerAppNotOpen",P.LedgerNotConnected="ledgerNotConnected",P.LedgerNeedPermission="ledgerNeedPermission",P.LedgerRejectAction="ledgerRejectAction",P.LedgerUnknownSignError="ledgerUnknownSignError",P.UnsupportedOperation="unsupportedOperation",P.InternalError="internalError",P.ExpiredTokenError="expiredToken",P.BeforeIATError="beforeTimeOfIssuance",P.InvalidClaimError="invalidClaim",P))(gn||{}),QT=F.object({status:F.literal("error"),type:F.nativeEnum(gn),message:F.string()}),e6=F.union([XT,YT,GT,ZT,JT,QT]);var t6={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},ct=(e,t)=>({status:"error",type:e,message:t??t6[e].message});var Yd=e=>e.length===32?e:e.slice(1,33);function r6(e){return Xt.Buffer.concat([(0,Zd.encode)(e.byteLength),e])}function n6(e){let{sha256:t}=yb.crypto,n=t(Xt.Buffer.from("BIP0322-signed-message"));return t(Xt.Buffer.concat([n,n,Xt.Buffer.from(e)])).toString("hex")}var i6=(e,t)=>{switch(e){case"bip122_p2tr":return Sy.getPublicKey(t);case"bip122_p2sh":return ml(t,!0);case"bip122_p2wpkh":return ml(t,!0);default:throw new Error("Unsupported Address Type")}},o6=(e,t)=>{let r=ui;switch(e){case"bip122_p2tr":return hb(t,void 0,r);case"bip122_p2wpkh":return zd(t,r);case"bip122_p2sh":{let n=zd(t,r);return lb(n,r)}default:throw new Error("Unsupported Address Type")}};function s6(e,t,r,n){let i=oo.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let a=ia("bip122:000000000019d6689c085ae165831e93",o.address),u=e[a];if(!u)throw new Error("missing private key for ("+a+")");let{publicKey:l,privateKey:p}=u;o.signingIndexes.forEach(x=>{let b=i.getInput(x),T=b.witnessUtxo?.script&&It.decode(b.witnessUtxo.script);if(!o.isScriptSpend&&!b.tapInternalKey&&T?.type==="tr"&&i.updateInput(x,{tapInternalKey:Yd(Xt.Buffer.from(l))}),o.sigHash)try{i.signIdx(p,x,[o.sigHash],ya(32))}catch{i.signIdx(p,x,void 0,ya(32))}else i.signIdx(p,x,void 0,ya(32));if(n)try{i.finalizeIdx(x)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var gb=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=Xt.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=Xt.Buffer.from(i).toString("hex"),a=i6(r,o),u=o6(r,a),l=Xt.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),p=0,x=4294967295,b=0,T=Tt.encode(["OP_0",Xt.Buffer.from(n6(n),"hex")]),I=new oo({allowUnknownOutputs:!0,version:p});I.addOutput({amount:BigInt(0),script:u.script}),I.addInput({txid:l,index:x,sequence:b,finalScriptSig:T});let B=new oo({allowUnknownOutputs:!0,version:p});B.addInput({txid:I.id,index:0,sequence:b,tapInternalKey:r==="bip122_p2tr"?a:void 0,witnessUtxo:{script:u.script,amount:BigInt(0)},redeemScript:u.redeemScript}),B.addOutput({script:Tt.encode(["RETURN"]),amount:BigInt(0)}),B.sign(Xt.Buffer.from(o,"hex"),void 0,ya(32)),B.finalize();let P=null,_=B.getInput(0);if(_.finalScriptWitness?.length){let V=(0,Zd.encode)(_.finalScriptWitness?.length);P=Xt.Buffer.concat([V,..._.finalScriptWitness.map(L=>r6(L))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:P.toString("hex"),message:B.toBytes()}}case"transaction":{let r=await s6(e,t.inputsToSign??[],Xt.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:Xt.Buffer.from(r).toString("hex")}}}}catch{return ct("internalError")}}});S();A();var Os=ze(Wi()),V1=ze(j2());var En=ze(_1()),U1=ze(No());var O1=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Os.Buffer.from(e.privateKey.slice()),n=En.SignTypedDataVersion.V1,{data:i}=t,o=(0,En.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=Os.Buffer.from(e.privateKey.slice()),n=En.SignTypedDataVersion.V3,i=t.data,o=(0,En.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=Os.Buffer.from(e.privateKey.slice()),n=En.SignTypedDataVersion.V4,i=t.data,o=(0,En.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,En.personalSign)({privateKey:Os.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=Os.Buffer.from(t.message.replace("0x",""),"hex"),n=new By(e.privateKey),i=`0x${(0,U1.keccak256)(r)}`,o=(0,V1.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(ct("invalidMessageEncoding"))}}});S();A();var ko=ze(Wi());S();A();S();A();S();A();S();A();function C1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function a4(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function mp(e,...t){if(!a4(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function N1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");C1(e.outputLen),C1(e.blockLen)}function Cs(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function L1(e,t){mp(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}S();A();S();A();var gf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function R1(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var mf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),cn=(e,t)=>e<<32-t|e>>>t,c4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!c4)throw new Error("Non little-endian hardware is not supported");function u4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Xa(e){if(typeof e=="string"&&(e=u4(e)),!R1(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function D1(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!R1(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Ns=class{clone(){return this._cloneInto()}},FR={}.toString;function K1(e){let t=n=>e().update(Xa(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function q1(e=32){if(gf&&typeof gf.getRandomValues=="function")return gf.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var bf=class extends Ns{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,N1(t);let n=Xa(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return Cs(this),this.iHash.update(t),this}digestInto(t){Cs(this),mp(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},bp=(e,t,r)=>new bf(e,t).update(r).digest();bp.create=(e,t)=>new bf(e,t);S();A();S();A();var Sp={};ny(Sp,{bitGet:()=>g4,bitLen:()=>y4,bitMask:()=>Qa,bitSet:()=>m4,bytesToHex:()=>Po,bytesToNumberBE:()=>$n,bytesToNumberLE:()=>vf,concatBytes:()=>Ls,createHmacDrbg:()=>xp,ensureBytes:()=>hr,equalBytes:()=>h4,hexToBytes:()=>Io,hexToNumber:()=>vp,isBytes:()=>un,numberToBytesBE:()=>bi,numberToBytesLE:()=>xf,numberToHexUnpadded:()=>$1,numberToVarBytesBE:()=>d4,utf8ToBytes:()=>p4,validateObject:()=>wi});S();A();var W1=BigInt(0),wf=BigInt(1),f4=BigInt(2);function un(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var l4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Po(e){if(!un(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=l4[e[r]];return t}function $1(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function vp(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var Wn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function H1(e){if(e>=Wn._0&&e<=Wn._9)return e-Wn._0;if(e>=Wn._A&&e<=Wn._F)return e-(Wn._A-10);if(e>=Wn._a&&e<=Wn._f)return e-(Wn._a-10)}function Io(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let a=H1(e.charCodeAt(o)),u=H1(e.charCodeAt(o+1));if(a===void 0||u===void 0){let l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=a*16+u}return n}function $n(e){return vp(Po(e))}function vf(e){if(!un(e))throw new Error("Uint8Array expected");return vp(Po(Uint8Array.from(e).reverse()))}function bi(e,t){return Io(e.toString(16).padStart(t*2,"0"))}function xf(e,t){return bi(e,t).reverse()}function d4(e){return Io($1(e))}function hr(e,t,r){let n;if(typeof t=="string")try{n=Io(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(un(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Ls(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!un(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function h4(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function p4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function y4(e){let t;for(t=0;e>W1;e>>=wf,t+=1);return t}function g4(e,t){return e>>BigInt(t)&wf}var m4=(e,t,r)=>e|(r?wf:W1)<<BigInt(t),Qa=e=>(f4<<BigInt(e-1))-wf,wp=e=>new Uint8Array(e),j1=e=>Uint8Array.from(e);function xp(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=wp(e),i=wp(e),o=0,a=()=>{n.fill(1),i.fill(0),o=0},u=(...b)=>r(i,n,...b),l=(b=wp())=>{i=u(j1([0]),b),n=u(),b.length!==0&&(i=u(j1([1]),b),n=u())},p=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let b=0,T=[];for(;b<t;){n=u();let I=n.slice();T.push(I),b+=n.length}return Ls(...T)};return(b,T)=>{a(),l(b);let I;for(;!(I=T(p()));)l();return a(),I}}var b4={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||un(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function wi(e,t,r={}){let n=(i,o,a)=>{let u=b4[o];if(typeof u!="function")throw new Error(`Invalid validator "${o}", expected function`);let l=e[i];if(!(a&&l===void 0)&&!u(l,e))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Nt=BigInt(0),gt=BigInt(1),Mo=BigInt(2),w4=BigInt(3),Ap=BigInt(4),F1=BigInt(5),z1=BigInt(8),v4=BigInt(9),x4=BigInt(16);function pr(e,t){let r=e%t;return r>=Nt?r:t+r}function S4(e,t,r){if(r<=Nt||t<Nt)throw new Error("Expected power/modulo > 0");if(r===gt)return Nt;let n=gt;for(;t>Nt;)t&gt&&(n=n*e%r),e=e*e%r,t>>=gt;return n}function Sf(e,t){if(e===Nt||t<=Nt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=pr(e,t),n=t,i=Nt,o=gt,a=gt,u=Nt;for(;r!==Nt;){let p=n/r,x=n%r,b=i-a*p,T=o-u*p;n=r,r=x,i=a,o=u,a=b,u=T}if(n!==gt)throw new Error("invert: does not exist");return pr(i,t)}function A4(e){let t=(e-gt)/Mo,r,n,i;for(r=e-gt,n=0;r%Mo===Nt;r/=Mo,n++);for(i=Mo;i<e&&S4(i,t,e)!==e-gt;i++);if(n===1){let a=(e+gt)/Ap;return function(l,p){let x=l.pow(p,a);if(!l.eql(l.sqr(x),p))throw new Error("Cannot find square root");return x}}let o=(r+gt)/Mo;return function(u,l){if(u.pow(l,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let p=n,x=u.pow(u.mul(u.ONE,i),r),b=u.pow(l,o),T=u.pow(l,r);for(;!u.eql(T,u.ONE);){if(u.eql(T,u.ZERO))return u.ZERO;let I=1;for(let P=u.sqr(T);I<p&&!u.eql(P,u.ONE);I++)P=u.sqr(P);let B=u.pow(x,gt<<BigInt(p-I-1));x=u.sqr(B),b=u.mul(b,B),T=u.mul(T,x),p=I}return b}}function E4(e){if(e%Ap===w4){let t=(e+gt)/Ap;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%z1===F1){let t=(e-F1)/z1;return function(n,i){let o=n.mul(i,Mo),a=n.pow(o,t),u=n.mul(i,a),l=n.mul(n.mul(u,Mo),a),p=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(p),i))throw new Error("Cannot find square root");return p}}return e%x4,A4(e)}var T4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ep(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=T4.reduce((n,i)=>(n[i]="function",n),t);return wi(e,r)}function P4(e,t,r){if(r<Nt)throw new Error("Expected power > 0");if(r===Nt)return e.ONE;if(r===gt)return t;let n=e.ONE,i=t;for(;r>Nt;)r&gt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=gt;return n}function I4(e,t){let r=new Array(t.length),n=t.reduce((o,a,u)=>e.is0(a)?o:(r[u]=o,e.mul(o,a)),e.ONE),i=e.inv(n);return t.reduceRight((o,a,u)=>e.is0(a)?o:(r[u]=e.mul(o,r[u]),e.mul(o,a)),i),r}function Tp(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function G1(e,t,r=!1,n={}){if(e<=Nt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=Tp(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=E4(e),u=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Qa(i),ZERO:Nt,ONE:gt,create:l=>pr(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Nt<=l&&l<e},is0:l=>l===Nt,isOdd:l=>(l&gt)===gt,neg:l=>pr(-l,e),eql:(l,p)=>l===p,sqr:l=>pr(l*l,e),add:(l,p)=>pr(l+p,e),sub:(l,p)=>pr(l-p,e),mul:(l,p)=>pr(l*p,e),pow:(l,p)=>P4(u,l,p),div:(l,p)=>pr(l*Sf(p,e),e),sqrN:l=>l*l,addN:(l,p)=>l+p,subN:(l,p)=>l-p,mulN:(l,p)=>l*p,inv:l=>Sf(l,e),sqrt:n.sqrt||(l=>a(u,l)),invertBatch:l=>I4(u,l),cmov:(l,p,x)=>x?p:l,toBytes:l=>r?xf(l,o):bi(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return r?vf(l):$n(l)}});return Object.freeze(u)}function Z1(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Pp(e){let t=Z1(e);return t+Math.ceil(t/2)}function Af(e,t,r=!1){let n=e.length,i=Z1(t),o=Pp(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=r?$n(e):vf(e),u=pr(a,t-gt)+gt;return r?xf(u,i):bi(u,i)}S();A();var M4=BigInt(0),Ip=BigInt(1);function J1(e,t){let r=(i,o)=>{let a=o.negate();return i?a:o},n=i=>{let o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,o){let a=e.ZERO,u=i;for(;o>M4;)o&Ip&&(a=a.add(u)),u=u.double(),o>>=Ip;return a},precomputeWindow(i,o){let{windows:a,windowSize:u}=n(o),l=[],p=i,x=p;for(let b=0;b<a;b++){x=p,l.push(x);for(let T=1;T<u;T++)x=x.add(p),l.push(x);p=x.double()}return l},wNAF(i,o,a){let{windows:u,windowSize:l}=n(i),p=e.ZERO,x=e.BASE,b=BigInt(2**i-1),T=2**i,I=BigInt(i);for(let B=0;B<u;B++){let P=B*l,_=Number(a&b);a>>=I,_>l&&(_-=T,a+=Ip);let V=P,L=P+Math.abs(_)-1,U=B%2!==0,j=_<0;_===0?x=x.add(r(U,o[V])):p=p.add(r(j,o[L]))}return{p,f:x}},wNAFCached(i,o,a,u){let l=i._WINDOW_SIZE||1,p=o.get(i);return p||(p=this.precomputeWindow(i,l),l!==1&&o.set(i,u(p))),this.wNAF(l,p,a)}}}function Mp(e){return Ep(e.Fp),wi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Tp(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function B4(e){let t=Mp(e);wi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:k4,hexToBytes:_4}=Sp,Bo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Bo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:k4(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Bo,r=typeof e=="string"?_4(e):e;if(!un(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=Bo._parseInt(r.subarray(2)),{d:a,l:u}=Bo._parseInt(o);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=p=>Number.parseInt(p[0],16)&8?"00"+p:p,r=p=>{let x=p.toString(16);return x.length&1?`0${x}`:x},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,a=i.length/2,u=r(o),l=r(a);return`30${r(a+o+4)}02${l}${i}02${u}${n}`}},Fn=BigInt(0),Pr=BigInt(1),p7=BigInt(2),X1=BigInt(3),y7=BigInt(4);function V4(e){let t=B4(e),{Fp:r}=t,n=t.toBytes||((B,P,_)=>{let V=P.toAffine();return Ls(Uint8Array.from([4]),r.toBytes(V.x),r.toBytes(V.y))}),i=t.fromBytes||(B=>{let P=B.subarray(1),_=r.fromBytes(P.subarray(0,r.BYTES)),V=r.fromBytes(P.subarray(r.BYTES,2*r.BYTES));return{x:_,y:V}});function o(B){let{a:P,b:_}=t,V=r.sqr(B),L=r.mul(V,B);return r.add(r.add(L,r.mul(B,P)),_)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(B){return typeof B=="bigint"&&Fn<B&&B<t.n}function u(B){if(!a(B))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(B){let{allowedPrivateKeyLengths:P,nByteLength:_,wrapPrivateKey:V,n:L}=t;if(P&&typeof B!="bigint"){if(un(B)&&(B=Po(B)),typeof B!="string"||!P.includes(B.length))throw new Error("Invalid key");B=B.padStart(_*2,"0")}let U;try{U=typeof B=="bigint"?B:$n(hr("private key",B,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof B}`)}return V&&(U=pr(U,L)),u(U),U}let p=new Map;function x(B){if(!(B instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(P,_,V){if(this.px=P,this.py=_,this.pz=V,P==null||!r.isValid(P))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(V==null||!r.isValid(V))throw new Error("z required")}static fromAffine(P){let{x:_,y:V}=P||{};if(!P||!r.isValid(_)||!r.isValid(V))throw new Error("invalid affine point");if(P instanceof b)throw new Error("projective point not allowed");let L=U=>r.eql(U,r.ZERO);return L(_)&&L(V)?b.ZERO:new b(_,V,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){let _=r.invertBatch(P.map(V=>V.pz));return P.map((V,L)=>V.toAffine(_[L])).map(b.fromAffine)}static fromHex(P){let _=b.fromAffine(i(hr("pointHex",P)));return _.assertValidity(),_}static fromPrivateKey(P){return b.BASE.multiply(l(P))}_setWindowSize(P){this._WINDOW_SIZE=P,p.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:P,y:_}=this.toAffine();if(!r.isValid(P)||!r.isValid(_))throw new Error("bad point: x or y not FE");let V=r.sqr(_),L=o(P);if(!r.eql(V,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:P}=this.toAffine();if(r.isOdd)return!r.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){x(P);let{px:_,py:V,pz:L}=this,{px:U,py:j,pz:K}=P,D=r.eql(r.mul(_,K),r.mul(U,L)),q=r.eql(r.mul(V,K),r.mul(j,L));return D&&q}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:P,b:_}=t,V=r.mul(_,X1),{px:L,py:U,pz:j}=this,K=r.ZERO,D=r.ZERO,q=r.ZERO,C=r.mul(L,L),G=r.mul(U,U),v=r.mul(j,j),s=r.mul(L,U);return s=r.add(s,s),q=r.mul(L,j),q=r.add(q,q),K=r.mul(P,q),D=r.mul(V,v),D=r.add(K,D),K=r.sub(G,D),D=r.add(G,D),D=r.mul(K,D),K=r.mul(s,K),q=r.mul(V,q),v=r.mul(P,v),s=r.sub(C,v),s=r.mul(P,s),s=r.add(s,q),q=r.add(C,C),C=r.add(q,C),C=r.add(C,v),C=r.mul(C,s),D=r.add(D,C),v=r.mul(U,j),v=r.add(v,v),C=r.mul(v,s),K=r.sub(K,C),q=r.mul(v,G),q=r.add(q,q),q=r.add(q,q),new b(K,D,q)}add(P){x(P);let{px:_,py:V,pz:L}=this,{px:U,py:j,pz:K}=P,D=r.ZERO,q=r.ZERO,C=r.ZERO,G=t.a,v=r.mul(t.b,X1),s=r.mul(_,U),f=r.mul(V,j),d=r.mul(L,K),y=r.add(_,V),h=r.add(U,j);y=r.mul(y,h),h=r.add(s,f),y=r.sub(y,h),h=r.add(_,L);let w=r.add(U,K);return h=r.mul(h,w),w=r.add(s,d),h=r.sub(h,w),w=r.add(V,L),D=r.add(j,K),w=r.mul(w,D),D=r.add(f,d),w=r.sub(w,D),C=r.mul(G,h),D=r.mul(v,d),C=r.add(D,C),D=r.sub(f,C),C=r.add(f,C),q=r.mul(D,C),f=r.add(s,s),f=r.add(f,s),d=r.mul(G,d),h=r.mul(v,h),f=r.add(f,d),d=r.sub(s,d),d=r.mul(G,d),h=r.add(h,d),s=r.mul(f,h),q=r.add(q,s),s=r.mul(w,h),D=r.mul(y,D),D=r.sub(D,s),s=r.mul(y,f),C=r.mul(w,C),C=r.add(C,s),new b(D,q,C)}subtract(P){return this.add(P.negate())}is0(){return this.equals(b.ZERO)}wNAF(P){return I.wNAFCached(this,p,P,_=>{let V=r.invertBatch(_.map(L=>L.pz));return _.map((L,U)=>L.toAffine(V[U])).map(b.fromAffine)})}multiplyUnsafe(P){let _=b.ZERO;if(P===Fn)return _;if(u(P),P===Pr)return this;let{endo:V}=t;if(!V)return I.unsafeLadder(this,P);let{k1neg:L,k1:U,k2neg:j,k2:K}=V.splitScalar(P),D=_,q=_,C=this;for(;U>Fn||K>Fn;)U&Pr&&(D=D.add(C)),K&Pr&&(q=q.add(C)),C=C.double(),U>>=Pr,K>>=Pr;return L&&(D=D.negate()),j&&(q=q.negate()),q=new b(r.mul(q.px,V.beta),q.py,q.pz),D.add(q)}multiply(P){u(P);let _=P,V,L,{endo:U}=t;if(U){let{k1neg:j,k1:K,k2neg:D,k2:q}=U.splitScalar(_),{p:C,f:G}=this.wNAF(K),{p:v,f:s}=this.wNAF(q);C=I.constTimeNegate(j,C),v=I.constTimeNegate(D,v),v=new b(r.mul(v.px,U.beta),v.py,v.pz),V=C.add(v),L=G.add(s)}else{let{p:j,f:K}=this.wNAF(_);V=j,L=K}return b.normalizeZ([V,L])[0]}multiplyAndAddUnsafe(P,_,V){let L=b.BASE,U=(K,D)=>D===Fn||D===Pr||!K.equals(L)?K.multiplyUnsafe(D):K.multiply(D),j=U(this,_).add(U(P,V));return j.is0()?void 0:j}toAffine(P){let{px:_,py:V,pz:L}=this,U=this.is0();P==null&&(P=U?r.ONE:r.inv(L));let j=r.mul(_,P),K=r.mul(V,P),D=r.mul(L,P);if(U)return{x:r.ZERO,y:r.ZERO};if(!r.eql(D,r.ONE))throw new Error("invZ was invalid");return{x:j,y:K}}isTorsionFree(){let{h:P,isTorsionFree:_}=t;if(P===Pr)return!0;if(_)return _(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:P,clearCofactor:_}=t;return P===Pr?this:_?_(b,this):this.multiplyUnsafe(t.h)}toRawBytes(P=!0){return this.assertValidity(),n(b,this,P)}toHex(P=!0){return Po(this.toRawBytes(P))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let T=t.nBitLength,I=J1(b,t.endo?Math.ceil(T/2):T);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function U4(e){let t=Mp(e);return wi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Q1(e){let t=U4(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function a(h){return Fn<h&&h<r.ORDER}function u(h){return pr(h,n)}function l(h){return Sf(h,n)}let{ProjectivePoint:p,normPrivateKeyToScalar:x,weierstrassEquation:b,isWithinCurveOrder:T}=V4({...t,toBytes(h,w,E){let g=w.toAffine(),c=r.toBytes(g.x),m=Ls;return E?m(Uint8Array.from([w.hasEvenY()?2:3]),c):m(Uint8Array.from([4]),c,r.toBytes(g.y))},fromBytes(h){let w=h.length,E=h[0],g=h.subarray(1);if(w===i&&(E===2||E===3)){let c=$n(g);if(!a(c))throw new Error("Point is not on curve");let m=b(c),O=r.sqrt(m),N=(O&Pr)===Pr;return(E&1)===1!==N&&(O=r.neg(O)),{x:c,y:O}}else if(w===o&&E===4){let c=r.fromBytes(g.subarray(0,r.BYTES)),m=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:c,y:m}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),I=h=>Po(bi(h,t.nByteLength));function B(h){let w=n>>Pr;return h>w}function P(h){return B(h)?u(-h):h}let _=(h,w,E)=>$n(h.slice(w,E));class V{constructor(w,E,g){this.r=w,this.s=E,this.recovery=g,this.assertValidity()}static fromCompact(w){let E=t.nByteLength;return w=hr("compactSignature",w,E*2),new V(_(w,0,E),_(w,E,2*E))}static fromDER(w){let{r:E,s:g}=Bo.toSig(hr("DER",w));return new V(E,g)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new V(this.r,this.s,w)}recoverPublicKey(w){let{r:E,s:g,recovery:c}=this,m=q(hr("msgHash",w));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let O=c===2||c===3?E+t.n:E;if(O>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let N=c&1?"03":"02",R=p.fromHex(N+I(O)),H=l(O),$=u(-m*H),Z=u(g*H),Ne=p.BASE.multiplyAndAddUnsafe(R,$,Z);if(!Ne)throw new Error("point at infinify");return Ne.assertValidity(),Ne}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new V(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Io(this.toDERHex())}toDERHex(){return Bo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Io(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}let L={isValidPrivateKey(h){try{return x(h),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{let h=Pp(t.n);return Af(t.randomBytes(h),t.n)},precompute(h=8,w=p.BASE){return w._setWindowSize(h),w.multiply(BigInt(3)),w}};function U(h,w=!0){return p.fromPrivateKey(h).toRawBytes(w)}function j(h){let w=un(h),E=typeof h=="string",g=(w||E)&&h.length;return w?g===i||g===o:E?g===2*i||g===2*o:h instanceof p}function K(h,w,E=!0){if(j(h))throw new Error("first arg must be private key");if(!j(w))throw new Error("second arg must be public key");return p.fromHex(w).multiply(x(h)).toRawBytes(E)}let D=t.bits2int||function(h){let w=$n(h),E=h.length*8-t.nBitLength;return E>0?w>>BigInt(E):w},q=t.bits2int_modN||function(h){return u(D(h))},C=Qa(t.nBitLength);function G(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Fn<=h&&h<C))throw new Error(`bigint expected < 2^${t.nBitLength}`);return bi(h,t.nByteLength)}function v(h,w,E=s){if(["recovered","canonical"].some(Y=>Y in E))throw new Error("sign() legacy options not supported");let{hash:g,randomBytes:c}=t,{lowS:m,prehash:O,extraEntropy:N}=E;m==null&&(m=!0),h=hr("msgHash",h),O&&(h=hr("prehashed msgHash",g(h)));let R=q(h),H=x(w),$=[G(H),G(R)];if(N!=null){let Y=N===!0?c(r.BYTES):N;$.push(hr("extraEntropy",Y))}let Z=Ls(...$),Ne=R;function X(Y){let ht=D(Y);if(!T(ht))return;let re=l(ht),J=p.BASE.multiply(ht).toAffine(),pt=u(J.x);if(pt===Fn)return;let ee=u(re*u(Ne+pt*H));if(ee===Fn)return;let ne=(J.x===pt?0:2)|Number(J.y&Pr),Zt=ee;return m&&B(ee)&&(Zt=P(ee),ne^=1),new V(pt,Zt,ne)}return{seed:Z,k2sig:X}}let s={lowS:t.lowS,prehash:!1},f={lowS:t.lowS,prehash:!1};function d(h,w,E=s){let{seed:g,k2sig:c}=v(h,w,E),m=t;return xp(m.hash.outputLen,m.nByteLength,m.hmac)(g,c)}p.BASE._setWindowSize(8);function y(h,w,E,g=f){let c=h;if(w=hr("msgHash",w),E=hr("publicKey",E),"strict"in g)throw new Error("options.strict was renamed to lowS");let{lowS:m,prehash:O}=g,N,R;try{if(typeof c=="string"||un(c))try{N=V.fromDER(c)}catch(J){if(!(J instanceof Bo.Err))throw J;N=V.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:J,s:pt}=c;N=new V(J,pt)}else throw new Error("PARSE");R=p.fromHex(E)}catch(J){if(J.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&N.hasHighS())return!1;O&&(w=t.hash(w));let{r:H,s:$}=N,Z=q(w),Ne=l($),X=u(Z*Ne),Y=u(H*Ne),ht=p.BASE.multiplyAndAddUnsafe(R,X,Y)?.toAffine();return ht?u(ht.x)===H:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:K,sign:d,verify:y,ProjectivePoint:p,Signature:V,utils:L}}function O4(e){return{hash:e,hmac:(t,...r)=>bp(e,t,D1(...r)),randomBytes:q1}}function eS(e,t){let r=n=>Q1({...e,...O4(n)});return Object.freeze({...r(t),create:r})}S();A();S();A();function C4(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,p=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+p,u,n)}var Ef=class extends Ns{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=mf(this.buffer)}update(t){Cs(this);let{view:r,buffer:n,blockLen:i}=this;t=Xa(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=mf(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Cs(this),L1(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;C4(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=mf(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=l/4,x=this.get();if(p>x.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)u.setUint32(4*b,x[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var N4=(e,t,r)=>e&t^~e&r,L4=(e,t,r)=>e&t^e&r^t&r,R4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xi=new Uint32Array(64),Bp=class extends Ef{constructor(){super(64,32,8,!1),this.A=vi[0]|0,this.B=vi[1]|0,this.C=vi[2]|0,this.D=vi[3]|0,this.E=vi[4]|0,this.F=vi[5]|0,this.G=vi[6]|0,this.H=vi[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)xi[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=xi[b-15],I=xi[b-2],B=cn(T,7)^cn(T,18)^T>>>3,P=cn(I,17)^cn(I,19)^I>>>10;xi[b]=P+xi[b-7]+B+xi[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:p,H:x}=this;for(let b=0;b<64;b++){let T=cn(u,6)^cn(u,11)^cn(u,25),I=x+T+N4(u,l,p)+R4[b]+xi[b]|0,P=(cn(n,2)^cn(n,13)^cn(n,22))+L4(n,i,o)|0;x=p,p=l,l=u,u=a+I|0,a=o,o=i,i=n,n=I+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,p=p+this.G|0,x=x+this.H|0,this.set(n,i,o,a,u,l,p,x)}roundClean(){xi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var tS=K1(()=>new Bp);var rS=G1(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),D4=rS.create(BigInt("-3")),K4=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),ec=eS({a:D4,b:K4,Fp:rS,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},tS);var nS=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(ct("invalidAddressType"));if(t.data.payload.iss!==Wy)return Promise.resolve(ct("invalidClaim"));if(t.data.payload.aud!==$y)return Promise.resolve(ct("invalidClaim"));let r={...t.data.header,kid:zr(ko.Buffer.from(e.publicKey))},n={...t.data.payload,sub:zr(ko.Buffer.from(e.publicKey))},i=zr(ko.Buffer.from(JSON.stringify(r)))+"."+zr(ko.Buffer.from(JSON.stringify(n))),a=ec.sign(ko.Buffer.from(i).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),u=zr(ko.Buffer.from(a)),l={header:r,payload:n,signature:u};return Promise.resolve({status:"success",signature:u,signedJWT:l})}});S();A();var iS=ze(Wi());var kp=ze(mc()),oS=ze($i());var sS=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(ct("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=kp.default.decode(t.message):r=iS.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ct("invalidMessageEncoding"))}let n=kp.default.encode(oS.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});S();A();S();A();S();A();var Uo=ze($i(),1);S();A();S();A();S();A();S();A();function Rs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function q4(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ds(e,...t){if(!q4(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function aS(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rs(e.outputLen),Rs(e.blockLen)}function zn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tf(e,t){Ds(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}S();A();var Ks=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Pf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var Ai=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,uS=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,fn=Ai?e=>e:e=>uS(e);function _o(e){for(let t=0;t<e.length;t++)e[t]=uS(e[t])}var H4=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function If(e){Ds(e);let t="";for(let r=0;r<e.length;r++)t+=H4[e[r]];return t}var Gn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function cS(e){if(e>=Gn._0&&e<=Gn._9)return e-Gn._0;if(e>=Gn._A&&e<=Gn._F)return e-(Gn._A-10);if(e>=Gn._a&&e<=Gn._f)return e-(Gn._a-10)}function fS(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let a=cS(e.charCodeAt(o)),u=cS(e.charCodeAt(o+1));if(a===void 0||u===void 0){let l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=a*16+u}return n}function j4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ir(e){return typeof e=="string"&&(e=j4(e)),Ds(e),e}var Si=class{clone(){return this._cloneInto()}},i9={}.toString;function lS(e){let t=n=>e().update(Ir(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function dS(e){let t=(n,i)=>e(i).update(Ir(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var hS=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),Mf=class extends Si{constructor(t,r,n={},i,o,a){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Rs(t),Rs(r),Rs(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=Ks(this.buffer=new Uint8Array(t))}update(t){zn(this);let{blockLen:r,buffer:n,buffer32:i}=this;t=Ir(t);let o=t.length,a=t.byteOffset,u=t.buffer;for(let l=0;l<o;){this.pos===r&&(Ai||_o(i),this.compress(i,0,!1),Ai||_o(i),this.pos=0);let p=Math.min(r-this.pos,o-l),x=a+l;if(p===r&&!(x%4)&&l+p<o){let b=new Uint32Array(u,x,Math.floor((o-l)/4));Ai||_o(b);for(let T=0;l+r<o;T+=i.length,l+=r)this.length+=r,this.compress(b,T,!1);Ai||_o(b);continue}n.set(t.subarray(l,l+p),this.pos),this.pos+=p,this.length+=p,l+=p}return this}digestInto(t){zn(this),Tf(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),Ai||_o(n),this.compress(n,0,!0),Ai||_o(n);let i=Ks(t);this.get().forEach((o,a)=>i[a]=fn(o))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:o,outputLen:a,pos:u}=this;return t||(t=new this.constructor({dkLen:a})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=o,t.outputLen=a,t.buffer.set(r),t.pos=u,t}};S();A();var Bf=BigInt(4294967295),_p=BigInt(32);function pS(e,t=!1){return t?{h:Number(e&Bf),l:Number(e>>_p&Bf)}:{h:Number(e>>_p&Bf)|0,l:Number(e&Bf)|0}}function W4(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:a}=pS(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}var $4=(e,t)=>BigInt(e>>>0)<<_p|BigInt(t>>>0),F4=(e,t,r)=>e>>>r,z4=(e,t,r)=>e<<32-r|t>>>r,G4=(e,t,r)=>e>>>r|t<<32-r,Z4=(e,t,r)=>e<<32-r|t>>>r,Y4=(e,t,r)=>e<<64-r|t>>>r-32,J4=(e,t,r)=>e>>>r-32|t<<64-r,X4=(e,t)=>t,Q4=(e,t)=>e,eB=(e,t,r)=>e<<r|t>>>32-r,tB=(e,t,r)=>t<<r|e>>>32-r,rB=(e,t,r)=>t<<r-32|e>>>64-r,nB=(e,t,r)=>e<<r-32|t>>>64-r;function iB(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var oB=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),sB=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,aB=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),cB=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,uB=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),fB=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;var lB={fromBig:pS,split:W4,toBig:$4,shrSH:F4,shrSL:z4,rotrSH:G4,rotrSL:Z4,rotrBH:Y4,rotrBL:J4,rotr32H:X4,rotr32L:Q4,rotlSH:eB,rotlSL:tB,rotlBH:rB,rotlBL:nB,add:iB,add3L:oB,add3H:sB,add4L:aB,add4H:cB,add5H:fB,add5L:uB},Q=lB;var Bt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),z=new Uint32Array(32);function Ei(e,t,r,n,i,o){let a=i[o],u=i[o+1],l=z[2*e],p=z[2*e+1],x=z[2*t],b=z[2*t+1],T=z[2*r],I=z[2*r+1],B=z[2*n],P=z[2*n+1],_=Q.add3L(l,x,a);p=Q.add3H(_,p,b,u),l=_|0,{Dh:P,Dl:B}={Dh:P^p,Dl:B^l},{Dh:P,Dl:B}={Dh:Q.rotr32H(P,B),Dl:Q.rotr32L(P,B)},{h:I,l:T}=Q.add(I,T,P,B),{Bh:b,Bl:x}={Bh:b^I,Bl:x^T},{Bh:b,Bl:x}={Bh:Q.rotrSH(b,x,24),Bl:Q.rotrSL(b,x,24)},z[2*e]=l,z[2*e+1]=p,z[2*t]=x,z[2*t+1]=b,z[2*r]=T,z[2*r+1]=I,z[2*n]=B,z[2*n+1]=P}function Ti(e,t,r,n,i,o){let a=i[o],u=i[o+1],l=z[2*e],p=z[2*e+1],x=z[2*t],b=z[2*t+1],T=z[2*r],I=z[2*r+1],B=z[2*n],P=z[2*n+1],_=Q.add3L(l,x,a);p=Q.add3H(_,p,b,u),l=_|0,{Dh:P,Dl:B}={Dh:P^p,Dl:B^l},{Dh:P,Dl:B}={Dh:Q.rotrSH(P,B,16),Dl:Q.rotrSL(P,B,16)},{h:I,l:T}=Q.add(I,T,P,B),{Bh:b,Bl:x}={Bh:b^I,Bl:x^T},{Bh:b,Bl:x}={Bh:Q.rotrBH(b,x,63),Bl:Q.rotrBL(b,x,63)},z[2*e]=l,z[2*e+1]=p,z[2*t]=x,z[2*t+1]=b,z[2*r]=T,z[2*r+1]=I,z[2*n]=B,z[2*n+1]=P}var Vp=class extends Mf{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Bt[0]|0,this.v0h=Bt[1]|0,this.v1l=Bt[2]|0,this.v1h=Bt[3]|0,this.v2l=Bt[4]|0,this.v2h=Bt[5]|0,this.v3l=Bt[6]|0,this.v3h=Bt[7]|0,this.v4l=Bt[8]|0,this.v4h=Bt[9]|0,this.v5l=Bt[10]|0,this.v5h=Bt[11]|0,this.v6l=Bt[12]|0,this.v6h=Bt[13]|0,this.v7l=Bt[14]|0,this.v7h=Bt[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let n=Ks(Ir(t.salt));this.v4l^=fn(n[0]),this.v4h^=fn(n[1]),this.v5l^=fn(n[2]),this.v5h^=fn(n[3])}if(t.personalization){let n=Ks(Ir(t.personalization));this.v6l^=fn(n[0]),this.v6h^=fn(n[1]),this.v7l^=fn(n[2]),this.v7h^=fn(n[3])}if(t.key){let n=new Uint8Array(this.blockLen);n.set(Ir(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:o,v2h:a,v3l:u,v3h:l,v4l:p,v4h:x,v5l:b,v5h:T,v6l:I,v6h:B,v7l:P,v7h:_}=this;return[t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_]}set(t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=o|0,this.v2h=a|0,this.v3l=u|0,this.v3h=l|0,this.v4l=p|0,this.v4h=x|0,this.v5l=b|0,this.v5h=T|0,this.v6l=I|0,this.v6h=B|0,this.v7l=P|0,this.v7h=_|0}compress(t,r,n){this.get().forEach((l,p)=>z[p]=l),z.set(Bt,16);let{h:i,l:o}=Q.fromBig(BigInt(this.length));z[24]=Bt[8]^o,z[25]=Bt[9]^i,n&&(z[28]=~z[28],z[29]=~z[29]);let a=0,u=hS;for(let l=0;l<12;l++)Ei(0,4,8,12,t,r+2*u[a++]),Ti(0,4,8,12,t,r+2*u[a++]),Ei(1,5,9,13,t,r+2*u[a++]),Ti(1,5,9,13,t,r+2*u[a++]),Ei(2,6,10,14,t,r+2*u[a++]),Ti(2,6,10,14,t,r+2*u[a++]),Ei(3,7,11,15,t,r+2*u[a++]),Ti(3,7,11,15,t,r+2*u[a++]),Ei(0,5,10,15,t,r+2*u[a++]),Ti(0,5,10,15,t,r+2*u[a++]),Ei(1,6,11,12,t,r+2*u[a++]),Ti(1,6,11,12,t,r+2*u[a++]),Ei(2,7,8,13,t,r+2*u[a++]),Ti(2,7,8,13,t,r+2*u[a++]),Ei(3,4,9,14,t,r+2*u[a++]),Ti(3,4,9,14,t,r+2*u[a++]);this.v0l^=z[0]^z[16],this.v0h^=z[1]^z[17],this.v1l^=z[2]^z[18],this.v1h^=z[3]^z[19],this.v2l^=z[4]^z[20],this.v2h^=z[5]^z[21],this.v3l^=z[6]^z[22],this.v3h^=z[7]^z[23],this.v4l^=z[8]^z[24],this.v4h^=z[9]^z[25],this.v5l^=z[10]^z[26],this.v5h^=z[11]^z[27],this.v6l^=z[12]^z[28],this.v6h^=z[13]^z[29],this.v7l^=z[14]^z[30],this.v7h^=z[15]^z[31],z.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Vo=dS(e=>new Vp(e));var ic=ze(z2(),1);S();A();S();A();S();A();S();A();var Pi=32;function yS(e){return dB(e)&&hB(e)===Pi}function Tn(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Pi*2,"0")}`}function dB(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function hB(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}S();A();var pB=/^vector<(.+)>$/,yB=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,tc=class e{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(pB);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(yB);if(i)return{struct:{address:r?Tn(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return _y(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function gB(e){return M.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function mB(e){return M.enum("Option",{None:null,Some:e})}var nt=M.bytes(Pi).transform({validate:e=>{let t=typeof e=="string"?e:Fi(e);if(!t||!yS(Tn(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?xc(Tn(e)):e,output:e=>Tn(Fi(e))}),yr=M.vector(M.u8()).transform({name:"ObjectDigest",input:e=>bl(e),output:e=>ky(new Uint8Array(e)),validate:e=>{if(bl(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),nr=M.struct("SuiObjectRef",{objectId:nt,version:M.u64(),digest:yr}),Up=M.struct("SharedObjectRef",{objectId:nt,initialSharedVersion:M.u64(),mutable:M.bool()}),Op=M.enum("ObjectArg",{ImmOrOwnedObject:nr,SharedObject:Up,Receiving:nr}),Cp=M.enum("CallArg",{Pure:M.struct("Pure",{bytes:M.vector(M.u8()).transform({input:e=>typeof e=="string"?Yt(e):e,output:e=>kt(new Uint8Array(e))})}),Object:Op}),Np=M.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:M.lazy(()=>Np),struct:M.lazy(()=>Hp),u16:null,u32:null,u256:null}),kf=Np.transform({input:e=>typeof e=="string"?tc.parseFromStr(e,!0):e,output:e=>tc.tagToString(e)}),ln=M.enum("Argument",{GasCoin:null,Input:M.u16(),Result:M.u16(),NestedResult:M.tuple([M.u16(),M.u16()])}),Lp=M.struct("ProgrammableMoveCall",{package:nt,module:M.string(),function:M.string(),typeArguments:M.vector(kf),arguments:M.vector(ln)}),Rp=M.enum("Command",{MoveCall:Lp,TransferObjects:M.struct("TransferObjects",{objects:M.vector(ln),address:ln}),SplitCoins:M.struct("SplitCoins",{coin:ln,amounts:M.vector(ln)}),MergeCoins:M.struct("MergeCoins",{destination:ln,sources:M.vector(ln)}),Publish:M.struct("Publish",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?Yt(e):e,output:e=>kt(new Uint8Array(e))})),dependencies:M.vector(nt)}),MakeMoveVec:M.struct("MakeMoveVec",{type:mB(kf).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:M.vector(ln)}),Upgrade:M.struct("Upgrade",{modules:M.vector(M.vector(M.u8()).transform({input:e=>typeof e=="string"?Yt(e):e,output:e=>kt(new Uint8Array(e))})),dependencies:M.vector(nt),package:nt,ticket:ln})}),Dp=M.struct("ProgrammableTransaction",{inputs:M.vector(Cp),commands:M.vector(Rp)}),Kp=M.enum("TransactionKind",{ProgrammableTransaction:Dp,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),qp=M.enum("TransactionExpiration",{None:null,Epoch:gB()}),Hp=M.struct("StructTag",{address:nt,module:M.string(),name:M.string(),typeParams:M.vector(Np)}),jp=M.struct("GasData",{payment:M.vector(nr),owner:nt,price:M.u64(),budget:M.u64()}),Wp=M.struct("TransactionDataV1",{kind:Kp,sender:nt,gasData:jp,expiration:qp}),$p=M.enum("TransactionData",{V1:Wp}),Fp=M.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),zp=M.enum("IntentVersion",{V0:null}),Gp=M.enum("AppId",{Sui:null}),Zp=M.struct("Intent",{scope:Fp,version:zp,appId:Gp});function Yp(e){return M.struct(`IntentMessage<${e.name}>`,{intent:Zp,value:e})}var Jp=M.enum("CompressedSignature",{ED25519:M.fixedArray(64,M.u8()),Secp256k1:M.fixedArray(64,M.u8()),Secp256r1:M.fixedArray(64,M.u8()),ZkLogin:M.vector(M.u8())}),Xp=M.enum("PublicKey",{ED25519:M.fixedArray(32,M.u8()),Secp256k1:M.fixedArray(33,M.u8()),Secp256r1:M.fixedArray(33,M.u8()),ZkLogin:M.vector(M.u8())}),Qp=M.struct("MultiSigPkMap",{pubKey:Xp,weight:M.u8()}),e0=M.struct("MultiSigPublicKey",{pk_map:M.vector(Qp),threshold:M.u16()}),gS=M.struct("MultiSig",{sigs:M.vector(Jp),bitmap:M.u16(),multisig_pk:e0}),bB=M.vector(M.u8()).transform({input:e=>typeof e=="string"?Yt(e):e,output:e=>kt(new Uint8Array(e))}),t0=M.struct("SenderSignedTransaction",{intentMessage:Yp($p),txSignatures:M.vector(bB)}),mS=M.vector(t0,{name:"SenderSignedData"});S();A();var wB=M.enum("PackageUpgradeError",{UnableToFetchPackage:M.struct("UnableToFetchPackage",{packageId:nt}),NotAPackage:M.struct("NotAPackage",{objectId:nt}),IncompatibleUpgrade:null,DigestDoesNotMatch:M.struct("DigestDoesNotMatch",{digest:M.vector(M.u8())}),UnknownUpgradePolicy:M.struct("UnknownUpgradePolicy",{policy:M.u8()}),PackageIDDoesNotMatch:M.struct("PackageIDDoesNotMatch",{packageId:nt,ticketId:nt})}),vB=M.struct("ModuleId",{address:nt,name:M.string()}),bS=M.struct("MoveLocation",{module:vB,function:M.u16(),instruction:M.u16(),functionName:M.option(M.string())}),xB=M.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:M.struct("IndexOutOfBounds",{idx:M.u16()}),SecondaryIndexOutOfBounds:M.struct("SecondaryIndexOutOfBounds",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidResultArity:M.struct("InvalidResultArity",{resultIdx:M.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),SB=M.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),AB=M.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:M.struct("MoveObjectTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),MovePackageTooBig:M.struct("MovePackageTooBig",{objectSize:M.u64(),maxObjectSize:M.u64()}),CircularObjectOwnership:M.struct("CircularObjectOwnership",{object:nt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:M.option(bS),MoveAbort:M.tuple([bS,M.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:M.struct("CommandArgumentError",{argIdx:M.u16(),kind:xB}),TypeArgumentError:M.struct("TypeArgumentError",{argumentIdx:M.u16(),kind:SB}),UnusedValueWithoutDrop:M.struct("UnusedValueWithoutDrop",{resultIdx:M.u16(),secondaryIdx:M.u16()}),InvalidPublicFunctionReturnType:M.struct("InvalidPublicFunctionReturnType",{idx:M.u16()}),InvalidTransferObject:null,EffectsTooLarge:M.struct("EffectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:M.struct("PackageUpgradeError",{upgradeError:wB}),WrittenObjectsTooLarge:M.struct("WrittenObjectsTooLarge",{currentSize:M.u64(),maxSize:M.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:M.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:M.vector(nt)}),AddressDeniedForCoin:M.struct("AddressDeniedForCoin",{address:nt,coinType:M.string()}),CoinTypeGlobalPause:M.struct("CoinTypeGlobalPause",{coinType:M.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),wS=M.enum("ExecutionStatus",{Success:null,Failed:M.struct("ExecutionFailed",{error:AB,command:M.option(M.u64())})}),vS=M.struct("GasCostSummary",{computationCost:M.u64(),storageCost:M.u64(),storageRebate:M.u64(),nonRefundableStorageFee:M.u64()}),qs=M.enum("Owner",{AddressOwner:nt,ObjectOwner:nt,Shared:M.struct("Shared",{initialSharedVersion:M.u64()}),Immutable:null}),EB=M.struct("TransactionEffectsV1",{status:wS,executedEpoch:M.u64(),gasUsed:vS,modifiedAtVersions:M.vector(M.tuple([nt,M.u64()])),sharedObjects:M.vector(nr),transactionDigest:yr,created:M.vector(M.tuple([nr,qs])),mutated:M.vector(M.tuple([nr,qs])),unwrapped:M.vector(M.tuple([nr,qs])),deleted:M.vector(nr),unwrappedThenDeleted:M.vector(nr),wrapped:M.vector(nr),gasObject:M.tuple([nr,qs]),eventsDigest:M.option(yr),dependencies:M.vector(yr)}),r0=M.tuple([M.u64(),yr]),TB=M.enum("ObjectIn",{NotExist:null,Exist:M.tuple([r0,qs])}),PB=M.enum("ObjectOut",{NotExist:null,ObjectWrite:M.tuple([yr,qs]),PackageWrite:r0}),IB=M.enum("IDOperation",{None:null,Created:null,Deleted:null}),MB=M.struct("EffectsObjectChange",{inputState:TB,outputState:PB,idOperation:IB}),BB=M.enum("UnchangedSharedKind",{ReadOnlyRoot:r0,MutateDeleted:M.u64(),ReadDeleted:M.u64(),Cancelled:M.u64(),PerEpochConfig:null}),kB=M.struct("TransactionEffectsV2",{status:wS,executedEpoch:M.u64(),gasUsed:vS,transactionDigest:yr,gasObjectIndex:M.option(M.u32()),eventsDigest:M.option(yr),dependencies:M.vector(yr),lamportVersion:M.u64(),changedObjects:M.vector(M.tuple([nt,MB])),unchangedSharedObjects:M.vector(M.tuple([nt,BB])),auxDataDigest:M.option(yr)}),xS=M.enum("TransactionEffects",{V1:EB,V2:kB});var Zn={...M,U8:M.u8(),U16:M.u16(),U32:M.u32(),U64:M.u64(),U128:M.u128(),U256:M.u256(),ULEB128:M.uleb128(),Bool:M.bool(),String:M.string(),Address:nt,AppId:Gp,Argument:ln,CallArg:Cp,CompressedSignature:Jp,GasData:jp,Intent:Zp,IntentMessage:Yp,IntentScope:Fp,IntentVersion:zp,MultiSig:gS,MultiSigPkMap:Qp,MultiSigPublicKey:e0,ObjectArg:Op,ObjectDigest:yr,ProgrammableMoveCall:Lp,ProgrammableTransaction:Dp,PublicKey:Xp,SenderSignedData:mS,SenderSignedTransaction:t0,SharedObjectRef:Up,StructTag:Hp,SuiObjectRef:nr,Command:Rp,TransactionData:$p,TransactionDataV1:Wp,TransactionExpiration:qp,TransactionKind:Kp,TypeTag:kf,TransactionEffects:xS};function _f(e,t){return Zn.IntentMessage(Zn.fixedArray(t.length,Zn.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}S();A();var Yn={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},SS={ED25519:32,Secp256k1:33,Secp256r1:33},Vf={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};S();A();S();A();S();A();function n0(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Hs=class{equals(t){return n0(this.toRawBytes(),t.toRawBytes())}toBase64(){return kt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return kt(t)}verifyWithIntent(t,r,n){let i=_f(n,t),o=Vo(i,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Zn.vector(Zn.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Tn(If(Vo(this.toSuiBytes(),{dkLen:32})).slice(0,Pi*2))}};S();A();var AS=e=>{throw TypeError(e)},ES=(e,t,r)=>t.has(e)||AS("Cannot "+r),Uf=(e,t,r)=>(ES(e,t,"read from private field"),r?r.call(e):t.get(e)),Of=(e,t,r)=>t.has(e)?AS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Cf=(e,t,r,n)=>(ES(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Nf,Lf,Rf,Df,i0=class extends Error{},Kf=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){Of(this,Nf),Of(this,Lf),Of(this,Rf),Of(this,Df),Cf(this,Nf,t),Cf(this,Lf,i),Cf(this,Rf,n),Cf(this,Df,(...o)=>r(...o))}async query(t){let r=await Uf(this,Df).call(this,Uf(this,Nf),{method:"POST",headers:{"Content-Type":"application/json",...Uf(this,Rf)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):Vy(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new i0(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Uf(this,Lf)[t]})}};Nf=new WeakMap;Lf=new WeakMap;Rf=new WeakMap;Df=new WeakMap;S();A();var TS=Uy();S();A();function _B(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function VB(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=_B(n);t=t.concat(i)}return t}function UB(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=VB(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),a=0;for(let u=0;u<r.length;u+=8){let l=r.slice(u,u+8),p=parseInt(l.join(""),2);o[a++]=p}return new TextDecoder().decode(o)}function OB(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function PS(e,t){let r=UB(e.value,e.indexMod4),[n,i]=OB(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}S();A();S();A();var IS=M.struct("ZkLoginSignature",{inputs:M.struct("ZkLoginSignatureInputs",{proofPoints:M.struct("ZkLoginSignatureInputsProofPoints",{a:M.vector(M.string()),b:M.vector(M.vector(M.string())),c:M.vector(M.string())}),issBase64Details:M.struct("ZkLoginSignatureInputsClaim",{value:M.string(),indexMod4:M.u8()}),headerBase64:M.string(),addressSeed:M.string()}),maxEpoch:M.u64(),userSignature:M.vector(M.u8())});function MS(e){return IS.parse(typeof e=="string"?Yt(e):e)}S();A();function CB(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function qf(e,t){let r=e.toString(16);return fS(r.padStart(t*2,"0").slice(-t*2))}function o0(e,t){let r=qf(e,t),n=CB(r);return n===-1?new Uint8Array([0]):r.slice(n)}var _S=e=>{throw TypeError(e)},VS=(e,t,r)=>t.has(e)||_S("Cannot "+r),Jn=(e,t,r)=>(VS(e,t,"read from private field"),r?r.call(e):t.get(e)),s0=(e,t,r)=>t.has(e)?_S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),js=(e,t,r,n)=>(VS(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),dn,rc,nc,NB=class a0 extends Hs{constructor(t,{client:r}={}){super(),s0(this,dn),s0(this,rc),s0(this,nc),js(this,rc,r),typeof t=="string"?js(this,dn,Yt(t)):t instanceof Uint8Array?js(this,dn,t):js(this,dn,Uint8Array.from(t)),js(this,nc,Jn(this,dn).length!==Jn(this,dn)[0]+1+32),Jn(this,nc)&&js(this,dn,BS(Jn(this,dn)))}equals(t){return super.equals(t)}toSuiAddress(){if(Jn(this,nc)){let t=BS(Jn(this,dn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),Tn(If(Vo(r,{dkLen:32})).slice(0,Pi*2))}return super.toSuiAddress()}toRawBytes(){return Jn(this,dn)}flag(){return Yn.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Hf(r),i=new a0(n.publicKey).toSuiAddress();return kS({address:i,bytes:kt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Jn(this,rc)})}verifyTransaction(t,r){let n=Hf(r),i=new a0(n.publicKey).toSuiAddress();return kS({address:i,bytes:kt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Jn(this,rc)})}};dn=new WeakMap;rc=new WeakMap;nc=new WeakMap;var LB=NB;function RB(e,t,r){let n=r?.legacyAddress?o0(e,32):qf(e,32),i=new TextEncoder().encode(t),o=new Uint8Array(1+i.length+n.length);return o.set([i.length],0),o.set(i,1),o.set(n,1+i.length),new LB(o,r)}var DB=TS(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function BS(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Fi(e.slice(r))}`),i=t?o0(n,32):qf(n,32),o=new Uint8Array(r+i.length);return o.set(e.slice(0,r),0),o.set(i,r),o}async function kS({address:e,bytes:t,signature:r,intentScope:n,client:i=new Kf({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await i.query({query:DB,variables:{bytes:t,signature:r,intentScope:n,author:e}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function Hf(e){let t=typeof e=="string"?Yt(e):e;if(t[0]!==Yn.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:o}=MS(r),{issBase64Details:a,addressSeed:u}=n,l=PS(a,"iss"),p=RB(BigInt(u),l);return{serializedSignature:kt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:o,iss:l,addressSeed:BigInt(u)},signature:t,publicKey:p.toRawBytes()}}function US({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([Yn[t]]),i.set(e,1),i.set(n,1+e.length),kt(i)}function OS(e){let t=Yt(e),r=Vf[t[0]];switch(r){case"MultiSig":let n=Zn.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Hf(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=SS[r],o=t.slice(1,t.length-i),a=t.slice(1+o.length);return{serializedSignature:e,signatureScheme:r,signature:o,publicKey:a,bytes:t};default:throw new Error("Unsupported signature scheme")}}var oc=32;var CS="suiprivkey",c0=class{async signWithIntent(t,r){let n=_f(r,t),i=Vo(n,{dkLen:32});return{signature:US({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:kt(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(M.vector(M.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:kt(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},jf=class extends c0{};function NS(e){let{prefix:t,words:r}=ic.bech32.decode(e);if(t!==CS)throw new Error("invalid private key prefix");let n=new Uint8Array(ic.bech32.fromWords(r)),i=n.slice(1);return{schema:Vf[n[0]],secretKey:i}}function LS(e,t){if(e.length!==oc)throw new Error("Invalid bytes length");let r=Yn[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),ic.bech32.encode(CS,ic.bech32.toWords(n))}S();A();function u0(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function KB(e){return Oy(e,"")}function RS(e){return Fi(KB(e))}S();A();S();A();var Wf=class extends Si{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,aS(t);let n=Ir(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return zn(this),this.iHash.update(t),this}digestInto(t){zn(this),Ds(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},$f=(e,t,r)=>new Wf(e,t).update(r).digest();$f.create=(e,t)=>new Wf(e,t);S();A();S();A();function qB(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,p=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+p,u,n)}var Ff=class extends Si{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Pf(this.buffer)}update(t){zn(this);let{view:r,buffer:n,blockLen:i}=this;t=Ir(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=Pf(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){zn(this),Tf(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;qB(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Pf(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=l/4,x=this.get();if(p>x.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)u.setUint32(4*b,x[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var[HB,jB]=Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ii=new Uint32Array(80),Mi=new Uint32Array(80),f0=class extends Ff{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:a,Dh:u,Dl:l,Eh:p,El:x,Fh:b,Fl:T,Gh:I,Gl:B,Hh:P,Hl:_}=this;return[t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_]}set(t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=a|0,this.Dh=u|0,this.Dl=l|0,this.Eh=p|0,this.El=x|0,this.Fh=b|0,this.Fl=T|0,this.Gh=I|0,this.Gl=B|0,this.Hh=P|0,this.Hl=_|0}process(t,r){for(let U=0;U<16;U++,r+=4)Ii[U]=t.getUint32(r),Mi[U]=t.getUint32(r+=4);for(let U=16;U<80;U++){let j=Ii[U-15]|0,K=Mi[U-15]|0,D=Q.rotrSH(j,K,1)^Q.rotrSH(j,K,8)^Q.shrSH(j,K,7),q=Q.rotrSL(j,K,1)^Q.rotrSL(j,K,8)^Q.shrSL(j,K,7),C=Ii[U-2]|0,G=Mi[U-2]|0,v=Q.rotrSH(C,G,19)^Q.rotrBH(C,G,61)^Q.shrSH(C,G,6),s=Q.rotrSL(C,G,19)^Q.rotrBL(C,G,61)^Q.shrSL(C,G,6),f=Q.add4L(q,s,Mi[U-7],Mi[U-16]),d=Q.add4H(f,D,v,Ii[U-7],Ii[U-16]);Ii[U]=d|0,Mi[U]=f|0}let{Ah:n,Al:i,Bh:o,Bl:a,Ch:u,Cl:l,Dh:p,Dl:x,Eh:b,El:T,Fh:I,Fl:B,Gh:P,Gl:_,Hh:V,Hl:L}=this;for(let U=0;U<80;U++){let j=Q.rotrSH(b,T,14)^Q.rotrSH(b,T,18)^Q.rotrBH(b,T,41),K=Q.rotrSL(b,T,14)^Q.rotrSL(b,T,18)^Q.rotrBL(b,T,41),D=b&I^~b&P,q=T&B^~T&_,C=Q.add5L(L,K,q,jB[U],Mi[U]),G=Q.add5H(C,V,j,D,HB[U],Ii[U]),v=C|0,s=Q.rotrSH(n,i,28)^Q.rotrBH(n,i,34)^Q.rotrBH(n,i,39),f=Q.rotrSL(n,i,28)^Q.rotrBL(n,i,34)^Q.rotrBL(n,i,39),d=n&o^n&u^o&u,y=i&a^i&l^a&l;V=P|0,L=_|0,P=I|0,_=B|0,I=b|0,B=T|0,{h:b,l:T}=Q.add(p|0,x|0,G|0,v|0),p=u|0,x=l|0,u=o|0,l=a|0,o=n|0,a=i|0;let h=Q.add3L(v,f,y);n=Q.add3H(h,G,s,d),i=h|0}({h:n,l:i}=Q.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:a}=Q.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:u,l}=Q.add(this.Ch|0,this.Cl|0,u|0,l|0),{h:p,l:x}=Q.add(this.Dh|0,this.Dl|0,p|0,x|0),{h:b,l:T}=Q.add(this.Eh|0,this.El|0,b|0,T|0),{h:I,l:B}=Q.add(this.Fh|0,this.Fl|0,I|0,B|0),{h:P,l:_}=Q.add(this.Gh|0,this.Gl|0,P|0,_|0),{h:V,l:L}=Q.add(this.Hh|0,this.Hl|0,V|0,L|0),this.set(n,i,o,a,u,l,p,x,b,T,I,B,P,_,V,L)}roundClean(){Ii.fill(0),Mi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var l0=lS(()=>new f0);var WB=ze($i(),1),$B="ed25519 seed",FB=2147483648,zB=new RegExp("^m(\\/[0-9]+')+$"),DS=e=>e.replace("'",""),GB=e=>{let r=$f.create(l0,$B).update(xc(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},ZB=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let o=new Uint8Array(1+e.length+n.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(e,1),o.set(new Uint8Array(n,0,n.byteLength),e.length+1);let a=$f.create(l0,t).update(o).digest(),u=a.slice(0,32),l=a.slice(32);return{key:u,chainCode:l}};var YB=e=>zB.test(e)?!e.split("/").slice(1).map(DS).some(isNaN):!1,d0=(e,t,r=FB)=>{if(!YB(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=GB(t);return e.split("/").slice(1).map(DS).map(a=>parseInt(a,10)).reduce((a,u)=>ZB(a,u+r),{key:n,chainCode:i})};S();A();var KS=ze($i(),1);var h0=32,sc=class extends Hs{constructor(t){if(super(),typeof t=="string"?this.data=Yt(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==h0)throw new Error(`Invalid public key input. Expected ${h0} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Yn.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=OS(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!n0(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return KS.default.sign.detached.verify(t,n,this.toRawBytes())}};sc.SIZE=h0;var p0="m/44'/784'/0'/0'/0'",ac=class e extends jf{constructor(t){super(),t?this.keypair=t:this.keypair=Uo.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(Uo.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let o=NS(t);if(o.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${o.schema}`);return this.fromSecretKey(o.secretKey,r)}let n=t.length;if(n!==oc)throw new Error(`Wrong secretKey size. Expected ${oc} bytes, got ${n}.`);let i=Uo.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let a=new TextEncoder().encode("sui validation"),u=Uo.default.sign.detached(a,i.secretKey);if(!Uo.default.sign.detached.verify(a,u,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new sc(this.keypair.publicKey)}getSecretKey(){return LS(this.keypair.secretKey.slice(0,oc),this.getKeyScheme())}async sign(t){return Uo.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=p0),!u0(r))throw new Error("Invalid derivation path");let{key:n}=d0(r,RS(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=p0),!u0(r))throw new Error("Invalid derivation path");let{key:n}=d0(r,t);return e.fromSecretKey(n)}};var qS=()=>({type:"keyPair",sign:async(e,t)=>{let r=ac.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(ct("invalidMessageEncoding"))}}});S();A();var zf=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);let n=r.chainType;switch(n){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[n].sign(t,r);case"eip155":return this.#e.keyPair[n].sign(t,r);case"solana":return this.#e.keyPair[n].sign(t,r);case"sui":return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};S();A();var HS=e=>Gd.safeParse(e).success;S();A();var JB=e=>({getSeed:t=>XB(e,t),setSeed:(t,r)=>QB(e,t,r),getClientJWTSigner:(t,r)=>ek(e,t,r),setClientJWTSigner:(t,r,n)=>tk(e,t,r,n),removeSeeds:t=>jS(e,t),removeClientJWTKeypairs:t=>WS(e,t),clear:async()=>{await jS(e,"all"),await WS(e,"all")}}),Bi=`${Gr}.cache.secrets`,y0=e=>`${Gr}.cache.seed.${e}`,g0=e=>`${Gr}.cache.client-jwt.${e}`,XB=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=y0(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:a}=i.seed;return new Uint8Array(Buffer.from(o,a))},QB=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=y0(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let a=await t.get(Bi);if(!a)a={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let u=new Set(a.seedIdentifiers);u.add(n),a.seedIdentifiers=Array.from(u)}await t.set(Bi,a)},jS=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Bi);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),a=n.seedIdentifiers.filter(u=>o.has(u));await t.removeSecureValue(a.map(y0)),await e.set(Bi,{version:1,seedIdentifiers:n.seedIdentifiers.filter(u=>!o.has(u)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},ek=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=g0(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let a=o.keyPairs[n],u=new Uint8Array(Buffer.from(a.p256pubkey.bytes,a.p256pubkey.encoding)),l=new Uint8Array(Buffer.from(a.p256privkey.bytes,a.p256privkey.encoding));return{p256pubkey:u,p256privkey:l}},tk=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let a=g0(n),u=await r.getSecureValue(a)??{version:1,identifier:n,keyPairs:{}};u.keyPairs[i]={p256pubkey:{bytes:zr(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:zr(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(a,u);let l=await t.get(Bi);if(!l)l={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let p=new Set(l.clientJWTKeypairIdentifiers??[]);p.add(n),l.clientJWTKeypairIdentifiers=Array.from(p)}await t.set(Bi,l)},WS=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Bi);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(g0)),await e.set(Bi,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(a=>!o.has(a))})};S();A();S();A();S();A();S();A();S();A();async function m0(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}S();A();var ZS=ze(Wi());S();A();S();A();function b0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function rk(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function $S(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function nk(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");b0(e.outputLen),b0(e.blockLen)}function ik(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ok(e,t){$S(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var sk={number:b0,bool:rk,bytes:$S,hash:nk,exists:ik,output:ok},ir=sk;S();A();S();A();S();A();var ak={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var $s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),hn=(e,t)=>e<<32-t|e>>>t,ck=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ck)throw new Error("Non little-endian hardware is not supported");var qq=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function uk(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function ki(e){if(typeof e=="string"&&(e=uk(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}var Ws=class{clone(){return this._cloneInto()}},fk=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function FS(e,t){if(t!==void 0&&(typeof t!="object"||!fk(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function _i(e){let t=n=>e().update(ki(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var Gf=class extends Ws{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,ir.hash(t);let n=ki(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return ir.exists(this),this.iHash.update(t),this}digestInto(t){ir.exists(this),ir.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Zf=(e,t,r)=>new Gf(e,t).update(r).digest();Zf.create=(e,t)=>new Gf(e,t);function lk(e,t,r,n){ir.hash(e);let i=FS({dkLen:32,asyncTick:10},n),{c:o,dkLen:a,asyncTick:u}=i;if(ir.number(o),ir.number(a),ir.number(u),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let l=ki(t),p=ki(r),x=new Uint8Array(a),b=Zf.create(e,l),T=b._cloneInto().update(p);return{c:o,dkLen:a,asyncTick:u,DK:x,PRF:b,PRFSalt:T}}function dk(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function zS(e,t,r,n){let{c:i,dkLen:o,DK:a,PRF:u,PRFSalt:l}=lk(e,t,r,n),p,x=new Uint8Array(4),b=$s(x),T=new Uint8Array(u.outputLen);for(let I=1,B=0;B<o;I++,B+=u.outputLen){let P=a.subarray(B,B+u.outputLen);b.setInt32(0,I,!1),(p=l._cloneInto(p)).update(x).digestInto(T),P.set(T.subarray(0,P.length));for(let _=1;_<i;_++){u._cloneInto(p).update(T).digestInto(T);for(let V=0;V<P.length;V++)P[V]^=T[V]}}return dk(u,l,a,p,T)}S();A();S();A();function hk(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,p=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+p,u,n)}var Fs=class extends Ws{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=$s(this.buffer)}update(t){ir.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=ki(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=$s(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ir.exists(this),ir.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;hk(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=$s(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=l/4,x=this.get();if(p>x.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)u.setUint32(4*b,x[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var pk=(e,t,r)=>e&t^~e&r,yk=(e,t,r)=>e&t^e&r^t&r,gk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ui=new Uint32Array(64),Yf=class extends Fs{constructor(){super(64,32,8,!1),this.A=Vi[0]|0,this.B=Vi[1]|0,this.C=Vi[2]|0,this.D=Vi[3]|0,this.E=Vi[4]|0,this.F=Vi[5]|0,this.G=Vi[6]|0,this.H=Vi[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)Ui[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=Ui[b-15],I=Ui[b-2],B=hn(T,7)^hn(T,18)^T>>>3,P=hn(I,17)^hn(I,19)^I>>>10;Ui[b]=P+Ui[b-7]+B+Ui[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:p,H:x}=this;for(let b=0;b<64;b++){let T=hn(u,6)^hn(u,11)^hn(u,25),I=x+T+pk(u,l,p)+gk[b]+Ui[b]|0,P=(hn(n,2)^hn(n,13)^hn(n,22))+yk(n,i,o)|0;x=p,p=l,l=u,u=a+I|0,a=o,o=i,i=n,n=I+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,p=p+this.G|0,x=x+this.H|0,this.set(n,i,o,a,u,l,p,x)}roundClean(){Ui.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},w0=class extends Yf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},v0=_i(()=>new Yf),fH=_i(()=>new w0);S();A();S();A();var Jf=BigInt(4294967295),x0=BigInt(32);function GS(e,t=!1){return t?{h:Number(e&Jf),l:Number(e>>x0&Jf)}:{h:Number(e>>x0&Jf)|0,l:Number(e&Jf)|0}}function mk(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:a}=GS(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}var bk=(e,t)=>BigInt(e>>>0)<<x0|BigInt(t>>>0),wk=(e,t,r)=>e>>>r,vk=(e,t,r)=>e<<32-r|t>>>r,xk=(e,t,r)=>e>>>r|t<<32-r,Sk=(e,t,r)=>e<<32-r|t>>>r,Ak=(e,t,r)=>e<<64-r|t>>>r-32,Ek=(e,t,r)=>e>>>r-32|t<<64-r,Tk=(e,t)=>t,Pk=(e,t)=>e,Ik=(e,t,r)=>e<<r|t>>>32-r,Mk=(e,t,r)=>t<<r|e>>>32-r,Bk=(e,t,r)=>t<<r-32|e>>>64-r,kk=(e,t,r)=>e<<r-32|t>>>64-r;function _k(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Vk=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Uk=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Ok=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Ck=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Nk=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Lk=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Rk={fromBig:GS,split:mk,toBig:bk,shrSH:wk,shrSL:vk,rotrSH:xk,rotrSL:Sk,rotrBH:Ak,rotrBL:Ek,rotr32H:Tk,rotr32L:Pk,rotlSH:Ik,rotlSL:Mk,rotlBH:Bk,rotlBL:kk,add:_k,add3L:Vk,add3H:Uk,add4L:Ok,add4H:Ck,add5H:Lk,add5L:Nk},Ce=Rk;var[Dk,Kk]=Ce.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Oi=new Uint32Array(80),Ci=new Uint32Array(80),zs=class extends Fs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:a,Dh:u,Dl:l,Eh:p,El:x,Fh:b,Fl:T,Gh:I,Gl:B,Hh:P,Hl:_}=this;return[t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_]}set(t,r,n,i,o,a,u,l,p,x,b,T,I,B,P,_){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=a|0,this.Dh=u|0,this.Dl=l|0,this.Eh=p|0,this.El=x|0,this.Fh=b|0,this.Fl=T|0,this.Gh=I|0,this.Gl=B|0,this.Hh=P|0,this.Hl=_|0}process(t,r){for(let U=0;U<16;U++,r+=4)Oi[U]=t.getUint32(r),Ci[U]=t.getUint32(r+=4);for(let U=16;U<80;U++){let j=Oi[U-15]|0,K=Ci[U-15]|0,D=Ce.rotrSH(j,K,1)^Ce.rotrSH(j,K,8)^Ce.shrSH(j,K,7),q=Ce.rotrSL(j,K,1)^Ce.rotrSL(j,K,8)^Ce.shrSL(j,K,7),C=Oi[U-2]|0,G=Ci[U-2]|0,v=Ce.rotrSH(C,G,19)^Ce.rotrBH(C,G,61)^Ce.shrSH(C,G,6),s=Ce.rotrSL(C,G,19)^Ce.rotrBL(C,G,61)^Ce.shrSL(C,G,6),f=Ce.add4L(q,s,Ci[U-7],Ci[U-16]),d=Ce.add4H(f,D,v,Oi[U-7],Oi[U-16]);Oi[U]=d|0,Ci[U]=f|0}let{Ah:n,Al:i,Bh:o,Bl:a,Ch:u,Cl:l,Dh:p,Dl:x,Eh:b,El:T,Fh:I,Fl:B,Gh:P,Gl:_,Hh:V,Hl:L}=this;for(let U=0;U<80;U++){let j=Ce.rotrSH(b,T,14)^Ce.rotrSH(b,T,18)^Ce.rotrBH(b,T,41),K=Ce.rotrSL(b,T,14)^Ce.rotrSL(b,T,18)^Ce.rotrBL(b,T,41),D=b&I^~b&P,q=T&B^~T&_,C=Ce.add5L(L,K,q,Kk[U],Ci[U]),G=Ce.add5H(C,V,j,D,Dk[U],Oi[U]),v=C|0,s=Ce.rotrSH(n,i,28)^Ce.rotrBH(n,i,34)^Ce.rotrBH(n,i,39),f=Ce.rotrSL(n,i,28)^Ce.rotrBL(n,i,34)^Ce.rotrBL(n,i,39),d=n&o^n&u^o&u,y=i&a^i&l^a&l;V=P|0,L=_|0,P=I|0,_=B|0,I=b|0,B=T|0,{h:b,l:T}=Ce.add(p|0,x|0,G|0,v|0),p=u|0,x=l|0,u=o|0,l=a|0,o=n|0,a=i|0;let h=Ce.add3L(v,f,y);n=Ce.add3H(h,G,s,d),i=h|0}({h:n,l:i}=Ce.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:a}=Ce.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:u,l}=Ce.add(this.Ch|0,this.Cl|0,u|0,l|0),{h:p,l:x}=Ce.add(this.Dh|0,this.Dl|0,p|0,x|0),{h:b,l:T}=Ce.add(this.Eh|0,this.El|0,b|0,T|0),{h:I,l:B}=Ce.add(this.Fh|0,this.Fl|0,I|0,B|0),{h:P,l:_}=Ce.add(this.Gh|0,this.Gl|0,P|0,_|0),{h:V,l:L}=Ce.add(this.Hh|0,this.Hl|0,V|0,L|0),this.set(n,i,o,a,u,l,p,x,b,T,I,B,P,_,V,L)}roundClean(){Oi.fill(0),Ci.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},S0=class extends zs{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},A0=class extends zs{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},E0=class extends zs{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},T0=_i(()=>new zs),vH=_i(()=>new S0),xH=_i(()=>new A0),SH=_i(()=>new E0);var Hk=ze($i());S();A();var P0=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],PH=new Set(P0);var jk=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=v0;break;case"sha512":o=T0;break}return zS(o,e,t,{c:r,dkLen:n})},Wk=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},YS=e=>e.map(t=>Wk(t.toString(2),"0",8)).join(""),$k=e=>parseInt(e,2),Fk=e=>{let r=e.length*8/32,n=v0(e);return YS(Array.from(n)).slice(0,r)};var I0=async e=>{let t=P0;if(e.length<16)throw new Error("LessThanTwelve");if(e.length>32)throw new Error("MoreThanTwentyFour");if(e.length%4!==0)throw new Error("WrongWord");let r,n;try{r=YS(Array.from(e))}catch{throw new Error("InvalidEntropyBits")}try{n=Fk(e)}catch{throw new Error("InvalidChecksumBits")}let o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidChecksum");let a=o.map(p=>{let x=$k(p);return t[x]}),u=ZS.Buffer.from(a.join(" "));return{seed:await m0({mnemonic:u,pbkdf2:jk}),mnemonic:u}};S();A();var zk=ze($i()),KH=new RegExp("^m(\\/[0-9]+')+$");S();A();async function Ni(e,t){let r=await Gg(e,t);if(!r)throw new Gi;let n=gr.from(r.entropy);return r.entropy.fill(0),n}async function bt(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Ni(e,t),{seed:a}=await o.foldAsync(I0);r=a,await e.secureCache.setSeed(t,r)}let i=gr.from(r);return r.fill(0),i}S();A();var M0=ze(No());function Oo(e){return e.fold(M0.keccak256)}function Li(e,t,r){let n=Rn[r];return M0.keccak256(`${e}:${t}:${n}`)}function Pn(e,t,r,n){let i={};for(let o of n){let{publicKey:a}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),u=na.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[u]={chainType:u,pathType:o,publicKey:a,addresses:Object.values(qt).reduce((l,p)=>({...l,[p]:mr({publicKey:a,addressType:u,networkID:p})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[u]={chainType:u,pathType:o,publicKey:mr({publicKey:a,addressType:u})};break}case"bip44Sui":{i[u]={chainType:u,pathType:o,publicKey:a,address:mr({publicKey:a,addressType:u})};break}default:Ge(o)}}return i}async function JS(e,t){let r=new Set,n=await Je(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&Rn[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return XS(e,t,i)}async function XS(e,t,r){try{return await Gk(e,t,r)}catch(n){if(n instanceof ri)return await XS(e,t,r+1);throw n}}async function Gk(e,t,r){let n=await bt(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Fr(i),a=await Li(t,r,o[0]),u={version:1,type:"seed",identifier:a,seedIdentifier:t,derivationIndex:r,chains:Pn(e,n,r,o)};return await Ht(e,u,!1),u}S();A();var o2=ze(Z2());var s2=ze(Cy()),a2=ze(i2()),c2=ze(No());function e5(e,t,r){let n=Rn[r];return c2.keccak256(`${e}:${t}:${n}`)}async function u2(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,a=e5(t,i.derivationIndex,o);s2.initEccLib(o2);let u=(0,a2.ECPairFactory)(o2),l={...i.addresses.reduce((x,b)=>{let T=na.getAddressType(b.pathType);switch(T){case"eip155":case"solana":{x[T]={chainType:T,pathType:b.pathType,publicKey:b.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");case"sui":throw new vl("add ledger account");default:Ge(T)}return x},{}),...i.publicKeys.reduce((x,b)=>{let T=na.getAddressType(b.pathType);switch(T){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let I=u.fromPublicKey(Buffer.from(b.value,"hex")),B=new Uint8Array(I.publicKey);x[T]={chainType:T,pathType:b.pathType,publicKey:B,addresses:Object.values(qt).reduce((P,_)=>({...P,[_]:mr({publicKey:B,addressType:T,networkID:_})}),{})};break}case"sui":throw new vl("add ledger account");default:Ge(T)}return x},{})},p={version:1,type:"ledger",identifier:a,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:l};n.push(p),await Ht(e,p)}return n}S();A();var f2=ze(No());function t5(e){return f2.keccak256(e)}async function l2(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await sr(e),a=t5(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(a))throw new Ml;let p={version:1,identifier:a,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},x=a,b;switch(t){case"eip155":case"solana":{b={version:1,type:"privateKey",identifier:x,privateKeyIdentifier:a,publicKey:mr({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{b={version:1,type:"privateKey",identifier:x,privateKeyIdentifier:a,publicKey:i.publicKey,addresses:Object.values(qt).reduce((T,I)=>({...T,[I]:mr({publicKey:i.publicKey,addressType:t,networkID:I})}),{}),chainType:t};break}case"sui":{b={version:1,type:"privateKey",identifier:x,privateKeyIdentifier:a,publicKey:i.publicKey,address:mr({publicKey:i.publicKey,addressType:t}),chainType:t};break}default:Ge(t)}if(!b)throw new Error("unable to create a private key account based on the address type");return await Ht(e,b),await Zg(e,p),b}S();A();var d2=ze(No());function r5(e){return d2.keccak256(e)}async function h2(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Pl;let n=r5(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Ht(e,i),i}S();A();async function p2(e,t){let r=new Set,n=await Je(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&Rn[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return y2(e,t,i)}async function y2(e,t,r){try{return await n5(e,t,r)}catch(n){if(n instanceof ri)return await y2(e,t,r+1);throw n}}async function n5(e,t,r){let n=await bt(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Fr(i),a=await Li(t,r,o[0]),u={version:1,type:"seedless",identifier:a,seedIdentifier:t,derivationIndex:r,chains:Pn(e,n,r,o)};return await Ht(e,u,!1),u}S();A();S();A();S();A();async function Ys(e,t){let r=await sr(e),n=Oo(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function Qf(e,t,r,n){if((await Rc(e)).length>0)throw new Dy;if(n.length===0)throw new Il;if(await Ys(e,t))throw new sa;let a=Oo(t),u=t.fold(x=>({version:1,identifier:a,name:r,entropy:new Uint8Array(x)}));await Jg(e,u);let l=[],p=await bt(e,a);for(let x of n){let b=Li(a,x.derivationIndex,x.derivationPathTypes[0]),T=Pn(e,p,x.derivationIndex,x.derivationPathTypes),I={version:1,type:"seedless",identifier:b,seedIdentifier:a,derivationIndex:x.derivationIndex,chains:T};await Ht(e,I),l.push(I)}return l}async function g2(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Fr(n);return(await Qf(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}S();A();S();A();async function el(e,t,r,n,i=!1){let o=await Ys(e,t);if(!i&&o)throw new sa;let a=Oo(t),u=t.fold(x=>({version:1,identifier:a,name:r,entropy:new Uint8Array(x)}));await Yg(e,u);let l=[],p=await bt(e,a);for(let x of n){let b=await Li(a,x.derivationIndex,x.derivationPathTypes[0]),T=Pn(e,p,x.derivationIndex,x.derivationPathTypes),I={version:1,type:"seed",identifier:b,seedIdentifier:a,derivationIndex:x.derivationIndex,chains:T};await Ht(e,I),l.push(I)}return l}async function m2(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Fr(n);return(await el(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}S();A();var b2=ze(No());function i5(e){return b2.keccak256(e)}async function w2(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let a=i5(n),u={version:1,type:"seedVault",identifier:a,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(u),await Ht(e,u)}return r}S();A();S();A();async function tl(e,t,r){let i=(await Je(e)).find(o=>o.identifier===t);if(!i)throw new ti;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new Lo;let a=await bt(e,i.seedIdentifier),u=e.keypairGenerator.generateKeypairFromSeed(a,i.derivationIndex,o);return gr.from(u.privateKey)}case"privateKey":{let o=await Wo(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new Lo;let a=e.keypairGenerator.generateKeypairFromPrivateKey(gr.from(o.privateKey),r);return gr.from(a.privateKey)}case"ledger":case"seedVault":throw new El;case"readOnly":throw new Tl;default:(o=>{throw new Error("invalid account type")})(i)}}S();A();S();A();S();A();function V0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o5(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function v2(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s5(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");V0(e.outputLen),V0(e.blockLen)}function a5(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c5(e,t){v2(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var u5={number:V0,bool:o5,bytes:v2,hash:s5,exists:a5,output:c5},or=u5;S();A();var rl=class extends $o{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,or.hash(t);let n=ii(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return or.exists(this),this.iHash.update(t),this}digestInto(t){or.exists(this),or.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},U0=(e,t,r)=>new rl(e,t).update(r).digest();U0.create=(e,t)=>new rl(e,t);function f5(e,t,r,n){or.hash(e);let i=em({dkLen:32,asyncTick:10},n),{c:o,dkLen:a,asyncTick:u}=i;if(or.number(o),or.number(a),or.number(u),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let l=ii(t),p=ii(r),x=new Uint8Array(a),b=U0.create(e,l),T=b._cloneInto().update(p);return{c:o,dkLen:a,asyncTick:u,DK:x,PRF:b,PRFSalt:T}}function l5(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function x2(e,t,r,n){let{c:i,dkLen:o,DK:a,PRF:u,PRFSalt:l}=f5(e,t,r,n),p,x=new Uint8Array(4),b=Fo(x),T=new Uint8Array(u.outputLen);for(let I=1,B=0;B<o;I++,B+=u.outputLen){let P=a.subarray(B,B+u.outputLen);b.setInt32(0,I,!1),(p=l._cloneInto(p)).update(x).digestInto(T),P.set(T.subarray(0,P.length));for(let _=1;_<i;_++){u._cloneInto(p).update(T).digestInto(T);for(let V=0;V<P.length;V++)P[V]^=T[V]}}return l5(u,l,a,p,T)}S();A();S();A();function d5(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),a=Number(r>>i&o),u=Number(r&o),l=n?4:0,p=n?0:4;e.setUint32(t+l,a,n),e.setUint32(t+p,u,n)}var nl=class extends $o{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Fo(this.buffer)}update(t){or.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=ii(t);let o=t.length;for(let a=0;a<o;){let u=Math.min(i-this.pos,o-a);if(u===i){let l=Fo(t);for(;i<=o-a;a+=i)this.process(l,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){or.exists(this),or.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let b=a;b<i;b++)r[b]=0;d5(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Fo(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=l/4,x=this.get();if(p>x.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)u.setUint32(4*b,x[b],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.length=i,t.pos=u,t.finished=o,t.destroyed=a,i%r&&t.buffer.set(n),t}};var h5=(e,t,r)=>e&t^~e&r,p5=(e,t,r)=>e&t^e&r^t&r,y5=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Di=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ki=new Uint32Array(64),il=class extends nl{constructor(){super(64,32,8,!1),this.A=Di[0]|0,this.B=Di[1]|0,this.C=Di[2]|0,this.D=Di[3]|0,this.E=Di[4]|0,this.F=Di[5]|0,this.G=Di[6]|0,this.H=Di[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:l}=this;return[t,r,n,i,o,a,u,l]}set(t,r,n,i,o,a,u,l){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=l|0}process(t,r){for(let b=0;b<16;b++,r+=4)Ki[b]=t.getUint32(r,!1);for(let b=16;b<64;b++){let T=Ki[b-15],I=Ki[b-2],B=Yr(T,7)^Yr(T,18)^T>>>3,P=Yr(I,17)^Yr(I,19)^I>>>10;Ki[b]=P+Ki[b-7]+B+Ki[b-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:l,G:p,H:x}=this;for(let b=0;b<64;b++){let T=Yr(u,6)^Yr(u,11)^Yr(u,25),I=x+T+h5(u,l,p)+y5[b]+Ki[b]|0,P=(Yr(n,2)^Yr(n,13)^Yr(n,22))+p5(n,i,o)|0;x=p,p=l,l=u,u=a+I|0,a=o,o=i,i=n,n=I+P|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,l=l+this.F|0,p=p+this.G|0,x=x+this.H|0,this.set(n,i,o,a,u,l,p,x)}roundClean(){Ki.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},O0=class extends il{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},C0=rd(()=>new il),H$=rd(()=>new O0);S();A();S();A();var uc=new Error("Unknown error"),ol=new Error("Invalid entropy length"),cc=new Error("Invalid mn*monic sentence length"),R0=new Error("Invalid checksum"),S2=new RangeError("Invalid mn*monic word"),L0=new RangeError("Invalid wordlist"),D0=new RangeError("Invalid wordlist index"),Mr=(e,t)=>{if(!e)throw t};function qi(e){Mr(e>=128,ol),Mr(e<=256,ol),Mr(e%32===0,ol)}function fc(e){Mr(e>=12,cc),Mr(e<=24,cc),Mr(e%3===0,cc)}function Js(e){Mr(e.length===2048,L0),Mr(e.every(t=>typeof t=="string"),L0)}function K0(e,t){return fc(e),t(e*4/3)}async function sl(e,t){let r=e.length*8;qi(r);let n=r/32,i=await t(e),[o]=i,a=8-n,u=o>>>a<<a>>>0,l=new Uint8Array(e.length+1);return l.set(e,0),l[l.length-1]=u,l}function al(e){let t=(e.length-1)*8;qi(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),o=new DataView(i),a=0,u=0,l=0;for(let p of e)if(l+=8,u|=p<<32-l,u>>>=0,l>=11){let x=u>>>21;Mr(x>=0&&x<=2047,D0),o.setUint32(a*4,x,!0),a++,u<<=11,u>>>=0,l-=11}return Mr(a===n,cc),new Uint32Array(i)}function A2(e){let t=e.length;fc(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),o=new DataView(i),a=new DataView(e.buffer),u=e.length,l=0,p=0,x=0,b=8;for(let T=0;T<u;T++){let I=a.getUint32(T*4,!0);Mr(I<2048,D0);let B=r;for(;B>0;){let P=32-B,_=B>=b?b:B;l|=I>>32-P-_&(1<<_)-1,p+=_,l<<=b-_,l>>>=0,B-=_,b-=_,b<=0&&(b=8),p%8===0&&(o.setUint8(x,l),x++,l=0)}}return u%8!==0&&o.setUint8(x,l),new Uint8Array(i)}function q0(e){fc(e.length);let t=A2(e),r=t.slice(0,t.length-1);return t.fill(0),r}async function Xs(e,t){let r=e.length*8;qi(r);let n=await sl(e,t),i=al(n);return n.fill(0),i}function H0(e,t){Js(t);let r=new Set(t),n=new Uint32Array(24),i=0,o="";for(let u=0;u<e.length;u++){let l=e[u],p=l===32,x=u===e.length-1;if(x&&(o+=String.fromCharCode(l)),p||x){Mr(r.has(o),S2);let b=0;for(let T of t){if(o===T)break;b++}n[i++]=b,o=""}else o+=String.fromCharCode(l)}fc(i);let a=n.slice(0,i);return n.fill(0),a}async function Qs(e,t,r){let n=await Xs(e,r),i=new Uint8Array(n.reduce((a,u)=>a+t[u].length+1,-1)),o=0;for(let a of n){o>0&&(i[o++]=32);let u=t[a];for(let l of u)i[o++]=l.charCodeAt(0)}return n.fill(0),i}var N0=Uint8Array.of(109,110,101,109,111,110,105,99);async function Co(e,t,r,n,i){let o=await Qs(e,r,n),a=new Uint8Array(N0.length+t.length);a.set(N0,0),a.set(t,N0.length);let u=await i(o,a,2048,64,"sha512");return a.fill(0),o.fill(0),u}S();A();var ea=ze(H2());S();A();var lc=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function j0(e){switch(e){case"english":return lc}}function W0(e){return t=>new e(t)}function $0(e,t){return async r=>{let n=null,i=null,o=null,a=null,u=null;try{i=q0(r),o=await sl(i,t),a=al(o);let l=r[r.length-1],p=a[a.length-1];if(l!==p)throw R0;u=e.fromEntropy(i)}catch(l){l instanceof Error?n=l:(console.error(l),n=uc)}finally{if(i?.fill(0),o?.fill(0),a?.fill(0),n)throw n;return u}}}function F0(e,t){return async r=>{let n=null,i=null,o=null;try{i=H0(r,t),o=await e.fromIndexes(i)}catch(a){a instanceof Error?n=a:(console.error(a),n=uc)}finally{if(i?.fill(0),n)throw n;return o}}}function z0(e,t){return r=>{let n=null,i=null,o=null;try{i=K0(r,t),o=e.fromEntropy(i)}catch(a){a instanceof Error?n=a:(console.error(a),n=uc)}finally{if(i?.fill(0),n)throw n;return o}}}var G0=class{static async webCrypto(t){let r=typeof t=="string"?await j0(t):t;Js(r);let n=a=>self.crypto.getRandomValues(new Uint8Array(a)),i=async a=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",a)),o=async(a,u,l,p,x)=>{let b="SHA-"+x.substring(3),T=await self.crypto.subtle.importKey("raw",a,"PBKDF2",!1,["deriveBits"]),I=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:u,iterations:l,hash:b},T,p*8);return new Uint8Array(I)};return class dc{static fromEntropy=W0(dc);static fromIndexes=$0(dc,i);static fromMnemonic=F0(dc,r);static fromSentenceLength=z0(dc,n);static wordlist=r;#e;constructor(u){qi(u.length*8),this.#e=u.slice()}deriveSeed=(u=new Uint8Array)=>Co(this.#e,u,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>Xs(this.#e,i);getMnemonic=()=>Qs(this.#e,r,i);getSentenceLength=()=>{let u=this.#e.length*8,l=u/32;return(u+l)/11}}}static async nodeCrypto(t){let r=typeof t=="string"?await j0(t):t;Js(r);let n=a=>new Uint8Array((0,ea.randomBytes)(a).buffer),i=a=>new Uint8Array((0,ea.createHash)("sha256").update(a).digest().buffer),o=(...a)=>new Promise((u,l)=>{(0,ea.pbkdf2)(...a,(p,x)=>{if(p)return l(p);u(new Uint8Array(x.buffer))})});return class hc{static fromEntropy=W0(hc);static fromIndexes=$0(hc,i);static fromMnemonic=F0(hc,r);static fromSentenceLength=z0(hc,n);static wordlist=r;#e;constructor(u){qi(u.length*8),this.#e=u.slice()}deriveSeed=(u=new Uint8Array)=>Co(this.#e,u,r,i,o);getEntropy=()=>this.#e.slice();getIndexes=()=>Xs(this.#e,i);getMnemonic=()=>Qs(this.#e,r,i);getSentenceLength=()=>{let u=this.#e.length*8,l=u/32;return(u+l)/11}}}static async customCrypto(t,r){let n=typeof t=="string"?await j0(t):t;Js(n);let{random:i,sha256:o,pbkdf2:a}=r;return class pc{static fromEntropy=W0(pc);static fromIndexes=$0(pc,o);static fromMnemonic=F0(pc,n);static fromSentenceLength=z0(pc,i);static wordlist=n;#e;constructor(l){qi(l.length*8),this.#e=l.slice()}deriveSeed=(l=new Uint8Array)=>Co(this.#e,l,n,o,a);getEntropy=()=>this.#e.slice();getIndexes=()=>Xs(this.#e,o);getMnemonic=()=>Qs(this.#e,n,o);getSentenceLength=()=>{let l=this.#e.length*8,p=l/32;return(l+p)/11}}}};async function E2(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Ni(e,t);try{r=await o.foldAsync(async u=>Co(u,new Uint8Array,lc,C0,(l,p,x,b)=>x2(C0,l,p,{c:x,dkLen:b})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=gr.from(r);return r.fill(0),i}var g5=new Gi,m5=new Lo,b5=new aa,Ye={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function I2(e,t=!1,r=!1){let n;try{if(n=await Je(e),n.length===0)return Ye.unonboarded}catch{return Ye.unableToLoadAccounts}return t?w5(e,n,r):M2(e,n)}var w5=async(e,t,r)=>{let n=await M2(e,t);if(n.status!=="safely-onboarded")return n;try{let u=await td(e);if(u?.version===3&&u?.isSafelyOnboarded)return Ye.safelyOnboarded}catch{return Ye.fetchIntegrityStorageError}let i=await P2(e,t,"seed",r),o=await P2(e,t,"seedless",r),a=await x5(e,t);return i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:a.status!=="safely-onboarded"?a:(await ed(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),Ye.safelyOnboarded)},M2=async(e,t)=>{try{if((await td(e))?.isSafelyOnboarded)return Ye.safelyOnboarded}catch{return Ye.fetchIntegrityStorageError}let r=await T2(e,t,"seed"),n=await T2(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await ed(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),Ye.safelyOnboarded)},T2=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Ni(e,i)}catch(o){if(o instanceof Error){if(o.message===g5.message)return Ye.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return Ye.fetchEntropyStorageError}return Ye.internalError}return Ye.safelyOnboarded},v5=e=>{if(!(e instanceof Error))return Ye.invalidEntropy;let t=[[/ExpoSecureStorage/,Ye.fetchEntropyStorageError],[/InvalidEntropyBip39/,Ye.invalidEntropyBip39],[/LessThanTwelve/,Ye.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,Ye.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,Ye.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,Ye.invalidChecksumBits],[/InvalidEntropyBits/,Ye.invalidEntropyBits],[/InvalidChecksum/,Ye.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return Ye.invalidEntropy},P2=async(e,t,r,n)=>{let i=new Set;for(let o of t)o.type===r&&i.add(o.seedIdentifier);for(let o of i)try{n?await E2(e,o):await bt(e,o)}catch(a){return v5(a)}return Ye.safelyOnboarded},x5=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await tl(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===m5.message)return Ye.invalidPkAddressType;if(n.message===b5.message)return Ye.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return Ye.fetchPkStorageError}return Ye.invalidPk}return Ye.safelyOnboarded};S();A();async function B2(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await Je(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed"&&o.type!=="seedless")continue;let a=i.get(o.seedIdentifier);a?a.push(o):i.set(o.seedIdentifier,[o])}for(let[o,a]of i){let u;for(let l of a)if(!(l.chains&&!Ll(Object.values(l.chains)[0].pathType)))for(let p of t){if(l.chains[p])continue;u||(u=await bt(e,o));let b=Fr([p]),T=Pn(e,u,l.derivationIndex,b);l.chains={...l.chains,...T},r=!0}}return r&&await Zr(e,n),r}S();A();S();A();var Z0="m/23001'/0'";async function cl(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,Z0);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await bt(e,t.seedIdentifier)).fold(a=>new ta(a));break}case"privateKey":{let o=await Wo(e,t.privateKeyIdentifier);i=new ta(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:Z0,bytesInPrivateKey:64}),a=Af(o.secretKey,ec.CURVE.n),u=ec.getPublicKey(a);return await e.secureCache.setClientJWTSigner(r,Z0,{p256pubkey:u,p256privkey:a}),{publicKey:u,privateKey:a}}finally{i.cleanup()}}var S5=e=>e.type==="seed"||e.type==="seedless"||e.type==="privateKey",k2=async(e,t)=>{let r=await Je(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let i=r.filter(S5).find(u=>u.type==="privateKey"?u.privateKeyIdentifier===t:u.seedIdentifier===t);if(!i)throw new Error("Unable to derive authentication public key for given secret identifier.");let o=await cl(e,i);return zr(Buffer.from(o.publicKey))};S();A();var _2=ze(mc());var A5="m/24001'/0'",V2=async e=>{let t=await Je(e);if(t.length===0)throw new Error("No accounts, unable to get cash public key.");let r=t[0];if(r.type!=="seed")throw new Error("First account is not a seed account, unable to get cash address.");let o=(await bt(e,r.seedIdentifier)).fold(a=>new ta(a)).derivePath({ellipticCurve:"ed25519",derivationPath:A5,bytesInPrivateKey:64});return _2.default.encode(o.publicKey)};S();A();async function U2(e,t){let r=await Je(e);if(r.length===0)throw new ti;let n=r.filter(i=>i.identifier!==t);await Zr(e,n),await Ql(e)}S();A();async function O2(e,t,r){let n=await Je(e);if(r<0||r>=n.length)throw new ti;let i=n.map(a=>a.identifier).indexOf(t);if(i<0)throw new ti;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await Zr(e,n)}S();A();async function ul(e,t,r){let n=t.chains[r]?.pathType;if(!n)return ct("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await bt(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function C2(e,t,r){let n=await Je(e),i=n.find(o=>o.identifier===t);if(!i)return ct("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await cl(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return ct("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),a={},u=Object.keys(i.chains).filter(l=>ra.safeParse(l).success).filter(l=>o.includes(l));for(let l of u){let p=await ul(e,i,l);if("status"in p&&p.status==="error")return p;a[l]=p}return e.vaultSigner.signWithKeypair(a,r)}case"eip155":{let o=await ul(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await ul(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"sui":{let o=await ul(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}}break}case"privateKey":{let o=await Wo(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return ct("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let a=e.keypairGenerator.generateKeypairFromPrivateKey(gr.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:a},r);case"eip155":return e.vaultSigner.signWithKeypair(a,r);case"solana":return e.vaultSigner.signWithKeypair(a,r);case"sui":return e.vaultSigner.signWithKeypair(a,r)}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return ct("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let a=Ay.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!a.success)return ct("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let u=Ey(a.data);return e.vaultSigner.signWithHardware(t,u,r)}case"seedVault":{let{authToken:o,derivationPath:a,chainType:u}=i;return u!==r.chainType?ct("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${u}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,a,r)}case"readOnly":return ct("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}S();A();function Y0(e){switch(e.type){case"seed":return yc(e);case"seedless":return gc(e);case"privateKey":return X0(e);case"ledger":return J0(e);case"seedVault":return Q0(e);case"readOnly":return e}}function J0(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...p}=a;u={...p,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...p}=a,x=Object.values(qt).reduce((b,T)=>{let I=l?l[T]:void 0;if(!I)throw new oa;return{...b,[T]:I}},{});u={...p,addresses:x};break}case"sui":{u=a;break}}i[o]=u}return{...n,chains:i}}function X0(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(qt).reduce((o,a)=>{let u=t?t[a]:void 0;if(!u)throw new oa;return{...o,[a]:u}},{});return{...n,addresses:i}}case"sui":return e}}function Q0(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function yc(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...p}=a;u={...p,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...p}=a,x=Object.values(qt).reduce((b,T)=>{let I=l?l[T]:void 0;if(!I)throw new oa;return{...b,[T]:I}},{});u={...p,addresses:x};break}case"sui":{u=a;break}}i[o]=u}return{...n,chains:i}}function gc(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let a=t[o];if(!a)continue;let u;switch(a.chainType){case"solana":case"eip155":{let{publicKey:l,...p}=a;u={...p,address:l};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:l,...p}=a,x=Object.values(qt).reduce((b,T)=>{let I=l?l[T]:void 0;if(!I)throw new oa;return{...b,[T]:I}},{});u={...p,addresses:x};break}case"sui":u=a}i[o]=u}return{...n,chains:i}}S();A();var ry=ze(mc());var E5=new Set(Object.values(Ze)),N2=e=>e!==null&&E5.has(e),ty=e=>{},fl=e=>{let t=e.addresses.reduce((r,n)=>{try{let i=ia(n.networkId,n.address);r[i]=n.address}catch{wt.addBreadcrumb("Auth","Unable to derive AddressType from networkID and address.","error",{networkID:n.networkId,address:n.address})}return r},{});return Object.entries(t).length===0?(wt.captureError(new Error("Unable to convert synced account to read-only account. No addresses found."),"Auth"),null):{version:1,type:"readOnly",identifier:e.accountHash,addresses:t}},ey=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return wt.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,a)=>{if(a.pathType==="privateKey")return wt.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${a.pathType}`,"error"),o;let u=Ny(a.pathType);switch(a.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":wl(u)?o[u]={chainType:u,publicKey:Buffer.from(a.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":a.address},pathType:a.pathType}:wt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":u==="solana"?o[u]={chainType:u,publicKey:ry.default.encode(Buffer.from(a.publicKey.replace("0x",""),"hex")),pathType:a.pathType}:wt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":u==="eip155"?o[u]={chainType:u,publicKey:a.address,pathType:a.pathType}:wt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;case"bip44Sui":u==="sui"?o[u]={chainType:u,publicKey:gl(a.publicKey),address:a.address,pathType:a.pathType}:wt.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:u,pathType:a.pathType});break;default:ty(a.pathType)}return o},{});if(Object.entries(n).length===0)return wt.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=ca(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(wt.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},L2=e=>{let t=ca(e);if(!t)return wt.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return wt.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=ia(r.networkId,r.address)}catch{return wt.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}return wl(n)?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n}:n==="solana"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:ry.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n}:n==="eip155"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n}:n==="sui"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:gl(r.publicKey),address:r.address,chainType:n}:(Ge(n),null)},R2=async(e,t)=>{let r=await Je(e),n=await sr(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),a=new Set(n.privateKeyIdentifiers);for(let l=0;l<r.length;++l){let p=r[l],x=t[p.identifier];if(delete t[p.identifier],!x||p.type!=="readOnly")continue;let b=Ul(x),T=ca(x);if(!N2(b)||!T)continue;let I=null;switch(b){case"seed":case"seedless":try{(i.has(T)||o.has(T))&&(I=ey(x,b))}catch{}break;case"privateKey":try{a.has(T)&&(I=L2(x))}catch{}break;default:ty(b)}I&&(r[l]=I)}let u=[...r];for(let l of Object.values(t)){if(l.addresses.length===0)continue;let p=Ul(l),x=ca(l);if(!N2(p)||!x){let b=fl(l);b&&u.push(b);continue}switch(p){case"seed":if(i.has(x)){let b=ey(l,p);b&&u.push(b)}else{let b=fl(l);b&&u.push(b)}break;case"seedless":if(o.has(x)){let b=ey(l,p);b&&u.push(b)}else{let b=fl(l);b&&u.push(b)}break;case"privateKey":if(a.has(x)){let b=L2(l);b&&u.push(b)}else{let b=fl(l);b&&u.push(b)}break;default:ty(p)}}return await Zr(e,u),!1};function T5(e){return{addSeedWithDefaultAccount:(t,r)=>m2(e,t,r).then(yc),addAccountForExistingSeed:t=>JS(e,t).then(yc),addSeedWithMultipleAccounts:(t,r,n,i)=>el(e,t,r,n,i).then(o=>o.map(yc)),addPrivateKeyAccount:(t,r,n)=>l2(e,t,r,n).then(X0),addLedgerAccounts:(t,r)=>u2(e,t,r).then(n=>n.map(J0)),addSolanaSeedVaultAccounts:t=>w2(e,t).then(r=>r.map(Q0)),addReadonlyAccount:t=>h2(e,t),deriveAddresses:()=>B2(e),removeAccount:t=>U2(e,t),reorderAccount:(t,r)=>O2(e,t,r),exportEntropy:t=>Ni(e,t),exportPrivateKey:(t,r)=>tl(e,t,r),fetchAllAccounts:()=>Je(e).then(t=>t.map(Y0)),fetchAllSeedMetas:()=>zg(e),fetchAllSeedlessMetas:()=>Rc(e),sign:(t,r)=>C2(e,t,r),isExistingSeed:t=>Ys(e,t),checkVaultIntegrity:t=>I2(e,t),clearVault:()=>Xg(e),addSeedlessWithMultipleAccounts:(t,r,n)=>Qf(e,t,r,n).then(i=>i.map(gc)),addSeedlessWithDefaultAccount:(t,r)=>g2(e,t,r).then(gc),addAccountForExistingSeedless:t=>p2(e,t).then(gc),getAuthenticationPublicKey:t=>k2(e,t),getCashAddress:()=>V2(e),syncAccounts:t=>R2(e,t)}}S();A();S();A();var xG=vy(Gy,e=>new ll(e)),ll=class{#e;constructor(t){this.#e=t}onMigrateInvalidChecksum(){this.#e.capture("migrationMultichainMigrateInvalidChecksum")}onAccountsOnlyMigrationStarted(){this.#e.capture("migrationMultichainAccountOnlyMigrationStarted")}onAccountsOnlyMigrationSettled(t){this.#e.capture("migrationMultichainAccountOnlyMigrationSettled",{data:{isSuccess:t}})}onMigrationFailureFlowOpened(){this.#e.capture("migrationFailureOpen")}onMigrationFailureUnableToFetchLegacyMnemonic(t){this.#e.capture("migrationFailureUnableToFetchLegacyMnemonic",{data:{reason:t}})}onCanStartMigrationResult(t){t.result||this.#e.capture("migrationMultichainCannotStart",{data:{reason:t.reason}})}onMigrationStarted(){this.#e.capture("migrationMultichainStarted")}onMigrationSettled(t,r){this.#e.capture("migrationMultichain",{data:{isGTM:t,isSuccess:r}})}onMigrationSecureStore(){this.#e.capture("migrationSecureStore")}};S();A();S();A();S();A();export{rA as a,Ll as b,nA as c,iA as d,Yy as e,oA as f,Ec as g,ua as h,X2 as i,eA as j,tA as k,sA as l,aA as m,cA as n,dA as o,hA as p,pA as q,yA as r,Hg as s,jE as t,WE as u,Oc as v,oo as w,Gd as x,ct as y,Yd as z,gb as A,La as B,_1 as C,O1 as D,nS as E,sS as F,qS as G,zf as H,HS as I,JB as J,Oo as K,i2 as L,G0 as M,T5 as N};
/*! Bundled license information:

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-65FAE5DM.js.map
