import{$a as X,Ya as V}from"./chunk-D7Z6MPRS.js";import{w as f}from"./chunk-NZAWO25Q.js";import{D as z}from"./chunk-FBDT5S2M.js";import{k as J}from"./chunk-TKSJVOQZ.js";import{a as mt,h as n}from"./chunk-UA6ADLWZ.js";import{c as yt,d as ht,f as M,h as c,i as p,n as l}from"./chunk-3KENBVE7.js";var N=yt((Q,R)=>{c();l();(function(e,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof R=="object"&&R.exports?R.exports=t():e.log=t()})(Q,function(){"use strict";var e=function(){},t="undefined",a=typeof self!==t&&typeof self.navigator!==t&&/Trident\/|MSIE /.test(self.navigator.userAgent),s=["trace","debug","info","warn","error"],r={},o=null;function u(d,y){var i=d[y];if(typeof i.bind=="function")return i.bind(d);try{return Function.prototype.bind.call(i,d)}catch{return function(){return Function.prototype.apply.apply(i,[d,arguments])}}}function I(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function S(d){return d==="debug"&&(d="log"),typeof console===t?!1:d==="trace"&&a?I:console[d]!==void 0?u(console,d):console.log!==void 0?u(console,"log"):e}function E(){for(var d=this.getLevel(),y=0;y<s.length;y++){var i=s[y];this[i]=y<d?e:this.methodFactory(i,d,this.name)}if(this.log=this.debug,typeof console===t&&d<this.levels.SILENT)return"No console available for logging"}function ct(d){return function(){typeof console!==t&&(E.call(this),this[d].apply(this,arguments))}}function lt(d,y,i){return S(d)||ct.apply(this,arguments)}function K(d,y){var i=this,x,k,w,m="loglevel";typeof d=="string"?m+=":"+d:typeof d=="symbol"&&(m=void 0);function gt(g){var h=(s[g]||"silent").toUpperCase();if(!(typeof i===t||!m)){try{i.localStorage[m]=h;return}catch{}try{i.document.cookie=encodeURIComponent(m)+"="+h+";"}catch{}}}function G(){var g;if(!(typeof i===t||!m)){try{g=i.localStorage[m]}catch{}if(typeof g===t)try{var h=i.document.cookie,B=encodeURIComponent(m),Y=h.indexOf(B+"=");Y!==-1&&(g=/^([^;]+)/.exec(h.slice(Y+B.length+1))[1])}catch{}return i.levels[g]===void 0&&(g=void 0),g}}function pt(){if(!(typeof i===t||!m)){try{i.localStorage.removeItem(m)}catch{}try{i.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(g){var h=g;if(typeof h=="string"&&i.levels[h.toUpperCase()]!==void 0&&(h=i.levels[h.toUpperCase()]),typeof h=="number"&&h>=0&&h<=i.levels.SILENT)return h;throw new TypeError("log.setLevel() called with invalid level: "+g)}i.name=d,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=y||lt,i.getLevel=function(){return w??k??x},i.setLevel=function(g,h){return w=_(g),h!==!1&&gt(w),E.call(i)},i.setDefaultLevel=function(g){k=_(g),G()||i.setLevel(g,!1)},i.resetLevel=function(){w=null,pt(),E.call(i)},i.enableAll=function(g){i.setLevel(i.levels.TRACE,g)},i.disableAll=function(g){i.setLevel(i.levels.SILENT,g)},i.rebuild=function(){if(o!==i&&(x=_(o.getLevel())),E.call(i),o===i)for(var g in r)r[g].rebuild()},x=_(o?o.getLevel():"WARN");var W=G();W!=null&&(w=_(W)),E.call(i)}o=new K,o.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var i=r[y];return i||(i=r[y]=new K(y,o.methodFactory)),i};var dt=typeof self!==t?self.log:void 0;return o.noConflict=function(){return typeof self!==t&&self.log===o&&(self.log=dt),o},o.getLoggers=function(){return r},o.default=o,o})});c();l();c();l();var H=ft;function ft(e){var t,a,s;if(e){if(Array.isArray(e)){for(t=[],a=e.length,s=0;s<a;s++){var r=e[s];r!=null&&t.push(r)}return t}if(typeof e=="object"){t={};var o=Object.keys(e);for(a=o.length,s=0;s<a;s++){var u=o[s],I=e[u];I!=null&&(t[u]=I)}return t}}}var et=M(N());c();l();var Dt=n.object({chainType:n.union([n.literal("bip122_p2wpkh"),n.literal("bip122_p2tr")]),chainName:n.literal("bitcoin"),networkId:n.union([n.literal("128"),n.literal("239")])}),Tt=n.object({chainType:n.literal("eip155"),chainName:n.literal("ethereum"),networkId:n.union([n.literal("1"),n.literal("5"),n.literal("11155111")])}),St=n.object({chainType:n.literal("eip155"),chainName:n.literal("polygon"),networkId:n.union([n.literal("137"),n.literal("80002")])}),At=n.object({chainType:n.literal("eip155"),chainName:n.literal("base"),networkId:n.union([n.literal("8453"),n.literal("84532")])}),vt=n.object({chainType:n.literal("eip155"),chainName:n.literal("arbitrum"),networkId:n.union([n.literal("42161"),n.literal("421614")])}),It=n.object({chainType:n.literal("eip155"),chainName:n.literal("monad"),networkId:n.union([n.literal("143"),n.literal("10143"),n.literal("41454")])}),Z=n.object({chainType:n.literal("solana"),chainName:n.literal("solana"),networkId:n.union([n.literal("mainnet"),n.literal("testnet"),n.literal("devnet"),n.literal("localnet")])}),wt=n.object({chainType:n.literal("sui"),chainName:n.literal("sui"),networkId:n.union([n.literal("mainnet"),n.literal("testnet")])}),tt=n.union([Dt,Tt,At,vt,It,St,Z,wt]);var U=()=>["t","y","1","true","yes"].some(e=>p.DISABLE_ANALYTICS?.toLowerCase()===e)??!1;function L(e){if(!e)return;let t=e.data??{},a=e.data?.asset??{};try{t=JSON.parse(JSON.stringify(t)),a=JSON.parse(JSON.stringify(a))}catch(r){et.default.error("Failed to parse analytics payload",r);return}let s={...t,...e.action?{action:e.action}:{},...a&&typeof a=="object"?a:{},...e.type?{type:e.type}:{}};if("chainID"in s&&!("chainType"in s)&&!("chainName"in s)&&!("networkId"in s)){let r=X.safeParse(s.chainID);r.success&&Object.assign(s,at(r.data))}return H(s)}function at(e){let t=V.getChainDefinition(e);return tt.parse({chainType:t.addressTypes[0],chainName:t.id,networkId:t.networks[e].value.toString()})}function bt(e){switch(e){case"mainnet-beta":return"solana:101";case"devnet":return"solana:103";case"testnet":return"solana:102";case"localhost":return"solana:localnet";default:return J(e)}}c();l();c();l();var O=p.RUDDERSTACK_DATAPLANE??p.VITE_RUDDERSTACK_DATAPLANE??"https://data.phantom.app",Et=p.RUDDERSTACK_KEY_EXT,_t=p.RUDDERSTACK_KEY_WEB;c();l();function P(e,{action:t,data:a}){let s={action:t,data:a};return e.capture("actionApprovedByUser",s)}function C(e,{action:t,data:a}){let s={action:t,data:{...a,chainId:a.chainId??a.networkId}};return e.capture("actionDeniedByUser",s)}function j(e,{action:t,data:a}){let s={type:"transaction",data:{...a,chainId:a.chainId??a.networkId},action:t};return(!s.data.ids||s.data.ids.length===0)&&z.captureError(new Error("No ids found in transactionSubmitted payload"),"provider"),e.capture("transactionSubmitted",s)}function Pt(e,{action:t,data:a}){let s={data:{...a,chainId:a.chainId??a.networkId},action:t};return e.capture("transactionStatus",s)}function q(e,t){let a={type:"message",data:{...t,chainId:t.chainId??t.networkId}};return e.capture("transactionSubmitted",a)}var D=class{analytics;action;constructor(t,a){this.analytics=t,this.action=a}approved=t=>{P(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};denied=async t=>{C(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};submittedTransaction=async(t,a)=>{j(this.analytics,{action:this.action,data:{...a,ids:a.ids??[t],chainId:a.chainId??a.networkId}})};signedMessage=async t=>{q(this.analytics,{...t,chainId:t.chainId??t.networkId})};transactionStatus=async(t,a)=>{a.ids||(a.ids=[t]),Pt(this.analytics,{action:this.action,data:{...a,chainId:a.chainId??a.networkId}})}};async function nt(e,t,a){let{origin:s}=t;switch(e.method){case"eth_sendTransaction":{let[r]=e.params,o=f(r.chainId);return o?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r.chainId}) for method "${e.method}"`}:{success:!0,data:{...o,origin:s,method:e.method,gas:r.gas,maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas,ids:a}}}case"sol_signTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signTransaction",ids:a}}}case"sol_signAndSendTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAndSendTransaction",ids:a}}}case"sol_signAndSendAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAndSendAllTransactions",ids:a}}}case"sol_signAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAllTransactions",ids:a}}}}}async function st(e,t){let{origin:a}=t;switch(e.method){case"eth_sign":case"personal_sign":{let s=t.chainId,r=f(s);return r?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${s}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method,origin:a}}}case"eth_signTypedData":{let[s]=e.params,r=t.chainId;for(let u of s)if(u.name==="chainId"){r=u.value;break}let o=f(r);return o?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r}) for method "${e.method}"`}:{success:!0,data:{...o,method:e.method,origin:a}}}case"eth_signTypedData_v3":{let[s,r]=e.params,o=r.domain.chainId??t.chainId,u=f(o);return u?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${o}) for method "${e.method}"`}:{success:!0,data:{...u,method:e.method,origin:a}}}case"eth_signTypedData_v4":{let[s,r]=e.params,o=t.chainId;(typeof r.domain.chainId=="string"||typeof r.domain.chainId=="number")&&(o=r.domain.chainId);let u=f(o);return u?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${o}) for method "${e.method}"`}:{success:!0,data:{...u,method:e.method,origin:a}}}case"sol_signIn":case"sol_signMessage":{let s=t.chainId,r=f(s);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${s}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method==="sol_signIn"?"signIn":"signMessage",origin:a}}}}}c();l();c();l();var T=M(N());var Ct=["enable-blocklist-metrics","enable-blocklist-blowfish-logonly","enable-force-upgrade"],A="[Analytics Log]",b=class{storage;constructor(t){this.storage=t}async capture(t,a){T.default.debug(A,"Capture Event:",t,L(a))}async getFeatureFlags(){let{ENABLED_FLAGS:t,featureFlags:a,getFeatureFlagOverrides:s}=await import("./src-3OFF3VYE.js"),r=a.filter(S=>!S.startsWith("kill")&&!Ct.includes(S)),o=Object.fromEntries(r.map(S=>[S,!0])),u=await s(this.storage),I=Object.fromEntries(t.map(S=>[S,!0]));return{...o,...I,...u}}async addUserProperties(t){T.default.debug(A,"User Properties:",JSON.stringify(t))}async identify(t,a){T.default.debug(A,"Identify, accountID:",t," traits:",a)}async getDeviceId(){return"mock-device-id"}setDeviceId(t){T.default.debug(A,`SetDeviceId: ${t}`)}async setAnalyticsOptedOut(t){T.default.debug(A,`SetAnalyticsOptedOut: ${t}`)}async setDisplayLanguage(t){T.default.debug(A,`SetDisplayLanguage: ${t}`)}screen(t,a){T.default.debug(A,`Screen: ${t}`,a)}page(t,a,s,r){T.default.debug(A,`Page: ${t}`,a,s,r)}rudderClient};var rt=()=>O,xt=({storage:e,rudderStackKey:t,createAnalytics:a})=>{if(!t)throw new Error("RUDDERSTACK_KEY_[*] env variables required.");let s=rt();if(!s)throw new Error("[*]_RUDDERSTACK_DATAPLANE env variables required.");return U()?new b(e):a(t,s)};c();l();c();l();var Bt="burn",it=e=>new D(e,Bt);c();l();var Rt="send",ot=e=>new D(e,Rt);var $={};ht($,{action:()=>F,createDappAnalytics:()=>Ft,userApprovedAction:()=>kt,userDeniedAction:()=>Mt});c();l();var F="dapp",Ft=e=>new D(e,F);async function kt(e,t){return await P(e,{action:F,data:{...t,chainId:t.networkId}})}async function Mt(e,t){return await C(e,{action:F,data:{...t,chainId:t.networkId}})}var Nt=e=>({send:ot(e),burn:it(e)});c();l();async function v(){}var Ut=()=>({capture:v,getFeatureFlags:async()=>({}),addUserProperties:v,identify:v,getDeviceId:async()=>"",setDeviceId:v,setAnalyticsOptedOut:v,setDisplayLanguage:v,screen:v,page:v,rudderClient:{}});c();l();c();l();var Lt=M(mt());export{Et as a,j as b,q as c,D as d,nt as e,st as f,L as g,at as h,bt as i,xt as j,$ as k,Nt as l,Ut as m};
//# sourceMappingURL=chunk-3IV4Y5QP.js.map
