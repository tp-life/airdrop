import{a as m}from"./chunk-RQLATSAD.js";import{e as E,k as N}from"./chunk-UMB7TYLX.js";import{e as z,f as H,g as B}from"./chunk-4HMU6WOI.js";import"./chunk-HV4BNC77.js";import"./chunk-DLKGATEC.js";import"./chunk-P7AH56UI.js";import"./chunk-UDB3GXAG.js";import"./chunk-ZDSEL3RH.js";import"./chunk-PB6PA2EI.js";import"./chunk-RP4HT6XN.js";import{a as v}from"./chunk-AK42W2OZ.js";import"./chunk-26VAF3RA.js";import{b as S}from"./chunk-NAWTYQ77.js";import"./chunk-7ZVEM3WY.js";import"./chunk-H7ATUB7C.js";import{db as A}from"./chunk-7N5UY74L.js";import"./chunk-ORJUPAX4.js";import{u as P}from"./chunk-HIWDTKJJ.js";import"./chunk-3XC45JK7.js";import"./chunk-GDBECYVT.js";import"./chunk-US2EC2AF.js";import"./chunk-MWXM4F4N.js";import"./chunk-7F2GBYX5.js";import"./chunk-7XSNALQR.js";import"./chunk-HYOCMEEG.js";import{Ea as b,Fa as L}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{L as k,Ya as D,wd as I}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{j as x,s as g}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as J}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as G,h as p,n as T}from"./chunk-3KENBVE7.js";p();T();var e=G(J());var U=o=>{let c={lamports:o.lamports,votePubkey:o.votePubkey,usdPerSol:o.usdPerSol,onClose:o.onClose,validatorName:o.validatorName},{t}=x(),{createStakeAccountAndDelegateStake:s,needsLedgerApproval:d,txHash:a,confirmationStatus:l,isError:u,error:r,onDeny:i}=W(c);if(d)return e.default.createElement(H,{ledgerAction:s,cancel:i});if(u){let n=r?.message;return z(r)?e.default.createElement(B,{ledgerActionError:r,onRetryClick:s,onCancelClick:i}):e.default.createElement(S,{icon:"error",title:t("stakeAccountCreateAndDelegateStakingFailed"),onClose:i,showButton:!!a,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textSecondary,size:16,lineHeight:20.8},n??t("stakeAccountCreateAndDelegateErrorStaking")),e.default.createElement(m,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction")))}return l==="finalized"?e.default.createElement(S,{icon:"success",title:t("stakeAccountCreateAndDelegateSolStaked"),onClose:o.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textSecondary,size:16,lineHeight:20.8},e.default.createElement(v,{i18nKey:"stakeAccountCreateAndDelegateSolStakedDisclaimerInterpolated"},"Your SOL will begin earning rewards",e.default.createElement("br",null)," in the next couple days once the stake account becomes active.")),e.default.createElement(m,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction"))):e.default.createElement(S,{icon:"loading",title:t("stakeAccountCreateAndDelegateStakingSol"),onClose:o.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textSecondary,size:16,lineHeight:20.8},t("stakeAccountCreateAndDelegateStakingSolDisclaimerInterpolated",{validatorName:o.validatorName})),e.default.createElement(m,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction")))},Se=U,W=({onClose:o,...c})=>{let{data:t,isSuccess:s}=I(),{accountIdentifier:d,isLedgerAccount:a,solanaChainAddress:l,solanaPublicKey:u,connection:r,networkID:i}=(0,e.useMemo)(()=>{let O=t?.identifier??"",C=(t?.addresses??[]).find(q=>D.isSolanaNetworkID(q.networkID)),Q=new k.PublicKey(C?.address??""),Y=t?.type==="ledger",h=C?.networkID,j=b(L(h));return{accountIdentifier:O,isLedgerAccount:Y,solanaChainAddress:C,solanaPublicKey:Q,connection:j,networkID:h}},[t]),n=N(r),f=(0,e.useCallback)(()=>{n.mutate({...c,accountIdentifier:d,senderAddress:l,authorizedPubkey:u,votePubkey:new k.PublicKey(c.votePubkey)})},[d,c,n,l,u]),y=P(),K=(0,e.useCallback)(()=>{y.denied({chainType:"solana",chainName:"solana",networkId:D.getSolanaNetworkIDValue(i),type:"delegate"}),o()},[i,o,y]);(0,e.useEffect)(()=>{if(s){if(!t||!l)throw new Error("Selected account undefined when trying to perform stake transaction.");a||f()}},[s]);let w=n.data?.id,M=E(r,2e3,w),V=a&&(n.isIdle||n.isPending),F=M.data?.value?.confirmationStatus;return{createStakeAccountAndDelegateStake:f,onDeny:K,needsLedgerApproval:V,txHash:w,confirmationStatus:F,isError:n.isError,error:n.error}};export{U as StakeAccountCreateAndDelegateStatusPage,Se as default};
//# sourceMappingURL=StakeAccountCreateAndDelegateStatusPage-XQNWSA3O.js.map
