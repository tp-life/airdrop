import{a as V}from"./chunk-JYORC2QX.js";import{a as y}from"./chunk-RQLATSAD.js";import{b as _,e as K}from"./chunk-UMB7TYLX.js";import{e as B,f as F,g as M}from"./chunk-4HMU6WOI.js";import"./chunk-HV4BNC77.js";import"./chunk-DLKGATEC.js";import"./chunk-P7AH56UI.js";import"./chunk-UDB3GXAG.js";import"./chunk-ZDSEL3RH.js";import"./chunk-PB6PA2EI.js";import"./chunk-RP4HT6XN.js";import{a as H}from"./chunk-AK42W2OZ.js";import"./chunk-26VAF3RA.js";import{b as f}from"./chunk-NAWTYQ77.js";import"./chunk-7ZVEM3WY.js";import"./chunk-H7ATUB7C.js";import{db as A}from"./chunk-7N5UY74L.js";import"./chunk-ORJUPAX4.js";import{u as z}from"./chunk-HIWDTKJJ.js";import"./chunk-3XC45JK7.js";import"./chunk-GDBECYVT.js";import"./chunk-US2EC2AF.js";import"./chunk-MWXM4F4N.js";import"./chunk-7F2GBYX5.js";import"./chunk-7XSNALQR.js";import"./chunk-HYOCMEEG.js";import{Ea as v,Fa as O,i as I,j as N}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{L as l,Ya as h,wd as E}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{j as L,s as m}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as X}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as W,h as P,n as x}from"./chunk-3KENBVE7.js";P();x();var e=W(X());var Z=n=>{let s={stakePubkey:n.stakeAccountPubkey,votePubkey:n.voteAccountPubkey,onClose:n.onClose},{t}=L(),{delegateStake:i,onDeny:r,needsLedgerApproval:u,txHash:a,confirmationStatus:c,isError:k,error:d}=$(s);if(u)return e.default.createElement(F,{ledgerAction:i,cancel:r});if(k){let o=d,S=o?.message,g=B(o),D=o?.message.includes(N),C=o?.message.includes(I);return g?e.default.createElement(M,{ledgerActionError:o,onRetryClick:i,onCancelClick:r}):D||C?e.default.createElement(V,{onCancelClick:r}):e.default.createElement(f,{icon:"error",title:t("stakeAccountDelegateStakeStakingFailed"),onClose:r,showButton:!!a,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:m.colors.legacy.textSecondary,size:16,lineHeight:20.8},S??t("stakeAccountDelegateStakeStakingFailedDescription")),e.default.createElement(y,{txHash:a},t("stakeAccountDelegateStakeViewTransaction")))}return c==="confirmed"||c==="finalized"?e.default.createElement(f,{icon:"success",title:t("stakeAccountDelegateStakeSolStaked"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:m.colors.legacy.textSecondary,size:16,lineHeight:20.8},e.default.createElement(H,{i18nKey:"stakeAccountDelegateStakeSolStakedDescriptionInterpolated"},"Your SOL will begin earning rewards",e.default.createElement("br",null)," in the next couple days once the stake account becomes active.")),e.default.createElement(y,{txHash:a},t("stakeAccountDelegateStakeViewTransaction"))):e.default.createElement(f,{icon:"loading",title:t("stakeAccountDelegateStakeStakingSol"),onClose:n.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:m.colors.legacy.textSecondary,size:16,lineHeight:20.8},t("stakeAccountDelegateStakeStakingSolDescription")),e.default.createElement(y,{txHash:a},t("stakeAccountDelegateStakeViewTransaction")))},De=Z,$=({onClose:n,...s})=>{let{data:t,isSuccess:i}=E(),{accountIdentifier:r,isLedgerAccount:u,solanaChainAddress:a,solanaPublicKey:c,connection:k,networkID:d}=(0,e.useMemo)(()=>{let Y=t?.identifier??"",w=(t?.addresses??[]).find(J=>h.isSolanaNetworkID(J.networkID)),j=new l.PublicKey(w?.address??""),q=t?.type==="ledger",b=w?.networkID,G=v(O(b));return{accountIdentifier:Y,isLedgerAccount:q,solanaChainAddress:w,solanaPublicKey:j,connection:G,networkID:b}},[t]),o=_(k),S=(0,e.useCallback)(()=>{o.mutate({...s,accountIdentifier:r,senderAddress:a,stakePubkey:new l.PublicKey(s.stakePubkey),authorizedPubkey:c,votePubkey:new l.PublicKey(s.votePubkey)})},[r,s,o,a,c]),g=z(),D=(0,e.useCallback)(()=>{g.denied({chainType:"solana",chainName:"solana",networkId:h.getSolanaNetworkIDValue(d),type:"delegate"}),n()},[d,n,g]);(0,e.useEffect)(()=>{i&&!u&&S()},[i]);let T=o.data?.id,p=K(k,2e3,T),Q=u&&(o.isIdle||o.isPending),U=p.data?.value?.confirmationStatus;return{delegateStake:S,onDeny:D,needsLedgerApproval:Q,txHash:T,confirmationStatus:U,isError:o.isError||p.isError,error:o.error||p.error}};export{Z as StakeAccountDelegateStakeStatusPage,De as default};
//# sourceMappingURL=StakeAccountDelegateStakeStatusPage-VJSHTD25.js.map
