import{a as an,b as xr,c as hu,e as As,f as cN,g as Bd,h as rc,i as Ss,p as pu,q as yu,r as CE}from"./chunk-NZAWO25Q.js";import{B as UE,C as xu,E as RE,F as LE,G as mh,H as gh,g as cn,y as bu}from"./chunk-E2H5RB2U.js";import{a as PE,b as BE,d as vs,j as Lo,l as uN}from"./chunk-27TD4NX4.js";import{B as vx,D as OE,L as eo,M as yh,b as ws,q as un,w as xe}from"./chunk-YJV3X2ON.js";import{D as ne,K as ph,a as TE,e as aN,h as Ax,i as _E,k as hh,o as DE,u as Se,w as ve,z as Je}from"./chunk-FBDT5S2M.js";import{W as gu,a as Cd,c as Sx,k as ft,n as NE,w as mu}from"./chunk-TKSJVOQZ.js";import{a as Nt,h as v}from"./chunk-UA6ADLWZ.js";import{c as B,d as iN,e as Ro,f as j,h as l,i as b,j as oN,k as sN,l as Pi,m as Buffer,n as h}from"./chunk-3KENBVE7.js";var Nd=B(vu=>{"use strict";l();h();var Ex=oN(),Au=sN(),ME=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;vu.Buffer=H;vu.SlowBuffer=yN;vu.INSPECT_MAX_BYTES=50;var bh=2147483647;vu.kMaxLength=bh;H.TYPED_ARRAY_SUPPORT=fN();!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function fN(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}});Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function Mo(t){if(t>bh)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,H.prototype),e}function H(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _x(t)}return VE(t,e,r)}H.poolSize=8192;function VE(t,e,r){if(typeof t=="string")return lN(t,e);if(ArrayBuffer.isView(t))return hN(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(to(t,ArrayBuffer)||t&&to(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(to(t,SharedArrayBuffer)||t&&to(t.buffer,SharedArrayBuffer)))return kx(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return H.from(n,e,r);let i=pN(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return H.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}H.from=function(t,e,r){return VE(t,e,r)};Object.setPrototypeOf(H.prototype,Uint8Array.prototype);Object.setPrototypeOf(H,Uint8Array);function qE(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function dN(t,e,r){return qE(t),t<=0?Mo(t):e!==void 0?typeof r=="string"?Mo(t).fill(e,r):Mo(t).fill(e):Mo(t)}H.alloc=function(t,e,r){return dN(t,e,r)};function _x(t){return qE(t),Mo(t<0?0:Px(t)|0)}H.allocUnsafe=function(t){return _x(t)};H.allocUnsafeSlow=function(t){return _x(t)};function lN(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!H.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=zE(t,e)|0,n=Mo(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Ix(t){let e=t.length<0?0:Px(t.length)|0,r=Mo(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function hN(t){if(to(t,Uint8Array)){let e=new Uint8Array(t);return kx(e.buffer,e.byteOffset,e.byteLength)}return Ix(t)}function kx(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,H.prototype),n}function pN(t){if(H.isBuffer(t)){let e=Px(t.length)|0,r=Mo(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Cx(t.length)?Mo(0):Ix(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ix(t.data)}function Px(t){if(t>=bh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+bh.toString(16)+" bytes");return t|0}function yN(t){return+t!=t&&(t=0),H.alloc(+t)}H.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==H.prototype};H.compare=function(e,r){if(to(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),to(r,Uint8Array)&&(r=H.from(r,r.offset,r.byteLength)),!H.isBuffer(e)||!H.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};H.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};H.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return H.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=H.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(to(s,Uint8Array))o+s.length>i.length?(H.isBuffer(s)||(s=H.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(H.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function zE(t,e){if(H.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||to(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Tx(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return JE(t).length;default:if(i)return n?-1:Tx(t).length;e=(""+e).toLowerCase(),i=!0}}H.byteLength=zE;function mN(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return kN(this,e,r);case"utf8":case"utf-8":return WE(this,e,r);case"ascii":return EN(this,e,r);case"latin1":case"binary":return IN(this,e,r);case"base64":return SN(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return TN(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}H.prototype._isBuffer=!0;function nc(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}H.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)nc(this,r,r+1);return this};H.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)nc(this,r,r+3),nc(this,r+1,r+2);return this};H.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)nc(this,r,r+7),nc(this,r+1,r+6),nc(this,r+2,r+5),nc(this,r+3,r+4);return this};H.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?WE(this,0,e):mN.apply(this,arguments)};H.prototype.toLocaleString=H.prototype.toString;H.prototype.equals=function(e){if(!H.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:H.compare(this,e)===0};H.prototype.inspect=function(){let e="",r=vu.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ME&&(H.prototype[ME]=H.prototype.inspect);H.prototype.compare=function(e,r,n,i,o){if(to(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),!H.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),d=e.slice(r,n);for(let f=0;f<c;++f)if(u[f]!==d[f]){s=u[f],a=d[f];break}return s<a?-1:a<s?1:0};function jE(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Cx(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=H.from(e,n)),H.isBuffer(e))return e.length===0?-1:FE(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):FE(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function FE(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(d,f){return o===1?d[f]:d.readUInt16BE(f*o)}let u;if(i){let d=-1;for(u=r;u<s;u++)if(c(t,u)===c(e,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===a)return d*o}else d!==-1&&(u-=u-d),d=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let d=!0;for(let f=0;f<a;f++)if(c(t,u+f)!==c(e,f)){d=!1;break}if(d)return u}return-1}H.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};H.prototype.indexOf=function(e,r,n){return jE(this,e,r,n,!0)};H.prototype.lastIndexOf=function(e,r,n){return jE(this,e,r,n,!1)};function gN(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(Cx(a))return s;t[r+s]=a}return s}function bN(t,e,r,n){return xh(Tx(e,t.length-r),t,r,n)}function xN(t,e,r,n){return xh(CN(e),t,r,n)}function wN(t,e,r,n){return xh(JE(e),t,r,n)}function AN(t,e,r,n){return xh(DN(e,t.length-r),t,r,n)}H.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return gN(this,e,r,n);case"utf8":case"utf-8":return bN(this,e,r,n);case"ascii":case"latin1":case"binary":return xN(this,e,r,n);case"base64":return wN(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AN(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function SN(t,e,r){return e===0&&r===t.length?Ex.fromByteArray(t):Ex.fromByteArray(t.slice(e,r))}function WE(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,u,d,f;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],(c&192)===128&&(f=(o&31)<<6|c&63,f>127&&(s=f));break;case 3:c=t[i+1],u=t[i+2],(c&192)===128&&(u&192)===128&&(f=(o&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:c=t[i+1],u=t[i+2],d=t[i+3],(c&192)===128&&(u&192)===128&&(d&192)===128&&(f=(o&15)<<18|(c&63)<<12|(u&63)<<6|d&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return vN(n)}var HE=4096;function vN(t){let e=t.length;if(e<=HE)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=HE));return r}function EN(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function IN(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function kN(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=NN[t[o]];return i}function TN(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}H.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,H.prototype),i};function wr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||wr(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};H.prototype.readUintBE=H.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||wr(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};H.prototype.readUint8=H.prototype.readUInt8=function(e,r){return e=e>>>0,r||wr(e,1,this.length),this[e]};H.prototype.readUint16LE=H.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||wr(e,2,this.length),this[e]|this[e+1]<<8};H.prototype.readUint16BE=H.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||wr(e,2,this.length),this[e]<<8|this[e+1]};H.prototype.readUint32LE=H.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};H.prototype.readUint32BE=H.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};H.prototype.readBigUInt64LE=Es(function(e){e=e>>>0,Su(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Dd(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});H.prototype.readBigUInt64BE=Es(function(e){e=e>>>0,Su(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Dd(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});H.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||wr(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};H.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||wr(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};H.prototype.readInt8=function(e,r){return e=e>>>0,r||wr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};H.prototype.readInt16LE=function(e,r){e=e>>>0,r||wr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};H.prototype.readInt16BE=function(e,r){e=e>>>0,r||wr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};H.prototype.readInt32LE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};H.prototype.readInt32BE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};H.prototype.readBigInt64LE=Es(function(e){e=e>>>0,Su(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Dd(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});H.prototype.readBigInt64BE=Es(function(e){e=e>>>0,Su(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Dd(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});H.prototype.readFloatLE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),Au.read(this,e,!0,23,4)};H.prototype.readFloatBE=function(e,r){return e=e>>>0,r||wr(e,4,this.length),Au.read(this,e,!1,23,4)};H.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||wr(e,8,this.length),Au.read(this,e,!0,52,8)};H.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||wr(e,8,this.length),Au.read(this,e,!1,52,8)};function Tn(t,e,r,n,i,o){if(!H.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Tn(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};H.prototype.writeUintBE=H.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Tn(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};H.prototype.writeUint8=H.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,1,255,0),this[r]=e&255,r+1};H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function GE(t,e,r,n,i){ZE(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function $E(t,e,r,n,i){ZE(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}H.prototype.writeBigUInt64LE=Es(function(e,r=0){return GE(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeBigUInt64BE=Es(function(e,r=0){return $E(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Tn(this,e,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};H.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Tn(this,e,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};H.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};H.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};H.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Tn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};H.prototype.writeBigInt64LE=Es(function(e,r=0){return GE(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H.prototype.writeBigInt64BE=Es(function(e,r=0){return $E(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function YE(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function QE(t,e,r,n,i){return e=+e,r=r>>>0,i||YE(t,e,r,4,34028234663852886e22,-34028234663852886e22),Au.write(t,e,r,n,23,4),r+4}H.prototype.writeFloatLE=function(e,r,n){return QE(this,e,r,!0,n)};H.prototype.writeFloatBE=function(e,r,n){return QE(this,e,r,!1,n)};function XE(t,e,r,n,i){return e=+e,r=r>>>0,i||YE(t,e,r,8,17976931348623157e292,-17976931348623157e292),Au.write(t,e,r,n,52,8),r+8}H.prototype.writeDoubleLE=function(e,r,n){return XE(this,e,r,!0,n)};H.prototype.writeDoubleBE=function(e,r,n){return XE(this,e,r,!1,n)};H.prototype.copy=function(e,r,n,i){if(!H.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};H.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!H.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=H.isBuffer(e)?e:H.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var wu={};function Bx(t,e,r){wu[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Bx("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Bx("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Bx("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=KE(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=KE(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function KE(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function _N(t,e,r){Su(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Dd(e,t.length-(r+1))}function ZE(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new wu.ERR_OUT_OF_RANGE("value",a,t)}_N(n,i,o)}function Su(t,e){if(typeof t!="number")throw new wu.ERR_INVALID_ARG_TYPE(e,"number",t)}function Dd(t,e,r){throw Math.floor(t)!==t?(Su(t,r),new wu.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new wu.ERR_BUFFER_OUT_OF_BOUNDS:new wu.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var PN=/[^+/0-9A-Za-z-_]/g;function BN(t){if(t=t.split("=")[0],t=t.trim().replace(PN,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Tx(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function CN(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function DN(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function JE(t){return Ex.toByteArray(BN(t))}function xh(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function to(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Cx(t){return t!==t}var NN=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Es(t){return typeof BigInt>"u"?ON:t}function ON(){throw new Error("BigInt not supported")}});var Ah=B(fn=>{"use strict";l();h();Object.defineProperty(fn,"__esModule",{value:!0});fn.output=fn.exists=fn.hash=fn.bytes=fn.bool=fn.number=void 0;function wh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}fn.number=wh;function e8(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}fn.bool=e8;function Dx(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}fn.bytes=Dx;function t8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wh(t.outputLen),wh(t.blockLen)}fn.hash=t8;function r8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}fn.exists=r8;function n8(t,e){Dx(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}fn.output=n8;var UN={number:wh,bool:e8,bytes:Dx,hash:t8,exists:r8,output:n8};fn.default=UN});var i8=B(Sh=>{"use strict";l();h();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.crypto=void 0;Sh.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Eu=B(He=>{"use strict";l();h();Object.defineProperty(He,"__esModule",{value:!0});He.randomBytes=He.wrapConstructorWithOpts=He.wrapConstructor=He.checkOpts=He.Hash=He.concatBytes=He.toBytes=He.utf8ToBytes=He.asyncLoop=He.nextTick=He.hexToBytes=He.bytesToHex=He.isLE=He.rotr=He.createView=He.u32=He.u8=void 0;var vh=i8(),RN=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);He.u8=RN;var LN=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));He.u32=LN;var MN=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);He.createView=MN;var FN=(t,e)=>t<<32-e|t>>>e;He.rotr=FN;He.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!He.isLE)throw new Error("Non little-endian hardware is not supported");var HN=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KN(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=HN[t[r]];return e}He.bytesToHex=KN;function VN(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}He.hexToBytes=VN;var qN=async()=>{};He.nextTick=qN;async function zN(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,He.nextTick)(),n+=o)}}He.asyncLoop=zN;function o8(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}He.utf8ToBytes=o8;function Ox(t){if(typeof t=="string"&&(t=o8(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}He.toBytes=Ox;function jN(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}He.concatBytes=jN;var Nx=class{clone(){return this._cloneInto()}};He.Hash=Nx;var WN=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function GN(t,e){if(e!==void 0&&(typeof e!="object"||!WN(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}He.checkOpts=GN;function $N(t){let e=n=>t().update(Ox(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}He.wrapConstructor=$N;function YN(t){let e=(n,i)=>t(i).update(Ox(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}He.wrapConstructorWithOpts=YN;function QN(t=32){if(vh.crypto.web)return vh.crypto.web.getRandomValues(new Uint8Array(t));if(vh.crypto.node)return new Uint8Array(vh.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}He.randomBytes=QN});var Lx=B(Eh=>{"use strict";l();h();Object.defineProperty(Eh,"__esModule",{value:!0});Eh.SHA2=void 0;var Ux=Ah(),Od=Eu();function XN(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var Rx=class extends Od.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Od.createView)(this.buffer)}update(e){Ux.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,Od.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Od.createView)(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ux.default.exists(this),Ux.default.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;XN(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Od.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};Eh.SHA2=Rx});var Hx=B(ni=>{"use strict";l();h();Object.defineProperty(ni,"__esModule",{value:!0});ni.add=ni.toBig=ni.split=ni.fromBig=void 0;var Ih=BigInt(2**32-1),Mx=BigInt(32);function Fx(t,e=!1){return e?{h:Number(t&Ih),l:Number(t>>Mx&Ih)}:{h:Number(t>>Mx&Ih)|0,l:Number(t&Ih)|0}}ni.fromBig=Fx;function s8(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=Fx(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}ni.split=s8;var ZN=(t,e)=>BigInt(t>>>0)<<Mx|BigInt(e>>>0);ni.toBig=ZN;var JN=(t,e,r)=>t>>>r,eO=(t,e,r)=>t<<32-r|e>>>r,tO=(t,e,r)=>t>>>r|e<<32-r,rO=(t,e,r)=>t<<32-r|e>>>r,nO=(t,e,r)=>t<<64-r|e>>>r-32,iO=(t,e,r)=>t>>>r-32|e<<64-r,oO=(t,e)=>e,sO=(t,e)=>t,aO=(t,e,r)=>t<<r|e>>>32-r,cO=(t,e,r)=>e<<r|t>>>32-r,uO=(t,e,r)=>e<<r-32|t>>>64-r,fO=(t,e,r)=>t<<r-32|e>>>64-r;function a8(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}ni.add=a8;var dO=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),lO=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,hO=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),pO=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,yO=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),mO=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,gO={fromBig:Fx,split:s8,toBig:ni.toBig,shrSH:JN,shrSL:eO,rotrSH:tO,rotrSL:rO,rotrBH:nO,rotrBL:iO,rotr32H:oO,rotr32L:sO,rotlSH:aO,rotlSL:cO,rotlBH:uO,rotlBL:fO,add:a8,add3L:dO,add3H:lO,add4L:hO,add4H:pO,add5H:mO,add5L:yO};ni.default=gO});var c8=B(ii=>{"use strict";l();h();Object.defineProperty(ii,"__esModule",{value:!0});ii.sha384=ii.sha512_256=ii.sha512_224=ii.sha512=ii.SHA512=void 0;var bO=Lx(),Ue=Hx(),kh=Eu(),[xO,wO]=Ue.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Is=new Uint32Array(80),ks=new Uint32Array(80),ic=class extends bO.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:x,Hl:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)Is[A]=e.getUint32(r),ks[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){let _=Is[A-15]|0,C=ks[A-15]|0,W=Ue.default.rotrSH(_,C,1)^Ue.default.rotrSH(_,C,8)^Ue.default.shrSH(_,C,7),re=Ue.default.rotrSL(_,C,1)^Ue.default.rotrSL(_,C,8)^Ue.default.shrSL(_,C,7),Y=Is[A-2]|0,G=ks[A-2]|0,ee=Ue.default.rotrSH(Y,G,19)^Ue.default.rotrBH(Y,G,61)^Ue.default.shrSH(Y,G,6),Z=Ue.default.rotrSL(Y,G,19)^Ue.default.rotrBL(Y,G,61)^Ue.default.shrSL(Y,G,6),D=Ue.default.add4L(re,Z,ks[A-7],ks[A-16]),N=Ue.default.add4H(D,W,ee,Is[A-7],Is[A-16]);Is[A]=N|0,ks[A]=D|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:p,Fh:m,Fl:g,Gh:x,Gl:w,Hh:S,Hl:T}=this;for(let A=0;A<80;A++){let _=Ue.default.rotrSH(f,p,14)^Ue.default.rotrSH(f,p,18)^Ue.default.rotrBH(f,p,41),C=Ue.default.rotrSL(f,p,14)^Ue.default.rotrSL(f,p,18)^Ue.default.rotrBL(f,p,41),W=f&m^~f&x,re=p&g^~p&w,Y=Ue.default.add5L(T,C,re,wO[A],ks[A]),G=Ue.default.add5H(Y,S,_,W,xO[A],Is[A]),ee=Y|0,Z=Ue.default.rotrSH(n,i,28)^Ue.default.rotrBH(n,i,34)^Ue.default.rotrBH(n,i,39),D=Ue.default.rotrSL(n,i,28)^Ue.default.rotrBL(n,i,34)^Ue.default.rotrBL(n,i,39),N=n&o^n&a^o&a,O=i&s^i&c^s&c;S=x|0,T=w|0,x=m|0,w=g|0,m=f|0,g=p|0,{h:f,l:p}=Ue.default.add(u|0,d|0,G|0,ee|0),u=a|0,d=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let $=Ue.default.add3L(ee,D,O);n=Ue.default.add3H($,G,Z,N),i=$|0}({h:n,l:i}=Ue.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Ue.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Ue.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Ue.default.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:p}=Ue.default.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=Ue.default.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:x,l:w}=Ue.default.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:S,l:T}=Ue.default.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(n,i,o,s,a,c,u,d,f,p,m,g,x,w,S,T)}roundClean(){Is.fill(0),ks.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};ii.SHA512=ic;var Kx=class extends ic{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Vx=class extends ic{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},qx=class extends ic{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};ii.sha512=(0,kh.wrapConstructor)(()=>new ic);ii.sha512_224=(0,kh.wrapConstructor)(()=>new Kx);ii.sha512_256=(0,kh.wrapConstructor)(()=>new Vx);ii.sha384=(0,kh.wrapConstructor)(()=>new qx)});var S8=B(Ye=>{"use strict";l();h();Object.defineProperty(Ye,"__esModule",{value:!0});Ye.utils=Ye.curve25519=Ye.getSharedSecret=Ye.sync=Ye.verify=Ye.sign=Ye.getPublicKey=Ye.Signature=Ye.Point=Ye.RistrettoPoint=Ye.ExtendedPoint=Ye.CURVE=void 0;var AO=hh(),$t=BigInt(0),qe=BigInt(1),Ps=BigInt(2),SO=BigInt(8),u8=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),ht=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:u8,n:u8,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});Ye.CURVE=ht;var p8=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Ud=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Iie=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),vO=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),EO=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),IO=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),kO=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),nr=class t{constructor(e,r,n,i){this.x=e,this.y=r,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof Ot))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Ot.ZERO)?t.ZERO:new t(e.x,e.y,qe,V(e.x*e.y))}static toAffineBatch(e){let r=PO(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){d8(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=V(r*a),u=V(o*i),d=V(n*a),f=V(s*i);return c===u&&d===f}negate(){return new t(V(-this.x),this.y,this.z,V(-this.t))}double(){let{x:e,y:r,z:n}=this,{a:i}=ht,o=V(e*e),s=V(r*r),a=V(Ps*V(n*n)),c=V(i*o),u=e+r,d=V(V(u*u)-o-s),f=c+s,p=f-a,m=c-s,g=V(d*p),x=V(f*m),w=V(d*m),S=V(p*f);return new t(g,x,S,w)}add(e){d8(e);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=e,d=V((n-r)*(a+s)),f=V((n+r)*(a-s)),p=V(f-d);if(p===$t)return this.double();let m=V(i*Ps*u),g=V(o*Ps*c),x=g+m,w=f+d,S=g-m,T=V(x*p),A=V(w*S),_=V(x*S),C=V(p*w);return new t(T,A,C,_)}subtract(e){return this.add(e.negate())}precomputeWindow(e){let r=1+256/e,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,r){!r&&this.equals(t.BASE)&&(r=Ot.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Gx.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=t.normalizeZ(i),Gx.set(r,i)));let o=t.ZERO,s=t.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let p=0;p<a;p++){let m=p*c,g=Number(e&u);e>>=f,g>c&&(g-=d,e+=qe);let x=m,w=m+Math.abs(g)-1,S=p%2!==0,T=g<0;g===0?s=s.add(f8(S,i[x])):o=o.add(f8(T,i[w]))}return t.normalizeZ([o,s])[0]}multiply(e,r){return this.wNAF(Tu(e,ht.l),r)}multiplyUnsafe(e){let r=Tu(e,ht.l,!1),n=t.BASE,i=t.ZERO;if(r===$t)return i;if(this.equals(i)||r===qe)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>$t;)r&qe&&(o=o.add(s)),s=s.double(),r>>=qe;return o}isSmallOrder(){return this.multiplyUnsafe(ht.h).equals(t.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(ht.l/Ps).double();return ht.l%Ps&&(e=e.add(this)),e.equals(t.ZERO)}toAffine(e){let{x:r,y:n,z:i}=this,o=this.equals(t.ZERO);e==null&&(e=o?SO:Ph(i));let s=V(r*e),a=V(n*e),c=V(i*e);if(o)return Ot.ZERO;if(c!==qe)throw new Error("invZ was invalid");return new Ot(s,a)}fromRistrettoBytes(){jx()}toRistrettoBytes(){jx()}fromRistrettoHash(){jx()}};Ye.ExtendedPoint=nr;nr.BASE=new nr(ht.Gx,ht.Gy,qe,V(ht.Gx*ht.Gy));nr.ZERO=new nr($t,qe,qe,$t);function f8(t,e){let r=e.negate();return t?r:e}function d8(t){if(!(t instanceof nr))throw new TypeError("ExtendedPoint expected")}function zx(t){if(!(t instanceof Bs))throw new TypeError("RistrettoPoint expected")}function jx(){throw new Error("Legacy method: switch to RistrettoPoint")}var Bs=class t{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){let{d:r}=ht,n=V(Ud*e*e),i=V((n+qe)*IO),o=BigInt(-1),s=V((o-r*n)*V(n+r)),{isValid:a,value:c}=Yx(i,s),u=V(c*e);_s(u)||(u=V(-u)),a||(c=u),a||(o=n);let d=V(o*(n-qe)*kO-s),f=c*c,p=V((c+c)*s),m=V(d*vO),g=V(qe-f),x=V(qe+f);return new nr(V(p*x),V(g*m),V(m*x),V(p*g))}static hashToCurve(e){e=Ci(e,64);let r=Wx(e.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=Wx(e.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new t(n.add(o))}static fromHex(e){e=Ci(e,32);let{a:r,d:n}=ht,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Wx(e);if(!BO(Iu(o),e)||_s(o))throw new Error(i);let s=V(o*o),a=V(qe+r*s),c=V(qe-r*s),u=V(a*a),d=V(c*c),f=V(r*n*u-d),{isValid:p,value:m}=h8(V(f*d)),g=V(m*c),x=V(m*g*f),w=V((o+o)*g);_s(w)&&(w=V(-w));let S=V(a*x),T=V(w*S);if(!p||_s(T)||S===$t)throw new Error(i);return new t(new nr(w,S,qe,T))}toRawBytes(){let{x:e,y:r,z:n,t:i}=this.ep,o=V(V(n+r)*V(n-r)),s=V(e*r),a=V(s*s),{value:c}=h8(V(o*a)),u=V(c*o),d=V(c*s),f=V(u*d*i),p;if(_s(i*f)){let g=V(r*Ud),x=V(e*Ud);e=g,r=x,p=V(u*EO)}else p=d;_s(e*f)&&(r=V(-r));let m=V((n-r)*p);return _s(m)&&(m=V(-m)),Iu(m)}toHex(){return Ld(this.toRawBytes())}toString(){return this.toHex()}equals(e){zx(e);let r=this.ep,n=e.ep,i=V(r.x*n.y)===V(r.y*n.x),o=V(r.y*n.y)===V(r.x*n.x);return i||o}add(e){return zx(e),new t(this.ep.add(e.ep))}subtract(e){return zx(e),new t(this.ep.subtract(e.ep))}multiply(e){return new t(this.ep.multiply(e))}multiplyUnsafe(e){return new t(this.ep.multiplyUnsafe(e))}};Ye.RistrettoPoint=Bs;Bs.BASE=new Bs(nr.BASE);Bs.ZERO=new Bs(nr.ZERO);var Gx=new WeakMap,Ot=class t{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Gx.delete(this)}static fromHex(e,r=!0){let{d:n,P:i}=ht;e=Ci(e,32);let o=e.slice();o[31]=e[31]&-129;let s=sc(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=p8)throw new Error("Expected 0 < hex < 2**256");let a=V(s*s),c=V(a-qe),u=V(n*a+qe),{isValid:d,value:f}=Yx(c,u);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let p=(f&qe)===qe;return(e[31]&128)!==0!==p&&(f=V(-f)),new t(f,s)}static async fromPrivateKey(e){return(await Md(e)).point}toRawBytes(){let e=Iu(this.y);return e[31]|=this.x&qe?128:0,e}toHex(){return Ld(this.toRawBytes())}toX25519(){let{y:e}=this,r=V((qe+e)*Ph(qe-e));return Iu(r)}isTorsionFree(){return nr.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new t(V(-this.x),this.y)}add(e){return nr.fromAffine(this).add(nr.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return nr.fromAffine(this).multiply(e,this).toAffine()}};Ye.Point=Ot;Ot.BASE=new Ot(ht.Gx,ht.Gy);Ot.ZERO=new Ot($t,qe);var oc=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=Ci(e,64),n=Ot.fromHex(r.slice(0,32),!1),i=sc(r.slice(32,64));return new t(n,i)}assertValidity(){let{r:e,s:r}=this;if(!(e instanceof Ot))throw new Error("Expected Point instance");return Tu(r,ht.l,!1),this}toRawBytes(){let e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Iu(this.s),32),e}toHex(){return Ld(this.toRawBytes())}};Ye.Signature=oc;function l8(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var TO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ld(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=TO[t[r]];return e}function $x(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function y8(t){let r=t.toString(16).padStart(64,"0");return $x(r)}function Iu(t){return y8(t).reverse()}function _s(t){return(V(t)&qe)===qe}function sc(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Ld(Uint8Array.from(t).reverse()))}var _O=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Wx(t){return V(sc(t)&_O)}function V(t,e=ht.P){let r=t%e;return r>=$t?r:e+r}function Ph(t,e=ht.P){if(t===$t||e<=$t)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=V(t,e),n=e,i=$t,o=qe,s=qe,a=$t;for(;r!==$t;){let u=n/r,d=n%r,f=i-s*u,p=o-a*u;n=r,r=d,i=s,o=a,s=f,a=p}if(n!==qe)throw new Error("invert: does not exist");return V(i,e)}function PO(t,e=ht.P){let r=new Array(t.length),n=t.reduce((o,s,a)=>s===$t?o:(r[a]=o,V(o*s,e)),qe),i=Ph(n,e);return t.reduceRight((o,s,a)=>s===$t?o:(r[a]=V(o*r[a],e),V(o*s,e)),i),r}function Bi(t,e){let{P:r}=ht,n=t;for(;e-- >$t;)n*=n,n%=r;return n}function m8(t){let{P:e}=ht,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=t*t%e*t%e,u=Bi(c,Ps)*c%e,d=Bi(u,qe)*t%e,f=Bi(d,r)*d%e,p=Bi(f,n)*f%e,m=Bi(p,i)*p%e,g=Bi(m,o)*m%e,x=Bi(g,s)*g%e,w=Bi(x,s)*g%e,S=Bi(w,n)*f%e;return{pow_p_5_8:Bi(S,Ps)*t%e,b2:c}}function Yx(t,e){let r=V(e*e*e),n=V(r*r*e),i=m8(t*n).pow_p_5_8,o=V(t*r*i),s=V(e*o*o),a=o,c=V(o*Ud),u=s===t,d=s===V(-t),f=s===V(-t*Ud);return u&&(o=a),(d||f)&&(o=c),_s(o)&&(o=V(-o)),{isValid:u||d,value:o}}function h8(t){return Yx(qe,t)}function ku(t){return V(sc(t),ht.l)}function BO(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Ci(t,e){let r=t instanceof Uint8Array?Uint8Array.from(t):$x(t);if(typeof e=="number"&&r.length!==e)throw new Error(`Expected ${e} bytes`);return r}function Tu(t,e,r=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(r){if($t<t)return t}else if($t<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function g8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function CO(t){return sc(g8(Ci(t,32)))}function b8(t){if(t=typeof t=="bigint"||typeof t=="number"?y8(Tu(t,p8)):Ci(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function x8(t){let e=g8(t.slice(0,32)),r=t.slice(32,64),n=ku(e),i=Ot.BASE.multiply(n),o=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:o}}var Rd;function _h(...t){if(typeof Rd!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Rd(...t)}async function Md(t){return x8(await Ye.utils.sha512(b8(t)))}function Qx(t){return x8(_h(b8(t)))}async function DO(t){return(await Md(t)).pointBytes}Ye.getPublicKey=DO;function NO(t){return Qx(t).pointBytes}async function OO(t,e){t=Ci(t);let{prefix:r,scalar:n,pointBytes:i}=await Md(e),o=ku(await Ye.utils.sha512(r,t)),s=Ot.BASE.multiply(o),a=ku(await Ye.utils.sha512(s.toRawBytes(),i,t)),c=V(o+a*n,ht.l);return new oc(s,c).toRawBytes()}Ye.sign=OO;function UO(t,e){t=Ci(t);let{prefix:r,scalar:n,pointBytes:i}=Qx(e),o=ku(_h(r,t)),s=Ot.BASE.multiply(o),a=ku(_h(s.toRawBytes(),i,t)),c=V(o+a*n,ht.l);return new oc(s,c).toRawBytes()}function w8(t,e,r){e=Ci(e),r instanceof Ot||(r=Ot.fromHex(r,!1));let{r:n,s:i}=t instanceof oc?t.assertValidity():oc.fromHex(t),o=nr.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:e}}function A8(t,e,r,n){let i=ku(n),o=nr.fromAffine(t).multiplyUnsafe(i);return nr.fromAffine(e).add(o).subtract(r).multiplyUnsafe(ht.h).equals(nr.ZERO)}async function RO(t,e,r){let{r:n,SB:i,msg:o,pub:s}=w8(t,e,r),a=await Ye.utils.sha512(n.toRawBytes(),s.toRawBytes(),o);return A8(s,n,i,a)}Ye.verify=RO;function LO(t,e,r){let{r:n,SB:i,msg:o,pub:s}=w8(t,e,r),a=_h(n.toRawBytes(),s.toRawBytes(),o);return A8(s,n,i,a)}Ye.sync={getExtendedPublicKey:Qx,getPublicKey:NO,sign:UO,verify:LO};async function MO(t,e){let{head:r}=await Md(t),n=Ot.fromHex(e).toX25519();return Ye.curve25519.scalarMult(r,n)}Ye.getSharedSecret=MO;Ot.BASE._setWindowSize(8);function Th(t,e,r){let n=V(t*(e-r));return e=V(e-n),r=V(r+n),[e,r]}function FO(t,e){let{P:r}=ht,n=Tu(t,r),i=Tu(e,r),o=BigInt(121665),s=n,a=qe,c=$t,u=n,d=qe,f=$t,p;for(let w=BigInt(254);w>=$t;w--){let S=i>>w&qe;f^=S,p=Th(f,a,u),a=p[0],u=p[1],p=Th(f,c,d),c=p[0],d=p[1],f=S;let T=a+c,A=V(T*T),_=a-c,C=V(_*_),W=A-C,re=u+d,Y=u-d,G=V(Y*T),ee=V(re*_),Z=G+ee,D=G-ee;u=V(Z*Z),d=V(s*V(D*D)),a=V(A*C),c=V(W*(A+V(o*W)))}p=Th(f,a,u),a=p[0],u=p[1],p=Th(f,c,d),c=p[0],d=p[1];let{pow_p_5_8:m,b2:g}=m8(c),x=V(Bi(m,BigInt(3))*g);return V(a*x)}function HO(t){return Iu(V(t,ht.P))}function KO(t){let e=Ci(t,32);return e[31]&=127,sc(e)}Ye.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){let r=KO(e),n=CO(t),i=FO(r,n);if(i===$t)throw new Error("Invalid private or public key received");return HO(i)},scalarMultBase(t){return Ye.curve25519.scalarMult(t,Ye.curve25519.BASE_POINT_U)}};var Ts={node:AO,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Ye.utils={bytesToHex:Ld,hexToBytes:$x,concatBytes:l8,getExtendedPublicKey:Md,mod:V,invert:Ph,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=Ci(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return V(sc(t),ht.l-qe)+qe},randomBytes:(t=32)=>{if(Ts.web)return Ts.web.getRandomValues(new Uint8Array(t));if(Ts.node){let{randomBytes:e}=Ts.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ye.utils.randomBytes(32),sha512:async(...t)=>{let e=l8(...t);if(Ts.web){let r=await Ts.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(r)}else{if(Ts.node)return Uint8Array.from(Ts.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Ot.BASE){let r=e.equals(Ot.BASE)?e:new Ot(e.x,e.y);return r._setWindowSize(t),r.multiply(Ps),r},sha512Sync:void 0};Object.defineProperties(Ye.utils,{sha512Sync:{configurable:!1,get(){return Rd},set(t){Rd||(Rd=t)}}})});var v8=B(_u=>{"use strict";l();h();Object.defineProperty(_u,"__esModule",{value:!0});_u.sha224=_u.sha256=void 0;var VO=Lx(),oi=Eu(),qO=(t,e,r)=>t&e^~t&r,zO=(t,e,r)=>t&e^t&r^e&r,jO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ds=new Uint32Array(64),Bh=class extends VO.SHA2{constructor(){super(64,32,8,!1),this.A=Cs[0]|0,this.B=Cs[1]|0,this.C=Cs[2]|0,this.D=Cs[3]|0,this.E=Cs[4]|0,this.F=Cs[5]|0,this.G=Cs[6]|0,this.H=Cs[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Ds[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=Ds[f-15],m=Ds[f-2],g=(0,oi.rotr)(p,7)^(0,oi.rotr)(p,18)^p>>>3,x=(0,oi.rotr)(m,17)^(0,oi.rotr)(m,19)^m>>>10;Ds[f]=x+Ds[f-7]+g+Ds[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){let p=(0,oi.rotr)(a,6)^(0,oi.rotr)(a,11)^(0,oi.rotr)(a,25),m=d+p+qO(a,c,u)+jO[f]+Ds[f]|0,x=((0,oi.rotr)(n,2)^(0,oi.rotr)(n,13)^(0,oi.rotr)(n,22))+zO(n,i,o)|0;d=u,u=c,c=a,a=s+m|0,s=o,o=i,i=n,n=m+x|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,o,s,a,c,u,d)}roundClean(){Ds.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Xx=class extends Bh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};_u.sha256=(0,oi.wrapConstructor)(()=>new Bh);_u.sha224=(0,oi.wrapConstructor)(()=>new Xx)});var E8=B(e1=>{"use strict";l();h();function Fo(t,e,r){return e<=t&&t<=r}function Uh(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function WO(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function GO(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Ch=-1;function Jx(t){this.tokens=[].slice.call(t)}Jx.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ch},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Pu=-1;function Zx(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Dh="utf-8";function Nh(t,e){if(!(this instanceof Nh))return new Nh(t,e);if(t=t!==void 0?String(t).toLowerCase():Dh,t!==Dh)throw new Error("Encoding not supported. Only utf-8 is supported");e=Uh(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Nh.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=Uh(r),this._streaming||(this._decoder=new $O({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new Jx(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==Pu);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===Pu)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),GO(o)}};function Oh(t,e){if(!(this instanceof Oh))return new Oh(t,e);if(t=t!==void 0?String(t).toLowerCase():Dh,t!==Dh)throw new Error("Encoding not supported. Only utf-8 is supported");e=Uh(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Oh.prototype={encode:function(e,r){e=e?String(e):"",r=Uh(r),this._streaming||(this._encoder=new YO(this._options)),this._streaming=!!r.stream;for(var n=[],i=new Jx(WO(e)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==Pu);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==Pu;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function $O(t){var e=t.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===Ch&&i!==0)return i=0,Zx(e);if(c===Ch)return Pu;if(i===0){if(Fo(c,0,127))return c;if(Fo(c,194,223))i=1,r=c-192;else if(Fo(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,r=c-224;else if(Fo(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,r=c-240;else return Zx(e);return r=r<<6*i,null}if(!Fo(c,o,s))return r=i=n=0,o=128,s=191,a.prepend(c),Zx(e);if(o=128,s=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var u=r;return r=i=n=0,u}}function YO(t){var e=t.fatal;this.handler=function(r,n){if(n===Ch)return Pu;if(Fo(n,0,127))return n;var i,o;Fo(n,128,2047)?(i=1,o=192):Fo(n,2048,65535)?(i=2,o=224):Fo(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var a=n>>6*(i-1);s.push(128|a&63),i-=1}return s}}e1.TextEncoder=Oh;e1.TextDecoder=Nh});var P8=B(mt=>{"use strict";l();h();var QO=mt&&mt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XO=mt&&mt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ro=mt&&mt.__decorate||function(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o},ZO=mt&&mt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.hasOwnProperty.call(t,r)&&QO(e,t,r);return XO(e,t),e},I8=mt&&mt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mt,"__esModule",{value:!0});mt.deserializeUnchecked=mt.deserialize=mt.serialize=mt.BinaryReader=mt.BinaryWriter=mt.BorshError=mt.baseDecode=mt.baseEncode=void 0;var Ns=I8(Ax()),k8=I8(ws()),JO=ZO(E8()),eU=typeof TextDecoder!="function"?JO.TextDecoder:TextDecoder,tU=new eU("utf-8",{fatal:!0});function rU(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),k8.default.encode(Buffer.from(t))}mt.baseEncode=rU;function nU(t){return Buffer.from(k8.default.decode(t))}mt.baseDecode=nU;var t1=1024,Dr=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};mt.BorshError=Dr;var Rh=class{constructor(){this.buf=Buffer.alloc(t1),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(t1)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ns.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ns.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ns.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ns.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(t1)]),this.length+=e.length}writeString(e){this.maybeResize();let r=Buffer.from(e,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,r){this.maybeResize(),this.writeU32(e.length);for(let n of e)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};mt.BinaryWriter=Rh;function no(t,e,r){let n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new Dr("Reached the end of buffer when deserializing")}throw o}}}var dn=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Ns.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Ns.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Ns.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Ns.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Dr(`Expected buffer length ${e} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,r}readString(){let e=this.readU32(),r=this.readBuffer(e);try{return tU.decode(r)}catch(n){throw new Dr(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(e());return n}};ro([no],dn.prototype,"readU8",null);ro([no],dn.prototype,"readU16",null);ro([no],dn.prototype,"readU32",null);ro([no],dn.prototype,"readU64",null);ro([no],dn.prototype,"readU128",null);ro([no],dn.prototype,"readU256",null);ro([no],dn.prototype,"readU512",null);ro([no],dn.prototype,"readString",null);ro([no],dn.prototype,"readFixedArray",null);ro([no],dn.prototype,"readArray",null);mt.BinaryReader=dn;function T8(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ac(t,e,r,n,i){try{if(typeof n=="string")i[`write${T8(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Dr(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Dr(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)ac(t,null,r[o],n[0],i)}else i.writeArray(r,o=>{ac(t,e,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),ac(t,e,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((o,s)=>{ac(t,e,s,n.key,i),ac(t,e,o,n.value,i)});break}default:throw new Dr(`FieldType ${n} unrecognized`)}else _8(t,r,i)}catch(o){throw o instanceof Dr&&o.addToFieldPath(e),o}}function _8(t,e,r){if(typeof e.borshSerialize=="function"){e.borshSerialize(r);return}let n=t.get(e.constructor);if(!n)throw new Dr(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{ac(t,i,e[i],o,r)});else if(n.kind==="enum"){let i=e[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),ac(t,s,e[s],a,r);break}}}else throw new Dr(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function iU(t,e,r=Rh){let n=new r;return _8(t,e,n),n.toArray()}mt.serialize=iU;function cc(t,e,r,n){try{if(typeof r=="string")return n[`read${T8(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let o=0;o<r[1];o++)i.push(cc(t,null,r[0],n));return i}else return n.readArray(()=>cc(t,e,r[0],n))}if(r.kind==="option")return n.readU8()?cc(t,e,r.type,n):void 0;if(r.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let a=cc(t,e,r.key,n),c=cc(t,e,r.value,n);i.set(a,c)}return i}return r1(t,r,n)}catch(i){throw i instanceof Dr&&i.addToFieldPath(e),i}}function r1(t,e,r){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(r);let n=t.get(e);if(!n)throw new Dr(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of t.get(e).fields)i[o]=cc(t,o,s,r);return new e(i)}if(n.kind==="enum"){let i=r.readU8();if(i>=n.values.length)throw new Dr(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=cc(t,o,s,r);return new e({[o]:a})}throw new Dr(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function oU(t,e,r,n=dn){let i=new n(r),o=r1(t,e,i);if(i.offset<r.length)throw new Dr(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}mt.deserialize=oU;function sU(t,e,r,n=dn){let i=new n(r);return r1(t,e,i)}mt.deserializeUnchecked=sU});var zd=B(R=>{"use strict";l();h();Object.defineProperty(R,"__esModule",{value:!0});R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=R.nu64=R.u48=R.u40=R.u32=R.u24=R.u16=R.u8=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0;R.constant=R.utf8=R.cstr=R.blob=R.unionLayoutDiscriminator=R.union=R.seq=R.bits=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;var i1=Pi();function Du(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=Du;function nt(t){return Du(t),i1.Buffer.from(t.buffer,t.byteOffset,t.length)}R.uint8ArrayToBuffer=nt;var ct=class{constructor(e,r){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=r}makeDestinationObject(){return{}}getSpan(e,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=e,r}fromArray(e){}};R.Layout=ct;function o1(t,e){return e.property?t+"["+e.property+"]":t}R.nameWithProperty=o1;function aU(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof ct))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(r,n){return e.encode(this,r,n)},writable:!0}),Object.defineProperty(t,"decode",{value(r,n){return e.decode(r,n)},writable:!0})}R.bindConstructorLayout=aU;var Wr=class extends ct{isCount(){throw new Error("ExternalLayout is abstract")}};R.ExternalLayout=Wr;var Lh=class extends Wr{constructor(e=1,r){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=e}isCount(){return!0}decode(e,r=0){Du(e);let n=e.length-r;return Math.floor(n/this.elementSpan)}encode(e,r,n){return 0}};R.GreedyCount=Lh;var Fd=class extends Wr{constructor(e,r=0,n){if(!(e instanceof ct))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=r}isCount(){return this.layout instanceof _n||this.layout instanceof Fn}decode(e,r=0){return this.layout.decode(e,r+this.offset)}encode(e,r,n=0){return this.layout.encode(e,r,n+this.offset)}};R.OffsetLayout=Fd;var _n=class extends ct{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return nt(e).readUIntLE(r,this.span)}encode(e,r,n=0){return nt(r).writeUIntLE(e,n,this.span),this.span}};R.UInt=_n;var Fn=class extends ct{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return nt(e).readUIntBE(r,this.span)}encode(e,r,n=0){return nt(r).writeUIntBE(e,n,this.span),this.span}};R.UIntBE=Fn;var Ho=class extends ct{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return nt(e).readIntLE(r,this.span)}encode(e,r,n=0){return nt(r).writeIntLE(e,n,this.span),this.span}};R.Int=Ho;var Os=class extends ct{constructor(e,r){if(super(e,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,r=0){return nt(e).readIntBE(r,this.span)}encode(e,r,n=0){return nt(r).writeIntBE(e,n,this.span),this.span}};R.IntBE=Os;var n1=Math.pow(2,32);function ep(t){let e=Math.floor(t/n1),r=t-e*n1;return{hi32:e,lo32:r}}function tp(t,e){return t*n1+e}var Mh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){let n=nt(e),i=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return tp(o,i)}encode(e,r,n=0){let i=ep(e),o=nt(r);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};R.NearUInt64=Mh;var Fh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){let n=nt(e),i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return tp(i,o)}encode(e,r,n=0){let i=ep(e),o=nt(r);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};R.NearUInt64BE=Fh;var Hh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){let n=nt(e),i=n.readUInt32LE(r),o=n.readInt32LE(r+4);return tp(o,i)}encode(e,r,n=0){let i=ep(e),o=nt(r);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};R.NearInt64=Hh;var Kh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){let n=nt(e),i=n.readInt32BE(r),o=n.readUInt32BE(r+4);return tp(i,o)}encode(e,r,n=0){let i=ep(e),o=nt(r);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};R.NearInt64BE=Kh;var Vh=class extends ct{constructor(e){super(4,e)}decode(e,r=0){return nt(e).readFloatLE(r)}encode(e,r,n=0){return nt(r).writeFloatLE(e,n),4}};R.Float=Vh;var qh=class extends ct{constructor(e){super(4,e)}decode(e,r=0){return nt(e).readFloatBE(r)}encode(e,r,n=0){return nt(r).writeFloatBE(e,n),4}};R.FloatBE=qh;var zh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){return nt(e).readDoubleLE(r)}encode(e,r,n=0){return nt(r).writeDoubleLE(e,n),8}};R.Double=zh;var jh=class extends ct{constructor(e){super(8,e)}decode(e,r=0){return nt(e).readDoubleBE(r)}encode(e,r,n=0){return nt(r).writeDoubleBE(e,n),8}};R.DoubleBE=jh;var Wh=class extends ct{constructor(e,r,n){if(!(e instanceof ct))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof Wr&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof Wr)&&0<e.span&&(i=r*e.span),super(i,n),this.elementLayout=e,this.count=r}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof Wr&&(i=i.decode(e,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(e,r+n),++o}return n}decode(e,r=0){let n=[],i=0,o=this.count;for(o instanceof Wr&&(o=o.decode(e,r));i<o;)n.push(this.elementLayout.decode(e,r)),r+=this.elementLayout.getSpan(e,r),i+=1;return n}encode(e,r,n=0){let i=this.elementLayout,o=e.reduce((s,a)=>s+i.encode(a,r,n+s),0);return this.count instanceof Wr&&this.count.encode(e.length,r,n),o}};R.Sequence=Wh;var Gh=class extends ct{constructor(e,r,n){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof ct,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,r),this.fields=e,this.decodePrefixes=!!n}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(e,r);return r+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,r=0){Du(e);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,r)),r+=i.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,r,n=0){let i=n,o=0,s=0;for(let a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){let u=e[a.property];u!==void 0&&(s=a.encode(u,r,n),0>c&&(c=a.getSpan(r,n)))}o=n,n+=c}return o+s-i}fromArray(e){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<e.length&&(r[n.property]=e.shift());return r}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===e)return r}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===e)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};R.Structure=Gh;var Hd=class{constructor(e){this.property=e}decode(e,r){throw new Error("UnionDiscriminator is abstract")}encode(e,r,n){throw new Error("UnionDiscriminator is abstract")}};R.UnionDiscriminator=Hd;var Cu=class extends Hd{constructor(e,r){if(!(e instanceof Wr&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||e.property||"variant"),this.layout=e}decode(e,r){return this.layout.decode(e,r)}encode(e,r,n){return this.layout.encode(e,r,n)}};R.UnionLayoutDiscriminator=Cu;var Kd=class extends ct{constructor(e,r,n){let i;if(e instanceof _n||e instanceof Fn)i=new Cu(new Fd(e));else if(e instanceof Wr&&e.isCount())i=new Cu(e);else if(e instanceof Hd)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof ct))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(e instanceof _n||e instanceof Fn)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof _n||e instanceof Fn,this.defaultLayout=r,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(e,r=0){if(0<=this.span)return this.span;let n=this.getVariant(e,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,r)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let r=this.registry[e[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(e,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,r=0){let n,i=this.discriminator,o=i.decode(e,r),s=this.registry[o];if(s===void 0){let a=this.defaultLayout,c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[a.property]=a.decode(e,r+c)}else n=s.decode(e,r);return n}encode(e,r,n=0){let i=this.getSourceVariant(e);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(e[o.property],r,n),a+s.encode(e[s.property],r,n+a)}return i.encode(e,r,n)}addVariant(e,r,n){let i=new $h(this,e,r,n);return this.registry[e]=i,i}getVariant(e,r=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,r):n=e,this.registry[n]}};R.Union=Kd;var $h=class extends ct{constructor(e,r,n,i){if(!(e instanceof Kd))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof ct))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=r,this.layout=n||null}getSpan(e,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,r+n)),n+i}decode(e,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=i;if(this.layout&&(this.layout.encode(e[this.property],r,n+i),o+=this.layout.getSpan(r,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};R.VariantLayout=$h;function Bu(t){return 0>t&&(t+=4294967296),t}var Vd=class extends ct{constructor(e,r,n){if(!(e instanceof _n||e instanceof Fn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(o){return i=Bu(o),this},this._packedGetValue=function(){return i}}decode(e,r=0){let n=this.makeDestinationObject(),i=this.word.decode(e,r);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(e));return n}encode(e,r,n=0){let i=this.word.decode(r,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=e[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),r,n)}addField(e,r){let n=new qd(this,e,r);return this.fields.push(n),n}addBoolean(e){let r=new Yh(this,e);return this.fields.push(r),r}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===e)return r}};R.BitStructure=Vd;var qd=class{constructor(e,r,n){if(!(e instanceof Vd))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let i=8*e.span,o=e.fields.reduce((s,a)=>s+a.bits,0);if(r+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=e,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-r),this.wordMask=Bu(this.valueMask<<this.start),this.property=n}decode(e,r){let n=this.container._packedGetValue();return Bu(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Bu(e&this.valueMask))throw new TypeError(o1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=Bu(e<<this.start);this.container._packedSetValue(Bu(r&~this.wordMask)|n)}};R.BitField=qd;var Yh=class extends qd{constructor(e,r){super(e,1,r)}decode(e,r){return!!super.decode(e,r)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};R.Boolean=Yh;var Qh=class extends ct{constructor(e,r){if(!(e instanceof Wr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Wr||(n=e),super(n,r),this.length=e}getSpan(e,r){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),n}decode(e,r=0){let n=this.span;return 0>n&&(n=this.length.decode(e,r)),nt(e).slice(r,r+n)}encode(e,r,n){let i=this.length;if(this.length instanceof Wr&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(o1("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");let o=nt(e);return nt(r).write(o.toString("hex"),n,i,"hex"),this.length instanceof Wr&&this.length.encode(i,r,n),i}};R.Blob=Qh;var Xh=class extends ct{constructor(e){super(-1,e)}getSpan(e,r=0){Du(e);let n=r;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-r}decode(e,r=0){let n=this.getSpan(e,r);return nt(e).slice(r,r+n-1).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));let i=i1.Buffer.from(e,"utf8"),o=i.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let s=nt(r);return i.copy(s,n),s[n+o]=0,o+1}};R.CString=Xh;var Zh=class extends ct{constructor(e,r){if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=e}getSpan(e,r=0){return Du(e),e.length-r}decode(e,r=0){let n=this.getSpan(e,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return nt(e).slice(r,r+n).toString("utf-8")}encode(e,r,n=0){typeof e!="string"&&(e=String(e));let i=i1.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(nt(r),n),o}};R.UTF8=Zh;var Jh=class extends ct{constructor(e,r){super(0,r),this.value=e}decode(e,r){return this.value}encode(e,r,n){return 0}};R.Constant=Jh;R.greedy=(t,e)=>new Lh(t,e);R.offset=(t,e,r)=>new Fd(t,e,r);R.u8=t=>new _n(1,t);R.u16=t=>new _n(2,t);R.u24=t=>new _n(3,t);R.u32=t=>new _n(4,t);R.u40=t=>new _n(5,t);R.u48=t=>new _n(6,t);R.nu64=t=>new Mh(t);R.u16be=t=>new Fn(2,t);R.u24be=t=>new Fn(3,t);R.u32be=t=>new Fn(4,t);R.u40be=t=>new Fn(5,t);R.u48be=t=>new Fn(6,t);R.nu64be=t=>new Fh(t);R.s8=t=>new Ho(1,t);R.s16=t=>new Ho(2,t);R.s24=t=>new Ho(3,t);R.s32=t=>new Ho(4,t);R.s40=t=>new Ho(5,t);R.s48=t=>new Ho(6,t);R.ns64=t=>new Hh(t);R.s16be=t=>new Os(2,t);R.s24be=t=>new Os(3,t);R.s32be=t=>new Os(4,t);R.s40be=t=>new Os(5,t);R.s48be=t=>new Os(6,t);R.ns64be=t=>new Kh(t);R.f32=t=>new Vh(t);R.f32be=t=>new qh(t);R.f64=t=>new zh(t);R.f64be=t=>new jh(t);R.struct=(t,e,r)=>new Gh(t,e,r);R.bits=(t,e,r)=>new Vd(t,e,r);R.seq=(t,e,r)=>new Wh(t,e,r);R.union=(t,e,r)=>new Kd(t,e,r);R.unionLayoutDiscriminator=(t,e)=>new Cu(t,e);R.blob=(t,e)=>new Qh(t,e);R.cstr=t=>new Xh(t);R.utf8=(t,e)=>new Zh(t,e);R.constant=(t,e)=>new Jh(t,e)});var s1=B(Nu=>{"use strict";l();h();Object.defineProperty(Nu,"__esModule",{value:!0});var rp;function cU(t){{let e=Buffer.from(t);e.reverse();let r=e.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return rp.toBigInt(t,!1)}Nu.toBigIntLE=cU;function uU(t){{let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return rp.toBigInt(t,!0)}Nu.toBigIntBE=uU;function fU(t,e){{let r=t.toString(16),n=Buffer.from(r.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}return rp.fromBigInt(t,Buffer.allocUnsafe(e),!1)}Nu.toBufferLE=fU;function dU(t,e){{let r=t.toString(16);return Buffer.from(r.padStart(e*2,"0").slice(0,e*2),"hex")}return rp.fromBigInt(t,Buffer.allocUnsafe(e),!0)}Nu.toBufferBE=dU});var L8=B(Ee=>{"use strict";l();h();Object.defineProperty(Ee,"__esModule",{value:!0});var np=class extends TypeError{constructor(e,r){let n,{message:i,...o}=e,{path:s}=e,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[e,...r()]}}};function lU(t){return Di(t)&&typeof t[Symbol.iterator]=="function"}function Di(t){return typeof t=="object"&&t!=null}function B8(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function lr(t){return typeof t=="string"?JSON.stringify(t):""+t}function hU(t){let{done:e,value:r}=t.next();return e?void 0:r}function pU(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});let{path:i,branch:o}=e,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+lr(n)+"`"}=t;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:c}}function*a1(t,e,r,n){lU(t)||(t=[t]);for(let i of t){let o=pU(i,e,r,n);o&&(yield o)}}function*c1(t,e,r={}){let{path:n=[],branch:i=[t],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(t=e.coercer(t,a),s&&e.type!=="type"&&Di(e.schema)&&Di(t)&&!Array.isArray(t)))for(let u in t)e.schema[u]===void 0&&delete t[u];let c=!0;for(let u of e.validator(t,a))c=!1,yield[u,void 0];for(let[u,d,f]of e.entries(t,a)){let p=c1(d,f,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,d],coerce:o,mask:s});for(let m of p)m[0]?(c=!1,yield[m[0],void 0]):o&&(d=m[1],u===void 0?t=d:t instanceof Map?t.set(u,d):t instanceof Set?t.add(d):Di(t)&&(t[u]=d))}if(c)for(let u of e.refiner(t,a))c=!1,yield[u,void 0];c&&(yield[void 0,t])}var Ht=class{constructor(e){let{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=e;this.type=r,this.schema=n,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{let d=i(c,u);return a1(d,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{let d=o(c,u);return a1(d,u,this,c)}:this.refiner=()=>[]}assert(e){return C8(e,this)}create(e){return D8(e,this)}is(e){return u1(e,this)}mask(e){return N8(e,this)}validate(e,r={}){return Ou(e,this,r)}};function C8(t,e){let r=Ou(t,e);if(r[0])throw r[0]}function D8(t,e){let r=Ou(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function N8(t,e){let r=Ou(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function u1(t,e){return!Ou(t,e)[0]}function Ou(t,e,r={}){let n=c1(t,e,r),i=hU(n);return i[0]?[new np(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function yU(...t){let e=t.map(n=>n.schema),r=Object.assign({},...e);return jd(r)}function Hn(t,e){return new Ht({type:t,schema:null,validator:e})}function mU(t,e){return new Ht({...t,refiner:(r,n)=>r===void 0||t.refiner(r,n),validator(r,n){return r===void 0?!0:(e(r,n),t.validator(r,n))}})}function gU(t){return new Ht({type:"dynamic",schema:null,*entries(e,r){yield*t(e,r).entries(e,r)},validator(e,r){return t(e,r).validator(e,r)},coercer(e,r){return t(e,r).coercer(e,r)}})}function bU(t){let e;return new Ht({type:"lazy",schema:null,*entries(r,n){var i;(i=e)!=null||(e=t()),yield*e.entries(r,n)},validator(r,n){var i;return(i=e)!=null||(e=t()),e.validator(r,n)},coercer(r,n){var i;return(i=e)!=null||(e=t()),e.coercer(r,n)}})}function xU(t,e){let{schema:r}=t,n={...r};for(let i of e)delete n[i];return jd(n)}function wU(t){let e=t instanceof Ht?{...t.schema}:{...t};for(let r in e)e[r]=O8(e[r]);return jd(e)}function AU(t,e){let{schema:r}=t,n={};for(let i of e)n[i]=r[i];return jd(n)}function SU(t,e){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),Hn(t,e)}function vU(){return Hn("any",()=>!0)}function EU(t){return new Ht({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(let[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+lr(e)}})}function IU(){return Hn("boolean",t=>typeof t=="boolean")}function kU(){return Hn("date",t=>t instanceof Date&&!isNaN(t.getTime())||"Expected a valid `Date` object, but received: "+lr(t))}function TU(t){let e={},r=t.map(n=>lr(n)).join();for(let n of t)e[n]=n;return new Ht({type:"enums",schema:e,validator(n){return t.includes(n)||"Expected one of `"+r+"`, but received: "+lr(n)}})}function _U(){return Hn("func",t=>typeof t=="function"||"Expected a function, but received: "+lr(t))}function PU(t){return Hn("instance",e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+lr(e))}function BU(){return Hn("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||"Expected an integer, but received: "+lr(t))}function CU(t){return new Ht({type:"intersection",schema:null,*entries(e,r){for(let n of t)yield*n.entries(e,r)},*validator(e,r){for(let n of t)yield*n.validator(e,r)},*refiner(e,r){for(let n of t)yield*n.refiner(e,r)}})}function DU(t){let e=lr(t),r=typeof t;return new Ht({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||"Expected the literal `"+e+"`, but received: "+lr(n)}})}function NU(t,e){return new Ht({type:"map",schema:null,*entries(r){if(t&&e&&r instanceof Map)for(let[n,i]of r.entries())yield[n,n,t],yield[n,i,e]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+lr(r)}})}function f1(){return Hn("never",()=>!1)}function OU(t){return new Ht({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function UU(){return Hn("number",t=>typeof t=="number"&&!isNaN(t)||"Expected a number, but received: "+lr(t))}function jd(t){let e=t?Object.keys(t):[],r=f1();return new Ht({type:"object",schema:t||null,*entries(n){if(t&&Di(n)){let i=new Set(Object.keys(n));for(let o of e)i.delete(o),yield[o,n[o],t[o]];for(let o of i)yield[o,n[o],r]}},validator(n){return Di(n)||"Expected an object, but received: "+lr(n)},coercer(n){return Di(n)?{...n}:n}})}function O8(t){return new Ht({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function RU(t,e){return new Ht({type:"record",schema:null,*entries(r){if(Di(r))for(let n in r){let i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return Di(r)||"Expected an object, but received: "+lr(r)}})}function LU(){return Hn("regexp",t=>t instanceof RegExp)}function MU(t){return new Ht({type:"set",schema:null,*entries(e){if(t&&e instanceof Set)for(let r of e)yield[r,r,t]},coercer(e){return e instanceof Set?new Set(e):e},validator(e){return e instanceof Set||"Expected a `Set` object, but received: "+lr(e)}})}function U8(){return Hn("string",t=>typeof t=="string"||"Expected a string, but received: "+lr(t))}function FU(t){let e=f1();return new Ht({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+lr(r)}})}function HU(t){let e=Object.keys(t);return new Ht({type:"type",schema:t,*entries(r){if(Di(r))for(let n of e)yield[n,r[n],t[n]]},validator(r){return Di(r)||"Expected an object, but received: "+lr(r)}})}function KU(t){let e=t.map(r=>r.type).join(" | ");return new Ht({type:"union",schema:null,validator(r,n){let i=[];for(let o of t){let[...s]=c1(r,o,n),[a]=s;if(a[0])for(let[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+lr(r),...i]}})}function R8(){return Hn("unknown",()=>!0)}function d1(t,e,r){return new Ht({...t,coercer:(n,i)=>u1(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}function VU(t,e,r={}){return d1(t,R8(),n=>{let i=typeof e=="function"?e():e;if(n===void 0)return i;if(!r.strict&&B8(n)&&B8(i)){let o={...n},s=!1;for(let a in i)o[a]===void 0&&(o[a]=i[a],s=!0);if(s)return o}return n})}function qU(t){return d1(t,U8(),e=>e.trim())}function zU(t){let e="Expected an empty "+t.type;return Uu(t,"empty",r=>{if(r instanceof Map||r instanceof Set){let{size:n}=r;return n===0||e+" but received one with a size of `"+n+"`"}else{let{length:n}=r;return n===0||e+" but received one with a length of `"+n+"`"}})}function jU(t,e,r={}){let{exclusive:n}=r;return Uu(t,"max",i=>n?i<e:i<=e||"Expected a "+t.type+" greater than "+(n?"":"or equal to ")+e+" but received `"+i+"`")}function WU(t,e,r={}){let{exclusive:n}=r;return Uu(t,"min",i=>n?i>e:i>=e||"Expected a "+t.type+" greater than "+(n?"":"or equal to ")+e+" but received `"+i+"`")}function GU(t,e){return Uu(t,"pattern",r=>e.test(r)||"Expected a "+t.type+" matching `/"+e.source+'/` but received "'+r+'"')}function $U(t,e,r=e){let n="Expected a "+t.type,i=e===r?"of `"+e+"`":"between `"+e+"` and `"+r+"`";return Uu(t,"size",o=>{if(typeof o=="number"||o instanceof Date)return e<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){let{size:s}=o;return e<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{let{length:s}=o;return e<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function Uu(t,e,r){return new Ht({...t,*refiner(n,i){yield*t.refiner(n,i);let o=r(n,i),s=a1(o,i,t,n);for(let a of s)yield{...a,refinement:e}}})}Ee.Struct=Ht;Ee.StructError=np;Ee.any=vU;Ee.array=EU;Ee.assert=C8;Ee.assign=yU;Ee.boolean=IU;Ee.coerce=d1;Ee.create=D8;Ee.date=kU;Ee.defaulted=VU;Ee.define=Hn;Ee.deprecated=mU;Ee.dynamic=gU;Ee.empty=zU;Ee.enums=TU;Ee.func=_U;Ee.instance=PU;Ee.integer=BU;Ee.intersection=CU;Ee.is=u1;Ee.lazy=bU;Ee.literal=DU;Ee.map=NU;Ee.mask=N8;Ee.max=jU;Ee.min=WU;Ee.never=f1;Ee.nullable=OU;Ee.number=UU;Ee.object=jd;Ee.omit=xU;Ee.optional=O8;Ee.partial=wU;Ee.pattern=GU;Ee.pick=AU;Ee.record=RU;Ee.refine=Uu;Ee.regexp=LU;Ee.set=MU;Ee.size=$U;Ee.string=U8;Ee.struct=SU;Ee.trimmed=qU;Ee.tuple=FU;Ee.type=HU;Ee.union=KU;Ee.unknown=R8;Ee.validate=Ou});var h1=B(l1=>{"use strict";l();h();Object.defineProperty(l1,"__esModule",{value:!0});l1.default=QU;var ip,YU=new Uint8Array(16);function QU(){if(!ip&&(ip=typeof self.crypto<"u"&&self.crypto.getRandomValues&&self.crypto.getRandomValues.bind(self.crypto),!ip))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ip(YU)}});var M8=B(op=>{"use strict";l();h();Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var XU=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;op.default=XU});var Wd=B(sp=>{"use strict";l();h();Object.defineProperty(sp,"__esModule",{value:!0});sp.default=void 0;var ZU=JU(M8());function JU(t){return t&&t.__esModule?t:{default:t}}function eR(t){return typeof t=="string"&&ZU.default.test(t)}var tR=eR;sp.default=tR});var $d=B(Gd=>{"use strict";l();h();Object.defineProperty(Gd,"__esModule",{value:!0});Gd.default=void 0;Gd.unsafeStringify=F8;var rR=nR(Wd());function nR(t){return t&&t.__esModule?t:{default:t}}var Nr=[];for(let t=0;t<256;++t)Nr.push((t+256).toString(16).slice(1));function F8(t,e=0){return Nr[t[e+0]]+Nr[t[e+1]]+Nr[t[e+2]]+Nr[t[e+3]]+"-"+Nr[t[e+4]]+Nr[t[e+5]]+"-"+Nr[t[e+6]]+Nr[t[e+7]]+"-"+Nr[t[e+8]]+Nr[t[e+9]]+"-"+Nr[t[e+10]]+Nr[t[e+11]]+Nr[t[e+12]]+Nr[t[e+13]]+Nr[t[e+14]]+Nr[t[e+15]]}function iR(t,e=0){let r=F8(t,e);if(!(0,rR.default)(r))throw TypeError("Stringified UUID is invalid");return r}var oR=iR;Gd.default=oR});var K8=B(ap=>{"use strict";l();h();Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var sR=cR(h1()),aR=$d();function cR(t){return t&&t.__esModule?t:{default:t}}var H8,p1,y1=0,m1=0;function uR(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||H8,s=t.clockseq!==void 0?t.clockseq:p1;if(o==null||s==null){let p=t.random||(t.rng||sR.default)();o==null&&(o=H8=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),s==null&&(s=p1=(p[6]<<8|p[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:m1+1,u=a-y1+(c-m1)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||a>y1)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y1=a,m1=c,p1=s,a+=122192928e5;let d=((a&268435455)*1e4+c)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let p=0;p<6;++p)i[n+p]=o[p];return e||(0,aR.unsafeStringify)(i)}var fR=uR;ap.default=fR});var g1=B(cp=>{"use strict";l();h();Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var dR=lR(Wd());function lR(t){return t&&t.__esModule?t:{default:t}}function hR(t){if(!(0,dR.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var pR=hR;cp.default=pR});var b1=B(uc=>{"use strict";l();h();Object.defineProperty(uc,"__esModule",{value:!0});uc.URL=uc.DNS=void 0;uc.default=xR;var yR=$d(),mR=gR(g1());function gR(t){return t&&t.__esModule?t:{default:t}}function bR(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var V8="6ba7b810-9dad-11d1-80b4-00c04fd430c8";uc.DNS=V8;var q8="6ba7b811-9dad-11d1-80b4-00c04fd430c8";uc.URL=q8;function xR(t,e,r){function n(i,o,s,a){var c;if(typeof i=="string"&&(i=bR(i)),typeof o=="string"&&(o=(0,mR.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){a=a||0;for(let d=0;d<16;++d)s[a+d]=u[d];return s}return(0,yR.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=V8,n.URL=q8,n}});var j8=B(fp=>{"use strict";l();h();Object.defineProperty(fp,"__esModule",{value:!0});fp.default=void 0;function wR(t){if(typeof t=="string"){let e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return AR(SR(vR(t),t.length*8))}function AR(t){let e=[],r=t.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let o=t[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);e.push(s)}return e}function z8(t){return(t+64>>>9<<4)+14+1}function SR(t,e){t[e>>5]|=128<<e%32,t[z8(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let s=0;s<t.length;s+=16){let a=r,c=n,u=i,d=o;r=Gr(r,n,i,o,t[s],7,-680876936),o=Gr(o,r,n,i,t[s+1],12,-389564586),i=Gr(i,o,r,n,t[s+2],17,606105819),n=Gr(n,i,o,r,t[s+3],22,-1044525330),r=Gr(r,n,i,o,t[s+4],7,-176418897),o=Gr(o,r,n,i,t[s+5],12,1200080426),i=Gr(i,o,r,n,t[s+6],17,-1473231341),n=Gr(n,i,o,r,t[s+7],22,-45705983),r=Gr(r,n,i,o,t[s+8],7,1770035416),o=Gr(o,r,n,i,t[s+9],12,-1958414417),i=Gr(i,o,r,n,t[s+10],17,-42063),n=Gr(n,i,o,r,t[s+11],22,-1990404162),r=Gr(r,n,i,o,t[s+12],7,1804603682),o=Gr(o,r,n,i,t[s+13],12,-40341101),i=Gr(i,o,r,n,t[s+14],17,-1502002290),n=Gr(n,i,o,r,t[s+15],22,1236535329),r=$r(r,n,i,o,t[s+1],5,-165796510),o=$r(o,r,n,i,t[s+6],9,-1069501632),i=$r(i,o,r,n,t[s+11],14,643717713),n=$r(n,i,o,r,t[s],20,-373897302),r=$r(r,n,i,o,t[s+5],5,-701558691),o=$r(o,r,n,i,t[s+10],9,38016083),i=$r(i,o,r,n,t[s+15],14,-660478335),n=$r(n,i,o,r,t[s+4],20,-405537848),r=$r(r,n,i,o,t[s+9],5,568446438),o=$r(o,r,n,i,t[s+14],9,-1019803690),i=$r(i,o,r,n,t[s+3],14,-187363961),n=$r(n,i,o,r,t[s+8],20,1163531501),r=$r(r,n,i,o,t[s+13],5,-1444681467),o=$r(o,r,n,i,t[s+2],9,-51403784),i=$r(i,o,r,n,t[s+7],14,1735328473),n=$r(n,i,o,r,t[s+12],20,-1926607734),r=Yr(r,n,i,o,t[s+5],4,-378558),o=Yr(o,r,n,i,t[s+8],11,-2022574463),i=Yr(i,o,r,n,t[s+11],16,1839030562),n=Yr(n,i,o,r,t[s+14],23,-35309556),r=Yr(r,n,i,o,t[s+1],4,-1530992060),o=Yr(o,r,n,i,t[s+4],11,1272893353),i=Yr(i,o,r,n,t[s+7],16,-155497632),n=Yr(n,i,o,r,t[s+10],23,-1094730640),r=Yr(r,n,i,o,t[s+13],4,681279174),o=Yr(o,r,n,i,t[s],11,-358537222),i=Yr(i,o,r,n,t[s+3],16,-722521979),n=Yr(n,i,o,r,t[s+6],23,76029189),r=Yr(r,n,i,o,t[s+9],4,-640364487),o=Yr(o,r,n,i,t[s+12],11,-421815835),i=Yr(i,o,r,n,t[s+15],16,530742520),n=Yr(n,i,o,r,t[s+2],23,-995338651),r=Qr(r,n,i,o,t[s],6,-198630844),o=Qr(o,r,n,i,t[s+7],10,1126891415),i=Qr(i,o,r,n,t[s+14],15,-1416354905),n=Qr(n,i,o,r,t[s+5],21,-57434055),r=Qr(r,n,i,o,t[s+12],6,1700485571),o=Qr(o,r,n,i,t[s+3],10,-1894986606),i=Qr(i,o,r,n,t[s+10],15,-1051523),n=Qr(n,i,o,r,t[s+1],21,-2054922799),r=Qr(r,n,i,o,t[s+8],6,1873313359),o=Qr(o,r,n,i,t[s+15],10,-30611744),i=Qr(i,o,r,n,t[s+6],15,-1560198380),n=Qr(n,i,o,r,t[s+13],21,1309151649),r=Qr(r,n,i,o,t[s+4],6,-145523070),o=Qr(o,r,n,i,t[s+11],10,-1120210379),i=Qr(i,o,r,n,t[s+2],15,718787259),n=Qr(n,i,o,r,t[s+9],21,-343485551),r=Us(r,a),n=Us(n,c),i=Us(i,u),o=Us(o,d)}return[r,n,i,o]}function vR(t){if(t.length===0)return[];let e=t.length*8,r=new Uint32Array(z8(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function Us(t,e){let r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function ER(t,e){return t<<e|t>>>32-e}function up(t,e,r,n,i,o){return Us(ER(Us(Us(e,t),Us(n,o)),i),r)}function Gr(t,e,r,n,i,o,s){return up(e&r|~e&n,t,e,i,o,s)}function $r(t,e,r,n,i,o,s){return up(e&n|r&~n,t,e,i,o,s)}function Yr(t,e,r,n,i,o,s){return up(e^r^n,t,e,i,o,s)}function Qr(t,e,r,n,i,o,s){return up(r^(e|~n),t,e,i,o,s)}var IR=wR;fp.default=IR});var G8=B(dp=>{"use strict";l();h();Object.defineProperty(dp,"__esModule",{value:!0});dp.default=void 0;var kR=W8(b1()),TR=W8(j8());function W8(t){return t&&t.__esModule?t:{default:t}}var _R=(0,kR.default)("v3",48,TR.default),PR=_R;dp.default=PR});var $8=B(lp=>{"use strict";l();h();Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var BR=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),CR={randomUUID:BR};lp.default=CR});var X8=B(hp=>{"use strict";l();h();Object.defineProperty(hp,"__esModule",{value:!0});hp.default=void 0;var Y8=Q8($8()),DR=Q8(h1()),NR=$d();function Q8(t){return t&&t.__esModule?t:{default:t}}function OR(t,e,r){if(Y8.default.randomUUID&&!e&&!t)return Y8.default.randomUUID();t=t||{};let n=t.random||(t.rng||DR.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,NR.unsafeStringify)(n)}var UR=OR;hp.default=UR});var Z8=B(pp=>{"use strict";l();h();Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;function RR(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function x1(t,e){return t<<e|t>>>32-e}function LR(t){let e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){let s=unescape(encodeURIComponent(t));t=[];for(let a=0;a<s.length;++a)t.push(s.charCodeAt(a))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);let n=t.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=t[s*64+c*4]<<24|t[s*64+c*4+1]<<16|t[s*64+c*4+2]<<8|t[s*64+c*4+3];o[s]=a}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let m=0;m<16;++m)a[m]=o[s][m];for(let m=16;m<80;++m)a[m]=x1(a[m-3]^a[m-8]^a[m-14]^a[m-16],1);let c=r[0],u=r[1],d=r[2],f=r[3],p=r[4];for(let m=0;m<80;++m){let g=Math.floor(m/20),x=x1(c,5)+RR(g,u,d,f)+p+e[g]+a[m]>>>0;p=f,f=d,d=x1(u,30)>>>0,u=c,c=x}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+p>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var MR=LR;pp.default=MR});var e6=B(yp=>{"use strict";l();h();Object.defineProperty(yp,"__esModule",{value:!0});yp.default=void 0;var FR=J8(b1()),HR=J8(Z8());function J8(t){return t&&t.__esModule?t:{default:t}}var KR=(0,FR.default)("v5",80,HR.default),VR=KR;yp.default=VR});var t6=B(mp=>{"use strict";l();h();Object.defineProperty(mp,"__esModule",{value:!0});mp.default=void 0;var qR="00000000-0000-0000-0000-000000000000";mp.default=qR});var r6=B(gp=>{"use strict";l();h();Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var zR=jR(Wd());function jR(t){return t&&t.__esModule?t:{default:t}}function WR(t){if(!(0,zR.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var GR=WR;gp.default=GR});var w1=B(Ni=>{"use strict";l();h();Object.defineProperty(Ni,"__esModule",{value:!0});Object.defineProperty(Ni,"NIL",{enumerable:!0,get:function(){return ZR.default}});Object.defineProperty(Ni,"parse",{enumerable:!0,get:function(){return rL.default}});Object.defineProperty(Ni,"stringify",{enumerable:!0,get:function(){return tL.default}});Object.defineProperty(Ni,"v1",{enumerable:!0,get:function(){return $R.default}});Object.defineProperty(Ni,"v3",{enumerable:!0,get:function(){return YR.default}});Object.defineProperty(Ni,"v4",{enumerable:!0,get:function(){return QR.default}});Object.defineProperty(Ni,"v5",{enumerable:!0,get:function(){return XR.default}});Object.defineProperty(Ni,"validate",{enumerable:!0,get:function(){return eL.default}});Object.defineProperty(Ni,"version",{enumerable:!0,get:function(){return JR.default}});var $R=Ko(K8()),YR=Ko(G8()),QR=Ko(X8()),XR=Ko(e6()),ZR=Ko(t6()),JR=Ko(r6()),eL=Ko(Wd()),tL=Ko($d()),rL=Ko(g1());function Ko(t){return t&&t.__esModule?t:{default:t}}});var i6=B((Koe,n6)=>{"use strict";l();h();var nL=w1().v4,iL=function(t,e,r,n){if(typeof t!="string")throw new TypeError(t+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:t};if(i===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof r>"u"){let s=typeof n.generator=="function"?n.generator:function(){return nL()};o.id=s(o,n)}else i===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};n6.exports=iL});var s6=B((zoe,o6)=>{"use strict";l();h();var oL=w1().v4,sL=i6(),Yd=function(t,e){if(!(this instanceof Yd))return new Yd(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return oL()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};o6.exports=Yd;Yd.prototype.request=function(t,e,r,n){let i=this,o=null,s=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&t&&typeof t=="object"&&typeof e=="function")n=e,o=t;else{typeof r=="function"&&(n=r,r=void 0);let u=typeof n=="function";try{o=sL(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(u)return n(d);throw d}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){return n(u)}return this.callServer(c,function(u,d){i._parseResponse(u,d,n)}),o};Yd.prototype._parseResponse=function(t,e,r){if(t){r(t);return}if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){return r(i)}if(r.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return r(null,n.filter(i),n.filter(o))}else return r(null,n.error,n.result);r(null,n)}});var Ru=B((Goe,Vo)=>{l();h();function A1(t){"@babel/helpers - typeof";return Vo.exports=A1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vo.exports.__esModule=!0,Vo.exports.default=Vo.exports,A1(t)}Vo.exports=A1,Vo.exports.__esModule=!0,Vo.exports.default=Vo.exports});var c6=B((Qoe,qo)=>{l();h();var aL=Ru().default;function a6(){"use strict";qo.exports=a6=function(){return t},qo.exports.__esModule=!0,qo.exports.default=qo.exports;var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(D,N,O){D[N]=O.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(D,N,O){return Object.defineProperty(D,N,{value:O,enumerable:!0,configurable:!0,writable:!0}),D[N]}try{c({},"")}catch{c=function(O,$,fe){return O[$]=fe}}function u(D,N,O,$){var fe=N&&N.prototype instanceof p?N:p,se=Object.create(fe.prototype),Ae=new G($||[]);return n(se,"_invoke",{value:C(D,O,Ae)}),se}function d(D,N,O){try{return{type:"normal",arg:D.call(N,O)}}catch($){return{type:"throw",arg:$}}}t.wrap=u;var f={};function p(){}function m(){}function g(){}var x={};c(x,o,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(ee([])));S&&S!==e&&r.call(S,o)&&(x=S);var T=g.prototype=p.prototype=Object.create(x);function A(D){["next","throw","return"].forEach(function(N){c(D,N,function(O){return this._invoke(N,O)})})}function _(D,N){function O(fe,se,Ae,P){var U=d(D[fe],D,se);if(U.type!=="throw"){var X=U.arg,M=X.value;return M&&aL(M)=="object"&&r.call(M,"__await")?N.resolve(M.__await).then(function(F){O("next",F,Ae,P)},function(F){O("throw",F,Ae,P)}):N.resolve(M).then(function(F){X.value=F,Ae(X)},function(F){return O("throw",F,Ae,P)})}P(U.arg)}var $;n(this,"_invoke",{value:function(se,Ae){function P(){return new N(function(U,X){O(se,Ae,U,X)})}return $=$?$.then(P,P):P()}})}function C(D,N,O){var $="suspendedStart";return function(fe,se){if($==="executing")throw new Error("Generator is already running");if($==="completed"){if(fe==="throw")throw se;return Z()}for(O.method=fe,O.arg=se;;){var Ae=O.delegate;if(Ae){var P=W(Ae,O);if(P){if(P===f)continue;return P}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if($==="suspendedStart")throw $="completed",O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);$="executing";var U=d(D,N,O);if(U.type==="normal"){if($=O.done?"completed":"suspendedYield",U.arg===f)continue;return{value:U.arg,done:O.done}}U.type==="throw"&&($="completed",O.method="throw",O.arg=U.arg)}}}function W(D,N){var O=N.method,$=D.iterator[O];if($===void 0)return N.delegate=null,O==="throw"&&D.iterator.return&&(N.method="return",N.arg=void 0,W(D,N),N.method==="throw")||O!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+O+"' method")),f;var fe=d($,D.iterator,N.arg);if(fe.type==="throw")return N.method="throw",N.arg=fe.arg,N.delegate=null,f;var se=fe.arg;return se?se.done?(N[D.resultName]=se.value,N.next=D.nextLoc,N.method!=="return"&&(N.method="next",N.arg=void 0),N.delegate=null,f):se:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,f)}function re(D){var N={tryLoc:D[0]};1 in D&&(N.catchLoc=D[1]),2 in D&&(N.finallyLoc=D[2],N.afterLoc=D[3]),this.tryEntries.push(N)}function Y(D){var N=D.completion||{};N.type="normal",delete N.arg,D.completion=N}function G(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(re,this),this.reset(!0)}function ee(D){if(D){var N=D[o];if(N)return N.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var O=-1,$=function fe(){for(;++O<D.length;)if(r.call(D,O))return fe.value=D[O],fe.done=!1,fe;return fe.value=void 0,fe.done=!0,fe};return $.next=$}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return m.prototype=g,n(T,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(D){var N=typeof D=="function"&&D.constructor;return!!N&&(N===m||(N.displayName||N.name)==="GeneratorFunction")},t.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,g):(D.__proto__=g,c(D,a,"GeneratorFunction")),D.prototype=Object.create(T),D},t.awrap=function(D){return{__await:D}},A(_.prototype),c(_.prototype,s,function(){return this}),t.AsyncIterator=_,t.async=function(D,N,O,$,fe){fe===void 0&&(fe=Promise);var se=new _(u(D,N,O,$),fe);return t.isGeneratorFunction(N)?se:se.next().then(function(Ae){return Ae.done?Ae.value:se.next()})},A(T),c(T,a,"Generator"),c(T,o,function(){return this}),c(T,"toString",function(){return"[object Generator]"}),t.keys=function(D){var N=Object(D),O=[];for(var $ in N)O.push($);return O.reverse(),function fe(){for(;O.length;){var se=O.pop();if(se in N)return fe.value=se,fe.done=!1,fe}return fe.done=!0,fe}},t.values=ee,G.prototype={constructor:G,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!N)for(var O in this)O.charAt(0)==="t"&&r.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=void 0)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var O=this;function $(X,M){return Ae.type="throw",Ae.arg=N,O.next=X,M&&(O.method="next",O.arg=void 0),!!M}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var se=this.tryEntries[fe],Ae=se.completion;if(se.tryLoc==="root")return $("end");if(se.tryLoc<=this.prev){var P=r.call(se,"catchLoc"),U=r.call(se,"finallyLoc");if(P&&U){if(this.prev<se.catchLoc)return $(se.catchLoc,!0);if(this.prev<se.finallyLoc)return $(se.finallyLoc)}else if(P){if(this.prev<se.catchLoc)return $(se.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return $(se.finallyLoc)}}}},abrupt:function(N,O){for(var $=this.tryEntries.length-1;$>=0;--$){var fe=this.tryEntries[$];if(fe.tryLoc<=this.prev&&r.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var se=fe;break}}se&&(N==="break"||N==="continue")&&se.tryLoc<=O&&O<=se.finallyLoc&&(se=null);var Ae=se?se.completion:{};return Ae.type=N,Ae.arg=O,se?(this.method="next",this.next=se.finallyLoc,f):this.complete(Ae)},complete:function(N,O){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&O&&(this.next=O),f},finish:function(N){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.finallyLoc===N)return this.complete($.completion,$.afterLoc),Y($),f}},catch:function(N){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.tryLoc===N){var fe=$.completion;if(fe.type==="throw"){var se=fe.arg;Y($)}return se}}throw new Error("illegal catch attempt")},delegateYield:function(N,O,$){return this.delegate={iterator:ee(N),resultName:O,nextLoc:$},this.method==="next"&&(this.arg=void 0),f}},t}qo.exports=a6,qo.exports.__esModule=!0,qo.exports.default=qo.exports});var f6=B((Joe,u6)=>{l();h();var bp=c6()();u6.exports=bp;try{regeneratorRuntime=bp}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=bp:Function("r","regeneratorRuntime = r")(bp)}});var l6=B((rse,Qd)=>{l();h();function d6(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(u){r(u);return}a.done?e(c):Promise.resolve(c).then(n,i)}function cL(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(c){d6(o,n,i,s,a,"next",c)}function a(c){d6(o,n,i,s,a,"throw",c)}s(void 0)})}}Qd.exports=cL,Qd.exports.__esModule=!0,Qd.exports.default=Qd.exports});var S1=B((ose,Xd)=>{l();h();function uL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Xd.exports=uL,Xd.exports.__esModule=!0,Xd.exports.default=Xd.exports});var p6=B((cse,Zd)=>{l();h();var h6=Ru().default;function fL(t,e){if(h6(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(h6(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}Zd.exports=fL,Zd.exports.__esModule=!0,Zd.exports.default=Zd.exports});var y6=B((dse,Jd)=>{l();h();var dL=Ru().default,lL=p6();function hL(t){var e=lL(t,"string");return dL(e)==="symbol"?e:String(e)}Jd.exports=hL,Jd.exports.__esModule=!0,Jd.exports.default=Jd.exports});var v1=B((pse,el)=>{l();h();var pL=y6();function m6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pL(n.key),n)}}function yL(t,e,r){return e&&m6(t.prototype,e),r&&m6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}el.exports=yL,el.exports.__esModule=!0,el.exports.default=el.exports});var g6=B((gse,zo)=>{l();h();function E1(t,e){return zo.exports=E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zo.exports.__esModule=!0,zo.exports.default=zo.exports,E1(t,e)}zo.exports=E1,zo.exports.__esModule=!0,zo.exports.default=zo.exports});var I1=B((wse,tl)=>{l();h();var mL=g6();function gL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mL(t,e)}tl.exports=gL,tl.exports.__esModule=!0,tl.exports.default=tl.exports});var b6=B((vse,rl)=>{l();h();function bL(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}rl.exports=bL,rl.exports.__esModule=!0,rl.exports.default=rl.exports});var k1=B((kse,nl)=>{l();h();var xL=Ru().default,wL=b6();function AL(t,e){if(e&&(xL(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wL(t)}nl.exports=AL,nl.exports.__esModule=!0,nl.exports.default=nl.exports});var _1=B((Pse,jo)=>{l();h();function T1(t){return jo.exports=T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jo.exports.__esModule=!0,jo.exports.default=jo.exports,T1(t)}jo.exports=T1,jo.exports.__esModule=!0,jo.exports.default=jo.exports});var w6=B(wp=>{"use strict";l();h();var Ls=PE();Object.defineProperty(wp,"__esModule",{value:!0});wp.default=void 0;var Rs=Ls(f6()),xp=Ls(l6()),SL=Ls(Ru()),vL=Ls(S1()),EL=Ls(v1()),IL=Ls(I1()),kL=Ls(k1()),x6=Ls(_1()),TL=BE();function _L(t){var e=PL();return function(){var n=(0,x6.default)(t),i;if(e){var o=(0,x6.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,kL.default)(this,i)}}function PL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var BL=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},CL=function(t){(0,IL.default)(r,t);var e=_L(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,vL.default)(this,r);var c=s.autoconnect,u=c===void 0?!0:c,d=s.reconnect,f=d===void 0?!0:d,p=s.reconnect_interval,m=p===void 0?1e3:p,g=s.max_reconnects,x=g===void 0?5:g,w=BL(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return i=e.call(this),i.webSocketFactory=n,i.queue={},i.rpc_id=0,i.address=o,i.autoconnect=u,i.ready=!1,i.reconnect=f,i.reconnect_timer_id=void 0,i.reconnect_interval=m,i.max_reconnects=x,i.rest_options=w,i.current_reconnects=0,i.generate_request_id=a||function(){return++i.rpc_id},i.autoconnect&&i._connect(i.address,Object.assign({autoconnect:i.autoconnect,reconnect:i.reconnect,reconnect_interval:i.reconnect_interval,max_reconnects:i.max_reconnects},i.rest_options)),i}return(0,EL.default)(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(i,o,s,a){var c=this;return!a&&(0,SL.default)(s)==="object"&&(a=s,s=null),new Promise(function(u,d){if(!c.ready)return d(new Error("socket not ready"));var f=c.generate_request_id(i,o),p={jsonrpc:"2.0",method:i,params:o||null,id:f};c.socket.send(JSON.stringify(p),a,function(m){if(m)return d(m);c.queue[f]={promise:[u,d]},s&&(c.queue[f].timeout=setTimeout(function(){delete c.queue[f],d(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,xp.default)(Rs.default.mark(function o(s){var a;return Rs.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("rpc.login",s);case 2:if(a=u.sent,a){u.next=5;break}throw new Error("authentication failed");case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"listMethods",value:function(){var n=(0,xp.default)(Rs.default.mark(function o(){return Rs.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.call("__listMethods");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"notify",value:function(i,o){var s=this;return new Promise(function(a,c){if(!s.ready)return c(new Error("socket not ready"));var u={jsonrpc:"2.0",method:i,params:o||null};s.socket.send(JSON.stringify(u),function(d){if(d)return c(d);a()})})}},{key:"subscribe",value:function(){var n=(0,xp.default)(Rs.default.mark(function o(s){var a;return Rs.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.on",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+a[s]);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"unsubscribe",value:function(){var n=(0,xp.default)(Rs.default.mark(function o(s){var a;return Rs.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.off",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed unsubscribing from an event with: "+a);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"close",value:function(i,o){this.socket.close(i||1e3,o)}},{key:"_connect",value:function(i,o){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,o),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(a){var c=a.data;c instanceof ArrayBuffer&&(c=Buffer.from(c).toString());try{c=JSON.parse(c)}catch{return}if(c.notification&&s.listeners(c.notification).length){if(!Object.keys(c.params).length)return s.emit(c.notification);var u=[c.notification];if(c.params.constructor===Object)u.push(c.params);else for(var d=0;d<c.params.length;d++)u.push(c.params[d]);return Promise.resolve().then(function(){s.emit.apply(s,u)})}if(!s.queue[c.id])return c.method&&c.params?Promise.resolve().then(function(){s.emit(c.method,c.params)}):void 0;"error"in c=="result"in c&&s.queue[c.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[c.id].timeout&&clearTimeout(s.queue[c.id].timeout),c.error?s.queue[c.id].promise[1](c.error):s.queue[c.id].promise[0](c.result),delete s.queue[c.id]}),this.socket.addEventListener("error",function(a){return s.emit("error",a)}),this.socket.addEventListener("close",function(a){var c=a.code,u=a.reason;s.ready&&setTimeout(function(){return s.emit("close",c,u)},0),s.ready=!1,s.socket=void 0,c!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(i,o)},s.reconnect_interval)))})}}]),r}(TL.EventEmitter);wp.default=CL});var S6=B(P1=>{"use strict";l();h();var il=PE();Object.defineProperty(P1,"__esModule",{value:!0});P1.default=HL;var DL=il(S1()),NL=il(v1()),OL=il(I1()),UL=il(k1()),A6=il(_1()),RL=BE();function LL(t){var e=ML();return function(){var n=(0,A6.default)(t),i;if(e){var o=(0,A6.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,UL.default)(this,i)}}function ML(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var FL=function(t){(0,OL.default)(r,t);var e=LL(r);function r(n,i,o){var s;return(0,DL.default)(this,r),s=e.call(this),s.socket=new self.WebSocket(n,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(a){return s.emit("message",a.data)},s.socket.onerror=function(a){return s.emit("error",a)},s.socket.onclose=function(a){s.emit("close",a.code,a.reason)},s}return(0,NL.default)(r,[{key:"send",value:function(i,o,s){var a=s||o;try{this.socket.send(i),a()}catch(c){a(c)}}},{key:"close",value:function(i,o){this.socket.close(i,o)}},{key:"addEventListener",value:function(i,o,s){this.socket.addEventListener(i,o,s)}}]),r}(RL.EventEmitter);function HL(t,e){return new FL(t,e)}});var B6=B(St=>{"use strict";l();h();Object.defineProperty(St,"__esModule",{value:!0});St.shake256=St.shake128=St.keccak_512=St.keccak_384=St.keccak_256=St.keccak_224=St.sha3_512=St.sha3_384=St.sha3_256=St.sha3_224=St.Keccak=St.keccakP=void 0;var Lu=Ah(),al=Hx(),sl=Eu(),[I6,k6,T6]=[[],[],[]],KL=BigInt(0),ol=BigInt(1),VL=BigInt(2),qL=BigInt(7),zL=BigInt(256),jL=BigInt(113);for(let t=0,e=ol,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],I6.push(2*(5*n+r)),k6.push((t+1)*(t+2)/2%64);let i=KL;for(let o=0;o<7;o++)e=(e<<ol^(e>>qL)*jL)%zL,e&VL&&(i^=ol<<(ol<<BigInt(o))-ol);T6.push(i)}var[WL,GL]=al.default.split(T6,!0),v6=(t,e,r)=>r>32?al.default.rotlBH(t,e,r):al.default.rotlSH(t,e,r),E6=(t,e,r)=>r>32?al.default.rotlBL(t,e,r):al.default.rotlSL(t,e,r);function _6(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let s=0;s<10;s++)r[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],d=r[c+1],f=v6(u,d,1)^r[a],p=E6(u,d,1)^r[a+1];for(let m=0;m<50;m+=10)t[s+m]^=f,t[s+m+1]^=p}let i=t[2],o=t[3];for(let s=0;s<24;s++){let a=k6[s],c=v6(i,o,a),u=E6(i,o,a),d=I6[s];i=t[d],o=t[d+1],t[d]=c,t[d+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=t[s+a];for(let a=0;a<10;a++)t[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=WL[n],t[1]^=GL[n]}r.fill(0)}St.keccakP=_6;var cl=class t extends sl.Hash{constructor(e,r,n,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Lu.default.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,sl.u32)(this.state)}keccak(){_6(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Lu.default.exists(this);let{blockLen:r,state:n}=this;e=(0,sl.toBytes)(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Lu.default.exists(this,!1),Lu.default.bytes(e),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);e.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Lu.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Lu.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new t(r,n,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}};St.Keccak=cl;var Ms=(t,e,r)=>(0,sl.wrapConstructor)(()=>new cl(e,t,r));St.sha3_224=Ms(6,144,224/8);St.sha3_256=Ms(6,136,256/8);St.sha3_384=Ms(6,104,384/8);St.sha3_512=Ms(6,72,512/8);St.keccak_224=Ms(1,144,224/8);St.keccak_256=Ms(1,136,256/8);St.keccak_384=Ms(1,104,384/8);St.keccak_512=Ms(1,72,512/8);var P6=(t,e,r)=>(0,sl.wrapConstructorWithOpts)((n={})=>new cl(e,t,n.dkLen===void 0?r:n.dkLen,!0));St.shake128=P6(31,168,128/8);St.shake256=P6(31,136,256/8)});var D6=B(ul=>{"use strict";l();h();Object.defineProperty(ul,"__esModule",{value:!0});ul.hmac=void 0;var Ap=Ah(),C6=Eu(),Sp=class extends C6.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ap.default.hash(e);let n=(0,C6.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Ap.default.exists(this),this.iHash.update(e),this}digestInto(e){Ap.default.exists(this),Ap.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},$L=(t,e,r)=>new Sp(t,e).update(r).digest();ul.hmac=$L;ul.hmac.create=(t,e)=>new Sp(t,e)});var N1=B(We=>{"use strict";l();h();Object.defineProperty(We,"__esModule",{value:!0});We.utils=We.schnorr=We.verify=We.signSync=We.sign=We.getSharedSecret=We.recoverPublicKey=We.getPublicKey=We.Signature=We.Point=We.CURVE=void 0;var YL=hh(),Qe=BigInt(0),kt=BigInt(1),Ks=BigInt(2),dl=BigInt(3),N6=BigInt(8),gt=Object.freeze({a:Qe,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:kt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});We.CURVE=gt;var O6=(t,e)=>(t+e/Ks)/e,vp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){let{n:e}=gt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-kt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=O6(o*t,e),c=O6(-n*t,e),u=ce(t-a*r-c*i,e),d=ce(-a*n-c*o,e),f=u>s,p=d>s;if(f&&(u=e-u),p&&(d=e-d),u>s||d>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:p,k2:d}}},Oi=32,dc=32,K6=32,_p=Oi+1,Pp=2*Oi+1;function U6(t){let{a:e,b:r}=gt,n=ce(t*t),i=ce(n*t);return ce(i+e*t+r)}var Ep=gt.a===Qe,hl=class extends Error{constructor(e){super(e)}};function R6(t){if(!(t instanceof ln))throw new TypeError("JacobianPoint expected")}var ln=class t{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof vt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(vt.ZERO)?t.ZERO:new t(e.x,e.y,kt)}static toAffineBatch(e){let r=eM(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return t.toAffineBatch(e).map(t.fromAffine)}equals(e){R6(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=ce(i*i),u=ce(a*a),d=ce(r*u),f=ce(o*c),p=ce(ce(n*a)*u),m=ce(ce(s*i)*c);return d===f&&p===m}negate(){return new t(this.x,ce(-this.y),this.z)}double(){let{x:e,y:r,z:n}=this,i=ce(e*e),o=ce(r*r),s=ce(o*o),a=e+o,c=ce(Ks*(ce(a*a)-i-s)),u=ce(dl*i),d=ce(u*u),f=ce(d-Ks*c),p=ce(u*(c-f)-N6*s),m=ce(Ks*r*n);return new t(f,p,m)}add(e){R6(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e;if(o===Qe||s===Qe)return this;if(r===Qe||n===Qe)return e;let c=ce(i*i),u=ce(a*a),d=ce(r*u),f=ce(o*c),p=ce(ce(n*a)*u),m=ce(ce(s*i)*c),g=ce(f-d),x=ce(m-p);if(g===Qe)return x===Qe?this.double():t.ZERO;let w=ce(g*g),S=ce(g*w),T=ce(d*w),A=ce(x*x-S-Ks*T),_=ce(x*(T-A)-p*S),C=ce(i*a*g);return new t(A,_,C)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=t.ZERO;if(typeof e=="bigint"&&e===Qe)return r;let n=F6(e);if(n===kt)return this;if(!Ep){let f=r,p=this;for(;n>Qe;)n&kt&&(f=f.add(p)),p=p.double(),n>>=kt;return f}let{k1neg:i,k1:o,k2neg:s,k2:a}=vp.splitScalar(n),c=r,u=r,d=this;for(;o>Qe||a>Qe;)o&kt&&(c=c.add(d)),a&kt&&(u=u.add(d)),d=d.double(),o>>=kt,a>>=kt;return i&&(c=c.negate()),s&&(u=u.negate()),u=new t(ce(u.x*vp.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let r=Ep?128/e+1:256/e+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,r){!r&&this.equals(t.BASE)&&(r=vt.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&B1.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=t.normalizeZ(i),B1.set(r,i)));let o=t.ZERO,s=t.BASE,a=1+(Ep?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let p=0;p<a;p++){let m=p*c,g=Number(e&u);e>>=f,g>c&&(g-=d,e+=kt);let x=m,w=m+Math.abs(g)-1,S=p%2!==0,T=g<0;g===0?s=s.add(Ip(S,i[x])):o=o.add(Ip(T,i[w]))}return{p:o,f:s}}multiply(e,r){let n=F6(e),i,o;if(Ep){let{k1neg:s,k1:a,k2neg:c,k2:u}=vp.splitScalar(n),{p:d,f}=this.wNAF(a,r),{p,f:m}=this.wNAF(u,r);d=Ip(s,d),p=Ip(c,p),p=new t(ce(p.x*vp.beta),p.y,p.z),i=d.add(p),o=f.add(m)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return t.normalizeZ([i,o])[0]}toAffine(e){let{x:r,y:n,z:i}=this,o=this.equals(t.ZERO);e==null&&(e=o?N6:qu(i));let s=e,a=ce(s*s),c=ce(a*s),u=ce(r*a),d=ce(n*c),f=ce(i*s);if(o)return vt.ZERO;if(f!==kt)throw new Error("invZ was invalid");return new vt(u,d)}};ln.BASE=new ln(gt.Gx,gt.Gy,kt);ln.ZERO=new ln(Qe,kt,Qe);function Ip(t,e){let r=e.negate();return t?r:e}var B1=new WeakMap,vt=class t{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,B1.delete(this)}hasEvenY(){return this.y%Ks===Qe}static fromCompressedHex(e){let r=e.length===32,n=Vn(r?e:e.subarray(1));if(!Tp(n))throw new Error("Point is not on curve");let i=U6(n),o=JL(i),s=(o&kt)===kt;r?s&&(o=ce(-o)):(e[0]&1)===1!==s&&(o=ce(-o));let a=new t(n,o);return a.assertValidity(),a}static fromUncompressedHex(e){let r=Vn(e.subarray(1,Oi+1)),n=Vn(e.subarray(Oi+1,Oi*2+1)),i=new t(r,n);return i.assertValidity(),i}static fromHex(e){let r=io(e),n=r.length,i=r[0];if(n===Oi)return this.fromCompressedHex(r);if(n===_p&&(i===2||i===3))return this.fromCompressedHex(r);if(n===Pp&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${_p} compressed bytes or ${Pp} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return t.BASE.multiply(lc(e))}static fromSignature(e,r,n){let{r:i,s:o}=q6(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=C1(io(e)),{n:a}=gt,c=n===2||n===3?i+a:i,u=qu(c,a),d=ce(-s*u,a),f=ce(o*u,a),p=n&1?"03":"02",m=t.fromHex(p+Vs(c)),g=t.BASE.multiplyAndAddUnsafe(m,d,f);if(!g)throw new Error("Cannot recover signature: point at infinify");return g.assertValidity(),g}toRawBytes(e=!1){return qs(this.toHex(e))}toHex(e=!1){let r=Vs(this.x);return e?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Vs(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:n}=this;if(!Tp(r)||!Tp(n))throw new Error(e);let i=ce(n*n),o=U6(r);if(ce(i-o)!==Qe)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new t(this.x,ce(-this.y))}double(){return ln.fromAffine(this).double().toAffine()}add(e){return ln.fromAffine(this).add(ln.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ln.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){let i=ln.fromAffine(this),o=r===Qe||r===kt||this!==t.BASE?i.multiplyUnsafe(r):i.multiply(r),s=ln.fromAffine(e).multiplyUnsafe(n),a=o.add(s);return a.equals(ln.ZERO)?void 0:a.toAffine()}};We.Point=vt;vt.BASE=new vt(gt.Gx,gt.Gy);vt.ZERO=new vt(Qe,Qe);function L6(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function M6(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${Fu(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Vn(r),left:t.subarray(e+2)}}function QL(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${Fu(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=M6(t.subarray(2)),{data:n,left:i}=M6(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Fu(i)}`);return{r:e,s:n}}var fc=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Fu(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new t(Bp(i.slice(0,64)),Bp(i.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=QL(r?e:qs(e));return new t(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Ku(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ku(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=gt.n>>kt;return this.s>e}normalizeS(){return this.hasHighS()?new t(this.r,ce(-this.s,gt.n)):this}toDERRawBytes(){return qs(this.toDERHex())}toDERHex(){let e=L6(fl(this.s)),r=L6(fl(this.r)),n=e.length/2,i=r.length/2,o=fl(n),s=fl(i);return`30${fl(i+n+4)}02${s}${r}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return qs(this.toCompactHex())}toCompactHex(){return Vs(this.r)+Vs(this.s)}};We.Signature=fc;function Hs(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var XL=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fu(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=XL[t[r]];return e}var ZL=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Vs(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(Qe<=t&&t<ZL))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Hu(t){let e=qs(Vs(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function fl(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Bp(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function qs(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function Vn(t){return Bp(Fu(t))}function io(t){return t instanceof Uint8Array?Uint8Array.from(t):qs(t)}function F6(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Ku(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ce(t,e=gt.P){let r=t%e;return r>=Qe?r:e+r}function si(t,e){let{P:r}=gt,n=t;for(;e-- >Qe;)n*=n,n%=r;return n}function JL(t){let{P:e}=gt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=si(u,dl)*u%e,f=si(d,dl)*u%e,p=si(f,Ks)*c%e,m=si(p,n)*p%e,g=si(m,i)*m%e,x=si(g,s)*g%e,w=si(x,a)*x%e,S=si(w,s)*g%e,T=si(S,dl)*u%e,A=si(T,o)*m%e,_=si(A,r)*c%e,C=si(_,Ks);if(C*C%e!==t)throw new Error("Cannot find square root");return C}function qu(t,e=gt.P){if(t===Qe||e<=Qe)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=ce(t,e),n=e,i=Qe,o=kt,s=kt,a=Qe;for(;r!==Qe;){let u=n/r,d=n%r,f=i-s*u,p=o-a*u;n=r,r=d,i=s,o=a,s=f,a=p}if(n!==kt)throw new Error("invert: does not exist");return ce(i,e)}function eM(t,e=gt.P){let r=new Array(t.length),n=t.reduce((o,s,a)=>s===Qe?o:(r[a]=o,ce(o*s,e)),kt),i=qu(n,e);return t.reduceRight((o,s,a)=>s===Qe?o:(r[a]=ce(o*r[a],e),ce(o*s,e)),i),r}function tM(t){let e=t.length*8-dc*8,r=Vn(t);return e>0?r>>BigInt(e):r}function C1(t,e=!1){let r=tM(t);if(e)return r;let{n}=gt;return r>=n?r-n:r}var Mu,ll,Cp=class{constructor(e,r){if(this.hashLen=e,this.qByteLen=r,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return We.utils.hmacSha256(this.k,...e)}hmacSync(...e){return ll(this.k,...e)}checkSync(){if(typeof ll!="function")throw new hl("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return Hs(...r)}generateSync(){this.checkSync(),this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return Hs(...r)}};function Ku(t){return Qe<t&&t<gt.n}function Tp(t){return Qe<t&&t<gt.P}function V6(t,e,r,n=!0){let{n:i}=gt,o=C1(t,!0);if(!Ku(o))return;let s=qu(o,i),a=vt.BASE.multiply(o),c=ce(a.x,i);if(c===Qe)return;let u=ce(s*ce(e+r*c,i),i);if(u===Qe)return;let d=new fc(c,u),f=(a.x===d.r?0:2)|Number(a.y&kt);return n&&d.hasHighS()&&(d=d.normalizeS(),f^=1),{sig:d,recovery:f}}function lc(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*dc)throw new Error("Expected 32 bytes of private key");e=Bp(t)}else if(t instanceof Uint8Array){if(t.length!==dc)throw new Error("Expected 32 bytes of private key");e=Vn(t)}else throw new TypeError("Expected valid private key");if(!Ku(e))throw new Error("Expected private key: 0 < key < n");return e}function D1(t){return t instanceof vt?(t.assertValidity(),t):vt.fromHex(t)}function q6(t){if(t instanceof fc)return t.assertValidity(),t;try{return fc.fromDER(t)}catch{return fc.fromCompact(t)}}function rM(t,e=!1){return vt.fromPrivateKey(t).toRawBytes(e)}We.getPublicKey=rM;function nM(t,e,r,n=!1){return vt.fromSignature(t,e,r).toRawBytes(n)}We.recoverPublicKey=nM;function H6(t){let e=t instanceof Uint8Array,r=typeof t=="string",n=(e||r)&&t.length;return e?n===_p||n===Pp:r?n===_p*2||n===Pp*2:t instanceof vt}function iM(t,e,r=!1){if(H6(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!H6(e))throw new TypeError("getSharedSecret: second arg must be public key");let n=D1(e);return n.assertValidity(),n.multiply(lc(t)).toRawBytes(r)}We.getSharedSecret=iM;function z6(t){let e=t.length>Oi?t.slice(0,Oi):t;return Vn(e)}function oM(t){let e=z6(t),r=ce(e,gt.n);return j6(r<Qe?e:r)}function j6(t){return Hu(t)}function W6(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let n=io(t),i=lc(e),o=[j6(i),oM(n)];if(r!=null){r===!0&&(r=We.utils.randomBytes(Oi));let c=io(r);if(c.length!==Oi)throw new Error(`sign: Expected ${Oi} bytes of extra data`);o.push(c)}let s=Hs(...o),a=z6(n);return{seed:s,m:a,d:i}}function G6(t,e){let{sig:r,recovery:n}=t,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},e),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function sM(t,e,r={}){let{seed:n,m:i,d:o}=W6(t,e,r.extraEntropy),s=new Cp(K6,dc);await s.reseed(n);let a;for(;!(a=V6(await s.generate(),i,o,r.canonical));)await s.reseed();return G6(a,r)}We.sign=sM;function aM(t,e,r={}){let{seed:n,m:i,d:o}=W6(t,e,r.extraEntropy),s=new Cp(K6,dc);s.reseedSync(n);let a;for(;!(a=V6(s.generateSync(),i,o,r.canonical));)s.reseedSync();return G6(a,r)}We.signSync=aM;var cM={strict:!0};function uM(t,e,r,n=cM){let i;try{i=q6(t),e=io(e)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=C1(e),c;try{c=D1(r)}catch{return!1}let{n:u}=gt,d=qu(s,u),f=ce(a*d,u),p=ce(o*d,u),m=vt.BASE.multiplyAndAddUnsafe(c,f,p);return m?ce(m.x,u)===o:!1}We.verify=uM;function Dp(t){return ce(Vn(t),gt.n)}var Vu=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=io(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Vn(r.subarray(0,32)),i=Vn(r.subarray(32,64));return new t(n,i)}assertValidity(){let{r:e,s:r}=this;if(!Tp(e)||!Ku(r))throw new Error("Invalid signature")}toHex(){return Vs(this.r)+Vs(this.s)}toRawBytes(){return qs(this.toHex())}};function fM(t){return vt.fromPrivateKey(t).toRawX()}var Np=class{constructor(e,r,n=We.utils.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=io(e);let{x:i,scalar:o}=this.getScalar(lc(r));if(this.px=i,this.d=o,this.rand=io(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){let r=vt.fromPrivateKey(e),n=r.hasEvenY()?e:gt.n-e;return{point:r,scalar:n,x:r.toRawX()}}initNonce(e,r){return Hu(e^Vn(r))}finalizeNonce(e){let r=ce(Vn(e),gt.n);if(r===Qe)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(e,r,n,i){return new Vu(e.x,ce(r+n*i,gt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:e,d:r,px:n,rand:i}=this,o=We.utils.taggedHash,s=this.initNonce(r,await o(Fs.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Fs.nonce,s,n,e)),d=Dp(await o(Fs.challenge,c,n,e)),f=this.finalizeSig(a,u,d,r);return await Q6(f,e,n)||this.error(),f}calcSync(){let{m:e,d:r,px:n,rand:i}=this,o=We.utils.taggedHashSync,s=this.initNonce(r,o(Fs.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Fs.nonce,s,n,e)),d=Dp(o(Fs.challenge,c,n,e)),f=this.finalizeSig(a,u,d,r);return X6(f,e,n)||this.error(),f}};async function dM(t,e,r){return new Np(t,e,r).calc()}function lM(t,e,r){return new Np(t,e,r).calcSync()}function $6(t,e,r){let n=t instanceof Vu,i=n?t:Vu.fromHex(t);return n&&i.assertValidity(),{...i,m:io(e),P:D1(r)}}function Y6(t,e,r,n){let i=vt.BASE.multiplyAndAddUnsafe(e,lc(r),ce(-n,gt.n));return!(!i||!i.hasEvenY()||i.x!==t)}async function Q6(t,e,r){try{let{r:n,s:i,m:o,P:s}=$6(t,e,r),a=Dp(await We.utils.taggedHash(Fs.challenge,Hu(n),s.toRawX(),o));return Y6(n,s,i,a)}catch{return!1}}function X6(t,e,r){try{let{r:n,s:i,m:o,P:s}=$6(t,e,r),a=Dp(We.utils.taggedHashSync(Fs.challenge,Hu(n),s.toRawX(),o));return Y6(n,s,i,a)}catch(n){if(n instanceof hl)throw n;return!1}}We.schnorr={Signature:Vu,getPublicKey:fM,sign:dM,verify:Q6,signSync:lM,verifySync:X6};vt.BASE._setWindowSize(8);var Kn={node:YL,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Fs={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},kp={};We.utils={bytesToHex:Fu,hexToBytes:qs,concatBytes:Hs,mod:ce,invert:qu,isValidPrivateKey(t){try{return lc(t),!0}catch{return!1}},_bigintTo32Bytes:Hu,_normalizePrivateKey:lc,hashToPrivateKey:t=>{t=io(t);let e=dc+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=ce(Vn(t),gt.n-kt)+kt;return Hu(r)},randomBytes:(t=32)=>{if(Kn.web)return Kn.web.getRandomValues(new Uint8Array(t));if(Kn.node){let{randomBytes:e}=Kn.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>We.utils.hashToPrivateKey(We.utils.randomBytes(dc+8)),precompute(t=8,e=vt.BASE){let r=e===vt.BASE?e:new vt(e.x,e.y);return r._setWindowSize(t),r.multiply(dl),r},sha256:async(...t)=>{if(Kn.web){let e=await Kn.web.subtle.digest("SHA-256",Hs(...t));return new Uint8Array(e)}else if(Kn.node){let{createHash:e}=Kn.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Kn.web){let r=await Kn.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Hs(...e),i=await Kn.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Kn.node){let{createHmac:r}=Kn.node,n=r("sha256",t);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=kp[t];if(r===void 0){let n=await We.utils.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Hs(n,n),kp[t]=r}return We.utils.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof Mu!="function")throw new hl("sha256Sync is undefined, you need to set it");let r=kp[t];if(r===void 0){let n=Mu(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Hs(n,n),kp[t]=r}return Mu(r,...e)},_JacobianPoint:ln};Object.defineProperties(We.utils,{sha256Sync:{configurable:!1,get(){return Mu},set(t){Mu||(Mu=t)}},hmacSha256Sync:{configurable:!1,get(){return ll},set(t){ll||(ll=t)}}})});var Zp=B(te=>{"use strict";l();h();Object.defineProperty(te,"__esModule",{value:!0});var Ie=Nd(),hM=c8(),pM=S8(),yM=Ax(),mM=ws(),H1=v8(),O1=P8(),y4=zd(),K1=s1(),y=L8(),gM=s6(),bM=w6(),xM=S6(),Z6=B6(),wM=D6(),AM=N1();function kl(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function sw(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var Ws=sw(pM),J6=kl(yM),Or=kl(mM),I=sw(y4),SM=kl(gM),vM=kl(bM),EM=kl(xM),$p=sw(AM);Ws.utils.sha512Sync=(...t)=>hM.sha512(Ws.utils.concatBytes(...t));var IM=Ws.utils.randomPrivateKey,e4=()=>{let t=Ws.utils.randomPrivateKey(),e=Mp(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},Mp=Ws.sync.getPublicKey;function t4(t){try{return Ws.Point.fromHex(t,!0),!0}catch{return!1}}var aw=(t,e)=>Ws.sync.sign(t,e.slice(0,32)),kM=Ws.sync.verify,Re=t=>Ie.Buffer.isBuffer(t)?t:t instanceof Uint8Array?Ie.Buffer.from(t.buffer,t.byteOffset,t.byteLength):Ie.Buffer.from(t),gl=class{constructor(e){Object.assign(this,e)}encode(){return Ie.Buffer.from(O1.serialize(ml,this))}static decode(e){return O1.deserialize(ml,this,e)}static decodeUnchecked(e){return O1.deserializeUnchecked(ml,this,e)}},V1=class extends gl{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this.enum=r})}},ml=new Map,m4,g4=32,co=32;function TM(t){return t._bn!==void 0}var r4=1;m4=Symbol.toStringTag;var oe=class t extends gl{constructor(e){if(super({}),this._bn=void 0,TM(e))this._bn=e._bn;else{if(typeof e=="string"){let r=Or.default.decode(e);if(r.length!=co)throw new Error("Invalid public key input");this._bn=new J6.default(r)}else this._bn=new J6.default(e);if(this._bn.byteLength()>co)throw new Error("Invalid public key input")}}static unique(){let e=new t(r4);return r4+=1,new t(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Or.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(Ie.Buffer);if(e.length===co)return e;let r=Ie.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[m4](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){let i=Ie.Buffer.concat([e.toBuffer(),Ie.Buffer.from(r),n.toBuffer()]),o=H1.sha256(i);return new t(o)}static createProgramAddressSync(e,r){let n=Ie.Buffer.alloc(0);e.forEach(function(o){if(o.length>g4)throw new TypeError("Max seed length exceeded");n=Ie.Buffer.concat([n,Re(o)])}),n=Ie.Buffer.concat([n,r.toBuffer(),Ie.Buffer.from("ProgramDerivedAddress")]);let i=H1.sha256(n);if(t4(i))throw new Error("Invalid seeds, address must fall off the curve");return new t(i)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,i;for(;n!=0;){try{let o=e.concat(Ie.Buffer.from([n]));i=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){let r=new t(e);return t4(r.toBytes())}};oe.default=new oe("11111111111111111111111111111111");ml.set(oe,{kind:"struct",fields:[["_bn","u256"]]});var q1=class{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){let r=Re(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=Re(IM()),this._publicKey=Re(Mp(this._secretKey))}get publicKey(){return new oe(this._publicKey)}get secretKey(){return Ie.Buffer.concat([this._secretKey,this._publicKey],64)}},_M=new oe("BPFLoader1111111111111111111111111111111111"),js=1232,Yp=127,bl=64,xl=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(xl.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var wl=class extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(wl.prototype,"name",{value:"TransactionExpiredTimeoutError"});var zs=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(zs.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var yc=class{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return e.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},ze=(t="publicKey")=>I.blob(32,t),PM=(t="signature")=>I.blob(64,t),pc=(t="string")=>{let e=I.struct([I.u32("length"),I.u32("lengthPadding"),I.blob(I.offset(I.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(o,s)=>r(o,s).chars.toString(),i.encode=(o,s,a)=>{let c={chars:Ie.Buffer.from(o,"utf8")};return n(c,s,a)},i.alloc=o=>I.u32().span+I.u32().span+Ie.Buffer.from(o,"utf8").length,i},BM=(t="authorized")=>I.struct([ze("staker"),ze("withdrawer")],t),CM=(t="lockup")=>I.struct([I.ns64("unixTimestamp"),I.ns64("epoch"),ze("custodian")],t),DM=(t="voteInit")=>I.struct([ze("nodePubkey"),ze("authorizedVoter"),ze("authorizedWithdrawer"),I.u8("commission")],t),NM=(t="voteAuthorizeWithSeedArgs")=>I.struct([I.u32("voteAuthorizationType"),ze("currentAuthorityDerivedKeyOwnerPubkey"),pc("currentAuthorityDerivedKeySeed"),ze("newAuthorized")],t);function b4(t,e){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let o=e[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return b4({layout:i},e[i.property]);return 0},n=0;return t.layout.fields.forEach(i=>{n+=r(i)}),n}function Pn(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,!(n&128))break}return e}function qn(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function it(t,e){if(!t)throw new Error(e||"Assertion failed")}var Fp=class t{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){let n=new Map,i=s=>{let a=s.toBase58(),c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},o=i(r);o.isSigner=!0,o.isWritable=!0;for(let s of e){i(s.programId).isInvoked=!0;for(let a of s.keys){let c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new t(r,n)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];it(e.length<=256,"Max static account keys length exceeded");let r=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),o=e.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{it(r.length>0,"Expected at least one writable signer key");let[c]=r[0];it(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([c])=>new oe(c)),...n.map(([c])=>new oe(c)),...i.map(([c])=>new oe(c)),...o.map(([c])=>new oe(c))];return[s,a]}extractTableLookup(e){let[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(e,r){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(r(s)){let a=new oe(o),c=e.findIndex(u=>u.equals(a));c>=0&&(it(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(o))}return[n,i]}},x4="Reached end of buffer unexpectedly";function so(t){if(t.length===0)throw new Error(x4);return t.shift()}function Bn(t,...e){let[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(x4);return t.splice(...e)}var uo=class t{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new oe(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Or.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yc(this.staticAccountKeys)}static compile(e){let r=Fp.compile(e.instructions,e.payerKey),[n,i]=r.getMessageComponents(),s=new yc(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Or.default.encode(a.data)}));return new t({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let n=e-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){let e=this.accountKeys.length,r=[];qn(r,e);let n=this.instructions.map(f=>{let{accounts:p,programIdIndex:m}=f,g=Array.from(Or.default.decode(f.data)),x=[];qn(x,p.length);let w=[];return qn(w,g.length),{programIdIndex:m,keyIndicesCount:Ie.Buffer.from(x),keyIndices:p,dataLength:Ie.Buffer.from(w),data:g}}),i=[];qn(i,n.length);let o=Ie.Buffer.alloc(js);Ie.Buffer.from(i).copy(o);let s=i.length;n.forEach(f=>{let m=I.struct([I.u8("programIdIndex"),I.blob(f.keyIndicesCount.length,"keyIndicesCount"),I.seq(I.u8("keyIndex"),f.keyIndices.length,"keyIndices"),I.blob(f.dataLength.length,"dataLength"),I.seq(I.u8("userdatum"),f.data.length,"data")]).encode(f,o,s);s+=m}),o=o.slice(0,s);let a=I.struct([I.blob(1,"numRequiredSignatures"),I.blob(1,"numReadonlySignedAccounts"),I.blob(1,"numReadonlyUnsignedAccounts"),I.blob(r.length,"keyCount"),I.seq(ze("key"),e,"keys"),ze("recentBlockhash")]),c={numRequiredSignatures:Ie.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Ie.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Ie.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Ie.Buffer.from(r),keys:this.accountKeys.map(f=>Re(f.toBytes())),recentBlockhash:Or.default.decode(this.recentBlockhash)},u=Ie.Buffer.alloc(2048),d=a.encode(c,u);return o.copy(u,d),u.slice(0,d+o.length)}static from(e){let r=[...e],n=so(r);if(n!==(n&Yp))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=so(r),o=so(r),s=Pn(r),a=[];for(let p=0;p<s;p++){let m=Bn(r,0,co);a.push(new oe(Ie.Buffer.from(m)))}let c=Bn(r,0,co),u=Pn(r),d=[];for(let p=0;p<u;p++){let m=so(r),g=Pn(r),x=Bn(r,0,g),w=Pn(r),S=Bn(r,0,w),T=Or.default.encode(Ie.Buffer.from(S));d.push({programIdIndex:m,accounts:x,data:T})}let f={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:Or.default.encode(Ie.Buffer.from(c)),accountKeys:a,instructions:d};return new t(f)}},zu=class t{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yc(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){let i=e-n,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(e>=this.header.numRequiredSignatures){let i=e-r,s=n-r-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=r-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=e.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)r.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){let r=Fp.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let d of o){let f=r.extractTableLookup(d);if(f!==void 0){let[p,{writable:m,readonly:g}]=f;n.push(p),i.writable.push(...m),i.readonly.push(...g)}}let[s,a]=r.getMessageComponents(),u=new yc(a,i).compileInstructions(e.instructions);return new t({header:s,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){let e=Array();qn(e,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();qn(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();qn(o,this.addressTableLookups.length);let s=I.struct([I.u8("prefix"),I.struct([I.u8("numRequiredSignatures"),I.u8("numReadonlySignedAccounts"),I.u8("numReadonlyUnsignedAccounts")],"header"),I.blob(e.length,"staticAccountKeysLength"),I.seq(ze(),this.staticAccountKeys.length,"staticAccountKeys"),ze("recentBlockhash"),I.blob(n.length,"instructionsLength"),I.blob(r.length,"serializedInstructions"),I.blob(o.length,"addressTableLookupsLength"),I.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(js),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:Or.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let e=0,r=new Uint8Array(js);for(let n of this.compiledInstructions){let i=Array();qn(i,n.accountKeyIndexes.length);let o=Array();qn(o,n.data.length);let s=I.struct([I.u8("programIdIndex"),I.blob(i.length,"encodedAccountKeyIndexesLength"),I.seq(I.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),I.blob(o.length,"encodedDataLength"),I.blob(n.data.length,"data")]);e+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0,r=new Uint8Array(js);for(let n of this.addressTableLookups){let i=Array();qn(i,n.writableIndexes.length);let o=Array();qn(o,n.readonlyIndexes.length);let s=I.struct([ze("accountKey"),I.blob(i.length,"encodedWritableIndexesLength"),I.seq(I.u8(),n.writableIndexes.length,"writableIndexes"),I.blob(o.length,"encodedReadonlyIndexesLength"),I.seq(I.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e],n=so(r),i=n&Yp;it(n!==i,"Expected versioned message but received legacy message");let o=i;it(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:so(r),numReadonlySignedAccounts:so(r),numReadonlyUnsignedAccounts:so(r)},a=[],c=Pn(r);for(let g=0;g<c;g++)a.push(new oe(Bn(r,0,co)));let u=Or.default.encode(Bn(r,0,co)),d=Pn(r),f=[];for(let g=0;g<d;g++){let x=so(r),w=Pn(r),S=Bn(r,0,w),T=Pn(r),A=new Uint8Array(Bn(r,0,T));f.push({programIdIndex:x,accountKeyIndexes:S,data:A})}let p=Pn(r),m=[];for(let g=0;g<p;g++){let x=new oe(Bn(r,0,co)),w=Pn(r),S=Bn(r,0,w),T=Pn(r),A=Bn(r,0,T);m.push({accountKey:x,writableIndexes:S,readonlyIndexes:A})}return new t({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:f,addressTableLookups:m})}},cw={deserializeMessageVersion(t){let e=t[0],r=e&Yp;return r===e?"legacy":r},deserialize:t=>{let e=cw.deserializeMessageVersion(t);if(e==="legacy")return uo.from(t);if(e===0)return zu.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};te.TransactionStatus=void 0;(function(t){t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID"})(te.TransactionStatus||(te.TransactionStatus={}));var OM=Ie.Buffer.alloc(bl).fill(0),yt=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=Ie.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},pt=class t{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new yt(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<r.length;x++)if(r[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);let i=[],o=[];r.forEach(x=>{x.keys.forEach(S=>{o.push({...S})});let w=x.programId.toString();i.includes(w)||i.push(w)}),i.forEach(x=>{o.push({pubkey:new oe(x),isSigner:!1,isWritable:!1})});let s=[];o.forEach(x=>{let w=x.pubkey.toString(),S=s.findIndex(T=>T.pubkey.toString()===w);S>-1?(s[S].isWritable=s[S].isWritable||x.isWritable,s[S].isSigner=s[S].isSigner||x.isSigner):s.push(x)}),s.sort(function(x,w){return x.isSigner!==w.isSigner?x.isSigner?-1:1:x.isWritable!==w.isWritable?x.isWritable?-1:1:x.pubkey.toBase58().localeCompare(w.pubkey.toBase58())});let a=s.findIndex(x=>x.pubkey.equals(n));if(a>-1){let[x]=s.splice(a,1);x.isSigner=!0,x.isWritable=!0,s.unshift(x)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let x of this.signatures){let w=s.findIndex(S=>S.pubkey.equals(x.publicKey));if(w>-1)s[w].isSigner||(s[w].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let c=0,u=0,d=0,f=[],p=[];s.forEach(({pubkey:x,isSigner:w,isWritable:S})=>{w?(f.push(x.toString()),c+=1,S||(u+=1)):(p.push(x.toString()),S||(d+=1))});let m=f.concat(p),g=r.map(x=>{let{data:w,programId:S}=x;return{programIdIndex:m.indexOf(S.toString()),accounts:x.keys.map(T=>m.indexOf(T.pubkey.toString())),data:Or.default.encode(w)}});return g.forEach(x=>{it(x.programIdIndex>=0),x.accounts.forEach(w=>it(w>=0))}),new uo({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d},accountKeys:m,recentBlockhash:e,instructions:g})}_compile(){let e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,o)=>r[o].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let r=new Set;this.signatures=e.filter(n=>{let i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of e){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of e){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(e,...r){let n=e.serialize();r.forEach(i=>{let o=aw(n,i.secretKey);this._addSignature(i.publicKey,Re(o))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){it(r.length===64);let n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=Ie.Buffer.from(r)}verifySignatures(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}_verifySignatures(e,r){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(r)return!1}else if(!kM(n,e,i.toBytes()))return!1;return!0}serialize(e){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(e){let{signatures:r}=this,n=[];qn(n,r.length);let i=n.length+r.length*64+e.length,o=Ie.Buffer.alloc(i);return it(r.length<256),Ie.Buffer.from(n).copy(o,0),r.forEach(({signature:s},a)=>{s!==null&&(it(s.length===64,"signature has invalid length"),Ie.Buffer.from(s).copy(o,n.length+a*64))}),e.copy(o,n.length+r.length*64),it(o.length<=js,`Transaction too large: ${o.length} > ${js}`),o}get keys(){return it(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return it(this.instructions.length===1),this.instructions[0].programId}get data(){return it(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e],n=Pn(r),i=[];for(let o=0;o<n;o++){let s=Bn(r,0,bl);i.push(Or.default.encode(Ie.Buffer.from(s)))}return t.populate(uo.from(r),i)}static populate(e,r=[]){let n=new t;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((i,o)=>{let s={signature:i==Or.default.encode(OM)?null:Or.default.decode(i),publicKey:e.accountKeys[o]};n.signatures.push(s)}),e.instructions.forEach(i=>{let o=i.accounts.map(s=>{let a=e.accountKeys[s];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(s),isWritable:e.isAccountWritable(s)}});n.instructions.push(new yt({keys:o,programId:e.accountKeys[i.programIdIndex],data:Or.default.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}},z1=class t{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,r){let{header:n,compiledInstructions:i,recentBlockhash:o}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,u=s-a;it(u>0,"Message header is invalid");let d=e.staticAccountKeys.length-s-c;it(d>=0,"Message header is invalid");let f=e.getAccountKeys(r),p=f.get(0);if(p===void 0)throw new Error("Failed to decompile message because no account keys were found");let m=[];for(let g of i){let x=[];for(let S of g.accountKeyIndexes){let T=f.get(S);if(T===void 0)throw new Error(`Failed to find key for account key index ${S}`);let A=S<s,_;A?_=S<u:S<f.staticAccountKeys.length?_=S-s<d:_=S-f.staticAccountKeys.length<f.accountKeysFromLookups.writable.length,x.push({pubkey:T,isSigner:S<n.numRequiredSignatures,isWritable:_})}let w=f.get(g.programIdIndex);if(w===void 0)throw new Error(`Failed to find program id for program id index ${g.programIdIndex}`);m.push(new yt({programId:w,data:Re(g.data),keys:x}))}return new t({payerKey:p,instructions:m,recentBlockhash:o})}compileToLegacyMessage(){return uo.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return zu.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}},j1=class t{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)it(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(bl));this.signatures=n}this.message=e}serialize(){let e=this.message.serialize(),r=Array();qn(r,this.signatures.length);let n=I.struct([I.blob(r.length,"encodedSignaturesLength"),I.seq(PM(),this.signatures.length,"signatures"),I.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,o)}static deserialize(e){let r=[...e],n=[],i=Pn(r);for(let s=0;s<i;s++)n.push(new Uint8Array(Bn(r,0,bl)));let o=cw.deserialize(new Uint8Array(r));return new t(o,n)}sign(e){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of e){let o=n.findIndex(s=>s.equals(i.publicKey));it(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=aw(r,i.secretKey)}}addSignature(e,r){it(r.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));it(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}},oo=new oe("SysvarC1ock11111111111111111111111111111111"),UM=new oe("SysvarEpochSchedu1e111111111111111111111111"),RM=new oe("Sysvar1nstructions1111111111111111111111111"),Up=new oe("SysvarRecentB1ockHashes11111111111111111111"),ju=new oe("SysvarRent111111111111111111111111111111111"),LM=new oe("SysvarRewards111111111111111111111111111111"),MM=new oe("SysvarS1otHashes111111111111111111111111111"),FM=new oe("SysvarS1otHistory11111111111111111111111111"),Rp=new oe("SysvarStakeHistory1111111111111111111111111");async function Lp(t,e,r,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await t.sendTransaction(e,r,i),s;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)s=(await t.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;s=(await t.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await t.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function hc(t){return new Promise(e=>setTimeout(e,t))}function et(t,e){let r=t.layout.span>=0?t.layout.span:b4(t,e),n=Ie.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}function dt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}var w4=I.nu64("lamportsPerSignature"),A4=I.struct([I.u32("version"),I.u32("state"),ze("authorizedPubkey"),ze("nonce"),I.struct([w4],"feeCalculator")]),W1=A4.span,Hp=class t{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let r=A4.decode(Re(e),0);return new t({authorizedPubkey:new oe(r.authorizedPubkey),nonce:new oe(r.nonce).toString(),feeCalculator:r.feeCalculator})}},HM=t=>{let e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},KM=t=>e=>{let r=y4.blob(t,e),{encode:n,decode:i}=HM(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return K1.toBigIntLE(Ie.Buffer.from(c))},o.encode=(s,a,c)=>{let u=K1.toBufferLE(s,t);return n(u,a,c)},o},Wu=KM(8),G1=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=I.u32("instruction").decode(e.data),i;for(let[o,s]of Object.entries(Et))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:r,space:n,programId:i}=dt(Et.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new oe(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:r}=dt(Et.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:r,seed:n,programId:i}=dt(Et.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new oe(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:r}=dt(Et.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:r,seed:n,space:i,programId:o}=dt(Et.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new oe(r),seed:n,space:i,programId:new oe(o)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:r}=dt(Et.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new oe(r)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:r,seed:n,programId:i}=dt(Et.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new oe(r),seed:n,programId:new oe(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:r,seed:n,lamports:i,space:o,programId:s}=dt(Et.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new oe(r),seed:n,lamports:i,space:o,programId:new oe(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:r}=dt(Et.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new oe(r)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),dt(Et.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:r}=dt(Et.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:r}=dt(Et.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new oe(r)}}static checkProgramId(e){if(!e.equals(Xr.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}},Et=Object.freeze({Create:{index:0,layout:I.struct([I.u32("instruction"),I.ns64("lamports"),I.ns64("space"),ze("programId")])},Assign:{index:1,layout:I.struct([I.u32("instruction"),ze("programId")])},Transfer:{index:2,layout:I.struct([I.u32("instruction"),Wu("lamports")])},CreateWithSeed:{index:3,layout:I.struct([I.u32("instruction"),ze("base"),pc("seed"),I.ns64("lamports"),I.ns64("space"),ze("programId")])},AdvanceNonceAccount:{index:4,layout:I.struct([I.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:I.struct([I.u32("instruction"),ze("authorized")])},AuthorizeNonceAccount:{index:7,layout:I.struct([I.u32("instruction"),ze("authorized")])},Allocate:{index:8,layout:I.struct([I.u32("instruction"),I.ns64("space")])},AllocateWithSeed:{index:9,layout:I.struct([I.u32("instruction"),ze("base"),pc("seed"),I.ns64("space"),ze("programId")])},AssignWithSeed:{index:10,layout:I.struct([I.u32("instruction"),ze("base"),pc("seed"),ze("programId")])},TransferWithSeed:{index:11,layout:I.struct([I.u32("instruction"),Wu("lamports"),pc("seed"),ze("programId")])},UpgradeNonceAccount:{index:12,layout:I.struct([I.u32("instruction")])}}),Xr=class t{constructor(){}static createAccount(e){let r=Et.Create,n=et(r,{lamports:e.lamports,space:e.space,programId:Re(e.programId.toBuffer())});return new yt({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){let i=Et.TransferWithSeed;r=et(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Re(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=Et.Transfer;r=et(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){let i=Et.AssignWithSeed;r=et(i,{base:Re(e.basePubkey.toBuffer()),seed:e.seed,programId:Re(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Et.Assign;r=et(i,{programId:Re(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){let r=Et.CreateWithSeed,n=et(r,{base:Re(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Re(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new yt({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){let r=new pt;"basePubkey"in e&&"seed"in e?r.add(t.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:W1,programId:this.programId})):r.add(t.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:W1,programId:this.programId}));let n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){let r=Et.InitializeNonceAccount,n=et(r,{authorized:Re(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Up,isSigner:!1,isWritable:!1},{pubkey:ju,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceAdvance(e){let r=Et.AdvanceNonceAccount,n=et(r),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Up,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new yt(i)}static nonceWithdraw(e){let r=Et.WithdrawNonceAccount,n=et(r,{lamports:e.lamports});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Up,isSigner:!1,isWritable:!1},{pubkey:ju,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){let r=Et.AuthorizeNonceAccount,n=et(r,{authorized:Re(e.newAuthorizedPubkey.toBuffer())});return new yt({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){let i=Et.AllocateWithSeed;r=et(i,{base:Re(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Re(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Et.Allocate;r=et(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new yt({keys:n,programId:this.programId,data:r})}};Xr.programId=new oe("11111111111111111111111111111111");var VM=js-300,Gu=class t{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/t.chunkSize)+1+1)}static async load(e,r,n,i,o){{let f=await e.getMinimumBalanceForRentExemption(o.length),p=await e.getAccountInfo(n.publicKey,"confirmed"),m=null;if(p!==null){if(p.executable)return console.error("Program load failed, account is already executable"),!1;p.data.length!==o.length&&(m=m||new pt,m.add(Xr.allocate({accountPubkey:n.publicKey,space:o.length}))),p.owner.equals(i)||(m=m||new pt,m.add(Xr.assign({accountPubkey:n.publicKey,programId:i}))),p.lamports<f&&(m=m||new pt,m.add(Xr.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:f-p.lamports})))}else m=new pt().add(Xr.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:f>0?f:1,space:o.length,programId:i}));m!==null&&await Lp(e,m,[r,n],{commitment:"confirmed"})}let s=I.struct([I.u32("instruction"),I.u32("offset"),I.u32("bytesLength"),I.u32("bytesLengthPadding"),I.seq(I.u8("byte"),I.offset(I.u32(),-8),"bytes")]),a=t.chunkSize,c=0,u=o,d=[];for(;u.length>0;){let f=u.slice(0,a),p=Ie.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:f,bytesLength:0,bytesLengthPadding:0},p);let m=new pt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:p});d.push(Lp(e,m,[r,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await hc(1e3/4),c+=a,u=u.slice(a)}await Promise.all(d);{let f=I.struct([I.u32("instruction")]),p=Ie.Buffer.alloc(f.span);f.encode({instruction:1},p);let m=new pt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ju,isSigner:!1,isWritable:!1}],programId:i,data:p});await Lp(e,m,[r,n],{commitment:"confirmed"})}return!0}};Gu.chunkSize=VM;var qM=new oe("BPFLoader2111111111111111111111111111111111"),$1=class{static getMinNumSignatures(e){return Gu.getMinNumSignatures(e)}static load(e,r,n,i,o){return Gu.load(e,r,n,o,i)}},zM=Object.prototype.toString,jM=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function yl(t,e){var r,n,i,o,s,a,c;if(t===!0)return"true";if(t===!1)return"false";switch(typeof t){case"object":if(t===null)return null;if(t.toJSON&&typeof t.toJSON=="function")return yl(t.toJSON(),e);if(c=zM.call(t),c==="[object Array]"){for(i="[",n=t.length-1,r=0;r<n;r++)i+=yl(t[r],!0)+",";return n>-1&&(i+=yl(t[r],!0)),i+"]"}else if(c==="[object Object]"){for(o=jM(t).sort(),n=o.length,i="",r=0;r<n;)s=o[r],a=yl(t[s],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}else return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var WM=function(t){var e=yl(t,!1);if(e!==void 0)return""+e},GM=WM,pl=32;function U1(t){let e=0;for(;t>1;)t/=2,e++;return e}function $M(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}var Kp=class{constructor(e,r,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let r=U1($M(e+pl+1))-U1(pl)-1,n=this.getSlotsInEpoch(r),i=e-(n-pl);return[r,i]}else{let r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=r%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*pl:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+U1(pl)):this.slotsPerEpoch}},Al=class extends Error{constructor(e,r){super(e),this.logs=void 0,this.logs=r}},YM={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},me=class extends Error{constructor({code:e,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}},QM=globalThis.fetch,Y1=class extends vM.default{constructor(e,r,n){let i=o=>{let s=EM.default(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,e,r,n),this.underlyingSocket=void 0}call(...e){let r=this.underlyingSocket?.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){let r=this.underlyingSocket?.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},XM=160,ZM=64,JM=XM/ZM,eF=1e3/JM;function tF(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}var n4=56,Sl=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let r=tF(rF,e),n=e.length-n4;it(n>=0,"lookup table is invalid"),it(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=I.struct([I.seq(ze(),i,"addresses")]).decode(e.slice(n4));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new oe(r.authority[0]):void 0,addresses:o.map(s=>new oe(s))}}},rF={index:1,layout:I.struct([I.u32("typeIndex"),Wu("deactivationSlot"),I.nu64("lastExtendedSlot"),I.u8("lastExtendedStartIndex"),I.u8(),I.seq(ze(),I.offset(I.u8(),-1),"authority")])},nF=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function iF(t){let e=t.match(nF);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);let[r,n,i,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${n}${c}${o}`}var or=y.coerce(y.instance(oe),y.string(),t=>new oe(t)),S4=y.tuple([y.string(),y.literal("base64")]),uw=y.coerce(y.instance(Ie.Buffer),S4,t=>Ie.Buffer.from(t[0],"base64")),v4=30*1e3;function oF(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Kt(t){let e,r;if(typeof t=="string")e=t;else if(t){let{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function E4(t){return y.union([y.type({jsonrpc:y.literal("2.0"),id:y.string(),result:t}),y.type({jsonrpc:y.literal("2.0"),id:y.string(),error:y.type({code:y.unknown(),message:y.string(),data:y.optional(y.any())})})])}var sF=E4(y.unknown());function Me(t){return y.coerce(E4(t),sF,e=>"error"in e?e:{...e,result:y.create(e.result,t)})}function ir(t){return Me(y.type({context:y.type({slot:y.number()}),value:t}))}function Qp(t){return y.type({context:y.type({slot:y.number()}),value:t})}function R1(t,e){return t===0?new zu({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new oe(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:Or.default.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new uo(e)}var aF=y.type({foundation:y.number(),foundationTerm:y.number(),initial:y.number(),taper:y.number(),terminal:y.number()}),cF=Me(y.array(y.nullable(y.type({epoch:y.number(),effectiveSlot:y.number(),amount:y.number(),postBalance:y.number(),commission:y.optional(y.nullable(y.number()))})))),uF=y.type({total:y.number(),validator:y.number(),foundation:y.number(),epoch:y.number()}),fF=y.type({epoch:y.number(),slotIndex:y.number(),slotsInEpoch:y.number(),absoluteSlot:y.number(),blockHeight:y.optional(y.number()),transactionCount:y.optional(y.number())}),dF=y.type({slotsPerEpoch:y.number(),leaderScheduleSlotOffset:y.number(),warmup:y.boolean(),firstNormalEpoch:y.number(),firstNormalSlot:y.number()}),lF=y.record(y.string(),y.array(y.number())),gc=y.nullable(y.union([y.type({}),y.string()])),hF=y.type({err:gc}),pF=y.literal("receivedSignature"),yF=y.type({"solana-core":y.string(),"feature-set":y.optional(y.number())}),i4=ir(y.type({err:y.nullable(y.union([y.type({}),y.string()])),logs:y.nullable(y.array(y.string())),accounts:y.optional(y.nullable(y.array(y.nullable(y.type({executable:y.boolean(),owner:y.string(),lamports:y.number(),data:y.array(y.string()),rentEpoch:y.optional(y.number())}))))),unitsConsumed:y.optional(y.number()),returnData:y.optional(y.nullable(y.type({programId:y.string(),data:y.tuple([y.string(),y.literal("base64")])})))})),mF=ir(y.type({byIdentity:y.record(y.string(),y.array(y.number())),range:y.type({firstSlot:y.number(),lastSlot:y.number()})}));function gF(t,e,r,n,i,o){let s=r||QM,a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(d,f)=>{let p=await new Promise((m,g)=>{try{n(d,f,(x,w)=>m([x,w]))}catch(x){g(x)}});return await s(...p)}),new SM.default(async(d,f)=>{let p={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},mH)};try{let m=5,g,x=500;for(;c?g=await c(t,p):g=await s(t,p),!(g.status!==429||i===!0||(m-=1,m===0));)console.log(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${x}ms delay...`),await hc(x),x*=2;let w=await g.text();g.ok?f(null,w):f(new Error(`${g.status} ${g.statusText}: ${w}`))}catch(m){m instanceof Error&&f(m)}},{})}function bF(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(o,s)=>{if(o){i(o);return}n(s)})})}function xF(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);let i=e.map(o=>t.request(o.methodName,o.args));t.request(i,(o,s)=>{if(o){n(o);return}r(s)})})}var wF=Me(aF),AF=Me(uF),SF=Me(fF),vF=Me(dF),EF=Me(lF),IF=Me(y.number()),kF=ir(y.type({total:y.number(),circulating:y.number(),nonCirculating:y.number(),nonCirculatingAccounts:y.array(or)})),Q1=y.type({amount:y.string(),uiAmount:y.nullable(y.number()),decimals:y.number(),uiAmountString:y.optional(y.string())}),TF=ir(y.array(y.type({address:or,amount:y.string(),uiAmount:y.nullable(y.number()),decimals:y.number(),uiAmountString:y.optional(y.string())}))),_F=ir(y.array(y.type({pubkey:or,account:y.type({executable:y.boolean(),owner:or,lamports:y.number(),data:uw,rentEpoch:y.number()})}))),X1=y.type({program:y.string(),parsed:y.unknown(),space:y.number()}),PF=ir(y.array(y.type({pubkey:or,account:y.type({executable:y.boolean(),owner:or,lamports:y.number(),data:X1,rentEpoch:y.number()})}))),BF=ir(y.array(y.type({lamports:y.number(),address:or}))),vl=y.type({executable:y.boolean(),owner:or,lamports:y.number(),data:uw,rentEpoch:y.number()}),CF=y.type({pubkey:or,account:vl}),DF=y.coerce(y.union([y.instance(Ie.Buffer),X1]),y.union([S4,X1]),t=>Array.isArray(t)?y.create(t,uw):t),Z1=y.type({executable:y.boolean(),owner:or,lamports:y.number(),data:DF,rentEpoch:y.number()}),NF=y.type({pubkey:or,account:Z1}),OF=y.type({state:y.union([y.literal("active"),y.literal("inactive"),y.literal("activating"),y.literal("deactivating")]),active:y.number(),inactive:y.number()}),UF=Me(y.array(y.type({signature:y.string(),slot:y.number(),err:gc,memo:y.nullable(y.string()),blockTime:y.optional(y.nullable(y.number()))}))),RF=Me(y.array(y.type({signature:y.string(),slot:y.number(),err:gc,memo:y.nullable(y.string()),blockTime:y.optional(y.nullable(y.number()))}))),LF=y.type({subscription:y.number(),result:Qp(vl)}),MF=y.type({pubkey:or,account:vl}),FF=y.type({subscription:y.number(),result:Qp(MF)}),HF=y.type({parent:y.number(),slot:y.number(),root:y.number()}),KF=y.type({subscription:y.number(),result:HF}),VF=y.union([y.type({type:y.union([y.literal("firstShredReceived"),y.literal("completed"),y.literal("optimisticConfirmation"),y.literal("root")]),slot:y.number(),timestamp:y.number()}),y.type({type:y.literal("createdBank"),parent:y.number(),slot:y.number(),timestamp:y.number()}),y.type({type:y.literal("frozen"),slot:y.number(),timestamp:y.number(),stats:y.type({numTransactionEntries:y.number(),numSuccessfulTransactions:y.number(),numFailedTransactions:y.number(),maxTransactionsPerEntry:y.number()})}),y.type({type:y.literal("dead"),slot:y.number(),timestamp:y.number(),err:y.string()})]),qF=y.type({subscription:y.number(),result:VF}),zF=y.type({subscription:y.number(),result:Qp(y.union([hF,pF]))}),jF=y.type({subscription:y.number(),result:y.number()}),WF=y.type({pubkey:y.string(),gossip:y.nullable(y.string()),tpu:y.nullable(y.string()),rpc:y.nullable(y.string()),version:y.nullable(y.string())}),o4=y.type({votePubkey:y.string(),nodePubkey:y.string(),activatedStake:y.number(),epochVoteAccount:y.boolean(),epochCredits:y.array(y.tuple([y.number(),y.number(),y.number()])),commission:y.number(),lastVote:y.number(),rootSlot:y.nullable(y.number())}),GF=Me(y.type({current:y.array(o4),delinquent:y.array(o4)})),$F=y.union([y.literal("processed"),y.literal("confirmed"),y.literal("finalized")]),YF=y.type({slot:y.number(),confirmations:y.nullable(y.number()),err:gc,confirmationStatus:y.optional($F)}),QF=ir(y.array(y.nullable(YF))),XF=Me(y.number()),I4=y.type({accountKey:or,writableIndexes:y.array(y.number()),readonlyIndexes:y.array(y.number())}),fw=y.type({signatures:y.array(y.string()),message:y.type({accountKeys:y.array(y.string()),header:y.type({numRequiredSignatures:y.number(),numReadonlySignedAccounts:y.number(),numReadonlyUnsignedAccounts:y.number()}),instructions:y.array(y.type({accounts:y.array(y.number()),data:y.string(),programIdIndex:y.number()})),recentBlockhash:y.string(),addressTableLookups:y.optional(y.array(I4))})}),k4=y.type({pubkey:or,signer:y.boolean(),writable:y.boolean(),source:y.optional(y.union([y.literal("transaction"),y.literal("lookupTable")]))}),T4=y.type({accountKeys:y.array(k4),signatures:y.array(y.string())}),_4=y.type({parsed:y.unknown(),program:y.string(),programId:or}),P4=y.type({accounts:y.array(or),data:y.string(),programId:or}),ZF=y.union([P4,_4]),JF=y.union([y.type({parsed:y.unknown(),program:y.string(),programId:y.string()}),y.type({accounts:y.array(y.string()),data:y.string(),programId:y.string()})]),B4=y.coerce(ZF,JF,t=>"accounts"in t?y.create(t,P4):y.create(t,_4)),C4=y.type({signatures:y.array(y.string()),message:y.type({accountKeys:y.array(k4),instructions:y.array(B4),recentBlockhash:y.string(),addressTableLookups:y.optional(y.nullable(y.array(I4)))})}),Vp=y.type({accountIndex:y.number(),mint:y.string(),owner:y.optional(y.string()),uiTokenAmount:Q1}),D4=y.type({writable:y.array(or),readonly:y.array(or)}),Xp=y.type({err:gc,fee:y.number(),innerInstructions:y.optional(y.nullable(y.array(y.type({index:y.number(),instructions:y.array(y.type({accounts:y.array(y.number()),data:y.string(),programIdIndex:y.number()}))})))),preBalances:y.array(y.number()),postBalances:y.array(y.number()),logMessages:y.optional(y.nullable(y.array(y.string()))),preTokenBalances:y.optional(y.nullable(y.array(Vp))),postTokenBalances:y.optional(y.nullable(y.array(Vp))),loadedAddresses:y.optional(D4),computeUnitsConsumed:y.optional(y.number())}),dw=y.type({err:gc,fee:y.number(),innerInstructions:y.optional(y.nullable(y.array(y.type({index:y.number(),instructions:y.array(B4)})))),preBalances:y.array(y.number()),postBalances:y.array(y.number()),logMessages:y.optional(y.nullable(y.array(y.string()))),preTokenBalances:y.optional(y.nullable(y.array(Vp))),postTokenBalances:y.optional(y.nullable(y.array(Vp))),loadedAddresses:y.optional(D4),computeUnitsConsumed:y.optional(y.number())}),Qu=y.union([y.literal(0),y.literal("legacy")]),bc=y.type({pubkey:y.string(),lamports:y.number(),postBalance:y.nullable(y.number()),rewardType:y.nullable(y.string()),commission:y.optional(y.nullable(y.number()))}),eH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),transactions:y.array(y.type({transaction:fw,meta:y.nullable(Xp),version:y.optional(Qu)})),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),tH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),rH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),transactions:y.array(y.type({transaction:T4,meta:y.nullable(Xp),version:y.optional(Qu)})),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),nH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),transactions:y.array(y.type({transaction:C4,meta:y.nullable(dw),version:y.optional(Qu)})),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),iH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),transactions:y.array(y.type({transaction:T4,meta:y.nullable(dw),version:y.optional(Qu)})),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),oH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number()),blockHeight:y.nullable(y.number())}))),sH=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),transactions:y.array(y.type({transaction:fw,meta:y.nullable(Xp)})),rewards:y.optional(y.array(bc)),blockTime:y.nullable(y.number())}))),s4=Me(y.nullable(y.type({blockhash:y.string(),previousBlockhash:y.string(),parentSlot:y.number(),signatures:y.array(y.string()),blockTime:y.nullable(y.number())}))),L1=Me(y.nullable(y.type({slot:y.number(),meta:Xp,blockTime:y.optional(y.nullable(y.number())),transaction:fw,version:y.optional(Qu)}))),Op=Me(y.nullable(y.type({slot:y.number(),transaction:C4,meta:y.nullable(dw),blockTime:y.optional(y.nullable(y.number())),version:y.optional(Qu)}))),aH=ir(y.type({blockhash:y.string(),feeCalculator:y.type({lamportsPerSignature:y.number()})})),cH=ir(y.type({blockhash:y.string(),lastValidBlockHeight:y.number()})),uH=y.type({slot:y.number(),numTransactions:y.number(),numSlots:y.number(),samplePeriodSecs:y.number()}),fH=Me(y.array(uH)),dH=ir(y.nullable(y.type({feeCalculator:y.type({lamportsPerSignature:y.number()})}))),lH=Me(y.string()),hH=Me(y.string()),pH=y.type({err:gc,logs:y.array(y.string()),signature:y.string()}),yH=y.type({result:Qp(pH),subscription:y.number()}),mH={"solana-client":"js/1.73.5"},J1=class{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,i,o,s,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,o=r.fetch,s=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=oF(e),this._rpcWsEndpoint=n||iF(e),this._rpcClient=gF(e,i,o,s,a,c),this._rpcRequest=bF(this._rpcClient),this._rpcBatchRequest=xF(this._rpcClient),this._rpcWebSocket=new Y1(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgs([e.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),a=y.create(s,ir(y.number()));if("error"in a)throw new me(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){let r=await this._rpcRequest("getBlockTime",[e]),n=y.create(r,Me(y.nullable(y.number())));if("error"in n)throw new me(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),r=y.create(e,Me(y.number()));if("error"in r)throw new me(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),r=y.create(e,IF);if("error"in r)throw new me(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[r]),i=y.create(n,kF);if("error"in i)throw new me(i.error,"failed to get supply");return i.result}async getTokenSupply(e,r){let n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),o=y.create(i,ir(Q1));if("error"in o)throw new me(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,r){let n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),o=y.create(i,ir(Q1));if("error"in o)throw new me(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,r,n){let{commitment:i,config:o}=Kt(n),s=[e.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});let a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=y.create(c,_F);if("error"in u)throw new me(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,r,n){let i=[e.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=y.create(s,PF);if("error"in a)throw new me(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){let r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),o=y.create(i,BF);if("error"in o)throw new me(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,r){let n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),o=y.create(i,TF);if("error"in o)throw new me(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgs([e.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=y.create(s,ir(y.nullable(vl)));if("error"in a)throw new me(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=y.create(s,ir(y.nullable(Z1)));if("error"in a)throw new me(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){let{commitment:n,config:i}=Kt(r),o=e.map(u=>u.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=y.create(a,ir(y.array(y.nullable(Z1))));if("error"in c)throw new me(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(e,r){let{commitment:n,config:i}=Kt(r),o=e.map(u=>u.toBase58()),s=this._buildArgs([o],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=y.create(a,ir(y.array(y.nullable(vl))));if("error"in c)throw new me(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){let{commitment:i,config:o}=Kt(r),s=this._buildArgs([e.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),a=await this._rpcRequest("getStakeActivation",s),c=y.create(a,Me(OF));if("error"in c)throw new me(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,r){let{commitment:n,config:i}=Kt(r),{encoding:o,...s}=i||{},a=this._buildArgs([e.toBase58()],n,o||"base64",s),c=await this._rpcRequest("getProgramAccounts",a),u=y.create(c,Me(y.array(CF)));if("error"in u)throw new me(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=y.create(s,Me(y.array(NF)));if("error"in a)throw new me(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,r){let n;if(typeof e=="string")n=e;else{let o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=Or.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return it(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,i,o=!1,s=new Promise((c,u)=>{try{n=this.onSignature(r,(f,p)=>{n=void 0;let m={context:p,value:f};c({__type:te.TransactionStatus.PROCESSED,response:m})},e);let d=new Promise(f=>{n==null?f():i=this._onSubscriptionStateChange(n,p=>{p==="subscribed"&&f()})});(async()=>{if(await d,o)return;let f=await this.getSignatureStatus(r);if(o||f==null)return;let{context:p,value:m}=f;if(m!=null)if(m?.err)u(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:te.TransactionStatus.PROCESSED,response:{context:p,value:m}})}})()}catch(d){u(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(f=>{let p=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let m=await p();if(!o){for(;m<=n;)if(await hc(1e3),o||(m=await p(),o))return;f({__type:te.TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(r),d;try{let f=await Promise.race([u,c,s]);if(f.__type===te.TransactionStatus.PROCESSED)d=f.response;else throw new xl(i)}finally{o=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1,c=new Promise(m=>{let g=o,x=null,w=async()=>{try{let{context:S,value:T}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return x=S.slot,T?.nonce}catch{return g}};(async()=>{if(g=await w(),!a)for(;;){if(o!==g){m({__type:te.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await hc(2e3),a||(g=await w(),a))return}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),f=this.getCancellationPromise(r),p;try{let m=await Promise.race([f,d,c]);if(m.__type===te.TransactionStatus.PROCESSED)p=m.response;else{let g;for(;;){let x=await this.getSignatureStatus(s);if(x==null)break;if(x.context.slot<(m.slotInWhichNonceDidAdvance??n)){await hc(400);continue}g=x;break}if(g?.value){let x=e||"finalized",{confirmationStatus:w}=g.value;switch(x){case"processed":case"recent":if(w!=="processed"&&w!=="confirmed"&&w!=="finalized")throw new zs(s);break;case"confirmed":case"single":case"singleGossip":if(w!=="confirmed"&&w!=="finalized")throw new zs(s);break;case"finalized":case"max":case"root":if(w!=="finalized")throw new zs(s);break;default:}p={context:g.context,value:{err:g.value.err}}}else throw new zs(s)}}finally{a=!0,u()}return p}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n,i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:te.TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:r}),a;try{let c=await Promise.race([s,i]);if(c.__type===te.TransactionStatus.PROCESSED)a=c.response;else throw new wl(r,c.timeoutMs/1e3)}finally{clearTimeout(n),o()}return a}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),r=y.create(e,Me(y.array(WF)));if("error"in r)throw new me(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){let r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),i=y.create(n,GF);if("error"in i)throw new me(i.error,"failed to get vote accounts");return i.result}async getSlot(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlot",i),s=y.create(o,Me(y.number()));if("error"in s)throw new me(s.error,"failed to get slot");return s.result}async getSlotLeader(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=y.create(o,Me(y.string()));if("error"in s)throw new me(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,r){let n=[e,r],i=await this._rpcRequest("getSlotLeaders",n),o=y.create(i,Me(y.array(or)));if("error"in o)throw new me(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,r){let{context:n,value:i}=await this.getSignatureStatuses([e],r);it(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(e,r){let n=[e];r&&n.push(r);let i=await this._rpcRequest("getSignatureStatuses",n),o=y.create(i,QF);if("error"in o)throw new me(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=y.create(o,Me(y.number()));if("error"in s)throw new me(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),i=y.create(n,wF);if("error"in i)throw new me(i.error,"failed to get inflation");return i.result}async getInflationReward(e,r,n){let{commitment:i,config:o}=Kt(n),s=this._buildArgs([e.map(u=>u.toBase58())],i,void 0,{...o,epoch:r??o?.epoch}),a=await this._rpcRequest("getInflationReward",s),c=y.create(a,cF);if("error"in c)throw new me(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),r=y.create(e,AF);if("error"in r)throw new me(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=y.create(o,SF);if("error"in s)throw new me(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),r=y.create(e,vF);if("error"in r)throw new me(r.error,"failed to get epoch schedule");let n=r.result;return new Kp(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),r=y.create(e,EF);if("error"in r)throw new me(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){let n=this._buildArgs([e],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=y.create(i,XF);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){let r=this._buildArgs([],e),n=await this._rpcRequest("getRecentBlockhash",r),i=y.create(n,aH);if("error"in i)throw new me(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){let r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=y.create(r,fH);if("error"in n)throw new me(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){let n=this._buildArgs([e],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=y.create(i,dH);if("error"in o)throw new me(o.error,"failed to get fee calculator");let{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,r){let n=Re(e.serialize()).toString("base64"),i=this._buildArgs([n],r),o=await this._rpcRequest("getFeeForMessage",i),s=y.create(o,ir(y.nullable(y.number())));if("error"in s)throw new me(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=y.create(o,cH);if("error"in s)throw new me(s.error,"failed to get latest blockhash");return s.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),r=y.create(e,Me(yF));if("error"in r)throw new me(r.error,"failed to get version");return r.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),r=y.create(e,Me(y.string()));if("error"in r)throw new me(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=y.create(s,rH);if("error"in a)throw a.error;return a.result}case"none":{let a=y.create(s,tH);if("error"in a)throw a.error;return a.result}default:{let a=y.create(s,eH);if("error"in a)throw a.error;let{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:d,version:f})=>({meta:d,transaction:{...u,message:R1(f,u.message)},version:f}))}:null}}}catch(a){throw new me(a,"failed to get confirmed block")}}async getParsedBlock(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=y.create(s,iH);if("error"in a)throw a.error;return a.result}case"none":{let a=y.create(s,oH);if("error"in a)throw a.error;return a.result}default:{let a=y.create(s,nH);if("error"in a)throw a.error;return a.result}}}catch(a){throw new me(a,"failed to get block")}}async getBlockHeight(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getBlockHeight",i),s=y.create(o,Me(y.number()));if("error"in s)throw new me(s.error,"failed to get block height information");return s.result}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){let{commitment:a,...c}=e;n=a,r=c}let i=this._buildArgs([],n,"base64",r),o=await this._rpcRequest("getBlockProduction",i),s=y.create(o,mF);if("error"in s)throw new me(s.error,"failed to get block production information");return s.result}async getTransaction(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getTransaction",o),a=y.create(s,L1);if("error"in a)throw new me(a.error,"failed to get transaction");let c=a.result;return c&&{...c,transaction:{...c.transaction,message:R1(c.version,c.transaction.message)}}}async getParsedTransaction(e,r){let{commitment:n,config:i}=Kt(r),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=y.create(s,Op);if("error"in a)throw new me(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,r){let{commitment:n,config:i}=Kt(r),o=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=y.create(c,Op);if("error"in u)throw new me(u.error,"failed to get transactions");return u.result})}async getTransactions(e,r){let{commitment:n,config:i}=Kt(r),o=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=y.create(c,L1);if("error"in u)throw new me(u.error,"failed to get transactions");let d=u.result;return d&&{...d,transaction:{...d.transaction,message:R1(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,r){let n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getConfirmedBlock",n),o=y.create(i,sH);if("error"in o)throw new me(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");let a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{let d=new uo(c.message);return{meta:u,transaction:{...c,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:pt.populate(c.message,c.signatures)}))}}async getBlocks(e,r,n){let i=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),o=await this._rpcRequest("getBlocks",i),s=y.create(o,Me(y.array(y.number())));if("error"in s)throw new me(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,r){let n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=y.create(i,s4);if("error"in o)throw new me(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,r){let n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),o=y.create(i,s4);if("error"in o)throw new me(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,r){let n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getConfirmedTransaction",n),o=y.create(i,L1);if("error"in o)throw new me(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let a=new uo(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:pt.populate(a,c)}}async getParsedConfirmedTransaction(e,r){let n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),o=y.create(i,Op);if("error"in o)throw new me(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,r){let n=e.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let a=y.create(s,Op);if("error"in a)throw new me(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,r,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<o));)try{let c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,r,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=y.create(o,UF);if("error"in s)throw new me(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,r,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),o=await this._rpcRequest("getSignaturesForAddress",i),s=y.create(o,RF);if("error"in s)throw new me(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,r){let{context:n,value:i}=await this.getAccountInfoAndContext(e,r),o=null;return i!==null&&(o=new Sl({key:e,state:Sl.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(e,r){let{context:n,value:i}=await this.getAccountInfoAndContext(e,r),o=null;return i!==null&&(o=Hp.fromAccountData(i.data)),{context:n,value:o}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){let n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),i=y.create(n,lH);if("error"in i)throw new me(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await hc(100);let n=Date.now()-this._blockhashInfo.lastFetch>=v4;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await hc(eF/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:r,config:n}=Kt(e),i=this._buildArgs([],r,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=y.create(o,ir(y.number()));if("error"in s)throw new me(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,r,n){if("message"in e){let x=e.serialize(),w=Ie.Buffer.from(x).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");let S=r||{};S.encoding="base64","commitment"in S||(S.commitment=this.commitment);let T=[w,S],A=await this._rpcRequest("simulateTransaction",T),_=y.create(A,i4);if("error"in _)throw new Error("failed to simulate transaction: "+_.error.message);return _.result}let i;if(e instanceof pt){let g=e;i=new pt,i.feePayer=g.feePayer,i.instructions=e.instructions,i.nonceInfo=g.nonceInfo,i.signatures=g.signatures}else i=pt.populate(e),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");let o=r;if(i.nonceInfo&&o)i.sign(...o);else{let g=this._disableBlockhashCaching;for(;;){let x=await this._blockhashWithExpiryBlockHeight(g);if(i.lastValidBlockHeight=x.lastValidBlockHeight,i.recentBlockhash=x.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let w=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(w)&&!this._blockhashInfo.transactionSignatures.includes(w)){this._blockhashInfo.simulatedSignatures.push(w);break}else g=!0}}let s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(n){let g=(Array.isArray(n)?n:s.nonProgramIds()).map(x=>x.toBase58());d.accounts={encoding:"base64",addresses:g}}o&&(d.sigVerify=!0);let f=[u,d],p=await this._rpcRequest("simulateTransaction",f),m=y.create(p,i4);if("error"in m){let g;if("data"in m.error&&(g=m.error.data.logs,g&&Array.isArray(g))){let x=`
    `,w=x+g.join(x);console.error(m.error.message,w)}throw new Al("failed to simulate transaction: "+m.error.message,g)}return m.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");let s=e.serialize();return await this.sendRawTransaction(s,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");let i=r;if(e.nonceInfo)e.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(s);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");let c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}let o=e.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(e,r){let n=Re(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){let n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[e,n],a=await this._rpcRequest("sendTransaction",s),c=y.create(a,hH);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new Al("failed to send transaction: "+c.error.message,u)}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){let n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=r,n!==r.state){let i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){let n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${s} error for argument`,o,a.message),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){let n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){let{result:r,subscription:n}=y.create(e,LF);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){let n=this._nextClientSubscriptionId++,i=GM([e.method,r]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];it(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){let i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:r,subscription:n}=y.create(e,FF);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,i){let o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){let i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:r,subscription:n}=y.create(e,yH);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){let{result:r,subscription:n}=y.create(e,KF);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:r,subscription:n}=y.create(e,qF);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,i){let o=r||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),e.push(s)}return e}_buildArgsAtLeastConfirmed(e,r,n,i){let o=r||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,i)}_wsOnSignatureNotification(e){let{result:r,subscription:n}=y.create(e,zF);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){let i=this._buildArgs([e],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){r(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(e,r,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([e],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:r,subscription:n}=y.create(e,jF);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},qp=class t{constructor(e){this._keypair=void 0,this._keypair=e??e4()}static generate(){return new t(e4())}static fromSecretKey(e,r){if(e.byteLength!==64)throw new Error("bad secret key size");let n=e.slice(32,64);if(!r||!r.skipValidation){let i=e.slice(0,32),o=Mp(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new t({publicKey:n,secretKey:e})}static fromSeed(e){let r=Mp(e),n=new Uint8Array(64);return n.set(e),n.set(r,32),new t({publicKey:r,secretKey:n})}get publicKey(){return new oe(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Wo=Object.freeze({CreateLookupTable:{index:0,layout:I.struct([I.u32("instruction"),Wu("recentSlot"),I.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:I.struct([I.u32("instruction")])},ExtendLookupTable:{index:2,layout:I.struct([I.u32("instruction"),Wu(),I.seq(ze(),I.offset(I.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:I.struct([I.u32("instruction")])},CloseLookupTable:{index:4,layout:I.struct([I.u32("instruction")])}}),ew=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=I.u32("instruction").decode(e.data),i;for(let[o,s]of Object.entries(Wo))if(s.index==n){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:r}=dt(Wo.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:r}=dt(Wo.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:r.map(n=>new oe(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(El.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}},El=class{constructor(){}static createLookupTable(e){let[r,n]=oe.findProgramAddressSync([e.authority.toBuffer(),K1.toBufferLE(BigInt(e.recentSlot),8)],this.programId),i=Wo.CreateLookupTable,o=et(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),s=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Xr.programId,isSigner:!1,isWritable:!1}];return[new yt({programId:this.programId,keys:s,data:o}),r]}static freezeLookupTable(e){let r=Wo.FreezeLookupTable,n=et(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){let r=Wo.ExtendLookupTable,n=et(r,{addresses:e.addresses.map(o=>o.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Xr.programId,isSigner:!1,isWritable:!1}),new yt({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){let r=Wo.DeactivateLookupTable,n=et(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new yt({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){let r=Wo.CloseLookupTable,n=et(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new yt({programId:this.programId,keys:i,data:n})}};El.programId=new oe("AddressLookupTab1e1111111111111111111111111");var tw=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=I.u8("instruction").decode(e.data),i;for(let[o,s]of Object.entries(ao))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:r,additionalFee:n}=dt(ao.RequestUnits,e.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:r}=dt(ao.RequestHeapFrame,e.data);return{bytes:r}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:r}=dt(ao.SetComputeUnitLimit,e.data);return{units:r}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:r}=dt(ao.SetComputeUnitPrice,e.data);return{microLamports:r}}static checkProgramId(e){if(!e.equals(Il.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},ao=Object.freeze({RequestUnits:{index:0,layout:I.struct([I.u8("instruction"),I.u32("units"),I.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:I.struct([I.u8("instruction"),I.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:I.struct([I.u8("instruction"),I.u32("units")])},SetComputeUnitPrice:{index:3,layout:I.struct([I.u8("instruction"),Wu("microLamports")])}}),Il=class{constructor(){}static requestUnits(e){let r=ao.RequestUnits,n=et(r,e);return new yt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){let r=ao.RequestHeapFrame,n=et(r,e);return new yt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){let r=ao.SetComputeUnitLimit,n=et(r,e);return new yt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){let r=ao.SetComputeUnitPrice,n=et(r,{microLamports:BigInt(e.microLamports)});return new yt({keys:[],programId:this.programId,data:n})}};Il.programId=new oe("ComputeBudget111111111111111111111111111111");var a4=64,c4=32,u4=64,f4=I.struct([I.u8("numSignatures"),I.u8("padding"),I.u16("signatureOffset"),I.u16("signatureInstructionIndex"),I.u16("publicKeyOffset"),I.u16("publicKeyInstructionIndex"),I.u16("messageDataOffset"),I.u16("messageDataSize"),I.u16("messageInstructionIndex")]),zp=class t{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:r,message:n,signature:i,instructionIndex:o}=e;it(r.length===c4,`Public Key must be ${c4} bytes but received ${r.length} bytes`),it(i.length===u4,`Signature must be ${u4} bytes but received ${i.length} bytes`);let s=f4.span,a=s+r.length,c=a+i.length,u=1,d=Ie.Buffer.alloc(c+n.length),f=o??65535;return f4.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:f,publicKeyOffset:s,publicKeyInstructionIndex:f,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:f},d),d.fill(r,s),d.fill(i,a),d.fill(n,c),new yt({keys:[],programId:t.programId,data:d})}static createInstructionWithPrivateKey(e){let{privateKey:r,message:n,instructionIndex:i}=e;it(r.length===a4,`Private key must be ${a4} bytes but received ${r.length} bytes`);try{let o=qp.fromSecretKey(r),s=o.publicKey.toBytes(),a=aw(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};zp.programId=new oe("Ed25519SigVerify111111111111111111111111111");$p.utils.hmacSha256Sync=(t,...e)=>{let r=wM.hmac.create(H1.sha256,t);return e.forEach(n=>r.update(n)),r.digest()};var gH=(t,e)=>$p.signSync(t,e,{der:!1,recovered:!0});$p.utils.isValidPrivateKey;var bH=$p.getPublicKey,d4=32,M1=20,l4=64,xH=11,F1=I.struct([I.u8("numSignatures"),I.u16("signatureOffset"),I.u8("signatureInstructionIndex"),I.u16("ethAddressOffset"),I.u8("ethAddressInstructionIndex"),I.u16("messageDataOffset"),I.u16("messageDataSize"),I.u8("messageInstructionIndex"),I.blob(20,"ethAddress"),I.blob(64,"signature"),I.u8("recoveryId")]),jp=class t{constructor(){}static publicKeyToEthAddress(e){it(e.length===l4,`Public key must be ${l4} bytes but received ${e.length} bytes`);try{return Ie.Buffer.from(Z6.keccak_256(Re(e))).slice(-M1)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(e){let{publicKey:r,message:n,signature:i,recoveryId:o,instructionIndex:s}=e;return t.createInstructionWithEthAddress({ethAddress:t.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(e){let{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=e,a;typeof r=="string"?r.startsWith("0x")?a=Ie.Buffer.from(r.substr(2),"hex"):a=Ie.Buffer.from(r,"hex"):a=r,it(a.length===M1,`Address must be ${M1} bytes but received ${a.length} bytes`);let c=1+xH,u=c,d=c+a.length,f=d+i.length+1,p=1,m=Ie.Buffer.alloc(F1.span+n.length);return F1.encode({numSignatures:p,signatureOffset:d,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:s,signature:Re(i),ethAddress:Re(a),recoveryId:o},m),m.fill(Re(n),F1.span),new yt({keys:[],programId:t.programId,data:m})}static createInstructionWithPrivateKey(e){let{privateKey:r,message:n,instructionIndex:i}=e;it(r.length===d4,`Private key must be ${d4} bytes but received ${r.length} bytes`);try{let o=Re(r),s=bH(o,!1).slice(1),a=Ie.Buffer.from(Z6.keccak_256(Re(n))),[c,u]=gH(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};jp.programId=new oe("KeccakSecp256k11111111111111111111111111111");var N4=new oe("StakeConfig11111111111111111111111111111111"),Wp=class{constructor(e,r){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=r}},mc=class{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}};mc.default=new mc(0,0,oe.default);var rw=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=I.u32("instruction").decode(e.data),i;for(let[o,s]of Object.entries(Ar))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:r,lockup:n}=dt(Ar.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Wp(new oe(r.staker),new oe(r.withdrawer)),lockup:new mc(n.unixTimestamp,n.epoch,new oe(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),dt(Ar.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:r,stakeAuthorizationType:n}=dt(Ar.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new oe(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:o}=dt(Ar.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new oe(o),newAuthorizedPubkey:new oe(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:r}=dt(Ar.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:r}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),dt(Ar.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:r}=dt(Ar.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:r};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),dt(Ar.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals($u.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}},Ar=Object.freeze({Initialize:{index:0,layout:I.struct([I.u32("instruction"),BM(),CM()])},Authorize:{index:1,layout:I.struct([I.u32("instruction"),ze("newAuthorized"),I.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:I.struct([I.u32("instruction")])},Split:{index:3,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},Withdraw:{index:4,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},Deactivate:{index:5,layout:I.struct([I.u32("instruction")])},Merge:{index:7,layout:I.struct([I.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:I.struct([I.u32("instruction"),ze("newAuthorized"),I.u32("stakeAuthorizationType"),pc("authoritySeed"),ze("authorityOwner")])}}),wH=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),$u=class{constructor(){}static initialize(e){let{stakePubkey:r,authorized:n,lockup:i}=e,o=i||mc.default,s=Ar.Initialize,a=et(s,{authorized:{staker:Re(n.staker.toBuffer()),withdrawer:Re(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:Re(o.custodian.toBuffer())}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ju,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new yt(c)}static createAccountWithSeed(e){let r=new pt;r.add(Xr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(e){let r=new pt;r.add(Xr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(e){let{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=e,o=Ar.Delegate,s=et(o);return new pt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:N4,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=e,a=Ar.Authorize,c=et(a,{newAuthorized:Re(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new pt().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(e){let{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=e,u=Ar.AuthorizeWithSeed,d=et(u,{newAuthorized:Re(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:Re(o.toBuffer())}),f=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:oo,isSigner:!1,isWritable:!1}];return c&&f.push({pubkey:c,isSigner:!1,isWritable:!1}),new pt().add({keys:f,programId:this.programId,data:d})}static splitInstruction(e){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=e,s=Ar.Split,a=et(s,{lamports:o});return new yt({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e){let r=new pt;return r.add(Xr.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=e,c=new pt;return c.add(Xr.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=e,o=Ar.Merge,s=et(o);return new pt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){let{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=e,a=Ar.Withdraw,c=et(a,{lamports:o}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:Rp,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new pt().add({keys:u,programId:this.programId,data:c})}static deactivate(e){let{stakePubkey:r,authorizedPubkey:n}=e,i=Ar.Deactivate,o=et(i);return new pt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};$u.programId=new oe("Stake11111111111111111111111111111111111111");$u.space=200;var Gp=class{constructor(e,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}},nw=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let n=I.u32("instruction").decode(e.data),i;for(let[o,s]of Object.entries(Go))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:r}=dt(Go.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Gp(new oe(r.nodePubkey),new oe(r.authorizedVoter),new oe(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:r,voteAuthorizationType:n}=dt(Go.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new oe(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:o}}=dt(Go.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new oe(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new oe(i),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:r}=dt(Go.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:r,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Yu.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}},Go=Object.freeze({InitializeAccount:{index:0,layout:I.struct([I.u32("instruction"),DM()])},Authorize:{index:1,layout:I.struct([I.u32("instruction"),ze("newAuthorized"),I.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:I.struct([I.u32("instruction"),NM()])}}),AH=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Yu=class t{constructor(){}static initializeAccount(e){let{votePubkey:r,nodePubkey:n,voteInit:i}=e,o=Go.InitializeAccount,s=et(o,{voteInit:{nodePubkey:Re(i.nodePubkey.toBuffer()),authorizedVoter:Re(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Re(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ju,isSigner:!1,isWritable:!1},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new yt(a)}static createAccount(e){let r=new pt;return r.add(Xr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=e,s=Go.Authorize,a=et(s,{newAuthorized:Re(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new pt().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=e,c=Go.AuthorizeWithSeed,u=et(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Re(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Re(o.toBuffer()),voteAuthorizationType:s.index}}),d=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:oo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new pt().add({keys:d,programId:this.programId,data:u})}static withdraw(e){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=e,s=Go.Withdraw,a=et(s,{lamports:i}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new pt().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,r,n){if(e.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return t.withdraw(e)}};Yu.programId=new oe("Vote111111111111111111111111111111111111111");Yu.space=3731;var O4=new oe("Va1idator1nfo111111111111111111111111111111"),SH=y.type({name:y.string(),website:y.optional(y.string()),details:y.optional(y.string()),keybaseUsername:y.optional(y.string())}),iw=class t{constructor(e,r){this.key=void 0,this.info=void 0,this.key=e,this.info=r}static fromConfigData(e){let r=[...e];if(Pn(r)!==2)return null;let i=[];for(let o=0;o<2;o++){let s=new oe(Bn(r,0,co)),a=so(r)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(O4)&&i[1].isSigner){let o=pc().decode(Ie.Buffer.from(r)),s=JSON.parse(o);return y.assert(s,SH),new t(i[1].publicKey,s)}return null}},vH=new oe("Vote111111111111111111111111111111111111111"),EH=I.struct([ze("nodePubkey"),ze("authorizedWithdrawer"),I.u8("commission"),I.nu64(),I.seq(I.struct([I.nu64("slot"),I.u32("confirmationCount")]),I.offset(I.u32(),-8),"votes"),I.u8("rootSlotValid"),I.nu64("rootSlot"),I.nu64(),I.seq(I.struct([I.nu64("epoch"),ze("authorizedVoter")]),I.offset(I.u32(),-8),"authorizedVoters"),I.struct([I.seq(I.struct([ze("authorizedPubkey"),I.nu64("epochOfLastAuthorizedSwitch"),I.nu64("targetEpoch")]),32,"buf"),I.nu64("idx"),I.u8("isEmpty")],"priorVoters"),I.nu64(),I.seq(I.struct([I.nu64("epoch"),I.nu64("credits"),I.nu64("prevCredits")]),I.offset(I.u32(),-8),"epochCredits"),I.struct([I.nu64("slot"),I.nu64("timestamp")],"lastTimestamp")]),ow=class t{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){let n=EH.decode(Re(e),4),i=n.rootSlot;return n.rootSlotValid||(i=null),new t({nodePubkey:new oe(n.nodePubkey),authorizedWithdrawer:new oe(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(IH),priorVoters:kH(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function IH({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new oe(t)}}function h4({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new oe(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function kH({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map(h4),...t.slice(0,e).map(h4)]}var p4={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function TH(t,e){let r=e===!1?"http":"https";if(!t)return p4[r].devnet;let n=p4[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function _H(t,e,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await t.sendRawTransaction(e,s),c=o&&o.commitment,d=(await(i?t.confirmTransaction(i,c):t.confirmTransaction(a,c))).value;if(d.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(d)})`);return a}var PH=1e9;te.Account=q1;te.AddressLookupTableAccount=Sl;te.AddressLookupTableInstruction=ew;te.AddressLookupTableProgram=El;te.Authorized=Wp;te.BLOCKHASH_CACHE_TIMEOUT_MS=v4;te.BPF_LOADER_DEPRECATED_PROGRAM_ID=_M;te.BPF_LOADER_PROGRAM_ID=qM;te.BpfLoader=$1;te.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=ao;te.ComputeBudgetInstruction=tw;te.ComputeBudgetProgram=Il;te.Connection=J1;te.Ed25519Program=zp;te.Enum=V1;te.EpochSchedule=Kp;te.FeeCalculatorLayout=w4;te.Keypair=qp;te.LAMPORTS_PER_SOL=PH;te.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Wo;te.Loader=Gu;te.Lockup=mc;te.MAX_SEED_LENGTH=g4;te.Message=uo;te.MessageAccountKeys=yc;te.MessageV0=zu;te.NONCE_ACCOUNT_LENGTH=W1;te.NonceAccount=Hp;te.PACKET_DATA_SIZE=js;te.PUBLIC_KEY_LENGTH=co;te.PublicKey=oe;te.SIGNATURE_LENGTH_IN_BYTES=bl;te.SOLANA_SCHEMA=ml;te.STAKE_CONFIG_ID=N4;te.STAKE_INSTRUCTION_LAYOUTS=Ar;te.SYSTEM_INSTRUCTION_LAYOUTS=Et;te.SYSVAR_CLOCK_PUBKEY=oo;te.SYSVAR_EPOCH_SCHEDULE_PUBKEY=UM;te.SYSVAR_INSTRUCTIONS_PUBKEY=RM;te.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=Up;te.SYSVAR_RENT_PUBKEY=ju;te.SYSVAR_REWARDS_PUBKEY=LM;te.SYSVAR_SLOT_HASHES_PUBKEY=MM;te.SYSVAR_SLOT_HISTORY_PUBKEY=FM;te.SYSVAR_STAKE_HISTORY_PUBKEY=Rp;te.Secp256k1Program=jp;te.SendTransactionError=Al;te.SolanaJSONRPCError=me;te.SolanaJSONRPCErrorCode=YM;te.StakeAuthorizationLayout=wH;te.StakeInstruction=rw;te.StakeProgram=$u;te.Struct=gl;te.SystemInstruction=G1;te.SystemProgram=Xr;te.Transaction=pt;te.TransactionExpiredBlockheightExceededError=xl;te.TransactionExpiredNonceInvalidError=zs;te.TransactionExpiredTimeoutError=wl;te.TransactionInstruction=yt;te.TransactionMessage=z1;te.VALIDATOR_INFO_KEY=O4;te.VERSION_PREFIX_MASK=Yp;te.VOTE_PROGRAM_ID=vH;te.ValidatorInfo=iw;te.VersionedMessage=cw;te.VersionedTransaction=j1;te.VoteAccount=ow;te.VoteAuthorizationLayout=AH;te.VoteInit=Gp;te.VoteInstruction=nw;te.VoteProgram=Yu;te.clusterApiUrl=TH;te.sendAndConfirmRawTransaction=_H;te.sendAndConfirmTransaction=Lp});var HI=B(Dy=>{"use strict";l();h();Object.defineProperty(Dy,"__esModule",{value:!0});Dy.version=void 0;Dy.version="properties/5.7.0"});var fi=B(sr=>{"use strict";l();h();var dV=sr&&sr.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},lV=sr&&sr.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(sr,"__esModule",{value:!0});sr.Description=sr.deepCopy=sr.shallowCopy=sr.checkProperties=sr.resolveProperties=sr.getStatic=sr.defineReadOnly=void 0;var hV=an(),pV=HI(),Ny=new hV.Logger(pV.version);function KI(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}sr.defineReadOnly=KI;function yV(t,e){for(var r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}sr.getStatic=yV;function mV(t){return dV(this,void 0,void 0,function(){var e,r;return lV(this,function(n){switch(n.label){case 0:return e=Object.keys(t).map(function(i){var o=t[i];return Promise.resolve(o).then(function(s){return{key:i,value:s}})}),[4,Promise.all(e)];case 1:return r=n.sent(),[2,r.reduce(function(i,o){return i[o.key]=o.value,i},{})]}})})}sr.resolveProperties=mV;function gV(t,e){(!t||typeof t!="object")&&Ny.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(function(r){e[r]||Ny.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}sr.checkProperties=gV;function bV(t){var e={};for(var r in t)e[r]=t[r];return e}sr.shallowCopy=bV;var xV={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function VI(t){if(t==null||xV[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;for(var e=Object.keys(t),r=0;r<e.length;r++){var n=null;try{n=t[e[r]]}catch{continue}if(!VI(n))return!1}return!0}return Ny.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function wV(t){if(VI(t))return t;if(Array.isArray(t))return Object.freeze(t.map(function(i){return Oy(i)}));if(typeof t=="object"){var e={};for(var r in t){var n=t[r];n!==void 0&&KI(e,r,Oy(n))}return e}return Ny.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Oy(t){return wV(t)}sr.deepCopy=Oy;var AV=function(){function t(e){for(var r in e)this[r]=Oy(e[r])}return t}();sr.Description=AV});var YI=B(Ry=>{"use strict";l();h();Object.defineProperty(Ry,"__esModule",{value:!0});Ry.AddressZero=void 0;Ry.AddressZero="0x0000000000000000000000000000000000000000"});var QI=B(vr=>{"use strict";l();h();Object.defineProperty(vr,"__esModule",{value:!0});vr.MaxInt256=vr.MinInt256=vr.MaxUint256=vr.WeiPerEther=vr.Two=vr.One=vr.Zero=vr.NegativeOne=void 0;var ia=hu(),kV=ia.BigNumber.from(-1);vr.NegativeOne=kV;var TV=ia.BigNumber.from(0);vr.Zero=TV;var _V=ia.BigNumber.from(1);vr.One=_V;var PV=ia.BigNumber.from(2);vr.Two=PV;var BV=ia.BigNumber.from("1000000000000000000");vr.WeiPerEther=BV;var CV=ia.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");vr.MaxUint256=CV;var DV=ia.BigNumber.from("-0x8000000000000000000000000000000000000000000000000000000000000000");vr.MinInt256=DV;var NV=ia.BigNumber.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");vr.MaxInt256=NV});var XI=B(Ly=>{"use strict";l();h();Object.defineProperty(Ly,"__esModule",{value:!0});Ly.HashZero=void 0;Ly.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000"});var ZI=B(My=>{"use strict";l();h();Object.defineProperty(My,"__esModule",{value:!0});My.EtherSymbol=void 0;My.EtherSymbol="\u039E"});var Mw=B(Lt=>{"use strict";l();h();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.EtherSymbol=Lt.HashZero=Lt.MaxInt256=Lt.MinInt256=Lt.MaxUint256=Lt.WeiPerEther=Lt.Two=Lt.One=Lt.Zero=Lt.NegativeOne=Lt.AddressZero=void 0;var OV=YI();Object.defineProperty(Lt,"AddressZero",{enumerable:!0,get:function(){return OV.AddressZero}});var oa=QI();Object.defineProperty(Lt,"NegativeOne",{enumerable:!0,get:function(){return oa.NegativeOne}});Object.defineProperty(Lt,"Zero",{enumerable:!0,get:function(){return oa.Zero}});Object.defineProperty(Lt,"One",{enumerable:!0,get:function(){return oa.One}});Object.defineProperty(Lt,"Two",{enumerable:!0,get:function(){return oa.Two}});Object.defineProperty(Lt,"WeiPerEther",{enumerable:!0,get:function(){return oa.WeiPerEther}});Object.defineProperty(Lt,"MaxUint256",{enumerable:!0,get:function(){return oa.MaxUint256}});Object.defineProperty(Lt,"MinInt256",{enumerable:!0,get:function(){return oa.MinInt256}});Object.defineProperty(Lt,"MaxInt256",{enumerable:!0,get:function(){return oa.MaxInt256}});var UV=XI();Object.defineProperty(Lt,"HashZero",{enumerable:!0,get:function(){return UV.HashZero}});var RV=ZI();Object.defineProperty(Lt,"EtherSymbol",{enumerable:!0,get:function(){return RV.EtherSymbol}})});var JI=B(Fy=>{"use strict";l();h();Object.defineProperty(Fy,"__esModule",{value:!0});Fy.version=void 0;Fy.version="strings/5.7.0"});var Ky=B(er=>{"use strict";l();h();Object.defineProperty(er,"__esModule",{value:!0});er.toUtf8CodePoints=er.toUtf8String=er._toUtf8String=er._toEscapedUtf8String=er.toUtf8Bytes=er.Utf8ErrorFuncs=er.Utf8ErrorReason=er.UnicodeNormalizationForm=void 0;var e5=xr(),LV=an(),MV=JI(),t5=new LV.Logger(MV.version),Hy;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Hy=er.UnicodeNormalizationForm||(er.UnicodeNormalizationForm={}));var li;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(li=er.Utf8ErrorReason||(er.Utf8ErrorReason={}));function FV(t,e,r,n,i){return t5.throwArgumentError("invalid codepoint at offset "+e+"; "+t,"bytes",r)}function r5(t,e,r,n,i){if(t===li.BAD_PREFIX||t===li.UNEXPECTED_CONTINUE){for(var o=0,s=e+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return t===li.OVERRUN?r.length-e-1:0}function HV(t,e,r,n,i){return t===li.OVERLONG?(n.push(i),0):(n.push(65533),r5(t,e,r,n,i))}er.Utf8ErrorFuncs=Object.freeze({error:FV,ignore:r5,replace:HV});function Hw(t,e){e==null&&(e=er.Utf8ErrorFuncs.error),t=(0,e5.arrayify)(t);for(var r=[],n=0;n<t.length;){var i=t[n++];if(!(i>>7)){r.push(i);continue}var o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=e(li.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(li.BAD_PREFIX,n-1,t,r);continue}if(n-1+o>=t.length){n+=e(li.OVERRUN,n-1,t,r);continue}for(var a=i&(1<<8-o-1)-1,c=0;c<o;c++){var u=t[n];if((u&192)!=128){n+=e(li.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=e(li.OUT_OF_RANGE,n-1-o,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(li.UTF16_SURROGATE,n-1-o,t,r,a);continue}if(a<=s){n+=e(li.OVERLONG,n-1-o,t,r,a);continue}r.push(a)}}return r}function n5(t,e){e===void 0&&(e=Hy.current),e!=Hy.current&&(t5.checkNormalize(),t=t.normalize(e));for(var r=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;var o=t.charCodeAt(n);if(n>=t.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");var s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return(0,e5.arrayify)(r)}er.toUtf8Bytes=n5;function Fw(t){var e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function KV(t,e){return'"'+Hw(t,e).map(function(r){if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?Fw(r):(r-=65536,Fw((r>>10&1023)+55296)+Fw((r&1023)+56320))}).join("")+'"'}er._toEscapedUtf8String=KV;function i5(t){return t.map(function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))}).join("")}er._toUtf8String=i5;function VV(t,e){return i5(Hw(t,e))}er.toUtf8String=VV;function qV(t,e){return e===void 0&&(e=Hy.current),Hw(n5(t,e))}er.toUtf8CodePoints=qV});var s5=B(ff=>{"use strict";l();h();Object.defineProperty(ff,"__esModule",{value:!0});ff.parseBytes32String=ff.formatBytes32String=void 0;var zV=Mw(),Kw=xr(),o5=Ky();function jV(t){var e=(0,o5.toUtf8Bytes)(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,Kw.hexlify)((0,Kw.concat)([e,zV.HashZero]).slice(0,32))}ff.formatBytes32String=jV;function WV(t){var e=(0,Kw.arrayify)(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");for(var r=31;e[r-1]===0;)r--;return(0,o5.toUtf8String)(e.slice(0,r))}ff.parseBytes32String=WV});var d5=B(yo=>{"use strict";l();h();Object.defineProperty(yo,"__esModule",{value:!0});yo.nameprep=yo._nameprepTableC=yo._nameprepTableB2=yo._nameprepTableA1=void 0;var $l=Ky();function GV(t){if(t.length%4!==0)throw new Error("bad data");for(var e=[],r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Vw(t,e){e||(e=function(i){return[parseInt(i,16)]});var r=0,n={};return t.split(",").forEach(function(i){var o=i.split(":");r+=parseInt(o[0],16),n[r]=e(o[1])}),n}function a5(t){var e=0;return t.split(",").map(function(r){var n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");var i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function qw(t,e){for(var r=0,n=0;n<e.length;n++){var i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}var $V=a5("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),YV="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(function(t){return parseInt(t,16)}),QV=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],XV=Vw("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ZV=Vw("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),JV=Vw("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",GV),eq=a5("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function tq(t){return t.reduce(function(e,r){return r.forEach(function(n){e.push(n)}),e},[])}function c5(t){return!!qw(t,$V)}yo._nameprepTableA1=c5;function u5(t){var e=qw(t,QV);if(e)return[t+e.s];var r=XV[t];if(r)return r;var n=ZV[t];if(n)return[t+n[0]];var i=JV[t];return i||null}yo._nameprepTableB2=u5;function f5(t){return!!qw(t,eq)}yo._nameprepTableC=f5;function rq(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();var e=(0,$l.toUtf8CodePoints)(t);e=tq(e.map(function(n){if(YV.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];var i=u5(n);return i||[n]})),e=(0,$l.toUtf8CodePoints)((0,$l._toUtf8String)(e),$l.UnicodeNormalizationForm.NFKC),e.forEach(function(n){if(f5(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(function(n){if(c5(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});var r=(0,$l._toUtf8String)(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}yo.nameprep=rq});var sa=B(Yt=>{"use strict";l();h();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.nameprep=Yt.parseBytes32String=Yt.formatBytes32String=Yt.UnicodeNormalizationForm=Yt.Utf8ErrorReason=Yt.Utf8ErrorFuncs=Yt.toUtf8String=Yt.toUtf8CodePoints=Yt.toUtf8Bytes=Yt._toEscapedUtf8String=void 0;var l5=s5();Object.defineProperty(Yt,"formatBytes32String",{enumerable:!0,get:function(){return l5.formatBytes32String}});Object.defineProperty(Yt,"parseBytes32String",{enumerable:!0,get:function(){return l5.parseBytes32String}});var nq=d5();Object.defineProperty(Yt,"nameprep",{enumerable:!0,get:function(){return nq.nameprep}});var vc=Ky();Object.defineProperty(Yt,"_toEscapedUtf8String",{enumerable:!0,get:function(){return vc._toEscapedUtf8String}});Object.defineProperty(Yt,"toUtf8Bytes",{enumerable:!0,get:function(){return vc.toUtf8Bytes}});Object.defineProperty(Yt,"toUtf8CodePoints",{enumerable:!0,get:function(){return vc.toUtf8CodePoints}});Object.defineProperty(Yt,"toUtf8String",{enumerable:!0,get:function(){return vc.toUtf8String}});Object.defineProperty(Yt,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return vc.UnicodeNormalizationForm}});Object.defineProperty(Yt,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return vc.Utf8ErrorFuncs}});Object.defineProperty(Yt,"Utf8ErrorReason",{enumerable:!0,get:function(){return vc.Utf8ErrorReason}})});var zw=B(Vy=>{"use strict";l();h();Object.defineProperty(Vy,"__esModule",{value:!0});Vy.id=void 0;var iq=As(),oq=sa();function sq(t){return(0,iq.keccak256)((0,oq.toUtf8Bytes)(t))}Vy.id=sq});var jw=B(qy=>{"use strict";l();h();Object.defineProperty(qy,"__esModule",{value:!0});qy.version=void 0;qy.version="hash/5.7.0"});var p5=B(df=>{"use strict";l();h();Object.defineProperty(df,"__esModule",{value:!0});df.encode=df.decode=void 0;var h5=xr();function aq(t){t=atob(t);for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return(0,h5.arrayify)(e)}df.decode=aq;function cq(t){t=(0,h5.arrayify)(t);for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}df.encode=cq});var m5=B(lf=>{"use strict";l();h();Object.defineProperty(lf,"__esModule",{value:!0});lf.encode=lf.decode=void 0;var y5=p5();Object.defineProperty(lf,"decode",{enumerable:!0,get:function(){return y5.decode}});Object.defineProperty(lf,"encode",{enumerable:!0,get:function(){return y5.encode}})});var Gw=B(Er=>{"use strict";l();h();Object.defineProperty(Er,"__esModule",{value:!0});Er.read_emoji_trie=Er.read_zero_terminated_array=Er.read_mapped_map=Er.read_member_array=Er.signed=Er.read_compressed_payload=Er.read_payload=Er.decode_arithmetic=void 0;function b5(t,e){e==null&&(e=1);var r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(t,e),r}function uq(t){for(var e={},r=0;r<t.length;r++){var n=t[r];e[n[0]]=n[1]}return e}function x5(t){var e=0;function r(){return t[e++]<<8|t[e++]}for(var n=r(),i=1,o=[0,1],s=1;s<n;s++)o.push(i+=r());var a=r(),c=e;e+=a;var u=0,d=0;function f(){return u==0&&(d=d<<8|t[e++],u=8),d>>--u&1}for(var p=31,m=Math.pow(2,p),g=m>>>1,x=g>>1,w=m-1,S=0,s=0;s<p;s++)S=S<<1|f();for(var T=[],A=0,_=m;;){for(var C=Math.floor(((S-A+1)*i-1)/_),W=0,re=n;re-W>1;){var Y=W+re>>>1;C<o[Y]?re=Y:W=Y}if(W==0)break;T.push(W);for(var G=A+Math.floor(_*o[W]/i),ee=A+Math.floor(_*o[W+1]/i)-1;!((G^ee)&g);)S=S<<1&w|f(),G=G<<1&w,ee=ee<<1&w|1;for(;G&~ee&x;)S=S&g|S<<1&w>>>1|f(),G=G<<1^g,ee=(ee^g)<<1|g|1;A=G,_=1+ee-G}var Z=n-4;return T.map(function(D){switch(D-Z){case 3:return Z+65792+(t[c++]<<16|t[c++]<<8|t[c++]);case 2:return Z+256+(t[c++]<<8|t[c++]);case 1:return Z+t[c++];default:return D-1}})}Er.decode_arithmetic=x5;function w5(t){var e=0;return function(){return t[e++]}}Er.read_payload=w5;function fq(t){return w5(x5(t))}Er.read_compressed_payload=fq;function A5(t){return t&1?~t>>1:t>>1}Er.signed=A5;function dq(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=1+e();return r}function g5(t,e){for(var r=Array(t),n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function lq(t,e){for(var r=Array(t),n=0,i=0;n<t;n++)r[n]=i+=A5(e());return r}function Ww(t,e){for(var r=g5(t(),t),n=t(),i=g5(n,t),o=dq(n,t),s=0;s<n;s++)for(var a=0;a<o[s];a++)r.push(i[s]+a);return e?r.map(function(c){return e[c]}):r}Er.read_member_array=Ww;function hq(t){for(var e=[];;){var r=t();if(r==0)break;e.push(pq(r,t))}for(;;){var r=t()-1;if(r<0)break;e.push(yq(r,t))}return uq(b5(e))}Er.read_mapped_map=hq;function S5(t){for(var e=[];;){var r=t();if(r==0)break;e.push(r)}return e}Er.read_zero_terminated_array=S5;function v5(t,e,r){for(var n=Array(t).fill(void 0).map(function(){return[]}),i=0;i<e;i++)lq(t,r).forEach(function(o,s){return n[s].push(o)});return n}function pq(t,e){var r=1+e(),n=e(),i=S5(e),o=v5(i.length,1+t,e);return b5(o.map(function(s,a){var c=s[0],u=s.slice(1);return Array(i[a]).fill(void 0).map(function(d,f){var p=f*n;return[c+f*r,u.map(function(m){return m+p})]})}))}function yq(t,e){var r=1+e(),n=v5(r,1+t,e);return n.map(function(i){return[i[0],i.slice(1)]})}function mq(t){var e=Ww(t).sort(function(n,i){return n-i});return r();function r(){for(var n=[];;){var i=Ww(t,e);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(function(d,f){return f.set.size-d.set.size});var o=t(),s=o%3;o=o/3|0;var a=!!(o&1);o>>=1;var c=o==1,u=o==2;return{branches:n,valid:s,fe0f:a,save:c,check:u}}}Er.read_emoji_trie=mq});var E5=B(zy=>{"use strict";l();h();Object.defineProperty(zy,"__esModule",{value:!0});zy.getData=void 0;var gq=m5(),bq=Gw();function xq(){return(0,bq.read_compressed_payload)((0,gq.decode)("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}zy.getData=xq});var _5=B(hf=>{"use strict";l();h();Object.defineProperty(hf,"__esModule",{value:!0});hf.ens_normalize=hf.ens_normalize_post_check=void 0;var wq=sa(),Aq=E5(),jy=(0,Aq.getData)(),Wy=Gw(),Sq=new Set((0,Wy.read_member_array)(jy)),vq=new Set((0,Wy.read_member_array)(jy)),Eq=(0,Wy.read_mapped_map)(jy),Iq=(0,Wy.read_emoji_trie)(jy),I5=45,k5=95;function T5(t){return(0,wq.toUtf8CodePoints)(t)}function kq(t){return t.filter(function(e){return e!=65039})}function $w(t){for(var e=0,r=t.split(".");e<r.length;e++){var n=r[e],i=T5(n);try{for(var o=i.lastIndexOf(k5)-1;o>=0;o--)if(i[o]!==k5)throw new Error("underscore only allowed at start");if(i.length>=4&&i.every(function(s){return s<128})&&i[2]===I5&&i[3]===I5)throw new Error("invalid label extension")}catch(s){throw new Error('Invalid label "'+n+'": '+s.message)}}return t}hf.ens_normalize_post_check=$w;function Tq(t){return $w(_q(t,kq))}hf.ens_normalize=Tq;function _q(t,e){for(var r=T5(t).reverse(),n=[];r.length;){var i=Bq(r);if(i){n.push.apply(n,e(i));continue}var o=r.pop();if(Sq.has(o)){n.push(o);continue}if(!vq.has(o)){var s=Eq[o];if(s){n.push.apply(n,s);continue}throw new Error("Disallowed codepoint: 0x"+o.toString(16).toUpperCase())}}return $w(Pq(String.fromCodePoint.apply(String,n)))}function Pq(t){return t.normalize("NFC")}function Bq(t,e){var r,n=Iq,i,o,s=[],a=t.length;e&&(e.length=0);for(var c=function(){var d=t[--a];if(n=(r=n.branches.find(function(f){return f.set.has(d)}))===null||r===void 0?void 0:r.node,!n)return"break";if(n.save)o=d;else if(n.check&&d===o)return"break";s.push(d),n.fe0f&&(s.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),e&&e.push.apply(e,t.slice(a).reverse()),t.length=a)};a;){var u=c();if(u==="break")break}return i}});var Yw=B(mo=>{"use strict";l();h();Object.defineProperty(mo,"__esModule",{value:!0});mo.dnsEncode=mo.namehash=mo.isValidName=mo.ensNormalize=void 0;var Gy=xr(),C5=sa(),P5=As(),Cq=an(),Dq=jw(),Nq=new Cq.Logger(Dq.version),Oq=_5(),D5=new Uint8Array(32);D5.fill(0);function B5(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function $y(t){var e=(0,C5.toUtf8Bytes)((0,Oq.ens_normalize)(t)),r=[];if(t.length===0)return r;for(var n=0,i=0;i<e.length;i++){var o=e[i];o===46&&(r.push(B5(e.slice(n,i))),n=i+1)}if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(B5(e.slice(n))),r}function Uq(t){return $y(t).map(function(e){return(0,C5.toUtf8String)(e)}).join(".")}mo.ensNormalize=Uq;function Rq(t){try{return $y(t).length!==0}catch{}return!1}mo.isValidName=Rq;function Lq(t){typeof t!="string"&&Nq.throwArgumentError("invalid ENS name; not a string","name",t);for(var e=D5,r=$y(t);r.length;)e=(0,P5.keccak256)((0,Gy.concat)([e,(0,P5.keccak256)(r.pop())]));return(0,Gy.hexlify)(e)}mo.namehash=Lq;function Mq(t){return(0,Gy.hexlify)((0,Gy.concat)($y(t).map(function(e){if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}mo.dnsEncode=Mq});var N5=B(Ec=>{"use strict";l();h();Object.defineProperty(Ec,"__esModule",{value:!0});Ec.hashMessage=Ec.messagePrefix=void 0;var Fq=xr(),Hq=As(),Qw=sa();Ec.messagePrefix=`Ethereum Signed Message:
`;function Kq(t){return typeof t=="string"&&(t=(0,Qw.toUtf8Bytes)(t)),(0,Hq.keccak256)((0,Fq.concat)([(0,Qw.toUtf8Bytes)(Ec.messagePrefix),(0,Qw.toUtf8Bytes)(String(t.length)),t]))}Ec.hashMessage=Kq});var V5=B(aa=>{"use strict";l();h();var Vq=aa&&aa.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},qq=aa&&aa.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(aa,"__esModule",{value:!0});aa.TypedDataEncoder=void 0;var L5=Bd(),kc=hu(),Ur=xr(),pf=As(),Ic=fi(),zq=an(),jq=jw(),Vt=new zq.Logger(jq.version),M5=zw(),F5=new Uint8Array(32);F5.fill(0);var Wq=kc.BigNumber.from(-1),H5=kc.BigNumber.from(0),K5=kc.BigNumber.from(1),Gq=kc.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function $q(t){var e=(0,Ur.arrayify)(t),r=e.length%32;return r?(0,Ur.hexConcat)([e,F5.slice(r)]):(0,Ur.hexlify)(e)}var Yq=(0,Ur.hexZeroPad)(K5.toHexString(),32),Qq=(0,Ur.hexZeroPad)(H5.toHexString(),32),O5={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Xw=["name","version","chainId","verifyingContract","salt"];function U5(t){return function(e){return typeof e!="string"&&Vt.throwArgumentError("invalid domain value for "+JSON.stringify(t),"domain."+t,e),e}}var Xq={name:U5("name"),version:U5("version"),chainId:function(t){try{return kc.BigNumber.from(t).toString()}catch{}return Vt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return(0,L5.getAddress)(t).toLowerCase()}catch{}return Vt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{var e=(0,Ur.arrayify)(t);if(e.length!==32)throw new Error("bad length");return(0,Ur.hexlify)(e)}catch{}return Vt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Zw(t){{var e=t.match(/^(u?)int(\d*)$/);if(e){var r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Vt.throwArgumentError("invalid numeric width","type",t);var i=Gq.mask(r?n-1:n),o=r?i.add(K5).mul(Wq):H5;return function(a){var c=kc.BigNumber.from(a);return(c.lt(o)||c.gt(i))&&Vt.throwArgumentError("value out-of-bounds for "+t,"value",a),(0,Ur.hexZeroPad)(c.toTwos(256).toHexString(),32)}}}{var e=t.match(/^bytes(\d+)$/);if(e){var s=parseInt(e[1]);return(s===0||s>32||e[1]!==String(s))&&Vt.throwArgumentError("invalid bytes width","type",t),function(c){var u=(0,Ur.arrayify)(c);return u.length!==s&&Vt.throwArgumentError("invalid length for "+t,"value",c),$q(c)}}}switch(t){case"address":return function(a){return(0,Ur.hexZeroPad)((0,L5.getAddress)(a),32)};case"bool":return function(a){return a?Yq:Qq};case"bytes":return function(a){return(0,pf.keccak256)(a)};case"string":return function(a){return(0,M5.id)(a)}}return null}function R5(t,e){return t+"("+e.map(function(r){var n=r.name,i=r.type;return i+" "+n}).join(",")+")"}var Zq=function(){function t(e){(0,Ic.defineReadOnly)(this,"types",Object.freeze((0,Ic.deepCopy)(e))),(0,Ic.defineReadOnly)(this,"_encoderCache",{}),(0,Ic.defineReadOnly)(this,"_types",{});var r={},n={},i={};Object.keys(e).forEach(function(f){r[f]={},n[f]=[],i[f]={}});var o=function(f){var p={};e[f].forEach(function(m){p[m.name]&&Vt.throwArgumentError("duplicate variable name "+JSON.stringify(m.name)+" in "+JSON.stringify(f),"types",e),p[m.name]=!0;var g=m.type.match(/^([^\x5b]*)(\x5b|$)/)[1];g===f&&Vt.throwArgumentError("circular type reference to "+JSON.stringify(g),"types",e);var x=Zw(g);x||(n[g]||Vt.throwArgumentError("unknown type "+JSON.stringify(g),"types",e),n[g].push(f),r[f][g]=!0)})};for(var s in e)o(s);var a=Object.keys(n).filter(function(f){return n[f].length===0});a.length===0?Vt.throwArgumentError("missing primary type","types",e):a.length>1&&Vt.throwArgumentError("ambiguous primary types or unused types: "+a.map(function(f){return JSON.stringify(f)}).join(", "),"types",e),(0,Ic.defineReadOnly)(this,"primaryType",a[0]);function c(f,p){p[f]&&Vt.throwArgumentError("circular type reference to "+JSON.stringify(f),"types",e),p[f]=!0,Object.keys(r[f]).forEach(function(m){n[m]&&(c(m,p),Object.keys(p).forEach(function(g){i[g][m]=!0}))}),delete p[f]}c(this.primaryType,{});for(var u in i){var d=Object.keys(i[u]);d.sort(),this._types[u]=R5(u,e[u])+d.map(function(f){return R5(f,e[f])}).join("")}}return t.prototype.getEncoder=function(e){var r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r},t.prototype._getEncoder=function(e){var r=this;{var n=Zw(e);if(n)return n}var i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=this.getEncoder(o),a=parseInt(i[3]);return function(d){a>=0&&d.length!==a&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",d);var f=d.map(s);return r._types[o]&&(f=f.map(pf.keccak256)),(0,pf.keccak256)((0,Ur.hexConcat)(f))}}var c=this.types[e];if(c){var u=(0,M5.id)(this._types[e]);return function(d){var f=c.map(function(p){var m=p.name,g=p.type,x=r.getEncoder(g)(d[m]);return r._types[g]?(0,pf.keccak256)(x):x});return f.unshift(u),(0,Ur.hexConcat)(f)}}return Vt.throwArgumentError("unknown type: "+e,"type",e)},t.prototype.encodeType=function(e){var r=this._types[e];return r||Vt.throwArgumentError("unknown type: "+JSON.stringify(e),"name",e),r},t.prototype.encodeData=function(e,r){return this.getEncoder(e)(r)},t.prototype.hashStruct=function(e,r){return(0,pf.keccak256)(this.encodeData(e,r))},t.prototype.encode=function(e){return this.encodeData(this.primaryType,e)},t.prototype.hash=function(e){return this.hashStruct(this.primaryType,e)},t.prototype._visit=function(e,r,n){var i=this;{var o=Zw(e);if(o)return n(e,r)}var s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){var a=s[1],c=parseInt(s[3]);return c>=0&&r.length!==c&&Vt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(function(d){return i._visit(a,d,n)})}var u=this.types[e];return u?u.reduce(function(d,f){var p=f.name,m=f.type;return d[p]=i._visit(m,r[p],n),d},{}):Vt.throwArgumentError("unknown type: "+e,"type",e)},t.prototype.visit=function(e,r){return this._visit(this.primaryType,e,r)},t.from=function(e){return new t(e)},t.getPrimaryType=function(e){return t.from(e).primaryType},t.hashStruct=function(e,r,n){return t.from(r).hashStruct(e,n)},t.hashDomain=function(e){var r=[];for(var n in e){var i=O5[n];i||Vt.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(n),"domain",e),r.push({name:n,type:i})}return r.sort(function(o,s){return Xw.indexOf(o.name)-Xw.indexOf(s.name)}),t.hashStruct("EIP712Domain",{EIP712Domain:r},e)},t.encode=function(e,r,n){return(0,Ur.hexConcat)(["0x1901",t.hashDomain(e),t.from(r).hash(n)])},t.hash=function(e,r,n){return(0,pf.keccak256)(t.encode(e,r,n))},t.resolveNames=function(e,r,n,i){return Vq(this,void 0,void 0,function(){var o,s,a,c,u,d,f,p;return qq(this,function(m){switch(m.label){case 0:e=(0,Ic.shallowCopy)(e),o={},e.verifyingContract&&!(0,Ur.isHexString)(e.verifyingContract,20)&&(o[e.verifyingContract]="0x"),s=t.from(r),s.visit(n,function(g,x){return g==="address"&&!(0,Ur.isHexString)(x,20)&&(o[x]="0x"),x}),a=[];for(c in o)a.push(c);u=0,m.label=1;case 1:return u<a.length?(d=a[u],f=o,p=d,[4,i(d)]):[3,4];case 2:f[p]=m.sent(),m.label=3;case 3:return u++,[3,1];case 4:return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),n=s.visit(n,function(g,x){return g==="address"&&o[x]?o[x]:x}),[2,{domain:e,value:n}]}})})},t.getPayload=function(e,r,n){t.hashDomain(e);var i={},o=[];Xw.forEach(function(c){var u=e[c];u!=null&&(i[c]=Xq[c](u),o.push({name:c,type:O5[c]}))});var s=t.from(r),a=(0,Ic.shallowCopy)(r);return a.EIP712Domain?Vt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,function(c,u){if(c.match(/^bytes(\d*)/))return(0,Ur.hexlify)((0,Ur.arrayify)(u));if(c.match(/^u?int/))return kc.BigNumber.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Vt.throwArgumentError("invalid string","value",u),u}return Vt.throwArgumentError("unsupported type","type",c)})}},t}();aa.TypedDataEncoder=Zq});var e2=B(Ir=>{"use strict";l();h();Object.defineProperty(Ir,"__esModule",{value:!0});Ir._TypedDataEncoder=Ir.hashMessage=Ir.messagePrefix=Ir.ensNormalize=Ir.isValidName=Ir.namehash=Ir.dnsEncode=Ir.id=void 0;var Jq=zw();Object.defineProperty(Ir,"id",{enumerable:!0,get:function(){return Jq.id}});var Jw=Yw();Object.defineProperty(Ir,"dnsEncode",{enumerable:!0,get:function(){return Jw.dnsEncode}});Object.defineProperty(Ir,"isValidName",{enumerable:!0,get:function(){return Jw.isValidName}});Object.defineProperty(Ir,"namehash",{enumerable:!0,get:function(){return Jw.namehash}});var q5=N5();Object.defineProperty(Ir,"hashMessage",{enumerable:!0,get:function(){return q5.hashMessage}});Object.defineProperty(Ir,"messagePrefix",{enumerable:!0,get:function(){return q5.messagePrefix}});var ez=Yw();Object.defineProperty(Ir,"ensNormalize",{enumerable:!0,get:function(){return ez.ensNormalize}});var tz=V5();Object.defineProperty(Ir,"_TypedDataEncoder",{enumerable:!0,get:function(){return tz.TypedDataEncoder}})});var n2=B(Ql=>{"use strict";l();h();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.SupportedAlgorithm=void 0;var rz;(function(t){t.sha256="sha256",t.sha512="sha512"})(rz=Ql.SupportedAlgorithm||(Ql.SupportedAlgorithm={}))});var z5=B(Qy=>{"use strict";l();h();Object.defineProperty(Qy,"__esModule",{value:!0});Qy.version=void 0;Qy.version="sha2/5.7.0"});var W5=B(hi=>{"use strict";l();h();var nz=hi&&hi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hi,"__esModule",{value:!0});hi.computeHmac=hi.sha512=hi.sha256=hi.ripemd160=void 0;var Xl=nz(_E()),Zl=xr(),iz=n2(),j5=an(),oz=z5(),sz=new j5.Logger(oz.version);function az(t){return"0x"+Xl.default.ripemd160().update((0,Zl.arrayify)(t)).digest("hex")}hi.ripemd160=az;function cz(t){return"0x"+Xl.default.sha256().update((0,Zl.arrayify)(t)).digest("hex")}hi.sha256=cz;function uz(t){return"0x"+Xl.default.sha512().update((0,Zl.arrayify)(t)).digest("hex")}hi.sha512=uz;function fz(t,e,r){return iz.SupportedAlgorithm[t]||sz.throwError("unsupported algorithm "+t,j5.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+Xl.default.hmac(Xl.default[t],(0,Zl.arrayify)(e)).update((0,Zl.arrayify)(r)).digest("hex")}hi.computeHmac=fz});var i2=B(pi=>{"use strict";l();h();Object.defineProperty(pi,"__esModule",{value:!0});pi.SupportedAlgorithm=pi.sha512=pi.sha256=pi.ripemd160=pi.computeHmac=void 0;var Xy=W5();Object.defineProperty(pi,"computeHmac",{enumerable:!0,get:function(){return Xy.computeHmac}});Object.defineProperty(pi,"ripemd160",{enumerable:!0,get:function(){return Xy.ripemd160}});Object.defineProperty(pi,"sha256",{enumerable:!0,get:function(){return Xy.sha256}});Object.defineProperty(pi,"sha512",{enumerable:!0,get:function(){return Xy.sha512}});var dz=n2();Object.defineProperty(pi,"SupportedAlgorithm",{enumerable:!0,get:function(){return dz.SupportedAlgorithm}})});var P2=B((_2,wk)=>{"use strict";l();h();(function(t){function e(P){return parseInt(P)===P}function r(P){if(!e(P.length))return!1;for(var U=0;U<P.length;U++)if(!e(P[U])||P[U]<0||P[U]>255)return!1;return!0}function n(P,U){if(P.buffer&&ArrayBuffer.isView(P)&&P.name==="Uint8Array")return U&&(P.slice?P=P.slice():P=Array.prototype.slice.call(P)),P;if(Array.isArray(P)){if(!r(P))throw new Error("Array contains invalid value: "+P);return new Uint8Array(P)}if(e(P.length)&&r(P))return new Uint8Array(P);throw new Error("unsupported array-like object")}function i(P){return new Uint8Array(P)}function o(P,U,X,M,F){(M!=null||F!=null)&&(P.slice?P=P.slice(M,F):P=Array.prototype.slice.call(P,M,F)),U.set(P,X)}var s=function(){function P(X){var M=[],F=0;for(X=encodeURI(X);F<X.length;){var ye=X.charCodeAt(F++);ye===37?(M.push(parseInt(X.substr(F,2),16)),F+=2):M.push(ye)}return n(M)}function U(X){for(var M=[],F=0;F<X.length;){var ye=X[F];ye<128?(M.push(String.fromCharCode(ye)),F++):ye>191&&ye<224?(M.push(String.fromCharCode((ye&31)<<6|X[F+1]&63)),F+=2):(M.push(String.fromCharCode((ye&15)<<12|(X[F+1]&63)<<6|X[F+2]&63)),F+=3)}return M.join("")}return{toBytes:P,fromBytes:U}}(),a=function(){function P(M){for(var F=[],ye=0;ye<M.length;ye+=2)F.push(parseInt(M.substr(ye,2),16));return F}var U="0123456789abcdef";function X(M){for(var F=[],ye=0;ye<M.length;ye++){var wt=M[ye];F.push(U[(wt&240)>>4]+U[wt&15])}return F.join("")}return{toBytes:P,fromBytes:X}}(),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],d=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],m=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],x=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],w=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],S=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],T=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],_=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],C=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],W=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],re=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Y(P){for(var U=[],X=0;X<P.length;X+=4)U.push(P[X]<<24|P[X+1]<<16|P[X+2]<<8|P[X+3]);return U}var G=function(P){if(!(this instanceof G))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(P,!0)}),this._prepare()};G.prototype._prepare=function(){var P=c[this.key.length];if(P==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var U=0;U<=P;U++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var X=(P+1)*4,M=this.key.length/4,F=Y(this.key),ye,U=0;U<M;U++)ye=U>>2,this._Ke[ye][U%4]=F[U],this._Kd[P-ye][U%4]=F[U];for(var wt=0,$e=M,Fe;$e<X;){if(Fe=F[M-1],F[0]^=d[Fe>>16&255]<<24^d[Fe>>8&255]<<16^d[Fe&255]<<8^d[Fe>>24&255]^u[wt]<<24,wt+=1,M!=8)for(var U=1;U<M;U++)F[U]^=F[U-1];else{for(var U=1;U<M/2;U++)F[U]^=F[U-1];Fe=F[M/2-1],F[M/2]^=d[Fe&255]^d[Fe>>8&255]<<8^d[Fe>>16&255]<<16^d[Fe>>24&255]<<24;for(var U=M/2+1;U<M;U++)F[U]^=F[U-1]}for(var U=0,q,k;U<M&&$e<X;)q=$e>>2,k=$e%4,this._Ke[q][k]=F[U],this._Kd[P-q][k]=F[U++],$e++}for(var q=1;q<P;q++)for(var k=0;k<4;k++)Fe=this._Kd[q][k],this._Kd[q][k]=_[Fe>>24&255]^C[Fe>>16&255]^W[Fe>>8&255]^re[Fe&255]},G.prototype.encrypt=function(P){if(P.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var U=this._Ke.length-1,X=[0,0,0,0],M=Y(P),F=0;F<4;F++)M[F]^=this._Ke[0][F];for(var ye=1;ye<U;ye++){for(var F=0;F<4;F++)X[F]=p[M[F]>>24&255]^m[M[(F+1)%4]>>16&255]^g[M[(F+2)%4]>>8&255]^x[M[(F+3)%4]&255]^this._Ke[ye][F];M=X.slice()}for(var wt=i(16),$e,F=0;F<4;F++)$e=this._Ke[U][F],wt[4*F]=(d[M[F]>>24&255]^$e>>24)&255,wt[4*F+1]=(d[M[(F+1)%4]>>16&255]^$e>>16)&255,wt[4*F+2]=(d[M[(F+2)%4]>>8&255]^$e>>8)&255,wt[4*F+3]=(d[M[(F+3)%4]&255]^$e)&255;return wt},G.prototype.decrypt=function(P){if(P.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var U=this._Kd.length-1,X=[0,0,0,0],M=Y(P),F=0;F<4;F++)M[F]^=this._Kd[0][F];for(var ye=1;ye<U;ye++){for(var F=0;F<4;F++)X[F]=w[M[F]>>24&255]^S[M[(F+3)%4]>>16&255]^T[M[(F+2)%4]>>8&255]^A[M[(F+1)%4]&255]^this._Kd[ye][F];M=X.slice()}for(var wt=i(16),$e,F=0;F<4;F++)$e=this._Kd[U][F],wt[4*F]=(f[M[F]>>24&255]^$e>>24)&255,wt[4*F+1]=(f[M[(F+3)%4]>>16&255]^$e>>16)&255,wt[4*F+2]=(f[M[(F+2)%4]>>8&255]^$e>>8)&255,wt[4*F+3]=(f[M[(F+1)%4]&255]^$e)&255;return wt};var ee=function(P){if(!(this instanceof ee))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new G(P)};ee.prototype.encrypt=function(P){if(P=n(P),P.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var U=i(P.length),X=i(16),M=0;M<P.length;M+=16)o(P,X,0,M,M+16),X=this._aes.encrypt(X),o(X,U,M);return U},ee.prototype.decrypt=function(P){if(P=n(P),P.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var U=i(P.length),X=i(16),M=0;M<P.length;M+=16)o(P,X,0,M,M+16),X=this._aes.decrypt(X),o(X,U,M);return U};var Z=function(P,U){if(!(this instanceof Z))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!U)U=i(16);else if(U.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=n(U,!0),this._aes=new G(P)};Z.prototype.encrypt=function(P){if(P=n(P),P.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var U=i(P.length),X=i(16),M=0;M<P.length;M+=16){o(P,X,0,M,M+16);for(var F=0;F<16;F++)X[F]^=this._lastCipherblock[F];this._lastCipherblock=this._aes.encrypt(X),o(this._lastCipherblock,U,M)}return U},Z.prototype.decrypt=function(P){if(P=n(P),P.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var U=i(P.length),X=i(16),M=0;M<P.length;M+=16){o(P,X,0,M,M+16),X=this._aes.decrypt(X);for(var F=0;F<16;F++)U[M+F]=X[F]^this._lastCipherblock[F];o(P,this._lastCipherblock,0,M,M+16)}return U};var D=function(P,U,X){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!U)U=i(16);else if(U.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");X||(X=1),this.segmentSize=X,this._shiftRegister=n(U,!0),this._aes=new G(P)};D.prototype.encrypt=function(P){if(P.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var U=n(P,!0),X,M=0;M<U.length;M+=this.segmentSize){X=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)U[M+F]^=X[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(U,this._shiftRegister,16-this.segmentSize,M,M+this.segmentSize)}return U},D.prototype.decrypt=function(P){if(P.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var U=n(P,!0),X,M=0;M<U.length;M+=this.segmentSize){X=this._aes.encrypt(this._shiftRegister);for(var F=0;F<this.segmentSize;F++)U[M+F]^=X[F];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(P,this._shiftRegister,16-this.segmentSize,M,M+this.segmentSize)}return U};var N=function(P,U){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!U)U=i(16);else if(U.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=n(U,!0),this._lastPrecipherIndex=16,this._aes=new G(P)};N.prototype.encrypt=function(P){for(var U=n(P,!0),X=0;X<U.length;X++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),U[X]^=this._lastPrecipher[this._lastPrecipherIndex++];return U},N.prototype.decrypt=N.prototype.encrypt;var O=function(P){if(!(this instanceof O))throw Error("Counter must be instanitated with `new`");P!==0&&!P&&(P=1),typeof P=="number"?(this._counter=i(16),this.setValue(P)):this.setBytes(P)};O.prototype.setValue=function(P){if(typeof P!="number"||parseInt(P)!=P)throw new Error("invalid counter value (must be an integer)");for(var U=15;U>=0;--U)this._counter[U]=P%256,P=P>>8},O.prototype.setBytes=function(P){if(P=n(P,!0),P.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=P},O.prototype.increment=function(){for(var P=15;P>=0;P--)if(this._counter[P]===255)this._counter[P]=0;else{this._counter[P]++;break}};var $=function(P,U){if(!(this instanceof $))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",U instanceof O||(U=new O(U)),this._counter=U,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new G(P)};$.prototype.encrypt=function(P){for(var U=n(P,!0),X=0;X<U.length;X++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),U[X]^=this._remainingCounter[this._remainingCounterIndex++];return U},$.prototype.decrypt=$.prototype.encrypt;function fe(P){P=n(P,!0);var U=16-P.length%16,X=i(P.length+U);o(P,X);for(var M=P.length;M<X.length;M++)X[M]=U;return X}function se(P){if(P=n(P,!0),P.length<16)throw new Error("PKCS#7 invalid length");var U=P[P.length-1];if(U>16)throw new Error("PKCS#7 padding byte out of range");for(var X=P.length-U,M=0;M<U;M++)if(P[X+M]!==U)throw new Error("PKCS#7 invalid padding byte");var F=i(X);return o(P,F,0,0,X),F}var Ae={AES:G,Counter:O,ModeOfOperation:{ecb:ee,cbc:Z,cfb:D,ofb:N,ctr:$},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:fe,strip:se}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};typeof _2<"u"?wk.exports=Ae:typeof define=="function"&&define.amd?define(Ae):(t.aesjs&&(Ae._aesjs=t.aesjs),t.aesjs=Ae)})(_2)});var _k=B((R2,Tk)=>{"use strict";l();h();(function(t){function r(m){let g=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),x=1779033703,w=3144134277,S=1013904242,T=2773480762,A=1359893119,_=2600822924,C=528734635,W=1541459225,re=new Uint32Array(64);function Y($){let fe=0,se=$.length;for(;se>=64;){let Ae=x,P=w,U=S,X=T,M=A,F=_,ye=C,wt=W,$e,Fe,q,k,L;for(Fe=0;Fe<16;Fe++)q=fe+Fe*4,re[Fe]=($[q]&255)<<24|($[q+1]&255)<<16|($[q+2]&255)<<8|$[q+3]&255;for(Fe=16;Fe<64;Fe++)$e=re[Fe-2],k=($e>>>17|$e<<15)^($e>>>19|$e<<13)^$e>>>10,$e=re[Fe-15],L=($e>>>7|$e<<25)^($e>>>18|$e<<14)^$e>>>3,re[Fe]=(k+re[Fe-7]|0)+(L+re[Fe-16]|0)|0;for(Fe=0;Fe<64;Fe++)k=(((M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7))+(M&F^~M&ye)|0)+(wt+(g[Fe]+re[Fe]|0)|0)|0,L=((Ae>>>2|Ae<<30)^(Ae>>>13|Ae<<19)^(Ae>>>22|Ae<<10))+(Ae&P^Ae&U^P&U)|0,wt=ye,ye=F,F=M,M=X+k|0,X=U,U=P,P=Ae,Ae=k+L|0;x=x+Ae|0,w=w+P|0,S=S+U|0,T=T+X|0,A=A+M|0,_=_+F|0,C=C+ye|0,W=W+wt|0,fe+=64,se-=64}}Y(m);let G,ee=m.length%64,Z=m.length/536870912|0,D=m.length<<3,N=ee<56?56:120,O=m.slice(m.length-ee,m.length);for(O.push(128),G=ee+1;G<N;G++)O.push(0);return O.push(Z>>>24&255),O.push(Z>>>16&255),O.push(Z>>>8&255),O.push(Z>>>0&255),O.push(D>>>24&255),O.push(D>>>16&255),O.push(D>>>8&255),O.push(D>>>0&255),Y(O),[x>>>24&255,x>>>16&255,x>>>8&255,x>>>0&255,w>>>24&255,w>>>16&255,w>>>8&255,w>>>0&255,S>>>24&255,S>>>16&255,S>>>8&255,S>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function n(m,g,x){m=m.length<=64?m:r(m);let w=64+g.length+4,S=new Array(w),T=new Array(64),A,_=[];for(A=0;A<64;A++)S[A]=54;for(A=0;A<m.length;A++)S[A]^=m[A];for(A=0;A<g.length;A++)S[64+A]=g[A];for(A=w-4;A<w;A++)S[A]=0;for(A=0;A<64;A++)T[A]=92;for(A=0;A<m.length;A++)T[A]^=m[A];function C(){for(let W=w-1;W>=w-4;W--){if(S[W]++,S[W]<=255)return;S[W]=0}}for(;x>=32;)C(),_=_.concat(r(T.concat(r(S)))),x-=32;return x>0&&(C(),_=_.concat(r(T.concat(r(S))).slice(0,x))),_}function i(m,g,x,w,S){let T;for(c(m,(2*x-1)*16,S,0,16),T=0;T<2*x;T++)a(m,T*16,S,16),s(S,w),c(S,0,m,g+T*16,16);for(T=0;T<x;T++)c(m,g+T*2*16,m,T*16,16);for(T=0;T<x;T++)c(m,g+(T*2+1)*16,m,(T+x)*16,16)}function o(m,g){return m<<g|m>>>32-g}function s(m,g){c(m,0,g,0,16);for(let x=8;x>0;x-=2)g[4]^=o(g[0]+g[12],7),g[8]^=o(g[4]+g[0],9),g[12]^=o(g[8]+g[4],13),g[0]^=o(g[12]+g[8],18),g[9]^=o(g[5]+g[1],7),g[13]^=o(g[9]+g[5],9),g[1]^=o(g[13]+g[9],13),g[5]^=o(g[1]+g[13],18),g[14]^=o(g[10]+g[6],7),g[2]^=o(g[14]+g[10],9),g[6]^=o(g[2]+g[14],13),g[10]^=o(g[6]+g[2],18),g[3]^=o(g[15]+g[11],7),g[7]^=o(g[3]+g[15],9),g[11]^=o(g[7]+g[3],13),g[15]^=o(g[11]+g[7],18),g[1]^=o(g[0]+g[3],7),g[2]^=o(g[1]+g[0],9),g[3]^=o(g[2]+g[1],13),g[0]^=o(g[3]+g[2],18),g[6]^=o(g[5]+g[4],7),g[7]^=o(g[6]+g[5],9),g[4]^=o(g[7]+g[6],13),g[5]^=o(g[4]+g[7],18),g[11]^=o(g[10]+g[9],7),g[8]^=o(g[11]+g[10],9),g[9]^=o(g[8]+g[11],13),g[10]^=o(g[9]+g[8],18),g[12]^=o(g[15]+g[14],7),g[13]^=o(g[12]+g[15],9),g[14]^=o(g[13]+g[12],13),g[15]^=o(g[14]+g[13],18);for(let x=0;x<16;++x)m[x]+=g[x]}function a(m,g,x,w){for(let S=0;S<w;S++)x[S]^=m[g+S]}function c(m,g,x,w,S){for(;S--;)x[w++]=m[g++]}function u(m){if(!m||typeof m.length!="number")return!1;for(let g=0;g<m.length;g++){let x=m[g];if(typeof x!="number"||x%1||x<0||x>=256)return!1}return!0}function d(m,g){if(typeof m!="number"||m%1)throw new Error("invalid "+g);return m}function f(m,g,x,w,S,T,A){if(x=d(x,"N"),w=d(w,"r"),S=d(S,"p"),T=d(T,"dkLen"),x===0||x&x-1)throw new Error("N must be power of 2");if(x>2147483647/128/w)throw new Error("N too large");if(w>2147483647/128/S)throw new Error("r too large");if(!u(m))throw new Error("password must be an array or buffer");if(m=Array.prototype.slice.call(m),!u(g))throw new Error("salt must be an array or buffer");g=Array.prototype.slice.call(g);let _=n(m,g,S*128*w),C=new Uint32Array(S*32*w);for(let M=0;M<C.length;M++){let F=M*4;C[M]=(_[F+3]&255)<<24|(_[F+2]&255)<<16|(_[F+1]&255)<<8|(_[F+0]&255)<<0}let W=new Uint32Array(64*w),re=new Uint32Array(32*w*x),Y=32*w,G=new Uint32Array(16),ee=new Uint32Array(16),Z=S*x*2,D=0,N=null,O=!1,$=0,fe=0,se,Ae,P=A?parseInt(1e3/w):4294967295,U=typeof setImmediate<"u"?setImmediate:setTimeout,X=function(){if(O)return A(new Error("cancelled"),D/Z);let M;switch($){case 0:Ae=fe*32*w,c(C,Ae,W,0,Y),$=1,se=0;case 1:M=x-se,M>P&&(M=P);for(let ye=0;ye<M;ye++)c(W,0,re,(se+ye)*Y,Y),i(W,Y,w,G,ee);if(se+=M,D+=M,A){let ye=parseInt(1e3*D/Z);if(ye!==N){if(O=A(null,D/Z),O)break;N=ye}}if(se<x)break;se=0,$=2;case 2:M=x-se,M>P&&(M=P);for(let ye=0;ye<M;ye++){let wt=(2*w-1)*16,$e=W[wt]&x-1;a(re,$e*Y,W,Y),i(W,Y,w,G,ee)}if(se+=M,D+=M,A){let ye=parseInt(1e3*D/Z);if(ye!==N){if(O=A(null,D/Z),O)break;N=ye}}if(se<x)break;if(c(W,0,C,Ae,Y),fe++,fe<S){$=0;break}_=[];for(let ye=0;ye<C.length;ye++)_.push(C[ye]>>0&255),_.push(C[ye]>>8&255),_.push(C[ye]>>16&255),_.push(C[ye]>>24&255);let F=n(m,_,T);return A&&A(null,1,F),F}A&&U(X)};if(!A)for(;;){let M=X();if(M!=null)return M}X()}let p={scrypt:function(m,g,x,w,S,T,A){return new Promise(function(_,C){let W=0;A&&A(0),f(m,g,x,w,S,T,function(re,Y,G){if(re)C(re);else if(G)A&&W!==1&&A(1),_(new Uint8Array(G));else if(A&&Y!==W)return W=Y,A(Y)})})},syncScrypt:function(m,g,x,w,S,T){return new Uint8Array(f(m,g,x,w,S,T))}};typeof R2<"u"?Tk.exports=p:typeof define=="function"&&define.amd?define(p):t&&(t.scrypt&&(t._scrypt=t.scrypt),t.scrypt=p)})(R2)});var Vf=B(Kf=>{"use strict";l();h();Object.defineProperty(Kf,"__esModule",{value:!0});Kf.bech32m=Kf.bech32=void 0;var Jm="qpzry9x8gf2tvdw0s3jn54khce6mua7l",GT={};for(let t=0;t<Jm.length;t++){let e=Jm.charAt(t);GT[e]=t}function Hf(t){let e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function WT(t){let e=1;for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Hf(e)^n>>5}e=Hf(e);for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);e=Hf(e)^n&31}return e}function YA(t,e,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let c=0;c<t.length;++c)for(i=i<<e|t[c],o+=e;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function xG(t){return YA(t,8,5,!0)}function wG(t){let e=YA(t,5,8,!1);if(Array.isArray(e))return e}function AG(t){let e=YA(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function $T(t){let e;t==="bech32"?e=1:e=734539939;function r(s,a,c){if(c=c||90,s.length+7+a.length>c)throw new TypeError("Exceeds length limit");s=s.toLowerCase();let u=WT(s);if(typeof u=="string")throw new Error(u);let d=s+"1";for(let f=0;f<a.length;++f){let p=a[f];if(p>>5)throw new Error("Non 5-bit word");u=Hf(u)^p,d+=Jm.charAt(p)}for(let f=0;f<6;++f)u=Hf(u);u^=e;for(let f=0;f<6;++f){let p=u>>(5-f)*5&31;d+=Jm.charAt(p)}return d}function n(s,a){if(a=a||90,s.length<8)return s+" too short";if(s.length>a)return"Exceeds length limit";let c=s.toLowerCase(),u=s.toUpperCase();if(s!==c&&s!==u)return"Mixed-case string "+s;s=c;let d=s.lastIndexOf("1");if(d===-1)return"No separator character for "+s;if(d===0)return"Missing prefix for "+s;let f=s.slice(0,d),p=s.slice(d+1);if(p.length<6)return"Data too short";let m=WT(f);if(typeof m=="string")return m;let g=[];for(let x=0;x<p.length;++x){let w=p.charAt(x),S=GT[w];if(S===void 0)return"Unknown character "+w;m=Hf(m)^S,!(x+6>=p.length)&&g.push(S)}return m!==e?"Invalid checksum for "+s:{prefix:f,words:g}}function i(s,a){let c=n(s,a);if(typeof c=="object")return c}function o(s,a){let c=n(s,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:o,encode:r,toWords:xG,fromWordsUnsafe:wG,fromWords:AG}}Kf.bech32=$T("bech32");Kf.bech32m=$T("bech32m")});var t_=B(yn=>{"use strict";l();h();Object.defineProperty(yn,"__esModule",{value:!0});yn.output=yn.exists=yn.hash=yn.bytes=yn.bool=yn.number=void 0;function og(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}yn.number=og;function XT(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}yn.bool=XT;function iS(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}yn.bytes=iS;function ZT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");og(t.outputLen),og(t.blockLen)}yn.hash=ZT;function JT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}yn.exists=JT;function e_(t,e){iS(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}yn.output=e_;var DG={number:og,bool:XT,bytes:iS,hash:ZT,exists:JT,output:e_};yn.default=DG});var r_=B(sg=>{"use strict";l();h();Object.defineProperty(sg,"__esModule",{value:!0});sg.crypto=void 0;sg.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var aS=B(Ke=>{"use strict";l();h();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.randomBytes=Ke.wrapConstructorWithOpts=Ke.wrapConstructor=Ke.checkOpts=Ke.Hash=Ke.concatBytes=Ke.toBytes=Ke.utf8ToBytes=Ke.asyncLoop=Ke.nextTick=Ke.hexToBytes=Ke.bytesToHex=Ke.isLE=Ke.rotr=Ke.createView=Ke.u32=Ke.u8=void 0;var ag=r_(),NG=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Ke.u8=NG;var OG=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));Ke.u32=OG;var UG=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);Ke.createView=UG;var RG=(t,e)=>t<<32-e|t>>>e;Ke.rotr=RG;Ke.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ke.isLE)throw new Error("Non little-endian hardware is not supported");var LG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MG(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=LG[t[r]];return e}Ke.bytesToHex=MG;function FG(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}Ke.hexToBytes=FG;var HG=async()=>{};Ke.nextTick=HG;async function KG(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,Ke.nextTick)(),n+=o)}}Ke.asyncLoop=KG;function n_(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}Ke.utf8ToBytes=n_;function sS(t){if(typeof t=="string"&&(t=n_(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Ke.toBytes=sS;function VG(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}Ke.concatBytes=VG;var oS=class{clone(){return this._cloneInto()}};Ke.Hash=oS;var qG=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function zG(t,e){if(e!==void 0&&(typeof e!="object"||!qG(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}Ke.checkOpts=zG;function jG(t){let e=n=>t().update(sS(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}Ke.wrapConstructor=jG;function WG(t){let e=(n,i)=>t(i).update(sS(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Ke.wrapConstructorWithOpts=WG;function GG(t=32){if(ag.crypto.web)return ag.crypto.web.getRandomValues(new Uint8Array(t));if(ag.crypto.node)return new Uint8Array(ag.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}Ke.randomBytes=GG});var i_=B(cg=>{"use strict";l();h();Object.defineProperty(cg,"__esModule",{value:!0});cg.SHA2=void 0;var cS=t_(),y0=aS();function $G(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var uS=class extends y0.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,y0.createView)(this.buffer)}update(e){cS.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,y0.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,y0.createView)(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){cS.default.exists(this),cS.default.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;$G(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,y0.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};cg.SHA2=uS});var o_=B(zf=>{"use strict";l();h();Object.defineProperty(zf,"__esModule",{value:!0});zf.sha224=zf.sha256=void 0;var YG=i_(),Ai=aS(),QG=(t,e,r)=>t&e^~t&r,XG=(t,e,r)=>t&e^t&r^e&r,ZG=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ba=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ca=new Uint32Array(64),ug=class extends YG.SHA2{constructor(){super(64,32,8,!1),this.A=Ba[0]|0,this.B=Ba[1]|0,this.C=Ba[2]|0,this.D=Ba[3]|0,this.E=Ba[4]|0,this.F=Ba[5]|0,this.G=Ba[6]|0,this.H=Ba[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Ca[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=Ca[f-15],m=Ca[f-2],g=(0,Ai.rotr)(p,7)^(0,Ai.rotr)(p,18)^p>>>3,x=(0,Ai.rotr)(m,17)^(0,Ai.rotr)(m,19)^m>>>10;Ca[f]=x+Ca[f-7]+g+Ca[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){let p=(0,Ai.rotr)(a,6)^(0,Ai.rotr)(a,11)^(0,Ai.rotr)(a,25),m=d+p+QG(a,c,u)+ZG[f]+Ca[f]|0,x=((0,Ai.rotr)(n,2)^(0,Ai.rotr)(n,13)^(0,Ai.rotr)(n,22))+XG(n,i,o)|0;d=u,u=c,c=a,a=s+m|0,s=o,o=i,i=n,n=m+x|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,o,s,a,c,u,d)}roundClean(){Ca.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},fS=class extends ug{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};zf.sha256=(0,Ai.wrapConstructor)(()=>new ug);zf.sha224=(0,Ai.wrapConstructor)(()=>new fS)});var a_=B((awe,s_)=>{"use strict";l();h();function JG(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,x=0,w=0,S=m.length;w!==S&&m[w]===0;)w++,g++;for(var T=(S-w)*u+1>>>0,A=new Uint8Array(T);w!==S;){for(var _=m[w],C=0,W=T-1;(_!==0||C<x)&&W!==-1;W--,C++)_+=256*A[W]>>>0,A[W]=_%s>>>0,_=_/s>>>0;if(_!==0)throw new Error("Non-zero carry");x=C,w++}for(var re=T-x;re!==T&&A[re]===0;)re++;for(var Y=a.repeat(g);re<T;++re)Y+=t.charAt(A[re]);return Y}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var g=0,x=0,w=0;m[g]===a;)x++,g++;for(var S=(m.length-g)*c+1>>>0,T=new Uint8Array(S);m[g];){var A=e[m.charCodeAt(g)];if(A===255)return;for(var _=0,C=S-1;(A!==0||_<w)&&C!==-1;C--,_++)A+=s*T[C]>>>0,T[C]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");w=_,g++}for(var W=S-w;W!==S&&T[W]===0;)W++;for(var re=new Uint8Array(x+(S-W)),Y=x;W!==S;)re[Y++]=T[W++];return re}function p(m){var g=f(m);if(g)return g;throw new Error("Non-base"+s+" character")}return{encode:d,decodeUnsafe:f,decode:p}}s_.exports=JG});var u_=B((fwe,c_)=>{l();h();var e$=a_(),t$="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";c_.exports=e$(t$)});var d_=B((hwe,f_)=>{"use strict";l();h();var dS=u_();f_.exports=function(t){function e(o){var s=Uint8Array.from(o),a=t(s),c=s.length+4,u=new Uint8Array(c);return u.set(s,0),u.set(a.subarray(0,4),s.length),dS.encode(u,c)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=t(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=dS.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=dS.decode(o),a=r(s,t);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}}});var jf=B((mwe,h_)=>{"use strict";l();h();var{sha256:l_}=o_(),r$=d_();function n$(t){return l_(l_(t))}h_.exports=r$(n$)});var y_=B((xwe,p_)=>{"use strict";l();h();var lS=ws(),i$=TE().Buffer;p_.exports=function(t){function e(o){var s=t(o);return lS.encode(i$.concat([o,s],o.length+4))}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=t(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=lS.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=lS.decode(o),a=r(s,t);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}}});var b_=B((Swe,g_)=>{"use strict";l();h();var m_=aN(),o$=y_();function s$(t){var e=m_("sha256").update(t).digest();return m_("sha256").update(e).digest()}g_.exports=o$(s$)});var yS=B((Iwe,w_)=>{l();h();var hS=b_();function x_(t,e){if(e!==void 0&&t[0]!==e)throw new Error("Invalid network version");if(t.length===33)return{version:t[0],privateKey:t.slice(1,33),compressed:!1};if(t.length!==34)throw new Error("Invalid WIF length");if(t[33]!==1)throw new Error("Invalid compression flag");return{version:t[0],privateKey:t.slice(1,33),compressed:!0}}function pS(t,e,r){var n=new Buffer(r?34:33);return n.writeUInt8(t,0),e.copy(n,1),r&&(n[33]=1),n}function a$(t,e){return x_(hS.decode(t),e)}function c$(t,e,r){return typeof t=="number"?hS.encode(pS(t,e,r)):hS.encode(pS(t.version,t.privateKey,t.compressed))}w_.exports={decode:a$,decodeRaw:x_,encode:c$,encodeRaw:pS}});var bS=B(mn=>{"use strict";l();h();Object.defineProperty(mn,"__esModule",{value:!0});mn.output=mn.exists=mn.hash=mn.bytes=mn.bool=mn.number=void 0;function lg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}mn.number=lg;function T_(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}mn.bool=T_;function gS(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}mn.bytes=gS;function __(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lg(t.outputLen),lg(t.blockLen)}mn.hash=__;function P_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}mn.exists=P_;function B_(t,e){gS(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}mn.output=B_;var p$={number:lg,bool:T_,bytes:gS,hash:__,exists:P_,output:B_};mn.default=p$});var C_=B(hg=>{"use strict";l();h();Object.defineProperty(hg,"__esModule",{value:!0});hg.crypto=void 0;hg.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var yg=B(Le=>{"use strict";l();h();Object.defineProperty(Le,"__esModule",{value:!0});Le.randomBytes=Le.wrapXOFConstructorWithOpts=Le.wrapConstructorWithOpts=Le.wrapConstructor=Le.checkOpts=Le.Hash=Le.concatBytes=Le.toBytes=Le.utf8ToBytes=Le.asyncLoop=Le.nextTick=Le.hexToBytes=Le.bytesToHex=Le.isLE=Le.rotr=Le.createView=Le.u32=Le.u8=void 0;var xS=C_(),AS=t=>t instanceof Uint8Array,y$=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Le.u8=y$;var m$=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));Le.u32=m$;var g$=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);Le.createView=g$;var b$=(t,e)=>t<<32-e|t>>>e;Le.rotr=b$;Le.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Le.isLE)throw new Error("Non little-endian hardware is not supported");var x$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function w$(t){if(!AS(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=x$[t[r]];return e}Le.bytesToHex=w$;function A$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){let i=n*2,o=t.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}Le.hexToBytes=A$;var S$=async()=>{};Le.nextTick=S$;async function v$(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,Le.nextTick)(),n+=o)}}Le.asyncLoop=v$;function D_(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}Le.utf8ToBytes=D_;function pg(t){if(typeof t=="string"&&(t=D_(t)),!AS(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}Le.toBytes=pg;function E$(...t){let e=new Uint8Array(t.reduce((n,i)=>n+i.length,0)),r=0;return t.forEach(n=>{if(!AS(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}Le.concatBytes=E$;var wS=class{clone(){return this._cloneInto()}};Le.Hash=wS;var I$=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function k$(t,e){if(e!==void 0&&(typeof e!="object"||!I$(e)))throw new Error("Options should be object or undefined");return Object.assign(t,e)}Le.checkOpts=k$;function T$(t){let e=n=>t().update(pg(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}Le.wrapConstructor=T$;function _$(t){let e=(n,i)=>t(i).update(pg(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Le.wrapConstructorWithOpts=_$;function P$(t){let e=(n,i)=>t(i).update(pg(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Le.wrapXOFConstructorWithOpts=P$;function B$(t=32){if(xS.crypto&&typeof xS.crypto.getRandomValues=="function")return xS.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}Le.randomBytes=B$});var O_=B(Hc=>{"use strict";l();h();Object.defineProperty(Hc,"__esModule",{value:!0});Hc.hmac=Hc.HMAC=void 0;var mg=bS(),N_=yg(),g0=class extends N_.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,mg.default.hash(e);let n=(0,N_.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return mg.default.exists(this),this.iHash.update(e),this}digestInto(e){mg.default.exists(this),mg.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};Hc.HMAC=g0;var C$=(t,e,r)=>new g0(t,e).update(r).digest();Hc.hmac=C$;Hc.hmac.create=(t,e)=>new g0(t,e)});var U_=B(gg=>{"use strict";l();h();Object.defineProperty(gg,"__esModule",{value:!0});gg.SHA2=void 0;var SS=bS(),b0=yg();function D$(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var vS=class extends b0.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,b0.createView)(this.buffer)}update(e){SS.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,b0.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,b0.createView)(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){SS.default.exists(this),SS.default.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;D$(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,b0.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};gg.SHA2=vS});var R_=B(Wf=>{"use strict";l();h();Object.defineProperty(Wf,"__esModule",{value:!0});Wf.sha224=Wf.sha256=void 0;var N$=U_(),Si=yg(),O$=(t,e,r)=>t&e^~t&r,U$=(t,e,r)=>t&e^t&r^e&r,R$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Da=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Na=new Uint32Array(64),bg=class extends N$.SHA2{constructor(){super(64,32,8,!1),this.A=Da[0]|0,this.B=Da[1]|0,this.C=Da[2]|0,this.D=Da[3]|0,this.E=Da[4]|0,this.F=Da[5]|0,this.G=Da[6]|0,this.H=Da[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Na[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=Na[f-15],m=Na[f-2],g=(0,Si.rotr)(p,7)^(0,Si.rotr)(p,18)^p>>>3,x=(0,Si.rotr)(m,17)^(0,Si.rotr)(m,19)^m>>>10;Na[f]=x+Na[f-7]+g+Na[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){let p=(0,Si.rotr)(a,6)^(0,Si.rotr)(a,11)^(0,Si.rotr)(a,25),m=d+p+O$(a,c,u)+R$[f]+Na[f]|0,x=((0,Si.rotr)(n,2)^(0,Si.rotr)(n,13)^(0,Si.rotr)(n,22))+U$(n,i,o)|0;d=u,u=c,c=a,a=s+m|0,s=o,o=i,i=n,n=m+x|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,o,s,a,c,u,d)}roundClean(){Na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ES=class extends bg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Wf.sha256=(0,Si.wrapConstructor)(()=>new bg);Wf.sha224=(0,Si.wrapConstructor)(()=>new ES)});var CS=B(ar=>{"use strict";l();h();var L$=N1(),M$=O_(),L_=R_();function F$(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var ut=F$(L$);ut.utils.hmacSha256Sync=(t,...e)=>M$.hmac(L_.sha256,t,ut.utils.concatBytes(...e));ut.utils.sha256Sync=(...t)=>L_.sha256(ut.utils.concatBytes(...t));var TS=ut.utils._normalizePrivateKey,H$=32,K$=32,IS=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),V$=32;function kS(t,e){for(let r=0;r<32;++r)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function x0(t){return!(!(t instanceof Uint8Array)||t.length!==K$||kS(t,IS)>=0)}function M_(t){return t instanceof Uint8Array&&t.length===64&&kS(t.subarray(0,32),IS)<0&&kS(t.subarray(32,64),IS)<0}function xg(t){return t instanceof Uint8Array&&t.length===H$}function F_(t){return t===void 0||t instanceof Uint8Array&&t.length===V$}function H_(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function q$(t){return H_(ut.utils.bytesToHex(t))}function _S(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>=0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private scalar");e=H_(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private scalar");e=q$(t)}else throw new TypeError("Expected valid private scalar");if(e<0)throw new Error("Expected private scalar >= 0");return e}var z$=(t,e)=>{let r=TS(t),n=_S(e),i=ut.utils._bigintTo32Bytes(ut.utils.mod(r+n,ut.CURVE.n));return ut.utils.isValidPrivateKey(i)?i:null},j$=(t,e)=>{let r=TS(t),n=_S(e),i=ut.utils._bigintTo32Bytes(ut.utils.mod(r-n,ut.CURVE.n));return ut.utils.isValidPrivateKey(i)?i:null},W$=t=>{let e=TS(t),r=ut.utils._bigintTo32Bytes(ut.CURVE.n-e);return ut.utils.isValidPrivateKey(r)?r:null},K_=(t,e,r)=>{let n=ut.Point.fromHex(t),i=_S(e),o=ut.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},G$=(t,e,r)=>{let n=ut.Point.fromHex(t),i=typeof e=="string"?e:ut.utils.bytesToHex(e),o=BigInt(`0x${i}`);return n.multiply(o).toRawBytes(r)};function w0(t,e){return t===void 0?e!==void 0?V_(e):!0:!!t}function Kc(t){try{return t()}catch{return null}}function PS(t,e){if(t.length===32!==e)return!1;try{return!!ut.Point.fromHex(t)}catch{return!1}}function Oa(t){return PS(t,!1)}function V_(t){return PS(t,!1)&&t.length===33}function Ua(t){return ut.utils.isValidPrivateKey(t)}function BS(t){return PS(t,!0)}function $$(t,e){if(!BS(t))throw new Error("Expected Point");if(!x0(e))throw new Error("Expected Tweak");return Kc(()=>{let r=K_(t,e,!0);return{parity:r[0]%2===1?1:0,xOnlyPubkey:r.slice(1)}})}function q_(t){if(!Oa(t))throw new Error("Expected Point");return t.slice(1,33)}function z_(t,e){if(!Ua(t))throw new Error("Expected Private");return Kc(()=>ut.getPublicKey(t,w0(e)))}function Y$(t){if(!Ua(t))throw new Error("Expected Private");return q_(z_(t))}function Q$(t,e){if(!Oa(t))throw new Error("Expected Point");return ut.Point.fromHex(t).toRawBytes(w0(e,t))}function X$(t,e,r){if(!Oa(t))throw new Error("Expected Point");if(!x0(e))throw new Error("Expected Tweak");return Kc(()=>G$(t,e,w0(r,t)))}function Z$(t,e,r){if(!Oa(t)||!Oa(e))throw new Error("Expected Point");return Kc(()=>{let n=ut.Point.fromHex(t),i=ut.Point.fromHex(e);return n.equals(i.negate())?null:n.add(i).toRawBytes(w0(r,t))})}function J$(t,e,r){if(!Oa(t))throw new Error("Expected Point");if(!x0(e))throw new Error("Expected Tweak");return Kc(()=>K_(t,e,w0(r,t)))}function eY(t,e){if(Ua(t)===!1)throw new Error("Expected Private");if(x0(e)===!1)throw new Error("Expected Tweak");return Kc(()=>z$(t,e))}function tY(t,e){if(Ua(t)===!1)throw new Error("Expected Private");if(x0(e)===!1)throw new Error("Expected Tweak");return Kc(()=>j$(t,e))}function rY(t){if(Ua(t)===!1)throw new Error("Expected Private");return W$(t)}function nY(t,e,r){if(!Ua(e))throw new Error("Expected Private");if(!xg(t))throw new Error("Expected Scalar");if(!F_(r))throw new Error("Expected Extra Data (32 bytes)");return ut.signSync(t,e,{der:!1,extraEntropy:r})}function iY(t,e,r=Buffer.alloc(32,0)){if(!Ua(e))throw new Error("Expected Private");if(!xg(t))throw new Error("Expected Scalar");if(!F_(r))throw new Error("Expected Extra Data (32 bytes)");return ut.schnorr.signSync(t,e,r)}function oY(t,e,r,n){if(!Oa(e))throw new Error("Expected Point");if(!M_(r))throw new Error("Expected Signature");if(!xg(t))throw new Error("Expected Scalar");return ut.verify(r,t,e,{strict:n})}function sY(t,e,r){if(!BS(e))throw new Error("Expected Point");if(!M_(r))throw new Error("Expected Signature");if(!xg(t))throw new Error("Expected Scalar");return ut.schnorr.verifySync(r,t,e)}ar.isPoint=Oa;ar.isPointCompressed=V_;ar.isPrivate=Ua;ar.isXOnlyPoint=BS;ar.pointAdd=Z$;ar.pointAddScalar=J$;ar.pointCompress=Q$;ar.pointFromScalar=z_;ar.pointMultiply=X$;ar.privateAdd=eY;ar.privateNegate=rY;ar.privateSub=tY;ar.sign=nY;ar.signSchnorr=iY;ar.verify=oY;ar.verifySchnorr=sY;ar.xOnlyPointAddTweak=$$;ar.xOnlyPointFromPoint=q_;ar.xOnlyPointFromScalar=Y$});var vi=B(La=>{"use strict";l();h();Object.defineProperty(La,"__esModule",{value:!0});La.testnet=La.regtest=La.bitcoin=void 0;La.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};La.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};La.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var NS=B(Ma=>{"use strict";l();h();Object.defineProperty(Ma,"__esModule",{value:!0});Ma.encode=Ma.decode=Ma.check=void 0;function yY(t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return!1;let e=t[3];if(e===0||5+e>=t.length||t[4+e]!==2)return!1;let r=t[5+e];return!(r===0||6+e+r!==t.length||t[4]&128||e>1&&t[4]===0&&!(t[5]&128)||t[e+6]&128||r>1&&t[e+6]===0&&!(t[e+7]&128))}Ma.check=yY;function mY(t){if(t.length<8)throw new Error("DER sequence length is too short");if(t.length>72)throw new Error("DER sequence length is too long");if(t[0]!==48)throw new Error("Expected DER sequence");if(t[1]!==t.length-2)throw new Error("DER sequence length is invalid");if(t[2]!==2)throw new Error("Expected DER integer");let e=t[3];if(e===0)throw new Error("R length is zero");if(5+e>=t.length)throw new Error("R length is too long");if(t[4+e]!==2)throw new Error("Expected DER integer (2)");let r=t[5+e];if(r===0)throw new Error("S length is zero");if(6+e+r!==t.length)throw new Error("S length is invalid");if(t[4]&128)throw new Error("R value is negative");if(e>1&&t[4]===0&&!(t[5]&128))throw new Error("R value excessively padded");if(t[e+6]&128)throw new Error("S value is negative");if(r>1&&t[e+6]===0&&!(t[e+7]&128))throw new Error("S value excessively padded");return{r:t.slice(4,4+e),s:t.slice(6+e)}}Ma.decode=mY;function gY(t,e){let r=t.length,n=e.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(t[0]&128)throw new Error("R value is negative");if(e[0]&128)throw new Error("S value is negative");if(r>1&&t[0]===0&&!(t[1]&128))throw new Error("R value excessively padded");if(n>1&&e[0]===0&&!(e[1]&128))throw new Error("S value excessively padded");let i=Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=t.length,t.copy(i,4),i[4+r]=2,i[5+r]=e.length,e.copy(i,6+r),i}Ma.encode=gY});var Ag=B(Gf=>{"use strict";l();h();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.REVERSE_OPS=Gf.OPS=void 0;var OS={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};Gf.OPS=OS;var X_={};Gf.REVERSE_OPS=X_;for(let t of Object.keys(OS)){let e=OS[t];X_[e]=t}});var J_=B(Ha=>{"use strict";l();h();Object.defineProperty(Ha,"__esModule",{value:!0});Ha.decode=Ha.encode=Ha.encodingLength=void 0;var Fa=Ag();function Z_(t){return t<Fa.OPS.OP_PUSHDATA1?1:t<=255?2:t<=65535?3:5}Ha.encodingLength=Z_;function bY(t,e,r){let n=Z_(e);return n===1?t.writeUInt8(e,r):n===2?(t.writeUInt8(Fa.OPS.OP_PUSHDATA1,r),t.writeUInt8(e,r+1)):n===3?(t.writeUInt8(Fa.OPS.OP_PUSHDATA2,r),t.writeUInt16LE(e,r+1)):(t.writeUInt8(Fa.OPS.OP_PUSHDATA4,r),t.writeUInt32LE(e,r+1)),n}Ha.encode=bY;function xY(t,e){let r=t.readUInt8(e),n,i;if(r<Fa.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===Fa.OPS.OP_PUSHDATA1){if(e+2>t.length)return null;n=t.readUInt8(e+1),i=2}else if(r===Fa.OPS.OP_PUSHDATA2){if(e+3>t.length)return null;n=t.readUInt16LE(e+1),i=3}else{if(e+5>t.length)return null;if(r!==Fa.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=t.readUInt32LE(e+1),i=5}return{opcode:r,number:n,size:i}}Ha.decode=xY});var eP=B($f=>{"use strict";l();h();Object.defineProperty($f,"__esModule",{value:!0});$f.encode=$f.decode=void 0;function wY(t,e,r){e=e||4,r=r===void 0?!0:r;let n=t.length;if(n===0)return 0;if(n>e)throw new TypeError("Script number overflow");if(r&&!(t[n-1]&127)&&(n<=1||!(t[n-2]&128)))throw new Error("Non-minimally encoded script number");if(n===5){let o=t.readUInt32LE(0),s=t.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=t[o]<<8*o;return t[n-1]&128?-(i&~(128<<8*(n-1))):i}$f.decode=wY;function AY(t){return t>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0}function SY(t){let e=Math.abs(t),r=AY(e),n=Buffer.allocUnsafe(r),i=t<0;for(let o=0;o<r;++o)n.writeUInt8(e&255,o),e>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}$f.encode=SY});var Sg=B((q2e,tP)=>{l();h();var S0={Array:function(t){return t!=null&&t.constructor===Array},Boolean:function(t){return typeof t=="boolean"},Function:function(t){return typeof t=="function"},Nil:function(t){return t==null},Number:function(t){return typeof t=="number"},Object:function(t){return typeof t=="object"},String:function(t){return typeof t=="string"},"":function(){return!0}};S0.Null=S0.Nil;for(US in S0)S0[US].toJSON=function(t){return t}.bind(null,US);var US;tP.exports=S0});var MS=B((W2e,iP)=>{l();h();var Vc=Sg();function rP(t){return t.name||t.toString().match(/function (.*?)\s*\(/)[1]}function RS(t){return Vc.Nil(t)?"":rP(t.constructor)}function vY(t){return Vc.Function(t)?"":Vc.String(t)?JSON.stringify(t):t&&Vc.Object(t)?"":t}function LS(t,e){Error.captureStackTrace&&Error.captureStackTrace(t,e)}function vg(t){return Vc.Function(t)?t.toJSON?t.toJSON():rP(t):Vc.Array(t)?"Array":t&&Vc.Object(t)?"Object":t!==void 0?t:""}function nP(t,e,r){var n=vY(e);return"Expected "+vg(t)+", got"+(r!==""?" "+r:"")+(n!==""?" "+n:"")}function os(t,e,r){r=r||RS(e),this.message=nP(t,e,r),LS(this,os),this.__type=t,this.__value=e,this.__valueTypeName=r}os.prototype=Object.create(Error.prototype);os.prototype.constructor=os;function EY(t,e,r,n,i){var o='" of type ';return e==="key"&&(o='" with key type '),nP('property "'+vg(r)+o+vg(t),n,i)}function Yf(t,e,r,n,i){t?(i=i||RS(n),this.message=EY(t,r,e,n,i)):this.message='Unexpected property "'+e+'"',LS(this,os),this.__label=r,this.__property=e,this.__type=t,this.__value=n,this.__valueTypeName=i}Yf.prototype=Object.create(Error.prototype);Yf.prototype.constructor=os;function IY(t,e){return new os(t,{},e)}function kY(t,e,r){return t instanceof Yf?(e=e+"."+t.__property,t=new Yf(t.__type,e,t.__label,t.__value,t.__valueTypeName)):t instanceof os&&(t=new Yf(t.__type,e,r,t.__value,t.__valueTypeName)),LS(t),t}iP.exports={TfTypeError:os,TfPropertyTypeError:Yf,tfCustomError:IY,tfSubError:kY,tfJSON:vg,getValueTypeName:RS}});var cP=B((Y2e,aP)=>{l();h();var VS=Sg(),TY=MS();function oP(t){return Buffer.isBuffer(t)}function sP(t){return typeof t=="string"&&/^([0-9a-f]{2})+$/i.test(t)}function Eg(t,e){var r=t.toJSON();function n(i){if(!t(i))return!1;if(i.length===e)return!0;throw TY.tfCustomError(r+"(Length: "+e+")",r+"(Length: "+i.length+")")}return n.toJSON=function(){return r},n}var _Y=Eg.bind(null,VS.Array),PY=Eg.bind(null,oP),BY=Eg.bind(null,sP),CY=Eg.bind(null,VS.String);function DY(t,e,r){r=r||VS.Number;function n(i,o){return r(i,o)&&i>t&&i<e}return n.toJSON=function(){return`${r.toJSON()} between [${t}, ${e}]`},n}var HS=Math.pow(2,53)-1;function NY(t){return typeof t=="number"&&isFinite(t)}function OY(t){return t<<24>>24===t}function UY(t){return t<<16>>16===t}function RY(t){return(t|0)===t}function LY(t){return typeof t=="number"&&t>=-HS&&t<=HS&&Math.floor(t)===t}function MY(t){return(t&255)===t}function FY(t){return(t&65535)===t}function HY(t){return t>>>0===t}function KY(t){return typeof t=="number"&&t>=0&&t<=HS&&Math.floor(t)===t}var KS={ArrayN:_Y,Buffer:oP,BufferN:PY,Finite:NY,Hex:sP,HexN:BY,Int8:OY,Int16:UY,Int32:RY,Int53:LY,Range:DY,StringN:CY,UInt8:MY,UInt16:FY,UInt32:HY,UInt53:KY};for(FS in KS)KS[FS].toJSON=function(t){return t}.bind(null,FS);var FS;aP.exports=KS});var hP=B((Z2e,lP)=>{l();h();var E0=MS(),Mr=Sg(),ss=E0.tfJSON,fP=E0.TfTypeError,dP=E0.TfPropertyTypeError,v0=E0.tfSubError,VY=E0.getValueTypeName,as={arrayOf:function(e,r){e=Eo(e),r=r||{};function n(i,o){return!Mr.Array(i)||Mr.Nil(i)||r.minLength!==void 0&&i.length<r.minLength||r.maxLength!==void 0&&i.length>r.maxLength||r.length!==void 0&&i.length!==r.length?!1:i.every(function(s,a){try{return gn(e,s,o)}catch(c){throw v0(c,a)}})}return n.toJSON=function(){var i="["+ss(e)+"]";return r.length!==void 0?i+="{"+r.length+"}":(r.minLength!==void 0||r.maxLength!==void 0)&&(i+="{"+(r.minLength===void 0?0:r.minLength)+","+(r.maxLength===void 0?1/0:r.maxLength)+"}"),i},n},maybe:function t(e){e=Eo(e);function r(n,i){return Mr.Nil(n)||e(n,i,t)}return r.toJSON=function(){return"?"+ss(e)},r},map:function(e,r){e=Eo(e),r&&(r=Eo(r));function n(i,o){if(!Mr.Object(i)||Mr.Nil(i))return!1;for(var s in i){try{r&&gn(r,s,o)}catch(c){throw v0(c,s,"key")}try{var a=i[s];gn(e,a,o)}catch(c){throw v0(c,s)}}return!0}return r?n.toJSON=function(){return"{"+ss(r)+": "+ss(e)+"}"}:n.toJSON=function(){return"{"+ss(e)+"}"},n},object:function(e){var r={};for(var n in e)r[n]=Eo(e[n]);function i(o,s){if(!Mr.Object(o)||Mr.Nil(o))return!1;var a;try{for(a in r){var c=r[a],u=o[a];gn(c,u,s)}}catch(d){throw v0(d,a)}if(s){for(a in o)if(!r[a])throw new dP(void 0,a)}return!0}return i.toJSON=function(){return ss(r)},i},anyOf:function(){var e=[].slice.call(arguments).map(Eo);function r(n,i){return e.some(function(o){try{return gn(o,n,i)}catch{return!1}})}return r.toJSON=function(){return e.map(ss).join("|")},r},allOf:function(){var e=[].slice.call(arguments).map(Eo);function r(n,i){return e.every(function(o){try{return gn(o,n,i)}catch{return!1}})}return r.toJSON=function(){return e.map(ss).join(" & ")},r},quacksLike:function(e){function r(n){return e===VY(n)}return r.toJSON=function(){return e},r},tuple:function(){var e=[].slice.call(arguments).map(Eo);function r(n,i){return Mr.Nil(n)||Mr.Nil(n.length)||i&&n.length!==e.length?!1:e.every(function(o,s){try{return gn(o,n[s],i)}catch(a){throw v0(a,s)}})}return r.toJSON=function(){return"("+e.map(ss).join(", ")+")"},r},value:function(e){function r(n){return n===e}return r.toJSON=function(){return e},r}};as.oneOf=as.anyOf;function Eo(t){if(Mr.String(t))return t[0]==="?"?as.maybe(t.slice(1)):Mr[t]||as.quacksLike(t);if(t&&Mr.Object(t)){if(Mr.Array(t)){if(t.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return as.arrayOf(t[0])}return as.object(t)}else if(Mr.Function(t))return t;return as.value(t)}function gn(t,e,r,n){if(Mr.Function(t)){if(t(e,r))return!0;throw new fP(n||t,e)}return gn(Eo(t),e,r)}for(cs in Mr)gn[cs]=Mr[cs];var cs;for(cs in as)gn[cs]=as[cs];var uP=cP();for(cs in uP)gn[cs]=uP[cs];gn.compile=Eo;gn.TfTypeError=fP;gn.TfPropertyTypeError=dP;lP.exports=gn});var Fr=B(J=>{"use strict";l();h();Object.defineProperty(J,"__esModule",{value:!0});J.oneOf=J.Null=J.BufferN=J.Function=J.UInt32=J.UInt8=J.tuple=J.maybe=J.Hex=J.Buffer=J.String=J.Boolean=J.Array=J.Number=J.Hash256bit=J.Hash160bit=J.Buffer256bit=J.isTaptree=J.isTapleaf=J.TAPLEAF_VERSION_MASK=J.Network=J.ECPoint=J.Satoshi=J.Signer=J.BIP32Path=J.UInt31=J.isPoint=J.typeforce=void 0;var Ig=Pi();J.typeforce=hP();var pP=Ig.Buffer.alloc(32,0),yP=Ig.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function qY(t){if(!Ig.Buffer.isBuffer(t)||t.length<33)return!1;let e=t[0],r=t.slice(1,33);if(r.compare(pP)===0||r.compare(yP)>=0)return!1;if((e===2||e===3)&&t.length===33)return!0;let n=t.slice(33);return n.compare(pP)===0||n.compare(yP)>=0?!1:e===4&&t.length===65}J.isPoint=qY;var zY=Math.pow(2,31)-1;function jY(t){return J.typeforce.UInt32(t)&&t<=zY}J.UInt31=jY;function mP(t){return J.typeforce.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}J.BIP32Path=mP;mP.toJSON=()=>"BIP32 derivation path";function WY(t){return(J.typeforce.Buffer(t.publicKey)||typeof t.getPublicKey=="function")&&typeof t.sign=="function"}J.Signer=WY;var GY=21*1e14;function $Y(t){return J.typeforce.UInt53(t)&&t<=GY}J.Satoshi=$Y;J.ECPoint=J.typeforce.quacksLike("Point");J.Network=J.typeforce.compile({messagePrefix:J.typeforce.oneOf(J.typeforce.Buffer,J.typeforce.String),bip32:{public:J.typeforce.UInt32,private:J.typeforce.UInt32},pubKeyHash:J.typeforce.UInt8,scriptHash:J.typeforce.UInt8,wif:J.typeforce.UInt8});J.TAPLEAF_VERSION_MASK=254;function gP(t){return!t||!("output"in t)||!Ig.Buffer.isBuffer(t.output)?!1:t.version!==void 0?(t.version&J.TAPLEAF_VERSION_MASK)===t.version:!0}J.isTapleaf=gP;function bP(t){return(0,J.Array)(t)?t.length!==2?!1:t.every(e=>bP(e)):gP(t)}J.isTaptree=bP;J.Buffer256bit=J.typeforce.BufferN(32);J.Hash160bit=J.typeforce.BufferN(20);J.Hash256bit=J.typeforce.BufferN(32);J.Number=J.typeforce.Number;J.Array=J.typeforce.Array;J.Boolean=J.typeforce.Boolean;J.String=J.typeforce.String;J.Buffer=J.typeforce.Buffer;J.Hex=J.typeforce.Hex;J.maybe=J.typeforce.maybe;J.tuple=J.typeforce.tuple;J.UInt8=J.typeforce.UInt8;J.UInt32=J.typeforce.UInt32;J.Function=J.typeforce.Function;J.BufferN=J.typeforce.BufferN;J.Null=J.typeforce.Null;J.oneOf=J.typeforce.oneOf});var vP=B(Xf=>{"use strict";l();h();Object.defineProperty(Xf,"__esModule",{value:!0});Xf.encode=Xf.decode=void 0;var{Buffer:Qf}=Pi(),SP=NS(),qS=Fr(),{typeforce:YY}=qS,xP=Qf.alloc(1,0);function wP(t){let e=0;for(;t[e]===0;)++e;return e===t.length?xP:(t=t.slice(e),t[0]&128?Qf.concat([xP,t],1+t.length):t)}function AP(t){t[0]===0&&(t=t.slice(1));let e=Qf.alloc(32,0),r=Math.max(0,32-t.length);return t.copy(e,r),e}function QY(t){let e=t.readUInt8(t.length-1),r=e&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);let n=SP.decode(t.slice(0,-1)),i=AP(n.r),o=AP(n.s);return{signature:Qf.concat([i,o],64),hashType:e}}Xf.decode=QY;function XY(t,e){YY({signature:qS.BufferN(64),hashType:qS.UInt8},{signature:t,hashType:e});let r=e&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+e);let n=Qf.allocUnsafe(1);n.writeUInt8(e,0);let i=wP(t.slice(0,32)),o=wP(t.slice(32,64));return Qf.concat([SP.encode(i,o),n])}Xf.encode=XY});var bn=B(bt=>{"use strict";l();h();Object.defineProperty(bt,"__esModule",{value:!0});bt.signature=bt.number=bt.isCanonicalScriptSignature=bt.isDefinedHashType=bt.isCanonicalPubKey=bt.toStack=bt.fromASM=bt.toASM=bt.decompile=bt.compile=bt.countNonPushOnlyOPs=bt.isPushOnly=bt.OPS=void 0;var ZY=NS(),On=Ag();Object.defineProperty(bt,"OPS",{enumerable:!0,get:function(){return On.OPS}});var zS=J_(),EP=eP(),JY=vP(),Io=Fr(),{typeforce:I0}=Io,IP=On.OPS.OP_RESERVED;function eQ(t){return Io.Number(t)&&(t===On.OPS.OP_0||t>=On.OPS.OP_1&&t<=On.OPS.OP_16||t===On.OPS.OP_1NEGATE)}function kP(t){return Io.Buffer(t)||eQ(t)}function TP(t){return Io.Array(t)&&t.every(kP)}bt.isPushOnly=TP;function tQ(t){return t.length-t.filter(kP).length}bt.countNonPushOnlyOPs=tQ;function kg(t){if(t.length===0)return On.OPS.OP_0;if(t.length===1){if(t[0]>=1&&t[0]<=16)return IP+t[0];if(t[0]===129)return On.OPS.OP_1NEGATE}}function _P(t){return Buffer.isBuffer(t)}function rQ(t){return Io.Array(t)}function Tg(t){return Buffer.isBuffer(t)}function PP(t){if(_P(t))return t;I0(Io.Array,t);let e=t.reduce((i,o)=>Tg(o)?o.length===1&&kg(o)!==void 0?i+1:i+zS.encodingLength(o.length)+o.length:i+1,0),r=Buffer.allocUnsafe(e),n=0;if(t.forEach(i=>{if(Tg(i)){let o=kg(i);if(o!==void 0){r.writeUInt8(o,n),n+=1;return}n+=zS.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}bt.compile=PP;function jS(t){if(rQ(t))return t;I0(Io.Buffer,t);let e=[],r=0;for(;r<t.length;){let n=t[r];if(n>On.OPS.OP_0&&n<=On.OPS.OP_PUSHDATA4){let i=zS.decode(t,r);if(i===null||(r+=i.size,r+i.number>t.length))return null;let o=t.slice(r,r+i.number);r+=i.number;let s=kg(o);s!==void 0?e.push(s):e.push(o)}else e.push(n),r+=1}return e}bt.decompile=jS;function nQ(t){return _P(t)&&(t=jS(t)),t.map(e=>{if(Tg(e)){let r=kg(e);if(r===void 0)return e.toString("hex");e=r}return On.REVERSE_OPS[e]}).join(" ")}bt.toASM=nQ;function iQ(t){return I0(Io.String,t),PP(t.split(" ").map(e=>On.OPS[e]!==void 0?On.OPS[e]:(I0(Io.Hex,e),Buffer.from(e,"hex"))))}bt.fromASM=iQ;function oQ(t){return t=jS(t),I0(TP,t),t.map(e=>Tg(e)?e:e===On.OPS.OP_0?Buffer.allocUnsafe(0):EP.encode(e-IP))}bt.toStack=oQ;function sQ(t){return Io.isPoint(t)}bt.isCanonicalPubKey=sQ;function BP(t){let e=t&-129;return e>0&&e<4}bt.isDefinedHashType=BP;function aQ(t){return!Buffer.isBuffer(t)||!BP(t[t.length-1])?!1:ZY.check(t.slice(0,-1))}bt.isCanonicalScriptSignature=aQ;bt.number=EP;bt.signature=JY});var us=B(Zf=>{"use strict";l();h();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.value=Zf.prop=void 0;function cQ(t,e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[e]=n,n},set(n){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}Zf.prop=cQ;function uQ(t){let e;return()=>(e!==void 0||(e=t()),e)}Zf.value=uQ});var NP=B(Pg=>{"use strict";l();h();Object.defineProperty(Pg,"__esModule",{value:!0});Pg.p2data=void 0;var fQ=vi(),_g=bn(),fs=Fr(),CP=us(),DP=_g.OPS;function dQ(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.equals(e[n]))}function lQ(t,e){if(!t.data&&!t.output)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,fs.typeforce)({network:fs.typeforce.maybe(fs.typeforce.Object),output:fs.typeforce.maybe(fs.typeforce.Buffer),data:fs.typeforce.maybe(fs.typeforce.arrayOf(fs.typeforce.Buffer))},t);let n={name:"embed",network:t.network||fQ.bitcoin};if(CP.prop(n,"output",()=>{if(t.data)return _g.compile([DP.OP_RETURN].concat(t.data))}),CP.prop(n,"data",()=>{if(t.output)return _g.decompile(t.output).slice(1)}),e.validate&&t.output){let i=_g.decompile(t.output);if(i[0]!==DP.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(fs.typeforce.Buffer))throw new TypeError("Output is invalid");if(t.data&&!dQ(t.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,t)}Pg.p2data=lQ});var UP=B(Cg=>{"use strict";l();h();Object.defineProperty(Cg,"__esModule",{value:!0});Cg.p2ms=void 0;var hQ=vi(),Jf=bn(),yr=Fr(),Ka=us(),ed=Jf.OPS,Bg=ed.OP_RESERVED;function OP(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.equals(e[n]))}function pQ(t,e){if(!t.input&&!t.output&&!(t.pubkeys&&t.m!==void 0)&&!t.signatures)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{});function r(c){return Jf.isCanonicalScriptSignature(c)||(e.allowIncomplete&&c===ed.OP_0)!==void 0}(0,yr.typeforce)({network:yr.typeforce.maybe(yr.typeforce.Object),m:yr.typeforce.maybe(yr.typeforce.Number),n:yr.typeforce.maybe(yr.typeforce.Number),output:yr.typeforce.maybe(yr.typeforce.Buffer),pubkeys:yr.typeforce.maybe(yr.typeforce.arrayOf(yr.isPoint)),signatures:yr.typeforce.maybe(yr.typeforce.arrayOf(r)),input:yr.typeforce.maybe(yr.typeforce.Buffer)},t);let i={network:t.network||hQ.bitcoin},o=[],s=!1;function a(c){s||(s=!0,o=Jf.decompile(c),i.m=o[0]-Bg,i.n=o[o.length-2]-Bg,i.pubkeys=o.slice(1,-2))}if(Ka.prop(i,"output",()=>{if(t.m&&i.n&&t.pubkeys)return Jf.compile([].concat(Bg+t.m,t.pubkeys,Bg+i.n,ed.OP_CHECKMULTISIG))}),Ka.prop(i,"m",()=>{if(i.output)return a(i.output),i.m}),Ka.prop(i,"n",()=>{if(i.pubkeys)return i.pubkeys.length}),Ka.prop(i,"pubkeys",()=>{if(t.output)return a(t.output),i.pubkeys}),Ka.prop(i,"signatures",()=>{if(t.input)return Jf.decompile(t.input).slice(1)}),Ka.prop(i,"input",()=>{if(t.signatures)return Jf.compile([ed.OP_0].concat(t.signatures))}),Ka.prop(i,"witness",()=>{if(i.input)return[]}),Ka.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),e.validate){if(t.output){if(a(t.output),!yr.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!yr.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==ed.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,yr.isPoint)(c)))throw new TypeError("Output is invalid");if(t.m!==void 0&&t.m!==i.m)throw new TypeError("m mismatch");if(t.n!==void 0&&t.n!==i.n)throw new TypeError("n mismatch");if(t.pubkeys&&!OP(t.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(t.pubkeys){if(t.n!==void 0&&t.n!==t.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=t.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(t.signatures){if(t.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(t.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(t.input){if(t.input[0]!==ed.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(t.signatures&&!OP(t.signatures,i.signatures))throw new TypeError("Signature mismatch");if(t.m!==void 0&&t.m!==t.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,t)}Cg.p2ms=pQ});var LP=B(Dg=>{"use strict";l();h();Object.defineProperty(Dg,"__esModule",{value:!0});Dg.p2pk=void 0;var yQ=vi(),rd=bn(),Wi=Fr(),td=us(),RP=rd.OPS;function mQ(t,e){if(!t.input&&!t.output&&!t.pubkey&&!t.input&&!t.signature)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,Wi.typeforce)({network:Wi.typeforce.maybe(Wi.typeforce.Object),output:Wi.typeforce.maybe(Wi.typeforce.Buffer),pubkey:Wi.typeforce.maybe(Wi.isPoint),signature:Wi.typeforce.maybe(rd.isCanonicalScriptSignature),input:Wi.typeforce.maybe(Wi.typeforce.Buffer)},t);let r=td.value(()=>rd.decompile(t.input)),i={name:"p2pk",network:t.network||yQ.bitcoin};if(td.prop(i,"output",()=>{if(t.pubkey)return rd.compile([t.pubkey,RP.OP_CHECKSIG])}),td.prop(i,"pubkey",()=>{if(t.output)return t.output.slice(1,-1)}),td.prop(i,"signature",()=>{if(t.input)return r()[0]}),td.prop(i,"input",()=>{if(t.signature)return rd.compile([t.signature])}),td.prop(i,"witness",()=>{if(i.input)return[]}),e.validate){if(t.output){if(t.output[t.output.length-1]!==RP.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Wi.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(t.pubkey&&!t.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(t.signature&&t.input&&!t.input.equals(i.input))throw new TypeError("Signature mismatch");if(t.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!rd.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,t)}Dg.p2pk=mQ});var VP=B(xn=>{"use strict";l();h();Object.defineProperty(xn,"__esModule",{value:!0});xn.output=xn.exists=xn.hash=xn.bytes=xn.bool=xn.number=void 0;function Ng(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}xn.number=Ng;function MP(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}xn.bool=MP;function WS(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}xn.bytes=WS;function FP(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ng(t.outputLen),Ng(t.blockLen)}xn.hash=FP;function HP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}xn.exists=HP;function KP(t,e){WS(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}xn.output=KP;var gQ={number:Ng,bool:MP,bytes:WS,hash:FP,exists:HP,output:KP};xn.default=gQ});var qP=B(Og=>{"use strict";l();h();Object.defineProperty(Og,"__esModule",{value:!0});Og.crypto=void 0;Og.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var k0=B(Ve=>{"use strict";l();h();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.randomBytes=Ve.wrapConstructorWithOpts=Ve.wrapConstructor=Ve.checkOpts=Ve.Hash=Ve.concatBytes=Ve.toBytes=Ve.utf8ToBytes=Ve.asyncLoop=Ve.nextTick=Ve.hexToBytes=Ve.bytesToHex=Ve.isLE=Ve.rotr=Ve.createView=Ve.u32=Ve.u8=void 0;var Ug=qP(),bQ=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Ve.u8=bQ;var xQ=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));Ve.u32=xQ;var wQ=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);Ve.createView=wQ;var AQ=(t,e)=>t<<32-e|t>>>e;Ve.rotr=AQ;Ve.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ve.isLE)throw new Error("Non little-endian hardware is not supported");var SQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vQ(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=SQ[t[r]];return e}Ve.bytesToHex=vQ;function EQ(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}Ve.hexToBytes=EQ;var IQ=async()=>{};Ve.nextTick=IQ;async function kQ(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let o=Date.now()-n;o>=0&&o<e||(await(0,Ve.nextTick)(),n+=o)}}Ve.asyncLoop=kQ;function zP(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}Ve.utf8ToBytes=zP;function $S(t){if(typeof t=="string"&&(t=zP(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Ve.toBytes=$S;function TQ(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}Ve.concatBytes=TQ;var GS=class{clone(){return this._cloneInto()}};Ve.Hash=GS;var _Q=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function PQ(t,e){if(e!==void 0&&(typeof e!="object"||!_Q(e)))throw new TypeError("Options should be object or undefined");return Object.assign(t,e)}Ve.checkOpts=PQ;function BQ(t){let e=n=>t().update($S(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}Ve.wrapConstructor=BQ;function CQ(t){let e=(n,i)=>t(i).update($S(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}Ve.wrapConstructorWithOpts=CQ;function DQ(t=32){if(Ug.crypto.web)return Ug.crypto.web.getRandomValues(new Uint8Array(t));if(Ug.crypto.node)return new Uint8Array(Ug.crypto.node.randomBytes(t).buffer);throw new Error("The environment doesn't have randomBytes function")}Ve.randomBytes=DQ});var Lg=B(Rg=>{"use strict";l();h();Object.defineProperty(Rg,"__esModule",{value:!0});Rg.SHA2=void 0;var YS=VP(),T0=k0();function NQ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var QS=class extends T0.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,T0.createView)(this.buffer)}update(e){YS.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,T0.toBytes)(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,T0.createView)(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){YS.default.exists(this),YS.default.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;NQ(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,T0.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};Rg.SHA2=QS});var $P=B(nd=>{"use strict";l();h();Object.defineProperty(nd,"__esModule",{value:!0});nd.ripemd160=nd.RIPEMD160=void 0;var OQ=Lg(),UQ=k0(),RQ=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),WP=Uint8Array.from({length:16},(t,e)=>e),LQ=WP.map(t=>(9*t+5)%16),XS=[WP],ZS=[LQ];for(let t=0;t<4;t++)for(let e of[XS,ZS])e.push(e[t].map(r=>RQ[r]));var GP=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),MQ=XS.map((t,e)=>t.map(r=>GP[e][r])),FQ=ZS.map((t,e)=>t.map(r=>GP[e][r])),HQ=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),KQ=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Mg=(t,e)=>t<<e|t>>>32-e;function jP(t,e,r,n){return t===0?e^r^n:t===1?e&r|~e&n:t===2?(e|~r)^n:t===3?e&n|r&~n:e^(r|~n)}var Fg=new Uint32Array(16),Hg=class extends OQ.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:r,h2:n,h3:i,h4:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.h0=e|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(e,r){for(let m=0;m<16;m++,r+=4)Fg[m]=e.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,d=u,f=this.h4|0,p=f;for(let m=0;m<5;m++){let g=4-m,x=HQ[m],w=KQ[m],S=XS[m],T=ZS[m],A=MQ[m],_=FQ[m];for(let C=0;C<16;C++){let W=Mg(n+jP(m,o,a,u)+Fg[S[C]]+x,A[C])+f|0;n=f,f=u,u=Mg(a,10)|0,a=o,o=W}for(let C=0;C<16;C++){let W=Mg(i+jP(g,s,c,d)+Fg[T[C]]+w,_[C])+p|0;i=p,p=d,d=Mg(c,10)|0,c=s,s=W}}this.set(this.h1+a+d|0,this.h2+u+p|0,this.h3+f+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){Fg.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};nd.RIPEMD160=Hg;nd.ripemd160=(0,UQ.wrapConstructor)(()=>new Hg)});var YP=B(Kg=>{"use strict";l();h();Object.defineProperty(Kg,"__esModule",{value:!0});Kg.sha1=void 0;var VQ=Lg(),qQ=k0(),JS=(t,e)=>t<<e|t>>>32-e>>>0,zQ=(t,e,r)=>t&e^~t&r,jQ=(t,e,r)=>t&e^t&r^e&r,_0=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Va=new Uint32Array(80),ev=class extends VQ.SHA2{constructor(){super(64,20,8,!1),this.A=_0[0]|0,this.B=_0[1]|0,this.C=_0[2]|0,this.D=_0[3]|0,this.E=_0[4]|0}get(){let{A:e,B:r,C:n,D:i,E:o}=this;return[e,r,n,i,o]}set(e,r,n,i,o){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(e,r){for(let c=0;c<16;c++,r+=4)Va[c]=e.getUint32(r,!1);for(let c=16;c<80;c++)Va[c]=JS(Va[c-3]^Va[c-8]^Va[c-14]^Va[c-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let c=0;c<80;c++){let u,d;c<20?(u=zQ(i,o,s),d=1518500249):c<40?(u=i^o^s,d=1859775393):c<60?(u=jQ(i,o,s),d=2400959708):(u=i^o^s,d=3395469782);let f=JS(n,5)+u+a+d+Va[c]|0;a=s,s=o,o=JS(i,30),i=n,n=f}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Va.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};Kg.sha1=(0,qQ.wrapConstructor)(()=>new ev)});var QP=B(id=>{"use strict";l();h();Object.defineProperty(id,"__esModule",{value:!0});id.sha224=id.sha256=void 0;var WQ=Lg(),Ei=k0(),GQ=(t,e,r)=>t&e^~t&r,$Q=(t,e,r)=>t&e^t&r^e&r,YQ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),za=new Uint32Array(64),Vg=class extends WQ.SHA2{constructor(){super(64,32,8,!1),this.A=qa[0]|0,this.B=qa[1]|0,this.C=qa[2]|0,this.D=qa[3]|0,this.E=qa[4]|0,this.F=qa[5]|0,this.G=qa[6]|0,this.H=qa[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)za[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let p=za[f-15],m=za[f-2],g=(0,Ei.rotr)(p,7)^(0,Ei.rotr)(p,18)^p>>>3,x=(0,Ei.rotr)(m,17)^(0,Ei.rotr)(m,19)^m>>>10;za[f]=x+za[f-7]+g+za[f-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){let p=(0,Ei.rotr)(a,6)^(0,Ei.rotr)(a,11)^(0,Ei.rotr)(a,25),m=d+p+GQ(a,c,u)+YQ[f]+za[f]|0,x=((0,Ei.rotr)(n,2)^(0,Ei.rotr)(n,13)^(0,Ei.rotr)(n,22))+$Q(n,i,o)|0;d=u,u=c,c=a,a=s+m|0,s=o,o=i,i=n,n=m+x|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,i,o,s,a,c,u,d)}roundClean(){za.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},tv=class extends Vg{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};id.sha256=(0,Ei.wrapConstructor)(()=>new Vg);id.sha224=(0,Ei.wrapConstructor)(()=>new tv)});var ko=B(mr=>{"use strict";l();h();Object.defineProperty(mr,"__esModule",{value:!0});mr.taggedHash=mr.TAGGED_HASH_PREFIXES=mr.TAGS=mr.hash256=mr.hash160=mr.sha256=mr.sha1=mr.ripemd160=void 0;var{Buffer:wn}=Pi(),XP=$P(),QQ=YP(),qg=QP();function XQ(t){return wn.from((0,XP.ripemd160)(Uint8Array.from(t)))}mr.ripemd160=XQ;function ZQ(t){return wn.from((0,QQ.sha1)(Uint8Array.from(t)))}mr.sha1=ZQ;function ZP(t){return wn.from((0,qg.sha256)(Uint8Array.from(t)))}mr.sha256=ZP;function JQ(t){return wn.from((0,XP.ripemd160)((0,qg.sha256)(Uint8Array.from(t))))}mr.hash160=JQ;function eX(t){return wn.from((0,qg.sha256)((0,qg.sha256)(Uint8Array.from(t))))}mr.hash256=eX;mr.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];mr.TAGGED_HASH_PREFIXES={"BIP0340/challenge":wn.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":wn.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":wn.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:wn.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:wn.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:wn.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:wn.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":wn.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":wn.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function tX(t,e){return ZP(wn.concat([mr.TAGGED_HASH_PREFIXES[t],e]))}mr.taggedHash=tX});var e7=B(zg=>{"use strict";l();h();Object.defineProperty(zg,"__esModule",{value:!0});zg.p2pkh=void 0;var rv=ko(),rX=vi(),od=bn(),An=Fr(),ds=us(),JP=jf(),ja=od.OPS;function nX(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,An.typeforce)({network:An.typeforce.maybe(An.typeforce.Object),address:An.typeforce.maybe(An.typeforce.String),hash:An.typeforce.maybe(An.typeforce.BufferN(20)),output:An.typeforce.maybe(An.typeforce.BufferN(25)),pubkey:An.typeforce.maybe(An.isPoint),signature:An.typeforce.maybe(od.isCanonicalScriptSignature),input:An.typeforce.maybe(An.typeforce.Buffer)},t);let r=ds.value(()=>{let s=Buffer.from(JP.decode(t.address)),a=s.readUInt8(0),c=s.slice(1);return{version:a,hash:c}}),n=ds.value(()=>od.decompile(t.input)),i=t.network||rX.bitcoin,o={name:"p2pkh",network:i};if(ds.prop(o,"address",()=>{if(!o.hash)return;let s=Buffer.allocUnsafe(21);return s.writeUInt8(i.pubKeyHash,0),o.hash.copy(s,1),JP.encode(s)}),ds.prop(o,"hash",()=>{if(t.output)return t.output.slice(3,23);if(t.address)return r().hash;if(t.pubkey||o.pubkey)return rv.hash160(t.pubkey||o.pubkey)}),ds.prop(o,"output",()=>{if(o.hash)return od.compile([ja.OP_DUP,ja.OP_HASH160,o.hash,ja.OP_EQUALVERIFY,ja.OP_CHECKSIG])}),ds.prop(o,"pubkey",()=>{if(t.input)return n()[1]}),ds.prop(o,"signature",()=>{if(t.input)return n()[0]}),ds.prop(o,"input",()=>{if(t.pubkey&&t.signature)return od.compile([t.signature,t.pubkey])}),ds.prop(o,"witness",()=>{if(o.input)return[]}),e.validate){let s=Buffer.from([]);if(t.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");s=r().hash}if(t.hash){if(s.length>0&&!s.equals(t.hash))throw new TypeError("Hash mismatch");s=t.hash}if(t.output){if(t.output.length!==25||t.output[0]!==ja.OP_DUP||t.output[1]!==ja.OP_HASH160||t.output[2]!==20||t.output[23]!==ja.OP_EQUALVERIFY||t.output[24]!==ja.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=t.output.slice(3,23);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(t.pubkey){let a=rv.hash160(t.pubkey);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(t.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!od.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,An.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=rv.hash160(a[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,t)}zg.p2pkh=nX});var n7=B(jg=>{"use strict";l();h();Object.defineProperty(jg,"__esModule",{value:!0});jg.p2sh=void 0;var t7=ko(),iX=vi(),_o=bn(),Mt=Fr(),To=us(),r7=jf(),P0=_o.OPS;function oX(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.equals(e[n]))}function sX(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,Mt.typeforce)({network:Mt.typeforce.maybe(Mt.typeforce.Object),address:Mt.typeforce.maybe(Mt.typeforce.String),hash:Mt.typeforce.maybe(Mt.typeforce.BufferN(20)),output:Mt.typeforce.maybe(Mt.typeforce.BufferN(23)),redeem:Mt.typeforce.maybe({network:Mt.typeforce.maybe(Mt.typeforce.Object),output:Mt.typeforce.maybe(Mt.typeforce.Buffer),input:Mt.typeforce.maybe(Mt.typeforce.Buffer),witness:Mt.typeforce.maybe(Mt.typeforce.arrayOf(Mt.typeforce.Buffer))}),input:Mt.typeforce.maybe(Mt.typeforce.Buffer),witness:Mt.typeforce.maybe(Mt.typeforce.arrayOf(Mt.typeforce.Buffer))},t);let r=t.network;r||(r=t.redeem&&t.redeem.network||iX.bitcoin);let n={network:r},i=To.value(()=>{let a=Buffer.from(r7.decode(t.address)),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),o=To.value(()=>_o.decompile(t.input)),s=To.value(()=>{let a=o(),c=a[a.length-1];return{network:r,output:c===P0.OP_FALSE?Buffer.from([]):c,input:_o.compile(a.slice(0,-1)),witness:t.witness||[]}});if(To.prop(n,"address",()=>{if(!n.hash)return;let a=Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),r7.encode(a)}),To.prop(n,"hash",()=>{if(t.output)return t.output.slice(2,22);if(t.address)return i().hash;if(n.redeem&&n.redeem.output)return t7.hash160(n.redeem.output)}),To.prop(n,"output",()=>{if(n.hash)return _o.compile([P0.OP_HASH160,n.hash,P0.OP_EQUAL])}),To.prop(n,"redeem",()=>{if(t.input)return s()}),To.prop(n,"input",()=>{if(!(!t.redeem||!t.redeem.input||!t.redeem.output))return _o.compile([].concat(_o.decompile(t.redeem.input),t.redeem.output))}),To.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),To.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),e.validate){let a=Buffer.from([]);if(t.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(t.hash){if(a.length>0&&!a.equals(t.hash))throw new TypeError("Hash mismatch");a=t.hash}if(t.output){if(t.output.length!==23||t.output[0]!==P0.OP_HASH160||t.output[1]!==20||t.output[22]!==P0.OP_EQUAL)throw new TypeError("Output is invalid");let u=t.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let d=_o.decompile(u.output);if(!d||d.length<1)throw new TypeError("Redeem.output too short");if(u.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(_o.countNonPushOnlyOPs(d)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let f=t7.hash160(u.output);if(a.length>0&&!a.equals(f))throw new TypeError("Hash mismatch");a=f}if(u.input){let d=u.input.length>0,f=u.witness&&u.witness.length>0;if(!d&&!f)throw new TypeError("Empty input");if(d&&f)throw new TypeError("Input and witness provided");if(d){let p=_o.decompile(u.input);if(!_o.isPushOnly(p))throw new TypeError("Non push-only scriptSig")}}};if(t.input){let u=o();if(!u||u.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(s().output))throw new TypeError("Input is invalid");c(s())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==r)throw new TypeError("Network mismatch");if(t.input){let u=s();if(t.redeem.output&&!t.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!oX(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,t)}jg.p2sh=sX});var o7=B($g=>{"use strict";l();h();Object.defineProperty($g,"__esModule",{value:!0});$g.p2wpkh=void 0;var{Buffer:iv}=Pi(),nv=ko(),aX=vi(),Gg=bn(),gr=Fr(),Wa=us(),Wg=Vf(),i7=Gg.OPS,cX=iv.alloc(0);function uX(t,e){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,gr.typeforce)({address:gr.typeforce.maybe(gr.typeforce.String),hash:gr.typeforce.maybe(gr.typeforce.BufferN(20)),input:gr.typeforce.maybe(gr.typeforce.BufferN(0)),network:gr.typeforce.maybe(gr.typeforce.Object),output:gr.typeforce.maybe(gr.typeforce.BufferN(22)),pubkey:gr.typeforce.maybe(gr.isPoint),signature:gr.typeforce.maybe(Gg.isCanonicalScriptSignature),witness:gr.typeforce.maybe(gr.typeforce.arrayOf(gr.typeforce.Buffer))},t);let r=Wa.value(()=>{let o=Wg.bech32.decode(t.address),s=o.words.shift(),a=Wg.bech32.fromWords(o.words);return{version:s,prefix:o.prefix,data:iv.from(a)}}),n=t.network||aX.bitcoin,i={name:"p2wpkh",network:n};if(Wa.prop(i,"address",()=>{if(!i.hash)return;let o=Wg.bech32.toWords(i.hash);return o.unshift(0),Wg.bech32.encode(n.bech32,o)}),Wa.prop(i,"hash",()=>{if(t.output)return t.output.slice(2,22);if(t.address)return r().data;if(t.pubkey||i.pubkey)return nv.hash160(t.pubkey||i.pubkey)}),Wa.prop(i,"output",()=>{if(i.hash)return Gg.compile([i7.OP_0,i.hash])}),Wa.prop(i,"pubkey",()=>{if(t.pubkey)return t.pubkey;if(t.witness)return t.witness[1]}),Wa.prop(i,"signature",()=>{if(t.witness)return t.witness[0]}),Wa.prop(i,"input",()=>{if(i.witness)return cX}),Wa.prop(i,"witness",()=>{if(t.pubkey&&t.signature)return[t.signature,t.pubkey]}),e.validate){let o=iv.from([]);if(t.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");o=r().data}if(t.hash){if(o.length>0&&!o.equals(t.hash))throw new TypeError("Hash mismatch");o=t.hash}if(t.output){if(t.output.length!==22||t.output[0]!==i7.OP_0||t.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");o=t.output.slice(2)}if(t.pubkey){let s=nv.hash160(t.pubkey);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");if(o=s,!(0,gr.isPoint)(t.pubkey)||t.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(t.witness){if(t.witness.length!==2)throw new TypeError("Witness is invalid");if(!Gg.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,gr.isPoint)(t.witness[1])||t.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");let s=nv.hash160(t.witness[1]);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,t)}$g.p2wpkh=uX});var c7=B(Zg=>{"use strict";l();h();Object.defineProperty(Zg,"__esModule",{value:!0});Zg.p2wsh=void 0;var{Buffer:Xg}=Pi(),s7=ko(),fX=vi(),hs=bn(),Bt=Fr(),ls=us(),Yg=Vf(),a7=hs.OPS,ov=Xg.alloc(0);function dX(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.equals(e[n]))}function Qg(t){return!!(Xg.isBuffer(t)&&t.length===65&&t[0]===4&&(0,Bt.isPoint)(t))}function lX(t,e){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,Bt.typeforce)({network:Bt.typeforce.maybe(Bt.typeforce.Object),address:Bt.typeforce.maybe(Bt.typeforce.String),hash:Bt.typeforce.maybe(Bt.typeforce.BufferN(32)),output:Bt.typeforce.maybe(Bt.typeforce.BufferN(34)),redeem:Bt.typeforce.maybe({input:Bt.typeforce.maybe(Bt.typeforce.Buffer),network:Bt.typeforce.maybe(Bt.typeforce.Object),output:Bt.typeforce.maybe(Bt.typeforce.Buffer),witness:Bt.typeforce.maybe(Bt.typeforce.arrayOf(Bt.typeforce.Buffer))}),input:Bt.typeforce.maybe(Bt.typeforce.BufferN(0)),witness:Bt.typeforce.maybe(Bt.typeforce.arrayOf(Bt.typeforce.Buffer))},t);let r=ls.value(()=>{let s=Yg.bech32.decode(t.address),a=s.words.shift(),c=Yg.bech32.fromWords(s.words);return{version:a,prefix:s.prefix,data:Xg.from(c)}}),n=ls.value(()=>hs.decompile(t.redeem.input)),i=t.network;i||(i=t.redeem&&t.redeem.network||fX.bitcoin);let o={network:i};if(ls.prop(o,"address",()=>{if(!o.hash)return;let s=Yg.bech32.toWords(o.hash);return s.unshift(0),Yg.bech32.encode(i.bech32,s)}),ls.prop(o,"hash",()=>{if(t.output)return t.output.slice(2);if(t.address)return r().data;if(o.redeem&&o.redeem.output)return s7.sha256(o.redeem.output)}),ls.prop(o,"output",()=>{if(o.hash)return hs.compile([a7.OP_0,o.hash])}),ls.prop(o,"redeem",()=>{if(t.witness)return{output:t.witness[t.witness.length-1],input:ov,witness:t.witness.slice(0,-1)}}),ls.prop(o,"input",()=>{if(o.witness)return ov}),ls.prop(o,"witness",()=>{if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){let s=hs.toStack(n());return o.redeem=Object.assign({witness:s},t.redeem),o.redeem.input=ov,[].concat(s,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)}),ls.prop(o,"name",()=>{let s=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&s.push(o.redeem.name),s.join("-")}),e.validate){let s=Xg.from([]);if(t.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");s=r().data}if(t.hash){if(s.length>0&&!s.equals(t.hash))throw new TypeError("Hash mismatch");s=t.hash}if(t.output){if(t.output.length!==34||t.output[0]!==a7.OP_0||t.output[1]!==32)throw new TypeError("Output is invalid");let a=t.output.slice(2);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(t.redeem){if(t.redeem.network&&t.redeem.network!==i)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){let a=hs.decompile(t.redeem.output);if(!a||a.length<1)throw new TypeError("Redeem.output is invalid");if(t.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if(hs.countNonPushOnlyOPs(a)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let c=s7.sha256(t.redeem.output);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(t.redeem.input&&!hs.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!dX(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(t.redeem.input&&n().some(Qg)||t.redeem.output&&(hs.decompile(t.redeem.output)||[]).some(Qg))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(t.witness&&t.witness.length>0){let a=t.witness[t.witness.length-1];if(t.redeem&&t.redeem.output&&!t.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(t.witness.some(Qg)||(hs.decompile(a)||[]).some(Qg))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,t)}Zg.p2wsh=lX});var Jg=B(sd=>{"use strict";l();h();Object.defineProperty(sd,"__esModule",{value:!0});sd.getEccLib=sd.initEccLib=void 0;var B0={};function hX(t){t?t!==B0.eccLib&&(yX(t),B0.eccLib=t):B0.eccLib=t}sd.initEccLib=hX;function pX(){if(!B0.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return B0.eccLib}sd.getEccLib=pX;var ps=t=>Buffer.from(t,"hex");function yX(t){Ii(typeof t.isXOnlyPoint=="function"),Ii(t.isXOnlyPoint(ps("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),Ii(t.isXOnlyPoint(ps("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),Ii(t.isXOnlyPoint(ps("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),Ii(t.isXOnlyPoint(ps("0000000000000000000000000000000000000000000000000000000000000001"))),Ii(!t.isXOnlyPoint(ps("0000000000000000000000000000000000000000000000000000000000000000"))),Ii(!t.isXOnlyPoint(ps("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),Ii(typeof t.xOnlyPointAddTweak=="function"),mX.forEach(e=>{let r=t.xOnlyPointAddTweak(ps(e.pubkey),ps(e.tweak));e.result===null?Ii(r===null):(Ii(r!==null),Ii(r.parity===e.parity),Ii(Buffer.from(r.xOnlyPubkey).equals(ps(e.result))))})}function Ii(t){if(!t)throw new Error("ecc library invalid")}var mX=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var d7=B((aSe,f7)=>{"use strict";l();h();var sv=TE().Buffer,gX=9007199254740991;function av(t){if(t<0||t>gX||t%1!==0)throw new RangeError("value out of range")}function C0(t,e,r){if(av(t),e||(e=sv.allocUnsafe(u7(t))),!sv.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),t<253?(e.writeUInt8(t,r),C0.bytes=1):t<=65535?(e.writeUInt8(253,r),e.writeUInt16LE(t,r+1),C0.bytes=3):t<=4294967295?(e.writeUInt8(254,r),e.writeUInt32LE(t,r+1),C0.bytes=5):(e.writeUInt8(255,r),e.writeUInt32LE(t>>>0,r+1),e.writeUInt32LE(t/4294967296|0,r+5),C0.bytes=9),e}function D0(t,e){if(!sv.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");e||(e=0);var r=t.readUInt8(e);if(r<253)return D0.bytes=1,r;if(r===253)return D0.bytes=3,t.readUInt16LE(e+1);if(r===254)return D0.bytes=5,t.readUInt32LE(e+1);D0.bytes=9;var n=t.readUInt32LE(e+1),i=t.readUInt32LE(e+5),o=i*4294967296+n;return av(o),o}function u7(t){return av(t),t<253?1:t<=65535?3:t<=4294967295?5:9}f7.exports={encode:C0,decode:D0,encodingLength:u7}});var O0=B(tn=>{"use strict";l();h();Object.defineProperty(tn,"__esModule",{value:!0});tn.BufferReader=tn.BufferWriter=tn.cloneBuffer=tn.reverseBuffer=tn.writeUInt64LE=tn.readUInt64LE=tn.varuint=void 0;var qc=Fr(),{typeforce:l7}=qc,N0=d7();tn.varuint=N0;function h7(t,e){if(typeof t!="number")throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function p7(t,e){let r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return n*=4294967296,h7(n+r,9007199254740991),n+r}tn.readUInt64LE=p7;function y7(t,e,r){return h7(e,9007199254740991),t.writeInt32LE(e&-1,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}tn.writeUInt64LE=y7;function bX(t){if(t.length<1)return t;let e=t.length-1,r=0;for(let n=0;n<t.length/2;n++)r=t[n],t[n]=t[e],t[e]=r,e--;return t}tn.reverseBuffer=bX;function xX(t){let e=Buffer.allocUnsafe(t.length);return t.copy(e),e}tn.cloneBuffer=xX;var cv=class t{static withCapacity(e){return new t(Buffer.alloc(e))}constructor(e,r=0){this.buffer=e,this.offset=r,l7(qc.tuple(qc.Buffer,qc.UInt32),[e,r])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=y7(this.buffer,e,this.offset)}writeVarInt(e){N0.encode(e,this.buffer,this.offset),this.offset+=N0.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};tn.BufferWriter=cv;var uv=class{constructor(e,r=0){this.buffer=e,this.offset=r,l7(qc.tuple(qc.Buffer,qc.UInt32),[e,r])}readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){let e=p7(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){let e=N0.decode(this.buffer,this.offset);return this.offset+=N0.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let e=this.readVarInt(),r=[];for(let n=0;n<e;n++)r.push(this.readVarSlice());return r}};tn.BufferReader=uv});var eb=B(br=>{"use strict";l();h();Object.defineProperty(br,"__esModule",{value:!0});br.tweakKey=br.tapTweakHash=br.tapleafHash=br.findScriptPath=br.toHashTree=br.rootHashFromPath=br.MAX_TAPTREE_DEPTH=br.LEAF_VERSION_TAPSCRIPT=void 0;var Ga=Pi(),wX=Jg(),hv=ko(),m7=O0(),AX=Fr();br.LEAF_VERSION_TAPSCRIPT=192;br.MAX_TAPTREE_DEPTH=128;var SX=t=>"left"in t&&"right"in t;function vX(t,e){if(t.length<33)throw new TypeError(`The control-block length is too small. Got ${t.length}, expected min 33.`);let r=(t.length-33)/32,n=e;for(let i=0;i<r;i++){let o=t.slice(33+32*i,65+32*i);n.compare(o)<0?n=lv(n,o):n=lv(o,n)}return n}br.rootHashFromPath=vX;function fv(t){if((0,AX.isTapleaf)(t))return{hash:g7(t)};let e=[fv(t[0]),fv(t[1])];e.sort((i,o)=>i.hash.compare(o.hash));let[r,n]=e;return{hash:lv(r.hash,n.hash),left:r,right:n}}br.toHashTree=fv;function dv(t,e){if(SX(t)){let r=dv(t.left,e);if(r!==void 0)return[...r,t.right.hash];let n=dv(t.right,e);if(n!==void 0)return[...n,t.left.hash]}else if(t.hash.equals(e))return[]}br.findScriptPath=dv;function g7(t){let e=t.version||br.LEAF_VERSION_TAPSCRIPT;return hv.taggedHash("TapLeaf",Ga.Buffer.concat([Ga.Buffer.from([e]),IX(t.output)]))}br.tapleafHash=g7;function b7(t,e){return hv.taggedHash("TapTweak",Ga.Buffer.concat(e?[t,e]:[t]))}br.tapTweakHash=b7;function EX(t,e){if(!Ga.Buffer.isBuffer(t)||t.length!==32||e&&e.length!==32)return null;let r=b7(t,e),n=(0,wX.getEccLib)().xOnlyPointAddTweak(t,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:Ga.Buffer.from(n.xOnlyPubkey)}}br.tweakKey=EX;function lv(t,e){return hv.taggedHash("TapBranch",Ga.Buffer.concat([t,e]))}function IX(t){let e=m7.varuint.encodingLength(t.length),r=Ga.Buffer.allocUnsafe(e);return m7.varuint.encode(t.length,r),Ga.Buffer.concat([r,t])}});var S7=B(nb=>{"use strict";l();h();Object.defineProperty(nb,"__esModule",{value:!0});nb.p2tr=void 0;var tb=Pi(),kX=vi(),pv=bn(),je=Fr(),x7=Jg(),Un=eb(),ki=us(),rb=Vf(),w7=pv.OPS,A7=1,TX=80;function _X(t,e){if(!t.address&&!t.output&&!t.pubkey&&!t.internalPubkey&&!(t.witness&&t.witness.length>1))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),(0,je.typeforce)({address:je.typeforce.maybe(je.typeforce.String),input:je.typeforce.maybe(je.typeforce.BufferN(0)),network:je.typeforce.maybe(je.typeforce.Object),output:je.typeforce.maybe(je.typeforce.BufferN(34)),internalPubkey:je.typeforce.maybe(je.typeforce.BufferN(32)),hash:je.typeforce.maybe(je.typeforce.BufferN(32)),pubkey:je.typeforce.maybe(je.typeforce.BufferN(32)),signature:je.typeforce.maybe(je.typeforce.anyOf(je.typeforce.BufferN(64),je.typeforce.BufferN(65))),witness:je.typeforce.maybe(je.typeforce.arrayOf(je.typeforce.Buffer)),scriptTree:je.typeforce.maybe(je.isTaptree),redeem:je.typeforce.maybe({output:je.typeforce.maybe(je.typeforce.Buffer),redeemVersion:je.typeforce.maybe(je.typeforce.Number),witness:je.typeforce.maybe(je.typeforce.arrayOf(je.typeforce.Buffer))}),redeemVersion:je.typeforce.maybe(je.typeforce.Number)},t);let r=ki.value(()=>{let a=rb.bech32m.decode(t.address),c=a.words.shift(),u=rb.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:tb.Buffer.from(u)}}),n=ki.value(()=>{if(!(!t.witness||!t.witness.length))return t.witness.length>=2&&t.witness[t.witness.length-1][0]===TX?t.witness.slice(0,-1):t.witness.slice()}),i=ki.value(()=>{if(t.scriptTree)return(0,Un.toHashTree)(t.scriptTree);if(t.hash)return{hash:t.hash}}),o=t.network||kX.bitcoin,s={name:"p2tr",network:o};if(ki.prop(s,"address",()=>{if(!s.pubkey)return;let a=rb.bech32m.toWords(s.pubkey);return a.unshift(A7),rb.bech32m.encode(o.bech32,a)}),ki.prop(s,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],d=u[0]&je.TAPLEAF_VERSION_MASK,f=c[c.length-2],p=(0,Un.tapleafHash)({output:f,version:d});return(0,Un.rootHashFromPath)(u,p)}return null}),ki.prop(s,"output",()=>{if(s.pubkey)return pv.compile([w7.OP_1,s.pubkey])}),ki.prop(s,"redeemVersion",()=>t.redeemVersion?t.redeemVersion:t.redeem&&t.redeem.redeemVersion!==void 0&&t.redeem.redeemVersion!==null?t.redeem.redeemVersion:Un.LEAF_VERSION_TAPSCRIPT),ki.prop(s,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&je.TAPLEAF_VERSION_MASK}}),ki.prop(s,"pubkey",()=>{if(t.pubkey)return t.pubkey;if(t.output)return t.output.slice(2);if(t.address)return r().data;if(s.internalPubkey){let a=(0,Un.tweakKey)(s.internalPubkey,s.hash);if(a)return a.x}}),ki.prop(s,"internalPubkey",()=>{if(t.internalPubkey)return t.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),ki.prop(s,"signature",()=>{if(t.signature)return t.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),ki.prop(s,"witness",()=>{if(t.witness)return t.witness;let a=i();if(a&&t.redeem&&t.redeem.output&&t.internalPubkey){let c=(0,Un.tapleafHash)({output:t.redeem.output,version:s.redeemVersion}),u=(0,Un.findScriptPath)(a,c);if(!u)return;let d=(0,Un.tweakKey)(t.internalPubkey,a.hash);if(!d)return;let f=tb.Buffer.concat([tb.Buffer.from([s.redeemVersion|d.parity]),t.internalPubkey].concat(u));return[t.redeem.output,f]}if(t.signature)return[t.signature]}),e.validate){let a=tb.Buffer.from([]);if(t.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==A7)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(t.pubkey){if(a.length>0&&!a.equals(t.pubkey))throw new TypeError("Pubkey mismatch");a=t.pubkey}if(t.output){if(t.output.length!==34||t.output[0]!==w7.OP_1||t.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(t.output.slice(2)))throw new TypeError("Pubkey mismatch");a=t.output.slice(2)}if(t.internalPubkey){let d=(0,Un.tweakKey)(t.internalPubkey,s.hash);if(a.length>0&&!a.equals(d.x))throw new TypeError("Pubkey mismatch");a=d.x}if(a&&a.length&&!(0,x7.getEccLib)().isXOnlyPoint(a))throw new TypeError("Invalid pubkey for p2tr");let c=i();if(t.hash&&c&&!t.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(t.redeem&&t.redeem.output&&c){let d=(0,Un.tapleafHash)({output:t.redeem.output,version:s.redeemVersion});if(!(0,Un.findScriptPath)(c,d))throw new TypeError("Redeem script not in tree")}let u=n();if(t.redeem&&s.redeem){if(t.redeem.redeemVersion&&t.redeem.redeemVersion!==s.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(t.redeem.output){if(pv.decompile(t.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(s.redeem.output&&!t.redeem.output.equals(s.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(t.redeem.witness&&s.redeem.witness&&!PX(t.redeem.witness,s.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(t.signature&&!t.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let d=u[u.length-1];if(d.length<33)throw new TypeError(`The control-block length is too small. Got ${d.length}, expected min 33.`);if((d.length-33)%32!==0)throw new TypeError(`The control-block length of ${d.length} is incorrect!`);let f=(d.length-33)/32;if(f>128)throw new TypeError(`The script path is too long. Got ${f}, expected max 128.`);let p=d.slice(1,33);if(t.internalPubkey&&!t.internalPubkey.equals(p))throw new TypeError("Internal pubkey mismatch");if(!(0,x7.getEccLib)().isXOnlyPoint(p))throw new TypeError("Invalid internalPubkey for p2tr witness");let m=d[0]&je.TAPLEAF_VERSION_MASK,g=u[u.length-2],x=(0,Un.tapleafHash)({output:g,version:m}),w=(0,Un.rootHashFromPath)(d,x),S=(0,Un.tweakKey)(p,w);if(!S)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(S.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(S.parity!==(d[0]&1))throw new Error("Incorrect parity")}}return Object.assign(s,t)}nb.p2tr=_X;function PX(t,e){return t.length!==e.length?!1:t.every((r,n)=>r.equals(e[n]))}});var ad=B(_r=>{"use strict";l();h();Object.defineProperty(_r,"__esModule",{value:!0});_r.p2tr=_r.p2wsh=_r.p2wpkh=_r.p2sh=_r.p2pkh=_r.p2pk=_r.p2ms=_r.embed=void 0;var BX=NP();Object.defineProperty(_r,"embed",{enumerable:!0,get:function(){return BX.p2data}});var CX=UP();Object.defineProperty(_r,"p2ms",{enumerable:!0,get:function(){return CX.p2ms}});var DX=LP();Object.defineProperty(_r,"p2pk",{enumerable:!0,get:function(){return DX.p2pk}});var NX=e7();Object.defineProperty(_r,"p2pkh",{enumerable:!0,get:function(){return NX.p2pkh}});var OX=n7();Object.defineProperty(_r,"p2sh",{enumerable:!0,get:function(){return OX.p2sh}});var UX=o7();Object.defineProperty(_r,"p2wpkh",{enumerable:!0,get:function(){return UX.p2wpkh}});var RX=c7();Object.defineProperty(_r,"p2wsh",{enumerable:!0,get:function(){return RX.p2wsh}});var LX=S7();Object.defineProperty(_r,"p2tr",{enumerable:!0,get:function(){return LX.p2tr}})});var yv=B(Rn=>{"use strict";l();h();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.toOutputScript=Rn.fromOutputScript=Rn.toBech32=Rn.toBase58Check=Rn.fromBech32=Rn.fromBase58Check=void 0;var v7=vi(),Po=ad(),E7=bn(),ib=Fr(),cd=Vf(),I7=jf(),k7=40,T7=2,_7=16,P7=2,B7=80,C7="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function MX(t,e){let r=t.slice(2);if(r.length<T7||r.length>k7)throw new TypeError("Invalid program length for segwit address");let n=t[0]-B7;if(n<P7||n>_7)throw new TypeError("Invalid version for segwit address");if(t[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(C7),O7(r,n,e.bech32)}function D7(t){let e=Buffer.from(I7.decode(t));if(e.length<21)throw new TypeError(t+" is too short");if(e.length>21)throw new TypeError(t+" is too long");let r=e.readUInt8(0),n=e.slice(1);return{version:r,hash:n}}Rn.fromBase58Check=D7;function N7(t){let e,r;try{e=cd.bech32.decode(t)}catch{}if(e){if(r=e.words[0],r!==0)throw new TypeError(t+" uses wrong encoding")}else if(e=cd.bech32m.decode(t),r=e.words[0],r===0)throw new TypeError(t+" uses wrong encoding");let n=cd.bech32.fromWords(e.words.slice(1));return{version:r,prefix:e.prefix,data:Buffer.from(n)}}Rn.fromBech32=N7;function FX(t,e){(0,ib.typeforce)((0,ib.tuple)(ib.Hash160bit,ib.UInt8),arguments);let r=Buffer.allocUnsafe(21);return r.writeUInt8(e,0),t.copy(r,1),I7.encode(r)}Rn.toBase58Check=FX;function O7(t,e,r){let n=cd.bech32.toWords(t);return n.unshift(e),e===0?cd.bech32.encode(r,n):cd.bech32m.encode(r,n)}Rn.toBech32=O7;function HX(t,e){e=e||v7.bitcoin;try{return Po.p2pkh({output:t,network:e}).address}catch{}try{return Po.p2sh({output:t,network:e}).address}catch{}try{return Po.p2wpkh({output:t,network:e}).address}catch{}try{return Po.p2wsh({output:t,network:e}).address}catch{}try{return Po.p2tr({output:t,network:e}).address}catch{}try{return MX(t,e)}catch{}throw new Error(E7.toASM(t)+" has no matching Address")}Rn.fromOutputScript=HX;function KX(t,e){e=e||v7.bitcoin;let r,n;try{r=D7(t)}catch{}if(r){if(r.version===e.pubKeyHash)return Po.p2pkh({hash:r.hash}).output;if(r.version===e.scriptHash)return Po.p2sh({hash:r.hash}).output}else{try{n=N7(t)}catch{}if(n){if(n.prefix!==e.bech32)throw new Error(t+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return Po.p2wpkh({hash:n.data}).output;if(n.data.length===32)return Po.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return Po.p2tr({pubkey:n.data}).output}else if(n.version>=P7&&n.version<=_7&&n.data.length>=T7&&n.data.length<=k7)return console.warn(C7),E7.compile([n.version+B7,n.data])}}throw new Error(t+" has no matching Script")}Rn.toOutputScript=KX});var U7=B(ob=>{"use strict";l();h();Object.defineProperty(ob,"__esModule",{value:!0});ob.fastMerkleRoot=void 0;function VX(t,e){if(!Array.isArray(t))throw TypeError("Expected values Array");if(typeof e!="function")throw TypeError("Expected digest Function");let r=t.length,n=t.concat();for(;r>1;){let i=0;for(let o=0;o<r;o+=2,++i){let s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=e(c)}r=i}return n[0]}ob.fastMerkleRoot=VX});var ud=B(sb=>{"use strict";l();h();Object.defineProperty(sb,"__esModule",{value:!0});sb.Transaction=void 0;var{Buffer:rn}=Pi(),cr=O0(),Sn=ko(),R7=bn(),qX=bn(),rt=Fr(),{typeforce:Bo}=rt;function Co(t){let e=t.length;return cr.varuint.encodingLength(e)+e}function zX(t){let e=t.length;return cr.varuint.encodingLength(e)+t.reduce((r,n)=>r+Co(n),0)}var $a=rn.allocUnsafe(0),L7=[],mv=rn.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),M7=rn.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),jX=rn.from("ffffffffffffffff","hex"),WX={script:$a,valueBuffer:jX};function GX(t){return t.value!==void 0}var Xn=class t{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,r){let n=new cr.BufferReader(e),i=new t;i.version=n.readInt32();let o=n.readUInt8(),s=n.readUInt8(),a=!1;o===t.ADVANCED_TRANSACTION_MARKER&&s===t.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let d=0;d<c;++d)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:L7});let u=n.readVarInt();for(let d=0;d<u;++d)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let d=0;d<c;++d)i.ins[d].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==e.length)throw new Error("Transaction has unexpected data");return i}static fromHex(e){return t.fromBuffer(rn.from(e,"hex"),!1)}static isCoinbaseHash(e){Bo(rt.Hash256bit,e);for(let r=0;r<32;++r)if(e[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&t.isCoinbaseHash(this.ins[0].hash)}addInput(e,r,n,i){return Bo(rt.tuple(rt.Hash256bit,rt.UInt32,rt.maybe(rt.UInt32),rt.maybe(rt.Buffer)),arguments),rt.Null(n)&&(n=t.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:r,script:i||$a,sequence:n,witness:L7})-1}addOutput(e,r){return Bo(rt.tuple(rt.Buffer,rt.Satoshi),arguments),this.outs.push({script:e,value:r})-1}hasWitnesses(){return this.ins.some(e=>e.witness.length!==0)}weight(){let e=this.byteLength(!1),r=this.byteLength(!0);return e*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){let r=e&&this.hasWitnesses();return(r?10:8)+cr.varuint.encodingLength(this.ins.length)+cr.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+Co(i.script),0)+this.outs.reduce((n,i)=>n+8+Co(i.script),0)+(r?this.ins.reduce((n,i)=>n+zX(i.witness),0):0)}clone(){let e=new t;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),e.outs=this.outs.map(r=>({script:r.script,value:r.value})),e}hashForSignature(e,r,n){if(Bo(rt.tuple(rt.UInt32,rt.Buffer,rt.Number),arguments),e>=this.ins.length)return M7;let i=R7.compile(R7.decompile(r).filter(a=>a!==qX.OPS.OP_CODESEPARATOR)),o=this.clone();if((n&31)===t.SIGHASH_NONE)o.outs=[],o.ins.forEach((a,c)=>{c!==e&&(a.sequence=0)});else if((n&31)===t.SIGHASH_SINGLE){if(e>=this.outs.length)return M7;o.outs.length=e+1;for(let a=0;a<e;a++)o.outs[a]=WX;o.ins.forEach((a,c)=>{c!==e&&(a.sequence=0)})}n&t.SIGHASH_ANYONECANPAY?(o.ins=[o.ins[e]],o.ins[0].script=i):(o.ins.forEach(a=>{a.script=$a}),o.ins[e].script=i);let s=rn.allocUnsafe(o.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),o.__toBuffer(s,0,!1),Sn.hash256(s)}hashForWitnessV1(e,r,n,i,o,s){if(Bo(rt.tuple(rt.UInt32,Bo.arrayOf(rt.Buffer),Bo.arrayOf(rt.Satoshi),rt.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===t.SIGHASH_DEFAULT?t.SIGHASH_ALL:i&t.SIGHASH_OUTPUT_MASK,u=(i&t.SIGHASH_INPUT_MASK)===t.SIGHASH_ANYONECANPAY,d=a===t.SIGHASH_NONE,f=a===t.SIGHASH_SINGLE,p=$a,m=$a,g=$a,x=$a,w=$a;if(!u){let _=cr.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(C=>{_.writeSlice(C.hash),_.writeUInt32(C.index)}),p=Sn.sha256(_.end()),_=cr.BufferWriter.withCapacity(8*this.ins.length),n.forEach(C=>_.writeUInt64(C)),m=Sn.sha256(_.end()),_=cr.BufferWriter.withCapacity(r.map(Co).reduce((C,W)=>C+W)),r.forEach(C=>_.writeVarSlice(C)),g=Sn.sha256(_.end()),_=cr.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(C=>_.writeUInt32(C.sequence)),x=Sn.sha256(_.end())}if(d||f){if(f&&e<this.outs.length){let _=this.outs[e],C=cr.BufferWriter.withCapacity(8+Co(_.script));C.writeUInt64(_.value),C.writeVarSlice(_.script),w=Sn.sha256(C.end())}}else{let _=this.outs.map(W=>8+Co(W.script)).reduce((W,re)=>W+re),C=cr.BufferWriter.withCapacity(_);this.outs.forEach(W=>{C.writeUInt64(W.value),C.writeVarSlice(W.script)}),w=Sn.sha256(C.end())}let S=(o?2:0)+(s?1:0),T=174-(u?49:0)-(d?32:0)+(s?32:0)+(o?37:0),A=cr.BufferWriter.withCapacity(T);if(A.writeUInt8(i),A.writeInt32(this.version),A.writeUInt32(this.locktime),A.writeSlice(p),A.writeSlice(m),A.writeSlice(g),A.writeSlice(x),d||f||A.writeSlice(w),A.writeUInt8(S),u){let _=this.ins[e];A.writeSlice(_.hash),A.writeUInt32(_.index),A.writeUInt64(n[e]),A.writeVarSlice(r[e]),A.writeUInt32(_.sequence)}else A.writeUInt32(e);if(s){let _=cr.BufferWriter.withCapacity(Co(s));_.writeVarSlice(s),A.writeSlice(Sn.sha256(_.end()))}return f&&A.writeSlice(w),o&&(A.writeSlice(o),A.writeUInt8(0),A.writeUInt32(4294967295)),Sn.taggedHash("TapSighash",rn.concat([rn.from([0]),A.end()]))}hashForWitnessV0(e,r,n,i){Bo(rt.tuple(rt.UInt32,rt.Buffer,rt.Satoshi,rt.UInt32),arguments);let o=rn.from([]),s,a=mv,c=mv,u=mv;if(i&t.SIGHASH_ANYONECANPAY||(o=rn.allocUnsafe(36*this.ins.length),s=new cr.BufferWriter(o,0),this.ins.forEach(f=>{s.writeSlice(f.hash),s.writeUInt32(f.index)}),c=Sn.hash256(o)),!(i&t.SIGHASH_ANYONECANPAY)&&(i&31)!==t.SIGHASH_SINGLE&&(i&31)!==t.SIGHASH_NONE&&(o=rn.allocUnsafe(4*this.ins.length),s=new cr.BufferWriter(o,0),this.ins.forEach(f=>{s.writeUInt32(f.sequence)}),u=Sn.hash256(o)),(i&31)!==t.SIGHASH_SINGLE&&(i&31)!==t.SIGHASH_NONE){let f=this.outs.reduce((p,m)=>p+8+Co(m.script),0);o=rn.allocUnsafe(f),s=new cr.BufferWriter(o,0),this.outs.forEach(p=>{s.writeUInt64(p.value),s.writeVarSlice(p.script)}),a=Sn.hash256(o)}else if((i&31)===t.SIGHASH_SINGLE&&e<this.outs.length){let f=this.outs[e];o=rn.allocUnsafe(8+Co(f.script)),s=new cr.BufferWriter(o,0),s.writeUInt64(f.value),s.writeVarSlice(f.script),a=Sn.hash256(o)}o=rn.allocUnsafe(156+Co(r)),s=new cr.BufferWriter(o,0);let d=this.ins[e];return s.writeInt32(this.version),s.writeSlice(c),s.writeSlice(u),s.writeSlice(d.hash),s.writeUInt32(d.index),s.writeVarSlice(r),s.writeUInt64(n),s.writeUInt32(d.sequence),s.writeSlice(a),s.writeUInt32(this.locktime),s.writeUInt32(i),Sn.hash256(o)}getHash(e){return e&&this.isCoinbase()?rn.alloc(32,0):Sn.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,cr.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,r){return this.__toBuffer(e,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,r){Bo(rt.tuple(rt.Number,rt.Buffer),arguments),this.ins[e].script=r}setWitness(e,r){Bo(rt.tuple(rt.Number,[rt.Buffer]),arguments),this.ins[e].witness=r}__toBuffer(e,r,n=!1){e||(e=rn.allocUnsafe(this.byteLength(n)));let i=new cr.BufferWriter(e,r||0);i.writeInt32(this.version);let o=n&&this.hasWitnesses();return o&&(i.writeUInt8(t.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(t.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeSlice(s.hash),i.writeUInt32(s.index),i.writeVarSlice(s.script),i.writeUInt32(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{GX(s)?i.writeUInt64(s.value):i.writeSlice(s.valueBuffer),i.writeVarSlice(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32(this.locktime),r!==void 0?e.slice(r,i.offset):e}};sb.Transaction=Xn;Xn.DEFAULT_SEQUENCE=4294967295;Xn.SIGHASH_DEFAULT=0;Xn.SIGHASH_ALL=1;Xn.SIGHASH_NONE=2;Xn.SIGHASH_SINGLE=3;Xn.SIGHASH_ANYONECANPAY=128;Xn.SIGHASH_OUTPUT_MASK=3;Xn.SIGHASH_INPUT_MASK=128;Xn.ADVANCED_TRANSACTION_MARKER=0;Xn.ADVANCED_TRANSACTION_FLAG=1});var V7=B(ab=>{"use strict";l();h();Object.defineProperty(ab,"__esModule",{value:!0});ab.Block=void 0;var zc=O0(),gv=ko(),$X=U7(),YX=ud(),K7=Fr(),{typeforce:QX}=K7,bv=new TypeError("Cannot compute merkle root for zero transactions"),F7=new TypeError("Cannot compute witness commit for non-segwit block"),xv=class t{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");let r=new zc.BufferReader(e),n=new t;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),e.length===80)return n;let i=()=>{let a=YX.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=a.byteLength(),a},o=r.readVarInt();n.transactions=[];for(let a=0;a<o;++a){let c=i();n.transactions.push(c)}let s=n.getWitnessCommit();return s&&(n.witnessCommit=s),n}static fromHex(e){return t.fromBuffer(Buffer.from(e,"hex"))}static calculateTarget(e){let r=((e&4278190080)>>24)-3,n=e&8388607,i=Buffer.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(e,r){if(QX([{getHash:K7.Function}],e),e.length===0)throw bv;if(r&&!H7(e))throw F7;let n=e.map(o=>o.getHash(r)),i=(0,$X.fastMerkleRoot)(n,gv.hash256);return r?gv.hash256(Buffer.concat([i,e[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!H7(this.transactions))return null;let e=this.transactions[0].outs.filter(n=>n.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(n=>n.script.slice(6,38));if(e.length===0)return null;let r=e[e.length-1];return r instanceof Buffer&&r.length===32?r:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return XX(this.transactions)}weight(){let e=this.byteLength(!1,!1),r=this.byteLength(!1,!0);return e*3+r}byteLength(e,r=!0){return e||!this.transactions?80:80+zc.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((n,i)=>n+i.byteLength(r),0)}getHash(){return gv.hash256(this.toBuffer(!0))}getId(){return(0,zc.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){let r=Buffer.allocUnsafe(this.byteLength(e)),n=new zc.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),e||!this.transactions||(zc.varuint.encode(this.transactions.length,r,n.offset),n.offset+=zc.varuint.encode.bytes,this.transactions.forEach(i=>{let o=i.byteLength();i.toBuffer(r,n.offset),n.offset+=o})),r}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){let e=this.hasWitnessCommit();return!e&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(e?this.__checkWitnessCommit():!0)}checkProofOfWork(){let e=(0,zc.reverseBuffer)(this.getHash()),r=t.calculateTarget(this.bits);return e.compare(r)<=0}__checkMerkleRoot(){if(!this.transactions)throw bv;let e=t.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(e)===0}__checkWitnessCommit(){if(!this.transactions)throw bv;if(!this.hasWitnessCommit())throw F7;let e=t.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(e)===0}};ab.Block=xv;function H7(t){return t instanceof Array&&t[0]&&t[0].ins&&t[0].ins instanceof Array&&t[0].ins[0]&&t[0].ins[0].witness&&t[0].ins[0].witness instanceof Array&&t[0].ins[0].witness.length>0}function XX(t){return t instanceof Array&&t.some(e=>typeof e=="object"&&e.ins instanceof Array&&e.ins.some(r=>typeof r=="object"&&r.witness instanceof Array&&r.witness.length>0))}});var Pr=B(Gi=>{"use strict";l();h();Object.defineProperty(Gi,"__esModule",{value:!0});var ZX;(function(t){t[t.UNSIGNED_TX=0]="UNSIGNED_TX",t[t.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(ZX=Gi.GlobalTypes||(Gi.GlobalTypes={}));Gi.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var JX;(function(t){t[t.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",t[t.WITNESS_UTXO=1]="WITNESS_UTXO",t[t.PARTIAL_SIG=2]="PARTIAL_SIG",t[t.SIGHASH_TYPE=3]="SIGHASH_TYPE",t[t.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=6]="BIP32_DERIVATION",t[t.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",t[t.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",t[t.POR_COMMITMENT=9]="POR_COMMITMENT",t[t.TAP_KEY_SIG=19]="TAP_KEY_SIG",t[t.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",t[t.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",t[t.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",t[t.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",t[t.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(JX=Gi.InputTypes||(Gi.InputTypes={}));Gi.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var eZ;(function(t){t[t.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",t[t.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",t[t.BIP32_DERIVATION=2]="BIP32_DERIVATION",t[t.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",t[t.TAP_TREE=6]="TAP_TREE",t[t.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(eZ=Gi.OutputTypes||(Gi.OutputTypes={}));Gi.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var z7=B(jc=>{"use strict";l();h();Object.defineProperty(jc,"__esModule",{value:!0});var q7=Pr(),tZ=t=>[...Array(t).keys()];function rZ(t){if(t.key[0]!==q7.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+t.key.toString("hex"));if(t.key.length!==79||![2,3].includes(t.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+t.key.toString("hex"));if(t.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let e=t.key.slice(1),r={masterFingerprint:t.value.slice(0,4),extendedPubkey:e,path:"m"};for(let n of tZ(t.value.length/4-1)){let i=t.value.readUInt32LE(n*4+4),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}jc.decode=rZ;function nZ(t){let e=Buffer.from([q7.GlobalTypes.GLOBAL_XPUB]),r=Buffer.concat([e,t.extendedPubkey]),n=t.path.split("/"),i=Buffer.allocUnsafe(n.length*4);t.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach(s=>{let a=s.slice(-1)==="'",c=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(c+=2147483648),i.writeUInt32LE(c,o),o+=4}),{key:r,value:i}}jc.encode=nZ;jc.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function iZ(t){let e=t.extendedPubkey,r=t.masterFingerprint,n=t.path;return Buffer.isBuffer(e)&&e.length===78&&[2,3].indexOf(e[45])>-1&&Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}jc.check=iZ;function oZ(t,e,r){let n=e.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),t.filter(i=>i.extendedPubkey.equals(e.extendedPubkey)).length===0)}jc.canAddToArray=oZ});var j7=B(wv=>{"use strict";l();h();Object.defineProperty(wv,"__esModule",{value:!0});var sZ=Pr();function aZ(t){return{key:Buffer.from([sZ.GlobalTypes.UNSIGNED_TX]),value:t.toBuffer()}}wv.encode=aZ});var G7=B(Wc=>{"use strict";l();h();Object.defineProperty(Wc,"__esModule",{value:!0});var W7=Pr();function cZ(t){if(t.key[0]!==W7.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+t.key.toString("hex"));return t.value}Wc.decode=cZ;function uZ(t){return{key:Buffer.from([W7.InputTypes.FINAL_SCRIPTSIG]),value:t}}Wc.encode=uZ;Wc.expected="Buffer";function fZ(t){return Buffer.isBuffer(t)}Wc.check=fZ;function dZ(t,e){return!!t&&!!e&&t.finalScriptSig===void 0}Wc.canAdd=dZ});var Y7=B(Gc=>{"use strict";l();h();Object.defineProperty(Gc,"__esModule",{value:!0});var $7=Pr();function lZ(t){if(t.key[0]!==$7.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+t.key.toString("hex"));return t.value}Gc.decode=lZ;function hZ(t){return{key:Buffer.from([$7.InputTypes.FINAL_SCRIPTWITNESS]),value:t}}Gc.encode=hZ;Gc.expected="Buffer";function pZ(t){return Buffer.isBuffer(t)}Gc.check=pZ;function yZ(t,e){return!!t&&!!e&&t.finalScriptWitness===void 0}Gc.canAdd=yZ});var X7=B($c=>{"use strict";l();h();Object.defineProperty($c,"__esModule",{value:!0});var Q7=Pr();function mZ(t){if(t.key[0]!==Q7.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+t.key.toString("hex"));return t.value}$c.decode=mZ;function gZ(t){return{key:Buffer.from([Q7.InputTypes.NON_WITNESS_UTXO]),value:t}}$c.encode=gZ;$c.expected="Buffer";function bZ(t){return Buffer.isBuffer(t)}$c.check=bZ;function xZ(t,e){return!!t&&!!e&&t.nonWitnessUtxo===void 0}$c.canAdd=xZ});var J7=B(Yc=>{"use strict";l();h();Object.defineProperty(Yc,"__esModule",{value:!0});var Z7=Pr();function wZ(t){if(t.key[0]!==Z7.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+t.key.toString("hex"));if(!(t.key.length===34||t.key.length===66)||![2,3,4].includes(t.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+t.key.toString("hex"));return{pubkey:t.key.slice(1),signature:t.value}}Yc.decode=wZ;function AZ(t){let e=Buffer.from([Z7.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([e,t.pubkey]),value:t.signature}}Yc.encode=AZ;Yc.expected="{ pubkey: Buffer; signature: Buffer; }";function SZ(t){return Buffer.isBuffer(t.pubkey)&&Buffer.isBuffer(t.signature)&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&vZ(t.signature)}Yc.check=SZ;function vZ(t){if(!Buffer.isBuffer(t)||t.length<9||t[0]!==48||t.length!==t[1]+3||t[2]!==2)return!1;let e=t[3];if(e>33||e<1||t[3+e+1]!==2)return!1;let r=t[3+e+2];return!(r>33||r<1||t.length!==3+e+2+r+2)}function EZ(t,e,r){let n=e.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),t.filter(i=>i.pubkey.equals(e.pubkey)).length===0)}Yc.canAddToArray=EZ});var t9=B(Qc=>{"use strict";l();h();Object.defineProperty(Qc,"__esModule",{value:!0});var e9=Pr();function IZ(t){if(t.key[0]!==e9.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+t.key.toString("hex"));return t.value.toString("utf8")}Qc.decode=IZ;function kZ(t){return{key:Buffer.from([e9.InputTypes.POR_COMMITMENT]),value:Buffer.from(t,"utf8")}}Qc.encode=kZ;Qc.expected="string";function TZ(t){return typeof t=="string"}Qc.check=TZ;function _Z(t,e){return!!t&&!!e&&t.porCommitment===void 0}Qc.canAdd=_Z});var n9=B(Xc=>{"use strict";l();h();Object.defineProperty(Xc,"__esModule",{value:!0});var r9=Pr();function PZ(t){if(t.key[0]!==r9.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+t.key.toString("hex"));return t.value.readUInt32LE(0)}Xc.decode=PZ;function BZ(t){let e=Buffer.from([r9.InputTypes.SIGHASH_TYPE]),r=Buffer.allocUnsafe(4);return r.writeUInt32LE(t,0),{key:e,value:r}}Xc.encode=BZ;Xc.expected="number";function CZ(t){return typeof t=="number"}Xc.check=CZ;function DZ(t,e){return!!t&&!!e&&t.sighashType===void 0}Xc.canAdd=DZ});var s9=B(Zc=>{"use strict";l();h();Object.defineProperty(Zc,"__esModule",{value:!0});var i9=Pr();function NZ(t){if(t.key[0]!==i9.InputTypes.TAP_KEY_SIG||t.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+t.key.toString("hex"));if(!o9(t.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return t.value}Zc.decode=NZ;function OZ(t){return{key:Buffer.from([i9.InputTypes.TAP_KEY_SIG]),value:t}}Zc.encode=OZ;Zc.expected="Buffer";function o9(t){return Buffer.isBuffer(t)&&(t.length===64||t.length===65)}Zc.check=o9;function UZ(t,e){return!!t&&!!e&&t.tapKeySig===void 0}Zc.canAdd=UZ});var c9=B(Jc=>{"use strict";l();h();Object.defineProperty(Jc,"__esModule",{value:!0});var a9=Pr();function RZ(t){if(t.key[0]!==a9.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+t.key.toString("hex"));if((t.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+t.key.toString("hex"));let e=t.value[t.value.length-1];if((t.key[1]&254)!==e)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+t.key.toString("hex"));let r=t.value.slice(0,-1);return{controlBlock:t.key.slice(1),script:r,leafVersion:e}}Jc.decode=RZ;function LZ(t){let e=Buffer.from([a9.InputTypes.TAP_LEAF_SCRIPT]),r=Buffer.from([t.leafVersion]);return{key:Buffer.concat([e,t.controlBlock]),value:Buffer.concat([t.script,r])}}Jc.encode=LZ;Jc.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function MZ(t){return Buffer.isBuffer(t.controlBlock)&&(t.controlBlock.length-1)%32===0&&(t.controlBlock[0]&254)===t.leafVersion&&Buffer.isBuffer(t.script)}Jc.check=MZ;function FZ(t,e,r){let n=e.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),t.filter(i=>i.controlBlock.equals(e.controlBlock)).length===0)}Jc.canAddToArray=FZ});var d9=B(eu=>{"use strict";l();h();Object.defineProperty(eu,"__esModule",{value:!0});var u9=Pr();function HZ(t){if(t.key[0]!==u9.InputTypes.TAP_MERKLE_ROOT||t.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+t.key.toString("hex"));if(!f9(t.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return t.value}eu.decode=HZ;function KZ(t){return{key:Buffer.from([u9.InputTypes.TAP_MERKLE_ROOT]),value:t}}eu.encode=KZ;eu.expected="Buffer";function f9(t){return Buffer.isBuffer(t)&&t.length===32}eu.check=f9;function VZ(t,e){return!!t&&!!e&&t.tapMerkleRoot===void 0}eu.canAdd=VZ});var h9=B(tu=>{"use strict";l();h();Object.defineProperty(tu,"__esModule",{value:!0});var l9=Pr();function qZ(t){if(t.key[0]!==l9.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+t.key.toString("hex"));if(t.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+t.key.toString("hex"));if(t.value.length!==64&&t.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+t.key.toString("hex"));let e=t.key.slice(1,33),r=t.key.slice(33);return{pubkey:e,leafHash:r,signature:t.value}}tu.decode=qZ;function zZ(t){let e=Buffer.from([l9.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([e,t.pubkey,t.leafHash]),value:t.signature}}tu.encode=zZ;tu.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function jZ(t){return Buffer.isBuffer(t.pubkey)&&Buffer.isBuffer(t.leafHash)&&Buffer.isBuffer(t.signature)&&t.pubkey.length===32&&t.leafHash.length===32&&(t.signature.length===64||t.signature.length===65)}tu.check=jZ;function WZ(t,e,r){let n=e.pubkey.toString("hex")+e.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),t.filter(i=>i.pubkey.equals(e.pubkey)&&i.leafHash.equals(e.leafHash)).length===0)}tu.canAddToArray=WZ});var Ya=B(L0=>{"use strict";l();h();Object.defineProperty(L0,"__esModule",{value:!0});var GZ=9007199254740991;function Av(t){if(t<0||t>GZ||t%1!==0)throw new RangeError("value out of range")}function U0(t,e,r){if(Av(t),e||(e=Buffer.allocUnsafe(p9(t))),!Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),t<253?(e.writeUInt8(t,r),Object.assign(U0,{bytes:1})):t<=65535?(e.writeUInt8(253,r),e.writeUInt16LE(t,r+1),Object.assign(U0,{bytes:3})):t<=4294967295?(e.writeUInt8(254,r),e.writeUInt32LE(t,r+1),Object.assign(U0,{bytes:5})):(e.writeUInt8(255,r),e.writeUInt32LE(t>>>0,r+1),e.writeUInt32LE(t/4294967296|0,r+5),Object.assign(U0,{bytes:9})),e}L0.encode=U0;function R0(t,e){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");e||(e=0);let r=t.readUInt8(e);if(r<253)return Object.assign(R0,{bytes:1}),r;if(r===253)return Object.assign(R0,{bytes:3}),t.readUInt16LE(e+1);if(r===254)return Object.assign(R0,{bytes:5}),t.readUInt32LE(e+1);{Object.assign(R0,{bytes:9});let n=t.readUInt32LE(e+1),o=t.readUInt32LE(e+5)*4294967296+n;return Av(o),o}}L0.decode=R0;function p9(t){return Av(t),t<253?1:t<=65535?3:t<=4294967295?5:9}L0.encodingLength=p9});var ub=B(Qa=>{"use strict";l();h();Object.defineProperty(Qa,"__esModule",{value:!0});var cb=Ya();Qa.range=t=>[...Array(t).keys()];function $Z(t){if(t.length<1)return t;let e=t.length-1,r=0;for(let n=0;n<t.length/2;n++)r=t[n],t[n]=t[e],t[e]=r,e--;return t}Qa.reverseBuffer=$Z;function YZ(t){let e=t.map(y9);return e.push(Buffer.from([0])),Buffer.concat(e)}Qa.keyValsToBuffer=YZ;function y9(t){let e=t.key.length,r=t.value.length,n=cb.encodingLength(e),i=cb.encodingLength(r),o=Buffer.allocUnsafe(n+e+i+r);return cb.encode(e,o,0),t.key.copy(o,n),cb.encode(r,o,n+e),t.value.copy(o,n+e+i),o}Qa.keyValToBuffer=y9;function m9(t,e){if(typeof t!="number")throw new Error("cannot write a non-number as a number");if(t<0)throw new Error("specified a negative value for writing an unsigned value");if(t>e)throw new Error("RangeError: value out of range");if(Math.floor(t)!==t)throw new Error("value has a fractional component")}function QZ(t,e){let r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return n*=4294967296,m9(n+r,9007199254740991),n+r}Qa.readUInt64LE=QZ;function XZ(t,e,r){return m9(e,9007199254740991),t.writeInt32LE(e&-1,r),t.writeUInt32LE(Math.floor(e/4294967296),r+4),r+8}Qa.writeUInt64LE=XZ});var x9=B(ru=>{"use strict";l();h();Object.defineProperty(ru,"__esModule",{value:!0});var g9=Pr(),b9=ub(),fb=Ya();function ZZ(t){if(t.key[0]!==g9.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+t.key.toString("hex"));let e=b9.readUInt64LE(t.value,0),r=8,n=fb.decode(t.value,r);r+=fb.encodingLength(n);let i=t.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:e}}ru.decode=ZZ;function JZ(t){let{script:e,value:r}=t,n=fb.encodingLength(e.length),i=Buffer.allocUnsafe(8+n+e.length);return b9.writeUInt64LE(i,r,0),fb.encode(e.length,i,8),e.copy(i,8+n),{key:Buffer.from([g9.InputTypes.WITNESS_UTXO]),value:i}}ru.encode=JZ;ru.expected="{ script: Buffer; value: number; }";function eJ(t){return Buffer.isBuffer(t.script)&&typeof t.value=="number"}ru.check=eJ;function tJ(t,e){return!!t&&!!e&&t.witnessUtxo===void 0}ru.canAdd=tJ});var A9=B(nu=>{"use strict";l();h();Object.defineProperty(nu,"__esModule",{value:!0});var w9=Pr(),Sv=Ya();function rJ(t){if(t.key[0]!==w9.OutputTypes.TAP_TREE||t.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+t.key.toString("hex"));let e=0,r=[];for(;e<t.value.length;){let n=t.value[e++],i=t.value[e++],o=Sv.decode(t.value,e);e+=Sv.encodingLength(o),r.push({depth:n,leafVersion:i,script:t.value.slice(e,e+o)}),e+=o}return{leaves:r}}nu.decode=rJ;function nJ(t){let e=Buffer.from([w9.OutputTypes.TAP_TREE]),r=[].concat(...t.leaves.map(n=>[Buffer.of(n.depth,n.leafVersion),Sv.encode(n.script.length),n.script]));return{key:e,value:Buffer.concat(r)}}nu.encode=nJ;nu.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function iJ(t){return Array.isArray(t.leaves)&&t.leaves.every(e=>e.depth>=0&&e.depth<=128&&(e.leafVersion&254)===e.leafVersion&&Buffer.isBuffer(e.script))}nu.check=iJ;function oJ(t,e){return!!t&&!!e&&t.tapTree===void 0}nu.canAdd=oJ});var Ev=B(vv=>{"use strict";l();h();Object.defineProperty(vv,"__esModule",{value:!0});var sJ=t=>[...Array(t).keys()],aJ=t=>t.length===33&&[2,3].includes(t[0])||t.length===65&&t[0]===4;function cJ(t,e=aJ){function r(a){if(a.key[0]!==t)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!e(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let d of sJ(a.value.length/4-1)){let f=a.value.readUInt32LE(d*4+4),p=!!(f&2147483648),m=f&2147483647;u.path+="/"+m.toString(10)+(p?"'":"")}return u}function n(a){let c=Buffer.from([t]),u=Buffer.concat([c,a.pubkey]),d=a.path.split("/"),f=Buffer.allocUnsafe(d.length*4);a.masterFingerprint.copy(f,0);let p=4;return d.slice(1).forEach(m=>{let g=m.slice(-1)==="'",x=2147483647&parseInt(g?m.slice(0,-1):m,10);g&&(x+=2147483648),f.writeUInt32LE(x,p),p+=4}),{key:u,value:f}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function o(a){return Buffer.isBuffer(a.pubkey)&&Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&e(a.pubkey)&&a.masterFingerprint.length===4}function s(a,c,u){let d=c.pubkey.toString("hex");return u.has(d)?!1:(u.add(d),a.filter(f=>f.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}vv.makeConverter=cJ});var S9=B(Iv=>{"use strict";l();h();Object.defineProperty(Iv,"__esModule",{value:!0});function uJ(t){return e;function e(r){let n;if(t.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}Iv.makeChecker=uJ});var v9=B(kv=>{"use strict";l();h();Object.defineProperty(kv,"__esModule",{value:!0});function fJ(t){function e(s){if(s.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([t]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}kv.makeConverter=fJ});var E9=B(Tv=>{"use strict";l();h();Object.defineProperty(Tv,"__esModule",{value:!0});var db=Ya(),dJ=Ev(),lJ=t=>t.length===32;function hJ(t){let e=dJ.makeConverter(t,lJ);function r(s){let a=db.decode(s.value),c=db.encodingLength(a),u=e.decode({key:s.key,value:s.value.slice(c+a*32)}),d=new Array(a);for(let f=0,p=c;f<a;f++,p+=32)d[f]=s.value.slice(p,p+32);return Object.assign({},u,{leafHashes:d})}function n(s){let a=e.encode(s),c=db.encodingLength(s.leafHashes.length),u=Buffer.allocUnsafe(c);db.encode(s.leafHashes.length,u);let d=Buffer.concat([u,...s.leafHashes,a.value]);return Object.assign({},a,{value:d})}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>Buffer.isBuffer(a)&&a.length===32)&&e.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:e.canAddToArray}}Tv.makeConverter=hJ});var I9=B(_v=>{"use strict";l();h();Object.defineProperty(_v,"__esModule",{value:!0});function pJ(t){function e(s){if(s.key[0]!==t||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+s.key.toString("hex"));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Buffer.from([t]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}_v.makeConverter=pJ});var k9=B(Pv=>{"use strict";l();h();Object.defineProperty(Pv,"__esModule",{value:!0});function yJ(t){function e(s){if(s.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([t]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:e,encode:r,check:i,expected:n,canAdd:o}}Pv.makeConverter=yJ});var lb=B(M0=>{"use strict";l();h();Object.defineProperty(M0,"__esModule",{value:!0});var Zn=Pr(),mJ=z7(),gJ=j7(),bJ=G7(),xJ=Y7(),wJ=X7(),AJ=J7(),SJ=t9(),vJ=n9(),EJ=s9(),IJ=c9(),kJ=d9(),TJ=h9(),_J=x9(),PJ=A9(),T9=Ev(),Bv=S9(),_9=v9(),P9=E9(),B9=I9(),C9=k9(),BJ={unsignedTx:gJ,globalXpub:mJ,checkPubkey:Bv.makeChecker([])};M0.globals=BJ;var CJ={nonWitnessUtxo:wJ,partialSig:AJ,sighashType:vJ,finalScriptSig:bJ,finalScriptWitness:xJ,porCommitment:SJ,witnessUtxo:_J,bip32Derivation:T9.makeConverter(Zn.InputTypes.BIP32_DERIVATION),redeemScript:_9.makeConverter(Zn.InputTypes.REDEEM_SCRIPT),witnessScript:C9.makeConverter(Zn.InputTypes.WITNESS_SCRIPT),checkPubkey:Bv.makeChecker([Zn.InputTypes.PARTIAL_SIG,Zn.InputTypes.BIP32_DERIVATION]),tapKeySig:EJ,tapScriptSig:TJ,tapLeafScript:IJ,tapBip32Derivation:P9.makeConverter(Zn.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:B9.makeConverter(Zn.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:kJ};M0.inputs=CJ;var DJ={bip32Derivation:T9.makeConverter(Zn.OutputTypes.BIP32_DERIVATION),redeemScript:_9.makeConverter(Zn.OutputTypes.REDEEM_SCRIPT),witnessScript:C9.makeConverter(Zn.OutputTypes.WITNESS_SCRIPT),checkPubkey:Bv.makeChecker([Zn.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:P9.makeConverter(Zn.OutputTypes.TAP_BIP32_DERIVATION),tapTree:PJ,tapInternalKey:B9.makeConverter(Zn.OutputTypes.TAP_INTERNAL_KEY)};M0.outputs=DJ});var O9=B(F0=>{"use strict";l();h();Object.defineProperty(F0,"__esModule",{value:!0});var Ct=lb(),hb=ub(),D9=Ya(),Oe=Pr();function NJ(t,e){let r=0;function n(){let w=D9.decode(t,r);r+=D9.encodingLength(w);let S=t.slice(r,r+w);return r+=w,S}function i(){let w=t.readUInt32BE(r);return r+=4,w}function o(){let w=t.readUInt8(r);return r+=1,w}function s(){let w=n(),S=n();return{key:w,value:S}}function a(){if(r>=t.length)throw new Error("Format Error: Unexpected End of PSBT");let w=t.readUInt8(r)===0;return w&&r++,w}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let w=s(),S=w.key.toString("hex");if(u[S])throw new Error("Format Error: Keys must be unique for global keymap: key "+S);u[S]=1,c.push(w)}let d=c.filter(w=>w.key[0]===Oe.GlobalTypes.UNSIGNED_TX);if(d.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let f=e(d[0].value),{inputCount:p,outputCount:m}=f.getInputOutputCounts(),g=[],x=[];for(let w of hb.range(p)){let S={},T=[];for(;!a();){let A=s(),_=A.key.toString("hex");if(S[_])throw new Error("Format Error: Keys must be unique for each input: input index "+w+" key "+_);S[_]=1,T.push(A)}g.push(T)}for(let w of hb.range(m)){let S={},T=[];for(;!a();){let A=s(),_=A.key.toString("hex");if(S[_])throw new Error("Format Error: Keys must be unique for each output: output index "+w+" key "+_);S[_]=1,T.push(A)}x.push(T)}return N9(f,{globalMapKeyVals:c,inputKeyVals:g,outputKeyVals:x})}F0.psbtFromBuffer=NJ;function Hr(t,e,r){if(!e.equals(Buffer.from([r])))throw new Error(`Format Error: Invalid ${t} key: ${e.toString("hex")}`)}F0.checkKeyBuffer=Hr;function N9(t,{globalMapKeyVals:e,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:t},o=0;for(let d of e)switch(d.key[0]){case Oe.GlobalTypes.UNSIGNED_TX:if(Hr("global",d.key,Oe.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case Oe.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(Ct.globals.globalXpub.decode(d));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(d)}let s=r.length,a=n.length,c=[],u=[];for(let d of hb.range(s)){let f={};for(let p of r[d])switch(Ct.inputs.checkPubkey(p),p.key[0]){case Oe.InputTypes.NON_WITNESS_UTXO:if(Hr("input",p.key,Oe.InputTypes.NON_WITNESS_UTXO),f.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");f.nonWitnessUtxo=Ct.inputs.nonWitnessUtxo.decode(p);break;case Oe.InputTypes.WITNESS_UTXO:if(Hr("input",p.key,Oe.InputTypes.WITNESS_UTXO),f.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");f.witnessUtxo=Ct.inputs.witnessUtxo.decode(p);break;case Oe.InputTypes.PARTIAL_SIG:f.partialSig===void 0&&(f.partialSig=[]),f.partialSig.push(Ct.inputs.partialSig.decode(p));break;case Oe.InputTypes.SIGHASH_TYPE:if(Hr("input",p.key,Oe.InputTypes.SIGHASH_TYPE),f.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");f.sighashType=Ct.inputs.sighashType.decode(p);break;case Oe.InputTypes.REDEEM_SCRIPT:if(Hr("input",p.key,Oe.InputTypes.REDEEM_SCRIPT),f.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");f.redeemScript=Ct.inputs.redeemScript.decode(p);break;case Oe.InputTypes.WITNESS_SCRIPT:if(Hr("input",p.key,Oe.InputTypes.WITNESS_SCRIPT),f.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");f.witnessScript=Ct.inputs.witnessScript.decode(p);break;case Oe.InputTypes.BIP32_DERIVATION:f.bip32Derivation===void 0&&(f.bip32Derivation=[]),f.bip32Derivation.push(Ct.inputs.bip32Derivation.decode(p));break;case Oe.InputTypes.FINAL_SCRIPTSIG:Hr("input",p.key,Oe.InputTypes.FINAL_SCRIPTSIG),f.finalScriptSig=Ct.inputs.finalScriptSig.decode(p);break;case Oe.InputTypes.FINAL_SCRIPTWITNESS:Hr("input",p.key,Oe.InputTypes.FINAL_SCRIPTWITNESS),f.finalScriptWitness=Ct.inputs.finalScriptWitness.decode(p);break;case Oe.InputTypes.POR_COMMITMENT:Hr("input",p.key,Oe.InputTypes.POR_COMMITMENT),f.porCommitment=Ct.inputs.porCommitment.decode(p);break;case Oe.InputTypes.TAP_KEY_SIG:Hr("input",p.key,Oe.InputTypes.TAP_KEY_SIG),f.tapKeySig=Ct.inputs.tapKeySig.decode(p);break;case Oe.InputTypes.TAP_SCRIPT_SIG:f.tapScriptSig===void 0&&(f.tapScriptSig=[]),f.tapScriptSig.push(Ct.inputs.tapScriptSig.decode(p));break;case Oe.InputTypes.TAP_LEAF_SCRIPT:f.tapLeafScript===void 0&&(f.tapLeafScript=[]),f.tapLeafScript.push(Ct.inputs.tapLeafScript.decode(p));break;case Oe.InputTypes.TAP_BIP32_DERIVATION:f.tapBip32Derivation===void 0&&(f.tapBip32Derivation=[]),f.tapBip32Derivation.push(Ct.inputs.tapBip32Derivation.decode(p));break;case Oe.InputTypes.TAP_INTERNAL_KEY:Hr("input",p.key,Oe.InputTypes.TAP_INTERNAL_KEY),f.tapInternalKey=Ct.inputs.tapInternalKey.decode(p);break;case Oe.InputTypes.TAP_MERKLE_ROOT:Hr("input",p.key,Oe.InputTypes.TAP_MERKLE_ROOT),f.tapMerkleRoot=Ct.inputs.tapMerkleRoot.decode(p);break;default:f.unknownKeyVals||(f.unknownKeyVals=[]),f.unknownKeyVals.push(p)}c.push(f)}for(let d of hb.range(a)){let f={};for(let p of n[d])switch(Ct.outputs.checkPubkey(p),p.key[0]){case Oe.OutputTypes.REDEEM_SCRIPT:if(Hr("output",p.key,Oe.OutputTypes.REDEEM_SCRIPT),f.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");f.redeemScript=Ct.outputs.redeemScript.decode(p);break;case Oe.OutputTypes.WITNESS_SCRIPT:if(Hr("output",p.key,Oe.OutputTypes.WITNESS_SCRIPT),f.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");f.witnessScript=Ct.outputs.witnessScript.decode(p);break;case Oe.OutputTypes.BIP32_DERIVATION:f.bip32Derivation===void 0&&(f.bip32Derivation=[]),f.bip32Derivation.push(Ct.outputs.bip32Derivation.decode(p));break;case Oe.OutputTypes.TAP_INTERNAL_KEY:Hr("output",p.key,Oe.OutputTypes.TAP_INTERNAL_KEY),f.tapInternalKey=Ct.outputs.tapInternalKey.decode(p);break;case Oe.OutputTypes.TAP_TREE:Hr("output",p.key,Oe.OutputTypes.TAP_TREE),f.tapTree=Ct.outputs.tapTree.decode(p);break;case Oe.OutputTypes.TAP_BIP32_DERIVATION:f.tapBip32Derivation===void 0&&(f.tapBip32Derivation=[]),f.tapBip32Derivation.push(Ct.outputs.tapBip32Derivation.decode(p));break;default:f.unknownKeyVals||(f.unknownKeyVals=[]),f.unknownKeyVals.push(p)}u.push(f)}return{globalMap:i,inputs:c,outputs:u}}F0.psbtFromKeyVals=N9});var L9=B(pb=>{"use strict";l();h();Object.defineProperty(pb,"__esModule",{value:!0});var Cv=lb(),U9=ub();function OJ({globalMap:t,inputs:e,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=R9({globalMap:t,inputs:e,outputs:r}),s=U9.keyValsToBuffer(n),a=f=>f.length===0?[Buffer.from([0])]:f.map(U9.keyValsToBuffer),c=a(i),u=a(o),d=Buffer.allocUnsafe(5);return d.writeUIntBE(482972169471,0,5),Buffer.concat([d,s].concat(c,u))}pb.psbtToBuffer=OJ;var UJ=(t,e)=>t.key.compare(e.key);function Dv(t,e){let r=new Set,n=Object.entries(t).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;let c=e[s];if(c===void 0)return o;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(f=>f.key.toString("hex")).forEach(f=>{if(r.has(f))throw new Error("Serialize Error: Duplicate key: "+f);r.add(f)}),o.concat(u)},[]),i=t.unknownKeyVals?t.unknownKeyVals.filter(o=>!r.has(o.key.toString("hex"))):[];return n.concat(i).sort(UJ)}function R9({globalMap:t,inputs:e,outputs:r}){return{globalKeyVals:Dv(t,Cv.globals),inputKeyVals:e.map(n=>Dv(n,Cv.inputs)),outputKeyVals:r.map(n=>Dv(n,Cv.outputs))}}pb.psbtToKeyVals=R9});var Nv=B(yb=>{"use strict";l();h();function M9(t){for(var e in t)yb.hasOwnProperty(e)||(yb[e]=t[e])}Object.defineProperty(yb,"__esModule",{value:!0});M9(O9());M9(L9())});var H9=B(Rv=>{"use strict";l();h();Object.defineProperty(Rv,"__esModule",{value:!0});var Ov=Nv();function RJ(t){let e=t[0],r=Ov.psbtToKeyVals(e),n=t.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=F9(e);if(i===void 0)throw new Error("Combine: Self missing transaction");let o=fd(r.globalKeyVals),s=r.inputKeyVals.map(fd),a=r.outputKeyVals.map(fd);for(let c of n){let u=F9(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let d=Ov.psbtToKeyVals(c);fd(d.globalKeyVals).forEach(Uv(o,r.globalKeyVals,d.globalKeyVals)),d.inputKeyVals.map(fd).forEach((g,x)=>g.forEach(Uv(s[x],r.inputKeyVals[x],d.inputKeyVals[x]))),d.outputKeyVals.map(fd).forEach((g,x)=>g.forEach(Uv(a[x],r.outputKeyVals[x],d.outputKeyVals[x])))}return Ov.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}Rv.combine=RJ;function Uv(t,e,r){return n=>{if(t.has(n))return;let i=r.filter(o=>o.key.toString("hex")===n)[0];e.push(i),t.add(n)}}function F9(t){return t.globalMap.unsignedTx}function fd(t){let e=new Set;return t.forEach(r=>{let n=r.key.toString("hex");if(e.has(n))throw new Error("Combine: KeyValue Map keys should be unique");e.add(n)}),e}});var Mv=B(nn=>{"use strict";l();h();Object.defineProperty(nn,"__esModule",{value:!0});var LJ=lb();function V9(t,e){let r=t[e];if(r===void 0)throw new Error(`No input #${e}`);return r}nn.checkForInput=V9;function q9(t,e){let r=t[e];if(r===void 0)throw new Error(`No output #${e}`);return r}nn.checkForOutput=q9;function MJ(t,e,r){if(t.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(e&&e.filter(n=>n.key.equals(t.key)).length!==0)throw new Error(`Duplicate Key: ${t.key.toString("hex")}`)}nn.checkHasKey=MJ;function FJ(t){let e=0;return Object.keys(t).forEach(r=>{Number(isNaN(Number(r)))&&e++}),e}nn.getEnumLength=FJ;function HJ(t,e){let r=!1;if(e.nonWitnessUtxo||e.witnessUtxo){let n=!!e.redeemScript,i=!!e.witnessScript,o=!n||!!e.finalScriptSig,s=!i||!!e.finalScriptWitness,a=!!e.finalScriptSig||!!e.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${t} has too much or too little data to clean`)}nn.inputCheckUncleanFinalized=HJ;function K9(t,e,r,n){throw new Error(`Data for ${t} key ${e} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function Lv(t){return(e,r)=>{for(let n of Object.keys(e)){let i=e[n],{canAdd:o,canAddToArray:s,check:a,expected:c}=LJ[t+"s"][n]||{},u=!!s;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||K9(t,n,c,i);let d=r[n]||[],f=new Set;if(!i.every(p=>s(d,p,f)))throw new Error("Can not add duplicate data to array");r[n]=d.concat(i)}else{if(a(i)||K9(t,n,c,i),!o(r,i))throw new Error(`Can not add duplicate data to ${t}`);r[n]=i}}}}nn.updateGlobal=Lv("global");nn.updateInput=Lv("input");nn.updateOutput=Lv("output");function KJ(t,e){let r=t.length-1,n=V9(t,r);nn.updateInput(e,n)}nn.addInputAttributes=KJ;function VJ(t,e){let r=t.length-1,n=q9(t,r);nn.updateOutput(e,n)}nn.addOutputAttributes=VJ;function qJ(t,e){if(!Buffer.isBuffer(e)||e.length<4)throw new Error("Set Version: Invalid Transaction");return e.writeUInt32LE(t,0),e}nn.defaultVersionSetter=qJ;function zJ(t,e){if(!Buffer.isBuffer(e)||e.length<4)throw new Error("Set Locktime: Invalid Transaction");return e.writeUInt32LE(t,e.length-4),e}nn.defaultLocktimeSetter=zJ});var j9=B(Kv=>{"use strict";l();h();Object.defineProperty(Kv,"__esModule",{value:!0});var jJ=H9(),z9=Nv(),Fv=Pr(),Kr=Mv(),Hv=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,r){let n=Buffer.from(e,"base64");return this.fromBuffer(n,r)}static fromHex(e,r){let n=Buffer.from(e,"hex");return this.fromBuffer(n,r)}static fromBuffer(e,r){let n=z9.psbtFromBuffer(e,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return z9.psbtToBuffer(this)}updateGlobal(e){return Kr.updateGlobal(e,this.globalMap),this}updateInput(e,r){let n=Kr.checkForInput(this.inputs,e);return Kr.updateInput(r,n),this}updateOutput(e,r){let n=Kr.checkForOutput(this.outputs,e);return Kr.updateOutput(r,n),this}addUnknownKeyValToGlobal(e){return Kr.checkHasKey(e,this.globalMap.unknownKeyVals,Kr.getEnumLength(Fv.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,r){let n=Kr.checkForInput(this.inputs,e);return Kr.checkHasKey(r,n.unknownKeyVals,Kr.getEnumLength(Fv.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(e,r){let n=Kr.checkForOutput(this.outputs,e);return Kr.checkHasKey(r,n.unknownKeyVals,Kr.getEnumLength(Fv.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});let r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),Kr.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});let r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToOutput(n,i)),Kr.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){let r=Kr.checkForInput(this.inputs,e);Kr.inputCheckUncleanFinalized(e,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...e){let r=jJ.combine([this].concat(e));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};Kv.Psbt=Hv});var gb=B(It=>{"use strict";l();h();Object.defineProperty(It,"__esModule",{value:!0});It.signatureBlocksAction=It.checkInputForSig=It.pubkeyInScript=It.pubkeyPositionInScript=It.witnessStackToScriptWitness=It.isP2TR=It.isP2SHScript=It.isP2WSHScript=It.isP2WPKH=It.isP2PKH=It.isP2PK=It.isP2MS=void 0;var W9=Ya(),H0=bn(),mb=ud(),WJ=ko(),iu=ad();function ou(t){return e=>{try{return t({output:e}),!0}catch{return!1}}}It.isP2MS=ou(iu.p2ms);It.isP2PK=ou(iu.p2pk);It.isP2PKH=ou(iu.p2pkh);It.isP2WPKH=ou(iu.p2wpkh);It.isP2WSHScript=ou(iu.p2wsh);It.isP2SHScript=ou(iu.p2sh);It.isP2TR=ou(iu.p2tr);function GJ(t){let e=Buffer.allocUnsafe(0);function r(s){e=Buffer.concat([e,Buffer.from(s)])}function n(s){let a=e.length,c=W9.encodingLength(s);e=Buffer.concat([e,Buffer.allocUnsafe(c)]),W9.encode(s,e,a)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(t),e}It.witnessStackToScriptWitness=GJ;function G9(t,e){let r=(0,WJ.hash160)(t),n=t.slice(1,33),i=H0.decompile(e);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o.equals(t)||o.equals(r)||o.equals(n))}It.pubkeyPositionInScript=G9;function $J(t,e){return G9(t,e)!==-1}It.pubkeyInScript=$J;function YJ(t,e){return QJ(t).some(n=>$9(n,H0.signature.decode,e))}It.checkInputForSig=YJ;function $9(t,e,r){let{hashType:n}=e(t),i=[];switch(n&mb.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case mb.Transaction.SIGHASH_ALL:break;case mb.Transaction.SIGHASH_SINGLE:case mb.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}It.signatureBlocksAction=$9;function QJ(t){let e=[];if((t.partialSig||[]).length===0){if(!t.finalScriptSig&&!t.finalScriptWitness)return[];e=XJ(t)}else e=t.partialSig;return e.map(r=>r.signature)}function XJ(t){let e=t.finalScriptSig?H0.decompile(t.finalScriptSig)||[]:[],r=t.finalScriptWitness?H0.decompile(t.finalScriptWitness)||[]:[];return e.concat(r).filter(n=>Buffer.isBuffer(n)&&H0.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var Q9=B(Ft=>{"use strict";l();h();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.checkTaprootInputForSigs=Ft.tapTreeFromList=Ft.tapTreeToList=Ft.tweakInternalPubKey=Ft.checkTaprootOutputFields=Ft.checkTaprootInputFields=Ft.isTaprootOutput=Ft.isTaprootInput=Ft.serializeTaprootSignature=Ft.tapScriptFinalizer=Ft.toXOnly=void 0;var jv=Fr(),ZJ=ud(),wb=gb(),Xa=eb(),JJ=ad(),eee=gb(),tee=t=>t.length===32?t:t.slice(1,33);Ft.toXOnly=tee;function ree(t,e,r){let n=wee(e,t,r);try{let o=bee(e,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,wb.witnessStackToScriptWitness)(o)}}catch(i){throw new Error(`Can not finalize taproot input #${t}: ${i}`)}}Ft.tapScriptFinalizer=ree;function nee(t,e){let r=e?Buffer.from([e]):Buffer.from([]);return Buffer.concat([t,r])}Ft.serializeTaprootSignature=nee;function bb(t){return t&&!!(t.tapInternalKey||t.tapMerkleRoot||t.tapLeafScript&&t.tapLeafScript.length||t.tapBip32Derivation&&t.tapBip32Derivation.length||t.witnessUtxo&&(0,wb.isP2TR)(t.witnessUtxo.script))}Ft.isTaprootInput=bb;function xb(t,e){return t&&!!(t.tapInternalKey||t.tapTree||t.tapBip32Derivation&&t.tapBip32Derivation.length||e&&(0,wb.isP2TR)(e))}Ft.isTaprootOutput=xb;function iee(t,e,r){yee(t,e,r),gee(t,e,r)}Ft.checkTaprootInputFields=iee;function oee(t,e,r){mee(t,e,r),see(t,e)}Ft.checkTaprootOutputFields=oee;function see(t,e){if(!e.tapTree&&!e.tapInternalKey)return;let r=e.tapInternalKey||t.tapInternalKey,n=e.tapTree||t.tapTree;if(r){let{script:i}=t,o=aee(r,n);if(i&&!i.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}function aee(t,e){let r=e&&Y9(e.leaves),{output:n}=(0,JJ.p2tr)({internalPubkey:t,scriptTree:r});return n}function cee(t,e){let r=e.tapInternalKey,n=r&&(0,Xa.tweakKey)(r,e.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${t}. Public key: ${r&&r.toString("hex")}`);return n.x}Ft.tweakInternalPubKey=cee;function uee(t){if(!(0,jv.isTaptree)(t))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return qv(t)}Ft.tapTreeToList=uee;function Y9(t=[]){return t.length===1&&t[0].depth===0?{output:t[0].script,version:t[0].leafVersion}:pee(t)}Ft.tapTreeFromList=Y9;function fee(t,e){return lee(t).some(n=>(0,eee.signatureBlocksAction)(n,dee,e))}Ft.checkTaprootInputForSigs=fee;function dee(t){return{signature:t.slice(0,64),hashType:t.slice(64)[0]||ZJ.Transaction.SIGHASH_DEFAULT}}function lee(t){let e=[];if(t.tapKeySig&&e.push(t.tapKeySig),t.tapScriptSig&&e.push(...t.tapScriptSig.map(r=>r.signature)),!e.length){let r=hee(t.finalScriptWitness);r&&e.push(r)}return e}function hee(t){if(!t)return;let e=t.slice(2);if(e.length===64||e.length===65)return e}function qv(t,e=[],r=0){if(r>Xa.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return t?(0,jv.isTapleaf)(t)?(e.push({depth:r,leafVersion:t.version||Xa.LEAF_VERSION_TAPSCRIPT,script:t.output}),e):(t[0]&&qv(t[0],e,r+1),t[1]&&qv(t[1],e,r+1),e):[]}function pee(t){let e;for(let r of t)if(e=zv(r,e),!e)throw new Error("No room left to insert tapleaf in tree");return e}function zv(t,e,r=0){if(r>Xa.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(t.depth===r)return e?void 0:{output:t.script,version:t.leafVersion};if((0,jv.isTapleaf)(e))return;let n=zv(t,e&&e[0],r+1);if(n)return[n,e&&e[1]];let i=zv(t,e&&e[1],r+1);if(i)return[e&&e[0],i]}function yee(t,e,r){let n=bb(t)&&dd(e),i=dd(t)&&bb(e),o=t===e&&bb(e)&&dd(e);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function mee(t,e,r){let n=xb(t)&&dd(e),i=dd(t)&&xb(e),o=t===e&&xb(e)&&dd(e);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function gee(t,e,r){if(e.tapMerkleRoot){let n=(e.tapLeafScript||[]).every(o=>Vv(o,e.tapMerkleRoot)),i=(t.tapLeafScript||[]).every(o=>Vv(o,e.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(t.tapMerkleRoot&&!(e.tapLeafScript||[]).every(i=>Vv(i,t.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function Vv(t,e){if(!e)return!0;let r=(0,Xa.tapleafHash)({output:t.script,version:t.leafVersion});return(0,Xa.rootHashFromPath)(t.controlBlock,r).equals(e)}function bee(t,e){let r=(0,Xa.tapleafHash)({output:e.script,version:e.leafVersion});return(t.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>xee(e.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function xee(t,e){return Object.assign({positionInScript:(0,wb.pubkeyPositionInScript)(e.pubkey,t)},e)}function wee(t,e,r){if(!t.tapScriptSig||!t.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${e}. No tapleaf script signature provided.`);let n=(t.tapLeafScript||[]).sort((i,o)=>i.controlBlock.length-o.controlBlock.length).find(i=>Aee(i,t.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${e}. Signature for tapleaf script not found.`);return n}function Aee(t,e,r){let n=(0,Xa.tapleafHash)({output:t.script,version:t.leafVersion});return(!r||r.equals(n))&&e.find(o=>o.leafHash.equals(n))!==void 0}function dd(t){return t&&!!(t.redeemScript||t.witnessScript||t.bip32Derivation&&t.bip32Derivation.length)}});var wB=B(Tb=>{"use strict";l();h();Object.defineProperty(Tb,"__esModule",{value:!0});Tb.Psbt=void 0;var X9=j9(),Z9=Ya(),vn=Mv(),J9=yv(),Sb=O0(),See=vi(),Ti=ad(),vee=eb(),ys=bn(),Vr=ud(),Wt=Q9(),ur=gb(),Eee={network:See.bitcoin,maximumFeeRate:5e3},Gv=class t{static fromBase64(e,r={}){let n=Buffer.from(e,"base64");return this.fromBuffer(n,r)}static fromHex(e,r={}){let n=Buffer.from(e,"hex");return this.fromBuffer(n,r)}static fromBuffer(e,r={}){let n=X9.Psbt.fromBuffer(e,Iee),i=new t(r,n);return Bee(i.__CACHE.__TX,i.__CACHE),i}constructor(e={},r=new X9.Psbt(new vb)){this.data=r,this.opts=Object.assign({},Eee,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,o,s,a)=>Object.defineProperty(i,o,{enumerable:s,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,Sb.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let r;try{r=(0,J9.fromOutputScript)(e.script,this.opts.network)}catch{}return{script:(0,Sb.cloneBuffer)(e.script),value:e.value,address:r}})}combine(...e){return this.data.combine(...e.map(r=>r.data)),this}clone(){let e=t.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){Ab(e),this.opts.maximumFeeRate=e}setVersion(e){Ab(e),K0(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=e,r.__EXTRACTED_TX=void 0,this}setLocktime(e){Ab(e),K0(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=e,r.__EXTRACTED_TX=void 0,this}setInputSequence(e,r){Ab(r),K0(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=e)throw new Error("Input index too high");return n.__TX.ins[e].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(r=>this.addInput(r)),this}addInput(e){if(arguments.length>1||!e||e.hash===void 0||e.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,Wt.checkTaprootInputFields)(e,e,"addInput"),K0(this.data.inputs,"addInput"),e.witnessScript&&Eb(e.witnessScript);let r=this.__CACHE;this.data.addInput(e);let n=r.__TX.ins[r.__TX.ins.length-1];fB(r,n);let i=this.data.inputs.length-1,o=this.data.inputs[i];return o.nonWitnessUtxo&&Yv(this.__CACHE,o,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(r=>this.addOutput(r)),this}addOutput(e){if(arguments.length>1||!e||e.value===void 0||e.address===void 0&&e.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");K0(this.data.inputs,"addOutput");let{address:r}=e;if(typeof r=="string"){let{network:i}=this.opts,o=(0,J9.toOutputScript)(r,i);e=Object.assign(e,{script:o})}(0,Wt.checkTaprootOutputFields)(e,e,"addOutput");let n=this.__CACHE;return this.data.addOutput(e),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(cB))throw new Error("Not finalized");let r=this.__CACHE;if(e||Tee(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return mB(this.data.inputs,n,r,!0),n}getFeeRate(){return iB("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return iB("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,vn.checkForInput)(this.data.inputs,0),V0(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,r){let n=(0,vn.checkForInput)(this.data.inputs,e);return(0,Wt.isTaprootInput)(n)?this._finalizeTaprootInput(e,n,void 0,r):this._finalizeInput(e,n,r)}finalizeTaprootInput(e,r,n=Wt.tapScriptFinalizer){let i=(0,vn.checkForInput)(this.data.inputs,e);if((0,Wt.isTaprootInput)(i))return this._finalizeTaprootInput(e,i,r,n);throw new Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,r,n=Cee){let{script:i,isP2SH:o,isP2WSH:s,isSegwit:a}=Uee(e,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${e}`);_ee(r);let{finalScriptSig:c,finalScriptWitness:u}=n(e,r,i,a,o,s);if(c&&this.data.updateInput(e,{finalScriptSig:c}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,r,n,i=Wt.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(r.tapKeySig){let o=Ti.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),s=(0,ur.witnessStackToScriptWitness)(o.witness);this.data.updateInput(e,{finalScriptWitness:s})}else{let{finalScriptWitness:o}=i(e,r,n);this.data.updateInput(e,{finalScriptWitness:o})}return this.data.clearFinalizedInput(e),this}getInputType(e){let r=(0,vn.checkForInput)(this.data.inputs,e),n=gB(e,r,this.__CACHE),i=kb(n,e,"input",r.redeemScript||Hee(r.finalScriptSig),r.witnessScript||Kee(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=xB(i.meaningfulScript);return o+s}inputHasPubkey(e,r){let n=(0,vn.checkForInput)(this.data.inputs,e);return Mee(r,n,e,this.__CACHE)}inputHasHDKey(e,r){let n=(0,vn.checkForInput)(this.data.inputs,e),i=tB(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(e,r){let n=(0,vn.checkForOutput)(this.data.outputs,e);return Fee(r,n,e,this.__CACHE)}outputHasHDKey(e,r){let n=(0,vn.checkForOutput)(this.data.outputs,e),i=tB(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(e){return(0,vn.checkForInput)(this.data.inputs,0),V0(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,e)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(e,r,n){let i=this.data.inputs[e];return(0,Wt.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(e,r,n):this._validateSignaturesOfInput(e,r,n)}_validateSignaturesOfInput(e,r,n){let i=this.data.inputs[e],o=(i||{}).partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let s=n?o.filter(f=>f.pubkey.equals(n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,d;for(let f of s){let p=ys.signature.decode(f.signature),{hash:m,script:g}=d!==p.hashType?lB(e,Object.assign({},i,{sighashType:p.hashType}),this.__CACHE,!0):{hash:c,script:u};d=p.hashType,c=m,u=g,uB(f.pubkey,g,"verify"),a.push(r(f.pubkey,m,p.signature))}return a.every(f=>f===!0)}validateSignaturesOfTaprootInput(e,r,n){let i=this.data.inputs[e],o=(i||{}).tapKeySig,s=(i||{}).tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,Wt.toXOnly)(n);let a=n?$v(e,i,this.data.inputs,n,this.__CACHE):Nee(e,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(d=>!d.leafHash),u=0;if(o&&c){if(!r(c.pubkey,c.hash,sB(o)))return!1;u++}if(s)for(let d of s){let f=a.find(p=>d.pubkey.equals(p.pubkey));if(f){if(!r(d.pubkey,f.hash,sB(d.signature)))return!1;u++}}return u>0}signAllInputsHD(e,r=[Vr.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of V0(this.data.inputs.length))try{this.signInputHD(i,e,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(e,r=[Vr.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!e||!e.publicKey||!e.fingerprint)return i(new Error("Need HDSigner to sign input"));let o=[],s=[];for(let a of V0(this.data.inputs.length))s.push(this.signInputHDAsync(a,e,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(e,r,n=[Vr.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return aB(e,this.data.inputs,r).forEach(o=>this.signInput(e,o,n)),this}signInputHDAsync(e,r,n=[Vr.Transaction.SIGHASH_ALL]){return new Promise((i,o)=>{if(!r||!r.publicKey||!r.fingerprint)return o(new Error("Need HDSigner to sign input"));let a=aB(e,this.data.inputs,r).map(c=>this.signInputAsync(e,c,n));return Promise.all(a).then(()=>{i()}).catch(o)})}signAllInputs(e,r){if(!e||!e.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of V0(this.data.inputs.length))try{this.signInput(i,e,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(e,r){return new Promise((n,i)=>{if(!e||!e.publicKey)return i(new Error("Need Signer to sign input"));let o=[],s=[];for(let[a]of this.data.inputs.entries())s.push(this.signInputAsync(a,e,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(e,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,vn.checkForInput)(this.data.inputs,e);return(0,Wt.isTaprootInput)(i)?this._signTaprootInput(e,i,r,void 0,n):this._signInput(e,r,n)}signTaprootInput(e,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,vn.checkForInput)(this.data.inputs,e);if((0,Wt.isTaprootInput)(o))return this._signTaprootInput(e,o,r,n,i);throw new Error(`Input #${e} is not of type Taproot.`)}_signInput(e,r,n=[Vr.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=oB(this.data.inputs,e,r.publicKey,this.__CACHE,n),s=[{pubkey:r.publicKey,signature:ys.signature.encode(r.sign(i),o)}];return this.data.updateInput(e,{partialSig:s}),this}_signTaprootInput(e,r,n,i,o=[Vr.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(e,r,n,i,o),a=s.filter(u=>!u.leafHash).map(u=>(0,Wt.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=s.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,Wt.toXOnly)(n.publicKey),signature:(0,Wt.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(e,{tapKeySig:a}),c.length&&this.data.updateInput(e,{tapScriptSig:c}),this}signInputAsync(e,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,vn.checkForInput)(this.data.inputs,e);return(0,Wt.isTaprootInput)(i)?this._signTaprootInputAsync(e,i,r,void 0,n):this._signInputAsync(e,r,n)})}signTaprootInputAsync(e,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,vn.checkForInput)(this.data.inputs,e);if((0,Wt.isTaprootInput)(o))return this._signTaprootInputAsync(e,o,r,n,i);throw new Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,r,n=[Vr.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=oB(this.data.inputs,e,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(s=>{let a=[{pubkey:r.publicKey,signature:ys.signature.encode(s,o)}];this.data.updateInput(e,{partialSig:a})})}async _signTaprootInputAsync(e,r,n,i,o=[Vr.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(e,r,n,i,o),a=[],c=s.filter(d=>!d.leafHash)[0];if(c){let d=Promise.resolve(n.signSchnorr(c.hash)).then(f=>({tapKeySig:(0,Wt.serializeTaprootSignature)(f,r.sighashType)}));a.push(d)}let u=s.filter(d=>!!d.leafHash);if(u.length){let d=u.map(f=>Promise.resolve(n.signSchnorr(f.hash)).then(p=>({tapScriptSig:[{pubkey:(0,Wt.toXOnly)(n.publicKey),signature:(0,Wt.serializeTaprootSignature)(p,r.sighashType),leafHash:f.leafHash}]})));a.push(...d)}return Promise.all(a).then(d=>{d.forEach(f=>this.data.updateInput(e,f))})}checkTaprootHashesForSig(e,r,n,i,o){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${e}.`);let s=$v(e,r,this.data.inputs,n.publicKey,this.__CACHE,i,o);if(!s||!s.length)throw new Error(`Can not sign for input #${e} with the key ${n.publicKey.toString("hex")}`);return s}toBuffer(){return Wv(this.__CACHE),this.data.toBuffer()}toHex(){return Wv(this.__CACHE),this.data.toHex()}toBase64(){return Wv(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,r){return r.witnessScript&&Eb(r.witnessScript),(0,Wt.checkTaprootInputFields)(this.data.inputs[e],r,"updateInput"),this.data.updateInput(e,r),r.nonWitnessUtxo&&Yv(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,r){let n=this.data.outputs[e];return(0,Wt.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(e,r),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,r){return this.data.addUnknownKeyValToInput(e,r),this}addUnknownKeyValToOutput(e,r){return this.data.addUnknownKeyValToOutput(e,r),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}};Tb.Psbt=Gv;var Iee=t=>new vb(t),vb=class{constructor(e=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=Vr.Transaction.fromBuffer(e),Pee(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(e.hash===void 0||e.index===void 0||!Buffer.isBuffer(e.hash)&&typeof e.hash!="string"||typeof e.index!="number")throw new Error("Error adding input.");let r=typeof e.hash=="string"?(0,Sb.reverseBuffer)(Buffer.from(e.hash,"hex")):e.hash;this.tx.addInput(r,e.index,e.sequence)}addOutput(e){if(e.script===void 0||e.value===void 0||!Buffer.isBuffer(e.script)||typeof e.value!="number")throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}};function kee(t,e,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return eB(1,t.partialSig);case"multisig":let n=Ti.p2ms({output:e});return eB(n.m,t.partialSig,n.pubkeys);default:return!1}}function Wv(t){if(t.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function eB(t,e,r){if(!e)return!1;let n;if(r?n=r.map(i=>{let o=Vee(i);return e.find(s=>s.pubkey.equals(o))}).filter(i=>!!i):n=e,n.length>t)throw new Error("Too many signatures");return n.length===t}function cB(t){return!!t.finalScriptSig||!!t.finalScriptWitness}function tB(t){return e=>!(!e.masterFingerprint.equals(t.fingerprint)||!t.derivePath(e.path).publicKey.equals(e.pubkey))}function Ab(t){if(typeof t!="number"||t!==Math.floor(t)||t>4294967295||t<0)throw new Error("Invalid 32 bit integer")}function Tee(t,e,r){let n=e.__FEE_RATE||t.getFeeRate(),i=e.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function K0(t,e){t.forEach(r=>{if((0,Wt.isTaprootInput)(r)?(0,Wt.checkTaprootInputForSigs)(r,e):(0,ur.checkInputForSig)(r,e))throw new Error("Can not modify transaction, signatures exist.")})}function _ee(t){if(!t.sighashType||!t.partialSig)return;let{partialSig:e,sighashType:r}=t;e.forEach(n=>{let{hashType:i}=ys.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function uB(t,e,r){if(!(0,ur.pubkeyInScript)(t,e))throw new Error(`Can not ${r} for this input with the key ${t.toString("hex")}`)}function Pee(t){if(!t.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function Bee(t,e){t.ins.forEach(r=>{fB(e,r)})}function fB(t,e){let r=(0,Sb.reverseBuffer)(Buffer.from(e.hash)).toString("hex")+":"+e.index;if(t.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[r]=1}function dB(t,e){return(r,n,i,o)=>{let s=t({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${e} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}var rB=dB(Ti.p2sh,"Redeem script"),nB=dB(Ti.p2wsh,"Witness script");function iB(t,e,r,n){if(!r.every(cB))throw new Error(`PSBT must be finalized to calculate ${e}`);if(t==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(t==="__FEE"&&n.__FEE)return n.__FEE;let i,o=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),mB(r,i,n,o),t==="__FEE_RATE")return n.__FEE_RATE;if(t==="__FEE")return n.__FEE}function Cee(t,e,r,n,i,o){let s=xB(r);if(!kee(e,r,s))throw new Error(`Can not finalize input #${t}`);return Dee(r,s,e.partialSig,n,i,o)}function Dee(t,e,r,n,i,o){let s,a,c=Oee(t,e,r),u=o?Ti.p2wsh({redeem:c}):null,d=i?Ti.p2sh({redeem:u||c}):null;return n?(u?a=(0,ur.witnessStackToScriptWitness)(u.witness):a=(0,ur.witnessStackToScriptWitness)(c.witness),d&&(s=d.input)):d?s=d.input:s=c.input,{finalScriptSig:s,finalScriptWitness:a}}function oB(t,e,r,n,i){let o=(0,vn.checkForInput)(t,e),{hash:s,sighashType:a,script:c}=lB(e,o,n,!1,i);return uB(r,c,"sign"),{hash:s,sighashType:a}}function lB(t,e,r,n,i){let o=r.__TX,s=e.sighashType||Vr.Transaction.SIGHASH_ALL;pB(s,i);let a,c;if(e.nonWitnessUtxo){let f=Ib(r,e,t),p=o.ins[t].hash,m=f.getHash();if(!p.equals(m))throw new Error(`Non-witness UTXO hash for input #${t} doesn't match the hash specified in the prevout`);let g=o.ins[t].index;c=f.outs[g]}else if(e.witnessUtxo)c=e.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:d}=kb(c.script,t,"input",e.redeemScript,e.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(d)>=0)a=o.hashForWitnessV0(t,u,c.value,s);else if((0,ur.isP2WPKH)(u)){let f=Ti.p2pkh({hash:u.slice(2)}).output;a=o.hashForWitnessV0(t,f,c.value,s)}else{if(e.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${t} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(t,u,s)}return{script:u,sighashType:s,hash:a}}function Nee(t,e,r,n){let i=[];if(e.tapInternalKey){let s=hB(t,e,n);s&&i.push(s)}if(e.tapScriptSig){let s=e.tapScriptSig.map(a=>a.pubkey);i.push(...s)}return i.map(s=>$v(t,e,r,s,n)).flat()}function hB(t,e,r){let{script:n}=Qv(t,e,r);return(0,ur.isP2TR)(n)?n.subarray(2,34):null}function sB(t){return t.length===64?t:t.subarray(0,64)}function $v(t,e,r,n,i,o,s){let a=i.__TX,c=e.sighashType||Vr.Transaction.SIGHASH_DEFAULT;pB(c,s);let u=r.map((g,x)=>Qv(x,g,i)),d=u.map(g=>g.script),f=u.map(g=>g.value),p=[];if(e.tapInternalKey&&!o){let g=hB(t,e,i)||Buffer.from([]);if((0,Wt.toXOnly)(n).equals(g)){let x=a.hashForWitnessV1(t,d,f,c);p.push({pubkey:n,hash:x})}}let m=(e.tapLeafScript||[]).filter(g=>(0,ur.pubkeyInScript)(n,g.script)).map(g=>{let x=(0,vee.tapleafHash)({output:g.script,version:g.leafVersion});return Object.assign({hash:x},g)}).filter(g=>!o||o.equals(g.hash)).map(g=>{let x=a.hashForWitnessV1(t,d,f,Vr.Transaction.SIGHASH_DEFAULT,g.hash);return{pubkey:n,hash:x,leafHash:g.hash}});return p.concat(m)}function pB(t,e){if(e&&e.indexOf(t)<0){let r=Lee(t);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function Oee(t,e,r){let n;switch(e){case"multisig":let i=Ree(t,r);n=Ti.p2ms({output:t,signatures:i});break;case"pubkey":n=Ti.p2pk({output:t,signature:r[0].signature});break;case"pubkeyhash":n=Ti.p2pkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=Ti.p2wpkh({output:t,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function Uee(t,e,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!e.redeemScript,i.isP2WSH=!!e.witnessScript,e.witnessScript)i.script=e.witnessScript;else if(e.redeemScript)i.script=e.redeemScript;else if(e.nonWitnessUtxo){let o=Ib(r,e,t),s=n.ins[t].index;i.script=o.outs[s].script}else e.witnessUtxo&&(i.script=e.witnessUtxo.script);return(e.witnessScript||(0,ur.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function aB(t,e,r){let n=(0,vn.checkForInput)(e,t);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(s=>{if(s.masterFingerprint.equals(r.fingerprint))return s}).filter(s=>!!s);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(s=>{let a=r.derivePath(s.path);if(!s.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function Ree(t,e){return Ti.p2ms({output:t}).pubkeys.map(n=>(e.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function yB(t){let e=0;function r(s){return e+=s,t.slice(e-s,e)}function n(){let s=Z9.decode(t,e);return e+=Z9.decode.bytes,s}function i(){return r(n())}function o(){let s=n(),a=[];for(let c=0;c<s;c++)a.push(i());return a}return o()}function Lee(t){let e=t&Vr.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(t&31){case Vr.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case Vr.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case Vr.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE";break}return e}function Yv(t,e,r){t.__NON_WITNESS_UTXO_BUF_CACHE[r]=e.nonWitnessUtxo;let n=Vr.Transaction.fromBuffer(e.nonWitnessUtxo);t.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=t,o=r;delete e.nonWitnessUtxo,Object.defineProperty(e,"nonWitnessUtxo",{enumerable:!0,get(){let s=i.__NON_WITNESS_UTXO_BUF_CACHE[o],a=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(s!==void 0)return s;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=c,c}},set(s){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=s}})}function mB(t,e,r,n){let i=0;t.forEach((c,u)=>{if(n&&c.finalScriptSig&&(e.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(e.ins[u].witness=yB(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let d=Ib(r,c,u),f=e.ins[u].index,p=d.outs[f];i+=p.value}});let o=e.outs.reduce((c,u)=>c+u.value,0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");let a=e.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=e,r.__FEE_RATE=Math.floor(s/a)}function Ib(t,e,r){let n=t.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||Yv(t,e,r),n[r]}function gB(t,e,r){let{script:n}=Qv(t,e,r);return n}function Qv(t,e,r){if(e.witnessUtxo!==void 0)return{script:e.witnessUtxo.script,value:e.witnessUtxo.value};if(e.nonWitnessUtxo!==void 0){let i=Ib(r,e,t).outs[r.__TX.ins[t].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function Mee(t,e,r,n){let i=gB(r,e,n),{meaningfulScript:o}=kb(i,r,"input",e.redeemScript,e.witnessScript);return(0,ur.pubkeyInScript)(t,o)}function Fee(t,e,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:o}=kb(i,r,"output",e.redeemScript,e.witnessScript);return(0,ur.pubkeyInScript)(t,o)}function Hee(t){if(!t)return;let e=ys.decompile(t);if(!e)return;let r=e[e.length-1];if(!(!Buffer.isBuffer(r)||bB(r)||qee(r)||!ys.decompile(r)))return r}function Kee(t){if(!t)return;let e=yB(t),r=e[e.length-1];if(!(bB(r)||!ys.decompile(r)))return r}function Vee(t){if(t.length===65){let e=t[64]&1,r=t.slice(0,33);return r[0]=2|e,r}return t.slice()}function bB(t){return t.length===33&&ys.isCanonicalPubKey(t)}function qee(t){return ys.isCanonicalScriptSignature(t)}function kb(t,e,r,n,i){let o=(0,ur.isP2SHScript)(t),s=o&&n&&(0,ur.isP2WSHScript)(n),a=(0,ur.isP2WSHScript)(t);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return s?(c=i,rB(e,t,n,r),nB(e,n,i,r),Eb(c)):a?(c=i,nB(e,t,i,r),Eb(c)):o?(c=n,rB(e,t,n,r)):c=t,{meaningfulScript:c,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function Eb(t){if((0,ur.isP2WPKH)(t)||(0,ur.isP2SHScript)(t))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function xB(t){return(0,ur.isP2WPKH)(t)?"witnesspubkeyhash":(0,ur.isP2PKH)(t)?"pubkeyhash":(0,ur.isP2MS)(t)?"multisig":(0,ur.isP2PK)(t)?"pubkey":"nonstandard"}function V0(t){return[...Array(t).keys()]}});var Xv=B(Qt=>{"use strict";l();h();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.initEccLib=Qt.Transaction=Qt.opcodes=Qt.Psbt=Qt.Block=Qt.script=Qt.payments=Qt.networks=Qt.crypto=Qt.address=void 0;var zee=yv();Qt.address=zee;var jee=ko();Qt.crypto=jee;var Wee=vi();Qt.networks=Wee;var Gee=ad();Qt.payments=Gee;var $ee=bn();Qt.script=$ee;var Yee=V7();Object.defineProperty(Qt,"Block",{enumerable:!0,get:function(){return Yee.Block}});var Qee=wB();Object.defineProperty(Qt,"Psbt",{enumerable:!0,get:function(){return Qee.Psbt}});var Xee=Ag();Object.defineProperty(Qt,"opcodes",{enumerable:!0,get:function(){return Xee.OPS}});var Zee=ud();Object.defineProperty(Qt,"Transaction",{enumerable:!0,get:function(){return Zee.Transaction}});var Jee=Jg();Object.defineProperty(Qt,"initEccLib",{enumerable:!0,get:function(){return Jee.initEccLib}})});l();h();var xc=j(Pi()),Xt=j(Zp()),$o=j(ws());l();h();Cd.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});l();h();var BH=(t,e)=>t+e,U4=t=>t.reduce(BH,0);var R4=xc.Buffer.alloc(64).fill(0),lw=t=>ai(t)?xc.Buffer.from(t.message.serialize()):t.serializeMessage(),Jp=t=>$o.default.encode(lw(t)),L4=t=>{try{return Jp(Xu(t,"bs58"))}catch{return Jp(Xu(t,"base64"))}},M4=t=>{try{return Xu(t,"bs58").version}catch{return Xu(t,"base64").version}},F4=t=>hw(yw(t)),ai=t=>t&&"version"in t,ey=(t,e)=>ai(t)?xc.Buffer.from(t.serialize()):t.serialize(e??{requireAllSignatures:!1,verifySignatures:!1}),hw=(t,e)=>$o.default.encode(ey(t,e)),H4=(t,e)=>ey(t,e).toString("base64"),Xu=(t,e)=>{let r;if(e==="base64")r=xc.Buffer.from(t,"base64");else if(e==="bs58")r=$o.default.decode(t);else throw new Error("Unsupported encoding");return Xt.VersionedTransaction.deserialize(r)};function pw(t){return ai(t)?t.signatures.filter(r=>r.every(i=>i===0)===!1).length>0:t.signatures.filter(({signature:r})=>r?r.find(i=>i!==0)!==void 0:!1).length>0}var K4=t=>{let e=t.map(r=>Xt.VersionedMessage.deserialize($o.default.decode(r)));return U4(e.map(r=>r.header.numRequiredSignatures))},yw=t=>{let e=$o.default.decode(t);if(Xt.VersionedMessage.deserializeMessageVersion(e)==="legacy"){let i=Xt.Message.from(e);return Xt.Transaction.populate(i,[])}let n=Xt.VersionedMessage.deserialize(e);return new Xt.VersionedTransaction(n)},V4=(t,e=[])=>{let r=$o.default.decode(t);if(Xt.VersionedMessage.deserializeMessageVersion(r)==="legacy"){let i=Xt.Message.from(r);return Xt.Transaction.populate(i,e.map(s=>s?$o.default.encode(s):$o.default.encode(R4)))}else{let i=Xt.VersionedMessage.deserialize(r);return new Xt.VersionedTransaction(i,e.map(s=>s||R4))}},q4=t=>t.compileMessage().accountKeys,mw=t=>ai(t)?t.message.recentBlockhash:t.recentBlockhash,z4=(t,e)=>{ai(t)?t.message.recentBlockhash=e:t.recentBlockhash=e},j4=async(t,e)=>{if(mw(t))return;let r=(await e.getLatestBlockhash("confirmed")).blockhash;z4(t,r)},W4=async(t,e)=>{if(pw(t))return;let r=(await e.getLatestBlockhash("confirmed")).blockhash;z4(t,r)},gw=(t,e)=>{ai(t)||(t.feePayer=e)},bw=t=>ai(t)?t.message.staticAccountKeys[0]:t.feePayer,G4=(t,e)=>{bw(t)||gw(t,e)},$4=(t,e)=>{ai(t)?t.sign(e):t.partialSign(...e)},Y4=t=>ai(t)?t.message.staticAccountKeys:t.signatures.map(e=>e.publicKey),Q4=t=>ai(t)?t.signatures.map(e=>xc.Buffer.from(e)):t.signatures.map(e=>e.signature).filter(e=>e!==null);function X4(t){if(!CH(xc.Buffer.from(t)))return!1;let e;try{e=Xt.Message.from(t)}catch{e=void 0}let r;try{r=Xt.VersionedMessage.deserialize(t)}catch{r=void 0}return!e&&!r||(e?.instructions?.length??0)===0&&(r?.compiledInstructions?.length??0)===0}function CH(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}var Z4=t=>Cd(t).dividedBy(Xt.LAMPORTS_PER_SOL),J4=t=>Cd(t).multipliedBy(Xt.LAMPORTS_PER_SOL);var zn={};iN(zn,{BufferLayout:()=>UH,Message:()=>Cn.Message,MessageV0:()=>Cn.MessageV0,Transaction:()=>Cn.Transaction,TransactionInstruction:()=>Cn.TransactionInstruction,TransactionMessage:()=>Cn.TransactionMessage,VersionedMessage:()=>Cn.VersionedMessage,VersionedTransaction:()=>Cn.VersionedTransaction,getAccountsFromTransaction:()=>q4,getFeePayer:()=>bw,getRecentBlockhash:()=>mw,getRequiredSignatures:()=>K4,getSignaturePubKeys:()=>Y4,getSignatures:()=>Q4,isAlreadySigned:()=>pw,isSafeMessage:()=>X4,isVersionedTransaction:()=>ai,lamportsToSolana:()=>Z4,messageAndSignaturesToTransaction:()=>V4,messageStringToTransaction:()=>yw,messageStringToTransactionString:()=>F4,setFeePayer:()=>gw,setFeePayerIfNotExists:()=>G4,setRecentBlockhashIfNotExists:()=>j4,setRecentBlockhashIfNotSigned:()=>W4,signWithAdditionalSigners:()=>$4,solanaInstructionEncodeData:()=>iI,solanaToLamports:()=>J4,transactionStringToMessageString:()=>L4,transactionStringToTransaction:()=>Xu,transactionStringToVersion:()=>M4,transactionToBase58TransactionString:()=>hw,transactionToBase64TransactionString:()=>H4,transactionToMessageString:()=>Jp,transactionToSerializedMessage:()=>lw,transactionToSerializedTransaction:()=>ey,u64:()=>rI});l();h();var UH=j(zd()),Cn=j(Zp());Ro(zn,j(Zp()));l();h();var eI=j(Nd()),tI=j(zd()),ty=j(s1()),DH=t=>{let e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},ry=t=>e=>{let r=(0,tI.blob)(t,e),{encode:n,decode:i}=DH(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return(0,ty.toBigIntLE)(eI.Buffer.from(c))},o.encode=(s,a,c)=>{let u=(0,ty.toBufferLE)(s,t);return n(u,a,c)},o},rI=ry(8),uae=ry(16),fae=ry(24),dae=ry(32);l();h();var nI=j(Nd());l();h();var NH=j(Nd()),Zu=j(zd());function xw(t,e){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let o=e[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return xw({layout:i},e[i.property]);return 0},n=0;return t.layout.fields.forEach(i=>{n+=r(i)}),n}function iI(t,e){let r=t.layout.span>=0?t.layout.span:xw(t,e),n=nI.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}l();h();l();h();l();h();l();h();var RH=j(hh(),1);var Sr=BigInt(0),Ze=BigInt(1),Ys=BigInt(2),LH=BigInt(8),oI=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Tt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:oI,n:oI,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var fI=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Tl=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),kae=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),MH=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),FH=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),HH=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),KH=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),hr=class t{constructor(e,r,n,i){this.x=e,this.y=r,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof Zt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Zt.ZERO)?t.ZERO:new t(e.x,e.y,Ze,Q(e.x*e.y))}static toAffineBatch(e){let r=zH(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){aI(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=Q(r*a),u=Q(o*i),d=Q(n*a),f=Q(s*i);return c===u&&d===f}negate(){return new t(Q(-this.x),this.y,this.z,Q(-this.t))}double(){let{x:e,y:r,z:n}=this,{a:i}=Tt,o=Q(e*e),s=Q(r*r),a=Q(Ys*Q(n*n)),c=Q(i*o),u=e+r,d=Q(Q(u*u)-o-s),f=c+s,p=f-a,m=c-s,g=Q(d*p),x=Q(f*m),w=Q(d*m),S=Q(p*f);return new t(g,x,S,w)}add(e){aI(e);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=e,d=Q((n-r)*(a+s)),f=Q((n+r)*(a-s)),p=Q(f-d);if(p===Sr)return this.double();let m=Q(i*Ys*u),g=Q(o*Ys*c),x=g+m,w=f+d,S=g-m,T=Q(x*p),A=Q(w*S),_=Q(x*S),C=Q(p*w);return new t(T,A,C,_)}subtract(e){return this.add(e.negate())}precomputeWindow(e){let r=1+256/e,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,r){!r&&this.equals(t.BASE)&&(r=Zt.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&vw.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=t.normalizeZ(i),vw.set(r,i)));let o=t.ZERO,s=t.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let p=0;p<a;p++){let m=p*c,g=Number(e&u);e>>=f,g>c&&(g-=d,e+=Ze);let x=m,w=m+Math.abs(g)-1,S=p%2!==0,T=g<0;g===0?s=s.add(sI(S,i[x])):o=o.add(sI(T,i[w]))}return t.normalizeZ([o,s])[0]}multiply(e,r){return this.wNAF(iy(e,Tt.l),r)}multiplyUnsafe(e){let r=iy(e,Tt.l,!1),n=t.BASE,i=t.ZERO;if(r===Sr)return i;if(this.equals(i)||r===Ze)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Sr;)r&Ze&&(o=o.add(s)),s=s.double(),r>>=Ze;return o}isSmallOrder(){return this.multiplyUnsafe(Tt.h).equals(t.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(Tt.l/Ys).double();return Tt.l%Ys&&(e=e.add(this)),e.equals(t.ZERO)}toAffine(e){let{x:r,y:n,z:i}=this,o=this.equals(t.ZERO);e==null&&(e=o?LH:sy(i));let s=Q(r*e),a=Q(n*e),c=Q(i*e);if(o)return Zt.ZERO;if(c!==Ze)throw new Error("invZ was invalid");return new Zt(s,a)}fromRistrettoBytes(){Aw()}toRistrettoBytes(){Aw()}fromRistrettoHash(){Aw()}};hr.BASE=new hr(Tt.Gx,Tt.Gy,Ze,Q(Tt.Gx*Tt.Gy));hr.ZERO=new hr(Sr,Ze,Ze,Sr);function sI(t,e){let r=e.negate();return t?r:e}function aI(t){if(!(t instanceof hr))throw new TypeError("ExtendedPoint expected")}function ww(t){if(!(t instanceof wc))throw new TypeError("RistrettoPoint expected")}function Aw(){throw new Error("Legacy method: switch to RistrettoPoint")}var wc=class t{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){let{d:r}=Tt,n=Q(Tl*e*e),i=Q((n+Ze)*HH),o=BigInt(-1),s=Q((o-r*n)*Q(n+r)),{isValid:a,value:c}=Iw(i,s),u=Q(c*e);$s(u)||(u=Q(-u)),a||(c=u),a||(o=n);let d=Q(o*(n-Ze)*KH-s),f=c*c,p=Q((c+c)*s),m=Q(d*MH),g=Q(Ze-f),x=Q(Ze+f);return new hr(Q(p*x),Q(g*m),Q(m*x),Q(p*g))}static hashToCurve(e){e=Qs(e,64);let r=Sw(e.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=Sw(e.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new t(n.add(o))}static fromHex(e){e=Qs(e,32);let{a:r,d:n}=Tt,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Sw(e);if(!WH(Bl(o),e)||$s(o))throw new Error(i);let s=Q(o*o),a=Q(Ze+r*s),c=Q(Ze-r*s),u=Q(a*a),d=Q(c*c),f=Q(r*n*u-d),{isValid:p,value:m}=uI(Q(f*d)),g=Q(m*c),x=Q(m*g*f),w=Q((o+o)*g);$s(w)&&(w=Q(-w));let S=Q(a*x),T=Q(w*S);if(!p||$s(T)||S===Sr)throw new Error(i);return new t(new hr(w,S,Ze,T))}toRawBytes(){let{x:e,y:r,z:n,t:i}=this.ep,o=Q(Q(n+r)*Q(n-r)),s=Q(e*r),a=Q(s*s),{value:c}=uI(Q(o*a)),u=Q(c*o),d=Q(c*s),f=Q(u*d*i),p;if($s(i*f)){let g=Q(r*Tl),x=Q(e*Tl);e=g,r=x,p=Q(u*FH)}else p=d;$s(e*f)&&(r=Q(-r));let m=Q((n-r)*p);return $s(m)&&(m=Q(-m)),Bl(m)}toHex(){return Cl(this.toRawBytes())}toString(){return this.toHex()}equals(e){ww(e);let r=this.ep,n=e.ep,i=Q(r.x*n.y)===Q(r.y*n.x),o=Q(r.y*n.y)===Q(r.x*n.x);return i||o}add(e){return ww(e),new t(this.ep.add(e.ep))}subtract(e){return ww(e),new t(this.ep.subtract(e.ep))}multiply(e){return new t(this.ep.multiply(e))}multiplyUnsafe(e){return new t(this.ep.multiplyUnsafe(e))}};wc.BASE=new wc(hr.BASE);wc.ZERO=new wc(hr.ZERO);var vw=new WeakMap,Zt=class t{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,vw.delete(this)}static fromHex(e,r=!0){let{d:n,P:i}=Tt;e=Qs(e,32);let o=e.slice();o[31]=e[31]&-129;let s=Dl(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=fI)throw new Error("Expected 0 < hex < 2**256");let a=Q(s*s),c=Q(a-Ze),u=Q(n*a+Ze),{isValid:d,value:f}=Iw(c,u);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let p=(f&Ze)===Ze;return(e[31]&128)!==0!==p&&(f=Q(-f)),new t(f,s)}static async fromPrivateKey(e){return(await pI(e)).point}toRawBytes(){let e=Bl(this.y);return e[31]|=this.x&Ze?128:0,e}toHex(){return Cl(this.toRawBytes())}toX25519(){let{y:e}=this,r=Q((Ze+e)*sy(Ze-e));return Bl(r)}isTorsionFree(){return hr.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new t(Q(-this.x),this.y)}add(e){return hr.fromAffine(this).add(hr.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return hr.fromAffine(this).multiply(e,this).toAffine()}};Zt.BASE=new Zt(Tt.Gx,Tt.Gy);Zt.ZERO=new Zt(Sr,Ze);var Pl=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=Qs(e,64),n=Zt.fromHex(r.slice(0,32),!1),i=Dl(r.slice(32,64));return new t(n,i)}assertValidity(){let{r:e,s:r}=this;if(!(e instanceof Zt))throw new Error("Expected Point instance");return iy(r,Tt.l,!1),this}toRawBytes(){let e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Bl(this.s),32),e}toHex(){return Cl(this.toRawBytes())}};function cI(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var VH=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Cl(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=VH[t[r]];return e}function Ew(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function dI(t){let r=t.toString(16).padStart(64,"0");return Ew(r)}function Bl(t){return dI(t).reverse()}function $s(t){return(Q(t)&Ze)===Ze}function Dl(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Cl(Uint8Array.from(t).reverse()))}var qH=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Sw(t){return Q(Dl(t)&qH)}function Q(t,e=Tt.P){let r=t%e;return r>=Sr?r:e+r}function sy(t,e=Tt.P){if(t===Sr||e<=Sr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Q(t,e),n=e,i=Sr,o=Ze,s=Ze,a=Sr;for(;r!==Sr;){let u=n/r,d=n%r,f=i-s*u,p=o-a*u;n=r,r=d,i=s,o=a,s=f,a=p}if(n!==Ze)throw new Error("invert: does not exist");return Q(i,e)}function zH(t,e=Tt.P){let r=new Array(t.length),n=t.reduce((o,s,a)=>s===Sr?o:(r[a]=o,Q(o*s,e)),Ze),i=sy(n,e);return t.reduceRight((o,s,a)=>s===Sr?o:(r[a]=Q(o*r[a],e),Q(o*s,e)),i),r}function fo(t,e){let{P:r}=Tt,n=t;for(;e-- >Sr;)n*=n,n%=r;return n}function jH(t){let{P:e}=Tt,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=t*t%e*t%e,u=fo(c,Ys)*c%e,d=fo(u,Ze)*t%e,f=fo(d,r)*d%e,p=fo(f,n)*f%e,m=fo(p,i)*p%e,g=fo(m,o)*m%e,x=fo(g,s)*g%e,w=fo(x,s)*g%e,S=fo(w,n)*f%e;return{pow_p_5_8:fo(S,Ys)*t%e,b2:c}}function Iw(t,e){let r=Q(e*e*e),n=Q(r*r*e),i=jH(t*n).pow_p_5_8,o=Q(t*r*i),s=Q(e*o*o),a=o,c=Q(o*Tl),u=s===t,d=s===Q(-t),f=s===Q(-t*Tl);return u&&(o=a),(d||f)&&(o=c),$s(o)&&(o=Q(-o)),{isValid:u||d,value:o}}function uI(t){return Iw(Ze,t)}function ny(t){return Q(Dl(t),Tt.l)}function WH(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Qs(t,e){let r=t instanceof Uint8Array?Uint8Array.from(t):Ew(t);if(typeof e=="number"&&r.length!==e)throw new Error(`Expected ${e} bytes`);return r}function iy(t,e,r=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(r){if(Sr<t)return t}else if(Sr<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function GH(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function lI(t){if(t=typeof t=="bigint"||typeof t=="number"?dI(iy(t,fI)):Qs(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function hI(t){let e=GH(t.slice(0,32)),r=t.slice(32,64),n=ny(e),i=Zt.BASE.multiply(n),o=i.toRawBytes();return{head:e,prefix:r,scalar:n,point:i,pointBytes:o}}var _l;function oy(...t){if(typeof _l!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return _l(...t)}async function pI(t){return hI(await Yo.sha512(lI(t)))}function kw(t){return hI(oy(lI(t)))}function $H(t){return kw(t).pointBytes}function YH(t,e){t=Qs(t);let{prefix:r,scalar:n,pointBytes:i}=kw(e),o=ny(oy(r,t)),s=Zt.BASE.multiply(o),a=ny(oy(s.toRawBytes(),i,t)),c=Q(o+a*n,Tt.l);return new Pl(s,c).toRawBytes()}function QH(t,e,r){e=Qs(e),r instanceof Zt||(r=Zt.fromHex(r,!1));let{r:n,s:i}=t instanceof Pl?t.assertValidity():Pl.fromHex(t),o=hr.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:e}}function XH(t,e,r,n){let i=ny(n),o=hr.fromAffine(t).multiplyUnsafe(i);return hr.fromAffine(e).add(o).subtract(r).multiplyUnsafe(Tt.h).equals(hr.ZERO)}function ZH(t,e,r){let{r:n,SB:i,msg:o,pub:s}=QH(t,e,r),a=oy(n.toRawBytes(),s.toRawBytes(),o);return XH(s,n,i,a)}var ay={getExtendedPublicKey:kw,getPublicKey:$H,sign:YH,verify:ZH};Zt.BASE._setWindowSize(8);var Gs={node:RH,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Yo={bytesToHex:Cl,hexToBytes:Ew,concatBytes:cI,getExtendedPublicKey:pI,mod:Q,invert:sy,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=Qs(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Q(Dl(t),Tt.l-Ze)+Ze},randomBytes:(t=32)=>{if(Gs.web)return Gs.web.getRandomValues(new Uint8Array(t));if(Gs.node){let{randomBytes:e}=Gs.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Yo.randomBytes(32),sha512:async(...t)=>{let e=cI(...t);if(Gs.web){let r=await Gs.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(r)}else{if(Gs.node)return Uint8Array.from(Gs.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Zt.BASE){let r=e.equals(Zt.BASE)?e:new Zt(e.x,e.y);return r._setWindowSize(t),r.multiply(Ys),r},sha512Sync:void 0};Object.defineProperties(Yo,{sha512Sync:{configurable:!1,get(){return _l},set(t){_l||(_l=t)}}});l();h();l();h();l();h();function Tw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function JH(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function yI(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function eK(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tw(t.outputLen),Tw(t.blockLen)}function tK(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rK(t,e){yI(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var nK={number:Tw,bool:JH,bytes:yI,hash:eK,exists:tK,output:rK},Qo=nK;l();h();l();h();var iK={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var cy=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);var oK=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!oK)throw new Error("Non little-endian hardware is not supported");var Lae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sK(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Nl(t){if(typeof t=="string"&&(t=sK(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}var Ju=class{clone(){return this._cloneInto()}};function Ol(t){let e=n=>t().update(Nl(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function aK(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var uy=class extends Ju{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=cy(this.buffer)}update(e){Qo.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=Nl(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=cy(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qo.exists(this),Qo.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;aK(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=cy(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};l();h();var fy=BigInt(4294967295),_w=BigInt(32);function mI(t,e=!1){return e?{h:Number(t&fy),l:Number(t>>_w&fy)}:{h:Number(t>>_w&fy)|0,l:Number(t&fy)|0}}function cK(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=mI(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var uK=(t,e)=>BigInt(t>>>0)<<_w|BigInt(e>>>0),fK=(t,e,r)=>t>>>r,dK=(t,e,r)=>t<<32-r|e>>>r,lK=(t,e,r)=>t>>>r|e<<32-r,hK=(t,e,r)=>t<<32-r|e>>>r,pK=(t,e,r)=>t<<64-r|e>>>r-32,yK=(t,e,r)=>t>>>r-32|e<<64-r,mK=(t,e)=>e,gK=(t,e)=>t,bK=(t,e,r)=>t<<r|e>>>32-r,xK=(t,e,r)=>e<<r|t>>>32-r,wK=(t,e,r)=>e<<r-32|t>>>64-r,AK=(t,e,r)=>t<<r-32|e>>>64-r;function SK(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var vK=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),EK=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,IK=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),kK=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,TK=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),_K=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,PK={fromBig:mI,split:cK,toBig:uK,shrSH:fK,shrSL:dK,rotrSH:lK,rotrSL:hK,rotrBH:pK,rotrBL:yK,rotr32H:mK,rotr32L:gK,rotlSH:bK,rotlSL:xK,rotlBH:wK,rotlBL:AK,add:SK,add3L:vK,add3H:EK,add4L:IK,add4H:kK,add5H:_K,add5L:TK},De=PK;var[BK,CK]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Xs=new Uint32Array(80),Zs=new Uint32Array(80),ef=class extends uy{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:x,Hl:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)Xs[A]=e.getUint32(r),Zs[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){let _=Xs[A-15]|0,C=Zs[A-15]|0,W=De.rotrSH(_,C,1)^De.rotrSH(_,C,8)^De.shrSH(_,C,7),re=De.rotrSL(_,C,1)^De.rotrSL(_,C,8)^De.shrSL(_,C,7),Y=Xs[A-2]|0,G=Zs[A-2]|0,ee=De.rotrSH(Y,G,19)^De.rotrBH(Y,G,61)^De.shrSH(Y,G,6),Z=De.rotrSL(Y,G,19)^De.rotrBL(Y,G,61)^De.shrSL(Y,G,6),D=De.add4L(re,Z,Zs[A-7],Zs[A-16]),N=De.add4H(D,W,ee,Xs[A-7],Xs[A-16]);Xs[A]=N|0,Zs[A]=D|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:p,Fh:m,Fl:g,Gh:x,Gl:w,Hh:S,Hl:T}=this;for(let A=0;A<80;A++){let _=De.rotrSH(f,p,14)^De.rotrSH(f,p,18)^De.rotrBH(f,p,41),C=De.rotrSL(f,p,14)^De.rotrSL(f,p,18)^De.rotrBL(f,p,41),W=f&m^~f&x,re=p&g^~p&w,Y=De.add5L(T,C,re,CK[A],Zs[A]),G=De.add5H(Y,S,_,W,BK[A],Xs[A]),ee=Y|0,Z=De.rotrSH(n,i,28)^De.rotrBH(n,i,34)^De.rotrBH(n,i,39),D=De.rotrSL(n,i,28)^De.rotrBL(n,i,34)^De.rotrBL(n,i,39),N=n&o^n&a^o&a,O=i&s^i&c^s&c;S=x|0,T=w|0,x=m|0,w=g|0,m=f|0,g=p|0,{h:f,l:p}=De.add(u|0,d|0,G|0,ee|0),u=a|0,d=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let $=De.add3L(ee,D,O);n=De.add3H($,G,Z,N),i=$|0}({h:n,l:i}=De.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=De.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=De.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=De.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:p}=De.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=De.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:x,l:w}=De.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:S,l:T}=De.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(n,i,o,s,a,c,u,d,f,p,m,g,x,w,S,T)}roundClean(){Xs.fill(0),Zs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Pw=class extends ef{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},Bw=class extends ef{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Cw=class extends ef{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},Js=Ol(()=>new ef),Zae=Ol(()=>new Pw),Jae=Ol(()=>new Bw),ece=Ol(()=>new Cw);l();h();var DK=j(hh(),1);var ot=BigInt(0),Ut=BigInt(1),ta=BigInt(2),Ll=BigInt(3),gI=BigInt(8),Rt=Object.freeze({a:ot,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ut,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),bI=(t,e)=>(t+e/ta)/e,dy={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){let{n:e}=Rt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ut*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=bI(o*t,e),c=bI(-n*t,e),u=de(t-a*r-c*i,e),d=de(-a*n-c*o,e),f=u>s,p=d>s;if(f&&(u=e-u),p&&(d=e-d),u>s||d>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:p,k2:d}}},tf=32,Fl=32;var xI=tf+1,wI=2*tf+1;function AI(t){let{a:e,b:r}=Rt,n=de(t*t),i=de(n*t);return de(i+e*t+r)}var ly=Rt.a===ot,my=class extends Error{constructor(e){super(e)}};function SI(t){if(!(t instanceof hn))throw new TypeError("JacobianPoint expected")}var hn=class t{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof Jt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Jt.ZERO)?t.ZERO:new t(e.x,e.y,Ut)}static toAffineBatch(e){let r=LK(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return t.toAffineBatch(e).map(t.fromAffine)}equals(e){SI(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=de(i*i),u=de(a*a),d=de(r*u),f=de(o*c),p=de(de(n*a)*u),m=de(de(s*i)*c);return d===f&&p===m}negate(){return new t(this.x,de(-this.y),this.z)}double(){let{x:e,y:r,z:n}=this,i=de(e*e),o=de(r*r),s=de(o*o),a=e+o,c=de(ta*(de(a*a)-i-s)),u=de(Ll*i),d=de(u*u),f=de(d-ta*c),p=de(u*(c-f)-gI*s),m=de(ta*r*n);return new t(f,p,m)}add(e){SI(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e;if(o===ot||s===ot)return this;if(r===ot||n===ot)return e;let c=de(i*i),u=de(a*a),d=de(r*u),f=de(o*c),p=de(de(n*a)*u),m=de(de(s*i)*c),g=de(f-d),x=de(m-p);if(g===ot)return x===ot?this.double():t.ZERO;let w=de(g*g),S=de(g*w),T=de(d*w),A=de(x*x-S-ta*T),_=de(x*(T-A)-p*S),C=de(i*a*g);return new t(A,_,C)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=t.ZERO;if(typeof e=="bigint"&&e===ot)return r;let n=II(e);if(n===Ut)return this;if(!ly){let f=r,p=this;for(;n>ot;)n&Ut&&(f=f.add(p)),p=p.double(),n>>=Ut;return f}let{k1neg:i,k1:o,k2neg:s,k2:a}=dy.splitScalar(n),c=r,u=r,d=this;for(;o>ot||a>ot;)o&Ut&&(c=c.add(d)),a&Ut&&(u=u.add(d)),d=d.double(),o>>=Ut,a>>=Ut;return i&&(c=c.negate()),s&&(u=u.negate()),u=new t(de(u.x*dy.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let r=ly?128/e+1:256/e+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,r){!r&&this.equals(t.BASE)&&(r=Jt.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Nw.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=t.normalizeZ(i),Nw.set(r,i)));let o=t.ZERO,s=t.BASE,a=1+(ly?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let p=0;p<a;p++){let m=p*c,g=Number(e&u);e>>=f,g>c&&(g-=d,e+=Ut);let x=m,w=m+Math.abs(g)-1,S=p%2!==0,T=g<0;g===0?s=s.add(hy(S,i[x])):o=o.add(hy(T,i[w]))}return{p:o,f:s}}multiply(e,r){let n=II(e),i,o;if(ly){let{k1neg:s,k1:a,k2neg:c,k2:u}=dy.splitScalar(n),{p:d,f}=this.wNAF(a,r),{p,f:m}=this.wNAF(u,r);d=hy(s,d),p=hy(c,p),p=new t(de(p.x*dy.beta),p.y,p.z),i=d.add(p),o=f.add(m)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return t.normalizeZ([i,o])[0]}toAffine(e){let{x:r,y:n,z:i}=this,o=this.equals(t.ZERO);e==null&&(e=o?gI:wy(i));let s=e,a=de(s*s),c=de(a*s),u=de(r*a),d=de(n*c),f=de(i*s);if(o)return Jt.ZERO;if(f!==Ut)throw new Error("invZ was invalid");return new Jt(u,d)}};hn.BASE=new hn(Rt.Gx,Rt.Gy,Ut);hn.ZERO=new hn(ot,Ut,ot);function hy(t,e){let r=e.negate();return t?r:e}var Nw=new WeakMap,Jt=class t{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Nw.delete(this)}hasEvenY(){return this.y%ta===ot}static fromCompressedHex(e){let r=e.length===32,n=ui(r?e:e.subarray(1));if(!yy(n))throw new Error("Point is not on curve");let i=AI(n),o=RK(i),s=(o&Ut)===Ut;r?s&&(o=de(-o)):(e[0]&1)===1!==s&&(o=de(-o));let a=new t(n,o);return a.assertValidity(),a}static fromUncompressedHex(e){let r=ui(e.subarray(1,tf+1)),n=ui(e.subarray(tf+1,tf*2+1)),i=new t(r,n);return i.assertValidity(),i}static fromHex(e){let r=Ac(e),n=r.length,i=r[0];if(n===tf)return this.fromCompressedHex(r);if(n===xI&&(i===2||i===3))return this.fromCompressedHex(r);if(n===wI&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${xI} compressed bytes or ${wI} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return t.BASE.multiply(Vl(e))}static fromSignature(e,r,n){let{r:i,s:o}=KK(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=FK(Ac(e)),{n:a}=Rt,c=n===2||n===3?i+a:i,u=wy(c,a),d=de(-s*u,a),f=de(o*u,a),p=n&1?"03":"02",m=t.fromHex(p+ra(c)),g=t.BASE.multiplyAndAddUnsafe(m,d,f);if(!g)throw new Error("Cannot recover signature: point at infinify");return g.assertValidity(),g}toRawBytes(e=!1){return na(this.toHex(e))}toHex(e=!1){let r=ra(this.x);return e?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${ra(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:n}=this;if(!yy(r)||!yy(n))throw new Error(e);let i=de(n*n),o=AI(r);if(de(i-o)!==ot)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new t(this.x,de(-this.y))}double(){return hn.fromAffine(this).double().toAffine()}add(e){return hn.fromAffine(this).add(hn.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return hn.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){let i=hn.fromAffine(this),o=r===ot||r===Ut||this!==t.BASE?i.multiplyUnsafe(r):i.multiply(r),s=hn.fromAffine(e).multiplyUnsafe(n),a=o.add(s);return a.equals(hn.ZERO)?void 0:a.toAffine()}};Jt.BASE=new Jt(Rt.Gx,Rt.Gy);Jt.ZERO=new Jt(ot,ot);function vI(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function EI(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${nf(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ui(r),left:t.subarray(e+2)}}function NK(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${nf(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=EI(t.subarray(2)),{data:n,left:i}=EI(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${nf(i)}`);return{r:e,s:n}}var Ml=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?nf(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new t(gy(i.slice(0,64)),gy(i.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=NK(r?e:na(e));return new t(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Kl(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Kl(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=Rt.n>>Ut;return this.s>e}normalizeS(){return this.hasHighS()?new t(this.r,de(-this.s,Rt.n)):this}toDERRawBytes(){return na(this.toDERHex())}toDERHex(){let e=vI(Rl(this.s)),r=vI(Rl(this.r)),n=e.length/2,i=r.length/2,o=Rl(n),s=Rl(i);return`30${Rl(i+n+4)}02${s}${r}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return na(this.toCompactHex())}toCompactHex(){return ra(this.r)+ra(this.s)}};function Ul(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var OK=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nf(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=OK[t[r]];return e}var UK=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ra(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(ot<=t&&t<UK))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function Hl(t){let e=na(ra(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Rl(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function gy(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function na(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function ui(t){return gy(nf(t))}function Ac(t){return t instanceof Uint8Array?Uint8Array.from(t):na(t)}function II(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Kl(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function de(t,e=Rt.P){let r=t%e;return r>=ot?r:e+r}function ci(t,e){let{P:r}=Rt,n=t;for(;e-- >ot;)n*=n,n%=r;return n}function RK(t){let{P:e}=Rt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,d=ci(u,Ll)*u%e,f=ci(d,Ll)*u%e,p=ci(f,ta)*c%e,m=ci(p,n)*p%e,g=ci(m,i)*m%e,x=ci(g,s)*g%e,w=ci(x,a)*x%e,S=ci(w,s)*g%e,T=ci(S,Ll)*u%e,A=ci(T,o)*m%e,_=ci(A,r)*c%e,C=ci(_,ta);if(C*C%e!==t)throw new Error("Cannot find square root");return C}function wy(t,e=Rt.P){if(t===ot||e<=ot)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=de(t,e),n=e,i=ot,o=Ut,s=Ut,a=ot;for(;r!==ot;){let u=n/r,d=n%r,f=i-s*u,p=o-a*u;n=r,r=d,i=s,o=a,s=f,a=p}if(n!==Ut)throw new Error("invert: does not exist");return de(i,e)}function LK(t,e=Rt.P){let r=new Array(t.length),n=t.reduce((o,s,a)=>s===ot?o:(r[a]=o,de(o*s,e)),Ut),i=wy(n,e);return t.reduceRight((o,s,a)=>s===ot?o:(r[a]=de(o*r[a],e),de(o*s,e)),i),r}function MK(t){let e=t.length*8-Fl*8,r=ui(t);return e>0?r>>BigInt(e):r}function FK(t,e=!1){let r=MK(t);if(e)return r;let{n}=Rt;return r>=n?r-n:r}var rf,Dw;function Kl(t){return ot<t&&t<Rt.n}function yy(t){return ot<t&&t<Rt.P}function Vl(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Fl)throw new Error("Expected 32 bytes of private key");e=gy(t)}else if(t instanceof Uint8Array){if(t.length!==Fl)throw new Error("Expected 32 bytes of private key");e=ui(t)}else throw new TypeError("Expected valid private key");if(!Kl(e))throw new Error("Expected private key: 0 < key < n");return e}function HK(t){return t instanceof Jt?(t.assertValidity(),t):Jt.fromHex(t)}function KK(t){if(t instanceof Ml)return t.assertValidity(),t;try{return Ml.fromDER(t)}catch{return Ml.fromCompact(t)}}function sf(t,e=!1){return Jt.fromPrivateKey(t).toRawBytes(e)}function by(t){return de(ui(t),Rt.n)}var of=class t{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromHex(e){let r=Ac(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=ui(r.subarray(0,32)),i=ui(r.subarray(32,64));return new t(n,i)}assertValidity(){let{r:e,s:r}=this;if(!yy(e)||!Kl(r))throw new Error("Invalid signature")}toHex(){return ra(this.r)+ra(this.s)}toRawBytes(){return na(this.toHex())}};function VK(t){return Jt.fromPrivateKey(t).toRawX()}var xy=class{constructor(e,r,n=lo.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=Ac(e);let{x:i,scalar:o}=this.getScalar(Vl(r));if(this.px=i,this.d=o,this.rand=Ac(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){let r=Jt.fromPrivateKey(e),n=r.hasEvenY()?e:Rt.n-e;return{point:r,scalar:n,x:r.toRawX()}}initNonce(e,r){return Hl(e^ui(r))}finalizeNonce(e){let r=de(ui(e),Rt.n);if(r===ot)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(e,r,n,i){return new of(e.x,de(r+n*i,Rt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:e,d:r,px:n,rand:i}=this,o=lo.taggedHash,s=this.initNonce(r,await o(ea.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(ea.nonce,s,n,e)),d=by(await o(ea.challenge,c,n,e)),f=this.finalizeSig(a,u,d,r);return await _I(f,e,n)||this.error(),f}calcSync(){let{m:e,d:r,px:n,rand:i}=this,o=lo.taggedHashSync,s=this.initNonce(r,o(ea.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(ea.nonce,s,n,e)),d=by(o(ea.challenge,c,n,e)),f=this.finalizeSig(a,u,d,r);return PI(f,e,n)||this.error(),f}};async function qK(t,e,r){return new xy(t,e,r).calc()}function zK(t,e,r){return new xy(t,e,r).calcSync()}function kI(t,e,r){let n=t instanceof of,i=n?t:of.fromHex(t);return n&&i.assertValidity(),{...i,m:Ac(e),P:HK(r)}}function TI(t,e,r,n){let i=Jt.BASE.multiplyAndAddUnsafe(e,Vl(r),de(-n,Rt.n));return!(!i||!i.hasEvenY()||i.x!==t)}async function _I(t,e,r){try{let{r:n,s:i,m:o,P:s}=kI(t,e,r),a=by(await lo.taggedHash(ea.challenge,Hl(n),s.toRawX(),o));return TI(n,s,i,a)}catch{return!1}}function PI(t,e,r){try{let{r:n,s:i,m:o,P:s}=kI(t,e,r),a=by(lo.taggedHashSync(ea.challenge,Hl(n),s.toRawX(),o));return TI(n,s,i,a)}catch(n){if(n instanceof my)throw n;return!1}}var ice={Signature:of,getPublicKey:VK,sign:qK,verify:_I,signSync:zK,verifySync:PI};Jt.BASE._setWindowSize(8);var jn={node:DK,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},ea={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},py={},lo={bytesToHex:nf,hexToBytes:na,concatBytes:Ul,mod:de,invert:wy,isValidPrivateKey(t){try{return Vl(t),!0}catch{return!1}},_bigintTo32Bytes:Hl,_normalizePrivateKey:Vl,hashToPrivateKey:t=>{t=Ac(t);let e=Fl+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=de(ui(t),Rt.n-Ut)+Ut;return Hl(r)},randomBytes:(t=32)=>{if(jn.web)return jn.web.getRandomValues(new Uint8Array(t));if(jn.node){let{randomBytes:e}=jn.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>lo.hashToPrivateKey(lo.randomBytes(Fl+8)),precompute(t=8,e=Jt.BASE){let r=e===Jt.BASE?e:new Jt(e.x,e.y);return r._setWindowSize(t),r.multiply(Ll),r},sha256:async(...t)=>{if(jn.web){let e=await jn.web.subtle.digest("SHA-256",Ul(...t));return new Uint8Array(e)}else if(jn.node){let{createHash:e}=jn.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(jn.web){let r=await jn.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Ul(...e),i=await jn.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(jn.node){let{createHmac:r}=jn.node,n=r("sha256",t);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=py[t];if(r===void 0){let n=await lo.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Ul(n,n),py[t]=r}return lo.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof rf!="function")throw new my("sha256Sync is undefined, you need to set it");let r=py[t];if(r===void 0){let n=rf(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Ul(n,n),py[t]=r}return rf(r,...e)},_JacobianPoint:hn};Object.defineProperties(lo,{sha256Sync:{configurable:!1,get(){return rf},set(t){rf||(rf=t)}},hmacSha256Sync:{configurable:!1,get(){return Dw},set(t){Dw||(Dw=t)}}});l();h();var BI=new RegExp("^[0-9]+'?$"),af=2147483648;l();h();l();h();var Ay=class extends Ju{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Qo.hash(e);let n=Nl(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Qo.exists(this),this.iHash.update(e),this}digestInto(e){Qo.exists(this),Qo.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Sc=(t,e,r)=>new Ay(t,e).update(r).digest();Sc.create=(t,e)=>new Ay(t,e);var xce=new RegExp("^m(\\/[0-9]+')+$");var jK="ed25519 seed",CI=t=>{let e=Buffer.from(Sc(Js,Buffer.from(jK),t)).toString("hex"),r=e.slice(0,64),n=e.slice(64);return{key:Buffer.from(r,"hex"),chainCode:Buffer.from(n,"hex")}},DI=({key:t,chainCode:e},r)=>{let n=Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=Buffer.concat([Buffer.alloc(1,0),t,n]),o=Buffer.from(Sc(Js,e,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64);return{key:Buffer.from(s,"hex"),chainCode:Buffer.from(a,"hex")}};l();h();var Xo=j(Pi()),Sy=j(hu()),cf=j(xr());var WK=Xo.Buffer.from("Bitcoin seed"),NI=Sy.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),OI=t=>{let e=Xo.Buffer.from(Sc(Js,Xo.Buffer.from(WK),t)).toString("hex"),r=e.slice(0,64),n=e.slice(64);return{key:Xo.Buffer.from(r,"hex"),chainCode:Xo.Buffer.from(n,"hex")}},UI=(t,e)=>{let{key:r,chainCode:n}=t,i=new Uint8Array(37);if(e&af)i.set(r,1);else{let f=sf(r,!0);i.set((0,cf.arrayify)(f))}for(let f=24;f>=0;f-=8)i[33+(f>>3)]=e>>24-f&255;let o=Xo.Buffer.from(Sc(Js,n,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64),c=Sy.BigNumber.from(`0x${s}`);if(c.gte(NI))throw new Error("Invalid private key");let u=c.add(`0x${r.toString("hex")}`).mod(NI);if(u.eq(Sy.BigNumber.from(0)))throw new Error("Invalid private key");let d=(0,cf.hexZeroPad)((0,cf.hexlify)(u),32);return{key:Xo.Buffer.from(d.replace("0x",""),"hex"),chainCode:Xo.Buffer.from(a,"hex")}};l();h();var Ow=v.string().refine(t=>{if(typeof t!="string")return!1;let e=t.split("/");if(e.length<2||e[0]!=="m")return!1;for(let r=1;r<e.length;++r)if(!BI.test(e[r]))return!1;return!0},{message:"Value is not a valid derivation path."});var ql=v.union([v.literal("bitcoinTaproot"),v.literal("bitcoinNativeSegwit"),v.literal("bitcoinNestedSegwit"),v.literal("bitcoinLegacy")]),zl=v.union([v.literal("bip44RootEthereum"),v.literal("bip44Ethereum"),v.literal("bip44EthereumSecondary"),v.literal("bip44EthereumTertiary")]),jl=v.union([v.literal("bip44Root"),v.literal("bip44"),v.literal("bip44Change"),v.literal("deprecated")]),Uw=v.literal("bip44Sui");l();h();var GK=v.union([v.literal("bip44Change"),v.literal("bip44"),v.literal("deprecated")]),$K=v.union([v.literal("bip44Ethereum"),v.literal("bip44EthereumSecondary"),v.literal("bip44EthereumTertiary")]),YK=v.union([v.literal("bitcoinTaproot"),v.literal("bitcoinNativeSegwit"),v.literal("bitcoinNestedSegwit"),v.literal("bitcoinLegacy")]),QK=v.literal("bip44Sui"),vy=v.number().int().min(0),XK=v.object({pathType:v.literal("bip44Root"),index:v.number().optional()}),ZK=v.object({pathType:GK,index:vy}),JK=v.object({pathType:v.literal("bip44RootEthereum"),index:v.number().optional()}),eV=v.object({pathType:$K,index:vy}),tV=v.object({pathType:YK,index:vy}),rV=v.object({pathType:QK,index:vy}),LI=v.union([XK,ZK,JK,eV,tV,rV]),Wl=new Error("Invalid derivation path."),MI=new Error("Unsupported derivation path."),nV=t=>{if(!LI.safeParse(t).success)throw Wl;switch(t.pathType){case"bitcoinTaproot":return`m/86'/0'/0'/0/${t.index}`;case"bitcoinNativeSegwit":return`m/84'/0'/0'/0/${t.index}`;case"bitcoinNestedSegwit":return`m/46'/0'/0'/0/${t.index}`;case"bitcoinLegacy":return`m/44'/0'/0'/0/${t.index}`;case"bip44RootEthereum":return"m/44'/60'";case"bip44Ethereum":return`m/44'/60'/0'/0/${t.index}`;case"bip44EthereumSecondary":return`m/44'/60'/1'/0/${t.index}`;case"bip44EthereumTertiary":return`m/44'/60'/2'/0/${t.index}`;case"bip44Root":return"m/44'/501'";case"deprecated":return`m/501'/${t.index}'/0/0`;case"bip44":return`m/44'/501'/${t.index}'`;case"bip44Change":return`m/44'/501'/${t.index}'/0'`;case"bip44Sui":return`m/44'/784'/${t.index}'/0'/0'`}},RI=1<<31>>>0,iV=t=>{try{let e=t.replace("0x","").match(/.{1,2}/g)??[];if(e.length===0)throw Wl;let r=parseInt(e[0],16),n="m";for(let i=0;i<r;i++){let o="";for(let c=0;c<4;c++)o+=e[1+i*4+c];let s=parseInt(o,16),a=s>=RI;a&&(s-=RI),n+=`/${s.toString(10)}${a?"'":""}`}return n}catch{throw Wl}},oV=t=>{let e,r=Ow.safeParse(`m/${t.replace("m/","")}`);if(r.success)e=r.data;else try{e=iV(t)}catch{throw Wl}if(e==="m/44'/501'")return{pathType:"bip44Root"};if(e==="m/44'/60'")return{pathType:"bip44RootEthereum"};let n=e.replace("m/","").split("/");try{if(n.length===5&&n[0]==="86'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinTaproot",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="84'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNativeSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="46'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNestedSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinLegacy",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bip44Ethereum",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="1'"&&n[3]==="0")return{pathType:"bip44EthereumSecondary",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="2'"&&n[3]==="0")return{pathType:"bip44EthereumTertiary",index:parseInt(n[4],10)};if(n.length===4&&n[0]==="44'"&&n[1]==="501'"&&n[3]==="0'")return{pathType:"bip44Change",index:parseInt(n[2],10)};if(n.length===3&&n[0]==="44'"&&n[1]==="501'")return{pathType:"bip44",index:parseInt(n[2],10)};if(n.length===4&&n[0]==="501'"&&n[2]==="0"&&n[3]==="0")return{pathType:"deprecated",index:parseInt(n[1],10)}}catch{}throw MI};l();h();var Kce=new Error("Unsupported path."),sV=t=>{switch(t){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!0;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},aV=t=>{switch(t){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!1;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!0;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":case"bip44Sui":return!1}},cV=t=>{switch(t){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!0}},uV=t=>{switch(t){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1;case"bip44Sui":return!0}};Yo.sha512Sync=(...t)=>Js(Yo.concatBytes(...t));var{getPublicKey:fV}=ay,ho=class{#e;#t;constructor(e){this.#e={ellipticCurve:"ed25519",value:CI(e),nodes:{}},this.#t={ellipticCurve:"secp256k1",value:OI(e),nodes:{}}}derivePathType(e,r){switch(e){case"bitcoinTaproot":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/86'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNativeSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/84'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNestedSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/46'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinLegacy":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bip44Ethereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/0'/0/${r}`});case"bip44EthereumSecondary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/1'/0/${r}`});case"bip44EthereumTertiary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/2'/0/${r}`});case"bip44RootEthereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:"m/44'/60'"});case"bip44Change":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'/0'`,bytesInPrivateKey:64});case"bip44":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'`,bytesInPrivateKey:64});case"deprecated":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/501'/${r}'/0/0`});case"bip44Root":return this.derivePath({ellipticCurve:"ed25519",derivationPath:"m/44'/501'",bytesInPrivateKey:64});case"bip44Sui":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/784'/${r}'/0'/0'`,bytesInPrivateKey:32})}}derivePath(e){return e.ellipticCurve==="ed25519"?this.deriveED25519Path(e):e.ellipticCurve==="secp256k1"?this.deriveSECP256K1Path(e):ft(e)}deriveED25519Path(e){let{ellipticCurve:r,derivationPath:n,bytesInPrivateKey:i}=e,o=n.split("/"),s=this.#e;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let d=s.nodes?.[u]??null;if(!d){let f={ellipticCurve:r,value:DI(s.value,parseInt(u,10)+af),nodes:{}};d=f,s.nodes[u]=f}s=d}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=fV(s.value.key),c;switch(i){case 32:return c=new Uint8Array(32),c.set(s.value.key),{publicKey:a,secretKey:c};case 64:return c=new Uint8Array(64),c.set(s.value.key),c.set(a,32),{publicKey:a,secretKey:c}}}deriveSECP256K1Path(e){let{ellipticCurve:r,derivationPath:n,useCompressedPublicKey:i=!1}=e,o=n.split("/"),s=this.#t;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let d=s.nodes?.[u]??null;if(!d){let f=0;u.endsWith("'")&&(f=af);let p={ellipticCurve:r,value:UI(s.value,parseInt(u,10)+f),nodes:{}};d=p,s.nodes[u]=p}s=d}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=s.value.key;return{publicKey:sf(a,i),secretKey:new Uint8Array(a)}}cleanUpTree(e){if(e){e.value.key.fill(0),e.value.chainCode.fill(0);let r=Object.values(e.nodes);for(let n of r)this.cleanUpTree(n)}}cleanup(){this.cleanUpTree(this.#e),this.cleanUpTree(this.#t),this.#e=null,this.#t=null}};l();h();var Te=(a=>(a.BitcoinTaproot="bip122_p2tr",a.BitcoinNativeSegwit="bip122_p2wpkh",a.BitcoinNestedSegwit="bip122_p2sh",a.BitcoinLegacy="bip122_p2pkh",a.Solana="solana",a.EVM="eip155",a.Sui="sui",a))(Te||{}),FI=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"],Rw=v.enum(FI);var Ey=class{type="bip122_p2pkh";displayName="Legacy";defaultDerivationPathType="bitcoinLegacy";otherDerivationPathType=[]};l();h();var Iy=class{type="bip122_p2wpkh";displayName="Native Segwit";defaultDerivationPathType="bitcoinNativeSegwit";otherDerivationPathType=[]};l();h();var ky=class{type="bip122_p2sh";displayName="Nested Segwit";defaultDerivationPathType="bitcoinNestedSegwit";otherDerivationPathType=[]};l();h();var Ty=class{type="bip122_p2tr";displayName="Taproot";defaultDerivationPathType="bitcoinTaproot";otherDerivationPathType=[]};l();h();var _y=class{type="eip155";displayName="Ethereum";defaultDerivationPathType="bip44Ethereum";otherDerivationPathType=["bip44RootEthereum","bip44EthereumSecondary","bip44EthereumTertiary"]};l();h();var Py=class{type="solana";displayName="Solana";defaultDerivationPathType="bip44Change";otherDerivationPathType=["bip44Root","bip44","deprecated"]};l();h();var By=class{type="sui";displayName="Sui";defaultDerivationPathType="bip44Sui";otherDerivationPathType=[]};var Lw=class{bip122_p2tr=new Ty;bip122_p2wpkh=new Iy;bip122_p2sh=new ky;bip122_p2pkh=new Ey;eip155=new _y;solana=new Py;sui=new By;allAddressTypes=Object.values(Te);allAddressTypeDefinitions=this.allAddressTypes.map(e=>this[e]);addressTypeByDerivationPathType={};constructor(){this.allAddressTypeDefinitions.forEach(e=>{this.addressTypeByDerivationPathType[e.defaultDerivationPathType]=e.type,e.otherDerivationPathType.forEach(r=>{this.addressTypeByDerivationPathType[r]=e.type})})}getAll(){return this.allAddressTypes}getDisplayName(e){return this[e].displayName}getAddressType(e){return this.addressTypeByDerivationPathType[e]}},Ui=new Lw;l();h();l();h();l();h();var Cy=class{addressTypes=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"];generateKeypairFromPrivateKey(e){let r=e.fold(i=>Buffer.from(i));return{publicKey:sf(r,!0),privateKey:r}}generateKeypairFromSeed(e,r,n){let i=e.fold(o=>new ho(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};l();h();l();h();var V2=j(Bd());l();h();var jI=j(hu());var uf=j(fi()),WI=j(an());l();h();var qI="abstract-provider/5.7.0";var SV=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},vV=new WI.Logger(qI),zI=class extends uf.Description{static isForkEvent(e){return!!(e&&e._isForkEvent)}};var Uy=class t{constructor(){vV.checkAbstract(new.target,t),(0,uf.defineReadOnly)(this,"_isProvider",!0)}getFeeData(){return SV(this,void 0,void 0,function*(){let{block:e,gasPrice:r}=yield(0,uf.resolveProperties)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),n=null,i=null,o=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,o=jI.BigNumber.from("1500000000"),i=e.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}};l();h();var Li=j(fi()),po=j(an());l();h();var GI="abstract-signer/5.7.0";var Ri=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},di=new po.Logger(GI),EV=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],IV=[po.Logger.errors.INSUFFICIENT_FUNDS,po.Logger.errors.NONCE_EXPIRED,po.Logger.errors.REPLACEMENT_UNDERPRICED],Gl=class t{constructor(){di.checkAbstract(new.target,t),(0,Li.defineReadOnly)(this,"_isSigner",!0)}getBalance(e){return Ri(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ri(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ri(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield(0,Li.resolveProperties)(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Ri(this,void 0,void 0,function*(){this._checkProvider("call");let n=yield(0,Li.resolveProperties)(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Ri(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Ri(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ri(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ri(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ri(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(let n in e)EV.indexOf(n)===-1&&di.throwArgumentError("invalid transaction key: "+n,"transaction",e);let r=(0,Li.shallowCopy)(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&di.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Ri(this,void 0,void 0,function*(){let r=yield(0,Li.resolveProperties)(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Ri(this,void 0,void 0,function*(){if(i==null)return null;let o=yield this.resolveName(i);return o==null&&di.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));let n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?di.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&di.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){let o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&di.throwError("network does not support EIP-1559",po.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):di.throwError("failed to get consistent fee data",po.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(IV.indexOf(i.code)>=0)throw i;return di.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",po.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&di.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield(0,Li.resolveProperties)(r)})}_checkProvider(e){this.provider||di.throwError("missing provider",po.Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}},$I=class t extends Gl{constructor(e,r){super(),(0,Li.defineReadOnly)(this,"address",e),(0,Li.defineReadOnly)(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{di.throwError(e,po.Logger.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new t(this.address,e)}};var Fi=j(xr()),n0=j(e2());l();h();l();h();var t2=j(xr()),Yl=j(fi()),Yy=class{constructor(e){(0,Yl.defineReadOnly)(this,"alphabet",e),(0,Yl.defineReadOnly)(this,"base",e.length),(0,Yl.defineReadOnly)(this,"_alphabetMap",{}),(0,Yl.defineReadOnly)(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=(0,t2.arrayify)(e);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return(0,t2.arrayify)(new Uint8Array(r.reverse()))}},Lde=new Yy("abcdefghijklmnopqrstuvwxyz234567"),r2=new Yy("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var tt=j(xr()),v2=j(hu()),Bc=j(sa());l();h();l();h();var ca=j(xr()),o2=j(i2());function Tc(t,e,r,n,i){t=(0,ca.arrayify)(t),e=(0,ca.arrayify)(e);let o,s=1,a=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let u,d;for(let f=1;f<=s;f++){c[e.length]=f>>24&255,c[e.length+1]=f>>16&255,c[e.length+2]=f>>8&255,c[e.length+3]=f&255;let p=(0,ca.arrayify)((0,o2.computeHmac)(i,t,c));o||(o=p.length,d=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),d.set(p);for(let x=1;x<r;x++){p=(0,ca.arrayify)((0,o2.computeHmac)(i,t,p));for(let w=0;w<o;w++)d[w]^=p[w]}let m=(f-1)*o,g=f===s?u:o;a.set((0,ca.arrayify)(d).slice(0,g),m)}return(0,ca.hexlify)(a)}var Lr=j(fi());l();h();l();h();var Pe=j(Ax()),go=j(_E());function yf(t,e,r){return r={path:e,exports:{},require:function(n,i){return lz(n,i??r.path)}},t(r,r.exports),r.exports}function lz(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var u2=$5;function $5(t,e){if(!t)throw new Error(e||"Assertion failed")}$5.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Mi=yf(function(t,e){"use strict";var r=e;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var d=s.charCodeAt(u),f=d>>8,p=d&255;f?c.push(f,p):c.push(p)}return c}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",c=0;c<s.length;c++)a+=i(s[c].toString(16));return a}r.toHex=o,r.encode=function(a,c){return c==="hex"?o(a):a}}),Gn=yf(function(t,e){"use strict";var r=e;r.assert=u2,r.toArray=Mi.toArray,r.zero2=Mi.zero2,r.toHex=Mi.toHex,r.encode=Mi.encode;function n(c,u,d){var f=new Array(Math.max(c.bitLength(),d)+1);f.fill(0);for(var p=1<<u+1,m=c.clone(),g=0;g<f.length;g++){var x,w=m.andln(p-1);m.isOdd()?(w>(p>>1)-1?x=(p>>1)-w:x=w,m.isubn(x)):x=0,f[g]=x,m.iushrn(1)}return f}r.getNAF=n;function i(c,u){var d=[[],[]];c=c.clone(),u=u.clone();for(var f=0,p=0,m;c.cmpn(-f)>0||u.cmpn(-p)>0;){var g=c.andln(3)+f&3,x=u.andln(3)+p&3;g===3&&(g=-1),x===3&&(x=-1);var w;g&1?(m=c.andln(7)+f&7,(m===3||m===5)&&x===2?w=-g:w=g):w=0,d[0].push(w);var S;x&1?(m=u.andln(7)+p&7,(m===3||m===5)&&g===2?S=-x:S=x):S=0,d[1].push(S),2*f===w+1&&(f=1-f),2*p===S+1&&(p=1-p),c.iushrn(1),u.iushrn(1)}return d}r.getJSF=i;function o(c,u,d){var f="_"+u;c.prototype[u]=function(){return this[f]!==void 0?this[f]:this[f]=d.call(this)}}r.cachedProperty=o;function s(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=s;function a(c){return new Pe.default(c,"hex","le")}r.intFromLE=a}),em=Gn.getNAF,hz=Gn.getJSF,tm=Gn.assert;function fa(t,e){this.type=t,this.p=new Pe.default(e.p,16),this.red=e.prime?Pe.default.red(e.prime):Pe.default.mont(this.p),this.zero=new Pe.default(0).toRed(this.red),this.one=new Pe.default(1).toRed(this.red),this.two=new Pe.default(2).toRed(this.red),this.n=e.n&&new Pe.default(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var _c=fa;fa.prototype.point=function(){throw new Error("Not implemented")};fa.prototype.validate=function(){throw new Error("Not implemented")};fa.prototype._fixedNafMul=function(e,r){tm(e.precomputed);var n=e._getDoubles(),i=em(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];s.push(c)}for(var d=this.jpoint(null,null,null),f=this.jpoint(null,null,null),p=o;p>0;p--){for(a=0;a<s.length;a++)c=s[a],c===p?f=f.mixedAdd(n.points[a]):c===-p&&(f=f.mixedAdd(n.points[a].neg()));d=d.add(f)}return d.toP()};fa.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=em(r,n,this._bitLength),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&s[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var d=s[c];tm(d!==0),e.type==="affine"?d>0?a=a.mixedAdd(o[d-1>>1]):a=a.mixedAdd(o[-d-1>>1].neg()):d>0?a=a.add(o[d-1>>1]):a=a.add(o[-d-1>>1].neg())}return e.type==="affine"?a.toP():a};fa.prototype._wnafMulAdd=function(e,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,d,f,p;for(d=0;d<i;d++){p=r[d];var m=p._getNAFPoints(e);s[d]=m.wnd,a[d]=m.points}for(d=i-1;d>=1;d-=2){var g=d-1,x=d;if(s[g]!==1||s[x]!==1){c[g]=em(n[g],s[g],this._bitLength),c[x]=em(n[x],s[x],this._bitLength),u=Math.max(c[g].length,u),u=Math.max(c[x].length,u);continue}var w=[r[g],null,null,r[x]];r[g].y.cmp(r[x].y)===0?(w[1]=r[g].add(r[x]),w[2]=r[g].toJ().mixedAdd(r[x].neg())):r[g].y.cmp(r[x].y.redNeg())===0?(w[1]=r[g].toJ().mixedAdd(r[x]),w[2]=r[g].add(r[x].neg())):(w[1]=r[g].toJ().mixedAdd(r[x]),w[2]=r[g].toJ().mixedAdd(r[x].neg()));var S=[-3,-1,-5,-7,0,7,5,1,3],T=hz(n[g],n[x]);for(u=Math.max(T[0].length,u),c[g]=new Array(u),c[x]=new Array(u),f=0;f<u;f++){var A=T[0][f]|0,_=T[1][f]|0;c[g][f]=S[(A+1)*3+(_+1)],c[x][f]=0,a[g]=w}}var C=this.jpoint(null,null,null),W=this._wnafT4;for(d=u;d>=0;d--){for(var re=0;d>=0;){var Y=!0;for(f=0;f<i;f++)W[f]=c[f][d]|0,W[f]!==0&&(Y=!1);if(!Y)break;re++,d--}if(d>=0&&re++,C=C.dblp(re),d<0)break;for(f=0;f<i;f++){var G=W[f];G!==0&&(G>0?p=a[f][G-1>>1]:G<0&&(p=a[f][-G-1>>1].neg()),p.type==="affine"?C=C.mixedAdd(p):C=C.add(p))}}for(d=0;d<i;d++)a[d]=null;return o?C:C.toP()};function mi(t,e){this.curve=t,this.type=e,this.precomputed=null}fa.BasePoint=mi;mi.prototype.eq=function(){throw new Error("Not implemented")};mi.prototype.validate=function(){return this.curve.validate(this)};fa.prototype.decodePoint=function(e,r){e=Gn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?tm(e[e.length-1]%2===0):e[0]===7&&tm(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};mi.prototype.encodeCompressed=function(e){return this.encode(e,!0)};mi.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};mi.prototype.encode=function(e,r){return Gn.encode(this._encode(r),e)};mi.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};mi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};mi.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};mi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:e,points:r}};mi.prototype._getBeta=function(){return null};mi.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var f2=yf(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),pz=Gn.assert;function gi(t){_c.call(this,"short",t),this.a=new Pe.default(t.a,16).toRed(this.red),this.b=new Pe.default(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}f2(gi,_c);var yz=gi;gi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Pe.default(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Pe.default(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],pz(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new Pe.default(a.a,16),b:new Pe.default(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};gi.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Pe.default.mont(e),n=new Pe.default(2).toRed(r).redInvm(),i=n.redNeg(),o=new Pe.default(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};gi.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new Pe.default(1),s=new Pe.default(0),a=new Pe.default(0),c=new Pe.default(1),u,d,f,p,m,g,x,w=0,S,T;n.cmpn(0)!==0;){var A=i.div(n);S=i.sub(A.mul(n)),T=a.sub(A.mul(o));var _=c.sub(A.mul(s));if(!f&&S.cmp(r)<0)u=x.neg(),d=o,f=S.neg(),p=T;else if(f&&++w===2)break;x=S,i=n,n=S,a=o,o=T,c=s,s=_}m=S.neg(),g=T;var C=f.sqr().add(p.sqr()),W=m.sqr().add(g.sqr());return W.cmp(C)>=0&&(m=u,g=d),f.negative&&(f=f.neg(),p=p.neg()),m.negative&&(m=m.neg(),g=g.neg()),[{a:f,b:p},{a:m,b:g}]};gi.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),a=o.mul(n.a),c=s.mul(i.a),u=o.mul(n.b),d=s.mul(i.b),f=e.sub(a).sub(c),p=u.add(d).neg();return{k1:f,k2:p}};gi.prototype.pointFromX=function(e,r){e=new Pe.default(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(e,i)};gi.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};gi.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(r[s]),c=e[s],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=c,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var d=this._wnafMulAdd(1,i,o,s*2,n),f=0;f<s*2;f++)i[f]=null,o[f]=null;return d};function kr(t,e,r,n){_c.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Pe.default(e,16),this.y=new Pe.default(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}f2(kr,_c.BasePoint);gi.prototype.point=function(e,r,n){return new kr(this,e,r,n)};gi.prototype.pointFromJSON=function(e,r){return kr.fromJSON(this,e,r)};kr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};kr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};kr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function o(a){return e.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};kr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};kr.prototype.isInfinity=function(){return this.inf};kr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};kr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};kr.prototype.getX=function(){return this.x.fromRed()};kr.prototype.getY=function(){return this.y.fromRed()};kr.prototype.mul=function(e){return e=new Pe.default(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};kr.prototype.mulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};kr.prototype.jmulAdd=function(e,r,n){var i=[this,r],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};kr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};kr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};kr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Rr(t,e,r,n){_c.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Pe.default(0)):(this.x=new Pe.default(e,16),this.y=new Pe.default(r,16),this.z=new Pe.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}f2(Rr,_c.BasePoint);gi.prototype.jpoint=function(e,r,n){return new Rr(this,e,r,n)};Rr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Rr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Rr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=e.x.redMul(n),s=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(o),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=c.redSqr(),f=d.redMul(c),p=i.redMul(d),m=u.redSqr().redIAdd(f).redISub(p).redISub(p),g=u.redMul(p.redISub(m)).redISub(s.redMul(f)),x=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(m,g,x)};Rr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),o=this.y,s=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=o.redSub(s);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),d=u.redMul(a),f=n.redMul(u),p=c.redSqr().redIAdd(d).redISub(f).redISub(f),m=c.redMul(f.redISub(p)).redISub(o.redMul(d)),g=this.z.redMul(a);return this.curve.jpoint(p,m,g)};Rr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),d=a.redAdd(a);for(r=0;r<e;r++){var f=s.redSqr(),p=d.redSqr(),m=p.redSqr(),g=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(u)),x=s.redMul(p),w=g.redSqr().redISub(x.redAdd(x)),S=x.redISub(w),T=g.redMul(S);T=T.redIAdd(T).redISub(m);var A=d.redMul(c);r+1<e&&(u=u.redMul(m)),s=w,c=A,d=T}return this.curve.jpoint(s,d.redMul(o),c)};Rr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Rr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),e=u,r=c.redMul(a.redISub(u)).redISub(d),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),p=this.y.redSqr(),m=p.redSqr(),g=this.x.redAdd(p).redSqr().redISub(f).redISub(m);g=g.redIAdd(g);var x=f.redAdd(f).redIAdd(f),w=x.redSqr(),S=m.redIAdd(m);S=S.redIAdd(S),S=S.redIAdd(S),e=w.redISub(g).redISub(g),r=x.redMul(g.redISub(e)).redISub(S),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Rr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var d=s.redIAdd(s);d=d.redIAdd(d),d=d.redIAdd(d),r=c.redMul(a.redISub(u)).redISub(d),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),p=this.y.redSqr(),m=this.x.redMul(p),g=this.x.redSub(f).redMul(this.x.redAdd(f));g=g.redAdd(g).redIAdd(g);var x=m.redIAdd(m);x=x.redIAdd(x);var w=x.redAdd(x);e=g.redSqr().redISub(w),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(f);var S=p.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S),r=g.redMul(x.redISub(e)).redISub(S)}return this.curve.jpoint(e,r,n)};Rr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var d=u.redMul(a),f=c.redSqr().redISub(d.redAdd(d)),p=d.redISub(f),m=a.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var g=c.redMul(p).redISub(m),x=n.redAdd(n).redMul(i);return this.curve.jpoint(f,g,x)};Rr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var d=o.redIAdd(a).redSqr().redISub(s).redISub(c).redISub(u),f=r.redMul(d);f=f.redIAdd(f),f=f.redIAdd(f);var p=this.x.redMul(c).redISub(f);p=p.redIAdd(p),p=p.redIAdd(p);var m=this.y.redMul(d.redMul(u.redISub(d)).redISub(a.redMul(c)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var g=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(p,m,g)};Rr.prototype.mul=function(e,r){return e=new Pe.default(e,r),this.curve._wnafMul(this,e)};Rr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Rr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Rr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Rr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Zy=yf(function(t,e){"use strict";var r=e;r.base=_c,r.short=yz,r.mont=null,r.edwards=null}),Jy=yf(function(t,e){"use strict";var r=e,n=Gn.assert;function i(a){a.type==="short"?this.curve=new Zy.short(a):a.type==="edwards"?this.curve=new Zy.edwards(a):this.curve=new Zy.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:go.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:go.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:go.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:go.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:go.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:go.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:go.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:go.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function ua(t){if(!(this instanceof ua))return new ua(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Mi.toArray(t.entropy,t.entropyEnc||"hex"),r=Mi.toArray(t.nonce,t.nonceEnc||"hex"),n=Mi.toArray(t.pers,t.persEnc||"hex");u2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Y5=ua;ua.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ua.prototype._hmac=function(){return new go.default.hmac(this.hash,this.K)};ua.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ua.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Mi.toArray(e,r),n=Mi.toArray(n,i),u2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ua.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Mi.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,Mi.encode(s,r)};var c2=Gn.assert;function Zr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var d2=Zr;Zr.fromPublic=function(e,r,n){return r instanceof Zr?r:new Zr(e,{pub:r,pubEnc:n})};Zr.fromPrivate=function(e,r,n){return r instanceof Zr?r:new Zr(e,{priv:r,privEnc:n})};Zr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Zr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Zr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Zr.prototype._importPrivate=function(e,r){this.priv=new Pe.default(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Zr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?c2(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&c2(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Zr.prototype.derive=function(e){return e.validate()||c2(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Zr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Zr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Zr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var mz=Gn.assert;function rm(t,e){if(t instanceof rm)return t;this._importDER(t,e)||(mz(t.r&&t.s,"Signature without r or s"),this.r=new Pe.default(t.r,16),this.s=new Pe.default(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var nm=rm;function gz(){this.place=0}function s2(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function G5(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}rm.prototype._importDER=function(e,r){e=Gn.toArray(e,r);var n=new gz;if(e[n.place++]!==48)return!1;var i=s2(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=s2(e,n);if(o===!1)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var a=s2(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Pe.default(s),this.s=new Pe.default(c),this.recoveryParam=null,!0};function a2(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}rm.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=G5(r),n=G5(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];a2(i,r.length),i=i.concat(r),i.push(2),a2(i,n.length);var o=i.concat(n),s=[48];return a2(s,o.length),s=s.concat(o),Gn.encode(s,e)};var bz=function(){throw new Error("unsupported")},Q5=Gn.assert;function yi(t){if(!(this instanceof yi))return new yi(t);typeof t=="string"&&(Q5(Object.prototype.hasOwnProperty.call(Jy,t),"Unknown curve "+t),t=Jy[t]),t instanceof Jy.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var xz=yi;yi.prototype.keyPair=function(e){return new d2(this,e)};yi.prototype.keyFromPrivate=function(e,r){return d2.fromPrivate(this,e,r)};yi.prototype.keyFromPublic=function(e,r){return d2.fromPublic(this,e,r)};yi.prototype.genKeyPair=function(e){e||(e={});for(var r=new Y5({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||bz(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Pe.default(2));;){var o=new Pe.default(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};yi.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};yi.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Pe.default(e,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=e.toArray("be",o),c=new Y5({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Pe.default(1)),d=0;;d++){var f=i.k?i.k(d):new Pe.default(c.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(u)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(g.cmpn(0)!==0){var x=f.invm(this.n).mul(g.mul(r.getPrivate()).iadd(e));if(x=x.umod(this.n),x.cmpn(0)!==0){var w=(p.getY().isOdd()?1:0)|(m.cmp(g)!==0?2:0);return i.canonical&&x.cmp(this.nh)>0&&(x=this.n.sub(x),w^=1),new nm({r:g,s:x,recoveryParam:w})}}}}}};yi.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Pe.default(e,16)),n=this.keyFromPublic(n,i),r=new nm(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(o).umod(this.n),d;return this.curve._maxwellTrick?(d=this.g.jmulAdd(c,n.getPublic(),u),d.isInfinity()?!1:d.eqXToP(o)):(d=this.g.mulAdd(c,n.getPublic(),u),d.isInfinity()?!1:d.getX().umod(this.n).cmp(o)===0)};yi.prototype.recoverPubKey=function(t,e,r,n){Q5((3&r)===r,"The recovery param is more than two bits"),e=new nm(e,n);var i=this.n,o=new Pe.default(t),s=e.r,a=e.s,c=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var d=e.r.invm(i),f=i.sub(o).mul(d).umod(i),p=a.mul(d).umod(i);return this.g.mulAdd(f,s,p)};yi.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new nm(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var wz=yf(function(t,e){"use strict";var r=e;r.version="6.5.4",r.utils=Gn,r.rand=function(){throw new Error("unsupported")},r.curve=Zy,r.curves=Jy,r.ec=xz,r.eddsa=null}),X5=wz.ec;var _t=j(xr()),mf=j(fi()),J5=j(an());l();h();var Z5="signing-key/5.7.0";var h2=new J5.Logger(Z5),l2=null;function bo(){return l2||(l2=new X5("secp256k1")),l2}var xo=class{constructor(e){(0,mf.defineReadOnly)(this,"curve","secp256k1"),(0,mf.defineReadOnly)(this,"privateKey",(0,_t.hexlify)(e)),(0,_t.hexDataLength)(this.privateKey)!==32&&h2.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=bo().keyFromPrivate((0,_t.arrayify)(this.privateKey));(0,mf.defineReadOnly)(this,"publicKey","0x"+r.getPublic(!1,"hex")),(0,mf.defineReadOnly)(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),(0,mf.defineReadOnly)(this,"_isSigningKey",!0)}_addPoint(e){let r=bo().keyFromPublic((0,_t.arrayify)(this.publicKey)),n=bo().keyFromPublic((0,_t.arrayify)(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){let r=bo().keyFromPrivate((0,_t.arrayify)(this.privateKey)),n=(0,_t.arrayify)(e);n.length!==32&&h2.throwArgumentError("bad digest length","digest",e);let i=r.sign(n,{canonical:!0});return(0,_t.splitSignature)({recoveryParam:i.recoveryParam,r:(0,_t.hexZeroPad)("0x"+i.r.toString(16),32),s:(0,_t.hexZeroPad)("0x"+i.s.toString(16),32)})}computeSharedSecret(e){let r=bo().keyFromPrivate((0,_t.arrayify)(this.privateKey)),n=bo().keyFromPublic((0,_t.arrayify)(p2(e)));return(0,_t.hexZeroPad)("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function ek(t,e){let r=(0,_t.splitSignature)(e),n={r:(0,_t.arrayify)(r.r),s:(0,_t.arrayify)(r.s)};return"0x"+bo().recoverPubKey((0,_t.arrayify)(t),n,r.recoveryParam).encode("hex",!1)}function p2(t,e){let r=(0,_t.arrayify)(t);if(r.length===32){let n=new xo(r);return e?"0x"+bo().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?(0,_t.hexlify)(r):"0x"+bo().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+bo().keyFromPublic(r).getPublic(!0,"hex"):(0,_t.hexlify)(r)}return h2.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Dn=j(i2());l();h();var gf=j(Bd()),da=j(hu()),_e=j(xr()),nk=j(Mw()),Pc=j(As()),ik=j(fi()),wo=j(cN());var im=j(an());l();h();var tk="transactions/5.7.0";var en=new im.Logger(tk),rk;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(rk||(rk={}));function m2(t){return t==="0x"?null:(0,gf.getAddress)(t)}function Jr(t){return t==="0x"?nk.Zero:da.BigNumber.from(t)}var Az=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Sz={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Ao(t){let e=p2(t);return(0,gf.getAddress)((0,_e.hexDataSlice)((0,Pc.keccak256)((0,_e.hexDataSlice)(e,1)),12))}function g2(t,e){return Ao(ek((0,_e.arrayify)(t),e))}function $n(t,e){let r=(0,_e.stripZeros)(da.BigNumber.from(t).toHexString());return r.length>32&&en.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function y2(t,e){return{address:(0,gf.getAddress)(t),storageKeys:(e||[]).map((r,n)=>((0,_e.hexDataLength)(r)!==32&&en.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function b2(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&en.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),y2(r[0],r[1])):y2(r.address,r.storageKeys));let e=Object.keys(t).map(r=>{let n=t[r].reduce((i,o)=>(i[o]=!0,i),{});return y2(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function ok(t){return b2(t).map(e=>[e.address,e.storageKeys])}function sk(t,e){if(t.gasPrice!=null){let n=da.BigNumber.from(t.gasPrice),i=da.BigNumber.from(t.maxFeePerGas||0);n.eq(i)||en.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}let r=[$n(t.chainId||0,"chainId"),$n(t.nonce||0,"nonce"),$n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$n(t.maxFeePerGas||0,"maxFeePerGas"),$n(t.gasLimit||0,"gasLimit"),t.to!=null?(0,gf.getAddress)(t.to):"0x",$n(t.value||0,"value"),t.data||"0x",ok(t.accessList||[])];if(e){let n=(0,_e.splitSignature)(e);r.push($n(n.recoveryParam,"recoveryParam")),r.push((0,_e.stripZeros)(n.r)),r.push((0,_e.stripZeros)(n.s))}return(0,_e.hexConcat)(["0x02",wo.encode(r)])}function ak(t,e){let r=[$n(t.chainId||0,"chainId"),$n(t.nonce||0,"nonce"),$n(t.gasPrice||0,"gasPrice"),$n(t.gasLimit||0,"gasLimit"),t.to!=null?(0,gf.getAddress)(t.to):"0x",$n(t.value||0,"value"),t.data||"0x",ok(t.accessList||[])];if(e){let n=(0,_e.splitSignature)(e);r.push($n(n.recoveryParam,"recoveryParam")),r.push((0,_e.stripZeros)(n.r)),r.push((0,_e.stripZeros)(n.s))}return(0,_e.hexConcat)(["0x01",wo.encode(r)])}function vz(t,e){(0,ik.checkProperties)(t,Sz);let r=[];Az.forEach(function(s){let a=t[s.name]||[],c={};s.numeric&&(c.hexPad="left"),a=(0,_e.arrayify)((0,_e.hexlify)(a,c)),s.length&&a.length!==s.length&&a.length>0&&en.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=(0,_e.stripZeros)(a),a.length>s.maxLength&&en.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),r.push((0,_e.hexlify)(a))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&en.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!(0,_e.isBytesLike)(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push((0,_e.hexlify)(n)),r.push("0x"),r.push("0x")),!e)return wo.encode(r);let i=(0,_e.splitSignature)(e),o=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),o+=n*2+8,i.v>28&&i.v!==o&&en.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==o&&en.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push((0,_e.hexlify)(o)),r.push((0,_e.stripZeros)((0,_e.arrayify)(i.r))),r.push((0,_e.stripZeros)((0,_e.arrayify)(i.s))),wo.encode(r)}function x2(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&en.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),vz(t,e);switch(t.type){case 1:return ak(t,e);case 2:return sk(t,e);default:break}return en.throwError(`unsupported transaction type: ${t.type}`,im.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function ck(t,e,r){try{let n=Jr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{en.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=(0,_e.hexZeroPad)(e[1],32),t.s=(0,_e.hexZeroPad)(e[2],32);try{let n=(0,Pc.keccak256)(r(t));t.from=g2(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Ez(t){let e=wo.decode(t.slice(1));e.length!==9&&e.length!==12&&en.throwArgumentError("invalid component count for transaction type: 2","payload",(0,_e.hexlify)(t));let r=Jr(e[2]),n=Jr(e[3]),i={type:2,chainId:Jr(e[0]).toNumber(),nonce:Jr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Jr(e[4]),to:m2(e[5]),value:Jr(e[6]),data:e[7],accessList:b2(e[8])};return e.length===9||(i.hash=(0,Pc.keccak256)(t),ck(i,e.slice(9),sk)),i}function Iz(t){let e=wo.decode(t.slice(1));e.length!==8&&e.length!==11&&en.throwArgumentError("invalid component count for transaction type: 1","payload",(0,_e.hexlify)(t));let r={type:1,chainId:Jr(e[0]).toNumber(),nonce:Jr(e[1]).toNumber(),gasPrice:Jr(e[2]),gasLimit:Jr(e[3]),to:m2(e[4]),value:Jr(e[5]),data:e[6],accessList:b2(e[7])};return e.length===8||(r.hash=(0,Pc.keccak256)(t),ck(r,e.slice(8),ak)),r}function kz(t){let e=wo.decode(t);e.length!==9&&e.length!==6&&en.throwArgumentError("invalid raw transaction","rawTransaction",t);let r={nonce:Jr(e[0]).toNumber(),gasPrice:Jr(e[1]),gasLimit:Jr(e[2]),to:m2(e[3]),value:Jr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=da.BigNumber.from(e[6]).toNumber()}catch{return r}if(r.r=(0,_e.hexZeroPad)(e[7],32),r.s=(0,_e.hexZeroPad)(e[8],32),da.BigNumber.from(r.r).isZero()&&da.BigNumber.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,i=e.slice(0,6);r.chainId!==0&&(i.push((0,_e.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);let o=(0,Pc.keccak256)(wo.encode(i));try{r.from=g2(o,{r:(0,_e.hexlify)(r.r),s:(0,_e.hexlify)(r.s),recoveryParam:n})}catch{}r.hash=(0,Pc.keccak256)(t)}return r.type=null,r}function Sle(t){let e=(0,_e.arrayify)(t);if(e[0]>127)return kz(e);switch(e[0]){case 1:return Iz(e);case 2:return Ez(e);default:break}return en.throwError(`unsupported transaction type: ${e[0]}`,im.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}l();h();l();h();var fk=j(e2()),w2=j(fi()),dk=j(an());l();h();var uk="wordlists/5.7.0";var Tz=!1,_z=new dk.Logger(uk),bf=class t{constructor(e){_z.checkAbstract(new.target,t),(0,w2.defineReadOnly)(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){let r=[];for(let n=0;n<2048;n++){let i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return(0,fk.id)(r.join(`
`)+`
`)}static register(e,r){if(r||(r=e.locale),Tz)try{let n=self;n._ethers&&n._ethers.wordlists&&(n._ethers.wordlists[r]||(0,w2.defineReadOnly)(n._ethers.wordlists,r,e))}catch{}}};l();h();l();h();var Pz="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",Jl=null;function lk(t){if(Jl==null&&(Jl=Pz.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),bf.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Jl=null,new Error("BIP39 Wordlist for en (English) FAILED")}var A2=class extends bf{constructor(){super("en")}getWord(e){return lk(this),Jl[e]}getWordIndex(e){return lk(this),Jl.indexOf(e)}},S2=new A2;bf.register(S2);var om={en:S2};var yk=j(an());l();h();var hk="hdnode/5.7.0";var am=new yk.Logger(hk),Bz=v2.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cz=(0,Bc.toUtf8Bytes)("Bitcoin seed"),e0=2147483648;function mk(t){return(1<<t)-1<<8-t}function Dz(t){return(1<<t)-1}function sm(t){return(0,tt.hexZeroPad)((0,tt.hexlify)(t),32)}function pk(t){return r2.encode((0,tt.concat)([t,(0,tt.hexDataSlice)((0,Dn.sha256)((0,Dn.sha256)(t)),0,4)]))}function E2(t){if(t==null)return om.en;if(typeof t=="string"){let e=om[t];return e==null&&am.throwArgumentError("unknown locale","wordlist",t),e}return t}var xf={},Cc="m/44'/60'/0'/0/0",la=class t{constructor(e,r,n,i,o,s,a,c){if(e!==xf)throw new Error("HDNode constructor cannot be called directly");if(r){let u=new xo(r);(0,Lr.defineReadOnly)(this,"privateKey",u.privateKey),(0,Lr.defineReadOnly)(this,"publicKey",u.compressedPublicKey)}else(0,Lr.defineReadOnly)(this,"privateKey",null),(0,Lr.defineReadOnly)(this,"publicKey",(0,tt.hexlify)(n));(0,Lr.defineReadOnly)(this,"parentFingerprint",i),(0,Lr.defineReadOnly)(this,"fingerprint",(0,tt.hexDataSlice)((0,Dn.ripemd160)((0,Dn.sha256)(this.publicKey)),0,4)),(0,Lr.defineReadOnly)(this,"address",Ao(this.publicKey)),(0,Lr.defineReadOnly)(this,"chainCode",o),(0,Lr.defineReadOnly)(this,"index",s),(0,Lr.defineReadOnly)(this,"depth",a),c==null?((0,Lr.defineReadOnly)(this,"mnemonic",null),(0,Lr.defineReadOnly)(this,"path",null)):typeof c=="string"?((0,Lr.defineReadOnly)(this,"mnemonic",null),(0,Lr.defineReadOnly)(this,"path",c)):((0,Lr.defineReadOnly)(this,"mnemonic",c),(0,Lr.defineReadOnly)(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return pk((0,tt.concat)([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",(0,tt.hexlify)(this.depth),this.parentFingerprint,(0,tt.hexZeroPad)((0,tt.hexlify)(this.index),4),this.chainCode,this.privateKey!=null?(0,tt.concat)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new t(xf,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~e0));let n=new Uint8Array(37);if(e&e0){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set((0,tt.arrayify)(this.privateKey),1),r&&(r+="'")}else n.set((0,tt.arrayify)(this.publicKey));for(let f=24;f>=0;f-=8)n[33+(f>>3)]=e>>24-f&255;let i=(0,tt.arrayify)((0,Dn.computeHmac)(Dn.SupportedAlgorithm.sha512,this.chainCode,n)),o=i.slice(0,32),s=i.slice(32),a=null,c=null;this.privateKey?a=sm(v2.BigNumber.from(o).add(this.privateKey).mod(Bz)):c=new xo((0,tt.hexlify)(o))._addPoint(this.publicKey);let u=r,d=this.mnemonic;return d&&(u=Object.freeze({phrase:d.phrase,path:r,locale:d.locale||"en"})),new t(xf,a,c,this.fingerprint,sm(s),e,this.depth+1,u)}derivePath(e){let r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){let o=r[i];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=e0)throw new Error("invalid path index - "+o);n=n._derive(e0+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=e0)throw new Error("invalid path index - "+o);n=n._derive(s)}else throw new Error("invalid path component - "+o)}return n}static _fromSeed(e,r){let n=(0,tt.arrayify)(e);if(n.length<16||n.length>64)throw new Error("invalid seed");let i=(0,tt.arrayify)((0,Dn.computeHmac)(Dn.SupportedAlgorithm.sha512,Cz,n));return new t(xf,sm(i.slice(0,32)),null,"0x00000000",sm(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=E2(n),e=t0(I2(e,n),n),t._fromSeed(Nz(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return t._fromSeed(e,null)}static fromExtendedKey(e){let r=r2.decode(e);(r.length!==82||pk(r.slice(0,78))!==e)&&am.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let n=r[4],i=(0,tt.hexlify)(r.slice(5,9)),o=parseInt((0,tt.hexlify)(r.slice(9,13)).substring(2),16),s=(0,tt.hexlify)(r.slice(13,45)),a=r.slice(45,78);switch((0,tt.hexlify)(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new t(xf,null,(0,tt.hexlify)(a),i,s,o,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new t(xf,(0,tt.hexlify)(a.slice(1)),null,i,s,o,n,null)}return am.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function Nz(t,e){e||(e="");let r=(0,Bc.toUtf8Bytes)("mnemonic"+e,Bc.UnicodeNormalizationForm.NFKD);return Tc((0,Bc.toUtf8Bytes)(t,Bc.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512")}function I2(t,e){e=E2(e),am.checkNormalize();let r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");let n=(0,tt.arrayify)(new Uint8Array(Math.ceil(11*r.length/8))),i=0;for(let u=0;u<r.length;u++){let d=e.getWordIndex(r[u].normalize("NFKD"));if(d===-1)throw new Error("invalid mnemonic");for(let f=0;f<11;f++)d&1<<10-f&&(n[i>>3]|=1<<7-i%8),i++}let o=32*r.length/3,s=r.length/3,a=mk(s);if(((0,tt.arrayify)((0,Dn.sha256)(n.slice(0,o/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return(0,tt.hexlify)(n.slice(0,o/8))}function t0(t,e){if(e=E2(e),t=(0,tt.arrayify)(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");let r=[0],n=11;for(let s=0;s<t.length;s++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[s],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[s]>>8-n,r.push(t[s]&Dz(8-n)),n+=3);let i=t.length/4,o=(0,tt.arrayify)((0,Dn.sha256)(t))[0]&mk(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,e.join(r.map(s=>e.getWord(s)))}var q2=j(As()),bi=j(fi());l();h();l();h();var xk=j(xr()),T2=j(an());l();h();var gk="random/5.7.0";var k2=new T2.Logger(gk);function Oz(){if(typeof self<"u"||typeof self<"u"||typeof self<"u")return self;throw new Error("unable to locate global object")}var bk=Oz(),cm=bk.crypto||bk.msCrypto;(!cm||!cm.getRandomValues)&&(k2.warn("WARNING: Missing strong random number source"),cm={getRandomValues:function(t){return k2.throwError("no secure random source avaialble",T2.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function ha(t){(t<=0||t>1024||t%1||t!=t)&&k2.throwArgumentError("invalid length","length",t);let e=new Uint8Array(t);return cm.getRandomValues(e),(0,xk.arrayify)(e)}l();h();l();h();var B2=j(P2()),Sk=j(Bd()),C2=j(xr()),vk=j(As());var Ek=j(sa()),Ik=j(fi()),kk=j(an());l();h();var um="json-wallets/5.7.0";l();h();var wf=j(xr()),fm=j(sa());function Zo(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),(0,wf.arrayify)(t)}function Af(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function r0(t){return typeof t=="string"?(0,fm.toUtf8Bytes)(t,fm.UnicodeNormalizationForm.NFKC):(0,wf.arrayify)(t)}function qt(t,e){let r=t,n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let o=null;for(let s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(o===null)return null;r=o}return r}function Ak(t){let e=(0,wf.arrayify)(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=(0,wf.hexlify)(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var Uz=new kk.Logger(um),D2=class extends Ik.Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}};function N2(t,e){let r=JSON.parse(t);e=r0(e);let n=(0,Sk.getAddress)(qt(r,"ethaddr")),i=Zo(qt(r,"encseed"));(!i||i.length%16!==0)&&Uz.throwArgumentError("invalid encseed","json",t);let o=(0,C2.arrayify)(Tc(e,e,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new B2.default.ModeOfOperation.cbc(o,s),u=B2.default.padding.pkcs7.strip((0,C2.arrayify)(c.decrypt(a))),d="";for(let m=0;m<u.length;m++)d+=String.fromCharCode(u[m]);let f=(0,Ek.toUtf8Bytes)(d),p=(0,vk.keccak256)(f);return new D2({_isCrowdsaleAccount:!0,address:n,privateKey:p})}l();h();function O2(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function U2(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}l();h();var Jo=j(P2()),lm=j(_k()),F2=j(Bd()),zt=j(xr());var H2=j(As());var Bk=j(fi());var dm=j(an());var Rz=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},L2=new dm.Logger(um);function Pk(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}var M2=class extends Bk.Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}};function Lz(t,e,r){if(qt(t,"crypto/cipher")==="aes-128-ctr"){let i=Zo(qt(t,"crypto/cipherparams/iv")),o=new Jo.default.Counter(i),s=new Jo.default.ModeOfOperation.ctr(e,o);return(0,zt.arrayify)(s.decrypt(r))}return null}function Ck(t,e){let r=Zo(qt(t,"crypto/ciphertext"));if((0,zt.hexlify)((0,H2.keccak256)((0,zt.concat)([e.slice(16,32),r]))).substring(2)!==qt(t,"crypto/mac").toLowerCase())throw new Error("invalid password");let i=Lz(t,e.slice(0,16),r);i||L2.throwError("unsupported cipher",dm.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=e.slice(32,64),s=Ao(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),(0,F2.getAddress)(c)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:(0,zt.hexlify)(i)};if(qt(t,"x-ethers/version")==="0.1"){let c=Zo(qt(t,"x-ethers/mnemonicCiphertext")),u=Zo(qt(t,"x-ethers/mnemonicCounter")),d=new Jo.default.Counter(u),f=new Jo.default.ModeOfOperation.ctr(o,d),p=qt(t,"x-ethers/path")||Cc,m=qt(t,"x-ethers/locale")||"en",g=(0,zt.arrayify)(f.decrypt(c));try{let x=t0(g,m),w=la.fromMnemonic(x,null,m).derivePath(p);if(w.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=w.mnemonic}catch(x){if(x.code!==dm.Logger.errors.INVALID_ARGUMENT||x.argument!=="wordlist")throw x}}return new M2(a)}function Dk(t,e,r,n,i){return(0,zt.arrayify)(Tc(t,e,r,n,i))}function Mz(t,e,r,n,i){return Promise.resolve(Dk(t,e,r,n,i))}function Nk(t,e,r,n,i){let o=r0(e),s=qt(t,"crypto/kdf");if(s&&typeof s=="string"){let a=function(c,u){return L2.throwArgumentError("invalid key-derivation function parameters",c,u)};if(s.toLowerCase()==="scrypt"){let c=Zo(qt(t,"crypto/kdfparams/salt")),u=parseInt(qt(t,"crypto/kdfparams/n")),d=parseInt(qt(t,"crypto/kdfparams/r")),f=parseInt(qt(t,"crypto/kdfparams/p"));(!u||!d||!f)&&a("kdf",s),u&u-1&&a("N",u);let p=parseInt(qt(t,"crypto/kdfparams/dklen"));return p!==32&&a("dklen",p),n(o,c,u,d,f,64,i)}else if(s.toLowerCase()==="pbkdf2"){let c=Zo(qt(t,"crypto/kdfparams/salt")),u=null,d=qt(t,"crypto/kdfparams/prf");d==="hmac-sha256"?u="sha256":d==="hmac-sha512"?u="sha512":a("prf",d);let f=parseInt(qt(t,"crypto/kdfparams/c")),p=parseInt(qt(t,"crypto/kdfparams/dklen"));return p!==32&&a("dklen",p),r(o,c,f,p,u)}}return L2.throwArgumentError("unsupported key-derivation function","kdf",s)}function Ok(t,e){let r=JSON.parse(t),n=Nk(r,e,Dk,lm.default.syncScrypt);return Ck(r,n)}function Uk(t,e,r){return Rz(this,void 0,void 0,function*(){let n=JSON.parse(t),i=yield Nk(n,e,Mz,lm.default.scrypt,r);return Ck(n,i)})}function K2(t,e,r,n){try{if((0,F2.getAddress)(t.address)!==Ao(t.privateKey))throw new Error("address/privateKey mismatch");if(Pk(t)){let w=t.mnemonic;if(la.fromMnemonic(w.phrase,null,w.locale).derivePath(w.path||Cc).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(w){return Promise.reject(w)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});let i=(0,zt.arrayify)(t.privateKey),o=r0(e),s=null,a=null,c=null;if(Pk(t)){let w=t.mnemonic;s=(0,zt.arrayify)(I2(w.phrase,w.locale||"en")),a=w.path||Cc,c=w.locale||"en"}let u=r.client;u||(u="ethers.js");let d=null;r.salt?d=(0,zt.arrayify)(r.salt):d=ha(32);let f=null;if(r.iv){if(f=(0,zt.arrayify)(r.iv),f.length!==16)throw new Error("invalid iv")}else f=ha(16);let p=null;if(r.uuid){if(p=(0,zt.arrayify)(r.uuid),p.length!==16)throw new Error("invalid uuid")}else p=ha(16);let m=1<<17,g=8,x=1;return r.scrypt&&(r.scrypt.N&&(m=r.scrypt.N),r.scrypt.r&&(g=r.scrypt.r),r.scrypt.p&&(x=r.scrypt.p)),lm.default.scrypt(o,d,m,g,x,64,n).then(w=>{w=(0,zt.arrayify)(w);let S=w.slice(0,16),T=w.slice(16,32),A=w.slice(32,64),_=new Jo.default.Counter(f),C=new Jo.default.ModeOfOperation.ctr(S,_),W=(0,zt.arrayify)(C.encrypt(i)),re=(0,H2.keccak256)((0,zt.concat)([T,W])),Y={address:t.address.substring(2).toLowerCase(),id:Ak(p),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,zt.hexlify)(f).substring(2)},ciphertext:(0,zt.hexlify)(W).substring(2),kdf:"scrypt",kdfparams:{salt:(0,zt.hexlify)(d).substring(2),n:m,dklen:32,p:x,r:g},mac:re.substring(2)}};if(s){let G=ha(16),ee=new Jo.default.Counter(G),Z=new Jo.default.ModeOfOperation.ctr(A,ee),D=(0,zt.arrayify)(Z.encrypt(s)),N=new Date,O=N.getUTCFullYear()+"-"+Af(N.getUTCMonth()+1,2)+"-"+Af(N.getUTCDate(),2)+"T"+Af(N.getUTCHours(),2)+"-"+Af(N.getUTCMinutes(),2)+"-"+Af(N.getUTCSeconds(),2)+".0Z";Y["x-ethers"]={client:u,gethFilename:"UTC--"+O+"--"+Y.address,mnemonicCounter:(0,zt.hexlify)(G).substring(2),mnemonicCiphertext:(0,zt.hexlify)(D).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(Y)})}function Rk(t,e,r){if(O2(t)){r&&r(0);let n=N2(t,e);return r&&r(1),Promise.resolve(n)}return U2(t)?Uk(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function Lk(t,e){if(O2(t))return N2(t,e);if(U2(t))return Ok(t,e);throw new Error("invalid JSON wallet")}var z2=j(an());l();h();var Mk="wallet/5.7.0";var Fk=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(d){try{u(n.next(d))}catch(f){s(f)}}function c(d){try{u(n.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((n=n.apply(t,e||[])).next())})},Sf=new z2.Logger(Mk);function Fz(t){return t!=null&&(0,Fi.isHexString)(t.privateKey,32)&&t.address!=null}function Hz(t){let e=t.mnemonic;return e&&e.phrase}var vf=class t extends Gl{constructor(e,r){if(super(),Fz(e)){let n=new xo(e.privateKey);if((0,bi.defineReadOnly)(this,"_signingKey",()=>n),(0,bi.defineReadOnly)(this,"address",Ao(this.publicKey)),this.address!==(0,V2.getAddress)(e.address)&&Sf.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),Hz(e)){let i=e.mnemonic;(0,bi.defineReadOnly)(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Cc,locale:i.locale||"en"}));let o=this.mnemonic,s=la.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Ao(s.privateKey)!==this.address&&Sf.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else(0,bi.defineReadOnly)(this,"_mnemonic",()=>null)}else{if(xo.isSigningKey(e))e.curve!=="secp256k1"&&Sf.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),(0,bi.defineReadOnly)(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);let n=new xo(e);(0,bi.defineReadOnly)(this,"_signingKey",()=>n)}(0,bi.defineReadOnly)(this,"_mnemonic",()=>null),(0,bi.defineReadOnly)(this,"address",Ao(this.publicKey))}r&&!Uy.isProvider(r)&&Sf.throwArgumentError("invalid provider","provider",r),(0,bi.defineReadOnly)(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new t(this,e)}signTransaction(e){return(0,bi.resolveProperties)(e).then(r=>{r.from!=null&&((0,V2.getAddress)(r.from)!==this.address&&Sf.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);let n=this._signingKey().signDigest((0,q2.keccak256)(x2(r)));return x2(r,n)})}signMessage(e){return Fk(this,void 0,void 0,function*(){return(0,Fi.joinSignature)(this._signingKey().signDigest((0,n0.hashMessage)(e)))})}_signTypedData(e,r,n){return Fk(this,void 0,void 0,function*(){let i=yield n0._TypedDataEncoder.resolveNames(e,r,n,o=>(this.provider==null&&Sf.throwError("cannot resolve ENS names without a provider",z2.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return(0,Fi.joinSignature)(this._signingKey().signDigest(n0._TypedDataEncoder.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),K2(this,e,r,n)}static createRandom(e){let r=ha(16);e||(e={}),e.extraEntropy&&(r=(0,Fi.arrayify)((0,Fi.hexDataSlice)((0,q2.keccak256)((0,Fi.concat)([r,e.extraEntropy])),0,16)));let n=t0(r,e.locale);return t.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return Rk(e,r,n).then(i=>new t(i))}static fromEncryptedJsonSync(e,r){return new t(Lk(e,r))}static fromMnemonic(e,r,n){return r||(r=Cc),new t(la.fromMnemonic(e,null,n).derivePath(r))}};var hm=class{addressTypes=["eip155"];generateKeypairFromPrivateKey(e){let r=e.fold(n=>new vf(new Uint8Array(n)));return{publicKey:new Uint8Array(Buffer.from(r.publicKey.slice(2),"hex")),privateKey:new Uint8Array(Buffer.from(r.privateKey.slice(2),"hex"))}}generateKeypairFromSeed(e,r,n){let i=e.fold(o=>new ho(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};l();h();l();h();l();h();l();h();l();h();function j2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Kz(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function Hk(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Vz(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");j2(t.outputLen),j2(t.blockLen)}function qz(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zz(t,e){Hk(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var jz={number:j2,bool:Kz,bytes:Hk,hash:Vz,exists:qz,output:zz},Hi=jz;l();h();l();h();var Wz={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Kk=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),pm=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);var Gz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Gz)throw new Error("Non little-endian hardware is not supported");var She=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $z(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function If(t){if(typeof t=="string"&&(t=$z(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}var Ef=class{clone(){return this._cloneInto()}};function Dc(t){let e=n=>t().update(If(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Vk(t){let e=(n,i)=>t(i).update(If(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Yz(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var ym=class extends Ef{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pm(this.buffer)}update(e){Hi.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=If(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=pm(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hi.exists(this),Hi.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;Yz(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=pm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};l();h();var mm=BigInt(4294967295),W2=BigInt(32);function qk(t,e=!1){return e?{h:Number(t&mm),l:Number(t>>W2&mm)}:{h:Number(t>>W2&mm)|0,l:Number(t&mm)|0}}function Qz(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=qk(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var Xz=(t,e)=>BigInt(t>>>0)<<W2|BigInt(e>>>0),Zz=(t,e,r)=>t>>>r,Jz=(t,e,r)=>t<<32-r|e>>>r,ej=(t,e,r)=>t>>>r|e<<32-r,tj=(t,e,r)=>t<<32-r|e>>>r,rj=(t,e,r)=>t<<64-r|e>>>r-32,nj=(t,e,r)=>t>>>r-32|e<<64-r,ij=(t,e)=>e,oj=(t,e)=>t,sj=(t,e,r)=>t<<r|e>>>32-r,aj=(t,e,r)=>e<<r|t>>>32-r,cj=(t,e,r)=>e<<r-32|t>>>64-r,uj=(t,e,r)=>t<<r-32|e>>>64-r;function fj(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var dj=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),lj=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,hj=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),pj=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,yj=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),mj=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,gj={fromBig:qk,split:Qz,toBig:Xz,shrSH:Zz,shrSL:Jz,rotrSH:ej,rotrSL:tj,rotrBH:rj,rotrBL:nj,rotr32H:ij,rotr32L:oj,rotlSH:sj,rotlSL:aj,rotlBH:cj,rotlBL:uj,add:fj,add3L:dj,add3H:lj,add4L:hj,add4H:pj,add5H:mj,add5L:yj},ke=gj;var[bj,xj]=ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pa=new Uint32Array(80),ya=new Uint32Array(80),kf=class extends ym{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:x,Hl:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)pa[A]=e.getUint32(r),ya[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){let _=pa[A-15]|0,C=ya[A-15]|0,W=ke.rotrSH(_,C,1)^ke.rotrSH(_,C,8)^ke.shrSH(_,C,7),re=ke.rotrSL(_,C,1)^ke.rotrSL(_,C,8)^ke.shrSL(_,C,7),Y=pa[A-2]|0,G=ya[A-2]|0,ee=ke.rotrSH(Y,G,19)^ke.rotrBH(Y,G,61)^ke.shrSH(Y,G,6),Z=ke.rotrSL(Y,G,19)^ke.rotrBL(Y,G,61)^ke.shrSL(Y,G,6),D=ke.add4L(re,Z,ya[A-7],ya[A-16]),N=ke.add4H(D,W,ee,pa[A-7],pa[A-16]);pa[A]=N|0,ya[A]=D|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:p,Fh:m,Fl:g,Gh:x,Gl:w,Hh:S,Hl:T}=this;for(let A=0;A<80;A++){let _=ke.rotrSH(f,p,14)^ke.rotrSH(f,p,18)^ke.rotrBH(f,p,41),C=ke.rotrSL(f,p,14)^ke.rotrSL(f,p,18)^ke.rotrBL(f,p,41),W=f&m^~f&x,re=p&g^~p&w,Y=ke.add5L(T,C,re,xj[A],ya[A]),G=ke.add5H(Y,S,_,W,bj[A],pa[A]),ee=Y|0,Z=ke.rotrSH(n,i,28)^ke.rotrBH(n,i,34)^ke.rotrBH(n,i,39),D=ke.rotrSL(n,i,28)^ke.rotrBL(n,i,34)^ke.rotrBL(n,i,39),N=n&o^n&a^o&a,O=i&s^i&c^s&c;S=x|0,T=w|0,x=m|0,w=g|0,m=f|0,g=p|0,{h:f,l:p}=ke.add(u|0,d|0,G|0,ee|0),u=a|0,d=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let $=ke.add3L(ee,D,O);n=ke.add3H($,G,Z,N),i=$|0}({h:n,l:i}=ke.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=ke.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=ke.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=ke.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:p}=ke.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=ke.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:x,l:w}=ke.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:S,l:T}=ke.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(n,i,o,s,a,c,u,d,f,p,m,g,x,w,S,T)}roundClean(){pa.fill(0),ya.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},G2=class extends kf{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},$2=class extends kf{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},Y2=class extends kf{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},zk=Dc(()=>new kf),Lhe=Dc(()=>new G2),Mhe=Dc(()=>new $2),Fhe=Dc(()=>new Y2);Yo.sha512Sync=(...t)=>zk(Yo.concatBytes(...t));var{getPublicKey:wj}=ay,Q2=t=>{let e=wj(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}};var gm=class{addressTypes=["solana"];generateKeypairFromPrivateKey(e){let r=e.fold(n=>new zn.Account(new Uint8Array(n)));return{publicKey:r.publicKey.toBytes(),privateKey:r.secretKey}}generateKeypairFromSeed(e,r,n){let i=e.fold(o=>new ho(o));try{let o=i.derivePathType(n,r);switch(n){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Root":case"bip44":case"bip44Change":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return{publicKey:o.publicKey,privateKey:o.secretKey};case"deprecated":{let s=Q2(o.secretKey);return{publicKey:s.publicKey,privateKey:s.secretKey}}}}finally{i.cleanup()}}};l();h();l();h();l();h();l();h();l();h();l();h();l();h();function Aj(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){let d=t.charAt(u),f=d.charCodeAt(0);if(e[f]!==255)throw new TypeError(d+" is ambiguous");e[f]=u}let r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let d=0,f=0,p=0,m=u.length;for(;p!==m&&u[p]===0;)p++,d++;let g=(m-p)*o+1>>>0,x=new Uint8Array(g);for(;p!==m;){let T=u[p],A=0;for(let _=g-1;(T!==0||A<f)&&_!==-1;_--,A++)T+=256*x[_]>>>0,x[_]=T%r>>>0,T=T/r>>>0;if(T!==0)throw new Error("Non-zero carry");f=A,p++}let w=g-f;for(;w!==g&&x[w]===0;)w++;let S=n.repeat(d);for(;w<g;++w)S+=t.charAt(x[w]);return S}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let d=0,f=0,p=0;for(;u[d]===n;)f++,d++;let m=(u.length-d)*i+1>>>0,g=new Uint8Array(m);for(;u[d];){let T=e[u.charCodeAt(d)];if(T===255)return;let A=0;for(let _=m-1;(T!==0||A<p)&&_!==-1;_--,A++)T+=r*g[_]>>>0,g[_]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");p=A,d++}let x=m-p;for(;x!==m&&g[x]===0;)x++;let w=new Uint8Array(f+(m-x)),S=f;for(;x!==m;)w[S++]=g[x++];return w}function c(u){let d=a(u);if(d)return d;throw new Error("Non-base"+r+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var jk=Aj;var Sj="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",X2=jk(Sj);var Nc=t=>X2.encode(t),Oc=t=>X2.decode(t);l();h();function Tr(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}var Z2=8192;function jt(t){if(t.length<Z2)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Z2){let n=t.slice(r,r+Z2);e+=String.fromCharCode(...n)}return btoa(e)}l();h();l();h();function ma(t){let e=t.startsWith("0x")?t.slice(2):t,n=(e.length%2===0?e:`0${e}}`).match(/.{2}/g)?.map(i=>parseInt(i,16))??[];return Uint8Array.from(n)}function xi(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}l();h();l();h();function Tf(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Wk(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}var bm=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Wk(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}};l();h();l();h();function J2(t,e){switch(e){case"base58":return Nc(t);case"base64":return jt(t);case"hex":return xi(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function eA(t,e=["<",">"]){let[r,n]=e,i=[],o="",s=0;for(let a=0;a<t.length;a++){let c=t[a];if(c===r&&s++,c===n&&s--,s===0&&c===","){i.push(o.trim()),o="";continue}o+=c}return i.push(o.trim()),i}var xm=class{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return tA(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return tA(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return tA(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Tf(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return J2(this.toBytes(),e)}};function tA(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Gk=t=>{throw TypeError(t)},$k=(t,e,r)=>e.has(t)||Gk("Cannot "+r),Ki=(t,e,r)=>($k(t,e,"read from private field"),r?r.call(t):e.get(t)),Am=(t,e,r)=>e.has(t)?Gk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Sm=(t,e,r,n)=>($k(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_f,i0,wm,ga,vj=class Yk{constructor(e){Am(this,_f),Am(this,i0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Sm(this,_f,e.write),Sm(this,i0,e.serialize??((r,n)=>{let i=new xm({initialSize:this.serializedSize(r)??void 0,...n});return Ki(this,_f).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Ki(this,_f).call(this,e,r)}serialize(e,r){return this.validate(e),new rA(this,Ki(this,i0).call(this,e,r))}parse(e){let r=new bm(e);return this.read(r)}fromHex(e){return this.parse(ma(e))}fromBase58(e){return this.parse(Oc(e))}fromBase64(e){return this.parse(Tr(e))}transform({name:e,input:r,output:n,validate:i}){return new Yk({name:e??this.name,read:o=>n(this.read(o)),write:(o,s)=>Ki(this,_f).call(this,r(o),s),serializedSize:o=>this.serializedSize(r(o)),serialize:(o,s)=>Ki(this,i0).call(this,r(o),s),validate:o=>{i?.(o),this.validate(r(o))}})}};_f=new WeakMap;i0=new WeakMap;var So=vj,Ej=Symbol.for("@mysten/serialized-bcs");var rA=class{constructor(e,r){Am(this,wm),Am(this,ga),Sm(this,wm,e),Sm(this,ga,r)}get[Ej](){return!0}toBytes(){return Ki(this,ga)}toHex(){return xi(Ki(this,ga))}toBase64(){return jt(Ki(this,ga))}toBase58(){return Nc(Ki(this,ga))}parse(){return Ki(this,wm).parse(Ki(this,ga))}};wm=new WeakMap;ga=new WeakMap;function o0({size:t,...e}){return new So({...e,serializedSize:()=>t})}function vm({readMethod:t,writeMethod:e,...r}){return o0({...r,read:n=>n[t](),write:(n,i)=>i[e](n),validate:n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)}})}function Em({readMethod:t,writeMethod:e,...r}){return o0({...r,read:n=>n[t](),write:(n,i)=>i[e](BigInt(n)),validate:n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)}})}function Qk({serialize:t,...e}){let r=new So({...e,serialize:t,write:(n,i)=>{for(let o of r.serialize(n).toBytes())i.write8(o)}});return r}function Xk({toBytes:t,fromBytes:e,...r}){return new So({...r,read:n=>{let i=n.readULEB(),o=n.readBytes(i);return e(o)},write:(n,i)=>{let o=t(n);i.writeULEB(o.length);for(let s=0;s<o.length;s++)i.write8(o[s])},serialize:n=>{let i=t(n),o=Tf(i.length),s=new Uint8Array(o.length+i.length);return s.set(o,0),s.set(i,o.length),s},validate:n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)}})}function Zk(t){let e=null;function r(){return e||(e=t()),e}return new So({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,i)=>r().write(n,i),serialize:(n,i)=>r().serialize(n,i).toBytes()})}l();h();var E={u8(t){return vm({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return vm({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return vm({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Em({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Em({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Em({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return o0({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Qk({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Tf(e)),...t})},bytes(t,e){return o0({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{let i=new Uint8Array(r);for(let o=0;o<t;o++)n.write8(i[o]??0)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return Xk({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new So({name:`${e.name}[${t}]`,read:n=>{let i=new Array(t);for(let o=0;o<t;o++)i[o]=e.read(n);return i},write:(n,i)=>{for(let o of n)e.write(o,i)},...r,validate:n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return E.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new So({name:`vector<${t.name}>`,read:r=>{let n=r.readULEB(),i=new Array(n);for(let o=0;o<n;o++)i[o]=t.read(r);return i},write:(r,n)=>{n.writeULEB(r.length);for(let i of r)t.write(i,n)},...e,validate:r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new So({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let i=0;i<t.length;i++){let o=t[i].serializedSize(r[i]);if(o==null)return null;n+=o}return n},read:r=>{let n=[];for(let i of t)n.push(i.read(r));return n},write:(r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},...e,validate:r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){let n=Object.entries(e);return new So({name:t,serializedSize:i=>{let o=0;for(let[s,a]of n){let c=a.serializedSize(i[s]);if(c==null)return null;o+=c}return o},read:i=>{let o={};for(let[s,a]of n)o[s]=a.read(i);return o},write:(i,o)=>{for(let[s,a]of n)a.write(i[s],o)},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(t,e,r){let n=Object.entries(e);return new So({name:t,read:i=>{let o=i.readULEB(),s=n[o];if(!s)throw new TypeError(`Unknown value ${o} for enum ${t}`);let[a,c]=s;return{[a]:c?.read(i)??!0,$kind:a}},write:(i,o)=>{let[s,a]=Object.entries(i).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){let[u,d]=n[c];if(u===s){o.writeULEB(c),d?.write(a,o);return}}},...r,validate:i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let o=Object.keys(i).filter(a=>i[a]!==void 0&&Object.hasOwn(e,a));if(o.length!==1)throw new TypeError(`Expected object with one key, but found ${o.length} for type ${t}}`);let[s]=o;if(!Object.hasOwn(e,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map(t,e){return E.vector(E.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{let n=new Map;for(let[i,o]of r)n.set(i,o);return n}})},lazy(t){return Zk(t)}};l();h();l();h();l();h();var ba=32;function Jk(t){return Ij(t)&&kj(t)===ba}function vo(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(ba*2,"0")}`}function Ij(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function kj(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}l();h();var Tj=/^vector<(.+)>$/,_j=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,s0=class t{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match(Tj);if(n)return{vector:t.parseFromStr(n[1],r)};let i=e.match(_j);if(i)return{struct:{address:r?vo(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return eA(e).map(n=>t.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,n=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function Pj(t){return E.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Bj(t){return E.enum("Option",{None:null,Some:t})}var Pt=E.bytes(ba).transform({validate:t=>{let e=typeof t=="string"?t:xi(t);if(!e||!Jk(vo(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?ma(vo(t)):t,output:t=>vo(xi(t))}),Yn=E.vector(E.u8()).transform({name:"ObjectDigest",input:t=>Oc(t),output:t=>Nc(new Uint8Array(t)),validate:t=>{if(Oc(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Nn=E.struct("SuiObjectRef",{objectId:Pt,version:E.u64(),digest:Yn}),nA=E.struct("SharedObjectRef",{objectId:Pt,initialSharedVersion:E.u64(),mutable:E.bool()}),iA=E.enum("ObjectArg",{ImmOrOwnedObject:Nn,SharedObject:nA,Receiving:Nn}),oA=E.enum("CallArg",{Pure:E.struct("Pure",{bytes:E.vector(E.u8()).transform({input:t=>typeof t=="string"?Tr(t):t,output:t=>jt(new Uint8Array(t))})}),Object:iA}),sA=E.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:E.lazy(()=>sA),struct:E.lazy(()=>lA),u16:null,u32:null,u256:null}),Im=sA.transform({input:t=>typeof t=="string"?s0.parseFromStr(t,!0):t,output:t=>s0.tagToString(t)}),Vi=E.enum("Argument",{GasCoin:null,Input:E.u16(),Result:E.u16(),NestedResult:E.tuple([E.u16(),E.u16()])}),aA=E.struct("ProgrammableMoveCall",{package:Pt,module:E.string(),function:E.string(),typeArguments:E.vector(Im),arguments:E.vector(Vi)}),cA=E.enum("Command",{MoveCall:aA,TransferObjects:E.struct("TransferObjects",{objects:E.vector(Vi),address:Vi}),SplitCoins:E.struct("SplitCoins",{coin:Vi,amounts:E.vector(Vi)}),MergeCoins:E.struct("MergeCoins",{destination:Vi,sources:E.vector(Vi)}),Publish:E.struct("Publish",{modules:E.vector(E.vector(E.u8()).transform({input:t=>typeof t=="string"?Tr(t):t,output:t=>jt(new Uint8Array(t))})),dependencies:E.vector(Pt)}),MakeMoveVec:E.struct("MakeMoveVec",{type:Bj(Im).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:E.vector(Vi)}),Upgrade:E.struct("Upgrade",{modules:E.vector(E.vector(E.u8()).transform({input:t=>typeof t=="string"?Tr(t):t,output:t=>jt(new Uint8Array(t))})),dependencies:E.vector(Pt),package:Pt,ticket:Vi})}),uA=E.struct("ProgrammableTransaction",{inputs:E.vector(oA),commands:E.vector(cA)}),fA=E.enum("TransactionKind",{ProgrammableTransaction:uA,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),dA=E.enum("TransactionExpiration",{None:null,Epoch:Pj()}),lA=E.struct("StructTag",{address:Pt,module:E.string(),name:E.string(),typeParams:E.vector(sA)}),hA=E.struct("GasData",{payment:E.vector(Nn),owner:Pt,price:E.u64(),budget:E.u64()}),pA=E.struct("TransactionDataV1",{kind:fA,sender:Pt,gasData:hA,expiration:dA}),yA=E.enum("TransactionData",{V1:pA}),mA=E.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),gA=E.enum("IntentVersion",{V0:null}),bA=E.enum("AppId",{Sui:null}),xA=E.struct("Intent",{scope:mA,version:gA,appId:bA});function wA(t){return E.struct(`IntentMessage<${t.name}>`,{intent:xA,value:t})}var AA=E.enum("CompressedSignature",{ED25519:E.fixedArray(64,E.u8()),Secp256k1:E.fixedArray(64,E.u8()),Secp256r1:E.fixedArray(64,E.u8()),ZkLogin:E.vector(E.u8())}),SA=E.enum("PublicKey",{ED25519:E.fixedArray(32,E.u8()),Secp256k1:E.fixedArray(33,E.u8()),Secp256r1:E.fixedArray(33,E.u8()),ZkLogin:E.vector(E.u8())}),vA=E.struct("MultiSigPkMap",{pubKey:SA,weight:E.u8()}),EA=E.struct("MultiSigPublicKey",{pk_map:E.vector(vA),threshold:E.u16()}),eT=E.struct("MultiSig",{sigs:E.vector(AA),bitmap:E.u16(),multisig_pk:EA}),Cj=E.vector(E.u8()).transform({input:t=>typeof t=="string"?Tr(t):t,output:t=>jt(new Uint8Array(t))}),IA=E.struct("SenderSignedTransaction",{intentMessage:wA(yA),txSignatures:E.vector(Cj)}),tT=E.vector(IA,{name:"SenderSignedData"});l();h();var Dj=E.enum("PackageUpgradeError",{UnableToFetchPackage:E.struct("UnableToFetchPackage",{packageId:Pt}),NotAPackage:E.struct("NotAPackage",{objectId:Pt}),IncompatibleUpgrade:null,DigestDoesNotMatch:E.struct("DigestDoesNotMatch",{digest:E.vector(E.u8())}),UnknownUpgradePolicy:E.struct("UnknownUpgradePolicy",{policy:E.u8()}),PackageIDDoesNotMatch:E.struct("PackageIDDoesNotMatch",{packageId:Pt,ticketId:Pt})}),Nj=E.struct("ModuleId",{address:Pt,name:E.string()}),rT=E.struct("MoveLocation",{module:Nj,function:E.u16(),instruction:E.u16(),functionName:E.option(E.string())}),Oj=E.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:E.struct("IndexOutOfBounds",{idx:E.u16()}),SecondaryIndexOutOfBounds:E.struct("SecondaryIndexOutOfBounds",{resultIdx:E.u16(),secondaryIdx:E.u16()}),InvalidResultArity:E.struct("InvalidResultArity",{resultIdx:E.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Uj=E.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Rj=E.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:E.struct("MoveObjectTooBig",{objectSize:E.u64(),maxObjectSize:E.u64()}),MovePackageTooBig:E.struct("MovePackageTooBig",{objectSize:E.u64(),maxObjectSize:E.u64()}),CircularObjectOwnership:E.struct("CircularObjectOwnership",{object:Pt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:E.option(rT),MoveAbort:E.tuple([rT,E.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:E.struct("CommandArgumentError",{argIdx:E.u16(),kind:Oj}),TypeArgumentError:E.struct("TypeArgumentError",{argumentIdx:E.u16(),kind:Uj}),UnusedValueWithoutDrop:E.struct("UnusedValueWithoutDrop",{resultIdx:E.u16(),secondaryIdx:E.u16()}),InvalidPublicFunctionReturnType:E.struct("InvalidPublicFunctionReturnType",{idx:E.u16()}),InvalidTransferObject:null,EffectsTooLarge:E.struct("EffectsTooLarge",{currentSize:E.u64(),maxSize:E.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:E.struct("PackageUpgradeError",{upgradeError:Dj}),WrittenObjectsTooLarge:E.struct("WrittenObjectsTooLarge",{currentSize:E.u64(),maxSize:E.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:E.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:E.vector(Pt)}),AddressDeniedForCoin:E.struct("AddressDeniedForCoin",{address:Pt,coinType:E.string()}),CoinTypeGlobalPause:E.struct("CoinTypeGlobalPause",{coinType:E.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),nT=E.enum("ExecutionStatus",{Success:null,Failed:E.struct("ExecutionFailed",{error:Rj,command:E.option(E.u64())})}),iT=E.struct("GasCostSummary",{computationCost:E.u64(),storageCost:E.u64(),storageRebate:E.u64(),nonRefundableStorageFee:E.u64()}),Pf=E.enum("Owner",{AddressOwner:Pt,ObjectOwner:Pt,Shared:E.struct("Shared",{initialSharedVersion:E.u64()}),Immutable:null}),Lj=E.struct("TransactionEffectsV1",{status:nT,executedEpoch:E.u64(),gasUsed:iT,modifiedAtVersions:E.vector(E.tuple([Pt,E.u64()])),sharedObjects:E.vector(Nn),transactionDigest:Yn,created:E.vector(E.tuple([Nn,Pf])),mutated:E.vector(E.tuple([Nn,Pf])),unwrapped:E.vector(E.tuple([Nn,Pf])),deleted:E.vector(Nn),unwrappedThenDeleted:E.vector(Nn),wrapped:E.vector(Nn),gasObject:E.tuple([Nn,Pf]),eventsDigest:E.option(Yn),dependencies:E.vector(Yn)}),kA=E.tuple([E.u64(),Yn]),Mj=E.enum("ObjectIn",{NotExist:null,Exist:E.tuple([kA,Pf])}),Fj=E.enum("ObjectOut",{NotExist:null,ObjectWrite:E.tuple([Yn,Pf]),PackageWrite:kA}),Hj=E.enum("IDOperation",{None:null,Created:null,Deleted:null}),Kj=E.struct("EffectsObjectChange",{inputState:Mj,outputState:Fj,idOperation:Hj}),Vj=E.enum("UnchangedSharedKind",{ReadOnlyRoot:kA,MutateDeleted:E.u64(),ReadDeleted:E.u64(),Cancelled:E.u64(),PerEpochConfig:null}),qj=E.struct("TransactionEffectsV2",{status:nT,executedEpoch:E.u64(),gasUsed:iT,transactionDigest:Yn,gasObjectIndex:E.option(E.u32()),eventsDigest:E.option(Yn),dependencies:E.vector(Yn),lamportVersion:E.u64(),changedObjects:E.vector(E.tuple([Pt,Kj])),unchangedSharedObjects:E.vector(E.tuple([Pt,Vj])),auxDataDigest:E.option(Yn)}),oT=E.enum("TransactionEffects",{V1:Lj,V2:qj});var es={...E,U8:E.u8(),U16:E.u16(),U32:E.u32(),U64:E.u64(),U128:E.u128(),U256:E.u256(),ULEB128:E.uleb128(),Bool:E.bool(),String:E.string(),Address:Pt,AppId:bA,Argument:Vi,CallArg:oA,CompressedSignature:AA,GasData:hA,Intent:xA,IntentMessage:wA,IntentScope:mA,IntentVersion:gA,MultiSig:eT,MultiSigPkMap:vA,MultiSigPublicKey:EA,ObjectArg:iA,ObjectDigest:Yn,ProgrammableMoveCall:aA,ProgrammableTransaction:uA,PublicKey:SA,SenderSignedData:tT,SenderSignedTransaction:IA,SharedObjectRef:nA,StructTag:lA,SuiObjectRef:Nn,Command:cA,TransactionData:yA,TransactionDataV1:pA,TransactionExpiration:dA,TransactionKind:fA,TypeTag:Im,TransactionEffects:oT};l();h();l();h();l();h();l();h();function Bf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function zj(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Cf(t,...e){if(!zj(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function sT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bf(t.outputLen),Bf(t.blockLen)}function ts(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function km(t,e){Cf(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();h();var Df=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Tm=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);var wa=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,cT=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,qi=wa?t=>t:t=>cT(t);function Uc(t){for(let e=0;e<t.length;e++)t[e]=cT(t[e])}var jj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _m(t){Cf(t);let e="";for(let r=0;r<t.length;r++)e+=jj[t[r]];return e}var rs={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function aT(t){if(t>=rs._0&&t<=rs._9)return t-rs._0;if(t>=rs._A&&t<=rs._F)return t-(rs._A-10);if(t>=rs._a&&t<=rs._f)return t-(rs._a-10)}function uT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=aT(t.charCodeAt(o)),a=aT(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function Wj(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function wi(t){return typeof t=="string"&&(t=Wj(t)),Cf(t),t}var xa=class{clone(){return this._cloneInto()}},Hye={}.toString;function fT(t){let e=n=>t().update(wi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function dT(t){let e=(n,i)=>t(i).update(wi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var lT=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),Pm=class extends xa{constructor(e,r,n={},i,o,s){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Bf(e),Bf(r),Bf(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==o)throw new Error(`salt must be ${o} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==s)throw new Error(`personalization must be ${s} byte long or undefined`);this.buffer32=Df(this.buffer=new Uint8Array(e))}update(e){ts(this);let{blockLen:r,buffer:n,buffer32:i}=this;e=wi(e);let o=e.length,s=e.byteOffset,a=e.buffer;for(let c=0;c<o;){this.pos===r&&(wa||Uc(i),this.compress(i,0,!1),wa||Uc(i),this.pos=0);let u=Math.min(r-this.pos,o-c),d=s+c;if(u===r&&!(d%4)&&c+u<o){let f=new Uint32Array(a,d,Math.floor((o-c)/4));wa||Uc(f);for(let p=0;c+r<o;p+=i.length,c+=r)this.length+=r,this.compress(f,p,!1);wa||Uc(f);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){ts(this),km(e,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),wa||Uc(n),this.compress(n,0,!0),wa||Uc(n);let i=Df(e);this.get().forEach((o,s)=>i[s]=qi(o))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){let{buffer:r,length:n,finished:i,destroyed:o,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.length=n,e.finished=i,e.destroyed=o,e.outputLen=s,e.buffer.set(r),e.pos=a,e}};l();h();var Bm=BigInt(4294967295),TA=BigInt(32);function hT(t,e=!1){return e?{h:Number(t&Bm),l:Number(t>>TA&Bm)}:{h:Number(t>>TA&Bm)|0,l:Number(t&Bm)|0}}function Gj(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=hT(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var $j=(t,e)=>BigInt(t>>>0)<<TA|BigInt(e>>>0),Yj=(t,e,r)=>t>>>r,Qj=(t,e,r)=>t<<32-r|e>>>r,Xj=(t,e,r)=>t>>>r|e<<32-r,Zj=(t,e,r)=>t<<32-r|e>>>r,Jj=(t,e,r)=>t<<64-r|e>>>r-32,eW=(t,e,r)=>t>>>r-32|e<<64-r,tW=(t,e)=>e,rW=(t,e)=>t,nW=(t,e,r)=>t<<r|e>>>32-r,iW=(t,e,r)=>e<<r|t>>>32-r,oW=(t,e,r)=>e<<r-32|t>>>64-r,sW=(t,e,r)=>t<<r-32|e>>>64-r;function aW(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var cW=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),uW=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,fW=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),dW=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,lW=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),hW=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var pW={fromBig:hT,split:Gj,toBig:$j,shrSH:Yj,shrSL:Qj,rotrSH:Xj,rotrSL:Zj,rotrBH:Jj,rotrBL:eW,rotr32H:tW,rotr32L:rW,rotlSH:nW,rotlSL:iW,rotlBH:oW,rotlBL:sW,add:aW,add3L:cW,add3H:uW,add4L:fW,add4H:dW,add5H:hW,add5L:lW},ge=pW;var pr=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ue=new Uint32Array(32);function Aa(t,e,r,n,i,o){let s=i[o],a=i[o+1],c=ue[2*t],u=ue[2*t+1],d=ue[2*e],f=ue[2*e+1],p=ue[2*r],m=ue[2*r+1],g=ue[2*n],x=ue[2*n+1],w=ge.add3L(c,d,s);u=ge.add3H(w,u,f,a),c=w|0,{Dh:x,Dl:g}={Dh:x^u,Dl:g^c},{Dh:x,Dl:g}={Dh:ge.rotr32H(x,g),Dl:ge.rotr32L(x,g)},{h:m,l:p}=ge.add(m,p,x,g),{Bh:f,Bl:d}={Bh:f^m,Bl:d^p},{Bh:f,Bl:d}={Bh:ge.rotrSH(f,d,24),Bl:ge.rotrSL(f,d,24)},ue[2*t]=c,ue[2*t+1]=u,ue[2*e]=d,ue[2*e+1]=f,ue[2*r]=p,ue[2*r+1]=m,ue[2*n]=g,ue[2*n+1]=x}function Sa(t,e,r,n,i,o){let s=i[o],a=i[o+1],c=ue[2*t],u=ue[2*t+1],d=ue[2*e],f=ue[2*e+1],p=ue[2*r],m=ue[2*r+1],g=ue[2*n],x=ue[2*n+1],w=ge.add3L(c,d,s);u=ge.add3H(w,u,f,a),c=w|0,{Dh:x,Dl:g}={Dh:x^u,Dl:g^c},{Dh:x,Dl:g}={Dh:ge.rotrSH(x,g,16),Dl:ge.rotrSL(x,g,16)},{h:m,l:p}=ge.add(m,p,x,g),{Bh:f,Bl:d}={Bh:f^m,Bl:d^p},{Bh:f,Bl:d}={Bh:ge.rotrBH(f,d,63),Bl:ge.rotrBL(f,d,63)},ue[2*t]=c,ue[2*t+1]=u,ue[2*e]=d,ue[2*e+1]=f,ue[2*r]=p,ue[2*r+1]=m,ue[2*n]=g,ue[2*n+1]=x}var _A=class extends Pm{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=pr[0]|0,this.v0h=pr[1]|0,this.v1l=pr[2]|0,this.v1h=pr[3]|0,this.v2l=pr[4]|0,this.v2h=pr[5]|0,this.v3l=pr[6]|0,this.v3h=pr[7]|0,this.v4l=pr[8]|0,this.v4h=pr[9]|0,this.v5l=pr[10]|0,this.v5h=pr[11]|0,this.v6l=pr[12]|0,this.v6h=pr[13]|0,this.v7l=pr[14]|0,this.v7h=pr[15]|0;let r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){let n=Df(wi(e.salt));this.v4l^=qi(n[0]),this.v4h^=qi(n[1]),this.v5l^=qi(n[2]),this.v5h^=qi(n[3])}if(e.personalization){let n=Df(wi(e.personalization));this.v6l^=qi(n[0]),this.v6h^=qi(n[1]),this.v7l^=qi(n[2]),this.v7h^=qi(n[3])}if(e.key){let n=new Uint8Array(this.blockLen);n.set(wi(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:o,v2h:s,v3l:a,v3h:c,v4l:u,v4h:d,v5l:f,v5h:p,v6l:m,v6h:g,v7l:x,v7h:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=d|0,this.v5l=f|0,this.v5h=p|0,this.v6l=m|0,this.v6h=g|0,this.v7l=x|0,this.v7h=w|0}compress(e,r,n){this.get().forEach((c,u)=>ue[u]=c),ue.set(pr,16);let{h:i,l:o}=ge.fromBig(BigInt(this.length));ue[24]=pr[8]^o,ue[25]=pr[9]^i,n&&(ue[28]=~ue[28],ue[29]=~ue[29]);let s=0,a=lT;for(let c=0;c<12;c++)Aa(0,4,8,12,e,r+2*a[s++]),Sa(0,4,8,12,e,r+2*a[s++]),Aa(1,5,9,13,e,r+2*a[s++]),Sa(1,5,9,13,e,r+2*a[s++]),Aa(2,6,10,14,e,r+2*a[s++]),Sa(2,6,10,14,e,r+2*a[s++]),Aa(3,7,11,15,e,r+2*a[s++]),Sa(3,7,11,15,e,r+2*a[s++]),Aa(0,5,10,15,e,r+2*a[s++]),Sa(0,5,10,15,e,r+2*a[s++]),Aa(1,6,11,12,e,r+2*a[s++]),Sa(1,6,11,12,e,r+2*a[s++]),Aa(2,7,8,13,e,r+2*a[s++]),Sa(2,7,8,13,e,r+2*a[s++]),Aa(3,4,9,14,e,r+2*a[s++]),Sa(3,4,9,14,e,r+2*a[s++]);this.v0l^=ue[0]^ue[16],this.v0h^=ue[1]^ue[17],this.v1l^=ue[2]^ue[18],this.v1h^=ue[3]^ue[19],this.v2l^=ue[4]^ue[20],this.v2h^=ue[5]^ue[21],this.v3l^=ue[6]^ue[22],this.v3h^=ue[7]^ue[23],this.v4l^=ue[8]^ue[24],this.v4h^=ue[9]^ue[25],this.v5l^=ue[10]^ue[26],this.v5h^=ue[11]^ue[27],this.v6l^=ue[12]^ue[28],this.v6h^=ue[13]^ue[29],this.v7l^=ue[14]^ue[30],this.v7h^=ue[15]^ue[31],ue.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Rc=dT(t=>new _A(t));l();h();l();h();function Cm(t,e){return es.IntentMessage(es.fixedArray(e.length,es.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}function PA(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var Nf=class{equals(e){return PA(this.toRawBytes(),e.toRawBytes())}toBase64(){return jt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let e=this.toSuiBytes();return jt(e)}verifyWithIntent(e,r,n){let i=Cm(n,e),o=Rc(i,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(es.vector(es.u8()).serialize(e).toBytes(),r,"PersonalMessage")}verifyTransaction(e,r){return this.verifyWithIntent(e,r,"TransactionData")}toSuiBytes(){let e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return vo(_m(Rc(this.toSuiBytes(),{dkLen:32})).slice(0,ba*2))}};l();h();var ns={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},pT={ED25519:32,Secp256k1:33,Secp256r1:33},Dm={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};l();h();l();h();l();h();function yT(t,e){if(!!!t)throw new Error(e)}l();h();var CA={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},yW=new Set(Object.keys(CA));function DA(t){let e=t?.kind;return typeof e=="string"&&yW.has(e)}var BA;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(BA||(BA={}));l();h();var a0;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(a0||(a0={}));l();h();l();h();function NA(t){return t===9||t===32}function mT(t,e){let r=t.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),i=n.length===1,o=n.length>1&&n.slice(1).every(m=>m.length===0||NA(m.charCodeAt(0))),s=r.endsWith('\\"""'),a=t.endsWith('"')&&!s,c=t.endsWith("\\"),u=a||c,d=!(e!=null&&e.minimize)&&(!i||t.length>70||u||o||s),f="",p=i&&NA(t.charCodeAt(0));return(d&&!p||o)&&(f+=`
`),f+=r,(d||u)&&(f+=`
`),'"""'+f+'"""'}l();h();function gT(t){return Nm(t,[])}function Nm(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return mW(t,e);default:return String(t)}}function mW(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";let r=[...e,t];if(gW(t)){let n=t.toJSON();if(n!==t)return typeof n=="string"?n:Nm(n,r)}else if(Array.isArray(t))return xW(t,r);return bW(t,r)}function gW(t){return typeof t.toJSON=="function"}function bW(t,e){let r=Object.entries(t);return r.length===0?"{}":e.length>2?"["+wW(t)+"]":"{ "+r.map(([i,o])=>i+": "+Nm(o,e)).join(", ")+" }"}function xW(t,e){if(t.length===0)return"[]";if(e.length>2)return"[Array]";let r=Math.min(10,t.length),n=t.length-r,i=[];for(let o=0;o<r;++o)i.push(Nm(t[o],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function wW(t){let e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){let r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}l();h();l();h();function bT(t){return`"${t.replace(AW,SW)}"`}var AW=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function SW(t){return vW[t.charCodeAt(0)]}var vW=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];l();h();var xT=Object.freeze({});function OA(t,e,r=CA){let n=new Map;for(let S of Object.values(a0))n.set(S,wT(e,S));let i,o=Array.isArray(t),s=[t],a=-1,c=[],u=t,d,f,p=[],m=[];do{a++;let S=a===s.length,T=S&&c.length!==0;if(S){if(d=m.length===0?void 0:p[p.length-1],u=f,f=m.pop(),T)if(o){u=u.slice();let _=0;for(let[C,W]of c){let re=C-_;W===null?(u.splice(re,1),_++):u[re]=W}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(let[_,C]of c)u[_]=C}a=i.index,s=i.keys,c=i.edits,o=i.inArray,i=i.prev}else if(f){if(d=o?a:s[a],u=f[d],u==null)continue;p.push(d)}let A;if(!Array.isArray(u)){var g,x;DA(u)||yT(!1,`Invalid AST Node: ${gT(u)}.`);let _=S?(g=n.get(u.kind))===null||g===void 0?void 0:g.leave:(x=n.get(u.kind))===null||x===void 0?void 0:x.enter;if(A=_?.call(e,u,d,f,p,m),A===xT)break;if(A===!1){if(!S){p.pop();continue}}else if(A!==void 0&&(c.push([d,A]),!S))if(DA(A))u=A;else{p.pop();continue}}if(A===void 0&&T&&c.push([d,u]),S)p.pop();else{var w;i={inArray:o,index:a,keys:s,edits:c,prev:i},o=Array.isArray(u),s=o?u:(w=r[u.kind])!==null&&w!==void 0?w:[],a=-1,c=[],f&&m.push(f),f=u}}while(i!==void 0);return c.length!==0?c[c.length-1][1]:t}function wT(t,e){let r=t[e];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:t.enter,leave:t.leave}}function Um(t){return OA(t,IW)}var EW=80,IW={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>le(t.definitions,`

`)},OperationDefinition:{leave(t){let e=Ge("(",le(t.variableDefinitions,", "),")"),r=le([t.operation,le([t.name,e]),le(t.directives," ")]," ");return(r==="query"?"":r+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:r,directives:n})=>t+": "+e+Ge(" = ",r)+Ge(" ",le(n," "))},SelectionSet:{leave:({selections:t})=>zi(t)},Field:{leave({alias:t,name:e,arguments:r,directives:n,selectionSet:i}){let o=Ge("",t,": ")+e,s=o+Ge("(",le(r,", "),")");return s.length>EW&&(s=o+Ge(`(
`,Om(le(r,`
`)),`
)`)),le([s,le(n," "),i]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+Ge(" ",le(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:r})=>le(["...",Ge("on ",t),le(e," "),r]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${t}${Ge("(",le(r,", "),")")} on ${e} ${Ge("",le(n," ")," ")}`+i},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?mT(t):bT(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+le(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+le(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+Ge("(",le(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:r})=>Ge("",t,`
`)+le(["schema",le(e," "),zi(r)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:r})=>Ge("",t,`
`)+le(["scalar",e,le(r," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>Ge("",t,`
`)+le(["type",e,Ge("implements ",le(r," & ")),le(n," "),zi(i)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:r,type:n,directives:i})=>Ge("",t,`
`)+e+(AT(r)?Ge(`(
`,Om(le(r,`
`)),`
)`):Ge("(",le(r,", "),")"))+": "+n+Ge(" ",le(i," "))},InputValueDefinition:{leave:({description:t,name:e,type:r,defaultValue:n,directives:i})=>Ge("",t,`
`)+le([e+": "+r,Ge("= ",n),le(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:i})=>Ge("",t,`
`)+le(["interface",e,Ge("implements ",le(r," & ")),le(n," "),zi(i)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:r,types:n})=>Ge("",t,`
`)+le(["union",e,le(r," "),Ge("= ",le(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:r,values:n})=>Ge("",t,`
`)+le(["enum",e,le(r," "),zi(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:r})=>Ge("",t,`
`)+le([e,le(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:r,fields:n})=>Ge("",t,`
`)+le(["input",e,le(r," "),zi(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:r,repeatable:n,locations:i})=>Ge("",t,`
`)+"directive @"+e+(AT(r)?Ge(`(
`,Om(le(r,`
`)),`
)`):Ge("(",le(r,", "),")"))+(n?" repeatable":"")+" on "+le(i," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>le(["extend schema",le(t," "),zi(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>le(["extend scalar",t,le(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>le(["extend type",t,Ge("implements ",le(e," & ")),le(r," "),zi(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>le(["extend interface",t,Ge("implements ",le(e," & ")),le(r," "),zi(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:r})=>le(["extend union",t,le(e," "),Ge("= ",le(r," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:r})=>le(["extend enum",t,le(e," "),zi(r)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:r})=>le(["extend input",t,le(e," "),zi(r)]," ")}};function le(t,e=""){var r;return(r=t?.filter(n=>n).join(e))!==null&&r!==void 0?r:""}function zi(t){return Ge(`{
`,Om(le(t,`
`)),`
}`)}function Ge(t,e,r=""){return e!=null&&e!==""?t+e+r:""}function Om(t){return Ge("  ",t.replace(/\n/g,`
  `))}function AT(t){var e;return(e=t?.some(r=>r.includes(`
`)))!==null&&e!==void 0?e:!1}l();h();var ST=t=>{throw TypeError(t)},vT=(t,e,r)=>e.has(t)||ST("Cannot "+r),Rm=(t,e,r)=>(vT(t,e,"read from private field"),r?r.call(t):e.get(t)),Lm=(t,e,r)=>e.has(t)?ST("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Mm=(t,e,r,n)=>(vT(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Fm,Hm,Km,Vm,UA=class extends Error{},qm=class{constructor({url:e,fetch:r=fetch,headers:n={},queries:i={}}){Lm(this,Fm),Lm(this,Hm),Lm(this,Km),Lm(this,Vm),Mm(this,Fm,e),Mm(this,Hm,i),Mm(this,Km,n),Mm(this,Vm,(...o)=>r(...o))}async query(e){let r=await Rm(this,Vm).call(this,Rm(this,Fm),{method:"POST",headers:{"Content-Type":"application/json",...Rm(this,Km)},body:JSON.stringify({query:typeof e.query=="string"?String(e.query):Um(e.query),variables:e.variables,extensions:e.extensions,operationName:e.operationName})});if(!r.ok)throw new UA(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(e,r){return this.query({...r,query:Rm(this,Hm)[e]})}};Fm=new WeakMap;Hm=new WeakMap;Km=new WeakMap;Vm=new WeakMap;l();h();l();h();l();h();var c0={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};var MA=class extends Error{constructor(e,r,n,i,o,s,a){super(e),this.name="GraphQLError",this.message=e,o&&(this.path=o),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),i&&(this.positions=i),s&&(this.originalError=s);var c=a;if(!c&&s){var u=s.extensions;u&&typeof u=="object"&&(c=u)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}},st,we;function tr(t){return new MA(`Syntax Error: Unexpected token at ${we} in ${t}`)}function Qn(t){if(t.lastIndex=we,t.test(st))return st.slice(we,we=t.lastIndex)}var zm=/ +(?=[^\s])/y;function kW(t){for(var e=t.split(`
`),r="",n=0,i=0,o=e.length-1,s=0;s<e.length;s++)zm.lastIndex=0,zm.test(e[s])&&(s&&(!n||zm.lastIndex<n)&&(n=zm.lastIndex),i=i||s,o=s);for(var a=i;a<=o;a++)a!==i&&(r+=`
`),r+=e[a].slice(n).replace(/\\"""/g,'"""');return r}function Ce(){for(var t=0|st.charCodeAt(we++);t===9||t===10||t===13||t===32||t===35||t===44||t===65279;t=0|st.charCodeAt(we++))if(t===35)for(;(t=st.charCodeAt(we++))!==10&&t!==13;);we--}var pn=/[_A-Za-z]\w*/y,RA=new RegExp("(?:(null|true|false)|\\$("+pn.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+pn.source+"))","y"),va=function(t){return t[t.Const=1]="Const",t[t.Var=2]="Var",t[t.Int=3]="Int",t[t.Float=4]="Float",t[t.BlockString=5]="BlockString",t[t.String=6]="String",t[t.Enum=7]="Enum",t}(va||{}),TW=/\\/;function jm(t){var e,r;if(RA.lastIndex=we,st.charCodeAt(we)===91){we++,Ce();for(var n=[];st.charCodeAt(we)!==93;)n.push(jm(t));return we++,Ce(),{kind:"ListValue",values:n}}else if(st.charCodeAt(we)===123){we++,Ce();for(var i=[];st.charCodeAt(we)!==125;){if((e=Qn(pn))==null||(Ce(),st.charCodeAt(we++)!==58))throw tr("ObjectField");Ce(),i.push({kind:"ObjectField",name:{kind:"Name",value:e},value:jm(t)})}return we++,Ce(),{kind:"ObjectValue",fields:i}}else if((r=RA.exec(st))!=null){if(we=RA.lastIndex,Ce(),(e=r[va.Const])!=null)return e==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:e==="true"};if((e=r[va.Var])!=null){if(t)throw tr("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}else if((e=r[va.Int])!=null){var o;return(o=r[va.Float])!=null?{kind:"FloatValue",value:e+o}:{kind:"IntValue",value:e}}else{if((e=r[va.BlockString])!=null)return{kind:"StringValue",value:kW(e.slice(3,-3)),block:!0};if((e=r[va.String])!=null)return{kind:"StringValue",value:TW.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if((e=r[va.Enum])!=null)return{kind:"EnumValue",value:e}}}throw tr("Value")}function ET(t){if(st.charCodeAt(we)===40){var e=[];we++,Ce();var r;do{if((r=Qn(pn))==null||(Ce(),st.charCodeAt(we++)!==58))throw tr("Argument");Ce(),e.push({kind:"Argument",name:{kind:"Name",value:r},value:jm(t)})}while(st.charCodeAt(we)!==41);return we++,Ce(),e}}function Of(t){if(st.charCodeAt(we)===64){var e=[],r;do{if(we++,(r=Qn(pn))==null)throw tr("Directive");Ce(),e.push({kind:"Directive",name:{kind:"Name",value:r},arguments:ET(t)})}while(st.charCodeAt(we)===64);return e}}function _W(){for(var t,e=0;st.charCodeAt(we)===91;)e++,we++,Ce();if((t=Qn(pn))==null)throw tr("NamedType");Ce();var r={kind:"NamedType",name:{kind:"Name",value:t}};do if(st.charCodeAt(we)===33&&(we++,Ce(),r={kind:"NonNullType",type:r}),e){if(st.charCodeAt(we++)!==93)throw tr("NamedType");Ce(),r={kind:"ListType",type:r}}while(e--);return r}var LA=new RegExp("(?:(\\.{3})|("+pn.source+"))","y"),FA=function(t){return t[t.Spread=1]="Spread",t[t.Name=2]="Name",t}(FA||{});function Wm(){var t=[],e,r;do if(LA.lastIndex=we,(r=LA.exec(st))!=null){if(we=LA.lastIndex,r[FA.Spread]!=null){Ce();var n=Qn(pn);if(n!=null&&n!=="on")Ce(),t.push({kind:"FragmentSpread",name:{kind:"Name",value:n},directives:Of(!1)});else{if(Ce(),n==="on"){if((n=Qn(pn))==null)throw tr("NamedType");Ce()}var i=Of(!1);if(st.charCodeAt(we++)!==123)throw tr("InlineFragment");Ce(),t.push({kind:"InlineFragment",typeCondition:n?{kind:"NamedType",name:{kind:"Name",value:n}}:void 0,directives:i,selectionSet:Wm()})}}else if((e=r[FA.Name])!=null){var o=void 0;if(Ce(),st.charCodeAt(we)===58){if(we++,Ce(),o=e,(e=Qn(pn))==null)throw tr("Field");Ce()}var s=ET(!1);Ce();var a=Of(!1),c=void 0;st.charCodeAt(we)===123&&(we++,Ce(),c=Wm()),t.push({kind:"Field",alias:o?{kind:"Name",value:o}:void 0,name:{kind:"Name",value:e},arguments:s,directives:a,selectionSet:c})}}else throw tr("SelectionSet");while(st.charCodeAt(we)!==125);return we++,Ce(),{kind:"SelectionSet",selections:t}}function PW(){var t,e;if((t=Qn(pn))==null||(Ce(),Qn(pn)!=="on")||(Ce(),(e=Qn(pn))==null))throw tr("FragmentDefinition");Ce();var r=Of(!1);if(st.charCodeAt(we++)!==123)throw tr("FragmentDefinition");return Ce(),{kind:"FragmentDefinition",name:{kind:"Name",value:t},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:r,selectionSet:Wm()}}var BW=/(?:query|mutation|subscription|fragment)/y;function CW(t){var e,r,n;if(t&&(Ce(),e=Qn(pn),r=function(){if(Ce(),st.charCodeAt(we)===40){var o=[];we++,Ce();var s;do{if(st.charCodeAt(we++)!==36||(s=Qn(pn))==null)throw tr("Variable");if(Ce(),st.charCodeAt(we++)!==58)throw tr("VariableDefinition");Ce();var a=_W(),c=void 0;st.charCodeAt(we)===61&&(we++,Ce(),c=jm(!0)),Ce(),o.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:s}},type:a,defaultValue:c,directives:Of(!0)})}while(st.charCodeAt(we)!==41);return we++,Ce(),o}}(),n=Of(!1)),st.charCodeAt(we)===123)return we++,Ce(),{kind:"OperationDefinition",operation:t||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:r,directives:n,selectionSet:Wm()}}function IT(t,e){return we=0,function(n,i){var o,s;Ce();var a=[];do if((o=Qn(BW))==="fragment")Ce(),a.push(PW());else if((s=CW(o))!=null)a.push(s);else throw tr("Document");while(we<n.length);if(!i){var c;return{kind:"Document",definitions:a,set loc(u){c=u},get loc(){return c||(c={start:0,end:n.length,startToken:void 0,endToken:void 0,source:{body:n,name:"graphql.web",locationOffset:{line:1,column:1}}}),c}}}return{kind:"Document",definitions:a}}(st=typeof t.body=="string"?t.body:t,e&&e.noLocation)}var kT=0,HA=new Set;function KA(){function t(e,r){var n=IT(e).definitions,i=new Set;for(var o of r||[])for(var s of o.definitions)s.kind===c0.FRAGMENT_DEFINITION&&!i.has(s)&&(n.push(s),i.add(s));var a;(a=n[0].kind===c0.FRAGMENT_DEFINITION)&&n[0].directives&&(n[0].directives=n[0].directives.filter(u=>u.name.value!=="_unmask"));var c;return{kind:c0.DOCUMENT,definitions:n,get loc(){if(!c&&a){var u=e+function(f){try{kT++;var p="";for(var m of f)if(!HA.has(m)){HA.add(m);var{loc:g}=m;g&&(p+=g.source.body)}return p}finally{--kT==0&&HA.clear()}}(r||[]);return{start:0,end:u.length,source:{body:u,name:"GraphQLTada",locationOffset:{line:1,column:1}}}}return c},set loc(u){c=u}}}return t.scalar=function(r,n){return n},t.persisted=function(r,n){return{kind:c0.DOCUMENT,definitions:n?n.definitions:[],documentId:r}},t}var Vge=KA();var TT=KA();l();h();function DW(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(r===-1)throw new Error("Invalid base64Url character: "+t);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function NW(t){let e=[];for(let r=0;r<t.length;r++){let n=t.charAt(r),i=DW(n);e=e.concat(i)}return e}function OW(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=NW(t),n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);let i=(e+t.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),s=0;for(let a=0;a<r.length;a+=8){let c=r.slice(a,a+8),u=parseInt(c.join(""),2);o[s++]=u}return new TextDecoder().decode(o)}function UW(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");let e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");let r=Object.keys(e)[0];return[r,e[r]]}function _T(t,e){let r=OW(t.value,t.indexMod4),[n,i]=UW(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return i}l();h();l();h();var PT=E.struct("ZkLoginSignature",{inputs:E.struct("ZkLoginSignatureInputs",{proofPoints:E.struct("ZkLoginSignatureInputsProofPoints",{a:E.vector(E.string()),b:E.vector(E.vector(E.string())),c:E.vector(E.string())}),issBase64Details:E.struct("ZkLoginSignatureInputsClaim",{value:E.string(),indexMod4:E.u8()}),headerBase64:E.string(),addressSeed:E.string()}),maxEpoch:E.u64(),userSignature:E.vector(E.u8())});function BT(t){return PT.parse(typeof t=="string"?Tr(t):t)}l();h();function RW(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function Gm(t,e){let r=t.toString(16);return uT(r.padStart(e*2,"0").slice(-e*2))}function VA(t,e){let r=Gm(t,e),n=RW(r);return n===-1?new Uint8Array([0]):r.slice(n)}var NT=t=>{throw TypeError(t)},OT=(t,e,r)=>e.has(t)||NT("Cannot "+r),is=(t,e,r)=>(OT(t,e,"read from private field"),r?r.call(t):e.get(t)),qA=(t,e,r)=>e.has(t)?NT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Uf=(t,e,r,n)=>(OT(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ji,u0,f0,LW=class zA extends Nf{constructor(e,{client:r}={}){super(),qA(this,ji),qA(this,u0),qA(this,f0),Uf(this,u0,r),typeof e=="string"?Uf(this,ji,Tr(e)):e instanceof Uint8Array?Uf(this,ji,e):Uf(this,ji,Uint8Array.from(e)),Uf(this,f0,is(this,ji).length!==is(this,ji)[0]+1+32),is(this,f0)&&Uf(this,ji,CT(is(this,ji)))}equals(e){return super.equals(e)}toSuiAddress(){if(is(this,f0)){let e=CT(is(this,ji),!0),r=new Uint8Array(e.length+1);return r[0]=this.flag(),r.set(e,1),vo(_m(Rc(r,{dkLen:32})).slice(0,ba*2))}return super.toSuiAddress()}toRawBytes(){return is(this,ji)}flag(){return ns.ZkLogin}async verify(e,r){throw Error("does not support")}verifyPersonalMessage(e,r){let n=$m(r),i=new zA(n.publicKey).toSuiAddress();return DT({address:i,bytes:jt(e),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:is(this,u0)})}verifyTransaction(e,r){let n=$m(r),i=new zA(n.publicKey).toSuiAddress();return DT({address:i,bytes:jt(e),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:is(this,u0)})}};ji=new WeakMap;u0=new WeakMap;f0=new WeakMap;var MW=LW;function FW(t,e,r){let n=r?.legacyAddress?VA(t,32):Gm(t,32),i=new TextEncoder().encode(e),o=new Uint8Array(1+i.length+n.length);return o.set([i.length],0),o.set(i,1),o.set(n,1+i.length),new MW(o,r)}var HW=TT(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function CT(t,e=!1){let r=t[0]+1,n=BigInt(`0x${xi(t.slice(r))}`),i=e?VA(n,32):Gm(n,32),o=new Uint8Array(r+i.length);return o.set(t.slice(0,r),0),o.set(i,r),o}async function DT({address:t,bytes:e,signature:r,intentScope:n,client:i=new qm({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await i.query({query:HW,variables:{bytes:e,signature:r,intentScope:n,author:t}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function $m(t){let e=typeof t=="string"?Tr(t):t;if(e[0]!==ns.ZkLogin)throw new Error("Invalid signature scheme");let r=e.slice(1),{inputs:n,maxEpoch:i,userSignature:o}=BT(r),{issBase64Details:s,addressSeed:a}=n,c=_T(s,"iss"),u=FW(BigInt(a),c);return{serializedSignature:jt(e),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:o,iss:c,addressSeed:BigInt(a)},signature:e,publicKey:u.toRawBytes()}}function UT({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+t.length+n.length);return i.set([ns[e]]),i.set(t,1),i.set(n,1+t.length),jt(i)}function RT(t){let e=Tr(t),r=Dm[e[0]];switch(r){case"MultiSig":let n=es.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":return $m(t);case"ED25519":case"Secp256k1":case"Secp256r1":let i=pT[r],o=e.slice(1,e.length-i),s=e.slice(1+o.length);return{serializedSignature:t,signatureScheme:r,signature:o,publicKey:s,bytes:e};default:throw new Error("Unsupported signature scheme")}}l();h();l();h();l();h();function Rf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function KW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function d0(t,...e){if(!KW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ym(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rf(t.outputLen),Rf(t.blockLen)}function Lf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function LT(t,e){d0(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}l();h();l();h();l();h();var Ff=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function VW(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ea(t){return typeof t=="string"&&(t=VW(t)),d0(t),t}var Mf=class{clone(){return this._cloneInto()}};function MT(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function FT(t){let e=n=>t().update(Ea(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}var Qm=class extends Mf{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ym(e);let n=Ea(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return Lf(this),this.iHash.update(e),this}digestInto(e){Lf(this),d0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},jA=(t,e,r)=>new Qm(t,e).update(r).digest();jA.create=(t,e)=>new Qm(t,e);function qW(t,e,r,n){Ym(t);let i=MT({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(Rf(o),Rf(s),Rf(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=Ea(e),u=Ea(r),d=new Uint8Array(s),f=jA.create(t,c),p=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:d,PRF:f,PRFSalt:p}}function zW(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}function HT(t,e,r,n){let{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:c}=qW(t,e,r,n),u,d=new Uint8Array(4),f=Ff(d),p=new Uint8Array(a.outputLen);for(let m=1,g=0;g<o;m++,g+=a.outputLen){let x=s.subarray(g,g+a.outputLen);f.setInt32(0,m,!1),(u=c._cloneInto(u)).update(d).digestInto(p),x.set(p.subarray(0,x.length));for(let w=1;w<i;w++){a._cloneInto(u).update(p).digestInto(p);for(let S=0;S<x.length;S++)x[S]^=p[S]}}return zW(a,c,s,u,p)}l();h();function jW(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var Xm=class extends Mf{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ff(this.buffer)}update(e){Lf(this);let{view:r,buffer:n,blockLen:i}=this;e=Ea(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Ff(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lf(this),LT(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;jW(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Ff(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};l();h();l();h();var Zm=BigInt(4294967295),WA=BigInt(32);function KT(t,e=!1){return e?{h:Number(t&Zm),l:Number(t>>WA&Zm)}:{h:Number(t>>WA&Zm)|0,l:Number(t&Zm)|0}}function WW(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:o,l:s}=KT(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}var GW=(t,e)=>BigInt(t>>>0)<<WA|BigInt(e>>>0),$W=(t,e,r)=>t>>>r,YW=(t,e,r)=>t<<32-r|e>>>r,QW=(t,e,r)=>t>>>r|e<<32-r,XW=(t,e,r)=>t<<32-r|e>>>r,ZW=(t,e,r)=>t<<64-r|e>>>r-32,JW=(t,e,r)=>t>>>r-32|e<<64-r,eG=(t,e)=>e,tG=(t,e)=>t,rG=(t,e,r)=>t<<r|e>>>32-r,nG=(t,e,r)=>e<<r|t>>>32-r,iG=(t,e,r)=>e<<r-32|t>>>64-r,oG=(t,e,r)=>t<<r-32|e>>>64-r;function sG(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}var aG=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),cG=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,uG=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),fG=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,dG=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),lG=(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0;var hG={fromBig:KT,split:WW,toBig:GW,shrSH:$W,shrSL:YW,rotrSH:QW,rotrSL:XW,rotrBH:ZW,rotrBL:JW,rotr32H:eG,rotr32L:tG,rotlSH:rG,rotlSL:nG,rotlBH:iG,rotlBL:oG,add:sG,add3L:aG,add3H:cG,add4L:uG,add4H:fG,add5H:lG,add5L:dG},Ne=hG;var[pG,yG]=Ne.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ia=new Uint32Array(80),ka=new Uint32Array(80),GA=class extends Xm{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:x,Hl:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)Ia[A]=e.getUint32(r),ka[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){let _=Ia[A-15]|0,C=ka[A-15]|0,W=Ne.rotrSH(_,C,1)^Ne.rotrSH(_,C,8)^Ne.shrSH(_,C,7),re=Ne.rotrSL(_,C,1)^Ne.rotrSL(_,C,8)^Ne.shrSL(_,C,7),Y=Ia[A-2]|0,G=ka[A-2]|0,ee=Ne.rotrSH(Y,G,19)^Ne.rotrBH(Y,G,61)^Ne.shrSH(Y,G,6),Z=Ne.rotrSL(Y,G,19)^Ne.rotrBL(Y,G,61)^Ne.shrSL(Y,G,6),D=Ne.add4L(re,Z,ka[A-7],ka[A-16]),N=Ne.add4H(D,W,ee,Ia[A-7],Ia[A-16]);Ia[A]=N|0,ka[A]=D|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:p,Fh:m,Fl:g,Gh:x,Gl:w,Hh:S,Hl:T}=this;for(let A=0;A<80;A++){let _=Ne.rotrSH(f,p,14)^Ne.rotrSH(f,p,18)^Ne.rotrBH(f,p,41),C=Ne.rotrSL(f,p,14)^Ne.rotrSL(f,p,18)^Ne.rotrBL(f,p,41),W=f&m^~f&x,re=p&g^~p&w,Y=Ne.add5L(T,C,re,yG[A],ka[A]),G=Ne.add5H(Y,S,_,W,pG[A],Ia[A]),ee=Y|0,Z=Ne.rotrSH(n,i,28)^Ne.rotrBH(n,i,34)^Ne.rotrBH(n,i,39),D=Ne.rotrSL(n,i,28)^Ne.rotrBL(n,i,34)^Ne.rotrBL(n,i,39),N=n&o^n&a^o&a,O=i&s^i&c^s&c;S=x|0,T=w|0,x=m|0,w=g|0,m=f|0,g=p|0,{h:f,l:p}=Ne.add(u|0,d|0,G|0,ee|0),u=a|0,d=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let $=Ne.add3L(ee,D,O);n=Ne.add3H($,G,Z,N),i=$|0}({h:n,l:i}=Ne.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Ne.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Ne.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Ne.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:p}=Ne.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=Ne.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:x,l:w}=Ne.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:S,l:T}=Ne.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(n,i,o,s,a,c,u,d,f,p,m,g,x,w,S,T)}roundClean(){Ia.fill(0),ka.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var VT=FT(()=>new GA);function qT(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function mG(t){let e=qT(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}var gG=t=>qT("mnemonic"+t);function zT(t,e=""){return HT(VT,mG(t).nfkd,gG(e),{c:2048,dkLen:64})}function $A(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function bG(t){return zT(t,"")}function jT(t){return xi(bG(t))}l();h();var l0=j(Vf(),1);var qf=32;var QA="suiprivkey",eg=class{async signWithIntent(e,r){let n=Cm(r,e),i=Rc(n,{dkLen:32});return{signature:UT({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:jt(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){let{signature:r}=await this.signWithIntent(E.vector(E.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:jt(e),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},h0=class extends eg{};function Lc(t){let{prefix:e,words:r}=l0.bech32.decode(t);if(e!==QA)throw new Error("invalid private key prefix");let n=new Uint8Array(l0.bech32.fromWords(r)),i=n.slice(1);return{schema:Dm[n[0]],secretKey:i}}function XA(t,e){if(t.length!==qf)throw new Error("Invalid bytes length");let r=ns[e],n=new Uint8Array(t.length+1);return n.set([r]),n.set(t,1),l0.bech32.encode(QA,l0.bech32.toWords(n))}l();h();l();h();var Mc=j(ph(),1);l();h();l();h();var tg=class extends xa{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,sT(e);let n=wi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return ts(this),this.iHash.update(e),this}digestInto(e){ts(this),Cf(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},rg=(t,e,r)=>new tg(t,e).update(r).digest();rg.create=(t,e)=>new tg(t,e);l();h();l();h();function SG(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var ng=class extends xa{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tm(this.buffer)}update(e){ts(this);let{view:r,buffer:n,blockLen:i}=this;e=wi(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Tm(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ts(this),km(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let f=s;f<i;f++)r[f]=0;SG(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Tm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var[vG,EG]=ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ta=new Uint32Array(80),_a=new Uint32Array(80),ZA=class extends ng{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:g,Hh:x,Hl:w}=this;return[e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w]}set(e,r,n,i,o,s,a,c,u,d,f,p,m,g,x,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=x|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)Ta[A]=e.getUint32(r),_a[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){let _=Ta[A-15]|0,C=_a[A-15]|0,W=ge.rotrSH(_,C,1)^ge.rotrSH(_,C,8)^ge.shrSH(_,C,7),re=ge.rotrSL(_,C,1)^ge.rotrSL(_,C,8)^ge.shrSL(_,C,7),Y=Ta[A-2]|0,G=_a[A-2]|0,ee=ge.rotrSH(Y,G,19)^ge.rotrBH(Y,G,61)^ge.shrSH(Y,G,6),Z=ge.rotrSL(Y,G,19)^ge.rotrBL(Y,G,61)^ge.shrSL(Y,G,6),D=ge.add4L(re,Z,_a[A-7],_a[A-16]),N=ge.add4H(D,W,ee,Ta[A-7],Ta[A-16]);Ta[A]=N|0,_a[A]=D|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:p,Fh:m,Fl:g,Gh:x,Gl:w,Hh:S,Hl:T}=this;for(let A=0;A<80;A++){let _=ge.rotrSH(f,p,14)^ge.rotrSH(f,p,18)^ge.rotrBH(f,p,41),C=ge.rotrSL(f,p,14)^ge.rotrSL(f,p,18)^ge.rotrBL(f,p,41),W=f&m^~f&x,re=p&g^~p&w,Y=ge.add5L(T,C,re,EG[A],_a[A]),G=ge.add5H(Y,S,_,W,vG[A],Ta[A]),ee=Y|0,Z=ge.rotrSH(n,i,28)^ge.rotrBH(n,i,34)^ge.rotrBH(n,i,39),D=ge.rotrSL(n,i,28)^ge.rotrBL(n,i,34)^ge.rotrBL(n,i,39),N=n&o^n&a^o&a,O=i&s^i&c^s&c;S=x|0,T=w|0,x=m|0,w=g|0,m=f|0,g=p|0,{h:f,l:p}=ge.add(u|0,d|0,G|0,ee|0),u=a|0,d=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let $=ge.add3L(ee,D,O);n=ge.add3H($,G,Z,N),i=$|0}({h:n,l:i}=ge.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=ge.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=ge.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=ge.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:p}=ge.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=ge.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:x,l:w}=ge.add(this.Gh|0,this.Gl|0,x|0,w|0),{h:S,l:T}=ge.add(this.Hh|0,this.Hl|0,S|0,T|0),this.set(n,i,o,s,a,c,u,d,f,p,m,g,x,w,S,T)}roundClean(){Ta.fill(0),_a.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var JA=fT(()=>new ZA);var IG=j(ph(),1),kG="ed25519 seed",TG=2147483648,_G=new RegExp("^m(\\/[0-9]+')+$"),YT=t=>t.replace("'",""),PG=t=>{let r=rg.create(JA,kG).update(ma(t)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},BG=({key:t,chainCode:e},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let o=new Uint8Array(1+t.length+n.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(t,1),o.set(new Uint8Array(n,0,n.byteLength),t.length+1);let s=rg.create(JA,e).update(o).digest(),a=s.slice(0,32),c=s.slice(32);return{key:a,chainCode:c}};var CG=t=>_G.test(t)?!t.split("/").slice(1).map(YT).some(isNaN):!1,eS=(t,e,r=TG)=>{if(!CG(t))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=PG(e);return t.split("/").slice(1).map(YT).map(s=>parseInt(s,10)).reduce((s,a)=>BG(s,a+r),{key:n,chainCode:i})};l();h();var QT=j(ph(),1);var tS=32,Pa=class extends Nf{constructor(e){if(super(),typeof e=="string"?this.data=Tr(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==tS)throw new Error(`Invalid public key input. Expected ${tS} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return ns.ED25519}async verify(e,r){let n;if(typeof r=="string"){let i=RT(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!PA(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return QT.default.sign.detached.verify(e,n,this.toRawBytes())}};Pa.SIZE=tS;var rS="m/44'/784'/0'/0'/0'",Fc=class t extends h0{constructor(e){super(),e?this.keypair=e:this.keypair=Mc.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new t(Mc.default.sign.keyPair())}static fromSecretKey(e,r){if(typeof e=="string"){let o=Lc(e);if(o.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${o.schema}`);return this.fromSecretKey(o.secretKey,r)}let n=e.length;if(n!==qf)throw new Error(`Wrong secretKey size. Expected ${qf} bytes, got ${n}.`);let i=Mc.default.sign.keyPair.fromSeed(e);if(!r||!r.skipValidation){let s=new TextEncoder().encode("sui validation"),a=Mc.default.sign.detached(s,i.secretKey);if(!Mc.default.sign.detached.verify(s,a,i.publicKey))throw new Error("provided secretKey is invalid")}return new t(i)}getPublicKey(){return new Pa(this.keypair.publicKey)}getSecretKey(){return XA(this.keypair.secretKey.slice(0,qf),this.getKeyScheme())}async sign(e){return Mc.default.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,r){if(r==null&&(r=rS),!$A(r))throw new Error("Invalid derivation path");let{key:n}=eS(r,jT(e));return t.fromSecretKey(n)}static deriveKeypairFromSeed(e,r){if(r==null&&(r=rS),!$A(r))throw new Error("Invalid derivation path");let{key:n}=eS(r,e);return t.fromSecretKey(n)}};var ig=class{addressTypes=["sui"];generateKeypairFromPrivateKey(e){let r=e.fold(s=>new Uint8Array(s)),n=Fc.fromSecretKey(r),i=n.getPublicKey().toRawBytes(),o=Lc(n.getSecretKey());if(o.schema!=="ED25519")throw new Error(`got unexpected schema ${o.schema} for Sui`);return{publicKey:i,privateKey:o.secretKey}}generateKeypairFromSeed(e,r,n){let i=e.fold(o=>new ho(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};var p0=class{cryptoChainPlugins=new Map;constructor(){this.registerChainPlugin(new Cy),this.registerChainPlugin(new hm),this.registerChainPlugin(new gm),this.registerChainPlugin(new ig)}registerChainPlugin(e){for(let r of e.addressTypes)this.cryptoChainPlugins.set(r,e)}generateKeypairFromPrivateKey(e,r){let n=this.cryptoChainPlugins.get(r);if(!n)throw new Error(`No plugin found for address type ${r}, please register the plugin first.`);return n.generateKeypairFromPrivateKey(e)}generateKeypairFromSeed(e,r,n){let i=Ui.getAddressType(n),o=this.cryptoChainPlugins.get(i);if(!o)throw new Error(`No plugin found for address type ${i}, please register the plugin first.`);return o.generateKeypairFromSeed(e,r,n)}};l();h();function nS(t){return Ui.getAll().includes(t)}l();h();var A_=j(ws()),S_=j(jf()),dg=j(ph()),v_=j(yS());var mS=t=>{let{privateKey:e,addressType:r}=t;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":try{return{key:u$(e,t.networkIDValue),encoding:"hex"}}catch{throw new Error("Could not find encoding for Bitcoin private key")}case"eip155":try{return{key:f$(e),encoding:"hex"}}catch{throw new Error("Could not find encoding for EVM private key")}case"solana":try{return l$(e)}catch{throw new Error("Could not find encoding for Solana private key")}case"sui":try{return{key:d$(e),encoding:"base64"}}catch{throw new Error("Could not find encoding for Sui private key")}default:return ft(r)}},u$=(t,e)=>{try{let{privateKey:r}=v_.decodeRaw(S_.default.decode(t),e);return r}catch{throw new Error("Provided Bitcoin private key is invalid!")}},f$=t=>{let e=Buffer.from(t.replace("0x",""),"hex");try{return new vf(new Uint8Array(e)),e}catch{throw new Error("Provided Ethereum private key is invalid!")}},fg=t=>{let e=dg.default.sign.keyPair.fromSecretKey(t),r=Buffer.from("phantom-secret-key-validation"),n=dg.default.sign.detached(r,t);if(!dg.default.sign.detached.verify(r,n,e.publicKey))throw new Error("Provided Solana private key is invalid!")},d$=t=>{try{let e=Lc(t);if(e.schema!=="ED25519")throw new Error("Invalid schema");return e.secretKey}catch{throw new Error("Provided Sui private key is invalid!")}},l$=t=>{try{let e=JSON.parse(t);return fg(Uint8Array.from(e)),{key:e,encoding:"uint8array"}}catch{}try{let e=A_.default.decode(t);return fg(e),{key:e,encoding:"base58"}}catch{}try{let e=Buffer.from(t,"hex");return fg(e),{key:e,encoding:"hex"}}catch{}try{let e=Buffer.from(t,"base64");return fg(e),{key:e,encoding:"base64"}}catch{}throw new Error("Provided Solana private key is invalid!")};l();h();var E_=j(ws()),I_=j(jf()),k_=j(yS());var h$=t=>{let{privateKey:e,addressType:r}=t;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return I_.default.encode(k_.encodeRaw(t.networkIDValue,Buffer.from(e),!0));case"eip155":return"0x"+Buffer.from(e).toString("hex");case"solana":return E_.default.encode(e);case"sui":return Fc.fromSecretKey(e).getSecretKey();default:return ft(r)}};l();h();var m0=t=>{try{return vx.from(mS(t).key)}catch(e){return console.error(e),vx.from(Buffer.from(""))}};l();h();var ete=j(CS());l();h();var[G_,$_,Y_]=[[],[],[]],aY=BigInt(0),A0=BigInt(1),cY=BigInt(2),uY=BigInt(7),fY=BigInt(256),dY=BigInt(113);for(let t=0,e=A0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],G_.push(2*(5*n+r)),$_.push((t+1)*(t+2)/2%64);let i=aY;for(let o=0;o<7;o++)e=(e<<A0^(e>>uY)*dY)%fY,e&cY&&(i^=A0<<(A0<<BigInt(o))-A0);Y_.push(i)}var[lY,hY]=ke.split(Y_,!0),j_=(t,e,r)=>r>32?ke.rotlBH(t,e,r):ke.rotlSH(t,e,r),W_=(t,e,r)=>r>32?ke.rotlBL(t,e,r):ke.rotlSL(t,e,r);function pY(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let s=0;s<10;s++)r[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],d=r[c+1],f=j_(u,d,1)^r[a],p=W_(u,d,1)^r[a+1];for(let m=0;m<50;m+=10)t[s+m]^=f,t[s+m+1]^=p}let i=t[2],o=t[3];for(let s=0;s<24;s++){let a=$_[s],c=j_(i,o,a),u=W_(i,o,a),d=G_[s];i=t[d],o=t[d+1],t[d]=c,t[d+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=t[s+a];for(let a=0;a<10;a++)t[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=lY[n],t[1]^=hY[n]}r.fill(0)}var wg=class t extends Ef{constructor(e,r,n,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hi.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Kk(this.state)}keccak(){pY(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Hi.exists(this);let{blockLen:r,state:n}=this;e=If(e);let i=e.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=e[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Hi.exists(this,!1),Hi.bytes(e),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);e.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hi.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Hi.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new t(r,n,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}},Ra=(t,e,r)=>Dc(()=>new wg(e,t,r)),m2e=Ra(6,144,224/8),g2e=Ra(6,136,256/8),b2e=Ra(6,104,384/8),x2e=Ra(6,72,512/8),w2e=Ra(1,144,224/8),DS=Ra(1,136,256/8),A2e=Ra(1,104,384/8),S2e=Ra(1,72,512/8),Q_=(t,e,r)=>Vk((n={})=>new wg(e,t,n.dkLen===void 0?r:n.dkLen,!0)),v2e=Q_(31,168,128/8),E2e=Q_(31,136,256/8);var $i=j(Xv()),AB=j(ws());function _b(t){let{publicKey:e,addressType:r}=t;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return tte(e,r,t.networkID);case"eip155":return rte(e);case"solana":return AB.default.encode(e);case"sui":return new Pa(e).toSuiAddress();default:return ft(r)}}var tte=(t,e,r)=>{let n=r==="bip122:000000000933ea01ad0ee984209779ba"?$i.networks.testnet:$i.networks.bitcoin,i;switch(e){case"bip122_p2tr":$i.initEccLib(ete),i=$i.payments.p2tr({internalPubkey:Buffer.from(t.slice(1,33)),network:n},{validate:!1})?.address;break;case"bip122_p2wpkh":i=$i.payments.p2wpkh({pubkey:Buffer.from(t),network:n},{validate:!1})?.address;break;case"bip122_p2sh":{let o=Buffer.from(t),s=$i.payments.p2wpkh({pubkey:o,network:n},{validate:!1});i=$i.payments.p2sh({pubkey:o,network:n,redeem:s},{validate:!1})?.address;break}case"bip122_p2pkh":{i=$i.payments.p2pkh({pubkey:Buffer.from(t),network:n},{validate:!1})?.address;break}default:ft(e)}if(!i)throw new Error("Could not derive Bitcoin address from public key");return i},rte=t=>{let e=t.slice(1),n=DS(e).slice(12);return nte(`0x${Buffer.from(n).toString("hex")}`)},nte=t=>{if(!rc.safeParse(t).success)throw new Error("toChecksumAddress: Input address is not a valid hex string.");let e=t.toLowerCase().replace("0x",""),r=Buffer.from(DS(Buffer.from(e,"utf-8"))).toString("hex"),n="0x";for(let i=0;i<e.length;i++)parseInt(r[i],16)>=8?n+=e[i].toUpperCase():n+=e[i];return n};l();h();function q0(t){return Rw.safeParse(t).success}l();h();function ite(t){switch(t){case"bip44Root":case"bip44Change":case"bip44":case"deprecated":return"solana";case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return"eip155";case"bitcoinLegacy":return"bip122_p2pkh";case"bitcoinNativeSegwit":return"bip122_p2wpkh";case"bitcoinNestedSegwit":return"bip122_p2sh";case"bitcoinTaproot":return"bip122_p2tr";case"bip44Sui":return"sui"}}l();h();l();h();l();h();var Br=(c=>(c.Solana="solana",c.Monad="monad",c.Ethereum="ethereum",c.Base="base",c.Arbitrum="arbitrum",c.Polygon="polygon",c.Bitcoin="bitcoin",c.Sui="sui",c))(Br||{}),Ln=(c=>(c.Ethereum="60",c.Monad="143",c.Polygon="966",c.Base="8453",c.Arbitrum="9001",c.Solana="501",c.Bitcoin="0",c.Sui="784",c))(Ln||{}),Zv=class extends Error{constructor(r,n){super(`${n} is not yet supported for ${r}`);this.chain=r;this.feature=n;this.name="UnsupportedChainFeatureError"}},Jv=class extends Zv{constructor(e){super("sui",e)}};var Pb=(r=>(r.Mainnet="eip155:42161",r.Sepolia="eip155:421614",r))(Pb||{}),SB=v.union([v.literal("eip155:42161"),v.literal("eip155:421614")]),e3={id:"arbitrum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/arbitrum.png",name:"Arbitrum",networks:{"eip155:42161":{id:"eip155:42161",name:"Arbitrum",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/arbitrum/network/mainnet",value:42161},"eip155:421614":{id:"eip155:421614",name:"Arbitrum Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/arbitrum/network/sepolia",value:421614}},mainnetID:"eip155:42161",tokenDecimals:18,tokenSymbol:"ETH",slip44:"9001",parentChain:"ethereum"};l();h();var Bb=(r=>(r.Mainnet="eip155:8453",r.Sepolia="eip155:84532",r))(Bb||{}),vB=v.union([v.literal("eip155:8453"),v.literal("eip155:84532")]),t3={id:"base",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/base.png",name:"Base",networks:{"eip155:8453":{id:"eip155:8453",name:"Base",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/base/network/mainnet",value:8453},"eip155:84532":{id:"eip155:84532",name:"Base Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/base/network/sepolia",value:84532}},mainnetID:"eip155:8453",tokenDecimals:18,tokenSymbol:"ETH",slip44:"8453",parentChain:"ethereum"};l();h();var ote=j(CS());var Db=j(Xv());l();h();var z0=(r=>(r.Mainnet="sui:mainnet",r.Testnet="sui:testnet",r))(z0||{}),ld=v.union([v.literal("sui:mainnet"),v.literal("sui:testnet")]),r3={id:"sui",addressTypes:["sui"],iconUrl:"https://static.phantom.app/assets/sui.png",name:"Sui",networks:{"sui:mainnet":{id:"sui:mainnet",name:"Sui",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/sui/network/mainnet",value:"mainnet"},"sui:testnet":{id:"sui:testnet",name:"Sui Testnet",shortName:"Testnet",rpcProxyUrl:"https://node-proxy.phantom.dev/v1/chain/sui/network/testnet",value:"testnet"}},mainnetID:"sui:mainnet",tokenDecimals:9,tokenSymbol:"SUI",slip44:"784"},Cb=v.object({networkID:ld,addressType:v.nativeEnum(Te),address:yu,publicKey:v.instanceof(Uint8Array).optional()});var Nb=(r=>(r.Mainnet="bip122:000000000019d6689c085ae165831e93",r.Testnet="bip122:000000000933ea01ad0ee984209779ba",r))(Nb||{}),Za=v.union([v.literal("bip122:000000000019d6689c085ae165831e93"),v.literal("bip122:000000000933ea01ad0ee984209779ba")]),EB=v.union([v.literal("sui:mainnet"),v.literal("sui:testnet")]),hd=v.string().refine(t=>{try{return Db.initEccLib(ote),Db.address.toOutputScript(t),!0}catch{return!1}},{message:"Invalid Bitcoin address."}),j0=v.object({networkID:Za,addressType:v.nativeEnum(Te),address:hd,publicKey:v.instanceof(Uint8Array).optional()}),n3={id:"bitcoin",addressTypes:["bip122_p2tr","bip122_p2wpkh"],iconUrl:"https://static.phantom.app/assets/bitcoin.png",name:"Bitcoin",networks:{"bip122:000000000019d6689c085ae165831e93":{id:"bip122:000000000019d6689c085ae165831e93",name:"Bitcoin",value:128},"bip122:000000000933ea01ad0ee984209779ba":{id:"bip122:000000000933ea01ad0ee984209779ba",name:"Bitcoin Testnet",shortName:"Testnet",value:239}},mainnetID:"bip122:000000000019d6689c085ae165831e93",tokenDecimals:8,tokenSymbol:"BTC",slip44:"0"};l();h();l();h();var W0=(n=>(n.Mainnet="eip155:143",n.Testnet="eip155:10143",n.Devnet="eip155:41454",n))(W0||{}),i3=v.union([v.literal("eip155:143"),v.literal("eip155:10143"),v.literal("eip155:41454")]),o3={id:"monad",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/monad.png",name:"Monad",networks:{"eip155:143":{id:"eip155:143",name:"Monad",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/mainnet",value:143,hidden:!0},"eip155:10143":{id:"eip155:10143",name:"Monad Testnet",shortName:"Testnet",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/testnet",value:10143},"eip155:41454":{id:"eip155:41454",name:"Monad Devnet",shortName:"Devnet",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/monad/network/devnet1",value:41454,hidden:!0}},mainnetID:"eip155:10143",tokenDecimals:18,tokenSymbol:"MON",slip44:"143"};l();h();var Ob=(r=>(r.Mainnet="eip155:137",r.Amoy="eip155:80002",r))(Ob||{}),s3=v.union([v.literal("eip155:137"),v.literal("eip155:80002")]),a3={id:"polygon",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",networks:{"eip155:137":{id:"eip155:137",name:"Polygon",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/polygon/network/mainnet",value:137},"eip155:80002":{id:"eip155:80002",name:"Polygon Amoy",shortName:"Amoy",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/polygon/network/amoy",value:80002}},mainnetID:"eip155:137",tokenDecimals:18,tokenSymbol:"POL",slip44:"966",parentChain:"ethereum"};var Ub=(r=>(r.Mainnet="eip155:1",r.Sepolia="eip155:11155111",r))(Ub||{}),IB=v.union([v.literal("eip155:1"),v.literal("eip155:11155111")]),Ja=v.union([IB,s3,vB,i3,SB]),G0=v.object({networkID:Ja,addressType:v.nativeEnum(Te),address:Ss}),c3={id:"ethereum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",networks:{"eip155:1":{id:"eip155:1",name:"Ethereum",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/ethereum/network/mainnet",value:1},"eip155:11155111":{id:"eip155:11155111",name:"Ethereum Sepolia",shortName:"Sepolia",rpcProxyUrl:"https://node-proxy.phantom.app/v1/chain/ethereum/network/sepolia",value:11155111}},mainnetID:"eip155:1",tokenDecimals:18,tokenSymbol:"ETH",slip44:"60"};l();h();var $0=(i=>(i.Mainnet="solana:101",i.Testnet="solana:102",i.Devnet="solana:103",i.Localnet="solana:localnet",i))($0||{}),ec=v.union([v.literal("solana:101"),v.literal("solana:102"),v.literal("solana:103"),v.literal("solana:localnet")]),Y0=v.object({networkID:ec,addressType:v.nativeEnum(Te),address:pu}),u3={id:"solana",addressTypes:["solana"],iconUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",networks:{"solana:101":{id:"solana:101",name:"Solana",rpcProxyUrl:"https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ?advancedTxSubmission=true",value:"mainnet"},"solana:102":{id:"solana:102",name:"Solana Testnet",shortName:"Testnet",value:"testnet"},"solana:103":{id:"solana:103",name:"Solana Devnet",shortName:"Devnet",value:"devnet"},"solana:localnet":{id:"solana:localnet",name:"Solana Localnet",shortName:"Localnet",value:"localnet"}},localnetID:"solana:localnet",mainnetID:"solana:101",tokenDecimals:9,tokenSymbol:"SOL",slip44:"501"};l();h();function Rb(t){return Object.values(Br).includes(t)}var on={bitcoin:n3,ethereum:c3,polygon:a3,monad:o3,solana:u3,base:t3,sui:r3,arbitrum:e3},Lb={solana:1,ethereum:2,monad:3,base:4,sui:5,polygon:6,bitcoin:7,arbitrum:8},ste={solana:!0,ethereum:!0,monad:!1,base:!0,polygon:!0,bitcoin:!0,sui:!1,arbitrum:!1},f3=(t,e)=>{let r=Lb[t]-Lb[e];return r===0?0:r>0?1:-1},ate=()=>{let t=Object.values(Br).sort(f3),e=t.map(q=>on[q]),r={},n=[],i={},o={},s={};e.forEach(q=>{let k=Object.fromEntries(Object.entries(q.networks).filter(([ae,he])=>!he.hidden)),L=Object.keys(k);n.push(...L),L.forEach(ae=>{r[ae]=q});let z=Object.values(k);i[q.id]=z.map(ae=>ae.id),z.forEach(ae=>{o[ae.id]=ae});for(let ae of q.addressTypes){let he=s[ae];he?he.push(q.id):s[ae]=[q.id]}});let a=new Set(n);function c(q){return q?.evmOnly?t.filter(k=>on[k].addressTypes.includes("eip155")):t}function u(q,k){return q==="sui"?k:ste[q]}function d(q){return n.filter(k=>r[k].id===q)}function f(q){if(!q)return n;let k=n;return q.evmOnly&&(k=k.filter(L=>fe(L))),q.mainnetOnly&&(k=k.filter(L=>X(L))),k}function p(q){return r[q]}function m(q){return o[q].rpcProxyUrl}function g(q){return r[q].addressTypes[0]}function x(q){let k=r[q];if(k.addressTypes.length===1){let[L]=k.addressTypes;return L}else throw`The chain ${k.id} has multiple address types`}function w(q){return r[q].addressTypes}function S(q){return r[q].id}function T(q){return on[Fe(q)].name}function A(q){return r[q].tokenDecimals}function _(q){return(G(q)?r[q]:on[q]).tokenSymbol}function C(q){return(G(q)?r[q]:on[q]).iconUrl}function W(q){return r[q].slip44}function re(q){return on[Fe(q)].mainnetID}function Y(q){let k;if(fe(q)&&(k=o[q].value),typeof k=="number")return k;throw new Error(`Invalid NetworkID: ${q}. Must be an EVM NetworkID.`)}function G(q){return a.has(q)}function ee(q){return Object.keys(on.bitcoin.networks).includes(q)}function Z(q){return Object.keys(on.ethereum.networks).includes(q)}function D(q){return Object.keys(on.polygon.networks).includes(q)}function N(q){return Object.keys(on.base.networks).includes(q)}function O(q){return Object.keys(on.arbitrum.networks).includes(q)}function $(q){return Object.keys(on.monad.networks).includes(q)}function fe(q){return Z(q)||D(q)||N(q)||$(q)||O(q)}function se(q){return Object.keys(on.solana.networks).includes(q)}function Ae(q){return Object.keys(on.sui.networks).includes(q)}function P(q){if(!se(q))throw new Error(`Invalid NetworkID: ${q}. Must be a Solana NetworkID.`);return on.solana.networks[q].value}function U(q){return r[q].localnetID===q}function X(q){return r[q].mainnetID===q}function M(q){return o[q]}function F(q,k=!1){let L=o[q];return k&&L.shortName?L.shortName:L.name}function ye(q){return r[q].parentChain}function wt(q){return s[q]}function $e(q,k){let L=r[q].id,z=r[k].id;return f3(L,z)}function Fe(q){return Rb(q)?q:G(q)?K.getChainID(q):ft(q)}return{...on,getAllChainIDs:c,isChainDefaultEnabled:u,getNetworkIDs:d,getAllNetworkIDs:f,getChainDefinition:p,getAddressType:x,getAddressTypes:w,getChainID:S,getChainName:T,getTokenDecimals:A,getTokenSymbol:_,getChainIconUrl:C,getSlip44:W,getMainnetNetworkID:re,getEVMNetworkIDValue:Y,getSolanaNetworkIDValue:P,_DO_NOT_USE_getAddressType:g,isNetworkID:G,isBitcoinNetworkID:ee,isEVMNetworkID:fe,isSolanaNetworkID:se,isEthereumNetworkID:Z,isPolygonNetworkID:D,isBaseNetworkID:N,isArbitrumNetworkID:O,isSuiNetworkID:Ae,isLocalNetworkID:U,isMainnetNetworkID:X,getNetworkDefinition:M,getNetworkName:F,getChainIDs:wt,compareChain:f3,compareNetworkID:$e,getRpcProxyUrl:m,getParentChain:ye}},K=ate();l();h();var Xe={Bitcoin:Nb,Ethereum:Ub,Polygon:Ob,Solana:$0,Sui:z0,Base:Bb,Monad:W0,Arbitrum:Pb},ms=v.union([Za,Ja,ec,ld]),cte=v.union([j0,G0,Y0,Cb]);l();h();l();h();var Yi=(n=>(n.address="address",n.tx="tx",n.nativeToken="nativeToken",n))(Yi||{}),kB=v.string(),TB=v.object({chainId:ms,resourceType:v.nativeEnum(Yi)}),d3=TB.extend({resourceType:v.literal("nativeToken"),slip44:v.nativeEnum(Ln)}),su=TB.extend({resourceType:v.literal("address"),address:v.string()}),l3=su.extend({chainId:ec,address:pu}),h3=su.extend({chainId:Ja,address:Ss,tokenId:v.string().optional()}),p3=su.extend({chainId:Za,address:hd.or(v.string())}),ute=su.extend({chainId:EB,address:yu,tokenId:v.string().optional()}),_B=v.union([d3,su,l3,h3,p3,ute]);var PB=t=>{let e=t.split("/");if(e.length>3||e.length<2)throw new Error(`Cannot decode malformed caip19 string '${t}'`);let r=e[0];if(!(K.isEVMNetworkID(r)||K.isSolanaNetworkID(r)||K.isBitcoinNetworkID(r)||K.isSuiNetworkID(r)))throw new Error(`Cannot decode unsupported chain '${r}'`);let n=e[1].split(/:(.+)/),[i,o]=n;if(!i||!o)throw new Error(`Invalid resource specification '${e[1]}'`);if(!Object.values(Yi).includes(i))throw new Error(`Unsupported resource type '${i}'`);if(i==="nativeToken"){if(!Object.values(Ln).includes(o))throw new Error(`Unsupported slip44 '${o}'`);return{chainId:r,resourceType:i,slip44:o}}else if(K.isEVMNetworkID(r)){if(i==="address")return e.length===3?{chainId:r,address:o,resourceType:i,tokenId:e[2]}:{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(K.isSolanaNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(K.isBitcoinNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(K.isSuiNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}throw new Error(`Cannot decode malformed caip19 string '${t}'`)};l();h();var Mb=t=>{if(t.resourceType==="nativeToken")return`${t.chainId}/nativeToken:${t.slip44}`;if(K.isEVMNetworkID(t.chainId))return t.address=t.address.toLowerCase(),"tokenId"in t&&typeof t.tokenId=="string"&&t.tokenId?`${t.chainId}/address:${t.address}/${t.tokenId}`:`${t.chainId}/address:${t.address}`;if(K.isSolanaNetworkID(t.chainId))return`${t.chainId}/address:${t.address}`;if(K.isBitcoinNetworkID(t.chainId)){let e=t;return`${e.chainId}/address:${e.address}`}return K.isSuiNetworkID(t.chainId)?"tokenId"in t&&typeof t.tokenId=="string"&&t.tokenId?`${t.chainId}/address:${t.address}/${t.tokenId}`:`${t.chainId}/address:${t.address}`:ft(t.chainId)};l();h();l();h();var BB=v.string().refine(t=>{let e=t.split("/");if(e.length<2)return!1;let r=e[0],i=e[1].split(":");if(i.length<2)return!1;let o=i[0],s=i[1];return typeof t=="string"&&K.isNetworkID(r)&&o.match(/^[-a-z0-9]{2,8}/)&&s.match(/^[-a-zA-Z0-9]{1,64}/)},{message:"Value is not a valid BRI string."});l();h();function CB(t){return!t||t.resourceType!=="address"?!1:!!K.isEVMNetworkID(t.chainId)}l();h();l();h();function Fb(t,e){return K.isBitcoinNetworkID(e)?hd.safeParse(t).success:K.isEVMNetworkID(e)?Ss.safeParse(t).success:K.isSolanaNetworkID(e)?pu.safeParse(t).success:K.isSuiNetworkID(e)?yu.safeParse(t).success:ft(e)}l();h();var Hb=t=>{let e=K.getNetworkIDs(t),r=K.getMainnetNetworkID(e[0]),n=K[t].slip44;return{chainId:r,resourceType:"nativeToken",slip44:n}};l();h();l();h();l();h();function DB(t){return j0.safeParse(t).success}function NB(t){return Y0.safeParse(t).success}function OB(t){return G0.safeParse(t).success}var UB=v.object({networkID:ms,addressType:v.nativeEnum(Te),address:v.string()}),dte=t=>`${t.networkID}-${t.address}`,RB={toKey:dte},LB=t=>{let e={chainId:t.networkID,address:t.address,resourceType:"address"};return K.isEVMNetworkID(t.networkID)&&(e.address=e.address.toLowerCase()),e};l();h();function MB(t){return[Xe.Solana.Devnet,Xe.Solana.Testnet,Xe.Solana.Mainnet].map(r=>parseInt(r.replace("solana:",""))).includes(parseInt(t,16))?`solana:${parseInt(t,16)}`:`eip155:${parseInt(t,16)}`}l();h();var FB=v.object({id:ms,name:v.string(),symbol:v.string(),imageUrl:v.string()});function HB(t){let{name:e,tokenSymbol:r,iconUrl:n}=K.getChainDefinition(t);return{id:t,name:e,symbol:r,imageUrl:n}}l();h();function KB(t){switch(t){case"devnet":return Xe.Solana.Devnet;case"mainnet":return Xe.Solana.Mainnet;case"testnet":return Xe.Solana.Testnet;case"localnet":return Xe.Solana.Localnet}}function VB(t){switch(t){case"mainnet":return"mainnet-beta";case"localnet":return"localhost";default:return t}}l();h();var pd=(t,e)=>{if(K.isBitcoinNetworkID(t)){switch(!0){case(e.startsWith("bc1p")||e.startsWith("bcrt1p")||e.startsWith("tb1p")):return"bip122_p2tr";case(e.startsWith("bc1q")||e.startsWith("tb1q")):return"bip122_p2wpkh";case(e.startsWith("3")||e.startsWith("2")):return"bip122_p2sh";case(e.startsWith("1")||e.startsWith("m")):return"bip122_p2pkh"}throw new Error(`Unable to get address type from invalid Bitcoin address: ${e}`)}else return K.isEVMNetworkID(t)?"eip155":K.isSolanaNetworkID(t)?"solana":K.isSuiNetworkID(t)?"sui":ft(t)};l();h();var lte=K.getAllNetworkIDs().filter(t=>K.isEVMNetworkID(t)),qB=t=>lte.find(e=>K.getNetworkDefinition(e).value===t);l();h();var zB=t=>K.getAllNetworkIDs({evmOnly:!0}).filter(e=>{if(t){if(t==="mainnets_only")return K.isMainnetNetworkID(e);if(t==="testnets_only")return!K.isMainnetNetworkID(e)}else return!0}).map(hte),hte=t=>`0x${K.getNetworkDefinition(t).value.toString(16)}`;l();h();var gte={[Xe.Monad.Mainnet]:1,[Xe.Monad.Devnet]:1,[Xe.Monad.Testnet]:1,[Xe.Ethereum.Mainnet]:6,[Xe.Ethereum.Sepolia]:6,[Xe.Polygon.Mainnet]:128,[Xe.Polygon.Amoy]:128,[Xe.Base.Mainnet]:3,[Xe.Base.Sepolia]:3,[Xe.Arbitrum.Mainnet]:1,[Xe.Arbitrum.Sepolia]:1},bte={[Xe.Bitcoin.Mainnet]:1,[Xe.Bitcoin.Testnet]:1};var xte="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb",wte=100;l();h();l();h();function Ate(t,e){return e.getSupportedChains().includes(t)}function jB(t,e){if(Rb(t))return e.get(t);if(K.isNetworkID(t)){let r=K.getChainID(t);if(Ate(r,e))return e.get(r)}throw new Error("Invalid input type for chain config get method")}function y3(t){return{get:e=>jB(e,t),supportedChains:t.getSupportedChains()}}l();h();var Q0=class{chainConfigMap=new Map;constructor(e){Object.entries(e).forEach(([r,n])=>{this.register(r,n)})}register(e,r){this.chainConfigMap.set(e,r)}getSupportedChains(){return Array.from(this.chainConfigMap.keys())}get(e){let r=this.chainConfigMap.get(e);if(!r)throw new Error(`No chain config found for chain: ${e}`);return r}};l();h();var WB=".phantom-labs.internal.enabledChainsOverrideSettings",GB=async t=>{try{return(await t.get(WB))?.settings}catch{return null}},$B=async(t,e,r)=>{let n=await GB(r);return r.set(WB,{version:1,settings:{...n!=null&&n,[t]:e}})},YB=async t=>{let e=[],r;try{r=await GB(t),r&&Object.entries(r).forEach(([i,o])=>{o||e.push(i)})}catch{}try{let i=await t.get(Ste);!i||i.version===1||i.chains.forEach(o=>{r&&r[o]||e.push(o)})}catch{}let n=await un.isFeatureEnabledAsync("enable-sui-default-on");try{K.getAllChainIDs().forEach(i=>{r&&r[i]||K.isChainDefaultEnabled(i,n)||e.push(i)})}catch{}return[...new Set(e)]},QB=async(t,e)=>$B(t,!1,e),m3=async(t,e)=>$B(t,!0,e),yd=".phantom-labs.internal.disabledAddressTypes",XB=async t=>{let e;try{e=await t.get(yd)!==null}catch{e=!1}return e},ZB=async t=>{let e;try{e=(await t.get(yd))?.addressTypes??[]}catch{e=[]}return[...new Set([...e,"bip122_p2sh","bip122_p2pkh"])]},JB=async(t,e)=>{let r=await e.get(yd),n=new Set(r?.addressTypes??[]);return n.delete(t),e.set(yd,{version:1,addressTypes:Array.from(n)})},eC=async(t,e)=>{let r=await e.get(yd),n=new Set(r?.addressTypes??[]);return n.add(t),e.set(yd,{version:1,addressTypes:Array.from(n)})},Ste=".phantom-labs.internal.disabledChains";l();h();var tC=!1,g3=async(t,e,r)=>{e=e??await un.isFeatureEnabledAsync("enable-monad"),r=r??await un.isFeatureEnabledAsync("enable-arbitrum"),tC||(ne.addBreadcrumb("network",`Fetched chain availability where ${JSON.stringify({isMonadFeatureEnabled:e})}`,"info"),tC=!0);let n=K.getAllChainIDs().filter(S=>(S!=="monad"||e)&&(S!=="arbitrum"||r)),i=await YB(t),o=new Set(i),s=n.filter(S=>!o.has(S)),a=S=>{let T=K.getChainID(S);return s.includes(T)},c=K.getAllNetworkIDs({mainnetOnly:!1}).filter(a),u=K.getAllNetworkIDs({mainnetOnly:!0}).filter(a),d=new Set(i.flatMap(S=>K.getNetworkIDs(S))),f=c.filter(S=>!d.has(S)),p=u.filter(S=>!d.has(S)),m=Ui.getAll(),g=await ZB(t),x=new Set(g);for(let S of m){let T=K.getChainIDs(S);if(!T){x.add(S);continue}T.every(_=>o.has(_))&&x.add(S)}let w=m.filter(S=>!x.has(S));return{supportedChainIDs:n,supportedAddressTypes:m,disabledChainIDs:i,enabledChainIDs:s,enabledAddressTypes:w,enabledNetworkIDs:f,enabledMainnetOnlyNetworkIDs:p}};l();h();l();h();var Kb="@phantom/chains",Vb={enabledChains:[`${Kb}:enabled-chains`],enabledAddressTypes:[`${Kb}:enabled-address-types`],enabledNetworkIDs(t){return[`${Kb}:enabled-network-ids`,{mainnetOnly:t}]},chainAvailability(t){return[`${Kb}:chain-availability`,t]}};var rC=[],b3=t=>{rC.push(t)},gs=async t=>{let e=un.isFeatureEnabled("enable-monad"),r=un.isFeatureEnabled("enable-arbitrum");await t.invalidateQueries({queryKey:Vb.chainAvailability({isMonadEnabled:e,isArbitrumEnabled:r})}),await Promise.all(rC.map(n=>n(t)))};l();h();l();h();var x3=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(x3||{}),vte=v.object({type:v.nativeEnum(x3),imageUrl:v.string().optional(),unicode:v.string().optional()}),w3=(e=>(e.Ledger="ledger",e))(w3||{}),A3=(e=>(e.BLE="ble",e))(A3||{}),Ete=v.object({version:v.literal(1),connectionType:v.nativeEnum(A3),deviceType:v.nativeEnum(w3),id:v.string().min(1),name:v.string().optional(),model:v.string().optional()}),Ite=v.object({value:v.number(),timestamp:v.number()}),s5e=v.object({name:v.string(),icon:vte.optional(),connectedDevices:Ete.array().optional(),balance:Ite.optional()});var p5e=100,y5e={unicode:void 0,imageUrl:void 0,type:"default"},nC={version:1,isDeveloperMode:!1};var S3=Xe.Solana.Devnet,v3=Xe.Ethereum.Sepolia,kte=Xe.Sui.Testnet;function X0(t){return{version:1,setting:{solana:S3,eip155:v3,...t?{sui:kte}:{}}}}function m5e(t){return t.map(e=>Ui[e].defaultDerivationPathType)}var g5e={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null,bip44Sui:null},b5e={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2,bip44Sui:0},x5e="https://help.phantom.com/hc/en-us/articles/4406563212819";var w5e="https://help.phantom.com/hc/en-us/articles/21872962238355";l();h();var md=j(Nt()),iC=(0,md.createContext)(null);function Tte({children:t,analytics:e}){return md.default.createElement(iC.Provider,{value:e},t)}function qr(){let t=(0,md.useContext)(iC);if(!t)throw new Error("useAnalytics must be used within a AnalyticsProvider");return t}l();h();l();h();var gd=j(Nt()),oC=(0,gd.createContext)(null);function _te({children:t,userRepository:e,claimUsernameSigner:r}){return gd.default.createElement(oC.Provider,{value:{userRepository:e,claimUsernameSigner:r}},t)}function sC(){let t=(0,gd.useContext)(oC);if(!t)throw new Error("useUserContext must be used within a UserProvider");return t}function at(){return sC().userRepository}function aC(){return sC().claimUsernameSigner}l();h();l();h();l();h();var bd=(t,e)=>e?`/user/v1/users/${t}/wallet-accounts/${e}`:`/user/v1/users/${t}/wallet-accounts`,Z0=t=>`/user/v1/users/${t}/profile`,qb=t=>`/user/v1/profiles/${t}`,cC=()=>"/user/v1/profiles/creation-check",uC=t=>`/v1/actors-search?query=${encodeURIComponent(t)}`,fC=["seed","seedless","privateKey"];var E3=10,dC=500,J0={seedless:1,seed:2,privateKey:3};l();h();l();h();var eh="@phantom/users",fr={checkUsernameAvailability(t){return["user",`${eh}:check-username-availability`,{username:t}]},userProfile(){return["user",`${eh}:user-profile`]},userProfileAttributeEffect(t){return["user",`${eh}:user-profile-attribute-effect`,{username:t}]},userSyncedAccounts(){return["user",`${eh}:user-synced-accounts`]}};var I3=async t=>{await t.removeQueries({queryKey:fr.userProfile()})},k3=async t=>{await t.resetQueries({queryKey:fr.userProfile()})},au=async t=>{await t.invalidateQueries({queryKey:fr.userProfile()})},T3=async t=>{await t.removeQueries({queryKey:fr.userSyncedAccounts()})};var Qi=async t=>{await t.invalidateQueries({queryKey:fr.userSyncedAccounts()})};l();h();l();h();var xd=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(xd||{}),Pte=Object.values(xd),pC=v.string().brand("ProfileId"),zb=v.object({id:pC,username:v.string(),icon:v.string().nullish(),addresses:v.record(v.string(),v.string()),privacyState:v.nativeEnum(xd).optional().default("public"),biography:v.string().nullish(),phantomJoinDate:v.string().nullish()}),_3=v.string().url().brand("ActorId"),Bte=v.object({id:v.string().optional(),orderedItems:_3.array(),next:v.string().optional()}),lC=v.object({id:v.string().url(),current:Bte.optional(),totalItems:v.number().optional()}),hC=v.object({type:v.string(),value:v.string().optional(),name:v.string().optional()}),Cte=v.object({id:v.string().url().optional(),name:v.string().optional(),type:v.string()}),yC=v.object({id:_3,name:v.string(),preferredUsername:v.string(),manuallyApprovesFollowers:v.boolean(),followers:v.union([lC,v.string().url()]),following:v.union([lC,v.string().url()]),icon:Cte.nullish(),attachment:v.union([hC,v.array(hC)]).optional(),summary:v.string().nullish(),published:v.string().nullish()}).transform(t=>{let{attachment:e,...r}=t,n={},i=!1,o=!1,s=!1,a=!1,c=!1;if(e){let u=Array.isArray(e)?e:[e];for(let d of u)if(!(!d.name||!d.value)){if(d.name.endsWith(":address")){let f=ms.safeParse(d.name.replace(":address",""));if(f.success){let p=f.data;n[p]=d.value}}d.name==="requesting"&&(i=d.value==="true"),d.name==="requestedBy"&&(o=d.value==="true"),d.name==="blocking"&&(s=d.value==="true"),d.name==="following"&&(a=d.value==="true"),d.name==="followedBy"&&(c=d.value==="true")}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:o,isBlocking:s,isFollowing:a,isFollowedBy:c}}),mC=v.object({actors:yC.array()}),th={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},G5e=v.object({type:v.nativeEnum(th),imageUrl:v.string().optional(),unicode:v.string().optional()}),P3=v.object({error:v.object({message:v.string()})});var B3=async t=>{let e=await cn.api().get(qb(t)),r=zb.safeParse(e.data);return r.success?r.data:null};l();h();var gC=v.string().regex(/^https?:\/\/.+$/),bC=v.string(),jb=v.literal("privateKey"),Dte=v.object({networkId:ec,publicKey:rc,address:CE,pathType:jl.or(jb)}),Nte=v.object({networkId:Ja,publicKey:rc,address:Ss,pathType:zl.or(jb)}),Ote=v.object({networkId:Za,publicKey:rc,address:v.string(),pathType:ql.or(jb)}),Ute=v.object({networkId:ld,publicKey:rc,address:v.string(),pathType:Uw.or(jb)}),Rte=v.union([Dte,Nte,Ote,Ute]),xC=v.object({accountHash:v.string(),accountOrigin:v.string().regex(/^(seed|privateKey|seedless):(.+)/).catch("readOnly"),name:v.string().nullish().default(null).catch(null),icon:v.union([gC,bC]).nullish().default(null).catch(null),derivationIndex:v.number().nullish().default(null).catch(null),addresses:v.array(Rte).min(1)}),Lte=xC.and(v.object({id:v.string()})),Wb=v.object({walletAccounts:v.array(Lte)}),ake=v.record(v.string(),xC);l();h();var C3=t=>{for(let e of fC)if(t.accountOrigin?.split(":")[0]===e)return e;return null},D3=t=>t.accountOrigin?.replace("seed:","")?.replace("privateKey:","")?.replace("seedless:",""),wC=(t=[])=>t.sort((e,r)=>{let n=C3(e),i=C3(r);if(n===null&&i===null)return 0;if(n===null)return 1;if(i===null)return-1;if(J0[n]-J0[i]!==0)return J0[n]-J0[i];let o=D3(e),s=D3(r);if(o===null&&s===null)return 0;if(o===null)return 1;if(s===null)return-1;let a=o.localeCompare(s);return a!==0?a:e.derivationIndex===null&&r.derivationIndex===null?0:e.derivationIndex===null?1:r.derivationIndex===null?-1:e.derivationIndex-r.derivationIndex});var Mte=t=>({getUsernameAvailability:e=>Fte(e),getUserProfile:()=>Hte(t),getUserProfileByUsername:e=>B3(e),getUserProfileByUsernameOrUserProfileId:e=>B3(e),searchForActor:(e,r,n)=>Qte(e,r,n),setUserProfile:({username:e,addresses:r,icon:n,signedMessages:i,privacyState:o})=>Kte(t,{username:e,addresses:r,signedMessages:i,icon:n,privacyState:o}),patchUserProfile:e=>Vte(t,e),deleteUserProfile:()=>qte(t),isEligibleToClaim:e=>zte(e),getSyncedAccounts:()=>N3(t),downloadSyncedAccounts:()=>jte(t),uploadSyncedAccounts:e=>Wte(t,e),uploadSyncedAccount:e=>Gte(t,e),deleteSyncedAccounts:()=>$te(t),deleteSyncedAccount:e=>Yte(t,e)}),Fte=async t=>{switch((await cn.api().get(qb(t))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},Hte=async({authRepository:t})=>{let e=await t.getUser();if(!e)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=e,i=await cn.api().bearer(n).get(Z0(r)),o=zb.safeParse(i.data);return o.success?o.data:null},Kte=async({authRepository:t},{username:e,addresses:r,icon:n,signedMessages:i,privacyState:o})=>{let s=await t.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await cn.api().bearer(c).post(Z0(a),{username:e,signedMessages:i,icon:n,addresses:r,privacyState:o});if(u.status===201)return;let d=P3.safeParse(u.data);throw d.success?new Error(d.data.error.message):new Error("Unknown error")},Vte=async({authRepository:t},{username:e,addresses:r,icon:n,privacyState:i,biography:o})=>{let s=await t.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await cn.api().bearer(c).patch(Z0(a),{username:e,addresses:r,icon:n,privacyState:i,biography:o});if(u.status===200)return;ne.captureMessage(`Failed to patch user profile: ${u.status} ${JSON.stringify(u.data)}`,"Auth");let d=P3.safeParse(u.data);throw d.success?new Error(d.data.error.message):new Error("Unknown error")},qte=async({authRepository:t})=>{let e=await t.getUser();if(!e)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=e,i=await cn.api().bearer(n).delete(Z0(r));return 200<=i.status&&i.status<300},zte=async t=>{try{return(await cn.api().post(cC(),{addresses:t})).status===200}catch{return!1}},N3=async({authRepository:t})=>{let e=await t.getUser();if(!e)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=e,i=await cn.api().bearer(n).get(bd(r)),o=Wb.safeParse(i.data);if(!o.success)throw new Error("Unable to get synced accounts: unable to parse GET /wallet-accounts response.");return{walletAccounts:wC(o.data.walletAccounts)}},jte=async t=>{let{walletAccounts:e}=await N3(t),r=e.reduce((n,i)=>(n[i.accountHash]=i,n),{});return await t.claimUsernameSigner.storeSyncedAccounts(r),!0},AC=(t,e,r)=>cn.api().bearer(t).post(bd(e),r),Wte=async(t,e)=>{let{authRepository:r,claimUsernameSigner:n,queryClient:i}=t,o=await r.getUser();if(!o)return ne.addBreadcrumb("Auth","User is not logged in, unable to sync up accounts.","info"),!1;try{let s=e;s||(ne.addBreadcrumb("Auth","Uploading all currently synced accounts...","info"),s=[...(await N3(t)).walletAccounts.reduce((m,g)=>(m.add(g.accountHash),m),new Set)]);let a=await n.getBatchAccountMetadata(s),{userID:c,accessToken:u}=o,d=Sx(Object.values(a),E3);for(let f of d)await Promise.all(f.map(p=>AC(u,c,p))),await NE(dC);return await Qi(i),ne.addBreadcrumb("Auth",`\u2705 Uploaded synced accounts: ${e?e?.join(" "):"all currently synced accounts"}`,"info"),!0}catch(s){throw ne.addBreadcrumb("Auth",`Unable to sync up accounts: ${e?e?.join(" "):"all currently synced accounts"}`,"info"),ne.captureError(s,"Auth"),s}},Gte=async({authRepository:t,claimUsernameSigner:e,queryClient:r},n)=>{let i=await t.getUser();if(!i)return ne.addBreadcrumb("Auth",`User is not logged in, unable to sync up account: ${n}`,"info"),!1;try{ne.addBreadcrumb("Auth",`Syncing account... : ${n}`,"info");let o=await e.getAccountMetadata(n),{userID:s,accessToken:a}=i;return await AC(a,s,o),await Qi(r),ne.addBreadcrumb("Auth",`\u2705 Synced account: ${n}`,"info"),!0}catch(o){throw ne.addBreadcrumb("Auth",`Unable to sync up account: ${n}`,"info"),ne.captureError(o,"Auth"),o}},SC=(t,e,r)=>cn.api().bearer(t).delete(bd(e,r.id),r),$te=async({authRepository:t})=>{let e=await t.getUser();if(!e)throw new Error("User is not logged in, unable to delete all synced accounts.");let{userID:r,accessToken:n}=e,i=await cn.api().bearer(n).get(bd(r)),o=Wb.safeParse(i.data);if(!o.success)throw new Error("Unable to delete all synced accounts => unable to parse GET /wallet-accounts response.");let s=Sx(o.data.walletAccounts,E3);for(let a of s)await Promise.all(a.map(c=>SC(n,r,c)));return!0},Yte=async({authRepository:t},e)=>{let r=await t.getUser();if(!r)throw new Error(`User is not logged in, unable to remove synced account: ${e}`);let{userID:n,accessToken:i}=r,o=await cn.api().bearer(i).get(bd(n)),s=Wb.safeParse(o.data);if(!s.success)throw new Error(`Unable to delete synced account [${e}] => unable to parse GET /wallet-accounts response`);let a=s.data.walletAccounts.find(c=>c.accountHash===e);if(!a)return ne.addBreadcrumb("Auth",`Calling deleteSyncedAccount on account that is not synced to begin with: ${e}`,"info"),!1;try{await SC(i,n,a)}catch(c){throw ne.addBreadcrumb("Auth",`Unable to delete synced account: ${e}`,"info"),ne.captureError(c,"Auth"),c}return!0},Qte=async(t,e,r)=>{ne.addBreadcrumb("network","User is searching for actors.","info",{query:t});let n=await cn.api().bearer(e).get(uC(t)),i=mC.safeParse(n.data);return i.success?{actors:i.data.actors}:{actors:[]}};l();h();var Xte=new Set([fr.userProfile()[1],fr.userSyncedAccounts()[1]]),Zte=t=>{let e=t.queryKey[1];return typeof e!="string"||!e?!1:Xte.has(e)};l();h();l();h();var rh=gu(qr,t=>new Gb(t)),Gb=class{#e;constructor(e){this.#e=e}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(e,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:e,isAvailable:r}})}onAvatarSaved(e){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:e}})}onAnonymousAuthSaved(e,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:e,numAuthFactorsShown:r}})}onLinkWalletsSaved(e,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:e,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(e,r){this.#e.capture("userUsernameClaimComplete",{data:{username:e,authUserID:r}})}};function Jte(){let t=rh(),e=bu(),r=at(),n=aC(),i=Se(),o=async({username:s,addresses:a,icon:c,secretIdentifiers:u,accountIdentifiers:d})=>{if(ne.addBreadcrumb("Auth",`Claiming Username: ${s}.`,"info"),u.length===0)throw new Error("Unable to log in to claim a username. Select a secret identifier to use as an auth factor.");ne.addBreadcrumb("Auth","Logging in with first auth factor","info");let f=await e.logIn({type:"key",secretIdentifier:u[0]});for(let m of u.slice(1))ne.addBreadcrumb("Auth","Adding additional auth factor","info"),await e.addAuthFactor({secretIdentifier:m});ne.addBreadcrumb("Auth","Signing over messages","info");let p=await n.signMessages(s);ne.addBreadcrumb("Auth","Creating user profile to claim username","info"),await r.setUserProfile({username:s,addresses:a,icon:c,signedMessages:p,privacyState:"public"}),ne.addBreadcrumb("Auth","Uploading Synced Accounts","info"),await r.uploadSyncedAccounts(d),ne.addBreadcrumb("Auth","\u2705 Username Claimed!","info"),await LE(i),await k3(i),await mh(i),await au(i),await gh(i),t.onClaimFlowComplete(s,f.userID)};return ve({mutationFn:async s=>{try{return await o(s)}catch(a){ne.addBreadcrumb("Auth","Could not claim username","error");let c;throw a instanceof Error?c=a:c=new Error("Unable to claim username"),ne.captureError(c,"Auth"),c}}})}l();h();function ere(t){let e=rh(),r=at(),n=fr.checkUsernameAvailability(t);return Je({enabled:!!t,queryKey:n,queryFn:async()=>{if(!t)return!1;let s=await r.getUsernameAvailability(t);return e.onCheckAvailability(t,s),s}})}l();h();l();h();var nh=class extends Error{constructor(e="No user profile."){super(e),this.name="NoUserProfileError"}};var tre=mu({days:1}),rre=mu({minutes:1});function Xi(){let t=at(),e=xu(),r=fr.userProfile();return Je({enabled:e,queryKey:r,queryFn:async()=>{let i=await t.getUserProfile();if(!i)throw new nh;return i},gcTime:tre,staleTime:rre})}l();h();var nre=mu({days:1}),ire=mu({minutes:1}),vC=t=>{let e=at(),r=xu();return Je({enabled:r,queryKey:fr.userSyncedAccounts(),queryFn:async()=>(await e.getSyncedAccounts()).walletAccounts,gcTime:nre,staleTime:ire,select:t})};l();h();var ore=()=>{let t=Se(),e=bu(),r=at();return ve({mutationFn:async()=>{await r.deleteSyncedAccounts(),await r.deleteUserProfile(),await e.deleteAllAuthFactors(),await e.logOut(),await T3(t),await I3(t),await RE(t),await Qi(t),await au(t),await mh(t),await gh(t)}})};l();h();var O3=()=>{let t=Se(),e=at(),r=async n=>{await e.patchUserProfile(n),await au(t)};return ve({mutationFn:async n=>{try{return await r(n)}catch(i){ne.addBreadcrumb("Auth",`Could not update user profile: ${JSON.stringify(n)}`,"error");let o;throw i instanceof Error?o=i:o=new Error("Could not update user profile!"),ne.captureError(o,"Auth"),o}},onMutate:async n=>{let i=fr.userProfile();await t.cancelQueries({queryKey:i});let o=t.getQueryData(i);return t.setQueryData(i,{...o,...n}),{previousData:o}},onError:(n,i,o)=>{o&&t.setQueryData(fr.userProfile(),o.previousData)}})};l();h();l();h();var sre=()=>{let t=Se(),e=at(),r=async n=>{Array.isArray(n)?await e.uploadSyncedAccounts(n):await e.uploadSyncedAccount(n),await Qi(t)};return ve({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;ne.addBreadcrumb("Auth",`Could not add synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not add synced account!"),ne.captureError(s,"Auth"),s}}})};l();h();var are=()=>{let t=Se(),e=at(),r=async n=>{Array.isArray(n)?await Promise.all(n.map(i=>e.deleteSyncedAccount(i))):await e.deleteSyncedAccount(n),await Qi(t)};return ve({mutationFn:async n=>{try{return await r(n)}catch(i){let o=Array.isArray(n)?n.join(" "):n;ne.addBreadcrumb("Auth",`Could not remove synced account: ${o}`,"error");let s;throw i instanceof Error?s=i:s=new Error("Could not remove synced account!"),ne.captureError(s,"Auth"),s}}})};l();h();var cre=gu(qr,t=>new $b(t)),$b=class{#e;constructor(e){this.#e=e}onAvatarUpdated(e){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:e}})}onAuthFactorsUpdated(e,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:e,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(e,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:e,numWalletsShown:r}})}onPrivacyStateUpdated(e){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:e}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(e){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:e}})}};l();h();l();h();var Yb=j(Nt());l();h();var Zi=()=>{let t=xe(),{data:[e,r],isLoading:n}=eo(["enable-monad","enable-arbitrum"]);return Je({enabled:!n,queryKey:Vb.chainAvailability({isMonadEnabled:e,isArbitrumEnabled:r}),queryFn:()=>g3(t,e,r)})};l();h();var U3=()=>{let t=Se(),e=xe();return ve({mutationFn:async({addressTypes:n})=>{for(let i of n)await eC(i,e);gs(t)}})};l();h();var ure=()=>{let t=xe(),e=Se();return ve({mutationFn:async({chainIDs:n})=>{for(let i of n)await QB(i,t);gs(e)}})};l();h();l();h();l();h();var wd=j(Nt()),EC=(0,wd.createContext)(null);function fre({children:t,vault:e}){return wd.default.createElement(EC.Provider,{value:e},t)}function xt(){let t=(0,wd.useContext)(EC);if(!t)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return t}var R3=()=>{let t=Se(),e=xe(),r=xt();return ve({mutationFn:async({addressTypes:i})=>{for(let o of i)await JB(o,e);await r.deriveAddresses(),await gs(t)}})};l();h();var dre=()=>{let t=xe(),e=Se(),r=xt();return ve({mutationFn:async({chainIDs:i})=>{for(let o of i)await m3(o,t);await r.deriveAddresses(),await gs(e)}})};l();h();var lre=()=>{let t=xe(),{mutateAsync:e}=U3(),{mutateAsync:r}=R3();return ve({mutationFn:async({addressTypes:i})=>{if(await XB(t))await r({addressTypes:i});else{let s=new Set(K.bitcoin.addressTypes);for(let a of i)s.delete(a);if(s.size===K.bitcoin.addressTypes.length&&s.delete("bip122_p2wpkh"),s.size>0){let a=Array.from(s);await e({addressTypes:a})}}}})};var L3=K.getAllChainIDs().filter(t=>K.isChainDefaultEnabled(t,!1)),IC=L3.map(t=>K.getMainnetNetworkID(t)),hre=IC.flatMap(t=>K.getAddressTypes(t)),kC=()=>Zi().data?.enabledAddressTypes??hre,Ad=()=>Zi().data?.enabledChainIDs??L3,$Pe=()=>Zi().data?.supportedChainIDs??L3,YPe=t=>{let e=Zi().data;return e?t?e.enabledNetworkIDs:e.enabledMainnetOnlyNetworkIDs:IC},QPe=()=>Ad().length===1,XPe=()=>{let t=Ad();return(0,Yb.useMemo)(()=>K.getChainIDs("eip155").some(e=>t.includes(e)),[t])},ZPe=()=>{let t=Ad();return(0,Yb.useMemo)(()=>t.length===1&&t.includes("solana"),[t])},JPe=t=>{let e=Ad();return(0,Yb.useMemo)(()=>t.map(r=>e.includes(r)),[e,t])};l();h();l();h();l();h();l();h();l();h();function zr(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(b.NODE_ENV!=="production"){var i=Are[t],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+t;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Sd(t){return!!t&&!!t[Jn]}function uu(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var r=Object.getPrototypeOf(e);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Sre}(t)||Array.isArray(t)||!!t[OC]||!!t.constructor[OC]||G3(t)||$3(t))}function oh(t,e,r){r===void 0&&(r=!1),Ed(t)===0?(r?Object.keys:J3)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Ed(t){var e=t[Jn];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:G3(t)?2:$3(t)?3:0}function V3(t,e){return Ed(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pre(t,e){return Ed(t)===2?t.get(e):t[e]}function UC(t,e,r){var n=Ed(t);n===2?t.set(e,r):n===3?(t.delete(e),t.add(r)):t[e]=r}function yre(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function G3(t){return xre&&t instanceof Map}function $3(t){return wre&&t instanceof Set}function cu(t){return t.o||t.t}function Y3(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=vre(t);delete e[Jn];for(var r=J3(e),n=0;n<r.length;n++){var i=r[n],o=e[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Q3(t,e){return e===void 0&&(e=!1),X3(t)||Sd(t)||!uu(t)||(Ed(t)>1&&(t.set=t.add=t.clear=t.delete=mre),Object.freeze(t),e&&oh(t,function(r,n){return Q3(n,!0)},!0)),t}function mre(){zr(2)}function X3(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Do(t){var e=Ere[t];return e||zr(18,t),e}function TC(){return b.NODE_ENV==="production"||vd||zr(0),vd}function M3(t,e){e&&(Do("Patches"),t.u=[],t.s=[],t.v=e)}function Qb(t){q3(t),t.p.forEach(gre),t.p=null}function q3(t){t===vd&&(vd=t.l)}function _C(t){return vd={p:[],l:vd,h:t,m:!0,_:0}}function gre(t){var e=t[Jn];e.i===0||e.i===1?e.j():e.O=!0}function F3(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||Do("ES5").S(e,t,n),n?(r[Jn].P&&(Qb(e),zr(4)),uu(t)&&(t=Xb(e,t),e.l||Zb(e,t)),e.u&&Do("Patches").M(r[Jn].t,t,e.u,e.s)):t=Xb(e,r,[]),Qb(e),e.u&&e.v(e.u,e.s),t!==RC?t:void 0}function Xb(t,e,r){if(X3(e))return e;var n=e[Jn];if(!n)return oh(e,function(o,s){return PC(t,n,e,o,s,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Zb(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Y3(n.k):n.o;oh(n.i===3?new Set(i):i,function(o,s){return PC(t,n,i,o,s,r)}),Zb(t,i,!1),r&&t.u&&Do("Patches").R(n,r,t.u,t.s)}return n.o}function PC(t,e,r,n,i,o){if(b.NODE_ENV!=="production"&&i===r&&zr(5),Sd(i)){var s=Xb(t,i,o&&e&&e.i!==3&&!V3(e.D,n)?o.concat(n):void 0);if(UC(r,n,s),!Sd(s))return;t.m=!1}if(uu(i)&&!X3(i)){if(!t.h.F&&t._<1)return;Xb(t,i),e&&e.A.l||Zb(t,i)}}function Zb(t,e,r){r===void 0&&(r=!1),t.h.F&&t.m&&Q3(e,r)}function H3(t,e){var r=t[Jn];return(r?cu(r):t)[e]}function BC(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function z3(t){t.P||(t.P=!0,t.l&&z3(t.l))}function K3(t){t.o||(t.o=Y3(t.t))}function j3(t,e,r){var n=G3(e)?Do("MapSet").N(e,r):$3(e)?Do("MapSet").T(e,r):t.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:TC(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=W3;s&&(c=[a],u=ih);var d=Proxy.revocable(c,u),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,r):Do("ES5").J(e,r);return(r?r.A:TC()).p.push(n),n}function bre(t){return Sd(t)||zr(22,t),function e(r){if(!uu(r))return r;var n,i=r[Jn],o=Ed(r);if(i){if(!i.P&&(i.i<4||!Do("ES5").K(i)))return i.t;i.I=!0,n=CC(r,o),i.I=!1}else n=CC(r,o);return oh(n,function(s,a){i&&pre(i.t,s)===a||UC(n,s,e(a))}),o===3?new Set(n):n}(t)}function CC(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Y3(t)}var DC,vd,Z3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xre=typeof Map<"u",wre=typeof Set<"u",NC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RC=Z3?Symbol.for("immer-nothing"):((DC={})["immer-nothing"]=!0,DC),OC=Z3?Symbol.for("immer-draftable"):"__$immer_draftable",Jn=Z3?Symbol.for("immer-state"):"__$immer_state";var Are={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Sre=""+Object.prototype.constructor,J3=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,vre=Object.getOwnPropertyDescriptors||function(t){var e={};return J3(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Ere={},W3={get:function(t,e){if(e===Jn)return t;var r=cu(t);if(!V3(r,e))return function(i,o,s){var a,c=BC(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!uu(n)?n:n===H3(t.t,e)?(K3(t),t.o[e]=j3(t.A.h,n,t)):n},has:function(t,e){return e in cu(t)},ownKeys:function(t){return Reflect.ownKeys(cu(t))},set:function(t,e,r){var n=BC(cu(t),e);if(n?.set)return n.set.call(t.k,r),!0;if(!t.P){var i=H3(cu(t),e),o=i?.[Jn];if(o&&o.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(yre(r,i)&&(r!==void 0||V3(t.t,e)))return!0;K3(t),z3(t)}return t.o[e]===r&&typeof r!="number"&&(r!==void 0||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return H3(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,K3(t),z3(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=cu(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){zr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){zr(12)}},ih={};oh(W3,function(t,e){ih[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ih.deleteProperty=function(t,e){return b.NODE_ENV!=="production"&&isNaN(parseInt(e))&&zr(13),ih.set.call(this,t,e,void 0)},ih.set=function(t,e,r){return b.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&zr(14),W3.set.call(this,t[0],e,r,t[0])};var Ire=function(){function t(r){var n=this;this.g=NC,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(x){var w=this;x===void 0&&(x=a);for(var S=arguments.length,T=Array(S>1?S-1:0),A=1;A<S;A++)T[A-1]=arguments[A];return c.produce(x,function(_){var C;return(C=o).call.apply(C,[w,_].concat(T))})}}var u;if(typeof o!="function"&&zr(6),s!==void 0&&typeof s!="function"&&zr(7),uu(i)){var d=_C(n),f=j3(n,i,void 0),p=!0;try{u=o(f),p=!1}finally{p?Qb(d):q3(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(x){return M3(d,s),F3(x,d)},function(x){throw Qb(d),x}):(M3(d,s),F3(u,d))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===RC&&(u=void 0),n.F&&Q3(u,!0),s){var m=[],g=[];Do("Patches").M(i,u,m,g),s(m,g)}return u}zr(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return n.produceWithPatches(u,function(m){return i.apply(void 0,[m].concat(f))})};var s,a,c=n.produce(i,o,function(u,d){s=u,a=d});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){uu(r)||zr(8),Sd(r)&&(r=bre(r));var n=_C(this),i=j3(this,r,void 0);return i[Jn].C=!0,q3(n),i},e.finishDraft=function(r,n){var i=r&&r[Jn];b.NODE_ENV!=="production"&&(i&&i.C||zr(9),i.I&&zr(10));var o=i.A;return M3(o,n),F3(void 0,o)},e.setAutoFreeze=function(r){this.F=r},e.setUseProxies=function(r){r&&!NC&&zr(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Do("Patches").$;return Sd(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},t}(),ei=new Ire,eE=ei.produce,a7e=ei.produceWithPatches.bind(ei),c7e=ei.setAutoFreeze.bind(ei),u7e=ei.setUseProxies.bind(ei),f7e=ei.applyPatches.bind(ei),d7e=ei.createDraft.bind(ei),l7e=ei.finishDraft.bind(ei),h7e=eE;l();h();var g7e=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledgedLastSeenVersion"];var b7e=new Error("Failed to clear selected account index");async function LC(t){try{let e=await t.get(".phantom-labs.account.selectedAccount");return e?.version===2?e.identifier:null}catch{throw kre}}var kre=new Error("Failed to get selected account identifier");async function ti(t,e){try{let r={version:2,identifier:e};return await t.set(".phantom-labs.account.selectedAccount",r)}catch{throw Tre}}var Tre=new Error("Failed to set selected account identifier");var MC=new Error("Failed to add user account metadata to storage"),Jb=new Error("Could not find account metadata in storage");async function FC(t,e,r){let n=await t.get(".phantom-labs.account.accountMetadata");if(!n)throw Jb;let i=n.accounts[e];i?i.name=r:(i={name:r},n.accounts[e]=i),await t.set(".phantom-labs.account.accountMetadata",n)}async function HC(t,e,r){let n=await t.get(".phantom-labs.account.accountMetadata");if(!n)throw Jb;let i=n.accounts[e];i?i.icon=r:(i={icon:r,name:vs.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[e]=i),await t.set(".phantom-labs.account.accountMetadata",n)}async function KC(t,e,r){let n=await t.get(".phantom-labs.account.accountMetadata");if(!n)throw Jb;let i=n.accounts[e];i?i.balance=r:(i={balance:r,name:vs.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[e]=i),await t.set(".phantom-labs.account.accountMetadata",n)}async function du(t,e,r){try{let n=await t.get(".phantom-labs.account.accountMetadata");n?n.accounts[e]=r:n={version:1,accounts:{[e]:r}},await t.set(".phantom-labs.account.accountMetadata",n)}catch{throw MC}}async function VC(t,e){try{let r=await t.get(".phantom-labs.account.accountMetadata");r?r.accounts=eE(r.accounts,n=>{for(let[i,o]of Object.entries(e))n[i]||(n[i]={name:""}),n[i].name=o.name,n[i].icon=o.icon??n[i].icon,n[i].balance=o.balance??n[i].balance,n[i].connectedDevices=o.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...e}},await t.set(".phantom-labs.account.accountMetadata",r)}catch{throw MC}}async function ex(t,e){let r=await t.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[e];return n||(n={name:vs.t("onboardingImportAccountsAccountName",{walletIndex:""})}),n}async function tx(t){let e=await t.get(".phantom-labs.account.accountMetadata");return e?e.accounts:{}}async function rx(t,e){let r=await t.get(".phantom-labs.account.accountMetadata");if(!r)throw Jb;delete r.accounts[e],await t.set(".phantom-labs.account.accountMetadata",r)}var qC=async(t,e)=>(await ex(t,e))?.balance,zC=async t=>await tx(t);l();h();var sn="@phantom/accounts",tE=`${sn}:account-identifier`,rE=`${sn}:selected-account`,nx=`${sn}:all-accounts`,nE=`${sn}:all-seeds`,_re=`${sn}:all-secrets`,D7e=`${sn}:account-balance`,Be={accountBalance(t){return[`${sn}:account-balance`,{identifier:t}]},allAccountBalances(){return[`${sn}:all-account-balances`]},allAccounts(t){let e=t?{chainAvailability:{enabledChainIDs:t.enabledChainIDs,enabledAddressTypes:t.enabledAddressTypes}}:{};return[nx,{chainAvailabilityQueryObject:e}]},allSeeds(t){return[nE,t]},allSecretIdentifiers(){return[_re]},developerMode(){return[`${sn}:developer-mode`]},accountIdentifier(t){return[tE,{identifier:t}]},selectedAccount(t){let e=t?{chainAvailability:{enabledChainIDs:t.enabledChainIDs,enabledAddressTypes:t.enabledAddressTypes}}:{};return[rE,e]},selectedAccountIdentifier(){return[`${sn}:selected-account-identifier`]},selectedNetworkSetting(t){return[`${sn}:selected-network-setting`,{isSuiTestnetEnabled:t}]},trustedApps(){return[`${sn}:trusted-apps`]},migratedWithInvalidChecksum(){return[`${sn}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${sn}:sync-user-accounts`]},accountsEligibleToClaim(t,e,r){return[`${sn}:are-accounts-eligible-to-claim`,{username:t,selectedAccountIdentifier:e,solanaAddresses:r}]},patchProfileAddresses(t){return[`${sn}:patch-profile-addresses`,t]}};var Pre=(t,e=!0)=>{let r=xe(),n=e&&!!t,i=Be.accountBalance(t||"");return Je({queryKey:i,queryFn:async()=>{try{return t&&await qC(r,t)||null}catch(s){throw s instanceof Error&&ne.captureError(s,"account"),s}},enabled:n})},Bre=(t=!0)=>{let e=xe(),r=Be.allAccountBalances();return Je({queryKey:r,queryFn:async()=>{try{return await zC(e)}catch(i){throw i instanceof Error&&ne.captureError(i,"account"),i}},enabled:t})};l();h();l();h();var Id="Trying to find a selected account, but there no accounts in the vault.",ix="Missing ChainAvailability.",jC=(t,e)=>`No account found! Num accounts: ${t} | Identifier used: ${e}`,z7e=new Error("The current account group has no valid bitcoin address"),j7e=new Error("The current account group has no valid EIP-155 address"),W7e=new Error("The current account group has no valid solana address"),G7e=new Error("The current account group has no valid sui address"),$7e=new Error("The current account group has no valid address or the the chain type was unsupported"),Y7e=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),Q7e=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");l();h();l();h();l();h();var No=(s=>(s.Seed="seed",s.PrivateKey="privateKey",s.Ledger="ledger",s.SeedVault="seedVault",s.ReadOnly="readOnly",s.Seedless="seedless",s))(No||{}),r9e=v.object({derivationIndex:v.number(),addresses:v.array(v.object({pathType:v.union([zl,jl]),value:v.string()})),publicKeys:v.array(v.object({pathType:ql,value:v.string()}))}),WC=class extends Error{message="No account exists in storage for identifier"},GC=class extends Error{message="No account exists in storage for identifier"},$C=class extends Error{message="Address type not found or incompatible with account"},YC=class extends Error{message="Hardware wallet account does not have known secr*ts"},QC=class extends Error{message="Read only account does not have known secr*ts"},XC=class extends Error{message="Invalid configuration for read only account"},ZC=class extends Error{message="Seed already exists in storage"},JC=class extends Error{message="No seed exists in storage for identifier"},eD=class extends Error{message="The derivation index is missing or invalid"},tD=class extends Error{message="Private key already exists in storage"},rD=class extends Error{message="No private key exists in storage for identifier"};var nD=class extends Error{message;constructor(e,r){super(),this.message=`Account of type ${e} found in Vault, while trying to add ${r} account`}},iD=class extends Error{message="Vault already stores a seedless account"},Cre=v.union([v.literal("unonboarded"),v.literal("unable-to-load-accounts")]),Dre=v.union([v.literal("invalid-identifier"),v.literal("fetch-integrity-storage-error"),v.literal("fetch-entropy-storage-error"),v.literal("fetch-pk-storage-error"),v.literal("invalid-entropy"),v.literal("invalid-entropy-bip-39"),v.literal("invalid-checksum-bits"),v.literal("invalid-entropy-bits"),v.literal("invalid-checksum"),v.literal("invalid-entropy-length-less-than-twelve"),v.literal("invalid-entropy-length-more-than-twenty-four"),v.literal("invalid-entropy-length-wrong-word"),v.literal("invalid-pk-address-type"),v.literal("invalid-pk-identifier"),v.literal("invalid-pk"),v.literal("internal-error")]),Nre=v.literal("safely-onboarded"),n9e=v.union([v.object({status:Cre,isOnboarded:v.literal(!1),reonboardingNeeded:v.literal(!1)}),v.object({status:Dre,isOnboarded:v.literal(!0),reonboardingNeeded:v.literal(!0)}),v.object({status:Nre,isOnboarded:v.literal(!0),reonboardingNeeded:v.literal(!1)})]);var Ore=(t,e,r,n)=>{let i=[];for(let o of e){let s=K.getChainID(o);if(n.includes(s))for(let a of K[s].addressTypes){if(!r.includes(a))continue;let c=t.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.address});break}default:ft(c)}}}return i},Ure=(t,e,r,n)=>{let i=[];for(let o of e){let s=K.getChainID(o);if(n.includes(s))for(let a of K[s].addressTypes){if(!r.includes(a))continue;let c=t.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.address});break}default:ft(c)}}}return i},Rre=(t,e,r,n)=>{let i=[];for(let o of e){let s=K.getChainID(o);if(n.includes(s))for(let a of K[s].addressTypes)r.includes(a)&&t.chainType===a&&i.push({networkID:o,addressType:a,address:t.address})}return i},Lre=(t,e,r,n)=>{let i=[];for(let o of e){let s=K.getChainID(o);if(n.includes(s)){for(let a of K[s].addressTypes)if(r.includes(a)&&t.chainType===a)switch(t.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:t.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:t.publicKey,address:t.addresses[o]});break}case"sui":{i.push({networkID:o,addressType:a,publicKey:t.publicKey,address:t.address});break}default:ft(t)}}}return i},Mre=(t,e,r,n)=>{let i=[];for(let o of e){let s=K.getChainID(o);if(n.includes(s)){for(let a of K[s].addressTypes)if(r.includes(a))for(let[c,u]of Object.entries(t.addresses))c===a&&i.push({networkID:o,addressType:a,address:u})}}return i},ox=(t,e,r,n,i,o)=>{let s;switch(o?s=Object.values(i.setting):s=e,s=s.sort((a,c)=>K.compareNetworkID(a,c)),t.type){case"seedless":case"seed":return Ore(t,s,r,n);case"ledger":return Ure(t,s,r,n);case"seedVault":return Rre(t,s,r,n);case"privateKey":return Lre(t,s,r,n);case"readOnly":return Mre(t,s,r,n)}};l();h();var kd=async t=>{let e=await t.get("networkSetting"),r=await un.isFeatureEnabledAsync("enable-sui-testnet");if(!e)return X0(r);let n=Fre(e,r);return Hre(t,n)};function Fre(t,e){let r={...t,setting:{...t.setting}};return e&&!r.setting.sui?r.setting.sui=X0(e).setting.sui:!e&&r.setting.sui&&delete r.setting.sui,r}var Hre=async(t,e)=>{let r=!1;Kre(e)&&(r=!0);let n=e.setting.solana;n&&K.isMainnetNetworkID(n)&&(e.setting.solana=S3,r=!0);let i=e.setting.eip155;return i&&K.isMainnetNetworkID(i)&&(e.setting.eip155=v3,r=!0),r&&await t.set("networkSetting",e),e},Kre=t=>{let e=!1,r=t.setting.eip155;return r&&(r.toString()==="eip155:5"&&(t.setting.eip155=Xe.Ethereum.Sepolia,e=!0),r.toString()==="eip155:80001"&&(t.setting.eip155=Xe.Polygon.Amoy,e=!0)),e};var iE=async(t,e,r)=>{let n=await t.fetchAllAccounts();if(n.length===0)return[];let i=e.get("developerMode"),o=kd(e),s=tx(e),[a,c,u]=await Promise.all([i,o,s]);return n.map(d=>{let f=u[d.identifier];f||(f={name:vs.t("onboardingImportAccountsAccountName",{walletIndex:""})});let p={name:f.name,icon:f.icon,identifier:d.identifier,addresses:ox(d,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,c,a?.isDeveloperMode??!1)};return d.type==="seed"?{...p,type:"seed",seedIdentifier:d.seedIdentifier,isReadOnly:!1}:d.type==="seedless"?{...p,type:"seedless",seedIdentifier:d.seedIdentifier,isReadOnly:!1}:d.type==="readOnly"?{...p,type:"readOnly",isReadOnly:!0}:d.type==="privateKey"?{...p,privateKeyIdentifier:d.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...p,type:d.type,isReadOnly:!1}})};function lu(t){let{isSuccess:e,data:r}=Zi(),n=xt(),i=Be.allAccounts(r),o=xe();return Je({enabled:e,queryKey:i,queryFn:async()=>{if(!r)throw new Error(ix);let a=await iE(n,o,r);return ne.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${a.length}`,"info"),a},select:t})}var sx=()=>{let{isSuccess:t,isFetching:e,data:r=[]}=lu(),n=t&&!e&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};l();h();var lt=async t=>{await t.invalidateQueries({queryKey:[nE]}),await t.invalidateQueries({queryKey:[nx],predicate:e=>e.queryKey[0]===nx}),await t.invalidateQueries({queryKey:[tE]}),await ax(t)},ax=async t=>{await t.invalidateQueries({predicate:e=>typeof e.queryKey[0]=="string"&&e.queryKey[0]===rE}),await t.invalidateQueries({queryKey:Be.selectedAccountIdentifier()})};b3(lt);l();h();l();h();l();h();var jr=[];for(let t=0;t<256;++t)jr.push((t+256).toString(16).slice(1));function oD(t,e=0){return(jr[t[e+0]]+jr[t[e+1]]+jr[t[e+2]]+jr[t[e+3]]+"-"+jr[t[e+4]]+jr[t[e+5]]+"-"+jr[t[e+6]]+jr[t[e+7]]+"-"+jr[t[e+8]]+jr[t[e+9]]+"-"+jr[t[e+10]]+jr[t[e+11]]+jr[t[e+12]]+jr[t[e+13]]+jr[t[e+14]]+jr[t[e+15]]).toLowerCase()}l();h();var oE,Vre=new Uint8Array(16);function sE(){if(!oE){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");oE=self.crypto.getRandomValues.bind(self.crypto)}return oE(Vre)}l();h();l();h();var qre=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),aE={randomUUID:qre};function zre(t,e,r){if(aE.randomUUID&&!e&&!t)return aE.randomUUID();t=t||{};let n=t.random??t.rng?.()??sE();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return oD(n)}var cE=zre;l();h();function cx(){let t=xe(),e=Se();return ve({mutationFn:async({metadataBatch:o})=>{ne.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(o).length} entries`,"info"),await VC(t,o)},onSuccess:async()=>{await lt(e)},onError:o=>{ne.captureError(o,"account")}})}function jre(){let{mutateAsync:t}=cx(),e=xe(),r=Se(),n=xt(),{t:i}=Lo();return ve({mutationFn:async({accounts:c,pairedBLEDevice:u})=>{let d=cE(),f=await n.connectLedgerAccounts(d,c),p=f.reduce((g,x,w)=>{let{name:S,accountIndex:T}=c[w],A;!S||S.length===0?A=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+T}):A=S;let _;u&&(_=[{...u,version:1,connectionType:"ble",deviceType:"ledger"}]);let C={name:A,icon:void 0,connectedDevices:_};return g[x.identifier]=C,g},{});await t({metadataBatch:p});let m=f[0]?.identifier;return m||(m=(await n.fetchAllAccounts())[0].identifier),await ti(e,m),r.setQueryData(Be.selectedAccountIdentifier(),m),f},onSettled:async()=>{await lt(r)},onError:c=>ne.captureError(c,"account")})}l();h();var aD=j(Nt());l();h();var sD=()=>gu(qr,t=>new uE(t))(),uE=class{#e;constructor(e){this.#e=e}identifyAccount=async(e,r,n)=>{let i=!!r.addresses.find(p=>K.isSolanaNetworkID(p.networkID)),o=!!r.addresses.find(p=>K.isEthereumNetworkID(p.networkID)),s=!!r.addresses.find(p=>K.isBitcoinNetworkID(p.networkID)),a=!!r.addresses.find(p=>K.isSuiNetworkID(p.networkID)),c={hasSolanaAddress:i,hasEthereumAddress:o,hasBitcoinAddress:s,hasSuiAddress:a},u=n.enabledChainIDs.map(p=>K[p].name).join(", "),d=new Set,f=new Set;for(let p of e)switch(p.type){case"seed":case"seedless":d.add(p.seedIdentifier);break;case"readOnly":break;case"privateKey":case"ledger":case"seedVault":f.add(p.identifier);break;default:ft(p);break}switch(r.type){case"seed":case"seedless":this.#e.identify(r.identifier,{...c,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(d),accountIds:Array.from(f),isReadOnly:!1,enabledChains:u});break;case"readOnly":this.#e.identify(r.identifier,{...c,accountType:r.type,isReadOnly:!0,enabledChains:u});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(r.identifier,{...c,accountType:r.type,rootIds:Array.from(d),accountIds:Array.from(f),isReadOnly:!1,enabledChains:u});break;default:ft(r)}};onAppSessionStart=e=>{let r=new Map;for(let n of e){if(n.type==="readOnly")continue;let{addresses:i,identifier:o}=n;for(let s of i){let a=K.getChainName(s.networkID),c={type:n.type,accountId:o,id:s.address};if(!r.get(a))r.set(a,[c]);else{let u=r.get(a)??[];r.set(a,[...u,c])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})}};l();h();var tc=async(t,e)=>{if(t.length===0)throw new Error(Id);let r=await LC(e),n=t.find(i=>i.identifier===r);return n||(await ti(e,t[0].identifier),t[0])};var Wre=t=>{if(t){switch(t.type){case"seed":case"seedless":return t.seedIdentifier;case"privateKey":case"ledger":case"seedVault":case"readOnly":return}ft(t)}};function _i({select:t,updateESPUserProperties:e}={}){let r=(0,aD.useMemo)(()=>un.isFeatureEnabled("frontend-enable-esp-user-properties-update"),[]),{isSuccess:n,data:i}=Zi(),o=sx(),s=o.enabled&&n,a=yh(),c=xe(),u=sD(),d=Be.selectedAccount(i);return Je({queryKey:d,queryFn:async()=>{try{if(!i)throw new Error(ix);if(!o.enabled)throw new Error(Id);let p=await tc(o.accounts,c);if(ne.addBreadcrumb("account",`Finished fetching selected account: ${p.identifier}`,"info"),r&&e){let m=p.addresses.map(g=>g.address)??[];Promise.all(m.map(g=>e(g,vs.language)))}return un.setSubjectAttributes({rootID:Wre(p)}),a(),u.identifyAccount(o.accounts,p,i),p}catch(p){throw p instanceof Error&&ne.captureError(p,"account"),p}},enabled:s,select:t})}l();h();function Gre(){let t=xe(),e=Se();return ve({mutationFn:async({identifier:i,balance:o})=>(await KC(t,i,o),{identifier:i,balance:o}),onSuccess:({identifier:i,balance:o})=>{i&&e.invalidateQueries({queryKey:Be.accountBalance(i)}),o&&e.invalidateQueries({queryKey:Be.allAccountBalances()})}})}l();h();var cD=j(Nt());var sh=()=>{let{data:t}=_i();return(0,cD.useMemo)(()=>{let e=t?.addresses??[];return[...new Set(e.map(r=>r.networkID))]},[t])};l();h();l();h();function fE(){let t=xe();return Je(uD(t))}function uD(t){return{queryKey:Be.developerMode(),queryFn:async()=>await t.get("developerMode")||nC}}var $re=()=>{let{data:t}=fE();return!!t?.isDeveloperMode},Yre=()=>sh().some(e=>K.isLocalNetworkID(e));l();h();var fD=j(Nt());var Qre=t=>{let e=(0,fD.useMemo)(()=>{if(t){if(Xre(t))return n=>n.address===t.address&&n.networkID===t.networkID;if(K.isNetworkID(t))return n=>n.networkID===t;if(nS(t))return n=>n.addressType===t;throw new Error(`Unrecognized filter type: ${t}`)}else return()=>!1},[t]);return _i({select:n=>{let i=n.addresses.filter(e);if(i.length>1)throw new Error(`Multiple addresses match filter: ${t}`);return i[0]}})};function Xre(t){return typeof t=="object"&&"address"in t&&(typeof t.address=="string"||t.address===void 0)&&"networkID"in t}l();h();var dD=j(Nt()),Zre=({accountBalance:t,accountId:e,enabled:r,value:n,setAccountBalance:i})=>{(0,dD.useEffect)(()=>{if(r&&e&&n!==void 0&&n!==t){let o=Date.now();i({identifier:e,balance:{timestamp:o,value:n}})}},[t,e,r,n,i])};l();h();l();h();function Jre(t){let e=sx(),r=e.enabled&&t.length>0,n=Be.accountIdentifier(t);return Je({enabled:r,queryKey:n,queryFn:async()=>{try{if(ne.addBreadcrumb("account",`Fetching Account: ${t}`,"info"),!e.enabled)throw new Error(Id);let{accounts:o}=e,s=o.find(a=>a.identifier===t);if(!s)throw new Error(jC(o.length,t));return s}catch(o){throw o instanceof Error&&ne.captureError(o,"account"),o}}})}l();h();l();h();function ene(){let t=xe(),e=Se(),r=xt();return ve({mutationFn:async({name:a,addresses:c,icon:u})=>{let d=await r.addReadonlyAccount(c),f={name:a,icon:u};return await du(t,d.identifier,f),await ti(t,d.identifier),d},onSettled:async()=>{await lt(e)},onSuccess:a=>{e.setQueryData(Be.selectedAccountIdentifier(),a.identifier)},onError:a=>ne.captureError(a,"account")})}l();h();function tne(){let{t}=Lo(),e=xe(),r=Se(),n=at(),{fetchAllAccounts:i,addAccountForSeed:o,addAccountForSeedless:s,fetchAllSeedlessMetas:a}=xt();return ve({mutationFn:async({name:p,icon:m,seedIdentifier:g})=>{ne.addBreadcrumb("account",`Adding new account for s**d: ${g}`,"info");let w=(await a()).find(T=>T.identifier===g),S=w?await s(g):await o(g);return await du(e,S.identifier,{name:p||t("onboardingImportAccountsAccountName",{walletIndex:(await i()).length}),icon:m}),await ti(e,S.identifier),w&&n.uploadSyncedAccount(S.identifier),S},onSettled:async()=>{await lt(r)},onSuccess:p=>{r.setQueryData(Be.selectedAccountIdentifier(),p.identifier)},onError:p=>ne.captureError(p,"account")})}l();h();l();h();var rne=async t=>[...(await t.fetchAllAccounts()).reduce((i,o)=>{switch(o.type){case"seed":case"seedless":{i.add(o.seedIdentifier);break}case"privateKey":{i.add(o.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:ft(o);break}return i},new Set)];l();h();function ah(t){let e=xt(),r=Be.allSeeds(t);return Je({queryKey:r,queryFn:async()=>{try{let i;switch(t){case"all":{let o=await e.fetchAllSeedMetas();i=[...await e.fetchAllSeedlessMetas(),...o];break}case"local-only":{i=[...await e.fetchAllSeedMetas()];break}case"recoverable-only":{i=[...await e.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&ne.captureError(i,"account"),i}}})}l();h();l();h();function nne(){let t=xe(),e=Se(),r=xt();return ve({mutationFn:async({chainType:s,privateKey:a,name:c,icon:u})=>{ne.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let d=await r.importPrivateKeyAccount(s,a),f={name:c,icon:u};return await du(t,d.identifier,f),await ti(t,d.identifier),ne.addBreadcrumb("account",`Imported Private Key Account \u2705: ${d.identifier}`,"info"),d},onSettled:async()=>{await lt(e)},onSuccess:s=>{e.setQueryData(Be.selectedAccountIdentifier(),s.identifier)}})}l();h();l();h();function ine(){let{data:[t]}=eo(["enable-sui-testnet"]),e=Be.selectedNetworkSetting(t),r=xe();return Je({queryKey:e,queryFn:()=>kd(r)})}l();h();function one(){let t=xe(),e=qr(),r=xt(),n=Se(),i=at();return ve({mutationFn:async({identifier:a})=>{ne.addBreadcrumb("account",`Removing Account... \u23F3: ${a}`,"info"),await Promise.all([r.removeAccount(a),rx(t,a)]),await tc(await r.fetchAllAccounts(),t),e.capture("removeAccount"),i.deleteSyncedAccount(a),ne.addBreadcrumb("account",`Removed Account \u2705: ${a}`,"info")},onSuccess:async()=>{await lt(n)}})}l();h();function sne(){let t=xe(),e=qr(),r=Se(),n=xt();return ve({mutationFn:async({seedIdentifier:a})=>{let c=await n.fetchAllAccounts(),u=[];for(let d of c)switch(d.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":d.seedIdentifier===a&&u.push(d.identifier);break;default:ft(d)}for(let d of u)await Promise.all([n.removeAccount(d),rx(t,d)]);e.capture("removeSeed",{data:{numOfAccounts:u.length}})},onSuccess:()=>{lt(r)},onError:a=>{ne.captureError(a,"account")}})}l();h();function ane(){let t=xe(),e=Se(),r=at();return ve({mutationFn:async({identifier:s,name:a})=>{ne.addBreadcrumb("account","Renaming Multichain Account","info"),await FC(t,s,a),r.uploadSyncedAccounts()},onSuccess:async()=>{await lt(e)},onError:s=>ne.captureError(s,"account")})}l();h();function cne(){let t=Se(),e=xt();return ve({mutationFn:async({identifier:i,toIndex:o})=>{await e.reorderAccount(i,o)},onSuccess:()=>{lt(t)}})}l();h();function une(){let t=Be.selectedAccountIdentifier(),e=xe(),r=xt();return Je({queryKey:t,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),s=(await tc(i,e)).identifier;if(!s)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return s}catch(i){throw i instanceof Error&&ne.captureError(i,"account"),i}}})}l();h();function fne(){let t=xe(),e=Se();return ve({mutationFn:async({developerMode:i})=>{e.setQueryData(Be.developerMode(),i),await t.set("developerMode",i)},onSuccess:()=>{lt(e)}})}l();h();function dne(){let t=xe(),e=Se(),r=at();return ve({mutationFn:async({identifier:o,icon:s})=>{ne.addBreadcrumb("account","Setting Multichain Account Icon","info"),await HC(t,o,s),r.uploadSyncedAccounts()},onSuccess:async()=>{await lt(e)}})}l();h();function lne(){let t=xe(),e=Se(),{data:[r]}=eo(["enable-sui-testnet"]);return ve({mutationFn:async({networkSetting:o})=>{e.setQueryData(Be.selectedNetworkSetting(r),o),await t.set("networkSetting",o)},onSuccess:()=>{lt(e)}})}l();h();function hne(){let t=xe(),e=qr(),r=Se();return ve({mutationFn:async({identifier:s})=>(await ti(t,s),e.capture("changeAccount",{data:{identifier:s}}),s),onSuccess:s=>{ax(r),r.setQueryData(Be.selectedAccountIdentifier(),s)},onError:s=>ne.captureError(s,"account")})}l();h();var pne=()=>{let t=Se(),e=at(),r=xu(),n=Be.syncUserAccounts();return Je({enabled:r,queryKey:n,queryFn:async()=>{let o=!1;try{o=await e.downloadSyncedAccounts()}catch{return!1}return o&&await lt(t),o},gcTime:1/0,staleTime:1/0})};l();h();var lD=j(Nt());var yne=()=>{let{data:t,isFetching:e}=lu(),{data:r,isFetching:n}=_i(),i=sh();return(0,lD.useMemo)(()=>({data:{"All Accounts":t,"Selected Account":r??null,"Selected Networks":i.map(o=>K.getNetworkName(o))},isFetching:e||n}),[t,e,n,r,i])};l();h();var hD=j(Nt()),mne=(t=[])=>{let e=Ad();return(0,hD.useMemo)(()=>t.filter(r=>{let n=K.getParentChain(r.networkID);return n?e.includes(n):!1}),[t,e])};l();h();var MD=j(uN()),gx=j(Nt());l();h();var Dt=j(Nt(),1),dh=t=>t.type==="checkbox",_d=t=>t instanceof Date,Mn=t=>t==null,ED=t=>typeof t=="object",Cr=t=>!Mn(t)&&!Array.isArray(t)&&ED(t)&&!_d(t),ID=t=>Cr(t)&&t.target?dh(t.target)?t.target.checked:t.target.value:t,gne=t=>t.substring(0,t.search(/.\d/))||t,kD=(t,e)=>[...t].some(r=>gne(e)===r),px=t=>t.filter(Boolean),rr=t=>t===void 0,pe=(t,e,r)=>{if(!e||!Cr(t))return r;let n=px(e.split(/[,[\].]+?/)).reduce((i,o)=>Mn(i)?i:i[o],t);return rr(n)||n===t?rr(t[e])?r:t[e]:n},pE={BLUR:"blur",CHANGE:"change"},Ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},gE=(t,e)=>{let r=Object.assign({},t);return delete r[e],r},bne=Dt.default.createContext(null),bE=()=>Dt.default.useContext(bne);var TD=(t,e,r,n=!0)=>{function i(s){return()=>{if(s in t)return e[s]!==Ji.all&&(e[s]=!n||Ji.all),r&&(r[s]=!0),t[s]}}let o={};for(let s in t)Object.defineProperty(o,s,{get:i(s)});return o},ri=t=>Cr(t)&&!Object.keys(t).length,_D=(t,e,r)=>{let n=gE(t,"name");return ri(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(i=>e[i]===(!r||Ji.all))},ux=t=>Array.isArray(t)?t:[t],PD=(t,e,r)=>r&&e?t===e:!t||!e||t===e||ux(t).some(n=>n&&(n.startsWith(e)||e.startsWith(n)));function xE(t){let e=Dt.default.useRef(t);e.current=t,Dt.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!t.disabled&&e.current.subject.subscribe({next:e.current.callback});return()=>r(n)},[t.disabled])}function xne(t){let e=bE(),{control:r=e.control,disabled:n,name:i,exact:o}=t||{},[s,a]=Dt.default.useState(r._formState),c=Dt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=Dt.default.useRef(i),d=Dt.default.useRef(!0);u.current=i;let f=Dt.default.useCallback(p=>d.current&&PD(u.current,p.name,o)&&_D(p,c.current)&&a(Object.assign(Object.assign({},r._formState),p)),[r,o]);return xE({disabled:n,callback:f,subject:r._subjects.state}),Dt.default.useEffect(()=>()=>{d.current=!1},[]),TD(s,r._proxyFormState,c.current,!1)}var Oo=t=>typeof t=="string",BD=(t,e,r,n)=>{let i=Array.isArray(t);return Oo(t)?(n&&e.watch.add(t),pe(r,t)):i?t.map(o=>(n&&e.watch.add(o),pe(r,o))):(n&&(e.watchAll=!0),r)},yx=t=>typeof t=="function",wE=t=>{for(let e in t)if(yx(t[e]))return!0;return!1};function wne(t){let e=bE(),{control:r=e.control,name:n,defaultValue:i,disabled:o,exact:s}=t||{},a=Dt.default.useRef(n);a.current=n;let c=Dt.default.useCallback(f=>{if(PD(a.current,f.name,s)){let p=BD(a.current,r._names,f.values||r._formValues);d(rr(a.current)||Cr(p)&&!wE(p)?Object.assign({},p):Array.isArray(p)?[...p]:rr(p)?i:p)}},[r,s,i]);xE({disabled:o,subject:r._subjects.watch,callback:c});let[u,d]=Dt.default.useState(rr(i)?r._getWatch(n):i);return Dt.default.useEffect(()=>{r._removeUnmounted()}),u}function Ane(t){let e=bE(),{name:r,control:n=e.control,shouldUnregister:i}=t,o=kD(n._names.array,r),s=wne({control:n,name:r,defaultValue:pe(n._formValues,r,pe(n._defaultValues,r,t.defaultValue)),exact:!o}),a=xne({control:n,name:r}),c=Dt.default.useRef(n.register(r,Object.assign(Object.assign({},t.rules),{value:s})));return Dt.default.useEffect(()=>{let u=(d,f)=>{let p=pe(n._fields,d);p&&(p._f.mount=f)};return u(r,!0),()=>{let d=n._options.shouldUnregister||i;o?d&&n._stateFlags.action:d?n.unregister(r):u(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:Dt.default.useCallback(u=>{c.current.onChange({target:{value:ID(u),name:r},type:pE.CHANGE})},[r]),onBlur:Dt.default.useCallback(()=>{c.current.onBlur({target:{value:pe(n._formValues,r),name:r},type:pE.BLUR})},[r,n]),ref:Dt.default.useCallback(u=>{let d=pe(n._fields,r);u&&d&&u.focus&&(d._f.ref={focus:()=>u.focus(),setCustomValidity:f=>u.setCustomValidity(f),reportValidity:()=>u.reportValidity()})},[r,n])},formState:a,fieldState:{invalid:!!pe(a.errors,r),isDirty:!!pe(a.dirtyFields,r),isTouched:!!pe(a.touchedFields,r),error:pe(a.errors,r)}}}var CD=t=>t.render(Ane(t)),Sne=(t,e,r,n,i)=>e?Object.assign(Object.assign({},r[t]),{types:Object.assign(Object.assign({},r[t]&&r[t].types?r[t].types:{}),{[n]:i||!0})}):{},AE=t=>/^\w*$/.test(t),DD=t=>px(t.replace(/["|']|\]/g,"").split(/\.|\[/));function dr(t,e,r){let n=-1,i=AE(e)?[e]:DD(e),o=i.length,s=o-1;for(;++n<o;){let a=i[n],c=r;if(n!==s){let u=t[a];c=Cr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}t[a]=c,t=t[a]}return t}var yE=(t,e,r)=>{for(let n of r||Object.keys(t)){let i=pe(t,n);if(i){let o=i._f,s=gE(i,"_f");if(o&&e(o.name)){if(o.ref.focus&&rr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else Cr(s)&&yE(s,e)}}};var pD=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));function uh(t){let e,r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(r||Cr(t)){e=r?[]:{};for(let n in t){if(yx(t[n])){e=t;break}e[n]=uh(t[n])}}else return t;return e}function dE(){let t=[];return{get observers(){return t},next:i=>{for(let o of t)o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}}var dx=t=>Mn(t)||!ED(t);function Pd(t,e){if(dx(t)||dx(e))return t===e;if(_d(t)&&_d(e))return t.getTime()===e.getTime();let r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let i of r){let o=t[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=e[i];if(_d(o)&&_d(s)||Cr(o)&&Cr(s)||Array.isArray(o)&&Array.isArray(s)?!Pd(o,s):o!==s)return!1}}return!0}var yD=t=>({isOnSubmit:!t||t===Ji.onSubmit,isOnBlur:t===Ji.onBlur,isOnChange:t===Ji.onChange,isOnAll:t===Ji.all,isOnTouch:t===Ji.onTouched}),fh=t=>typeof t=="boolean",SE=t=>t.type==="file",mE=t=>t instanceof HTMLElement,ND=t=>t.type==="select-multiple",vE=t=>t.type==="radio",vne=t=>vE(t)||dh(t),mD=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",lE=t=>mE(t)&&t.isConnected;function Ene(t,e){let r=e.slice(0,-1).length,n=0;for(;n<r;)t=rr(t)?n++:t[e[n++]];return t}function In(t,e){let r=AE(e)?[e]:DD(e),n=r.length==1?t:Ene(t,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a=-1,c,u=r.slice(0,-(s+1)),d=u.length-1;for(s>0&&(o=t);++a<u.length;){let f=u[a];c=c?c[f]:t[f],d===a&&(Cr(c)&&ri(c)||Array.isArray(c)&&!c.filter(p=>Cr(p)&&!ri(p)||fh(p)).length)&&(o?delete o[f]:delete t[f]),o=c}}return t}function lx(t,e={}){let r=Array.isArray(t);if(Cr(t)||r)for(let n in t)Array.isArray(t[n])||Cr(t[n])&&!wE(t[n])?(e[n]=Array.isArray(t[n])?[]:{},lx(t[n],e[n])):Mn(t[n])||(e[n]=!0);return e}function OD(t,e,r){let n=Array.isArray(t);if(Cr(t)||n)for(let i in t)Array.isArray(t[i])||Cr(t[i])&&!wE(t[i])?rr(e)||dx(r[i])?r[i]=Array.isArray(t[i])?lx(t[i],[]):Object.assign({},lx(t[i])):OD(t[i],Mn(e)?{}:e[i],r[i]):r[i]=!Pd(t[i],e[i]);return r}var gD=(t,e)=>OD(t,e,lx(e)),bD={value:!1,isValid:!1},xD={value:!0,isValid:!0},UD=t=>{if(Array.isArray(t)){if(t.length>1){let e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!rr(t[0].attributes.value)?rr(t[0].value)||t[0].value===""?xD:{value:t[0].value,isValid:!0}:xD:bD}return bD},RD=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>rr(t)?t:e?t===""?NaN:+t:r&&Oo(t)?new Date(t):n?n(t):t,wD={isValid:!1,value:null},LD=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,wD):wD;function hE(t){let e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return SE(e)?e.files:vE(e)?LD(t.refs).value:ND(e)?[...e.selectedOptions].map(({value:r})=>r):dh(e)?UD(t.refs).value:RD(rr(e.value)?t.ref.value:e.value,t)}var Ine=(t,e,r,n)=>{let i={};for(let o of t){let s=pe(e,o);s&&dr(i,o,s._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},hx=t=>t instanceof RegExp,ch=t=>rr(t)?void 0:hx(t)?t.source:Cr(t)?hx(t.value)?t.value.source:t.value:t,kne=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function AD(t,e,r){let n=pe(t,r);if(n||AE(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=pe(e,o),a=pe(t,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var Tne=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,_ne=(t,e)=>!px(pe(t,e)).length&&In(t,e),fx=t=>Oo(t)||Dt.default.isValidElement(t);function SD(t,e,r="validate"){if(fx(t)||Array.isArray(t)&&t.every(fx)||fh(t)&&!t)return{type:r,message:fx(t)?t:"",ref:e}}var Td=t=>Cr(t)&&!hx(t)?t:{value:t,message:""},vD=async(t,e,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:c,min:u,max:d,pattern:f,validate:p,name:m,valueAsNumber:g,mount:x,disabled:w}=t._f;if(!x||w)return{};let S=o?o[0]:i,T=ee=>{n&&S.reportValidity&&(S.setCustomValidity(fh(ee)?"":ee||" "),S.reportValidity())},A={},_=vE(i),C=dh(i),W=_||C,re=(g||SE(i))&&!i.value||e===""||Array.isArray(e)&&!e.length,Y=Sne.bind(null,m,r,A),G=(ee,Z,D,N=bs.maxLength,O=bs.minLength)=>{let $=ee?Z:D;A[m]=Object.assign({type:ee?N:O,message:$,ref:i},Y(ee?N:O,$))};if(s&&(!W&&(re||Mn(e))||fh(e)&&!e||C&&!UD(o).isValid||_&&!LD(o).isValid)){let{value:ee,message:Z}=fx(s)?{value:!!s,message:s}:Td(s);if(ee&&(A[m]=Object.assign({type:bs.required,message:Z,ref:S},Y(bs.required,Z)),!r))return T(Z),A}if(!re&&(!Mn(u)||!Mn(d))){let ee,Z,D=Td(d),N=Td(u);if(isNaN(e)){let O=i.valueAsDate||new Date(e);Oo(D.value)&&(ee=O>new Date(D.value)),Oo(N.value)&&(Z=O<new Date(N.value))}else{let O=i.valueAsNumber||parseFloat(e);Mn(D.value)||(ee=O>D.value),Mn(N.value)||(Z=O<N.value)}if((ee||Z)&&(G(!!ee,D.message,N.message,bs.max,bs.min),!r))return T(A[m].message),A}if((a||c)&&!re&&Oo(e)){let ee=Td(a),Z=Td(c),D=!Mn(ee.value)&&e.length>ee.value,N=!Mn(Z.value)&&e.length<Z.value;if((D||N)&&(G(D,ee.message,Z.message),!r))return T(A[m].message),A}if(f&&!re&&Oo(e)){let{value:ee,message:Z}=Td(f);if(hx(ee)&&!e.match(ee)&&(A[m]=Object.assign({type:bs.pattern,message:Z,ref:i},Y(bs.pattern,Z)),!r))return T(Z),A}if(p){if(yx(p)){let ee=await p(e),Z=SD(ee,S);if(Z&&(A[m]=Object.assign(Object.assign({},Z),Y(bs.validate,Z.message)),!r))return T(Z.message),A}else if(Cr(p)){let ee={};for(let Z in p){if(!ri(ee)&&!r)break;let D=SD(await p[Z](e),S,Z);D&&(ee=Object.assign(Object.assign({},D),Y(Z,D.message)),T(D.message),r&&(A[m]=ee))}if(!ri(ee)&&(A[m]=Object.assign({ref:S},ee),!r))return A}}return T(!0),A},Pne={mode:Ji.onSubmit,reValidateMode:Ji.onChange,shouldFocusError:!0};function Bne(t={}){let e=Object.assign(Object.assign({},Pne),t),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=e.defaultValues||{},o=e.shouldUnregister?{}:uh(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0,d={},f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={watch:dE(),array:dE(),state:dE()},m=yD(e.mode),g=yD(e.reValidateMode),x=e.criteriaMode===Ji.all,w=(k,L)=>(...z)=>{clearTimeout(u),u=self.setTimeout(()=>k(...z),L)},S=async k=>{let L=!1;return f.isValid&&(L=e.resolver?ri((await re()).errors):await G(n,!0),!k&&L!==r.isValid&&(r.isValid=L,p.state.next({isValid:L}))),L},T=(k,L,z,ae=[],he=!0,ie=!0)=>{if(s.action=!0,ie&&Array.isArray(pe(n,k))){let be=L(pe(n,k),z.argA,z.argB);he&&dr(n,k,be)}if(f.errors&&ie&&Array.isArray(pe(r.errors,k))){let be=L(pe(r.errors,k),z.argA,z.argB);he&&dr(r.errors,k,be),_ne(r.errors,k)}if(f.touchedFields&&Array.isArray(pe(r.touchedFields,k))){let be=L(pe(r.touchedFields,k),z.argA,z.argB);he&&dr(r.touchedFields,k,be)}f.dirtyFields&&(r.dirtyFields=gD(i,o)),p.state.next({isDirty:Z(k,ae),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},A=(k,L)=>(dr(r.errors,k,L),p.state.next({errors:r.errors})),_=(k,L,z,ae)=>{let he=pe(n,k);if(he){let ie=pe(o,k,rr(z)?pe(i,k):z);rr(ie)||ae&&ae.defaultChecked||L?dr(o,k,L?ie:hE(he._f)):O(k,ie),s.mount&&S()}},C=(k,L,z,ae,he)=>{let ie=!1,be={name:k},At=pe(r.touchedFields,k);if(f.isDirty){let xs=r.isDirty;r.isDirty=be.isDirty=Z(),ie=xs!==be.isDirty}if(f.dirtyFields&&(!z||ae)){let xs=pe(r.dirtyFields,k);Pd(pe(i,k),L)?In(r.dirtyFields,k):dr(r.dirtyFields,k,!0),be.dirtyFields=r.dirtyFields,ie=ie||xs!==pe(r.dirtyFields,k)}return z&&!At&&(dr(r.touchedFields,k,z),be.touchedFields=r.touchedFields,ie=ie||f.touchedFields&&At!==z),ie&&he&&p.state.next(be),ie?be:{}},W=async(k,L,z,ae,he)=>{let ie=pe(r.errors,L),be=f.isValid&&r.isValid!==z;if(t.delayError&&ae?(c=c||w(A,t.delayError),c(L,ae)):(clearTimeout(u),ae?dr(r.errors,L,ae):In(r.errors,L)),((ae?!Pd(ie,ae):ie)||!ri(he)||be)&&!k){let At=Object.assign(Object.assign(Object.assign({},he),be?{isValid:z}:{}),{errors:r.errors,name:L});r=Object.assign(Object.assign({},r),At),p.state.next(At)}d[L]--,f.isValidating&&!d[L]&&(p.state.next({isValidating:!1}),d={})},re=async k=>e.resolver?await e.resolver(Object.assign({},o),e.context,Ine(k||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation)):{},Y=async k=>{let{errors:L}=await re();if(k)for(let z of k){let ae=pe(L,z);ae?dr(r.errors,z,ae):In(r.errors,z)}else r.errors=L;return L},G=async(k,L,z={valid:!0})=>{for(let ae in k){let he=k[ae];if(he){let ie=he._f,be=gE(he,"_f");if(ie){let At=await vD(he,pe(o,ie.name),x,e.shouldUseNativeValidation);if(At[ie.name]&&(z.valid=!1,L))break;L||(At[ie.name]?dr(r.errors,ie.name,At[ie.name]):In(r.errors,ie.name))}be&&await G(be,L,z)}}return z.valid},ee=()=>{for(let k of a.unMount){let L=pe(n,k);L&&(L._f.refs?L._f.refs.every(z=>!lE(z)):!lE(L._f.ref))&&F(k)}a.unMount=new Set},Z=(k,L)=>(k&&L&&dr(o,k,L),!Pd(P(),i)),D=(k,L,z)=>{let ae=Object.assign({},s.mount?o:rr(L)?i:Oo(k)?{[k]:L}:L);return BD(k,a,ae,z)},N=k=>px(pe(s.mount?o:i,k,t.shouldUnregister?pe(i,k,[]):[])),O=(k,L,z={})=>{let ae=pe(n,k),he=L;if(ae){let ie=ae._f;ie&&(!ie.disabled&&dr(o,k,RD(L,ie)),he=mD&&mE(ie.ref)&&Mn(L)?"":L,ND(ie.ref)?[...ie.ref.options].forEach(be=>be.selected=he.includes(be.value)):ie.refs?dh(ie.ref)?ie.refs.length>1?ie.refs.forEach(be=>be.checked=Array.isArray(he)?!!he.find(At=>At===be.value):he===be.value):ie.refs[0]&&(ie.refs[0].checked=!!he):ie.refs.forEach(be=>be.checked=be.value===he):SE(ie.ref)||(ie.ref.value=he,ie.ref.type||p.watch.next({name:k})))}(z.shouldDirty||z.shouldTouch)&&C(k,he,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&Ae(k)},$=(k,L,z)=>{for(let ae in L){let he=L[ae],ie=`${k}.${ae}`,be=pe(n,ie);(a.array.has(k)||!dx(he)||be&&!be._f)&&!_d(he)?$(ie,he,z):O(ie,he,z)}},fe=(k,L,z={})=>{let ae=pe(n,k),he=a.array.has(k);dr(o,k,L),he?(p.array.next({name:k,values:o}),(f.isDirty||f.dirtyFields)&&z.shouldDirty&&(r.dirtyFields=gD(i,o),p.state.next({name:k,dirtyFields:r.dirtyFields,isDirty:Z(k,L)}))):ae&&!ae._f&&!Mn(L)?$(k,L,z):O(k,L,z),pD(k,a)&&p.state.next({}),p.watch.next({name:k})},se=async k=>{let L=k.target,z=L.name,ae=pe(n,z);if(ae){let he,ie,be=L.type?hE(ae._f):ID(k),At=k.type===pE.BLUR,xs=!kne(ae._f)&&!e.resolver&&!pe(r.errors,z)&&!ae._f.deps||Tne(At,pe(r.touchedFields,z),r.isSubmitted,g,m),lh=pD(z,a,At);dr(o,z,be),At?ae._f.onBlur&&ae._f.onBlur(k):ae._f.onChange&&ae._f.onChange(k);let wx=C(z,be,At,!1),rN=!ri(wx)||lh;if(!At&&p.watch.next({name:z,type:k.type}),xs)return rN&&p.state.next(Object.assign({name:z},lh?{}:wx));if(!At&&lh&&p.state.next({}),d[z]=(d[z],1),f.isValidating&&p.state.next({isValidating:!0}),e.resolver){let{errors:IE}=await re([z]),nN=AD(r.errors,n,z),kE=AD(IE,n,nN.name||z);he=kE.error,z=kE.name,ie=ri(IE)}else he=(await vD(ae,pe(o,z),x,e.shouldUseNativeValidation))[z],ie=await S(!0);ae._f.deps&&Ae(ae._f.deps),W(!1,z,ie,he,wx)}},Ae=async(k,L={})=>{let z,ae,he=ux(k);if(p.state.next({isValidating:!0}),e.resolver){let ie=await Y(rr(k)?k:he);z=ri(ie),ae=k?!he.some(be=>pe(ie,be)):z}else k?(ae=(await Promise.all(he.map(async ie=>{let be=pe(n,ie);return await G(be&&be._f?{[ie]:be}:be)}))).every(Boolean),!(!ae&&!r.isValid)&&S()):ae=z=await G(n);return p.state.next(Object.assign(Object.assign(Object.assign({},!Oo(k)||f.isValid&&z!==r.isValid?{}:{name:k}),e.resolver?{isValid:z}:{}),{errors:r.errors,isValidating:!1})),L.shouldFocus&&!ae&&yE(n,ie=>pe(r.errors,ie),k?he:a.mount),ae},P=k=>{let L=Object.assign(Object.assign({},i),s.mount?o:{});return rr(k)?L:Oo(k)?pe(L,k):k.map(z=>pe(L,z))},U=k=>{k?ux(k).forEach(L=>In(r.errors,L)):r.errors={},p.state.next({errors:r.errors})},X=(k,L,z)=>{let ae=(pe(n,k,{_f:{}})._f||{}).ref;dr(r.errors,k,Object.assign(Object.assign({},L),{ref:ae})),p.state.next({name:k,errors:r.errors,isValid:!1}),z&&z.shouldFocus&&ae&&ae.focus&&ae.focus()},M=(k,L)=>yx(k)?p.watch.subscribe({next:z=>k(D(void 0,L),z)}):D(k,L,!0),F=(k,L={})=>{for(let z of k?ux(k):a.mount)a.mount.delete(z),a.array.delete(z),pe(n,z)&&(L.keepValue||(In(n,z),In(o,z)),!L.keepError&&In(r.errors,z),!L.keepDirty&&In(r.dirtyFields,z),!L.keepTouched&&In(r.touchedFields,z),!e.shouldUnregister&&!L.keepDefaultValue&&In(i,z));p.watch.next({}),p.state.next(Object.assign(Object.assign({},r),L.keepDirty?{isDirty:Z()}:{})),!L.keepIsValid&&S()},ye=(k,L={})=>{let z=pe(n,k),ae=fh(L.disabled);return dr(n,k,{_f:Object.assign(Object.assign(Object.assign({},z&&z._f?z._f:{ref:{name:k}}),{name:k,mount:!0}),L)}),a.mount.add(k),z?ae&&dr(o,k,L.disabled?void 0:pe(o,k,hE(z._f))):_(k,!0,L.value),Object.assign(Object.assign(Object.assign({},ae?{disabled:L.disabled}:{}),e.shouldUseNativeValidation?{required:!!L.required,min:ch(L.min),max:ch(L.max),minLength:ch(L.minLength),maxLength:ch(L.maxLength),pattern:ch(L.pattern)}:{}),{name:k,onChange:se,onBlur:se,ref:he=>{if(he){ye(k,L),z=pe(n,k);let ie=rr(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,be=vne(ie),At=z._f.refs||[];if(be?At.find(xs=>xs===ie):ie===z._f.ref)return;dr(n,k,{_f:Object.assign(Object.assign({},z._f),be?{refs:At.concat(ie).filter(lE),ref:{type:ie.type,name:k}}:{ref:ie})}),_(k,!1,void 0,ie)}else z=pe(n,k,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(kD(a.array,k)&&s.action)&&a.unMount.add(k)}})};return{control:{register:ye,unregister:F,_executeSchema:re,_getWatch:D,_getDirty:Z,_updateValid:S,_removeUnmounted:ee,_updateFieldArray:T,_getFieldArray:N,_subjects:p,_proxyFormState:f,get _fields(){return n},set _fields(k){n=k},get _formValues(){return o},set _formValues(k){o=k},get _stateFlags(){return s},set _stateFlags(k){s=k},get _defaultValues(){return i},set _defaultValues(k){i=k},get _names(){return a},set _names(k){a=k},get _formState(){return r},set _formState(k){r=k},get _options(){return e},set _options(k){e=Object.assign(Object.assign({},e),k)}},trigger:Ae,register:ye,handleSubmit:(k,L)=>async z=>{z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let ae=!0,he=e.shouldUnregister?uh(o):Object.assign({},o);p.state.next({isSubmitting:!0});try{if(e.resolver){let{errors:ie,values:be}=await re();r.errors=ie,he=be}else await G(n);ri(r.errors)&&Object.keys(r.errors).every(ie=>pe(he,ie))?(p.state.next({errors:{},isSubmitting:!0}),await k(he,z)):(L&&await L(r.errors,z),e.shouldFocusError&&yE(n,ie=>pe(r.errors,ie),a.mount))}catch(ie){throw ae=!1,ie}finally{r.isSubmitted=!0,p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ri(r.errors)&&ae,submitCount:r.submitCount+1,errors:r.errors})}},watch:M,setValue:fe,getValues:P,reset:(k,L={})=>{let z=k||i,ae=uh(z),he=k&&!ri(k)?ae:i;if(L.keepDefaultValues||(i=z),!L.keepValues){if(mD&&rr(k))for(let ie of a.mount){let be=pe(n,ie);if(be&&be._f){let At=Array.isArray(be._f.refs)?be._f.refs[0]:be._f.ref;try{mE(At)&&At.closest("form").reset();break}catch{}}}o=t.shouldUnregister?L.keepDefaultValues?uh(i):{}:ae,n={},p.array.next({values:he}),p.watch.next({values:he})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!f.isValid||!!L.keepIsValid,s.watch=!!t.shouldUnregister,p.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:L.keepDirty?r.isDirty:L.keepDefaultValues?!Pd(k,i):!1,isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:L.keepDirty?r.dirtyFields:L.keepDefaultValues&&k?Object.entries(k).reduce((ie,[be,At])=>Object.assign(Object.assign({},ie),{[be]:At!==pe(i,be)}),{}):{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(k,L={})=>{pe(n,k)&&(rr(L.defaultValue)?fe(k,pe(i,k)):(fe(k,L.defaultValue),dr(i,k,L.defaultValue)),L.keepTouched||In(r.touchedFields,k),L.keepDirty||(In(r.dirtyFields,k),r.isDirty=L.defaultValue?Z(k,pe(i,k)):Z()),L.keepError||(In(r.errors,k),f.isValid&&S()),p.state.next(Object.assign({},r)))},clearErrors:U,unregister:F,setError:X,setFocus:k=>{let L=pe(n,k)._f;(L.ref.focus?L.ref:L.refs[0]).focus()}}}function mx(t={}){let e=Dt.default.useRef(),[r,n]=Dt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});e.current?e.current.control._options=t:e.current=Object.assign(Object.assign({},Bne(t)),{formState:r});let i=e.current.control,o=Dt.default.useCallback(s=>{_D(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return xE({subject:i._subjects.state,callback:o}),Dt.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),e.current.formState=TD(r,i._proxyFormState),e.current}var Cne=({accounts:t,enabledAddressTypes:e,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:o})=>{let s=at(),{t:a}=Lo(),c=qr(),u=n?.networkID||Xe.Solana.Mainnet,{formState:{errors:d},control:f,clearErrors:p,getValues:m,setValue:g,register:x,handleSubmit:w,watch:S,trigger:T}=mx({mode:"all"}),{networkID:A,name:_,address:C,resolvedAddress:W}=S(),re={required:!0},Y=(0,gx.useMemo)(()=>({required:{value:!0,message:a("addAccountImportAccountPublicKeyRequired")},validate:(0,MD.default)(async Z=>{if(Z==="")return!0;if(!Fb(Z,A||u))try{let $=(await o(Z,A,s,c))?.owner;return $?(g("resolvedAddress",$),t.find(se=>se.addresses.map(Ae=>Ae.address).includes($))?a("addAccountImportAccountDuplicateAddress"):!0):a("addAccountImportAccountIncorrectFormat")}catch{return a("sendFormErrorInvalidDomain")}return g("resolvedAddress",Z),t.find(O=>O.addresses.map($=>$.address).includes(Z))?a("addAccountImportAccountDuplicateAddress"):!0},500)}),[a,A,u,g,t,o,s,c]),G=_&&W&&!d.name&&!d.address,ee=(0,gx.useCallback)(async({networkID:Z,name:D,resolvedAddress:N},O)=>{let $=pd(Z,N);e.includes($)||await r({addressTypes:[$]});let fe={};fe[$]=N,i({name:D,addresses:fe,icon:n?.icon}),O(),c.capture("addReadOnlyAccount",{data:{networkID:Z,chainType:$}})},[i,n?.icon,r,e,c]);return{Controller:CD,canSubmit:G,control:f,errors:d,nameValidations:re,address:C,addressValidations:Y,clearErrors:p,getValues:m,handleSubmit:w,onSubmit:ee,register:x,setValue:g,trigger:T}};l();h();l();h();l();h();l();h();var EE=(t,e)=>{let r=pd(t,e);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Ui.getDisplayName(r);default:return}};var FD={badge:(t,e,r)=>e.filter(q0).length<=1?"":EE(t,r)??"",showAddressTypeExplainer:t=>t.filter(q0).length>1,addressTooltipNetworkName:(t,e,r)=>r.filter(q0).length>=2?EE(t,e)??K.getChainName(t):K.getChainName(t)};l();h();var HD={badge:(t,e)=>{switch(t){case"eip155:41454":case"eip155:10143":return K.getNetworkDefinition(t).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var Dne=new Q0({solana:{},ethereum:{},polygon:{},base:{},arbitrum:{},monad:HD,bitcoin:FD,sui:{}}),KD=y3(Dne);function Nne(t){let e=kC();return t.map(r=>KD.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,e)??K.getNetworkName(r.networkID))}l();h();l();h();l();h();l();h();var One=()=>{let{data:t}=Xi(),e=yh(),r=t?.username;return Je({queryKey:fr.userProfileAttributeEffect(r),queryFn:async()=>(r&&(un.setSubjectAttributes({username:r}),await e()),!0)}),r};l();h();var qD=j(Nt());l();h();var Une=/^https?:\/\/.+$/,VD=t=>Rne(t?.icon),Rne=t=>t?t.match(Une)?{type:th.Image,imageUrl:t}:{type:th.Emoji,unicode:t}:{type:th.Default};var Lne=()=>{let{data:t}=Xi();return(0,qD.useMemo)(()=>VD(t),[t])};l();h();var zD=j(Nt());var Mne=()=>{let{data:t}=Xi();return(0,zD.useMemo)(()=>t?.privacyState??"public",[t?.privacyState])};l();h();var jD=j(Nt());var Fne=()=>{let{data:t}=Xi();return(0,jD.useMemo)(()=>t?.addresses,[t?.addresses])};l();h();l();h();var WD=j(Nt());var Hne=0,Kne=t=>t!==null?t.split("@")[Hne]:null,Vne=async(t,e)=>{let r=await t.getUser();if(!r)throw new Error("no user");let n=await e.getUserProfile();return{userID:r.userID,username:n?.username??null,email:Kne(r.email??null)}},qne=()=>{let t=bu(),e=at(),{data:r={}}=UE();return(0,WD.useCallback)(async()=>{try{return{...await Vne(t,e),authFactors:r}}catch{return{userID:null,username:null,email:null,authFactors:r}}},[r,t,e])};var jne=j(Nt());l();h();var GD=j(Nt());var Wne=()=>{let{data:t}=_i(),e=(0,GD.useMemo)(()=>{if(!t||!t.addresses.length)return K.getChainID("solana:101");let r=t.addresses[0];return K.getChainID(r.networkID)},[t]);return{caip19:Mb(Hb(e)),tokenName:K.getChainName(e),tokenSymbol:K.getTokenSymbol(e)}};l();h();var Gne=()=>{let{data:[t]}=eo(["enable-sui-testnet"]);return X0(t)};l();h();l();h();var YD=j(Nt());l();h();var $D=()=>{let{data:t}=Zi(),{data:e}=lu(),{data:r}=Xi(),{data:[n]}=eo(["enable-auto-patch-chains"]);return Je({queryKey:Be.patchProfileAddresses({chainAvailability:t?.enabledNetworkIDs,accountIdentifiers:e?.map(i=>i.identifier),user:r,isAutoPatchEnabled:n}),queryFn:t&&e&&r?()=>{let{enabledNetworkIDs:i}=t,o=i?.reduce((f,p)=>{let m=e.find(g=>g.addresses.some(x=>x.networkID===p))?.addresses.find(g=>g.networkID===p)?.address;return m&&(f[p]=m),f},{})??{},s=r?.addresses,a=s?Object.keys(s).filter(K.isNetworkID):[],c=(i??[]).filter(f=>!a.includes(f)).reduce((f,p)=>{let m=o[p];return m&&(f[p]=m),f},{});return Object.keys(c).length>0?{addresses:{...c,...s},addedAddresses:c}:null}:DE})};var $ne=()=>{let{data:t}=$D(),{mutate:e}=O3(),r=qr();(0,YD.useEffect)(()=>{if(t){let{addresses:n,addedAddresses:i}=t,o=Object.keys(i);r.capture("autoSyncUsernameAddresses",{data:{addedChains:o}}),e({addresses:n})}},[t,e,r])};l();h();var QD=j(Nt());var Yne=t=>{let e=(0,QD.useCallback)(r=>r.addresses.find(n=>t===K.getChainID(n.networkID))?.networkID,[t]);return _i({select:e})};l();h();var XD=j(Nt());var Qne=()=>{let{data:t=[]}=ah("local-only"),{data:e=[]}=ah("recoverable-only");return(0,XD.useMemo)(()=>t.length+e.length>1,[t.length,e.length])};l();h();l();h();l();h();var kn=j(Nt());function Xne(t){let e,r=new Set,n=(u,d)=>{let f=typeof u=="function"?u(e):u;if(f!==e){let p=e;e=d?f:Object.assign({},e,f),r.forEach(m=>m(e,p))}},i=()=>e,o=(u,d=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){let g=d(e);if(!f(p,g)){let x=p;u(p=g,x)}}return r.add(m),()=>r.delete(m)},c={setState:n,getState:i,subscribe:(u,d,f)=>d||f?o(u,d,f):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return e=t(n,i,c),c}var Zne=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),ZD=Zne?kn.useEffect:kn.useLayoutEffect;function bx(t){let e=typeof t=="function"?Xne(t):t,r=(n=e.getState,i=Object.is)=>{let[,o]=(0,kn.useReducer)(w=>w+1,0),s=e.getState(),a=(0,kn.useRef)(s),c=(0,kn.useRef)(n),u=(0,kn.useRef)(i),d=(0,kn.useRef)(!1),f=(0,kn.useRef)();f.current===void 0&&(f.current=n(s));let p,m=!1;(a.current!==s||c.current!==n||u.current!==i||d.current)&&(p=n(s),m=!i(f.current,p)),ZD(()=>{m&&(f.current=p),a.current=s,c.current=n,u.current=i,d.current=!1});let g=(0,kn.useRef)(s);ZD(()=>{let w=()=>{try{let T=e.getState(),A=c.current(T);u.current(f.current,A)||(a.current=T,f.current=A,o())}catch{d.current=!0,o()}},S=e.subscribe(w);return e.getState()!==g.current&&w(),S},[]);let x=m?p:f.current;return(0,kn.useDebugValue)(x),x};return Object.assign(r,e),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,e];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var Jne={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},xx=bx(t=>({...Jne,setEditableAccountMetadata:e=>{t({editableAccountMetadata:e})}}));l();h();var JD={username:"",available:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},eN=bx((t,e)=>({...JD,setUsername:r=>t({username:r}),setAvailable:r=>t({available:r}),setIcon:r=>t({icon:r}),addSecretIdentifier:r=>{let n=[...e().secretIdentifiers];n.includes(r)||n.push(r),t({secretIdentifiers:n})},removeSecretIdentifier:r=>{t({secretIdentifiers:e().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...e().accountIdentifiersToSync];n.includes(r)||n.push(r),t({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{t({accountIdentifiersToSync:e().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>t({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>t({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...e().addresses};i[r]=n,t({addresses:i})},removeAddress:(r,n)=>{let i={...e().addresses};i[r]===n&&delete i[r],t({addresses:i})},clearAddresses:()=>{t({addresses:{}})},reset:()=>{t(JD)}}));l();h();var eie=j(Nt());l();h();var tN=j(ws()),Uo=j(Nt());var tie=({importPrivateKeyCallback:t,existingAccounts:e,editableAccountMetadata:r,analytics:n})=>{let{t:i}=Lo(),{formState:{errors:o},control:s,clearErrors:a,getValues:c,setValue:u,register:d,handleSubmit:f,watch:p,trigger:m}=mx({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||Xe.Solana.Mainnet}}),[g,x]=(0,Uo.useState)(null),w=xx(D=>D.setEditableAccountMetadata),{name:S}=p(),T=r?.secrets,A=c("networkID"),_=c("addressType"),C=c("privateKey"),W=(0,Uo.useMemo)(()=>new p0,[]),re={required:!0},Y=(0,Uo.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:D=>{D.target.value||x(null)},validate:D=>{try{let N=c("networkID"),O=c("addressType");if(/\s/.test(D)||!O)return i("addAccountImportAccountIncorrectFormat");let $=K.getNetworkDefinition(N).value,fe=m0({privateKey:D,addressType:O,networkIDValue:$});w({...r,secrets:fe});let se=W.generateKeypairFromPrivateKey(fe,O);return e.find(P=>!P.isReadOnly&&(P.addresses.map(U=>U.address).includes(_b({publicKey:se.publicKey,addressType:O,networkID:N}))||P.addresses.filter(U=>"publicKey"in U).map(U=>U.publicKey).find(U=>U?Buffer.from(U).equals(Buffer.from(se.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,W,e,r,w,c]);(0,Uo.useEffect)(()=>{if(o.privateKey){x(null);return}if(C||T)try{let D=K.getNetworkDefinition(A).value,N=T||m0({privateKey:C,addressType:_,networkIDValue:D}),O=W.generateKeypairFromPrivateKey(N,_);if(!C){let $="";switch(_){case"solana":{$=tN.default.encode(O.privateKey);break}case"eip155":{$="0x"+Buffer.from(O.privateKey).toString("hex");break}case"sui":{$=OE(O.privateKey);break}}u("privateKey",$)}x(_b({publicKey:O.publicKey,addressType:_,networkID:A}))}catch{x(null)}},[o.privateKey,_,W,C,T,u,A]);let G=(0,Uo.useMemo)(()=>!!(S&&C&&!o.name&&!o.privateKey),[o.name,o.privateKey,S,C]),ee=(0,Uo.useCallback)(async({networkID:D,name:N,privateKey:O,addressType:$})=>{let fe=K.getNetworkDefinition(D).value,se=m0({privateKey:O,addressType:$,networkIDValue:fe});await t({chainType:$,name:N,icon:r?.icon,privateKey:se}),n.capture("addPrivateKeyAccount",{data:{networkID:D,chainType:$}})},[t,r?.icon,n]);return{formOnSubmitHandler:f(D=>ee(D)),canSubmit:G,control:s,getValues:c,register:d,setValue:u,trigger:m,errors:o,clearErrors:a,nameValidations:re,privateKey:C,privateKeyValidations:Y,addressPreview:g}};l();h();var rie=async(t,e,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:o}=r,[s,a]=await Promise.all([e.get("developerMode"),kd(e)]),c=await t.fetchAllAccounts(),u=await tc(c,e),d=await ex(e,u.identifier),f={name:d.name,icon:d.icon,identifier:u.identifier,addresses:ox(u,o,n,i,a,s?.isDeveloperMode??!1)};return u.type==="seed"?{...f,type:"seed",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="seedless"?{...f,type:"seedless",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="readOnly"?{...f,type:"readOnly",isReadOnly:!0}:u.type==="privateKey"?{...f,privateKeyIdentifier:u.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...f,type:u.type,isReadOnly:!1}};l();h();export{S8 as a,E8 as b,zd as c,s1 as d,L8 as e,s6 as f,Ru as g,S1 as h,y6 as i,v1 as j,I1 as k,b6 as l,k1 as m,_1 as n,w6 as o,S6 as p,N1 as q,Zp as r,rI as s,iI as t,lw as u,L4 as v,ai as w,hw as x,Xu as y,pw as z,yw as A,j4 as B,W4 as C,G4 as D,$4 as E,Q4 as F,X4 as G,Z4 as H,J4 as I,UH as J,Cn as K,zn as L,sf as M,ice as N,LI as O,nV as P,oV as Q,sV as R,aV as S,cV as T,uV as U,ho as V,Te as W,FI as X,Rw as Y,Ui as Z,fi as _,zI as $,Uy as aa,Gl as ba,$I as ca,Mw as da,sa as ea,m5 as fa,e2 as ga,r2 as ha,i2 as ia,xo as ja,p2 as ka,b2 as la,x2 as ma,Sle as na,la as oa,Q2 as pa,Nc as qa,Oc as ra,Tr as sa,jt as ta,ma as ua,xi as va,eA as wa,E as xa,Um as ya,KA as za,zT as Aa,Vf as Ba,p0 as Ca,jf as Da,yS as Ea,h$ as Fa,m0 as Ga,CS as Ha,hP as Ia,d7 as Ja,yv as Ka,Q9 as La,Xv as Ma,_b as Na,q0 as Oa,ite as Pa,Jv as Qa,ld as Ra,Nb as Sa,Za as Ta,hd as Ua,Ja as Va,ec as Wa,u3 as Xa,K as Ya,BB as Za,Xe as _a,ms as $a,kB as ab,su as bb,_B as cb,PB as db,Mb as eb,CB as fb,DB as gb,NB as hb,OB as ib,UB as jb,RB as kb,LB as lb,MB as mb,FB as nb,HB as ob,KB as pb,VB as qb,Fb as rb,pd as sb,Hb as tb,qB as ub,zB as vb,y3 as wb,Q0 as xb,WB as yb,gte as zb,bte as Ab,xte as Bb,wte as Cb,g3 as Db,b3 as Eb,gs as Fb,p5e as Gb,y5e as Hb,nC as Ib,S3 as Jb,v3 as Kb,kte as Lb,m5e as Mb,b5e as Nb,x5e as Ob,w5e as Pb,EE as Qb,KD as Rb,No as Sb,r9e as Tb,WC as Ub,GC as Vb,$C as Wb,YC as Xb,QC as Yb,XC as Zb,ZC as _b,JC as $b,eD as ac,tD as bc,rD as cc,nD as dc,iD as ec,ix as fc,z7e as gc,j7e as hc,W7e as ic,G7e as jc,$7e as kc,g7e as lc,rne as mc,k3 as nc,au as oc,pC as pc,yC as qc,gC as rc,bC as sc,C3 as tc,D3 as uc,Mte as vc,Zte as wc,Tte as xc,qr as yc,_te as zc,at as Ac,Jte as Bc,ere as Cc,nh as Dc,Xi as Ec,vC as Fc,ore as Gc,O3 as Hc,sre as Ic,are as Jc,cre as Kc,h7e as Lc,VC as Mc,iE as Nc,uE as Oc,Zi as Pc,U3 as Qc,ure as Rc,fre as Sc,xt as Tc,R3 as Uc,dre as Vc,lre as Wc,kC as Xc,Ad as Yc,$Pe as Zc,YPe as _c,QPe as $c,XPe as ad,ZPe as bd,JPe as cd,Pre as dd,Bre as ed,lu as fd,Jre as gd,lt as hd,cx as id,ene as jd,tne as kd,ah as ld,jre as md,fE as nd,uD as od,nne as pd,ine as qd,one as rd,sne as sd,ane as td,cne as ud,une as vd,_i as wd,Gre as xd,fne as yd,dne as zd,lne as Ad,hne as Bd,pne as Cd,sh as Dd,yne as Ed,mne as Fd,Ane as Gd,CD as Hd,mx as Id,Cne as Jd,Nne as Kd,One as Ld,Lne as Md,Mne as Nd,Fne as Od,qne as Pd,Wne as Qd,Gne as Rd,$re as Sd,Yre as Td,$ne as Ud,Qre as Vd,Yne as Wd,Zre as Xd,Qne as Yd,bx as Zd,xx as _d,eN as $d,tie as ae,rie as be};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/bip39/esm/index.js:
  (*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-D7Z6MPRS.js.map
