import{w as jk}from"./chunk-HIWDTKJJ.js";import{a as lB}from"./chunk-3XC45JK7.js";import{q as YB}from"./chunk-G7OTLN34.js";import{e as qp}from"./chunk-GDBECYVT.js";import{Y as JB,aa as ek,e as CB,f as _B,j as RB,n as LB,z as WB}from"./chunk-US2EC2AF.js";import{a as Ak}from"./chunk-JOA3PMVO.js";import{a as OB}from"./chunk-7F2GBYX5.js";import{a as Uw}from"./chunk-HYOCMEEG.js";import{a as ua}from"./chunk-LTDRBNZN.js";import{a as Hw}from"./chunk-IBEI3NGL.js";import{a as dB,f as mB,g as BB}from"./chunk-O2N6PUOM.js";import{a as ca}from"./chunk-QY3T2P2H.js";import{a as Kp}from"./chunk-DZ3GQOT6.js";import{$a as bB,$c as $r,A as FB,Ab as oa,B as hB,C as ja,Cb as na,Da as wB,E as SB,Eb as sa,Ec as HB,Ed as Bs,Fb as GB,Fc as Oe,Gb as No,Hb as TB,Hd as Tp,Ib as PB,Id as Uj,Jd as ks,La as ea,Ma as $B,Qb as DB,Ra as Gp,Sa as IB,Sb as Aj,Tb as Fe,Ub as ia,Uc as VB,Xb as NB,Xc as Me,Yc as st,Zb as KB,Zc as uj,_a as vB,_c as XB,bb as qB,db as ta,eb as xB,f as fB,fb as Do,g as Pe,gb as ra,hd as zB,i as EB,j as gB,k as yB,l as Ro,ld as V,nd as he,oc as ls,od as Ce,pc as UB,sc as nt,tc as $j,vc as QB,xd as ms,yc as ds}from"./chunk-EIQDOUTB.js";import{d as MB,h as Nt}from"./chunk-3IV4Y5QP.js";import{a as pa}from"./chunk-XJI624TH.js";import{b as GA}from"./chunk-NEKSPHVV.js";import{N as xp,U as kB,j as tB,o as ZA}from"./chunk-O3RSUGZX.js";import{c as Wi,h as Ji,j as bp,k as cs}from"./chunk-65FAE5DM.js";import{a as _p,b as Rp,d as Dp}from"./chunk-DBO6DP4Z.js";import{a as Pp,b as aa,g as Op,i as Mp,j as Qj,k as Cp,l as ZB,n as Np}from"./chunk-5W7YPRT3.js";import{$a as ge,$d as eB,Ac as Yi,Bc as Qm,C as Li,Dc as Hm,Dd as ps,Eb as Dm,Ec as VA,Fc as Vm,Ib as Nm,L as zA,Na as as,Rb as Km,Tc as Mo,Vc as zm,Vd as wr,Xa as _m,Xc as Wm,Ya as $,Z as hr,Za as tt,Zd as TA,_a as iA,_c as Zi,cb as rt,cd as Jm,db as ie,dd as Ym,eb as J,fb as Sr,fd as Zm,ib as xo,lb as Rm,ld as AB,nd as jB,pa as Cm,pc as DA,qc as ot,tb as _j,wb as Go,wc as Lm,wd as FA,xb as To,y as oe,yc as W}from"./chunk-D7Z6MPRS.js";import{n as bo,u as Sm}from"./chunk-NZAWO25Q.js";import{C as ae,D as Oo,K as ye,g as z,j as sA,s as Um,z as Po}from"./chunk-E2H5RB2U.js";import{c as la}from"./chunk-CWJVYWRL.js";import{Ea as pB,Ia as uB,J as sB,O as us,R as iB,T as aB,U as ce,ca as Co,d as G,da as cB,i as Xm,j as gA,k as QA,p as rB,q as oB,s as Lj,v as Aa,w as kA,x as xA,z as nB,za as _o}from"./chunk-27TD4NX4.js";import{B as Ee,D as Mm,L as BA,b as Lw,q as UA,w as lA}from"./chunk-YJV3X2ON.js";import{C as Dt,D as b,f as Kw,m as wm,n as $m,p as Qi,q as Im,u as AA,w as uA,x as se,y as vm,z as tA}from"./chunk-FBDT5S2M.js";import{S as qo,T as Xi,U as xm,V as Gm,W as Rt,X as Qw,Y as ss,Z as Kj,_ as Mj,a as T,aa as is,b as Y,ba as Tm,ca as wA,da as Pm,ea as Om,fa as Cj,ga as zi,m as Ip,n as bm,o as qm,p as Hi,s as vp,u as Vi,v as Te,w as eA}from"./chunk-TKSJVOQZ.js";import{A as Fr,B as gj,a as x,h as l,j as Ui,l as ne,m as Ct,n as _t,x as vA,z as oj}from"./chunk-UA6ADLWZ.js";import{c as Oj,d as Dw,f as v,h as n,l as Nw,m as Buffer,n as s}from"./chunk-3KENBVE7.js";var Gf=Oj((ut,xf)=>{n();s();var qf=typeof self<"u"?self:ut,_a=function(){function j(){this.fetch=!1,this.DOMException=qf.DOMException}return j.prototype=qf,new j}();(function(j){var A=function(e){var t={searchParams:"URLSearchParams"in j,iterable:"Symbol"in j&&"iterator"in Symbol,blob:"FileReader"in j&&"Blob"in j&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in j,arrayBuffer:"ArrayBuffer"in j};function r(h){return h&&DataView.prototype.isPrototypeOf(h)}if(t.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(h){return h&&o.indexOf(Object.prototype.toString.call(h))>-1};function a(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()}function c(h){return typeof h!="string"&&(h=String(h)),h}function p(h){var q={next:function(){var C=h.shift();return{done:C===void 0,value:C}}};return t.iterable&&(q[Symbol.iterator]=function(){return q}),q}function d(h){this.map={},h instanceof d?h.forEach(function(q,C){this.append(C,q)},this):Array.isArray(h)?h.forEach(function(q){this.append(q[0],q[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(q){this.append(q,h[q])},this)}d.prototype.append=function(h,q){h=a(h),q=c(q);var C=this.map[h];this.map[h]=C?C+", "+q:q},d.prototype.delete=function(h){delete this.map[a(h)]},d.prototype.get=function(h){return h=a(h),this.has(h)?this.map[h]:null},d.prototype.has=function(h){return this.map.hasOwnProperty(a(h))},d.prototype.set=function(h,q){this.map[a(h)]=c(q)},d.prototype.forEach=function(h,q){for(var C in this.map)this.map.hasOwnProperty(C)&&h.call(q,this.map[C],C,this)},d.prototype.keys=function(){var h=[];return this.forEach(function(q,C){h.push(C)}),p(h)},d.prototype.values=function(){var h=[];return this.forEach(function(q){h.push(q)}),p(h)},d.prototype.entries=function(){var h=[];return this.forEach(function(q,C){h.push([C,q])}),p(h)},t.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function m(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function B(h){return new Promise(function(q,C){h.onload=function(){q(h.result)},h.onerror=function(){C(h.error)}})}function f(h){var q=new FileReader,C=B(q);return q.readAsArrayBuffer(h),C}function k(h){var q=new FileReader,C=B(q);return q.readAsText(h),C}function E(h){for(var q=new Uint8Array(h),C=new Array(q.length),R=0;R<q.length;R++)C[R]=String.fromCharCode(q[R]);return C.join("")}function g(h){if(h.slice)return h.slice(0);var q=new Uint8Array(h.byteLength);return q.set(new Uint8Array(h)),q.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(h){this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:t.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:t.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():t.arrayBuffer&&t.blob&&r(h)?(this._bodyArrayBuffer=g(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||i(h))?this._bodyArrayBuffer=g(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var h=m(this);if(h)return h;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(h){var q=h.toUpperCase();return F.indexOf(q)>-1?q:h}function I(h,q){q=q||{};var C=q.body;if(h instanceof I){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,q.headers||(this.headers=new d(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!C&&h._bodyInit!=null&&(C=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new d(q.headers)),this.method=S(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function O(h){var q=new FormData;return h.trim().split("&").forEach(function(C){if(C){var R=C.split("="),K=R.shift().replace(/\+/g," "),D=R.join("=").replace(/\+/g," ");q.append(decodeURIComponent(K),decodeURIComponent(D))}}),q}function M(h){var q=new d,C=h.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(R){var K=R.split(":"),D=K.shift().trim();if(D){var L=K.join(":").trim();q.append(D,L)}}),q}y.call(I.prototype);function P(h,q){q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in q?q.statusText:"OK",this.headers=new d(q.headers),this.url=q.url||"",this._initBody(h)}y.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},P.error=function(){var h=new P(null,{status:0,statusText:""});return h.type="error",h};var X=[301,302,303,307,308];P.redirect=function(h,q){if(X.indexOf(q)===-1)throw new RangeError("Invalid status code");return new P(null,{status:q,headers:{location:h}})},e.DOMException=j.DOMException;try{new e.DOMException}catch{e.DOMException=function(q,C){this.message=q,this.name=C;var R=Error(q);this.stack=R.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(h,q){return new Promise(function(C,R){var K=new I(h,q);if(K.signal&&K.signal.aborted)return R(new e.DOMException("Aborted","AbortError"));var D=new XMLHttpRequest;function L(){D.abort()}D.onload=function(){var H={status:D.status,statusText:D.statusText,headers:M(D.getAllResponseHeaders()||"")};H.url="responseURL"in D?D.responseURL:H.headers.get("X-Request-URL");var U="response"in D?D.response:D.responseText;C(new P(U,H))},D.onerror=function(){R(new TypeError("Network request failed"))},D.ontimeout=function(){R(new TypeError("Network request failed"))},D.onabort=function(){R(new e.DOMException("Aborted","AbortError"))},D.open(K.method,K.url,!0),K.credentials==="include"?D.withCredentials=!0:K.credentials==="omit"&&(D.withCredentials=!1),"responseType"in D&&t.blob&&(D.responseType="blob"),K.headers.forEach(function(H,U){D.setRequestHeader(U,H)}),K.signal&&(K.signal.addEventListener("abort",L),D.onreadystatechange=function(){D.readyState===4&&K.signal.removeEventListener("abort",L)}),D.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return _.polyfill=!0,j.fetch||(j.fetch=_,j.Headers=d,j.Request=I,j.Response=P),e.Headers=d,e.Request=I,e.Response=P,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({})})(_a);_a.fetch.ponyfill=!0;delete _a.fetch.polyfill;var Yo=_a;ut=Yo.fetch;ut.default=Yo.fetch;ut.fetch=Yo.fetch;ut.Headers=Yo.Headers;ut.Request=Yo.Request;ut.Response=Yo.Response;xf.exports=ut});var Pf=Oj((aH,Tf)=>{n();s();(function(){var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return A.rotl(e,8)&16711935|A.rotl(e,24)&4278255360;for(var t=0;t<e.length;t++)e[t]=A.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(Math.random()*256));return t},bytesToWords:function(e){for(var t=[],r=0,o=0;r<e.length;r++,o+=8)t[o>>>5]|=e[r]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<e.length*32;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((e[r]&15).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)r*8+i*6<=e.length*8?t.push(j.charAt(o>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var t=[],r=0,o=0;r<e.length;o=++r%4)o!=0&&t.push((j.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<o*2|j.indexOf(e.charAt(r))>>>6-o*2);return t}};Tf.exports=A})()});var Ju=Oj((uH,Of)=>{n();s();var Wu={utf8:{stringToBytes:function(j){return Wu.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(Wu.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var A=[],e=0;e<j.length;e++)A.push(j.charCodeAt(e)&255);return A},bytesToString:function(j){for(var A=[],e=0;e<j.length;e++)A.push(String.fromCharCode(j[e]));return A.join("")}}};Of.exports=Wu});var Cf=Oj((mH,Mf)=>{n();s();(function(){var j=Pf(),A=Ju().utf8,e=Ju().bin,t=function(o){o.constructor==String?o=A.stringToBytes(o):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||(o=o.toString());var i=j.bytesToWords(o),a=o.length*8,c=[],p=1732584193,d=-271733879,m=-1732584194,B=271733878,f=-1009589776;i[a>>5]|=128<<24-a%32,i[(a+64>>>9<<4)+15]=a;for(var k=0;k<i.length;k+=16){for(var E=p,g=d,y=m,F=B,S=f,I=0;I<80;I++){if(I<16)c[I]=i[k+I];else{var O=c[I-3]^c[I-8]^c[I-14]^c[I-16];c[I]=O<<1|O>>>31}var M=(p<<5|p>>>27)+f+(c[I]>>>0)+(I<20?(d&m|~d&B)+1518500249:I<40?(d^m^B)+1859775393:I<60?(d&m|d&B|m&B)-1894007588:(d^m^B)-899497514);f=B,B=m,m=d<<30|d>>>2,d=p,p=M}p+=E,d+=g,m+=y,B+=F,f+=S}return[p,d,m,B,f]},r=function(o,i){var a=j.wordsToBytes(t(o));return i&&i.asBytes?a:i&&i.asString?e.bytesToString(a):j.bytesToHex(a)};r._blocksize=16,r._digestsize=20,Mf.exports=r})()});var Df=Oj((FH,UI)=>{UI.exports={name:"@phantom-labs/blocklist",version:"0.13.0",main:"index.js",types:"index.d.ts",repository:"git@github.com:phantom-labs/blocklist.git",author:"Jordan Leigh <AlwaysBCoding@gmail.com>",license:"MIT",scripts:{build:"node build.js"},dependencies:{"js-yaml":"^4.1.0",sha3:"^2.1.4"}}});var Nf=Oj((hH,QI)=>{QI.exports={blocklist:["phantomweb.app","aurory.app","solvision.io","staratlas.art","starsatlas.com","sollet.cc","raydlum.io","aurorynft.com","sneks.gg","solletweb.io","i-sollet.com","fancyfrenchienft.art","solanawebwallet.online","phahtom.com","server-syncwallet.com","staratias.app","raydium.network","grapesnetwork.me","staratias.art","soistarter.org","audius-nft.top","aurory.me","degenapes.app","phantom-app.online","phantomwallet.net","dapps-node.com","phantom-app.link","solanaoutage.com","walletconnectdapps.net","staratlas.cx","web-phantom.app","0120tt.com"],whitelist:[],fuzzylist:[],contentHash:"830ea1c9a833213eabc17990adf053081f503b1203ca9a2c711db7199e657293"}});var Kf=Oj(Al=>{n();s();var{version:HI}=Df(),VI=Nf(),XI=()=>HI,zI=()=>VI;Al.getVersion=XI;Al.getBlocklist=zI});var Uf=Oj(An=>{"use strict";n();s();An.__esModule=!0;An.distance=An.closest=void 0;var lt=new Uint32Array(65536),WI=function(j,A){for(var e=j.length,t=A.length,r=1<<e-1,o=-1,i=0,a=e,c=e;c--;)lt[j.charCodeAt(c)]|=1<<c;for(c=0;c<t;c++){var p=lt[A.charCodeAt(c)],d=p|i;p|=(p&o)+o^o,i|=~(p|o),o&=p,i&r&&a++,o&r&&a--,i=i<<1|1,o=o<<1|~(d|i),i&=d}for(c=e;c--;)lt[j.charCodeAt(c)]=0;return a},JI=function(j,A){for(var e=A.length,t=j.length,r=[],o=[],i=Math.ceil(e/32),a=Math.ceil(t/32),c=0;c<i;c++)o[c]=-1,r[c]=0;for(var p=0;p<a-1;p++){for(var d=0,m=-1,B=p*32,f=Math.min(32,t)+B,k=B;k<f;k++)lt[j.charCodeAt(k)]|=1<<k;for(var c=0;c<e;c++){var E=lt[A.charCodeAt(c)],g=o[c/32|0]>>>c&1,y=r[c/32|0]>>>c&1,F=E|d,S=((E|y)&m)+m^m|E|y,I=d|~(S|m),O=m&S;I>>>31^g&&(o[c/32|0]^=1<<c),O>>>31^y&&(r[c/32|0]^=1<<c),I=I<<1|g,O=O<<1|y,m=O|~(F|I),d=I&F}for(var k=B;k<f;k++)lt[j.charCodeAt(k)]=0}for(var M=0,P=-1,X=p*32,_=Math.min(32,t-X)+X,k=X;k<_;k++)lt[j.charCodeAt(k)]|=1<<k;for(var h=t,c=0;c<e;c++){var E=lt[A.charCodeAt(c)],g=o[c/32|0]>>>c&1,y=r[c/32|0]>>>c&1,F=E|M,S=((E|y)&P)+P^P|E|y,I=M|~(S|P),O=P&S;h+=I>>>t-1&1,h-=O>>>t-1&1,I>>>31^g&&(o[c/32|0]^=1<<c),O>>>31^y&&(r[c/32|0]^=1<<c),I=I<<1|g,O=O<<1|y,P=O|~(F|I),M=I&F}for(var k=X;k<_;k++)lt[j.charCodeAt(k)]=0;return h},Lf=function(j,A){if(j.length<A.length){var e=A;A=j,j=e}return A.length===0?j.length:j.length<=32?WI(j,A):JI(j,A)};An.distance=Lf;var YI=function(j,A){for(var e=1/0,t=0,r=0;r<A.length;r++){var o=Lf(j,A[r]);o<e&&(e=o,t=r)}return A[t]};An.closest=YI});var Qf=Oj((jl,qs)=>{n();s();(function(){"use strict";var j;try{j=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null}catch{console.log("Collator could not be initialized and wouldn't be used")}var A=Uf(),e=[],t=[],r={get:function(o,i,a){var c=a&&j&&a.useCollator;if(c){var p=o.length,d=i.length;if(p===0)return d;if(d===0)return p;var m,B,f,k,E;for(f=0;f<d;++f)e[f]=f,t[f]=i.charCodeAt(f);e[d]=d;var g;for(f=0;f<p;++f){for(B=f+1,k=0;k<d;++k)m=B,g=j.compare(o.charAt(f),String.fromCharCode(t[k]))===0,B=e[k]+(g?0:1),E=m+1,B>E&&(B=E),E=e[k+1]+1,B>E&&(B=E),e[k]=m;e[k]=B}return B}return A.distance(o,i)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return r}):typeof qs<"u"&&qs!==null&&typeof jl<"u"&&qs.exports===jl?qs.exports=r:(typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"||typeof self<"u"&&self!==null)&&(self.Levenshtein=r)})()});var Sg=Oj((Ms,rn)=>{n();s();var Ag=200,Iv="Expected a function",Hl="__lodash_hash_undefined__",Ya=1,nn=2,Vl=1/0,jg=9007199254740991,Va="[object Arguments]",Rl="[object Array]",eg="[object Boolean]",tg="[object Date]",rg="[object Error]",og="[object Function]",vv="[object GeneratorFunction]",Xa="[object Map]",ng="[object Number]",tn="[object Object]",QE="[object Promise]",sg="[object RegExp]",za="[object Set]",ig="[object String]",ag="[object Symbol]",Dl="[object WeakMap]",cg="[object ArrayBuffer]",Wa="[object DataView]",bv="[object Float32Array]",qv="[object Float64Array]",xv="[object Int8Array]",Gv="[object Int16Array]",Tv="[object Int32Array]",Pv="[object Uint8Array]",Ov="[object Uint8ClampedArray]",Mv="[object Uint16Array]",Cv="[object Uint32Array]",_v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rv=/^\w*$/,Dv=/^\./,Nv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kv=/[\\^$.*+?()[\]{}|]/g,Lv=/\\(\\)?/g,Uv=/^\[object .+?Constructor\]$/,Qv=/^(?:0|[1-9]\d*)$/,CA={};CA[bv]=CA[qv]=CA[xv]=CA[Gv]=CA[Tv]=CA[Pv]=CA[Ov]=CA[Mv]=CA[Cv]=!0;CA[Va]=CA[Rl]=CA[cg]=CA[eg]=CA[Wa]=CA[tg]=CA[rg]=CA[og]=CA[Xa]=CA[ng]=CA[tn]=CA[sg]=CA[za]=CA[ig]=CA[Dl]=!1;var pg=typeof self=="object"&&self&&self.Object===Object&&self,Hv=typeof self=="object"&&self&&self.Object===Object&&self,Jt=pg||Hv||Function("return this")(),ug=typeof Ms=="object"&&Ms&&!Ms.nodeType&&Ms,HE=ug&&typeof rn=="object"&&rn&&!rn.nodeType&&rn,Vv=HE&&HE.exports===ug,VE=Vv&&pg.process,XE=function(){try{return VE&&VE.binding("util")}catch{}}(),zE=XE&&XE.isTypedArray;function Xv(j,A){var e=j?j.length:0;return!!e&&Yv(j,A,0)>-1}function zv(j,A,e){for(var t=-1,r=j?j.length:0;++t<r;)if(e(A,j[t]))return!0;return!1}function Wv(j,A){for(var e=-1,t=j?j.length:0;++e<t;)if(A(j[e],e,j))return!0;return!1}function Jv(j,A,e,t){for(var r=j.length,o=e+(t?1:-1);t?o--:++o<r;)if(A(j[o],o,j))return o;return-1}function Yv(j,A,e){if(A!==A)return Jv(j,Zv,e);for(var t=e-1,r=j.length;++t<r;)if(j[t]===A)return t;return-1}function Zv(j){return j!==j}function Ab(j){return function(A){return A?.[j]}}function jb(j,A){for(var e=-1,t=Array(j);++e<j;)t[e]=A(e);return t}function eb(j){return function(A){return j(A)}}function tb(j,A){return j.has(A)}function rb(j,A){return j?.[A]}function Nl(j){var A=!1;if(j!=null&&typeof j.toString!="function")try{A=!!(j+"")}catch{}return A}function ob(j){var A=-1,e=Array(j.size);return j.forEach(function(t,r){e[++A]=[r,t]}),e}function nb(j,A){return function(e){return j(A(e))}}function Xl(j){var A=-1,e=Array(j.size);return j.forEach(function(t){e[++A]=t}),e}var sb=Array.prototype,ib=Function.prototype,Za=Object.prototype,Cl=Jt["__core-js_shared__"],WE=function(){var j=/[^.]+$/.exec(Cl&&Cl.keys&&Cl.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),lg=ib.toString,Bt=Za.hasOwnProperty,sn=Za.toString,ab=RegExp("^"+lg.call(Bt).replace(Kv,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),JE=Jt.Symbol,YE=Jt.Uint8Array,cb=Za.propertyIsEnumerable,pb=sb.splice,ub=nb(Object.keys,Object),Kl=an(Jt,"DataView"),Cs=an(Jt,"Map"),Ll=an(Jt,"Promise"),on=an(Jt,"Set"),Ul=an(Jt,"WeakMap"),_s=an(Object,"create"),lb=Mr(Kl),db=Mr(Cs),mb=Mr(Ll),Bb=Mr(on),kb=Mr(Ul),Ja=JE?JE.prototype:void 0,_l=Ja?Ja.valueOf:void 0,ZE=Ja?Ja.toString:void 0;function Pr(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function fb(){this.__data__=_s?_s(null):{}}function Eb(j){return this.has(j)&&delete this.__data__[j]}function gb(j){var A=this.__data__;if(_s){var e=A[j];return e===Hl?void 0:e}return Bt.call(A,j)?A[j]:void 0}function yb(j){var A=this.__data__;return _s?A[j]!==void 0:Bt.call(A,j)}function Fb(j,A){var e=this.__data__;return e[j]=_s&&A===void 0?Hl:A,this}Pr.prototype.clear=fb;Pr.prototype.delete=Eb;Pr.prototype.get=gb;Pr.prototype.has=yb;Pr.prototype.set=Fb;function kt(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function hb(){this.__data__=[]}function Sb(j){var A=this.__data__,e=A6(A,j);if(e<0)return!1;var t=A.length-1;return e==t?A.pop():pb.call(A,e,1),!0}function wb(j){var A=this.__data__,e=A6(A,j);return e<0?void 0:A[e][1]}function $b(j){return A6(this.__data__,j)>-1}function Ib(j,A){var e=this.__data__,t=A6(e,j);return t<0?e.push([j,A]):e[t][1]=A,this}kt.prototype.clear=hb;kt.prototype.delete=Sb;kt.prototype.get=wb;kt.prototype.has=$b;kt.prototype.set=Ib;function ft(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function vb(){this.__data__={hash:new Pr,map:new(Cs||kt),string:new Pr}}function bb(j){return j6(this,j).delete(j)}function qb(j){return j6(this,j).get(j)}function xb(j){return j6(this,j).has(j)}function Gb(j,A){return j6(this,j).set(j,A),this}ft.prototype.clear=vb;ft.prototype.delete=bb;ft.prototype.get=qb;ft.prototype.has=xb;ft.prototype.set=Gb;function Rs(j){var A=-1,e=j?j.length:0;for(this.__data__=new ft;++A<e;)this.add(j[A])}function Tb(j){return this.__data__.set(j,Hl),this}function Pb(j){return this.__data__.has(j)}Rs.prototype.add=Rs.prototype.push=Tb;Rs.prototype.has=Pb;function mt(j){this.__data__=new kt(j)}function Ob(){this.__data__=new kt}function Mb(j){return this.__data__.delete(j)}function Cb(j){return this.__data__.get(j)}function _b(j){return this.__data__.has(j)}function Rb(j,A){var e=this.__data__;if(e instanceof kt){var t=e.__data__;if(!Cs||t.length<Ag-1)return t.push([j,A]),this;e=this.__data__=new ft(t)}return e.set(j,A),this}mt.prototype.clear=Ob;mt.prototype.delete=Mb;mt.prototype.get=Cb;mt.prototype.has=_b;mt.prototype.set=Rb;function Db(j,A){var e=Or(j)||yg(j)?jb(j.length,String):[],t=e.length,r=!!t;for(var o in j)(A||Bt.call(j,o))&&!(r&&(o=="length"||kg(o,t)))&&e.push(o);return e}function A6(j,A){for(var e=j.length;e--;)if(gg(j[e][0],A))return e;return-1}function dg(j,A){A=e6(A,j)?[A]:mg(A);for(var e=0,t=A.length;j!=null&&e<t;)j=j[t6(A[e++])];return e&&e==t?j:void 0}function Nb(j){return sn.call(j)}function Kb(j,A){return j!=null&&A in Object(j)}function zl(j,A,e,t,r){return j===A?!0:j==null||A==null||!r6(j)&&!o6(A)?j!==j&&A!==A:Lb(j,A,zl,e,t,r)}function Lb(j,A,e,t,r,o){var i=Or(j),a=Or(A),c=Rl,p=Rl;i||(c=Wt(j),c=c==Va?tn:c),a||(p=Wt(A),p=p==Va?tn:p);var d=c==tn&&!Nl(j),m=p==tn&&!Nl(A),B=c==p;if(B&&!d)return o||(o=new mt),i||pq(j)?Bg(j,A,e,t,r,o):jq(j,A,c,e,t,r,o);if(!(r&nn)){var f=d&&Bt.call(j,"__wrapped__"),k=m&&Bt.call(A,"__wrapped__");if(f||k){var E=f?j.value():j,g=k?A.value():A;return o||(o=new mt),e(E,g,t,r,o)}}return B?(o||(o=new mt),eq(j,A,e,t,r,o)):!1}function Ub(j,A,e,t){var r=e.length,o=r,i=!t;if(j==null)return!o;for(j=Object(j);r--;){var a=e[r];if(i&&a[2]?a[1]!==j[a[0]]:!(a[0]in j))return!1}for(;++r<o;){a=e[r];var c=a[0],p=j[c],d=a[1];if(i&&a[2]){if(p===void 0&&!(c in j))return!1}else{var m=new mt;if(t)var B=t(p,d,c,j,A,m);if(!(B===void 0?zl(d,p,t,Ya|nn,m):B))return!1}}return!0}function Qb(j){if(!r6(j)||nq(j))return!1;var A=hg(j)||Nl(j)?ab:Uv;return A.test(Mr(j))}function Hb(j){return o6(j)&&Jl(j.length)&&!!CA[sn.call(j)]}function Vb(j){return typeof j=="function"?j:j==null?mq:typeof j=="object"?Or(j)?Wb(j[0],j[1]):zb(j):kq(j)}function Xb(j){if(!sq(j))return ub(j);var A=[];for(var e in Object(j))Bt.call(j,e)&&e!="constructor"&&A.push(e);return A}function zb(j){var A=tq(j);return A.length==1&&A[0][2]?Eg(A[0][0],A[0][1]):function(e){return e===j||Ub(e,j,A)}}function Wb(j,A){return e6(j)&&fg(A)?Eg(t6(j),A):function(e){var t=lq(e,j);return t===void 0&&t===A?dq(e,j):zl(A,t,void 0,Ya|nn)}}function Jb(j){return function(A){return dg(A,j)}}function Yb(j){if(typeof j=="string")return j;if(Yl(j))return ZE?ZE.call(j):"";var A=j+"";return A=="0"&&1/j==-Vl?"-0":A}function Zb(j,A,e){var t=-1,r=Xv,o=j.length,i=!0,a=[],c=a;if(e)i=!1,r=zv;else if(o>=Ag){var p=A?null:Aq(j);if(p)return Xl(p);i=!1,r=tb,c=new Rs}else c=A?[]:a;A:for(;++t<o;){var d=j[t],m=A?A(d):d;if(d=e||d!==0?d:0,i&&m===m){for(var B=c.length;B--;)if(c[B]===m)continue A;A&&c.push(m),a.push(d)}else r(c,m,e)||(c!==a&&c.push(m),a.push(d))}return a}function mg(j){return Or(j)?j:iq(j)}var Aq=on&&1/Xl(new on([,-0]))[1]==Vl?function(j){return new on(j)}:Bq;function Bg(j,A,e,t,r,o){var i=r&nn,a=j.length,c=A.length;if(a!=c&&!(i&&c>a))return!1;var p=o.get(j);if(p&&o.get(A))return p==A;var d=-1,m=!0,B=r&Ya?new Rs:void 0;for(o.set(j,A),o.set(A,j);++d<a;){var f=j[d],k=A[d];if(t)var E=i?t(k,f,d,A,j,o):t(f,k,d,j,A,o);if(E!==void 0){if(E)continue;m=!1;break}if(B){if(!Wv(A,function(g,y){if(!B.has(y)&&(f===g||e(f,g,t,r,o)))return B.add(y)})){m=!1;break}}else if(!(f===k||e(f,k,t,r,o))){m=!1;break}}return o.delete(j),o.delete(A),m}function jq(j,A,e,t,r,o,i){switch(e){case Wa:if(j.byteLength!=A.byteLength||j.byteOffset!=A.byteOffset)return!1;j=j.buffer,A=A.buffer;case cg:return!(j.byteLength!=A.byteLength||!t(new YE(j),new YE(A)));case eg:case tg:case ng:return gg(+j,+A);case rg:return j.name==A.name&&j.message==A.message;case sg:case ig:return j==A+"";case Xa:var a=ob;case za:var c=o&nn;if(a||(a=Xl),j.size!=A.size&&!c)return!1;var p=i.get(j);if(p)return p==A;o|=Ya,i.set(j,A);var d=Bg(a(j),a(A),t,r,o,i);return i.delete(j),d;case ag:if(_l)return _l.call(j)==_l.call(A)}return!1}function eq(j,A,e,t,r,o){var i=r&nn,a=Ql(j),c=a.length,p=Ql(A),d=p.length;if(c!=d&&!i)return!1;for(var m=c;m--;){var B=a[m];if(!(i?B in A:Bt.call(A,B)))return!1}var f=o.get(j);if(f&&o.get(A))return f==A;var k=!0;o.set(j,A),o.set(A,j);for(var E=i;++m<c;){B=a[m];var g=j[B],y=A[B];if(t)var F=i?t(y,g,B,A,j,o):t(g,y,B,j,A,o);if(!(F===void 0?g===y||e(g,y,t,r,o):F)){k=!1;break}E||(E=B=="constructor")}if(k&&!E){var S=j.constructor,I=A.constructor;S!=I&&"constructor"in j&&"constructor"in A&&!(typeof S=="function"&&S instanceof S&&typeof I=="function"&&I instanceof I)&&(k=!1)}return o.delete(j),o.delete(A),k}function j6(j,A){var e=j.__data__;return oq(A)?e[typeof A=="string"?"string":"hash"]:e.map}function tq(j){for(var A=Ql(j),e=A.length;e--;){var t=A[e],r=j[t];A[e]=[t,r,fg(r)]}return A}function an(j,A){var e=rb(j,A);return Qb(e)?e:void 0}var Wt=Nb;(Kl&&Wt(new Kl(new ArrayBuffer(1)))!=Wa||Cs&&Wt(new Cs)!=Xa||Ll&&Wt(Ll.resolve())!=QE||on&&Wt(new on)!=za||Ul&&Wt(new Ul)!=Dl)&&(Wt=function(j){var A=sn.call(j),e=A==tn?j.constructor:void 0,t=e?Mr(e):void 0;if(t)switch(t){case lb:return Wa;case db:return Xa;case mb:return QE;case Bb:return za;case kb:return Dl}return A});function rq(j,A,e){A=e6(A,j)?[A]:mg(A);for(var t,r=-1,i=A.length;++r<i;){var o=t6(A[r]);if(!(t=j!=null&&e(j,o)))break;j=j[o]}if(t)return t;var i=j?j.length:0;return!!i&&Jl(i)&&kg(o,i)&&(Or(j)||yg(j))}function kg(j,A){return A=A??jg,!!A&&(typeof j=="number"||Qv.test(j))&&j>-1&&j%1==0&&j<A}function e6(j,A){if(Or(j))return!1;var e=typeof j;return e=="number"||e=="symbol"||e=="boolean"||j==null||Yl(j)?!0:Rv.test(j)||!_v.test(j)||A!=null&&j in Object(A)}function oq(j){var A=typeof j;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?j!=="__proto__":j===null}function nq(j){return!!WE&&WE in j}function sq(j){var A=j&&j.constructor,e=typeof A=="function"&&A.prototype||Za;return j===e}function fg(j){return j===j&&!r6(j)}function Eg(j,A){return function(e){return e==null?!1:e[j]===A&&(A!==void 0||j in Object(e))}}var iq=Wl(function(j){j=uq(j);var A=[];return Dv.test(j)&&A.push(""),j.replace(Nv,function(e,t,r,o){A.push(r?o.replace(Lv,"$1"):t||e)}),A});function t6(j){if(typeof j=="string"||Yl(j))return j;var A=j+"";return A=="0"&&1/j==-Vl?"-0":A}function Mr(j){if(j!=null){try{return lg.call(j)}catch{}try{return j+""}catch{}}return""}function aq(j,A){return j&&j.length?Zb(j,Vb(A,2)):[]}function Wl(j,A){if(typeof j!="function"||A&&typeof A!="function")throw new TypeError(Iv);var e=function(){var t=arguments,r=A?A.apply(this,t):t[0],o=e.cache;if(o.has(r))return o.get(r);var i=j.apply(this,t);return e.cache=o.set(r,i),i};return e.cache=new(Wl.Cache||ft),e}Wl.Cache=ft;function gg(j,A){return j===A||j!==j&&A!==A}function yg(j){return cq(j)&&Bt.call(j,"callee")&&(!cb.call(j,"callee")||sn.call(j)==Va)}var Or=Array.isArray;function Fg(j){return j!=null&&Jl(j.length)&&!hg(j)}function cq(j){return o6(j)&&Fg(j)}function hg(j){var A=r6(j)?sn.call(j):"";return A==og||A==vv}function Jl(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=jg}function r6(j){var A=typeof j;return!!j&&(A=="object"||A=="function")}function o6(j){return!!j&&typeof j=="object"}function Yl(j){return typeof j=="symbol"||o6(j)&&sn.call(j)==ag}var pq=zE?eb(zE):Hb;function uq(j){return j==null?"":Yb(j)}function lq(j,A,e){var t=j==null?void 0:dg(j,A);return t===void 0?e:t}function dq(j,A){return j!=null&&rq(j,A,Kb)}function Ql(j){return Fg(j)?Db(j):Xb(j)}function mq(j){return j}function Bq(){}function kq(j){return e6(j)?Ab(t6(j)):Jb(j)}rn.exports=aq});var Wg=Oj((ToA,zg)=>{"use strict";n();s();zg.exports=j=>{if(Object.prototype.toString.call(j)!=="[object Object]")return!1;let A=Object.getPrototypeOf(j);return A===null||A===Object.prototype}});var ey=Oj((Ay,jy)=>{"use strict";n();s();var i6=Wg(),{hasOwnProperty:Yg}=Object.prototype,{propertyIsEnumerable:$x}=Object,ln=(j,A,e)=>Object.defineProperty(j,A,{value:e,writable:!0,enumerable:!0,configurable:!0}),Ix=Ay,Jg={concatArrays:!1,ignoreUndefined:!1},a6=j=>{let A=[];for(let e in j)Yg.call(j,e)&&A.push(e);if(Object.getOwnPropertySymbols){let e=Object.getOwnPropertySymbols(j);for(let t of e)$x.call(j,t)&&A.push(t)}return A};function dn(j){return Array.isArray(j)?vx(j):i6(j)?bx(j):j}function vx(j){let A=j.slice(0,0);return a6(j).forEach(e=>{ln(A,e,dn(j[e]))}),A}function bx(j){let A=Object.getPrototypeOf(j)===null?Object.create(null):{};return a6(j).forEach(e=>{ln(A,e,dn(j[e]))}),A}var Zg=(j,A,e,t)=>(e.forEach(r=>{typeof A[r]>"u"&&t.ignoreUndefined||(r in j&&j[r]!==Object.getPrototypeOf(j)?ln(j,r,c7(j[r],A[r],t)):ln(j,r,dn(A[r])))}),j),qx=(j,A,e)=>{let t=j.slice(0,0),r=0;return[j,A].forEach(o=>{let i=[];for(let a=0;a<o.length;a++)Yg.call(o,a)&&(i.push(String(a)),o===j?ln(t,r++,o[a]):ln(t,r++,dn(o[a])));t=Zg(t,o,a6(o).filter(a=>!i.includes(a)),e)}),t};function c7(j,A,e){return e.concatArrays&&Array.isArray(j)&&Array.isArray(A)?qx(j,A,e):!i6(A)||!i6(j)?dn(A):Zg(j,A,a6(A),e)}jy.exports=function(...j){let A=c7(dn(Jg),this!==Ix&&this||{},Jg),e={_:{}};for(let t of j)if(t!==void 0){if(!i6(t))throw new TypeError("`"+t+"` is not an Option Object");e=c7(e,{_:t},A)}return e._}});var Uy=Oj((Hs,fn)=>{n();s();var Ux=200,Qx="Expected a function",F7="__lodash_hash_undefined__",g6=1,En=2,yy=1/0,Fy=9007199254740991,l6="[object Arguments]",m7="[object Array]",hy="[object Boolean]",Sy="[object Date]",wy="[object Error]",$y="[object Function]",Hx="[object GeneratorFunction]",d6="[object Map]",Iy="[object Number]",kn="[object Object]",uy="[object Promise]",vy="[object RegExp]",m6="[object Set]",by="[object String]",qy="[object Symbol]",B7="[object WeakMap]",xy="[object ArrayBuffer]",B6="[object DataView]",Vx="[object Float32Array]",Xx="[object Float64Array]",zx="[object Int8Array]",Wx="[object Int16Array]",Jx="[object Int32Array]",Yx="[object Uint8Array]",Zx="[object Uint8ClampedArray]",AG="[object Uint16Array]",jG="[object Uint32Array]",eG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tG=/^\w*$/,rG=/^\./,oG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nG=/[\\^$.*+?()[\]{}|]/g,sG=/\\(\\)?/g,iG=/^\[object .+?Constructor\]$/,aG=/^(?:0|[1-9]\d*)$/,RA={};RA[Vx]=RA[Xx]=RA[zx]=RA[Wx]=RA[Jx]=RA[Yx]=RA[Zx]=RA[AG]=RA[jG]=!0;RA[l6]=RA[m7]=RA[xy]=RA[hy]=RA[B6]=RA[Sy]=RA[wy]=RA[$y]=RA[d6]=RA[Iy]=RA[kn]=RA[vy]=RA[m6]=RA[by]=RA[B7]=!1;var Gy=typeof self=="object"&&self&&self.Object===Object&&self,cG=typeof self=="object"&&self&&self.Object===Object&&self,tr=Gy||cG||Function("return this")(),Ty=typeof Hs=="object"&&Hs&&!Hs.nodeType&&Hs,ly=Ty&&typeof fn=="object"&&fn&&!fn.nodeType&&fn,pG=ly&&ly.exports===Ty,dy=pG&&Gy.process,my=function(){try{return dy&&dy.binding("util")}catch{}}(),By=my&&my.isTypedArray;function uG(j,A,e,t){for(var r=-1,o=j?j.length:0;++r<o;){var i=j[r];A(t,i,e(i),j)}return t}function lG(j,A){for(var e=-1,t=j?j.length:0;++e<t;)if(A(j[e],e,j))return!0;return!1}function dG(j){return function(A){return A?.[j]}}function mG(j,A){for(var e=-1,t=Array(j);++e<j;)t[e]=A(e);return t}function BG(j){return function(A){return j(A)}}function kG(j,A){return j?.[A]}function k7(j){var A=!1;if(j!=null&&typeof j.toString!="function")try{A=!!(j+"")}catch{}return A}function fG(j){var A=-1,e=Array(j.size);return j.forEach(function(t,r){e[++A]=[r,t]}),e}function EG(j,A){return function(e){return j(A(e))}}function gG(j){var A=-1,e=Array(j.size);return j.forEach(function(t){e[++A]=t}),e}var yG=Array.prototype,FG=Function.prototype,y6=Object.prototype,l7=tr["__core-js_shared__"],ky=function(){var j=/[^.]+$/.exec(l7&&l7.keys&&l7.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}(),Py=FG.toString,yt=y6.hasOwnProperty,gn=y6.toString,hG=RegExp("^"+Py.call(yt).replace(nG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fy=tr.Symbol,Ey=tr.Uint8Array,SG=y6.propertyIsEnumerable,wG=yG.splice,$G=EG(Object.keys,Object),f7=yn(tr,"DataView"),Vs=yn(tr,"Map"),E7=yn(tr,"Promise"),g7=yn(tr,"Set"),y7=yn(tr,"WeakMap"),Xs=yn(Object,"create"),IG=Nr(f7),vG=Nr(Vs),bG=Nr(E7),qG=Nr(g7),xG=Nr(y7),k6=fy?fy.prototype:void 0,d7=k6?k6.valueOf:void 0,gy=k6?k6.toString:void 0;function Dr(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function GG(){this.__data__=Xs?Xs(null):{}}function TG(j){return this.has(j)&&delete this.__data__[j]}function PG(j){var A=this.__data__;if(Xs){var e=A[j];return e===F7?void 0:e}return yt.call(A,j)?A[j]:void 0}function OG(j){var A=this.__data__;return Xs?A[j]!==void 0:yt.call(A,j)}function MG(j,A){var e=this.__data__;return e[j]=Xs&&A===void 0?F7:A,this}Dr.prototype.clear=GG;Dr.prototype.delete=TG;Dr.prototype.get=PG;Dr.prototype.has=OG;Dr.prototype.set=MG;function Ft(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function CG(){this.__data__=[]}function _G(j){var A=this.__data__,e=F6(A,j);if(e<0)return!1;var t=A.length-1;return e==t?A.pop():wG.call(A,e,1),!0}function RG(j){var A=this.__data__,e=F6(A,j);return e<0?void 0:A[e][1]}function DG(j){return F6(this.__data__,j)>-1}function NG(j,A){var e=this.__data__,t=F6(e,j);return t<0?e.push([j,A]):e[t][1]=A,this}Ft.prototype.clear=CG;Ft.prototype.delete=_G;Ft.prototype.get=RG;Ft.prototype.has=DG;Ft.prototype.set=NG;function ht(j){var A=-1,e=j?j.length:0;for(this.clear();++A<e;){var t=j[A];this.set(t[0],t[1])}}function KG(){this.__data__={hash:new Dr,map:new(Vs||Ft),string:new Dr}}function LG(j){return h6(this,j).delete(j)}function UG(j){return h6(this,j).get(j)}function QG(j){return h6(this,j).has(j)}function HG(j,A){return h6(this,j).set(j,A),this}ht.prototype.clear=KG;ht.prototype.delete=LG;ht.prototype.get=UG;ht.prototype.has=QG;ht.prototype.set=HG;function f6(j){var A=-1,e=j?j.length:0;for(this.__data__=new ht;++A<e;)this.add(j[A])}function VG(j){return this.__data__.set(j,F7),this}function XG(j){return this.__data__.has(j)}f6.prototype.add=f6.prototype.push=VG;f6.prototype.has=XG;function gt(j){this.__data__=new Ft(j)}function zG(){this.__data__=new Ft}function WG(j){return this.__data__.delete(j)}function JG(j){return this.__data__.get(j)}function YG(j){return this.__data__.has(j)}function ZG(j,A){var e=this.__data__;if(e instanceof Ft){var t=e.__data__;if(!Vs||t.length<Ux-1)return t.push([j,A]),this;e=this.__data__=new ht(t)}return e.set(j,A),this}gt.prototype.clear=zG;gt.prototype.delete=WG;gt.prototype.get=JG;gt.prototype.has=YG;gt.prototype.set=ZG;function AT(j,A){var e=er(j)||Ky(j)?mG(j.length,String):[],t=e.length,r=!!t;for(var o in j)(A||yt.call(j,o))&&!(r&&(o=="length"||_y(o,t)))&&e.push(o);return e}function F6(j,A){for(var e=j.length;e--;)if(Ny(j[e][0],A))return e;return-1}function jT(j,A,e,t){return eT(j,function(r,o,i){A(t,r,e(r),i)}),t}var eT=fT(rT),tT=ET();function rT(j,A){return j&&tT(j,A,E6)}function Oy(j,A){A=S6(A,j)?[A]:My(A);for(var e=0,t=A.length;j!=null&&e<t;)j=j[w6(A[e++])];return e&&e==t?j:void 0}function oT(j){return gn.call(j)}function nT(j,A){return j!=null&&A in Object(j)}function h7(j,A,e,t,r){return j===A?!0:j==null||A==null||!$6(j)&&!I6(A)?j!==j&&A!==A:sT(j,A,h7,e,t,r)}function sT(j,A,e,t,r,o){var i=er(j),a=er(A),c=m7,p=m7;i||(c=jr(j),c=c==l6?kn:c),a||(p=jr(A),p=p==l6?kn:p);var d=c==kn&&!k7(j),m=p==kn&&!k7(A),B=c==p;if(B&&!d)return o||(o=new gt),i||qT(j)?Cy(j,A,e,t,r,o):gT(j,A,c,e,t,r,o);if(!(r&En)){var f=d&&yt.call(j,"__wrapped__"),k=m&&yt.call(A,"__wrapped__");if(f||k){var E=f?j.value():j,g=k?A.value():A;return o||(o=new gt),e(E,g,t,r,o)}}return B?(o||(o=new gt),yT(j,A,e,t,r,o)):!1}function iT(j,A,e,t){var r=e.length,o=r,i=!t;if(j==null)return!o;for(j=Object(j);r--;){var a=e[r];if(i&&a[2]?a[1]!==j[a[0]]:!(a[0]in j))return!1}for(;++r<o;){a=e[r];var c=a[0],p=j[c],d=a[1];if(i&&a[2]){if(p===void 0&&!(c in j))return!1}else{var m=new gt;if(t)var B=t(p,d,c,j,A,m);if(!(B===void 0?h7(d,p,t,g6|En,m):B))return!1}}return!0}function aT(j){if(!$6(j)||wT(j))return!1;var A=Ly(j)||k7(j)?hG:iG;return A.test(Nr(j))}function cT(j){return I6(j)&&$7(j.length)&&!!RA[gn.call(j)]}function pT(j){return typeof j=="function"?j:j==null?PT:typeof j=="object"?er(j)?dT(j[0],j[1]):lT(j):OT(j)}function uT(j){if(!$T(j))return $G(j);var A=[];for(var e in Object(j))yt.call(j,e)&&e!="constructor"&&A.push(e);return A}function lT(j){var A=FT(j);return A.length==1&&A[0][2]?Dy(A[0][0],A[0][1]):function(e){return e===j||iT(e,j,A)}}function dT(j,A){return S6(j)&&Ry(A)?Dy(w6(j),A):function(e){var t=GT(e,j);return t===void 0&&t===A?TT(e,j):h7(A,t,void 0,g6|En)}}function mT(j){return function(A){return Oy(A,j)}}function BT(j){if(typeof j=="string")return j;if(I7(j))return gy?gy.call(j):"";var A=j+"";return A=="0"&&1/j==-yy?"-0":A}function My(j){return er(j)?j:IT(j)}function kT(j,A){return function(e,t){var r=er(e)?uG:jT,o=A?A():{};return r(e,j,pT(t,2),o)}}function fT(j,A){return function(e,t){if(e==null)return e;if(!w7(e))return j(e,t);for(var r=e.length,o=A?r:-1,i=Object(e);(A?o--:++o<r)&&t(i[o],o,i)!==!1;);return e}}function ET(j){return function(A,e,t){for(var r=-1,o=Object(A),i=t(A),a=i.length;a--;){var c=i[j?a:++r];if(e(o[c],c,o)===!1)break}return A}}function Cy(j,A,e,t,r,o){var i=r&En,a=j.length,c=A.length;if(a!=c&&!(i&&c>a))return!1;var p=o.get(j);if(p&&o.get(A))return p==A;var d=-1,m=!0,B=r&g6?new f6:void 0;for(o.set(j,A),o.set(A,j);++d<a;){var f=j[d],k=A[d];if(t)var E=i?t(k,f,d,A,j,o):t(f,k,d,j,A,o);if(E!==void 0){if(E)continue;m=!1;break}if(B){if(!lG(A,function(g,y){if(!B.has(y)&&(f===g||e(f,g,t,r,o)))return B.add(y)})){m=!1;break}}else if(!(f===k||e(f,k,t,r,o))){m=!1;break}}return o.delete(j),o.delete(A),m}function gT(j,A,e,t,r,o,i){switch(e){case B6:if(j.byteLength!=A.byteLength||j.byteOffset!=A.byteOffset)return!1;j=j.buffer,A=A.buffer;case xy:return!(j.byteLength!=A.byteLength||!t(new Ey(j),new Ey(A)));case hy:case Sy:case Iy:return Ny(+j,+A);case wy:return j.name==A.name&&j.message==A.message;case vy:case by:return j==A+"";case d6:var a=fG;case m6:var c=o&En;if(a||(a=gG),j.size!=A.size&&!c)return!1;var p=i.get(j);if(p)return p==A;o|=g6,i.set(j,A);var d=Cy(a(j),a(A),t,r,o,i);return i.delete(j),d;case qy:if(d7)return d7.call(j)==d7.call(A)}return!1}function yT(j,A,e,t,r,o){var i=r&En,a=E6(j),c=a.length,p=E6(A),d=p.length;if(c!=d&&!i)return!1;for(var m=c;m--;){var B=a[m];if(!(i?B in A:yt.call(A,B)))return!1}var f=o.get(j);if(f&&o.get(A))return f==A;var k=!0;o.set(j,A),o.set(A,j);for(var E=i;++m<c;){B=a[m];var g=j[B],y=A[B];if(t)var F=i?t(y,g,B,A,j,o):t(g,y,B,j,A,o);if(!(F===void 0?g===y||e(g,y,t,r,o):F)){k=!1;break}E||(E=B=="constructor")}if(k&&!E){var S=j.constructor,I=A.constructor;S!=I&&"constructor"in j&&"constructor"in A&&!(typeof S=="function"&&S instanceof S&&typeof I=="function"&&I instanceof I)&&(k=!1)}return o.delete(j),o.delete(A),k}function h6(j,A){var e=j.__data__;return ST(A)?e[typeof A=="string"?"string":"hash"]:e.map}function FT(j){for(var A=E6(j),e=A.length;e--;){var t=A[e],r=j[t];A[e]=[t,r,Ry(r)]}return A}function yn(j,A){var e=kG(j,A);return aT(e)?e:void 0}var jr=oT;(f7&&jr(new f7(new ArrayBuffer(1)))!=B6||Vs&&jr(new Vs)!=d6||E7&&jr(E7.resolve())!=uy||g7&&jr(new g7)!=m6||y7&&jr(new y7)!=B7)&&(jr=function(j){var A=gn.call(j),e=A==kn?j.constructor:void 0,t=e?Nr(e):void 0;if(t)switch(t){case IG:return B6;case vG:return d6;case bG:return uy;case qG:return m6;case xG:return B7}return A});function hT(j,A,e){A=S6(A,j)?[A]:My(A);for(var t,r=-1,i=A.length;++r<i;){var o=w6(A[r]);if(!(t=j!=null&&e(j,o)))break;j=j[o]}if(t)return t;var i=j?j.length:0;return!!i&&$7(i)&&_y(o,i)&&(er(j)||Ky(j))}function _y(j,A){return A=A??Fy,!!A&&(typeof j=="number"||aG.test(j))&&j>-1&&j%1==0&&j<A}function S6(j,A){if(er(j))return!1;var e=typeof j;return e=="number"||e=="symbol"||e=="boolean"||j==null||I7(j)?!0:tG.test(j)||!eG.test(j)||A!=null&&j in Object(A)}function ST(j){var A=typeof j;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?j!=="__proto__":j===null}function wT(j){return!!ky&&ky in j}function $T(j){var A=j&&j.constructor,e=typeof A=="function"&&A.prototype||y6;return j===e}function Ry(j){return j===j&&!$6(j)}function Dy(j,A){return function(e){return e==null?!1:e[j]===A&&(A!==void 0||j in Object(e))}}var IT=S7(function(j){j=xT(j);var A=[];return rG.test(j)&&A.push(""),j.replace(oG,function(e,t,r,o){A.push(r?o.replace(sG,"$1"):t||e)}),A});function w6(j){if(typeof j=="string"||I7(j))return j;var A=j+"";return A=="0"&&1/j==-yy?"-0":A}function Nr(j){if(j!=null){try{return Py.call(j)}catch{}try{return j+""}catch{}}return""}var vT=kT(function(j,A,e){j[e]=A});function S7(j,A){if(typeof j!="function"||A&&typeof A!="function")throw new TypeError(Qx);var e=function(){var t=arguments,r=A?A.apply(this,t):t[0],o=e.cache;if(o.has(r))return o.get(r);var i=j.apply(this,t);return e.cache=o.set(r,i),i};return e.cache=new(S7.Cache||ht),e}S7.Cache=ht;function Ny(j,A){return j===A||j!==j&&A!==A}function Ky(j){return bT(j)&&yt.call(j,"callee")&&(!SG.call(j,"callee")||gn.call(j)==l6)}var er=Array.isArray;function w7(j){return j!=null&&$7(j.length)&&!Ly(j)}function bT(j){return I6(j)&&w7(j)}function Ly(j){var A=$6(j)?gn.call(j):"";return A==$y||A==Hx}function $7(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=Fy}function $6(j){var A=typeof j;return!!j&&(A=="object"||A=="function")}function I6(j){return!!j&&typeof j=="object"}function I7(j){return typeof j=="symbol"||I6(j)&&gn.call(j)==qy}var qT=By?BG(By):cT;function xT(j){return j==null?"":BT(j)}function GT(j,A,e){var t=j==null?void 0:Oy(j,A);return t===void 0?e:t}function TT(j,A){return j!=null&&hT(j,A,nT)}function E6(j){return w7(j)?AT(j):uT(j)}function PT(j){return j}function OT(j){return S6(j)?dG(w6(j)):mT(j)}fn.exports=vT});var In=Oj(jd=>{"use strict";n();s();Object.defineProperty(jd,"__esModule",{value:!0});var dF=x();function e1(j){var A=dF.useRef();return dF.useEffect(function(){A.current=j}),A.current}jd.default=e1});n();s();n();s();n();s();n();s();var da=(E=>(E.Buy="Buy",E.Collectibles="Collectibles",E.ConnectHardwareWallet="Connect Hardware Wallet",E.ConvertToJito="Convert to Jito",E.Explore="Explore",E.MintCollectible="Mint Collectible",E.SocialLogin="Social Login",E.SettingsClaimUsername="Settings: Claim Username",E.SettingsCurrency="Settings: Currency",E.SettingsImportSeedPhrase="Settings: Import Seed Phrase",E.SettingsNotificationPreferences="Settings: Notification Preferences",E.SettingsSecurityAndPrivacy="Settings: Security & Privacy",E.Swapper="Swapper",E.ExternalLink="External Link",E.Token="Token",E))(da||{}),fs=class extends Error{message="Failed to set dismissed action banners to storage"};var Vw={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1},Xw={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1},Lp=j=>gj?Vw[j]:Fr?Xw[j]:-1;var Up=1,it=".phantom-labs.settings.interstitials",at=class{static async getViewHistory(A,e){let t=await e.get(it);return t?t.interstitialsViewHistory[A]??[]:[]}static async hasSeen(A,e){let t=await e.get(it);if(!t)return!1;let r=Lp(A);return(t.interstitialsSeen[A]??0)>=r}static async setHasSeen(A,e){let t=await e.get(it),r=Lp(A);await e.set(it,{version:Up,interstitialsSeen:{...!!t&&t.interstitialsSeen,[A]:r},interstitialsViewHistory:{...!!t&&t.interstitialsViewHistory,[A]:[...t?.interstitialsViewHistory?.[A]??[],Date.now()]}})}static async resetHasSeen(A,e){let t=await e.get(it);if(t)return e.set(it,{version:Up,interstitialsSeen:{...t.interstitialsSeen,[A]:void 0},interstitialsViewHistory:{...t.interstitialsViewHistory,[A]:void 0}})}static async resetAllHasSeen(A){if(await A.get(it))return A.set(it,{version:Up,interstitialsSeen:{},interstitialsViewHistory:{}})}};n();s();var Qp=class{#A;constructor(A){this.#A=A}onBannerSeen=A=>{this.#A.capture("actionBannerSeenByUser",{data:{banner:A}})};onBannerClick=A=>{this.#A.capture("actionBannerClickedByUser",{data:{banner:A}})};onBannerDismiss=A=>{this.#A.capture("actionBannerDismissedByUser",{data:{banner:A}})};onInterstitialSeen=A=>{this.#A.capture("actionBannerInterstitialSeenByUser",{data:{banner:A}})};onInterstitialPrimaryClick=A=>{this.#A.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:A}})};onInterstitialSecondaryClick=A=>{this.#A.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:A}})};onInterstitialDismiss=A=>{this.#A.capture("actionBannerInterstitialDismissedByUser",{data:{banner:A}})}};n();s();var zw=({id:j,humanReadableId:A,description:e,bannerType:t})=>({id:j,humanReadableId:A,description:e,type:t}),Ww=({id:j,humanReadableId:A,description:e,bannerType:t,interstitial:r})=>{let{title:o,primaryButtonText:i,secondaryButtonText:a}=r,c;if(t==="Modal")for(let[p,d]of Object.values(r.lineItems).entries())c={...c??{},[`lineItem${p+1}`]:{title:d.title,description:d.description}};return{id:j,humanReadableId:A,description:e,type:t,interstitial:{title:o,body:c,primaryButtonText:i??G.t("commandContinue"),secondaryButtonText:a??G.t("commandDismiss")}}};n();s();n();s();var ma=j=>{let A=[];for(let e in j.errors)Array.isArray(j.errors[e])&&A.push(j.errors[e].join(", "));return A.join(", ")};var rk=async({locale:j})=>{let A;try{let e=JSON.stringify({platform:oj,appVersion:vA,locale:j}),t=await z.api().headers({"Content-Type":"application/json"}).post(({apiEnv:o})=>`/banners/force_upgrade/${o}/v1`,e);if(t.status===400){let o=await t.data,i=ma(o);throw new Error(i)}else if(t.status<200||t.status>299)throw new Error(`status code: ${t.status}, body: ${t.statusText}`);let r=t.data;return r?{...r}:tk}catch(e){return A===400&&e instanceof Error&&b.captureError(e,"actionBanner"),tk}},tk={forceUpgradeStatus:"noop"};n();s();n();s();var ok=async({locale:j})=>({...await rk({locale:j})});n();s();var Lo="@phantom/interstitials",Kt=`${Lo}:action-banners`,nk=`${Lo}:force-upgrade`,lj={actionBanners:(j,A)=>[Kt,{accountIdentifier:j,accessToken:A}],hasSeenInterstitial:j=>[`${Lo}:has-seen-interstitial`,{feature:j}],interstitialViewHistory:j=>[`${Lo}:interstitial-view-history`,{feature:j}],appLaunchTimes:()=>[`${Lo}:app-launch-times`],lastOnboardedAt:()=>[`${Lo}:last-onboarded-at`]};var Jw=()=>tA({queryKey:[nk],queryFn:async()=>{let A=ZA(G.language)??"en";return ok({locale:A})},enabled:!!vA,staleTime:eA({minutes:5})});n();s();var Vp=j=>{let A=lA(),e=lj.hasSeenInterstitial(j);return tA({queryKey:e,queryFn:async()=>await at.hasSeen(j,A)})};n();s();n();s();var sk=async j=>{await j.invalidateQueries({queryKey:[Kt]})};Dm(sk);var ik=async(j,A,e)=>{await j.setQueryData(lj.hasSeenInterstitial(A),e)};var Ir=j=>{let A=lA(),e=AA();return uA({mutationFn:async()=>{await at.setHasSeen(j,A),await ik(e,j,!0)},onSuccess:()=>e.invalidateQueries({queryKey:lj.interstitialViewHistory(j)})})};n();s();var ct=v(x());n();s();var Ba=v(x());n();s();n();s();n();s();var Xp=async j=>await j.get("dismissedActionBanners")??[],ak=async(j,A)=>{try{let e=await Xp(j);return e.includes(A)?void 0:j.set("dismissedActionBanners",[...e,A])}catch{throw new fs}};var Wp=()=>{let j=lA(),{data:A}=tA({queryKey:lj.appLaunchTimes(),queryFn:async()=>await j.get("appLaunchTimes")??[]});return A??[]};n();s();var Jp=()=>{let j=lA(),{data:A}=tA({queryKey:lj.lastOnboardedAt(),queryFn:async()=>await j.get("lastOnboardedAt")??-1});return A};var ck=()=>{let j=Jp(),A=Wp();if(A.length<2)return!0;if(j!==void 0){let[e,t]=A;if(j<e&&j<t)return!1}return!0};function vr(j,A,e){let{data:t,isSuccess:r}=Vp(j),{data:o}=BA(A?[A]:[]),i=o?.length===1?o[0]:!0,a=ck(),c=(0,Ba.useCallback)(()=>e(),[e]);return(0,Ba.useMemo)(()=>i&&r&&!t&&!a&&c(),[i,t,a,c,r])}var Yw="Google Pay",Zw="Apple Pay",pk={data:{feature:"sui",variant:"default-on"}},A$=({onPrimaryAction:j,image:A,condition:e=()=>!0,platform:t="ios"})=>{let{t:r}=gA(),{mutate:o}=Ir("SuiWelcomeDefaultOn"),{data:i}=BA(["enable-sui-default-on"]),a=i?.length===1?i[0]:!0,{data:c}=BA(["kill-sui-default-on-modal"]),p=c?.length===1?c[0]:!0,d=vr("SuiWelcomeDefaultOn",void 0,()=>e()&&!Ct()&&a&&!p),m=t==="android"?Yw:Zw,B=(0,ct.useCallback)(async()=>{j(),o()},[j,o]),f=(0,ct.useMemo)(()=>({title:r("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:r("interstitialSuiWelcomeItemTitle_1"),icon:ct.default.createElement(ce,{icon:"Swap",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:r("interstitialSuiWelcomeItemTitle_2"),icon:ct.default.createElement(ce,{icon:"Send",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_2",{paymentMethod:m})},{key:"suiValueProp3",title:r("interstitialSuiWelcomeItemTitle_3"),icon:ct.default.createElement(ce,{icon:"Compass",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialSuiWelcomePrimaryButtonText"),onAction:B,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:pk}},onDismiss:o,image:A,displayEvent:{event:"welcomeInterstitialSeen",payload:pk}}),[r,B,A,o,m]);return(0,ct.useMemo)(()=>({interstitial:f,shouldShow:d}),[f,d])};n();s();var _e=v(x());var Yp={data:{feature:"arbitrum"}},j$=({onPrimaryAction:j,onSecondaryAction:A,image:e,condition:t=()=>!0})=>{let{t:r}=gA(),{mutateAsync:o}=zm(),[i]=Jm(["arbitrum"]),{mutate:a}=Ir("ArbitrumWelcome"),c=vr("ArbitrumWelcome","enable-arbitrum",()=>t()&&!i&&!Ct()),p=(0,_e.useCallback)(async()=>{await o({chainIDs:["arbitrum"]}),j(),a()},[o,j,a]),d=(0,_e.useCallback)(()=>{A(),a()},[A,a]),m=(0,_e.useMemo)(()=>({title:r("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:r("interstitialArbitrumWelcomeItemTitle_1"),icon:_e.default.createElement(ce,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:r("interstitialArbitrumWelcomeItemTitle_2"),icon:_e.default.createElement(ce,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:r("interstitialArbitrumWelcomeItemTitle_3"),icon:_e.default.createElement(ce,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialArbitrumWelcomePrimaryButtonText"),onAction:p,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Yp}},secondaryButton:{children:r("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Yp}},onDismiss:a,image:e,displayEvent:{event:"welcomeInterstitialSeen",payload:Yp}}),[r,p,d,e,a]);return(0,_e.useMemo)(()=>({interstitial:m,shouldShow:c}),[m,c])};n();s();n();s();n();s();n();s();var qr=v(x());var Zp=qr.default.memo(j=>{let{children:A,i18nKey:e,...t}=j,{t:r}=gA(),o=(0,qr.useMemo)(()=>{let a=(e?`${r(e,{...t,...t.values})}`:"").replace(/<\/?[^>]+(>|$)/g,"");return qr.default.createElement(xA,null,a)},[e,t,r]);return qr.default.createElement(lB,{fallback:o},qr.default.createElement(Xm,{i18nKey:e,...t},A))});var Rj=v(x());var e$="https://phantom.com/terms",t$="https://phantom.com/privacy",r$="https://phantom.com/terms-and-privacy-update",o$=({onConfirm:j,openUrl:A})=>{let{t:e}=gA(),t=W(),{mutate:r}=Ir("TermsOfServiceUpdate"),o=(0,Rj.useCallback)(async()=>{r(),j()},[r,j]),i=(0,Rj.useCallback)(c=>async()=>{await t.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await A(c)},[t,A]),a=(0,Rj.useMemo)(()=>({title:e("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:e("commandContinue"),onAction:o,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:Rj.default.createElement(n$,{openUrl:i}),dismissGestureDisabled:!0}),[e,o,i]);return(0,Rj.useMemo)(()=>({interstitial:a}),[a])},n$=({openUrl:j})=>Rj.default.createElement(kA,{marginTop:24},Rj.default.createElement(xA,{font:"body",align:"center"},Rj.default.createElement(Zp,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",Rj.default.createElement(xA,{onPress:j(e$),color:"accentPrimary"},"Terms of Service"),"and",Rj.default.createElement(xA,{onPress:j(t$),color:"accentPrimary"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",Rj.default.createElement(xA,{onPress:j(r$),color:"accentPrimary"},"Learn More"),".")));n();s();n();s();n();s();n();s();var lk=async({accountID:j,deviceId:A,locale:e,rootId:t,selectedAccountAddresses:r,accessToken:o})=>{let i;try{let a={accountID:j,deviceId:A,locale:e,platform:oj,rootId:t,selectedAccountAddresses:r,version:vA},c=await z.api().headers({"Content-Type":"application/json"}).bearer(o).post(({apiEnv:d})=>`/banners/get_banners/${d}/v2`,a);if(c.status===400){let d=await c.data,m=ma(d);throw new Error(m)}else if(c.status<200||c.status>299)throw new Error(`status code: ${c.status}, body: ${await c.statusText}`);let p=c.data;return p?{...p,banners:p.banners??[]}:uk}catch(a){return i===400&&a instanceof Error&&b.captureError(a,"actionBanner"),uk}},uk={id:void 0,banners:[]};n();s();n();s();var Au=j=>j?Object.values(da).includes(j):!1;n();s();var dk=j=>{switch(j){case"Bottom Sheet":return gj;case"Modal":return!0;default:return!1}};var mk=j=>{let{bannerType:A,destinationType:e}=j;switch(A){case"Deep Link":return Au(e);case"Bottom Sheet":case"Modal":return dk(A)&&Au(e);default:return!1}};var Bk=async({accountID:j,deviceId:A,dismissedBanners:e,locale:t,rootId:r,selectedAccountAddresses:o,accessToken:i})=>{let a=await lk({accountID:j,deviceId:A,locale:t,rootId:r,selectedAccountAddresses:o,accessToken:i});return{...a,banners:a.banners.filter(c=>mk(c)&&!e.includes(c.id))}};var s$=eA({minutes:1}),i$=()=>{let j=W(),A=lA(),{data:e,isLoading:t}=Po(),{data:r}=FA(),o=async()=>{let i=r?.type!=="readOnly"?r?.addresses.map(Rm)??[]:[],a=r?.type==="seed"?r.seedIdentifier:null,c=await Xp(A),p=ZA(G.language)??"en",d=await j.getDeviceId();return Bk({accountID:r?.identifier??"",deviceId:d,dismissedBanners:c,locale:p,rootId:a,selectedAccountAddresses:i,accessToken:e?.accessToken})};return tA({queryKey:lj.actionBanners(r?.identifier,e?.accessToken),queryFn:o,enabled:!t&&!!r?.identifier,staleTime:s$})};n();s();var a$=()=>{let j=lA(),A=AA();return uA({mutationFn:async({actionBannerId:t})=>{ak(j,t),A.setQueriesData({queryKey:[Kt]},r=>{if(!r)return;let o=r.banners.filter(i=>i.id!==t);return{...r,banners:o}})}})};n();s();var ju=j=>{let A=lA(),e=lj.interstitialViewHistory(j);return tA({queryKey:e,queryFn:async()=>await at.getViewHistory(j,A)})};n();s();var c$=()=>{let j=lA(),A=AA();return uA({mutationFn:async()=>{let e=Date.now(),r=[...(await j.get("appLaunchTimes")||[]).slice(-1),e];return j.set("appLaunchTimes",r)},onSuccess:()=>{A.invalidateQueries({queryKey:lj.appLaunchTimes()})}})};n();s();var p$=()=>{let j=lA(),A=AA();return uA({mutationFn:()=>{let e=Date.now();return j.set("lastOnboardedAt",e)},onSuccess:()=>{A.invalidateQueries({queryKey:lj.lastOnboardedAt()})}})};n();s();n();s();var Uo=v(x()),kk=(0,Uo.createContext)(null);function u$({children:j,seedlessRepository:A}){return Uo.default.createElement(kk.Provider,{value:{seedlessRepository:A}},j)}function l$(){let j=(0,Uo.useContext)(kk);if(!j)throw new Error("useSeedlessContext must be used within a SeedlessProvider");return j}function nj(){return l$().seedlessRepository}n();s();n();s();var d$=l.record(l.string(),l.number()),m$=l.object({type:l.union([l.literal("Buffer"),l.literal("Object")]),data:l.array(l.number())}),B$=l.union([d$,m$]),fk=l.object({seeds:l.array(l.tuple([l.string(),B$]))}),Ek=j=>k$(j)?new Uint8Array(Buffer.from(j.data)):new Uint8Array(Object.values(j)),k$=j=>!!j&&typeof j=="object"&&Ip("type",j)&&typeof j.type=="string"&&Ip("data",j)&&Array.isArray(j.data)&&j.data.every(A=>!Number.isNaN(parseInt(A))),gk=l.object({deviceId:l.string(),encryptionKey:l.string().length(44).base64()});n();s();n();s();var Lt="/seedless",f$="https://phantom-wallet.zendesk.com/hc/en-us/articles/32775281256851";var yk="/seedless";n();s();var Qo=class extends Error{reasonString;reasonCode;constructor(A){super("Failed to backup share from Juicebox"),this.reasonCode=A,this.reasonString=eu[A]}},Ho=class extends Error{guessesRemaining;reasonString;reasonCode;constructor(A,e){super("Failed to recover share from Juicebox"),this.guessesRemaining=e,this.reasonCode=A,this.reasonString=Ut[A]}},Es=class extends Error{reasonString;reasonCode;constructor(A){super("Failed to delete share from Juicebox"),this.reasonCode=A,this.reasonString=Fk[A]}},eu=(r=>(r[r.InvalidAuth=0]="InvalidAuth",r[r.UpgradeRequired=1]="UpgradeRequired",r[r.Assertion=2]="Assertion",r[r.Transient=3]="Transient",r))(eu||{}),Ut=(a=>(a[a.InvalidPin=0]="InvalidPin",a[a.NotRegistered=1]="NotRegistered",a[a.InvalidAuth=2]="InvalidAuth",a[a.UpgradeRequired=3]="UpgradeRequired",a[a.Assertion=4]="Assertion",a[a.Transient=5]="Transient",a[a.CooldownTimer=6]="CooldownTimer",a))(Ut||{}),Fk=(o=>(o[o.InvalidAuth=0]="InvalidAuth",o[o.UpgradeRequired=1]="UpgradeRequired",o[o.RateLimitExceeded=2]="RateLimitExceeded",o[o.Assertion=3]="Assertion",o[o.Transient=4]="Transient",o))(Fk||{}),E$=j=>gs(j)||hk(j)||Sk(j),gs=j=>j instanceof Ho,hk=j=>j instanceof Qo,Sk=j=>j instanceof Es;globalThis.JuiceboxGetAuthToken=async j=>{let A=Buffer.from(j).toString("hex");return globalThis.JuiceboxTokens[A]};var tu=class{encoder;provider;constructor(A){this.encoder=new TextEncoder,this.provider=A}async getJwts(A){let e=await z.api().bearer(A).post(`${yk}/v1/juiceboxtoken`);(sA(e)||e.status===304)&&this.provider.setJuiceboxTokens(e.data)}async sendJuiceboxShare(A,e,t,r){await this.getJwts(r);try{await this.provider.backupShare(A,e,this.encoder.encode(t),this.encoder.encode("phantom"),7),b.addBreadcrumb("se*dless","Successful backup share to Juicebox","debug")}catch(o){b.addBreadcrumb("se*dless","Failed to backup share to Juicebox","error");let i=new Qo(o);throw b.captureError(i,"se*dless"),i}return!0}async getJuiceboxShare(A,e,t){await this.getJwts(t);try{let r=await this.provider.recoverShare(A,this.encoder.encode(e),this.encoder.encode("phantom"));return b.addBreadcrumb("se*dless","Successfully recovered share from Juicebox","debug"),r}catch(r){let o=r.reason,i=r.guessesRemaining!==void 0?r.guessesRemaining:r.guesses_remaining;b.addBreadcrumb("se*dless","Failed to recover share from Juicebox","error");let a=new Ho(o,i);throw b.captureError(a,"se*dless"),a}}async deleteShare(A,e){await this.getJwts(e);try{await this.provider.deleteShare(A),b.addBreadcrumb("se*dless","Successfully deleted share from Juicebox","debug")}catch(t){b.addBreadcrumb("se*dless","Failed to delete share from Juicebox","error");let r=new Es(t);throw b.captureError(r,"se*dless"),r}}};n();s();n();s();var ru="@phantom/seedless",xr={hasSeedlessBundle:["seedless",`${ru}:has_seedless_bundle`],needsBundleUpdate:["seedless",`${ru}:needs_bundle_update`],timeLeftCooldown:["seedless",`${ru}:time_left_cooldown`]};function ou({enabled:j=!0}={}){let A=xr.hasSeedlessBundle,e=nj(),t=ae();return tA({enabled:t&&j,queryKey:A,queryFn:async()=>await e.hasSeedlessBundle()})}n();s();n();s();var fa=async j=>{await j.invalidateQueries({queryKey:xr.hasSeedlessBundle})},Vo=async j=>{await j.invalidateQueries({queryKey:xr.needsBundleUpdate})};function g$(){let j=nj(),A=AA(),e=W();return uA({mutationFn:async({entropy:t,pin:r})=>await j.backup(t,r),onSuccess:async()=>{e.capture("seedlessBackupSuccess"),await fa(A),await Vo(A)},onError:()=>{e.capture("seedlessBackupError")}})}n();s();function nu(){let j=nj(),A=AA(),e=W();return uA({mutationFn:async r=>await j.recover(r),onSuccess:async()=>{e.capture("seedlessRecoverSuccess"),await Vo(A)},onError:()=>{e.capture("seedlessRecoverError")}})}n();s();function wk(){let j=nj(),A=W();return uA({mutationFn:async t=>{await j.verifyPin(t)},onSuccess:()=>{b.addBreadcrumb("se*dless","Successfully verified PIN","info"),A.capture("seedlessVerifyPinSuccess")},onError:()=>{b.addBreadcrumb("se*dless","Failed to verify PIN","error"),A.capture("seedlessVerifyPinError")}})}n();s();function y$(){let j=nj(),A=AA();return uA({mutationFn:async()=>await j.deleteBundle(),onSuccess:async()=>{await fa(A),await Vo(A)}})}n();s();function $k(){let j=nj(),A=W();return uA({mutationFn:async t=>await j.resetBundleFromDevice(t.pin,t.seedlessEntropies),onSuccess:()=>{b.addBreadcrumb("se*dless","Successfully reset bundle from device","info"),A.capture("seedlessResetPinSuccess")},onError:()=>{b.addBreadcrumb("se*dless","Failed to reset bundle from device","error"),A.capture("seedlessResetPinError")}})}n();s();var F$=1e3,h$=500;function su(){let j=xr.timeLeftCooldown,A=nj(),e=ae();return tA({enabled:e,queryKey:j,queryFn:async()=>await A.timeLeftCooldown(),refetchInterval:F$,refetchOnMount:"always",staleTime:h$})}n();s();var Ea=v(x()),Ik=1e3,iu=()=>{let[j,A]=(0,Ea.useState)(0);return(0,Ea.useEffect)(()=>{if(!j)return;let e=setInterval(async()=>{A(j-Ik)},Ik);return()=>clearInterval(e)},[j]),{cooldownTimer:j,setCooldownTimer:A}};n();s();var au=v(x());var S$="seedless-pin-verification-timer-in-ms",w$=l.string().transform(j=>Number(j)).pipe(l.number()).nullish().catch(null),cu=()=>{let j=nj(),A=(0,au.useMemo)(()=>UA.getMultivariateAssignment(S$,{dependent_flag:"enable-seedless-pin-verification-interstitial",variation_served:"true"}),[]),e=(0,au.useMemo)(()=>w$.parse(A)??2592e6,[A]),t=async()=>{let{expired:r,timestampInMs:o}=await j.getPinVerificationTimer({pinVerificationExpiryInMs:e});return{expired:r,timestampInMs:o}};return tA({queryKey:["seedlessPinVerificationLockTimerInMs"],queryFn:t,refetchInterval:e??2592e6,staleTime:e??2592e6})};n();s();var hs=()=>{let j=AA(),A=nj();return uA({mutationFn:async()=>{b.addBreadcrumb("se*dless","Resetting PIN verification timer","info"),await A.setPinVerificationTimer(Date.now())},onSuccess:async()=>{b.addBreadcrumb("se*dless","Successfully reset PIN verification timer","info"),await j.invalidateQueries({queryKey:["seedlessPinVerificationLockTimerInMs"]})},onError:()=>{b.addBreadcrumb("se*dless","Failed to reset PIN verification timer","error")}})};n();s();var ku=v(x());n();s();n();s();n();s();n();s();function pu(j){if(!Number.isSafeInteger(j)||j<0)throw new Error(`Wrong positive integer: ${j}`)}function $$(j){if(typeof j!="boolean")throw new Error(`Expected boolean, not ${j}`)}function vk(j,...A){if(!(j instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length>0&&!A.includes(j.length))throw new TypeError(`Expected Uint8Array of length ${A}, not of length=${j.length}`)}function I$(j){if(typeof j!="function"||typeof j.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pu(j.outputLen),pu(j.blockLen)}function v$(j,A=!0){if(j.destroyed)throw new Error("Hash instance has been destroyed");if(A&&j.finished)throw new Error("Hash#digest() has already been called")}function b$(j,A){vk(j);let e=A.outputLen;if(j.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}var q$={number:pu,bool:$$,bytes:vk,hash:I$,exists:v$,output:b$},ga=q$;n();s();n();s();var Ss={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Fa=j=>new DataView(j.buffer,j.byteOffset,j.byteLength),we=(j,A)=>j<<32-A|j>>>A,x$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!x$)throw new Error("Non little-endian hardware is not supported");var G$=Array.from({length:256},(j,A)=>A.toString(16).padStart(2,"0"));function ha(j){if(!(j instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let e=0;e<j.length;e++)A+=G$[j[e]];return A}function bk(j){if(typeof j!="string")throw new TypeError("hexToBytes: expected string, got "+typeof j);if(j.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let A=new Uint8Array(j.length/2);for(let e=0;e<A.length;e++){let t=e*2,r=j.slice(t,t+2),o=Number.parseInt(r,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");A[e]=o}return A}function T$(j){if(typeof j!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof j}`);return new TextEncoder().encode(j)}function uu(j){if(typeof j=="string"&&(j=T$(j)),!(j instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof j})`);return j}var ya=class{clone(){return this._cloneInto()}};function lu(j){let A=t=>j().update(uu(t)).digest(),e=j();return A.outputLen=e.outputLen,A.blockLen=e.blockLen,A.create=()=>j(),A}function Sa(j=32){if(Ss.web)return Ss.web.getRandomValues(new Uint8Array(j));if(Ss.node)return new Uint8Array(Ss.node.randomBytes(j).buffer);throw new Error("The environment doesn't have randomBytes function")}function P$(j,A,e,t){if(typeof j.setBigUint64=="function")return j.setBigUint64(A,e,t);let r=BigInt(32),o=BigInt(4294967295),i=Number(e>>r&o),a=Number(e&o),c=t?4:0,p=t?0:4;j.setUint32(A+c,i,t),j.setUint32(A+p,a,t)}var wa=class extends ya{constructor(A,e,t,r){super(),this.blockLen=A,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(A),this.view=Fa(this.buffer)}update(A){ga.exists(this);let{view:e,buffer:t,blockLen:r}=this;A=uu(A);let o=A.length;for(let i=0;i<o;){let a=Math.min(r-this.pos,o-i);if(a===r){let c=Fa(A);for(;r<=o-i;i+=r)this.process(c,i);continue}t.set(A.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=A.length,this.roundClean(),this}digestInto(A){ga.exists(this),ga.output(A,this),this.finished=!0;let{buffer:e,view:t,blockLen:r,isLE:o}=this,{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let m=i;m<r;m++)e[m]=0;P$(t,r-8,BigInt(this.length*8),o),this.process(t,0);let a=Fa(A),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=c/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<p;m++)a.setUint32(4*m,d[m],o)}digest(){let{buffer:A,outputLen:e}=this;this.digestInto(A);let t=A.slice(0,e);return this.destroy(),t}_cloneInto(A){A||(A=new this.constructor),A.set(...this.get());let{blockLen:e,buffer:t,length:r,finished:o,destroyed:i,pos:a}=this;return A.length=r,A.pos=a,A.finished=o,A.destroyed=i,r%e&&A.buffer.set(t),A}};var O$=(j,A,e)=>j&A^~j&e,M$=(j,A,e)=>j&A^j&e^A&e,C$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=new Uint32Array(64),$a=class extends wa{constructor(){super(64,32,8,!1),this.A=Qt[0]|0,this.B=Qt[1]|0,this.C=Qt[2]|0,this.D=Qt[3]|0,this.E=Qt[4]|0,this.F=Qt[5]|0,this.G=Qt[6]|0,this.H=Qt[7]|0}get(){let{A,B:e,C:t,D:r,E:o,F:i,G:a,H:c}=this;return[A,e,t,r,o,i,a,c]}set(A,e,t,r,o,i,a,c){this.A=A|0,this.B=e|0,this.C=t|0,this.D=r|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(A,e){for(let m=0;m<16;m++,e+=4)Ht[m]=A.getUint32(e,!1);for(let m=16;m<64;m++){let B=Ht[m-15],f=Ht[m-2],k=we(B,7)^we(B,18)^B>>>3,E=we(f,17)^we(f,19)^f>>>10;Ht[m]=E+Ht[m-7]+k+Ht[m-16]|0}let{A:t,B:r,C:o,D:i,E:a,F:c,G:p,H:d}=this;for(let m=0;m<64;m++){let B=we(a,6)^we(a,11)^we(a,25),f=d+B+O$(a,c,p)+C$[m]+Ht[m]|0,E=(we(t,2)^we(t,13)^we(t,22))+M$(t,r,o)|0;d=p,p=c,c=a,a=i+f|0,i=o,o=r,r=t,t=f+E|0}t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(t,r,o,i,a,c,p,d)}roundClean(){Ht.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},du=class extends $a{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},qk=lu(()=>new $a),SL=lu(()=>new du);var Vt=j=>{let A=mu(j),e=JSON.stringify(A);return ha(qk(e))};function ws(j){return/^\d+$/.test(j)}var Re=j=>j.length!==4?!1:ws(j),mu=j=>{if(Array.isArray(j))return j.map(A=>typeof A=="object"?mu(A):A).sort();if(typeof j=="object"&&j!==null){let A={},e=Object.keys(j).sort();for(let t of e)A[t]=mu(j[t]);return A}else return j},Bu=j=>{let A=Math.max(0,Math.floor(j/1e3)),e=Math.floor(A/60).toString(),t=A%60>9?`${A%60}`:`0${A%60}`;return{minutes:e,seconds:t}};n();s();var fu=v(x());n();s();var Xt=v(x());n();s();var Xo=class extends Error{result;constructor(A){super(`Unable to recover seedless bundle: ${A.type}`),this.result=A}},Ia=class extends Error{result;constructor(A){super(`Unable to backup seedless bundle: ${A.type}`),this.result=A}},$s=j=>j instanceof Xo,_$=j=>$s(j)&&j.result.type==="unauthorized",Eu=j=>$s(j)&&j.result.type==="error-juicebox-recover"&&j.result.reason===0,gu=j=>$s(j)&&j.result.type==="cooldown",yu=j=>$s(j)&&j.result.type==="upgrade-required";var R$=({hasEnrolledAuthentication:j,onAccountsAdded:A,onOnboardingDone:e,onOnboardingProtect:t,onImportAndSyncAccounts:r,onForgot:o})=>{let{t:i}=gA(),a=W(),{data:c=[]}=Vm(),{refetch:p}=su(),{mutateAsync:d}=hs(),{mutateAsync:m}=nu(),[B,f]=(0,Xt.useState)(!1),[k,E]=(0,Xt.useState)({isInvalidPin:!1,triesLeft:void 0,pin:""}),[g,y]=(0,Xt.useState)(!1),{cooldownTimer:F,setCooldownTimer:S}=iu(),{minutes:I,seconds:O}=Bu(F),[M,P]=(0,Xt.useState)(null);return(0,Xt.useEffect)(()=>{!k.triesLeft||k.triesLeft>0||o()},[k.triesLeft,o]),(0,Xt.useEffect)(()=>{(async()=>{let{data:q=0}=await p();return q})().then(q=>S(q))},[]),{isLoading:g,isError:B,handleInput:h=>{E(q=>({...q,isInvalidPin:h!==""&&!ws(h),pin:h}))},onSubmit:async()=>{if(!g){if(!Re(k.pin)){E(h=>({...h,isInvalidPin:!0,triesLeft:void 0,pin:""}));return}try{y(!0),f(!1),E(q=>({...q,isInvalidPin:!1,triesLeft:void 0}));let{entropy:h}=await m(k.pin);await r(h),await d(),a.capture("seedlessEnterPinContinue"),c.length>1&&A?A():!j&&e?e():t?.()}catch(h){if(Eu(h)||gu(h)){let q;if("guessesRemaining"in h.result&&(q=h.result.guessesRemaining),q===0){E(K=>({...K,isInvalidPin:!0,triesLeft:q,pin:""})),o();return}let C=!1;"reason"in h.result&&h.result.reason===0&&(C=!0);let{data:R=0}=await p();S(R),a.capture("seedlessPinError",{data:{triesLeft:q,cooldownTimer:R}}),E(K=>({...K,isInvalidPin:C,triesLeft:q,pin:""}))}else yu(h)?(f(!0),P({title:i("seedlessRecoverErrorUpgradeRequiredTitle"),description:i("seedlessRecoverErrorUpgradeRequiredDescription")})):(b.captureError(h,"se*dless"),f(!0),P({title:i("seedlessEnterPinUnknownErrorPrimaryText"),description:i("seedlessEnterPinUnknownErrorSecondaryText"),buttonText:i("seedlessTryAgain")}))}finally{y(!1)}}},onForgot:o,pinAttemptsLeft:k.triesLeft,isPinError:k.isInvalidPin,hasCooldownTimer:F>0,disabled:F>0||k.isInvalidPin||!k.pin||k.pin.length<4,pin:k.pin,continueButtonText:i("seedlessContinueText"),forgotButtonText:i("seedlessVerifyPinForgotButtonText"),attemptsLeftText:i("seedlessEnterPinNumTriesLeft",{numTries:k.triesLeft}),cooldownTimerText:i("seedlessEnterPinCooldown",{minutesLeft:I,secondsLeft:O}),invalidPinText:i("seedlessEnterPinInvalidPinError"),title:i("seedlessEnterPinPrimaryText"),loadingTitle:i("seedlessLoadingWalletPrimaryText"),loadingDescription:i("seedlessLoadingWalletSecondaryText"),errorTitle:M?M.title:i("seedlessLoadingWalletErrorPrimaryText"),errorDescription:M?M.description:i("seedlessErrorSecondaryText"),tryAgainButtonText:M?M.buttonText:i("seedlessTryAgain")}};n();s();n();s();var d5=new Error("timeout while waiting for mutex to become available"),m5=new Error("mutex already locked"),D$=new Error("request for lock canceled"),N$=function(j,A,e,t){function r(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function a(d){try{p(t.next(d))}catch(m){i(m)}}function c(d){try{p(t.throw(d))}catch(m){i(m)}}function p(d){d.done?o(d.value):r(d.value).then(a,c)}p((t=t.apply(j,A||[])).next())})},Fu=class{constructor(A,e=D$){this._value=A,this._cancelError=e,this._weightedQueues=[],this._weightedWaiters=[]}acquire(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);return new Promise((e,t)=>{this._weightedQueues[A-1]||(this._weightedQueues[A-1]=[]),this._weightedQueues[A-1].push({resolve:e,reject:t}),this._dispatch()})}runExclusive(A,e=1){return N$(this,void 0,void 0,function*(){let[t,r]=yield this.acquire(e);try{return yield A(t)}finally{r()}})}waitForUnlock(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);return new Promise(e=>{this._weightedWaiters[A-1]||(this._weightedWaiters[A-1]=[]),this._weightedWaiters[A-1].push(e),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(A){this._value=A,this._dispatch()}release(A=1){if(A<=0)throw new Error(`invalid weight ${A}: must be positive`);this._value+=A,this._dispatch()}cancel(){this._weightedQueues.forEach(A=>A.forEach(e=>e.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var A;for(let e=this._value;e>0;e--){let t=(A=this._weightedQueues[e-1])===null||A===void 0?void 0:A.shift();if(!t)continue;let r=this._value,o=e;this._value-=e,e=this._value+1,t.resolve([r,this._newReleaser(o)])}this._drainUnlockWaiters()}_newReleaser(A){let e=!1;return()=>{e||(e=!0,this.release(A))}}_drainUnlockWaiters(){for(let A=this._value;A>0;A--)this._weightedWaiters[A-1]&&(this._weightedWaiters[A-1].forEach(e=>e()),this._weightedWaiters[A-1]=[])}},K$=function(j,A,e,t){function r(o){return o instanceof e?o:new e(function(i){i(o)})}return new(e||(e=Promise))(function(o,i){function a(d){try{p(t.next(d))}catch(m){i(m)}}function c(d){try{p(t.throw(d))}catch(m){i(m)}}function p(d){d.done?o(d.value):r(d.value).then(a,c)}p((t=t.apply(j,A||[])).next())})},Is=class{constructor(A){this._semaphore=new Fu(1,A)}acquire(){return K$(this,void 0,void 0,function*(){let[,A]=yield this._semaphore.acquire();return A})}runExclusive(A){return this._semaphore.runExclusive(()=>A())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};n();s();n();s();var yj=[];for(let j=0;j<256;++j)yj.push((j+256).toString(16).slice(1));function xk(j,A=0){return(yj[j[A+0]]+yj[j[A+1]]+yj[j[A+2]]+yj[j[A+3]]+"-"+yj[j[A+4]]+yj[j[A+5]]+"-"+yj[j[A+6]]+yj[j[A+7]]+"-"+yj[j[A+8]]+yj[j[A+9]]+"-"+yj[j[A+10]]+yj[j[A+11]]+yj[j[A+12]]+yj[j[A+13]]+yj[j[A+14]]+yj[j[A+15]]).toLowerCase()}n();s();var hu,L$=new Uint8Array(16);function Su(){if(!hu){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");hu=self.crypto.getRandomValues.bind(self.crypto)}return hu(L$)}n();s();n();s();var U$=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),wu={randomUUID:U$};function Q$(j,A,e){if(wu.randomUUID&&!A&&!j)return wu.randomUUID();j=j||{};let t=j.random??j.rng?.()??Su();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,A){if(e=e||0,e<0||e+16>A.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let r=0;r<16;++r)A[e+r]=t[r];return A}return xk(t)}var va=Q$;n();s();async function Gk(j,A,e){let t=await j.decryptionKeySharePhantom.foldAsync(async p=>Buffer.from(new Uint8Array(p)).toString("base64")),r=Buffer.from(j.encryptedAccounts,"hex").toString("base64"),o=Buffer.from(j.encryptionKey,"hex").toString("base64"),i={ciphertext:r,encryptionKey:o,share:t,externalId:A,mode:"JUICEBOX"},a=await z.api().bearer(e).headers({"Content-Type":"application/json"}).post(`${Lt}/v1/bundles`,i),c=sA(a);return c||b.addBreadcrumb("se*dless","Failed to backup bundle to backend","error",{status:a.status,statusText:a.statusText}),c}async function ba(j,A){let e=await z.api().bearer(A).get(`${Lt}/v1/bundles/${j}?mode=JUICEBOX`);if(e.status===404)throw new Error("bundle not found");if(!sA(e)){b.addBreadcrumb("se*dless","Failed to recover bundle from backend","error",{status:e.status,statusText:e.statusText});let t=new Error("Got invalid response from seedless backend: "+e.statusText);throw b.captureError(t,"se*dless"),t}if(!("share"in e.data)){b.addBreadcrumb("se*dless","No share found in bundle","error");let t=new Error("Did not receive share from seedless backend");throw b.captureError(t,"se*dless"),t}try{let t=Ee.from(new Uint8Array(Buffer.from(e.data.share,"base64"))),r=Buffer.from(e.data.ciphertext,"base64").toString("hex"),o=Buffer.from(e.data.encryptionKey,"base64").toString("hex");return{id:e.data.externalId,encryptedAccounts:r,encryptionKey:o,decryptionKeyShare1:t}}catch{throw new Error("Unable to parse bundle. Incorrect format.")}}async function qa(j,A){let e=await z.api().bearer(A).get(`${Lt}/v1/bundles/${j}?mode=JUICEBOX&populate=none`);if(b.addBreadcrumb("se*dless","Checking if user has a se*dless bundle","info"),sA(e))return b.addBreadcrumb("se*dless","A se*dless bundle has been found for this user","info",{status:e.status,statusText:e.statusText}),!0;if(e.status===404)return b.addBreadcrumb("se*dless","No se*dless bundle found for user","info",{status:e.status,statusText:e.statusText}),!1;let t=new Error("Failed to check for se*dless bundle.");throw b.captureError(t,"se*dless"),t}async function xa(j,A){let e=z.api().bearer(A).headers({"Content-Type":"application/json"});j!=="latest"&&(e=e.retry(3,500));let t=await e.delete(`${Lt}/v1/bundles/${j}`,{mode:"JUICEBOX"});if(b.addBreadcrumb("se*dless","Deleting se*dless bundle","info"),sA(t))return b.addBreadcrumb("se*dless","A se*dless bundle has been deleted for this user","info",{status:t.status,statusText:t.statusText}),!0;if(t.status===404)return b.addBreadcrumb("se*dless","No se*dless bundle found for user","info",{status:t.status,statusText:t.statusText}),!1;let r=new Error("Failed to delete se*dless bundle.");throw b.captureError(r,"se*dless"),r}async function $u(j,A){let e=await z.api().bearer(j).get(`${Lt}/v1/device-encryption-keys/${A}`);if(e.status===404)return b.addBreadcrumb("se*dless","No device encryption key found for user","info"),null;if(!sA(e))throw new Error("Unable to get device encryption key.");try{let{encryptionKey:t}=gk.parse(e.data);return Ee.from(new Uint8Array(Buffer.from(t,"base64")))}catch{throw new Error("Unable to parse device encryption key from response.")}}async function Tk(j,A,e){let t=await z.api().bearer(j).post(`${Lt}/v1/device-encryption-keys`,{deviceId:A,encryptionKey:e.fold(r=>Buffer.from(r).toString("base64"))});if(!sA(t))throw new Error("Unable to set device encryption key.")}async function Pk(j,A){let e=await z.api().bearer(j).delete(`${Lt}/v1/device-encryption-keys/${A}`);if(!sA(e))throw new Error("Unable to delete device encryption key.")}n();s();n();s();n();s();n();s();n();s();function zo(j){if(!Number.isSafeInteger(j)||j<0)throw new Error(`positive integer expected, not ${j}`)}function Iu(j){if(typeof j!="boolean")throw new Error(`boolean expected, not ${j}`)}function vu(j){return j instanceof Uint8Array||j!=null&&typeof j=="object"&&j.constructor.name==="Uint8Array"}function jj(j,...A){if(!vu(j))throw new Error("Uint8Array expected");if(A.length>0&&!A.includes(j.length))throw new Error(`Uint8Array expected of length ${A}, not of length=${j.length}`)}function bu(j,A=!0){if(j.destroyed)throw new Error("Hash instance has been destroyed");if(A&&j.finished)throw new Error("Hash#digest() has already been called")}function Ok(j,A){jj(j);let e=A.outputLen;if(j.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}var pt=j=>new Uint32Array(j.buffer,j.byteOffset,Math.floor(j.byteLength/4)),Mk=j=>new DataView(j.buffer,j.byteOffset,j.byteLength),H$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!H$)throw new Error("Non little-endian hardware is not supported");function qu(j){if(typeof j!="string")throw new Error(`string expected, got ${typeof j}`);return new Uint8Array(new TextEncoder().encode(j))}function Ga(j){if(typeof j=="string")j=qu(j);else if(vu(j))j=j.slice();else throw new Error(`Uint8Array expected, got ${typeof j}`);return j}function Ck(...j){let A=0;for(let t=0;t<j.length;t++){let r=j[t];jj(r),A+=r.length}let e=new Uint8Array(A);for(let t=0,r=0;t<j.length;t++){let o=j[t];e.set(o,r),r+=o.length}return e}function _k(j,A){if(A==null||typeof A!="object")throw new Error("options must be defined");return Object.assign(j,A)}function Rk(j,A){if(j.length!==A.length)return!1;let e=0;for(let t=0;t<j.length;t++)e|=j[t]^A[t];return e===0}var xu=(j,A)=>(Object.assign(A,j),A);function Gu(j,A,e,t){if(typeof j.setBigUint64=="function")return j.setBigUint64(A,e,t);let r=BigInt(32),o=BigInt(4294967295),i=Number(e>>r&o),a=Number(e&o),c=t?4:0,p=t?0:4;j.setUint32(A+c,i,t),j.setUint32(A+p,a,t)}n();s();var Fj=(j,A)=>j[A++]&255|(j[A++]&255)<<8,Tu=class{constructor(A){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,A=Ga(A),jj(A,32);let e=Fj(A,0),t=Fj(A,2),r=Fj(A,4),o=Fj(A,6),i=Fj(A,8),a=Fj(A,10),c=Fj(A,12),p=Fj(A,14);this.r[0]=e&8191,this.r[1]=(e>>>13|t<<3)&8191,this.r[2]=(t>>>10|r<<6)&7939,this.r[3]=(r>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|p<<8)&8191,this.r[9]=p>>>5&127;for(let d=0;d<8;d++)this.pad[d]=Fj(A,16+2*d)}process(A,e,t=!1){let r=t?0:2048,{h:o,r:i}=this,a=i[0],c=i[1],p=i[2],d=i[3],m=i[4],B=i[5],f=i[6],k=i[7],E=i[8],g=i[9],y=Fj(A,e+0),F=Fj(A,e+2),S=Fj(A,e+4),I=Fj(A,e+6),O=Fj(A,e+8),M=Fj(A,e+10),P=Fj(A,e+12),X=Fj(A,e+14),_=o[0]+(y&8191),h=o[1]+((y>>>13|F<<3)&8191),q=o[2]+((F>>>10|S<<6)&8191),C=o[3]+((S>>>7|I<<9)&8191),R=o[4]+((I>>>4|O<<12)&8191),K=o[5]+(O>>>1&8191),D=o[6]+((O>>>14|M<<2)&8191),L=o[7]+((M>>>11|P<<5)&8191),H=o[8]+((P>>>8|X<<8)&8191),U=o[9]+(X>>>5|r),N=0,SA=N+_*a+h*(5*g)+q*(5*E)+C*(5*k)+R*(5*f);N=SA>>>13,SA&=8191,SA+=K*(5*B)+D*(5*m)+L*(5*d)+H*(5*p)+U*(5*c),N+=SA>>>13,SA&=8191;let dA=N+_*c+h*a+q*(5*g)+C*(5*E)+R*(5*k);N=dA>>>13,dA&=8191,dA+=K*(5*f)+D*(5*B)+L*(5*m)+H*(5*d)+U*(5*p),N+=dA>>>13,dA&=8191;let qA=N+_*p+h*c+q*a+C*(5*g)+R*(5*E);N=qA>>>13,qA&=8191,qA+=K*(5*k)+D*(5*f)+L*(5*B)+H*(5*m)+U*(5*d),N+=qA>>>13,qA&=8191;let fj=N+_*d+h*p+q*c+C*a+R*(5*g);N=fj>>>13,fj&=8191,fj+=K*(5*E)+D*(5*k)+L*(5*f)+H*(5*B)+U*(5*m),N+=fj>>>13,fj&=8191;let MA=N+_*m+h*d+q*p+C*c+R*a;N=MA>>>13,MA&=8191,MA+=K*(5*g)+D*(5*E)+L*(5*k)+H*(5*f)+U*(5*B),N+=MA>>>13,MA&=8191;let Ej=N+_*B+h*m+q*d+C*p+R*c;N=Ej>>>13,Ej&=8191,Ej+=K*a+D*(5*g)+L*(5*E)+H*(5*k)+U*(5*f),N+=Ej>>>13,Ej&=8191;let mA=N+_*f+h*B+q*m+C*d+R*p;N=mA>>>13,mA&=8191,mA+=K*c+D*a+L*(5*g)+H*(5*E)+U*(5*k),N+=mA>>>13,mA&=8191;let rj=N+_*k+h*f+q*B+C*m+R*d;N=rj>>>13,rj&=8191,rj+=K*p+D*c+L*a+H*(5*g)+U*(5*E),N+=rj>>>13,rj&=8191;let wj=N+_*E+h*k+q*f+C*B+R*m;N=wj>>>13,wj&=8191,wj+=K*d+D*p+L*c+H*a+U*(5*g),N+=wj>>>13,wj&=8191;let Tj=N+_*g+h*E+q*k+C*f+R*B;N=Tj>>>13,Tj&=8191,Tj+=K*m+D*d+L*p+H*c+U*a,N+=Tj>>>13,Tj&=8191,N=(N<<2)+N|0,N=N+SA|0,SA=N&8191,N=N>>>13,dA+=N,o[0]=SA,o[1]=dA,o[2]=qA,o[3]=fj,o[4]=MA,o[5]=Ej,o[6]=mA,o[7]=rj,o[8]=wj,o[9]=Tj}finalize(){let{h:A,pad:e}=this,t=new Uint16Array(10),r=A[1]>>>13;A[1]&=8191;for(let a=2;a<10;a++)A[a]+=r,r=A[a]>>>13,A[a]&=8191;A[0]+=r*5,r=A[0]>>>13,A[0]&=8191,A[1]+=r,r=A[1]>>>13,A[1]&=8191,A[2]+=r,t[0]=A[0]+5,r=t[0]>>>13,t[0]&=8191;for(let a=1;a<10;a++)t[a]=A[a]+r,r=t[a]>>>13,t[a]&=8191;t[9]-=8192;let o=(r^1)-1;for(let a=0;a<10;a++)t[a]&=o;o=~o;for(let a=0;a<10;a++)A[a]=A[a]&o|t[a];A[0]=(A[0]|A[1]<<13)&65535,A[1]=(A[1]>>>3|A[2]<<10)&65535,A[2]=(A[2]>>>6|A[3]<<7)&65535,A[3]=(A[3]>>>9|A[4]<<4)&65535,A[4]=(A[4]>>>12|A[5]<<1|A[6]<<14)&65535,A[5]=(A[6]>>>2|A[7]<<11)&65535,A[6]=(A[7]>>>5|A[8]<<8)&65535,A[7]=(A[8]>>>8|A[9]<<5)&65535;let i=A[0]+e[0];A[0]=i&65535;for(let a=1;a<8;a++)i=(A[a]+e[a]|0)+(i>>>16)|0,A[a]=i&65535}update(A){bu(this);let{buffer:e,blockLen:t}=this;A=Ga(A);let r=A.length;for(let o=0;o<r;){let i=Math.min(t-this.pos,r-o);if(i===t){for(;t<=r-o;o+=t)this.process(A,o);continue}e.set(A.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===t&&(this.process(e,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(A){bu(this),Ok(A,this),this.finished=!0;let{buffer:e,h:t}=this,{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)A[o++]=t[i]>>>0,A[o++]=t[i]>>>8;return A}digest(){let{buffer:A,outputLen:e}=this;this.digestInto(A);let t=A.slice(0,e);return this.destroy(),t}};function V$(j){let A=(t,r)=>j(r).update(Ga(t)).digest(),e=j(new Uint8Array(32));return A.outputLen=e.outputLen,A.blockLen=e.blockLen,A.create=t=>j(t),A}var Dk=V$(j=>new Tu(j));n();s();var Kk=j=>Uint8Array.from(j.split("").map(A=>A.charCodeAt(0))),X$=Kk("expand 16-byte k"),z$=Kk("expand 32-byte k"),W$=pt(X$),Lk=pt(z$),n3=Lk.slice();function rA(j,A){return j<<A|j>>>32-A}function Pu(j){return j.byteOffset%4===0}var Ta=64,J$=16,Uk=2**32-1,Nk=new Uint32Array;function Y$(j,A,e,t,r,o,i,a){let c=r.length,p=new Uint8Array(Ta),d=pt(p),m=Pu(r)&&Pu(o),B=m?pt(r):Nk,f=m?pt(o):Nk;for(let k=0;k<c;i++){if(j(A,e,t,d,i,a),i>=Uk)throw new Error("arx: counter overflow");let E=Math.min(Ta,c-k);if(m&&E===Ta){let g=k/4;if(k%4!==0)throw new Error("arx: invalid block position");for(let y=0,F;y<J$;y++)F=g+y,f[F]=B[F]^d[y];k+=Ta;continue}for(let g=0,y;g<E;g++)y=k+g,o[y]=r[y]^p[g];k+=E}}function Ou(j,A){let{allowShortKeys:e,extendNonceFn:t,counterLength:r,counterRight:o,rounds:i}=_k({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},A);if(typeof j!="function")throw new Error("core must be a function");return zo(r),zo(i),Iu(o),Iu(e),(a,c,p,d,m=0)=>{jj(a),jj(c),jj(p);let B=p.length;if(d||(d=new Uint8Array(B)),jj(d),zo(m),m<0||m>=Uk)throw new Error("arx: counter overflow");if(d.length<B)throw new Error(`arx: output (${d.length}) is shorter than data (${B})`);let f=[],k=a.length,E,g;if(k===32)E=a.slice(),f.push(E),g=Lk;else if(k===16&&e)E=new Uint8Array(32),E.set(a),E.set(a,16),g=W$,f.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${k}`);Pu(c)||(c=c.slice(),f.push(c));let y=pt(E);if(t){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");t(g,y,pt(c.subarray(0,16)),y),c=c.subarray(16)}let F=16-r;if(F!==c.length)throw new Error(`arx: nonce must be ${F} or 16 bytes`);if(F!==12){let I=new Uint8Array(12);I.set(c,o?0:12-c.length),c=I,f.push(c)}let S=pt(c);for(Y$(j,g,y,S,p,d,m,i);f.length>0;)f.pop().fill(0);return d}}function Vk(j,A,e,t,r,o=20){let i=j[0],a=j[1],c=j[2],p=j[3],d=A[0],m=A[1],B=A[2],f=A[3],k=A[4],E=A[5],g=A[6],y=A[7],F=r,S=e[0],I=e[1],O=e[2],M=i,P=a,X=c,_=p,h=d,q=m,C=B,R=f,K=k,D=E,L=g,H=y,U=F,N=S,SA=I,dA=O;for(let fj=0;fj<o;fj+=2)M=M+h|0,U=rA(U^M,16),K=K+U|0,h=rA(h^K,12),M=M+h|0,U=rA(U^M,8),K=K+U|0,h=rA(h^K,7),P=P+q|0,N=rA(N^P,16),D=D+N|0,q=rA(q^D,12),P=P+q|0,N=rA(N^P,8),D=D+N|0,q=rA(q^D,7),X=X+C|0,SA=rA(SA^X,16),L=L+SA|0,C=rA(C^L,12),X=X+C|0,SA=rA(SA^X,8),L=L+SA|0,C=rA(C^L,7),_=_+R|0,dA=rA(dA^_,16),H=H+dA|0,R=rA(R^H,12),_=_+R|0,dA=rA(dA^_,8),H=H+dA|0,R=rA(R^H,7),M=M+q|0,dA=rA(dA^M,16),L=L+dA|0,q=rA(q^L,12),M=M+q|0,dA=rA(dA^M,8),L=L+dA|0,q=rA(q^L,7),P=P+C|0,U=rA(U^P,16),H=H+U|0,C=rA(C^H,12),P=P+C|0,U=rA(U^P,8),H=H+U|0,C=rA(C^H,7),X=X+R|0,N=rA(N^X,16),K=K+N|0,R=rA(R^K,12),X=X+R|0,N=rA(N^X,8),K=K+N|0,R=rA(R^K,7),_=_+h|0,SA=rA(SA^_,16),D=D+SA|0,h=rA(h^D,12),_=_+h|0,SA=rA(SA^_,8),D=D+SA|0,h=rA(h^D,7);let qA=0;t[qA++]=i+M|0,t[qA++]=a+P|0,t[qA++]=c+X|0,t[qA++]=p+_|0,t[qA++]=d+h|0,t[qA++]=m+q|0,t[qA++]=B+C|0,t[qA++]=f+R|0,t[qA++]=k+K|0,t[qA++]=E+D|0,t[qA++]=g+L|0,t[qA++]=y+H|0,t[qA++]=F+U|0,t[qA++]=S+N|0,t[qA++]=I+SA|0,t[qA++]=O+dA|0}function Z$(j,A,e,t){let r=j[0],o=j[1],i=j[2],a=j[3],c=A[0],p=A[1],d=A[2],m=A[3],B=A[4],f=A[5],k=A[6],E=A[7],g=e[0],y=e[1],F=e[2],S=e[3];for(let O=0;O<20;O+=2)r=r+c|0,g=rA(g^r,16),B=B+g|0,c=rA(c^B,12),r=r+c|0,g=rA(g^r,8),B=B+g|0,c=rA(c^B,7),o=o+p|0,y=rA(y^o,16),f=f+y|0,p=rA(p^f,12),o=o+p|0,y=rA(y^o,8),f=f+y|0,p=rA(p^f,7),i=i+d|0,F=rA(F^i,16),k=k+F|0,d=rA(d^k,12),i=i+d|0,F=rA(F^i,8),k=k+F|0,d=rA(d^k,7),a=a+m|0,S=rA(S^a,16),E=E+S|0,m=rA(m^E,12),a=a+m|0,S=rA(S^a,8),E=E+S|0,m=rA(m^E,7),r=r+p|0,S=rA(S^r,16),k=k+S|0,p=rA(p^k,12),r=r+p|0,S=rA(S^r,8),k=k+S|0,p=rA(p^k,7),o=o+d|0,g=rA(g^o,16),E=E+g|0,d=rA(d^E,12),o=o+d|0,g=rA(g^o,8),E=E+g|0,d=rA(d^E,7),i=i+m|0,y=rA(y^i,16),B=B+y|0,m=rA(m^B,12),i=i+m|0,y=rA(y^i,8),B=B+y|0,m=rA(m^B,7),a=a+c|0,F=rA(F^a,16),f=f+F|0,c=rA(c^f,12),a=a+c|0,F=rA(F^a,8),f=f+F|0,c=rA(c^f,7);let I=0;t[I++]=r,t[I++]=o,t[I++]=i,t[I++]=a,t[I++]=g,t[I++]=y,t[I++]=F,t[I++]=S}var AI=Ou(Vk,{counterRight:!1,counterLength:4,allowShortKeys:!1}),jI=Ou(Vk,{counterRight:!1,counterLength:8,extendNonceFn:Z$,allowShortKeys:!1});var eI=new Uint8Array(16),Qk=(j,A)=>{j.update(A);let e=A.length%16;e&&j.update(eI.subarray(e))},tI=new Uint8Array(32);function Hk(j,A,e,t,r){let o=j(A,e,tI),i=Dk.create(o);r&&Qk(i,r),Qk(i,t);let a=new Uint8Array(16),c=Mk(a);Gu(c,0,BigInt(r?r.length:0),!0),Gu(c,8,BigInt(t.length),!0),i.update(a);let p=i.digest();return o.fill(0),p}var Xk=j=>(A,e,t)=>(jj(A,32),jj(e),{encrypt:(o,i)=>{let a=o.length,c=a+16;i?jj(i,c):i=new Uint8Array(c),j(A,e,o,i,1);let p=Hk(j,A,e,i.subarray(0,-16),t);return i.set(p,a),i},decrypt:(o,i)=>{let a=o.length,c=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");i?jj(i,c):i=new Uint8Array(c);let p=o.subarray(0,-16),d=o.subarray(-16),m=Hk(j,A,e,p,t);if(!Rk(d,m))throw new Error("invalid tag");return j(A,e,p,i,1),i}}),d3=xu({blockSize:64,nonceLength:12,tagLength:16},Xk(AI)),Mu=xu({blockSize:64,nonceLength:24,tagLength:16},Xk(jI));n();s();n();s();var Gr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function zk(j=32){if(Gr&&typeof Gr.getRandomValues=="function")return Gr.getRandomValues(new Uint8Array(j));throw new Error("crypto.getRandomValues must be defined")}function Cu(){if(Gr&&typeof Gr.subtle=="object"&&Gr.subtle!=null)return Gr.subtle;throw new Error("crypto.subtle must be defined")}function _u(j){return zo(j.nonceLength),(A,...e)=>({encrypt:(t,...r)=>{let{nonceLength:o}=j,i=zk(o),a=j(A,i,...e).encrypt(t,...r),c=Ck(i,a);return a.fill(0),c},decrypt:(t,...r)=>{let{nonceLength:o}=j,i=t.subarray(0,o),a=t.subarray(o);return j(A,i,...e).decrypt(a,...r)}})}var Wk={async encrypt(j,A,e,t){let r=Cu(),o=await r.importKey("raw",j,A,!0,["encrypt"]),i=await r.encrypt(e,o,t);return new Uint8Array(i)},async decrypt(j,A,e,t){let r=Cu(),o=await r.importKey("raw",j,A,!0,["decrypt"]),i=await r.decrypt(e,o,t);return new Uint8Array(i)}},De={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function rI(j,A,e){if(j===De.CBC)return{name:De.CBC,iv:A};if(j===De.CTR)return{name:De.CTR,counter:A,length:64};if(j===De.GCM)return e?{name:De.GCM,iv:A,additionalData:e}:{name:De.GCM,iv:A};throw new Error("unknown aes block mode")}function Ru(j){return(A,e,t)=>{jj(A),jj(e);let r={name:j,length:A.length*8},o=rI(j,e,t);return{encrypt(i){return jj(i),Wk.encrypt(A,r,o,i)},decrypt(i){return jj(i),Wk.decrypt(A,r,o,i)}}}}var S3=Ru(De.CBC),w3=Ru(De.CTR),$3=Ru(De.GCM);n();s();n();s();function Du(j){return self.crypto.getRandomValues(new Uint8Array(j))}var Oa=new Uint8Array([0,255,200,8,145,16,208,54,90,62,216,67,153,119,254,24,35,32,7,112,161,108,12,127,98,139,64,70,199,75,224,14,235,22,232,173,207,205,57,83,106,39,53,147,212,78,72,195,43,121,84,40,9,120,15,33,144,135,20,42,169,156,214,116,180,124,222,237,177,134,118,164,152,226,150,143,2,50,28,193,51,238,239,129,253,48,92,19,157,41,23,196,17,68,140,128,243,115,66,30,29,181,240,18,209,91,65,162,215,44,233,213,89,203,80,168,220,252,242,86,114,166,101,47,159,155,61,186,125,194,69,130,167,87,182,163,122,117,79,174,63,55,109,71,97,190,171,211,95,176,88,175,202,94,250,133,228,77,138,5,251,96,183,123,184,38,74,103,198,26,248,105,37,179,219,189,102,221,241,210,223,3,141,52,217,146,13,99,85,170,73,236,188,149,60,132,11,245,230,231,229,172,126,110,185,249,218,142,154,201,36,225,10,21,107,58,160,81,244,234,178,151,158,93,34,136,148,206,25,1,113,76,165,227,197,49,187,204,31,45,59,82,111,246,46,137,247,192,104,27,100,4,6,191,131,56]),Jk=new Uint8Array([1,229,76,181,251,159,252,18,3,52,212,196,22,186,31,54,5,92,103,87,58,213,33,90,15,228,169,249,78,100,99,238,17,55,224,16,210,172,165,41,51,89,59,48,109,239,244,123,85,235,77,80,183,42,7,141,255,38,215,240,194,126,9,140,26,106,98,11,93,130,27,143,46,190,166,29,231,157,45,138,114,217,241,39,50,188,119,133,150,112,8,105,86,223,153,148,161,144,24,187,250,122,176,167,248,171,40,214,21,142,203,242,19,230,120,97,63,137,70,13,53,49,136,163,65,128,202,23,95,83,131,254,195,155,69,57,225,245,158,25,94,182,207,75,56,4,185,43,226,193,74,221,72,12,208,125,61,88,222,124,216,20,107,135,71,232,121,132,115,60,189,146,201,35,139,151,149,68,220,173,64,101,134,162,164,204,127,236,192,175,145,253,247,79,129,47,91,234,168,28,2,209,152,113,237,37,227,36,6,104,179,147,44,111,62,108,10,184,206,174,116,177,66,180,30,211,73,233,156,200,198,199,34,110,219,32,191,67,81,82,102,178,118,96,218,197,243,246,170,205,154,160,117,84,14,1]);function Pa(j,A){if(!Number.isInteger(j)||j<0||j>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");return j^A}function oI(j,A){if(!Number.isInteger(j)||j<0||j>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");if(A===0)throw new Error("cannot divide by zero");let e=Oa[j],t=Oa[A],r=(e-t+255)%255,o=Jk[r];return j===0?0:o}function Nu(j,A){if(!Number.isInteger(j)||j<0||j>255)throw new RangeError("Number is out of Uint8 range");if(!Number.isInteger(A)||A<0||A>255)throw new RangeError("Number is out of Uint8 range");let e=Oa[j],t=Oa[A],r=(e+t)%255,o=Jk[r];return j===0||A===0?0:o}function nI(j,A,e){if(j.length!==A.length)throw new Error("sample length mistmatch");let t=j.length,r=0,o=0;for(let i=0;i<t;i++){r=1;for(let a=0;a<t;++a){if(i===a)continue;let c=Pa(e,j[a]),p=Pa(j[i],j[a]),d=oI(c,p);r=Nu(r,d)}o=Pa(o,Nu(A[i],r))}return o}function sI(j,A,e){if(A===0)throw new Error("cannot evaluate secret polynomial at zero");let t=j[e];for(let r=e-1;r>=0;r--){let o=j[r];t=Pa(Nu(t,A),o)}return t}function Yk(){return Du(1)[0]}function iI(){for(;;){let j=Yk();if(j>0)return j}}function aI(j,A){let e=new Uint8Array(A+1);e[0]=j;for(let t=1;t<=A;t++){let r=t===A;e[t]=r?iI():Yk()}return e}function cI(){let j=new Uint8Array(255);for(let e=0;e<255;e++)j[e]=e+1;let A=Du(255);for(let e=0;e<255;e++){let t=A[e]%255,r=j[e];j[e]=j[t],j[t]=r}return j}var Hj={instanceOf(j,A,e){if(j.constructor!==A)throw new TypeError(e)},inRange(j,A,e,t){if(!(A<e&&j>=A&&j<e))throw new RangeError(t)},greaterThanOrEqualTo(j,A,e){if(j<A)throw new Error(e)},equalTo(j,A,e){if(j!==A)throw new Error(e)}};async function Zk(j,A,e){Hj.instanceOf(j,Uint8Array,"secret must be a Uint8Array"),Hj.greaterThanOrEqualTo(j.byteLength,1,"secret cannot be empty"),Hj.instanceOf(A,Number,"shares must be a number"),Hj.inRange(A,2,256,"shares must be at least 2 and at most 255"),Hj.instanceOf(e,Number,"threshold must be a number"),Hj.inRange(e,2,256,"threshold must be at least 2 and at most 255"),Hj.greaterThanOrEqualTo(A,e,"shares cannot be less than threshold");let t=[],r=j.byteLength,o=cI();for(let a=0;a<A;a++){let c=new Uint8Array(r+1);c[r]=o[a],t.push(c)}let i=e-1;for(let a=0;a<r;a++){let c=j[a],p=aI(c,i);for(let d=0;d<A;++d){let m=o[d],B=sI(p,m,i);t[d][a]=B}}return t}async function Af(j){Hj.instanceOf(j,Array,"shares must be an Array"),Hj.inRange(j.length,2,256,"shares must have at least 2 and at most 255 elements");let A=j[0];Hj.instanceOf(A,Uint8Array,"each share must be a Uint8Array");for(let p of j)Hj.instanceOf(p,Uint8Array,"each share must be a Uint8Array"),Hj.greaterThanOrEqualTo(p.byteLength,2,"each share must be at least 2 bytes"),Hj.equalTo(p.byteLength,A.byteLength,"all shares must have the same byte length");let e=j.length,t=A.byteLength,r=t-1,o=new Uint8Array(r),i=new Uint8Array(e),a=new Uint8Array(e),c=new Set;for(let p=0;p<e;p++){let m=j[p][t-1];if(c.has(m))throw new Error("shares must contain unique values but a duplicate was found");c.add(m),i[p]=m}for(let p=0;p<r;p++){for(let d=0;d<e;++d)a[d]=j[d][p];o[p]=nI(i,a,0)}return o}var jf=async(j,A)=>{if(j.length!==32)throw new Error("encryption key must be 32 bytes");uI(j);let e={seeds:[]};for(let p of A){let d="unused",m=p.fold(B=>new Uint8Array(B));e.seeds.push([d,m])}let t=_u(Mu)(j),r=qu(JSON.stringify(e)),o=t.encrypt(r),[i,a]=await Zk(j,2,2);return{encryptedAccounts:ha(o),decryptionKeySharePhantom:Ee.from(i),decryptionKeyShareExternal:Ee.from(a),encryptionKey:"unused"}},zt=class extends Error{reason;constructor(A){super(`Unable to decrypt seedless bundle: ${A}`),this.reason=A}},ef=async j=>{let A;try{A=await pI(j.decryptionKeySharePhantom,j.decryptionKeyShareExternal)}catch{throw new zt("incompatible-shares")}let e;try{e=_u(Mu)(A).decrypt(bk(j.encryptedAccounts))}catch{throw new zt("incorrect-decryption-key")}let t;try{t=JSON.parse(Buffer.from(e).toString())}catch{throw new zt("invalid-json")}let r=fk.safeParse(t);if(!r.success)throw new zt("invalid-format");return r.data.seeds.map(a=>{let c=a[1],p=Ek(c);return Ee.from(p)})},pI=async(j,A)=>{let e=j.fold(o=>new Uint8Array(o)),t=A.fold(o=>new Uint8Array(o));return await Af([e,t])},uI=j=>{if(j.every(A=>A===0))throw new Error("encryption key must not be all zeros")};n();s();var tf={realms:[{id:"a4caa86247c60f61b2454d8cbdb1ba2a",address:"https://production-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var rf={realms:[{id:"a4caa86247c60f61b2454d8cbdb1ba2a",address:"https://production-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var of={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var nf={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev/"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var sf={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.dev"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"f76005fd-80e5-483e-9d84-c09ef7c60ba3",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var af={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"153ebe7b-400c-4d27-be76-139248bb3acd",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var cf={realms:[{id:"497efc0c17f850465b9387a549affb2b",address:"https://development-juicebox.phantom.app"},{id:"7dd7ac88b0584725a2db014818631f8c",address:"https://juicebox.rpcpool.com"}],uuid_nonce:"f577175c-3f1e-4f4a-91d1-cb30aaa0d5d4",register_threshold:2,recover_threshold:2,pin_hashing_mode:"Standard2019"};var pf=[tf,rf],gI=pf.reduce((j,A)=>(j[Vt(A)]=A,j),{}),uf=[of,nf,sf,af,cf],yI=uf.reduce((j,A)=>(j[Vt(A)]=A,j),{});function Ma(){return ne()?gI:yI}function Wo(){let j=ne()?pf:uf;return j[j.length-1]}var $e={success:{type:"success",didBackup:!0},unauthorized:{type:"unauthorized",didBackup:!1},bundleAlreadyExists:{type:"bundle-already-exists",didBackup:!1},errorBackendCheck:{type:"error-backend-check",didBackup:!1},invalidPin:{type:"invalid-pin-format",didBackup:!1},errorEncryptionFailed:{type:"error-encryption-failed",didBackup:!1},errorBackendUpload:{type:"error-backend-upload",didBackup:!1},errorJuiceboxUpload:{type:"error-juicebox-upload",didBackup:!1},recoveredFromJuiceboxError:{type:"recovered-juicebox-error",didBackup:!1},errorBackendDelete:{type:"error-backend-delete",didBackup:!1}},Jo=async(j,{pin:A,entropy:e})=>{if(!Re(A))return $e.invalidPin;let t;try{if(t=await j.authRepository.getUser(),!t)return $e.unauthorized}catch{return $e.unauthorized}let r=Wo(),o=Vt(r);try{if(await qa(o,t.accessToken))return $e.bundleAlreadyExists}catch{return $e.errorBackendCheck}let i;try{let d=Sa(32);i=await jf(d,[e])}catch{return $e.errorEncryptionFailed}try{if(!await Gk(i,o,t.accessToken))return $e.errorBackendUpload}catch{return $e.errorBackendUpload}let a=i.decryptionKeyShareExternal.fold(d=>new Uint8Array(d)),c=await j.juiceboxClient(),p=!0;try{p=await c.sendJuiceboxShare(Wo(),a,A,t.accessToken)}catch{p=!1}if(!p)try{return await xa(o,t.accessToken),$e.recoveredFromJuiceboxError}catch{return $e.errorBackendDelete}return $e.success};n();s();var df="seedlessJuiceboxPinCooldownTimer",Ku=".phantom.seedless.juiceboxPinCooldownTimer",vs=async j=>{let A=await j.get(df),e=await j.get(Ku),t=e?.timeRemaining||A,r=e?.guessesRemaining;return!t||t<0?{timeRemaining:0,guessesRemaining:r}:{timeRemaining:t-Date.now(),guessesRemaining:r}},mf=async(j,A)=>{let e=hI(j);if(!e)return;let t=Date.now()+e*1e3;A.set(Ku,{version:2,timeRemaining:t,guessesRemaining:j})},Bf=async j=>{await j.remove(df),await j.remove(Ku)},hI=j=>SI[j],SI={[7]:0,[6]:0,[5]:30,[4]:60,[3]:120,[2]:300,[1]:300};n();s();var wI=j=>{let A="unknown";return j instanceof Error&&(j.message.includes("bundle not found")?A="bundle-not-found":j.message.includes("Got invalid response from seedless backend")?A="non-ok-response":j.message.includes("Did not receive share from seedless backend")?A="no-share-in-bundle":j.message.includes("Unable to parse bundle. Incorrect format.")&&(A="incorrect-format")),{type:"error-backend-recover",reason:A}},ff=async(j,A,{pin:e,ignoreCooldown:t=!1})=>{let{authRepository:r,juiceboxClient:o,storage:i}=j,{timeRemaining:a,guessesRemaining:c}=await vs(i);if(a>0&&!t)return{type:"cooldown",timeRemaining:a,guessesRemaining:c};if(!Re(e))return{type:"invalid-pin-format"};let p=await r.getUser();if(!p)return{type:"unauthorized"};let{accessToken:d}=p,m;try{m=await ba("latest",d)}catch(F){return wI(F)}let B=Ma()[m.id];if(!B)return{type:"upgrade-required"};let f=await o(),k;try{k=new Uint8Array(await f.getJuiceboxShare(B,e,d)),await Bf(i)}catch(F){let S=F?.reasonCode,I=F?.guessesRemaining;if(gs(F))if(!t&&I&&I<=5){await mf(I,i);let{timeRemaining:M}=await vs(i);return{type:"cooldown",timeRemaining:M,guessesRemaining:I}}else return{type:"error-juicebox-recover",reason:S,guessesRemaining:I};else return{type:"error-juicebox-recover",reason:S||"unknown"}}if(k.every(F=>F===0))return{type:"error-juicebox-share-zero"};let g;try{g=await ef({encryptedAccounts:m.encryptedAccounts,encryptionKey:m.encryptionKey,decryptionKeySharePhantom:m.decryptionKeyShare1,decryptionKeyShareExternal:Ee.from(k)})}catch(F){let S;return F instanceof zt?S=F.reason:S="unknown",{type:"error-decrypt-accounts",reason:S}}if(g.length===0)return{type:"error-no-entropies"};let y=await Jo(j,{entropy:g[0],pin:e});return A.emitRotationResult(y),{type:"success",entropy:g[0]}};n();s();var Ca=class extends Um{emitRotationResult(A){this.emitEvent("seedlessRotationResult",{type:A.type,didRotate:A.didBackup})}emitRecoverResult(A){let e=A.type,t;"reason"in A&&(typeof A.reason=="string"?t=A.reason:t=Ut[A.reason]),this.emitEvent("seedlessRecoverResult",{type:e,reason:t})}emitBackupResult(A){this.emitEvent("seedlessBackupResult",{type:A.type,didBackup:A.didBackup})}};var vI=j=>{let A=new Ca,e=new Is,t={backup:(i,a)=>e.runExclusive(async()=>await qI(j,i,a,A)),recover:i=>e.runExclusive(async()=>await Ef(j,i,!1,A)),verifyPin:i=>e.runExclusive(async()=>await xI(j,i,!0,A)),resetBundleFromDevice:(i,a)=>e.runExclusive(async()=>await bI(j,i,a))},r=new Is;return{...t,hasSeedlessBundle:i=>TI(j,i),deleteBundle:()=>gf(j),needsBundleUpdate:()=>GI(j),timeLeftCooldown:()=>PI(j),getPinVerificationTimer:({pinVerificationExpiryInMs:i})=>OI({...j,pinVerificationExpiryInMs:i}),setPinVerificationTimer:i=>MI(j,i),...{getDeviceEncryptionKey:()=>r.runExclusive(async()=>await CI(j))},generateDeviceEncryptionKey:Ff,setDeviceEncryptionKey:i=>Sf(j,i),deleteDeviceEncryptionKey:()=>_I(j),getOrCreateSeedlessDeviceID:()=>hf(j),subscribe:(i,a)=>A.subscribe(i,a)}},Lu={},bI=async(j,A,e)=>{if(!Re(A))throw new Error("Invalid PIN provided. Only numbers are accepted.");await gf(j);let t=await Jo(j,{pin:A,entropy:e[0]});if(t.type!=="success"&&t.type!=="bundle-already-exists")throw new Error(`Failed to backup bundle: ${t.type}`);return{entropy:e[0]}},qI=async(j,A,e,t)=>{let r=await Jo(j,{pin:e,entropy:A});if(t.emitBackupResult(r),r.type!=="success")throw new Ia(r)},Ef=async(j,A,e=!1,t)=>{let r=await ff(j,t,{pin:A,ignoreCooldown:e});if(t.emitRecoverResult(r),r.type!=="success")throw new Xo(r);return{entropy:r.entropy}},xI=async(j,A,e=!0,t)=>{await Ef(j,A,e,t)},GI=async({authRepository:j})=>{let A=await j.getUser();if(!A)throw new Error("User is not logged in, cannot check for seedless bundle update");let{accessToken:e}=A,t,r=Vt(Wo());try{t=await ba("latest",e)}catch(i){if(i instanceof Error&&i.message==="bundle not found")return!1;throw i}return!!Ma()[t.id]&&t.id!==r},TI=async(j,A="latest")=>{let e=await j.authRepository.getUser();if(!e)throw new Error("User is not logged in, cannot check for se*dless bundle");let{accessToken:t}=e;return await qa(A,t)},gf=async({authRepository:j})=>{let A=await j.getUser();if(!A)throw new Error("User is not logged in, cannot delete se*dless bundle");let{accessToken:e}=A,t=Vt(Wo());return await xa(t,e)},PI=async({storage:j})=>{let{timeRemaining:A}=await vs(j);return A},OI=async({storage:j,pinVerificationExpiryInMs:A})=>{let e=Date.now(),t=await j.get("seedlessPinVerificationLockTimerInMs")??Date.now();return{expired:e>=t+(A??2592e6),timestampInMs:t}},MI=async({storage:j},A)=>{await j.set("seedlessPinVerificationLockTimerInMs",A)},Uu=async j=>(await j.get("seedlessDeviceID"))?.deviceID??null,yf=async(j,A)=>{await j.set("seedlessDeviceID",{version:1,deviceID:A})},Ff=()=>{let j=Sa(32);try{return Promise.resolve(Ee.from(j))}finally{j.fill(0)}},hf=async({storage:j})=>{let A=await Uu(j);return A||(A=va(),await yf(j,A)),A},CI=async j=>{let{authRepository:A}=j,e=await A.getUser();if(!e)throw new Error("User not logged in, cannot retrieve device encryption key.");let t=await hf(j),r=Lu[t];if(r)return r;let o=await $u(e.accessToken,t);return o||(o=await Ff(),await Sf(j,o)),Lu[t]=o,o},Sf=async({authRepository:j,storage:A},e)=>{let t=await j.getUser();if(!t)throw new Error("User not logged in, cannot set device encryption key.");let r=await Uu(A);return r||(r=va(),await yf(A,r)),await Tk(t.accessToken,r,e),Lu[r]=e,e},_I=async({authRepository:j,storage:A})=>{let e=await j.getUser();if(!e)throw new Error("User not logged in, cannot delete device encryption key.");let t=await Uu(A);if(!t)return null;let r=await $u(e.accessToken,t);return r?(await Pk(e.accessToken,t),r):null};n();s();n();s();var Qu={};Dw(Qu,{default:()=>Hu});var Hu="./juicebox-sdk_bg-LUYFYBUJ.wasm";dB(Qu);var wf=!1,DI=async()=>{if(wf)return;let j=await import("./juicebox-sdk_bg-R7JKJPGJ.js"),A=await WebAssembly.instantiateStreaming(fetch(Hu),{"./juicebox-sdk_bg.js":j});j.__wbg_set_wasm(A.instance.exports),wf=!0};function $f(j){globalThis.JuiceboxTokens=j}$f({});var Vu=class{setJuiceboxTokens(A){$f(A)}async backupShare(A,e,t,r,o){await(await this.client(A)).register(t,e,r,o)}async recoverShare(A,e,t){return await(await this.client(A)).recover(e,t)}async deleteShare(A){await(await this.client(A)).delete()}async client(A){return await DI(),new mB(new BB(A),[])}};n();s();n();s();n();s();var NI=l.object({balance:l.boolean(),history:l.boolean()}),XQ=l.record(l.string(),NI),bs=class extends Error{constructor(A){super(A),this.name="SetTermsAcknowledgementError"}};var If=async(j,A)=>{try{return await j.set("termsHaveBeenAcknowledgedLastSeenVersion",A)}catch{throw new bs("Error Setting Terms Acknowledgement")}},vf=async j=>{try{return await j.remove("termsHaveBeenAcknowledgedLastSeenVersion")}catch{throw new bs("Error Clearing Terms Acknowledgement")}};async function KI(j){return(await j.get("onboardedAt"))?.onboardedAt}async function bf(j,A=Date.now()){A&&!await KI(j)?await j.set("onboardedAt",{onboardedAt:A}):A||await j.remove("onboardedAt")}n();s();n();s();var _f=v(Gf(),1),Rf=v(Cf(),1),Yu=v(Nw(),1),Zo=(j=>(j.BLOCK="BLOCK",j.NONE="NONE",j))(Zo||{});function LI(j,A){for(let e=0;e<j.k;e++){let t=(0,Rf.default)(`${j.salt}_${A}_${e}`,{asBytes:!0}),o=Yu.Buffer.from(t).subarray(0,4).readUInt32BE(0)%j.bits,i=Math.floor(o/24),a=Yu.Buffer.from(j.bitVector.slice(i*4,i*4+4),"base64"),c=o%24,p=Math.floor(c/8),d=c%8;if(!(a[p]&1<<7-d))return!1}return!0}var fH=typeof self<"u"&&self.fetch?self.fetch:_f.default;function Zu(j,A,e,t){let o=new URL(t).hostname.toLowerCase().split(".");for(let i=0;i<o.length-1;i++){let a=o.slice(i).join(".");if(A.includes(a)||LI(j,a)&&!e.includes(a))return"BLOCK"}return"NONE"}var Ra=v(Kf());var Wf=v(Qf());n();s();var Hf="https://blocklist.phantom.app/multichain.json",el="https://blowfish-blocklist-proxy.phantom.app",ZI="https://github.com/phantom-labs/blocklist",tl=(j=3)=>({retry:j,retryDelay:A=>Math.min(1e3*2**A,3e4)}),Ne={SLIPPAGE_EXCEEDED:"SLIPPAGE_EXCEEDED",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",INSUFFICIENT_GAS:"INSUFFICIENT_GAS",UNKNOWN_ERROR:"UNKNOWN_ERROR",SIMULATION_FAILED:"SIMULATION_FAILED",TRANSACTION_EXPIRED:"TRANSACTION_EXPIRED",ACCOUNT_FROZEN:"ACCOUNT_FROZEN",SIMULATION_TIMEOUT:"SIMULATION_TIMEOUT",STALE_QUOTE:"STALE_QUOTE"};function Av(j){return{1:"1-critical-alert",2:"2-alert",3:"3-critical-error",4:"4-error",5:"5-information"}[j]}var jv=3,sl=6e5,ev=6e4,KH=l.object({type:l.union([l.literal("all"),l.literal("blocklist"),l.literal("whitelist"),l.literal("error"),l.literal("fuzzy"),l.literal("blowfishBloomFilter")]),result:l.boolean(),source:l.optional(l.string()),match:l.string().optional(),isSubdomainDomainWhitelisted:l.boolean().optional()}),LH=l.object({localHash:l.any(),cursor:l.any()}),il=l.object({bitVector:l.string(),k:l.number(),hash:l.string(),bits:l.number(),salt:l.string()}),Jf=l.union([l.object({bloomFilter:il,bloomFilterHash:l.string(),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()}),l.object({bloomFilter:il.optional(),bloomFilterHash:l.optional(l.string()),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()})]),Yf=l.object({bloomFilter:il,lastUpdated:l.number()}).nullish(),Zf=l.object({recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),lastUpdated:l.number().optional()}).nullish(),xs=class{blocklist;whitelist;fuzzylist;tolerance;constructor(A,e,t,r){this.blocklist=rl(A),this.whitelist=rl(e),this.fuzzylist=rl(t),this.tolerance=r||jv}check(A,e){if(!A)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=Da(A),r=al(t);if(rv(r,this.whitelist)){let c=new URL(A).hostname;if(ol(al(c),this.blocklist)){let d={type:"blocklist",result:!0,source:c,isSubdomainDomainWhitelisted:!0};return e.capture("blockedDomain",{data:d}),d}else return{type:"whitelist",result:!1,source:c,isSubdomainDomainWhitelisted:!0}}if(ol(r,this.whitelist))return{type:"whitelist",result:!1,source:t,isSubdomainDomainWhitelisted:!1};if(ol(r,this.blocklist)){let c={type:"blocklist",result:!0,source:t,isSubdomainDomainWhitelisted:!1};return e.capture("blockedDomain",{data:c}),c}if(this.tolerance>0){let c=Vf(r);c=c.replace("www.","");let p=this.fuzzylist.find(d=>{let m=Vf(d);return Wf.default.get(c,m)<=this.tolerance});if(p)return{type:"fuzzy",result:!0,match:tv(p),source:t,isSubdomainDomainWhitelisted:!1}}return{type:"all",result:!1,source:t,isSubdomainDomainWhitelisted:!1}}},Da=j=>{let A=new URL(j).hostname.split(".");return A.slice(0).slice(-(A.length===4?3:2)).join(".")},rl=j=>j.map(al),al=j=>j.split(".").reverse(),tv=j=>j.slice().reverse().join("."),Vf=j=>j.slice(1).reverse().join("."),ol=(j,A)=>A.some(e=>e.length>j.length?!1:e.every((t,r)=>j[r]===t)),rv=(j,A)=>A.some(e=>e[0]===j[0]&&e[1]===j[1]&&e[2]==="*"),ov=async j=>{let A=(0,Ra.getBlocklist)(),e=await j.get("cachedBlocklistDiff"),t=null;try{t=JSON.parse(`${e}`)}catch(r){b.captureError(new Error(`Error parsing blocklist diff: ${r?.message}`),"generic")}if(t&&t.expiresAt&&t.expiresAt>Date.now())return new xs(A.blocklist.concat(t.blocklist),A.whitelist.concat(t.whitelist),A.fuzzylist.concat(t.fuzzylist));{let r={},o=(0,Ra.getVersion)();t&&(r.lastContentHash=`${t.contentHash}`),o&&(r.localBlocklistVersion=`${o}`);let i=await z.headers(r).get(Hf);if(i.status===200){let a=i.data;return a.expiresAt=Date.now()+sl,j.set("cachedBlocklistDiff",JSON.stringify(a)),new xs(A.blocklist.concat(a.blocklist),A.whitelist.concat(a.whitelist),A.fuzzylist.concat(a.fuzzylist))}else{if(i.status===304)return t.expiresAt=Date.now()+sl,j.set("cachedBlocklistDiff",JSON.stringify(t)),new xs(A.blocklist.concat(t.blocklist),A.whitelist.concat(t.whitelist),A.fuzzylist.concat(t.fuzzylist));throw new Error("Invalid response from blocklist")}}},cl=async(j,A,e)=>{let t,r;try{let i=await Hi(A.getFeatureFlags(),1e3);t=!!i["kill-blowfish-blocklist-cursor"],r=!!i["kill-previous-blocklist"]}catch{t=!1,r=!1}let o;try{if(r)return t?zf(e,j,A):Xf(e,j,A);{o=await ov(j);let i=o.check(e,A);return i.type==="all"?t?zf(e,j,A):Xf(e,j,A):i}}catch{return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}}},Xf=async(j,A,e)=>{if(!j)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=Da(j),r=await A.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"]),o=r.cachedBloomFilter??null,i=r.cachedBloomFilterHash??null,a=r.cachedScanDataCursor??null,c=r.cachedScanDataRecents??null,p=null,d={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0},m=null;if(o){let f=Yf.safeParse(o);f.success?p=f.data:await nl(A)}if(c){let f=Zf.safeParse(c);f.success?d=f.data:await nl(A)}if(a){let k=l.string().safeParse(a);k.success?m=k.data:await nl(A)}if(!d||d.lastUpdated==null||Date.now()>d.lastUpdated+ev){let f={localHash:i,cursor:m},k=await z.post(el,f);if(k.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let E=k.data,g,y=Jf.safeParse(E);if(y.success)g=y.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let F=[],S=[],I=typeof i=="string"&&g.bloomFilterHash?i!==g.bloomFilterHash:!1;d!=null&&!I&&(F=d.recentlyAdded,S=d.recentlyRemoved),F=F.concat(g.recentlyAdded),S=S.concat(g.recentlyRemoved),F=F.filter(M=>g.recentlyRemoved.indexOf(M)<0),S=S.filter(M=>g.recentlyAdded.indexOf(M)<0);let O={recentlyAdded:F,recentlyRemoved:S,lastUpdated:Date.now()};if(await A.set("cachedScanDataRecents",O),d=O,g.nextCursor!==m&&await A.set("cachedScanDataCursor",g.nextCursor),g.bloomFilter!=null){let M={bloomFilter:g.bloomFilter,lastUpdated:Date.now()};await Promise.all([A.set("cachedBloomFilter",M),A.set("cachedBloomFilterHash",g.bloomFilterHash)]),p=M}}if(!p)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let B=Zu(p.bloomFilter,d.recentlyAdded,d.recentlyRemoved,j);if(B===Zo.BLOCK){let f={result:!0,source:t,type:"blowfishBloomFilter"};return e.capture("blockedDomain",{data:f}),f}else if(B===Zo.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};async function nl(j){await j.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"])}var zf=async(j,A,e)=>{if(!j)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let t=Da(j),r=await A.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"]),o=r.cachedBloomFilter??null,i=r.cachedBloomFilterHash??null,a=r.cachedScanDataRecents??null,c=null,p={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0};if(o){let m=Yf.safeParse(o);m.success?c=m.data:await A.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(a){let m=Zf.safeParse(a);m.success?p=m.data:await A.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(!p||p.lastUpdated==null||Date.now()>p.lastUpdated+sl){let m={localHash:i},B=await z.post(el,m);if(B.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let f=B.data,k,E=Jf.safeParse(f);if(E.success)k=E.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let g={recentlyAdded:k.recentlyAdded,recentlyRemoved:k.recentlyRemoved,lastUpdated:Date.now()};if(await A.set("cachedScanDataRecents",g),p=g,k.bloomFilter!=null){let y={bloomFilter:k.bloomFilter,lastUpdated:Date.now()};await Promise.all([A.set("cachedBloomFilter",y),A.set("cachedBloomFilterHash",k.bloomFilterHash)]),c=y}}if(!c)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let d=Zu(c.bloomFilter,p.recentlyAdded,p.recentlyRemoved,j);if(d===Zo.BLOCK){let m={result:!0,source:t,type:"blowfishBloomFilter"};return e.capture("blockedDomain",{data:m}),m}else if(d===Zo.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};n();s();n();s();var nv=j=>j/1e8;n();s();n();s();var Na={GREEN:"accentSuccess",RED:"accentAlert",WHITE:"textPrimary"};function iv(j){switch(j){case"PLUS":return Na.GREEN;case"MINUS":return Na.RED;case"EQUAL":return Na.WHITE;default:return Na.WHITE}}function av(j){let A=j?.advancedDetails&&"safeguard"in j.advancedDetails?j?.advancedDetails?.safeguard:void 0;if(A?.recommended&&!A?.shouldBundle&&!A.error&&!A.verifyError&&A?.transactions&&A.transactions.length>0)return A.transactions}function AE(j,A){if(j.params&&"safeguard"in j.params&&j.params.safeguard&&A?.advancedDetails&&"safeguard"in A.advancedDetails&&A.advancedDetails.safeguard?.transactions){let e=A.advancedDetails.safeguard;if(e.error)return e.error;let t=j.params.transactions,r=e.transactions;if(r){let o;try{PB(t,r)}catch(i){i instanceof No?o=i:i instanceof Error?o=No.createUnknownError(i.message):o=No.createUnknownError("Non error type",i)}if(o)return A.advancedDetails.safeguard.verifyError=o,o}}}function jE(j){if(j.advancedDetails&&"requestId"in j.advancedDetails)return j.advancedDetails.requestId}n();s();n();s();var pl=async(j,A,e)=>{let t=`/simulation/v1?language=${j}`,r=await z.api().post(t,{...e,chainId:e.networkID,appVersion:vA,platform:oj,deviceId:A});if(!sA(r))throw new Error("Failed to scan message");return r.data},Gs=async(j,A,e)=>{let t=`/simulation/v1?language=${j}`,r={...e.params,...e.params&&"safeguard"in e.params?{safeguard:{...e.params.safeguard,lighthouseProgramId:TB}}:{}},o=await z.api().post(t,{...e,chainId:e.networkID,params:r,metadata:e.metadata,appVersion:vA,platform:oj,deviceId:A});if(!sA(o))throw new Error("Failed to scan transaction");let i=o.data,a=AE(e,i);if(a instanceof No){let c=jE(i);b.captureMessage(`Verify error ${c??""}: ${a.message}`,"safeguard")}return i};var y9=l.union([l.literal("signTransaction"),l.literal("signAllTransactions"),l.literal("signAndSendTransaction"),l.literal("signAndSendAllTransactions")]);n();s();var eE=l.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),dt=l.object({id:l.string(),displayName:l.string().optional(),logoURI:l.union([l.string(),l.null()]).optional(),tokenType:eE,decimals:l.number().optional(),symbol:l.string().optional(),isSpam:l.boolean().optional()}),tE=l.object({id:tt,displayName:l.string(),logoURI:l.union([l.string(),l.null()]).optional()}),Ka=l.object({token:dt,amount:l.string(),to:tt,from:tt}),ul=l.literal("UNCLASSIFIED_APP_INTERACTION"),ll=l.literal("TOKEN_SEND"),dl=l.literal("TOKEN_BURN"),ml=l.literal("TOKEN_SWAP"),Bl=l.literal("TOKEN_UNWRAP"),kl=l.literal("WITHDRAW_STAKE"),fl=l.literal("DEACTIVATE_STAKE"),El=l.literal("STAKE"),gl=l.literal("COLLECTIBLE_LIST"),yl=l.literal("COLLECTIBLE_BUY_ITEM"),Fl=l.literal("COLLECTIBLE_CANCEL_BID"),hl=l.literal("COLLECTIBLE_BID_ITEM"),Sl=l.literal("COLLECTIBLE_UNLIST"),wl=l.literal("COLLECTIBLE_SELL_ITEM"),$l=l.literal("CANCEL_TX"),Il=l.literal("TOKEN_APPROVAL"),vl=l.literal("CANCEL_ORDER"),bl=l.literal("COLLECTION_APPROVAL"),ql=l.literal("BRIDGE_INIT"),cv=l.union([ul,ll,dl,ml,Bl,kl,fl,El,gl,yl,Fl,hl,Sl,wl,$l,Il,vl,bl,ql]),rE=l.object({transactionType:ul,balanceChanges:l.array(Ka),dapp:l.union([Pe,l.null()]).optional()}),oE=l.object({transactionType:ll,balanceChanges:l.array(Ka).nonempty(),dapp:l.union([Pe,l.null()]).optional()}),nE=l.object({transactionType:dl,dapp:l.union([Pe,l.null()]).optional(),token:dt,amount:l.string()}),sE=l.object({transactionType:ml,dapp:l.union([Pe,l.null()]).optional(),receiveToken:dt,sendToken:dt,receiveAmount:l.string(),sendAmount:l.string()}),iE=l.object({transactionType:Bl,token:dt,amount:l.string()}),aE=l.object({transactionType:kl,stakeAccount:tt,amount:l.string()}),cE=l.object({transactionType:fl,stakeAccount:tt,amount:l.string()}),pE=l.object({transactionType:El,stakeAccount:tt,amount:l.string(),validatorName:l.string().optional(),validatorWebsite:l.string().optional(),keybaseUsername:l.string().optional()}),uE=l.object({transactionType:$l}),jn=l.object({dapp:l.union([Pe,l.null()]),itemAmount:l.string().optional(),item:dt,forAmount:l.string(),forAsset:dt,listingUrl:l.string().optional()}),lE=jn.merge(l.object({transactionType:gl})),dE=jn.merge(l.object({transactionType:yl})),mE=jn.merge(l.object({transactionType:Fl})),BE=jn.merge(l.object({transactionType:hl})),kE=jn.merge(l.object({transactionType:Sl})),fE=jn.merge(l.object({transactionType:wl})),EE=l.object({transactionType:Il,dapp:l.union([Pe,l.null()]).optional(),token:dt,value:l.string().optional(),isApproved:l.boolean()}),gE=l.object({transactionType:vl,dapp:l.union([Pe,l.null()]).optional(),orderId:l.string()}),yE=l.object({transactionType:bl,collection:tE,dapp:l.union([Pe,l.null()]).optional(),isApproved:l.boolean()}),FE=l.object({transactionType:ql,dapp:l.union([Pe,l.null()]).optional(),balanceChanges:l.array(Ka).nonempty(),explorerUrl:l.string().optional()}),hE=l.enum(["success","failed"]),SE=l.object({networkFee:l.string().optional(),networkFeePayer:l.string().optional(),status:hE,errorMessage:l.union([l.string(),l.null()]),blockNumber:l.string(),chainId:ge,transactionId:l.string()}),La=l.object({timestamp:l.number(),owner:tt,id:tt,interactionData:l.union([rE,oE,nE,sE,iE,aE,cE,pE,lE,dE,mE,BE,kE,fE,uE,EE,gE,yE,FE]),chainMeta:SE}),Ij=j=>j.split("/")[1]?.split(":").slice(1).join(":");n();s();var Tr=j=>{switch(j){case"SemiFungible":case"NonFungible":return!0;default:return!1}},xl=(j,A)=>{let e=Ij(j.to),t=Ij(j.from),r=A.some(i=>i.address.toLowerCase()===e.toLowerCase()),o=A.some(i=>i.address.toLowerCase()===t.toLowerCase());return r&&!o};n();s();var Gl=v(x());n();s();var wE=({interactionData:j,isError:A,selectedAccountAddresses:e,getKnownAddressLabel:t,start:r,networkID:o})=>{let a=j.balanceChanges[0],{token:{symbol:c,displayName:p,tokenType:d,decimals:m},amount:B}=a,f=xl(a,e),k=Tr(d),g=pv({isCollectible:k,sign:f?"+":"-",amount:B,decimals:m,tokenSymbol:c,tokenType:d,isError:A});if(f){let S=Ij(a.from),I=bp(S,void 0,t(S,o));return{topLeft:{text:`${G.t("transactionsReceived")} ${k?p||G.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${g}`,color:"accentSuccess"},bottomLeft:{text:G.t("transactionsFromParagraphInterpolated",{from:I,defaultValue:`From ${I}`})},start:r}}let y=Ij(a.to),F=bp(y,void 0,t(y,o));return{topLeft:{text:A?G.t("transactionsSendFailed"):`${G.t("transactionsSent")} ${k?p||G.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${g}`,color:"textPrimary"},bottomLeft:{text:G.t("transactionsToParagraphInterpolated",{to:F,defaultValue:`To ${F}`})},start:r}};function pv({isCollectible:j,sign:A,amount:e,decimals:t,tokenSymbol:r,tokenType:o,isError:i}){return i||t===void 0||o==="NonFungible"?"":j?`${A}${Cj(e,t)}`:`${A}${Cj(e,t)}${r?` ${Te(r,6)}`:""}`}var uv=["So11111111111111111111111111111111111111112","501"],lv=(j,A,e,t,r)=>{let{interactionData:o,chainMeta:i}=j,{transactionType:a}=o,c=i.status==="failed",p=i.chainId,d=$.getTokenSymbol(p),m=$.getTokenDecimals(p),B=A("historyUnknownDappName"),f=Gl.default.createElement(e,{activityItem:j,size:"small",isDetailViewOrSvg:!1});switch(a){case"TOKEN_SEND":return wE({interactionData:o,isError:c,selectedAccountAddresses:r,getKnownAddressLabel:t,start:f,networkID:p});case"TOKEN_BURN":{let{amount:k,token:E}=o,g="";return E.displayName?k==="1"?g=E.displayName:g=`${E.displayName} (${k})`:g=A("richTransactionDetailUnknownNFT"),{topLeft:{text:c?`${A("transactionsFailedBurn")}`:`${A("transactionsBurned")}`},bottomLeft:{text:g},start:f}}case"TOKEN_UNWRAP":{let{amount:k,token:E}=o;return{topLeft:{text:c?`${A("transactionsUnwrappedFailed")}`:`${A("transactionsUnwrapped")}`},topRight:{text:c?"":`${Cj(k,E.decimals??0)} ${E.symbol}`,color:"textPrimary"},start:f}}case"TOKEN_SWAP":{let{receiveAmount:k,receiveToken:E,sendAmount:g,sendToken:y,dapp:F}=o,S=F?F.displayName:A("historyUnknownDappName"),I=cs(Ij(y.id)||""),O=cs(Ij(E.id)||""),M="";!c&&E.decimals!==void 0&&(M=`+${Cj(k,E.decimals)} ${Te(E.symbol||O,6)}`);let P="";return!c&&y.decimals!==void 0&&(P=`-${Cj(g,y.decimals)} ${Te(y.symbol||I,6)}`),{topLeft:{text:A(c?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:M,color:"accentSuccess"},bottomLeft:{text:S},bottomRight:{text:P,color:"textPrimary"},start:f}}case"BRIDGE_INIT":{let k=o.dapp?o.dapp.displayName:B,g=o.balanceChanges[0],{token:{symbol:y,decimals:F},amount:S}=g,I=y?` ${Te(y,6)}`:"";if(!c&&F!==void 0){let O=`-${Cj(S,F)}${I}`;return{topLeft:{text:c?A("transactionBridgeInitiatedFailed"):`${A("transactionBridgeInitiated")}`},bottomLeft:{text:k},topRight:{text:`${O}`,color:"textPrimary"},start:f}}return{topLeft:{text:c?A("transactionBridgeInitiatedFailed"):`${A("transactionBridgeInitiated")}`},bottomLeft:{text:k},start:f}}case"WITHDRAW_STAKE":{let{amount:k,stakeAccount:E}=o,g=Ij(E),y=$.getTokenSymbol(p);return{topLeft:{text:A(c?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:c?"":`${Cj(k,m)} ${Te(y,6)}`,color:"textPrimary"},bottomLeft:{text:Ji(g,4)},start:f}}case"DEACTIVATE_STAKE":{let{stakeAccount:k}=o,E=Ij(k);return{topLeft:{text:A(c?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:Ji(E,4)},start:f}}case"STAKE":{let{amount:k,stakeAccount:E,validatorName:g}=o,y=Ij(E);return{topLeft:{text:A(c?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:c?"":`${Cj(k,m)} ${Te(d,6)}`,color:"textPrimary"},bottomLeft:{text:g||Ji(y,4)},start:f}}case"COLLECTIBLE_LIST":{let{dapp:k,item:E}=o,g=k?k.displayName:A("historyUnknownDappName"),y=E.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsListedFailed"):A("transactionsListedInterpolated",{name:y})},bottomLeft:{text:g},start:f}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:k,itemAmount:E,item:g,forAsset:y,forAmount:F}=o,S=k?k.displayName:A("historyUnknownDappName"),I=$E(F,y.decimals,Te(y.symbol||"",6)),O=g.symbol||cs(Ij(g.id)),M=E&&g.tokenType==="SemiFungible"?`+${E} ${O}`:`+${O}`;return{topLeft:{text:A(c?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:c?"":M,color:"accentSuccess"},bottomRight:{text:c?"":`${I}`,color:"textPrimary"},bottomLeft:{text:S},start:f}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:k,item:E}=o,g=k?k.displayName:A("historyUnknownDappName"),y=E.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsCancelBidOnFailed"):A("transactionsCancelBidOnInterpolated",{name:y})},bottomLeft:{text:g},start:f}}case"COLLECTIBLE_BID_ITEM":{let{dapp:k,item:E}=o,g=k?k.displayName:A("historyUnknownDappName"),y=E.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsBidFailed"):A("transactionsBidOnInterpolated",{name:y})},bottomLeft:{text:g},start:f}}case"COLLECTIBLE_UNLIST":{let{dapp:k,item:E}=o,g=k?k.displayName:A("historyUnknownDappName"),y=E.displayName||A("richTransactionDetailUnknownNFT");return{topLeft:{text:c?A("transactionsUnlistedFailed"):A("transactionsUnlistedInterpolated",{name:y})},bottomLeft:{text:g},start:f}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:k,itemAmount:E,item:g,forAsset:y,forAmount:F}=o,S=k?k.displayName:A("historyUnknownDappName"),I=y.decimals!==void 0?`+${Cj(F,y.decimals)} ${Te(y.symbol||"",6)}`:A("transactionsUnknownAmount"),O=g.symbol||cs(Ij(g.id)),M=E&&g.tokenType==="SemiFungible"?`-${E} ${O}`:`-${O}`;return{topLeft:{text:A(c?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:c?"":`${I}`,color:"accentSuccess"},bottomRight:{text:c?"":M,color:"textPrimary"},bottomLeft:{text:S},start:f}}case"CANCEL_TX":return{topLeft:{text:A(c?"transactionCancelledFailed":"transactionCancelled")},start:f};case"TOKEN_APPROVAL":{let{dapp:k,token:E,isApproved:g}=o,y=Tr(E.tokenType)?E.displayName:E.symbol,F;return c?g?Tr(E.tokenType)?F=A("transactionApproveTokenFailed",{tokenSymbol:y}):F=A("transactionApprovalFailed"):Tr(E.tokenType)?F=A("transactionRevokeApproveTokenFailed",{tokenSymbol:y}):F=A("transactionRevokeFailed"):g?F=A("transactionApproveToken",{tokenSymbol:y}):F=A("transactionRevokeApproveToken",{tokenSymbol:y}),{topLeft:{text:F},bottomLeft:{text:k?k.displayName:B,color:"textTertiary"},start:f}}case"COLLECTION_APPROVAL":{let{collection:k,isApproved:E,dapp:g}=o,y=k.displayName,F;return c?E?F=A("transactionApproveTokenFailed",{tokenSymbol:y}):F=A("transactionRevokeApproveTokenFailed",{tokenSymbol:y}):E?F=A("transactionApproveToken",{tokenSymbol:y}):F=A("transactionRevokeApproveToken",{tokenSymbol:y}),{topLeft:{text:F},bottomLeft:{text:g?g.displayName:B,color:"textTertiary"},start:f}}case"CANCEL_ORDER":{let{dapp:k}=o;return{topLeft:{text:A(c?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:k?.displayName||A("historyUnknownDappName"),color:"textTertiary"},start:f}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:k}=o,E=k?k.displayName:B;return{topLeft:{text:A(c?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:E},start:f}}}},dv=(j,A)=>{let{display:e,type:t}=j,{topLeft:r,topRight:o,bottomLeft:i,bottomRight:a}=e.summary,c=Gl.default.createElement(A,{logoUri:e.summary.logoUri,pendingTransactionType:t,size:"small"});return{topLeft:r,topRight:o,bottomLeft:i,bottomRight:a,start:c}},Tl=(j,A,e)=>{let t=(j??[]).map(IB);if(A){let r=t.find(o=>o.chainId===A)?.address;if(r){let o={chainId:A,address:r};e&&(o.filters=[{type:"token",value:e}]),t=[o]}}return t},Pl=j=>{if(!j)return;let A=V(j);if(A.resourceType!=="nativeToken")return j.type==="SPL"?j.data.splTokenAccountPubkey:A.address},mv=(j,A)=>{let e=Ij(j.id);return uv.includes(e)&&(j.tokenType="Native"),j.tokenType==="Native"?{chainId:A,slip44:$.getSlip44(A),resourceType:"nativeToken"}:{chainId:A,address:e,resourceType:"address"}},$E=(j,A,e)=>{if(!j||!A)return G.t("transactionsUnknownAmount");let t=wA(j,A),r=t.abs(),o=t.isZero()?"":t.isPositive()?"-":"+",i=Uj(r);return`${o}${i} ${e}`};n();s();var Ts=v(x());var Bv=l.object({orderIds:l.array(l.object({bytesValue:l.string(),bytesArrayValue:l.string(),stringValue:l.string()}))}),kv=async(j,A)=>{if(A==="LI.FI")return{label:G.t("transactionBridgeStatusLink",{dappName:"LI.FI"}),value:`https://explorer.li.fi/tx/${j}`};if(A==="deBridge")try{let e=await z.get(`https://stats-api.dln.trade/api/Transaction/${j}/orderIds`),t=Bv.safeParse(e.data);if(!t.success){b.captureError(new Error("Failed to parse deBridge response"),"history");return}let r=t.data.orderIds[0]?.stringValue;if(!r){b.captureError(new Error("No orderId found in deBridge response"),"history");return}return{label:G.t("transactionBridgeStatusLink",{dappName:"DeBridge"}),value:`https://app.debridge.finance/order?orderId=${r}`}}catch(e){b.captureError(new Error(`Could not fetch bridge explorer url: ${e}`),"history");return}},fv=(j,A)=>{let[e,t]=(0,Ts.useState)(),[r,o]=(0,Ts.useState)(!1);return(0,Ts.useEffect)(()=>{j&&A&&(async()=>{o(!0);try{let a=await kv(j,A);t(a)}finally{o(!1)}})()},[j,A]),{bridgeUrl:e,isLoading:r}};n();s();n();s();n();s();var Ke={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var IE={...Ke};n();s();var vE={...Ke};n();s();var bE={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};n();s();var qE={...Ke,showTimeToMineRowInPendingTransactionDetail:!0};n();s();var xE={...Ke};n();s();var GE={...Ke};n();s();var TE={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};n();s();var PE={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var Ev=new To({solana:TE,ethereum:qE,polygon:GE,monad:xE,base:vE,arbitrum:IE,bitcoin:bE,sui:PE}),OE=Go(Ev);n();s();n();s();n();s();n();s();var CE=v(x(),1);var ME=new WeakMap;function _E(j,A){let e=CB(A),t=gv(e);for(let[r,o]of j)(!t.has(r)||A?.dangerouslyForceHydrate)&&(t.add(r),e.set(r,o))}var gv=j=>{let A=ME.get(j);return A||(A=new WeakSet,ME.set(j,A)),A};var UE=v(x());n();s();var KE=v(x());n();s();var yv=10,Fv="/history/v2",en=class extends Error{message="406: Cache bust!"},Ps=class extends Error{message="Server response malformed."},Ua=class extends Error{},Qa=class extends Error{},Ol=l.object({next:l.union([l.null(),l.string()]),results:l.array(La)}),RE=async j=>{let A=await z.api().retry(3,2e3).post(`${Fv}`,j);if(A.status===406)throw new en;if(A.status>=400&&A.status<500)throw new Qa(`FetchActivityItem: Status code: ${A.status}`);if(A.status>=500)throw new Ua(`FetchActivityItem: Status code: ${A.status}`);return A.data},DE=j=>!Array.isArray(j.results)||typeof j.next!="string"&&j.next!==null,Ha=async j=>{let A=await RE(j);if(DE(A))throw new Ps;for(;A.results?.length<yv&&A.next;){if(DE(A))throw new Ps;let e=await RE({next:A.next,isSpam:j.isSpam});A.next=e.next,A.results=[...A.results,...e.results]}try{return Ol.parse(A)}catch(e){let t=e,r=[],o=t.issues;for(let c=0;c<o.length;++c){let p=o[c].path;if(p[0]!=="results")throw b.captureError(t,"history"),t;let d=p[1];if(typeof d!="number")throw b.captureError(t,"history"),t;r.push(d)}r.sort(function(c,p){return p-c});let i=r.map(c=>A.results[c]).map(c=>c.interactionData?.transactionType||""),a=[];for(let c=0;c<r.length;++c){let p=r[c],d=A.results[p],m={timestamp:d?.timestamp,owner:d?.owner,id:d?.id,chainMeta:d?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{La.parse(m),A.results[p]=m,a.push(p)}catch{}}for(let c=0;c<r.length;++c){let p=r[c];a.indexOf(p)===-1&&A.results.splice(p,1)}r.length&&console.error(`Removed history items, ${i.join(",")}`);try{return Ol.parse(A)}catch(c){let p=c;throw b.captureError(p,"history"),p}}};var hv=3e5,Os="fetch-infinite-activity-items",LE=({accounts:j,isSpam:A})=>[Os,j,A],Sv=(j,A)=>{j.removeQueries({queryKey:A})},Ml=({accounts:j,isSpam:A})=>{let e=AA();(0,KE.useEffect)(()=>()=>{e.cancelQueries({queryKey:[Os],exact:!1})},[e]);let t=LE({accounts:j,isSpam:A});return se({queryKey:t,queryFn:async({pageParam:i})=>{try{let a;i&&i!==""?a=await Ha({next:i,isSpam:A}):a=await Ha({accounts:j||[],isSpam:A});let c=a.results.map(p=>(p.interactionData.transactionType==="TOKEN_SEND"&&p.interactionData.balanceChanges.sort(wv(j)),p));return{...a,results:c}}catch(a){a instanceof en&&Sv(e,t),b.captureError(a,"history")}},getNextPageParam:i=>i?.next,staleTime:hv,retry:!1,enabled:!!j?.length&&j.every(i=>!$.isLocalNetworkID(i.chainId)),initialPageParam:""})};function wv(j){return(A,e)=>{let t=NE(A,j),r=NE(e,j);return t?-1:r?1:0}}function NE(j,A){let e=j.to.split("/address:")[1],t=j.from.split("/address:")[1];return A.some(r=>r.address.toLowerCase()===e.toLowerCase()||r.address.toLowerCase()===t.toLowerCase())}var $v=({fungible:j,isSpam:A=!1})=>{let{data:e=Nm,status:t}=jB(),r=e.isDeveloperMode,o=Pl(j),{data:i}=wr({address:j?.data.walletAddress,networkID:j?.data.chain.id}),a=(0,UE.useMemo)(()=>Tl(i?[i]:[],j?.data.chain.id,o),[i,j?.data.chain.id,o]),c=Ml({accounts:a,isSpam:A}),p=c.isPending||t==="pending";return{activityItemsData:c,isLoadingHistory:p,isDeveloperMode:r}};n();s();var n6=v(x());n();s();var xg=v(Hw()),Gg=v(Sg());var fq=l.object({domain:l.string(),url:l.string(),name:l.string(),category:l.string(),imageUrl:l.string(),slug:l.string().optional()}),Tg=l.object({uuid:l.string(),data:l.array(fq)}),Eq=l.object({chainId:ge,address:l.string(),name:l.string(),symbol:l.string(),logoUrl:l.string(),marketCap:l.number(),price:l.number(),priceChange:l.number(),volume:l.number(),volumeChange:l.number()}),Pg=l.object({items:l.array(Eq)}),gq=l.object({paymentTokenId:l.string(),name:l.string(),symbol:l.string(),decimals:l.number()}),yq=l.object({verified:l.boolean(),collectionUrl:l.string(),marketplaceId:l.string(),marketplaceName:l.string(),marketplaceCollectionId:l.string()}),Fq=l.object({marketplaceId:l.string(),paymentToken:gq,value:l.string()}),hq=l.object({id:l.string(),name:l.string(),volume:l.string().optional(),volumePercentChange:l.number(),marketplacePages:l.array(yq),floorPrices:l.array(Fq),imageUrl:l.string()}),Og=l.object({uuid:l.string(),data:l.array(hq)}),Sq=["tokens","sites","collections","learn","suggested-users-to-follow","token-categories"],Yt=l.enum(["shortcuts","carousel",...Sq]),wq=l.object({type:l.literal(Yt.enum.shortcuts)}),$q=l.object({type:l.literal(Yt.enum.carousel)}),Iq=l.object({type:l.literal(Yt.enum["suggested-users-to-follow"]),limit:l.number()}),Ds="all_networks",cn=l.union([ge,l.literal(Ds)]),vq=["asc","desc"],bq=l.enum(vq),qq=["rank","volume","price","price-change","market-cap"],wg=l.enum(qq),xq=["1h","24h","7d","30d"],$g=l.enum(xq),Gq=l.object({type:l.literal(Yt.enum.tokens),sortBy:l.array(wg).refine(j=>new Set(j).size===j.length),sortByDefault:wg,sortDirectionDefault:bq,network:l.array(cn).refine(j=>new Set(j).size===j.length),networkDefault:cn,timeFrame:l.array($g).refine(j=>new Set(j).size===j.length),timeFrameDefault:$g,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),Tq=l.object({type:l.literal(Yt.enum["token-categories"])}),Pq=["top","rank"],Ig=l.enum(Pq),Oq=["24h","7d","30d"],vg=l.enum(Oq),Mq=l.object({type:l.literal(Yt.enum.sites),sortBy:l.array(Ig).refine(j=>new Set(j).size===j.length),sortByDefault:Ig,network:l.array(cn).refine(j=>new Set(j).size===j.length),networkDefault:cn,timeFrame:l.array(vg).refine(j=>new Set(j).size===j.length),timeFrameDefault:vg,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),Cq=["top","rank"],bg=l.enum(Cq),_q=["24h","7d","30d"],qg=l.enum(_q),Rq=l.object({type:l.literal(Yt.enum.collections),sortBy:l.array(bg).refine(j=>new Set(j).size===j.length),sortByDefault:bg,network:l.array(cn).refine(j=>new Set(j).size===j.length),networkDefault:cn,timeFrame:l.array(qg).refine(j=>new Set(j).size===j.length),timeFrameDefault:qg,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),Dq=l.object({type:l.literal(Yt.enum.learn),limit:l.number()}),Nq=l.discriminatedUnion("type",[wq,$q,Iq,Gq,Mq,Rq,Dq,Tq]),Zl=l.object({sections:l.array(Nq).refine(j=>(0,xg.default)(j,(0,Gg.default)(j,"type")))}),jz=l.object({uuid:l.string(),data:l.array(Sm)});var Kq=Zl.parse({sections:[{type:"shortcuts"},{type:"carousel"},{type:"tokens",sortBy:["rank","volume","price","price-change","market-cap"],sortByDefault:"rank",sortDirectionDefault:"asc",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["1h","24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:100},{type:"token-categories"},{type:"suggested-users-to-follow",limit:3,listLimit:100},{type:"sites",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"collections",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"learn",limit:3}]}),A7=()=>{let j=UA.getMultivariateAssignment("explore-config"),A=gj,{data:[e]}=BA(["enable-fungible-categories"]);return(0,n6.useMemo)(()=>{let t;try{t=Zl.parse(JSON.parse(j??""))}catch{t=Kq}return A||(t={...t,sections:t.sections.filter(r=>r.type!=="suggested-users-to-follow")}),e||(t={...t,sections:t.sections.filter(r=>r.type!=="token-categories")}),t},[j,A,e])},j7=()=>{let j=A7();return(0,n6.useMemo)(()=>{let A=[];for(let e of j.sections)(e.type==="collections"||e.type==="tokens"||e.type==="sites"||e.type==="learn"||e.type==="suggested-users-to-follow")&&A.push(e);return A},[j.sections])},e7=j=>{let A=A7();return(0,n6.useMemo)(()=>A.sections.find(t=>t.type===j)??null,[A.sections,j])};n();s();n();s();n();s();n();s();n();s();var Lq=l.object({type:l.literal("fungible"),data:NB}),Mg=l.object({results:l.array(l.any()).transform(j=>j.reduce((A,e)=>{let t=Lq.safeParse(e);return t.success&&A.push(t.data),A},[])),prevCursor:l.string().nullish().default(null),nextCursor:l.string().nullish().default(null),hasMore:l.boolean()});async function Cg(j){let{query:A,networkIds:e,searchContext:t,supportedNetworkIds:r,pageSize:o=50}=j,i=await z.api().headers({"Content-Type":"application/json"}).get("/search/v1",{params:{query:A.trim(),chainIds:e.join(","),platform:oj,pageSize:o.toString(),searchTypes:"fungible",searchContext:t,...r&&{supportedNetworkIds:r.join(",")}}});if(!sA(i))throw new QA({key:"UnknownError"});let a=Mg.safeParse(i.data);if(a.success)return a.data;throw new QA({key:"UnknownError"})}n();s();var t7=j=>{let A=j.data,e=Tp(A)??void 0;return{type:A.type,data:{...A.data,tokenAddress:Tp(A)??void 0,key:e}}};n();s();var Uq="search",_g={searchResults:(j,A,e,t)=>[Uq,{query:j,networkIds:A,supportedNetworkIds:t,chainAddresses:e}]};n();s();var r7=(o=>(o[o.Always=1/0]="Always",o[o.Short=eA({minutes:5})]="Short",o[o.Medium=eA({minutes:30})]="Medium",o[o.Long=eA({hours:1})]="Long",o[o.Never=0]="Never",o))(r7||{}),o7=(r=>(r[r.Immediate=0]="Immediate",r[r.Short=eA({minutes:5})]="Short",r[r.Medium=eA({minutes:30})]="Medium",r[r.Long=eA({hours:1})]="Long",r))(o7||{});var Qq=async j=>(await Cg(j)).results.map(e=>t7(e)),Cr=({query:j,networkIds:A,enableQuery:e=!0,keepPreviousData:t=!1,searchContext:r,supportedNetworkIds:o,chainAddresses:i,pageSize:a})=>{let c=_g.searchResults(j,A,i,o);return tA({queryKey:c,gcTime:r7.Short,staleTime:o7.Short,enabled:e,placeholderData:t?$m:void 0,queryFn:()=>Qq({query:j,networkIds:A,searchContext:r,supportedNetworkIds:o,pageSize:a})})};n();s();n();s();n();s();var Vj=eA({days:1}),Le=eA({seconds:5}),Rg=eA({seconds:30});n();s();n();s();var NA=({name:j,response:A,current:e,target:t})=>{let r=`Failed to ${j}: 
`,o=[e!==void 0?`Current: ${e}`:null,t!==void 0?`Target: ${t}`:null].filter(Boolean);return o.length>0&&(r+=`${o.join(" | ")} 
`),r+=`${A.status} ${A.statusText} 
`,r+=`${JSON.stringify(A.data)}`,r},ue=({name:j,error:A,current:e,target:t})=>{let r=`Failed to parse ${j}: 
`,o=[e!==void 0?`Current: ${e}`:null,t!==void 0?`Target: ${t}`:null].filter(Boolean);return o.length>0&&(r+=`${o.join(" | ")} 
`),r+=`${JSON.stringify(A)}`,r};async function Dg(j){let A=await z.api().bearer(!0).headers({Accept:"application/activity+json"}).get(`/v1/actors/${j}`);if(!sA(A)){let t=new Error(NA({name:"getActor",response:A,target:j}));throw b.captureError(t,"profiles"),t}let e=ot.safeParse(A.data);if(e.success)return e.data;{let t=new Error(ue({name:"getActor",error:e.error,target:j}));throw b.captureError(t,"profiles"),t}}n();s();var ej="social",tj="@phantom/social",$A={actor(j){return[ej,`${tj}:actor`,{profileId:j}]},actorAndFollowers(j){return[ej,`${tj}:actor-and-followers`,{profileId:j}]},actorAndFollowing(j){return[ej,`${tj}:actor-and-following`,{profileId:j}]},userProfileByUsernameOrUserProfileId(j){return[ej,`${tj}:user-profile-by-username-or-user-profile-id`,{usernameOrUserProfileId:j}]},followUser(j,A){return[ej,`${tj}:follow-user`,{currentId:j,targetId:A}]},feed(j,A){return[ej,`${tj}:feed`,{profileId:j,viewFeedAsUsername:A}]},notifications(j){return[ej,`${tj}:notifications`,{profileId:j}]},searchForActorBase(){return[ej,`${tj}:search`]},searchForActor(j){return[ej,`${tj}:search`,{query:j}]},followRequests(j){return[ej,`${tj}:follow-requests`,{profileId:j}]},suggestedActors(j,A){return[ej,`${tj}:suggested-follows`,{profileId:A,source:j}]},blocking(j){return[ej,`${tj}:blocking`,{profileId:j}]},pendingFollowRequests(j,A){return[ej,`${tj}:pending-follow-requests`,{profileId:j,targetId:A}]},reaction(j){return j?[ej,`${tj}:reaction`,{targetId:j}]:[ej,`${tj}:reaction`]},reactionDetails(j){return j.targetId?[ej,`${tj}:reaction-details`,j]:[ej,`${tj}:reaction-details`,{content:j.content}]},followingHolders(j,A){return[ej,`${tj}:following-holders`,{profileId:j,caip19:A}]},tokenFollows(j,A){return[ej,`${tj}:token-follows`,{profileId:j,caip19:A}]},reportedFeedTokens(){return[ej,`${tj}:reported-feed-tokens`]}};function n7(j){let A=async()=>{if(!j)throw new Error("No profile ID or access token");return Dg(j)};return Oo({queryKey:$A.actor(j),queryFn:A,enabled:!!j,gcTime:Vj,staleTime:Rg})}n();s();n();s();n();s();function Zt(j){let A=j.match(/\/v1\/actors\/([^/]+)/)?.[1];return A?DA.parse(A):void 0}n();s();function _A(j){return Zt(j)??DA.parse(j)}var Ar=(j,A)=>{let e=_A(A.id);e&&j.setQueryData($A.actor(e),A)};function Hq({usernameOrUserProfileId:j}){let A=j?.startsWith("@")?j.slice(1):j,e=Yi(),t=$A.userProfileByUsernameOrUserProfileId(j);return tA({enabled:!!A,queryKey:t,queryFn:async()=>{if(!A)throw new Error("No sanitized username or user profile id");let o=await e.getUserProfileByUsernameOrUserProfileId(A);if(!o)throw new Error("No user profile");return o},gcTime:Vj,staleTime:Le})}function s7({query:j}){let A=AA(),{data:e}=Po(),{data:t}=VA(),r=e?.accessToken,o=j?.startsWith("@")?j.slice(1).trim():j.trim(),i=Yi(),a=$A.searchForActor(o),c=async()=>{if(!o||!r||!t?.id)return{actors:[]};let{actors:m}=await i.searchForActor(o,r,t.id);for(let B of m)Ar(A,B);return m.sort((B,f)=>B.isFollowing?-1:f.isFollowing?1:0),{actors:m}},p=!!r;return{...tA({enabled:p,queryKey:a,queryFn:c,gcTime:Vj,staleTime:Le}),enabled:p}}n();s();n();s();n();s();var Ns=(c=>(c.Buy="Buy",c.Sell="Sell",c.Reaction="Reaction",c.WhaleBuy="WhaleBuy",c.WhaleSell="WhaleSell",c.TrendingToken="TrendingToken",c.TokenFollow="TokenFollow",c.SuggestedFollow="SuggestedFollow",c))(Ns||{}),Vq=l.object({type:l.literal("followers")}),Xq=l.object({type:l.literal("actor"),id:l.string()}),zq=l.union([Vq,Xq]),Ks=l.object({actorId:l.string(),id:l.string(),published:l.coerce.string(),storyType:l.nativeEnum(Ns),destinations:l.array(zq)}),Ng=Ks.extend({chainId:ge,senderAddress:l.string(),senderTokenAccount:l.string(),signer:l.string(),toAddress:l.string(),toTokenAccount:l.string(),transactionId:l.string()}),Kg=Ng.extend({storyType:l.literal("Buy"),tokenBoughtAmountRaw:l.string(),tokenBoughtAmount:l.string(),tokenBoughtUsdValue:l.string().nullish(),tokenBoughtPrice:l.string().nullish(),tokenBoughtAddress:l.string()}),Lg=Ng.extend({storyType:l.literal("Sell"),tokenSoldAmountRaw:l.string(),tokenSoldAmount:l.string(),tokenSoldUsdValue:l.string().nullish(),tokenSoldPrice:l.string().nullish(),tokenSoldAddress:l.string()}),Wq=["activity","token"],Jq=l.enum(Wq),Yq=Ks.extend({storyType:l.literal("Reaction"),targetId:l.string(),targetType:Jq,type:l.literal("emoji"),content:l.string()}),Zq=Yq.transform((j,A)=>{let e=j.content;return _r.includes(e)?{...j,content:e}:(A.addIssue({code:l.ZodIssueCode.custom,message:"Not a supported reaction"}),l.NEVER)}),Ax=Kg.extend({storyType:l.literal("WhaleBuy")}),jx=Lg.extend({storyType:l.literal("WhaleSell")}),ex=Ks.extend({storyType:l.literal("TrendingToken"),chainId:ge,tokenAddress:l.string(),tokenLogoUrl:l.string(),tokenMarketCap:l.string(),tokenName:l.string(),tokenPrice:l.string(),tokenPriceChange:l.string(),tokenRank:l.string(),tokenSymbol:l.string(),tokenVolume:l.string(),tokenVolumeChange:l.string()}),tx=Ks.extend({storyType:l.literal("SuggestedFollow"),suggestedActorId:l.string(),mutualFollowsCount:l.number(),mutualFollowsIds:l.array(l.string())}),rx=Ks.extend({storyType:l.literal("TokenFollow"),tokenId:l.string(),otherTokenFollowers:l.array(l.string())}),ox=l.union([Kg,Lg,Zq,Ax,jx,ex,rx,tx]);var nx=l.object({id:l.string(),type:l.string()}),HW=nx.extend({type:l.literal("TokenMetadata"),attributes:l.object({data:DB})});var sx=l.object({orderedItems:ot.array().default([]),next:l.string().optional()}),ix=l.object({orderedItems:ot.array().default([]),next:l.string().optional()}),ax=l.object({orderedItems:ot.array().default([]),next:l.string().optional()});var Ug=l.object({orderedItems:ot.array().default([]),next:l.string().optional()}),cx=l.object({orderedItems:ot.array().default([]),next:l.string().optional()}),px=l.object({id:l.string(),username:l.string(),icon:l.string().nullish()}),ux=l.object({followingHolders:px.array().default([])}),lx=l.object({targetId:l.string(),actorId:l.string(),type:l.string(),content:l.string()}),dx=l.object({targetId:l.string(),content:l.string(),type:l.string(),count:l.number({coerce:!0})});function mx(j,A){return j==="emoji"&&_r.includes(A)}var Qg=l.object({reaction:lx.transform(j=>({...j,content:_r.includes(j.content)?j.content:"\u{1F440}"})).optional(),counts:l.array(dx).transform(j=>j.filter(A=>mx(A.type,A.content))).optional()}),Bx=l.object({actors:ot.array().default([]),nextCursor:l.string().optional()});var _r=["\u{1F680}","\u{1F49C}","\u{1F402}","\u{1F440}","\u{1F43B}","\u{1F4A9}","\u{1F480}","\u{1F602}","\u{1F438}"];var s6=(e=>(e.Follow="Follow",e.Reaction="Reaction",e))(s6||{}),Hg=l.object({actorId:l.string(),id:l.string(),published:l.coerce.string(),notificationType:l.nativeEnum(s6)}),kx=Hg.extend({notificationType:l.literal("Follow")}),fx=Hg.extend({notificationType:l.literal("Reaction"),content:l.string(),storyId:l.string().nullish()}).transform((j,A)=>{let e=j.content;return _r.includes(e)?{...j,content:e}:(A.addIssue({code:l.ZodIssueCode.custom,message:"Not a supported reaction"}),l.NEVER)}),Ex=l.union([kx,fx]),gx=l.object({isFollowing:l.boolean()});var pn=j=>["Buy","WhaleBuy","Sell","WhaleSell","Reaction","TokenFollow","TrendingToken"].includes(j.storyType);n();s();n();s();var i7=j=>{let A=j.split("/tokens/")[1]?.split("#")[0];if(!A)return"";let[e,t]=A.split("/");if(!e)return"";let[r]=e.split("-");return ks.getCaip19FromUrlPath({chainName:r,address:t})};var un=j=>{let{storyType:A}=j;switch(A){case"Buy":case"WhaleBuy":{let{chainId:e,tokenBoughtAddress:t}=j;return ks.getCaip19FromUrlPath({chainName:$.getChainID(e),address:t})}case"Sell":case"WhaleSell":{let{chainId:e,tokenSoldAddress:t}=j;return ks.getCaip19FromUrlPath({chainName:$.getChainID(e),address:t})}case"Reaction":{let{targetId:e}=j;return i7(e)}case"TokenFollow":{let{tokenId:e}=j;return e}case"TrendingToken":{let{chainId:e,tokenAddress:t}=j;return J({chainId:e,address:t,resourceType:"address"})}}};n();s();n();s();n();s();var QJ=eA({minutes:10}),HJ=eA({seconds:60});n();s();n();s();n();s();var mY=eA({minutes:10}),BY=eA({seconds:60});n();s();n();s();n();s();n();s();n();s();n();s();n();s();var SZ=eA({minutes:5}),wZ=eA({days:1});n();s();n();s();n();s();n();s();var iAA=eA({minutes:5});n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();var NjA=eA({days:1}),KjA=eA({hours:1});n();s();n();s();var Rr=Rt(W,j=>new a7(j)),a7=class{#A;constructor(A){this.#A=A}profileFollowRequestAcceptedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileFollowRequestAcceptedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"followRequestAccepted"}})}profileFollowRequestDeniedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileFollowRequestDeniedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"followRequestDenied"}})}profileUnfollowedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileUnfollowedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"unfollow"}})}profileFollowedByUser({targetId:A,actorId:e,isRequest:t}){let r=_A(A),o=_A(e);this.#A.capture("profileFollowedByUser",{data:{targetId:A,targetProfileId:r,actorId:e,actorProfileId:o,type:t?"followRequest":"follow"}})}profileReportedByUser({targetId:A,actorId:e,additionalData:t}){let r=_A(A),o=_A(e);this.#A.capture("profileReportedByUser",{data:{targetId:A,targetProfileId:r,actorId:e,actorProfileId:o,type:"report",...t}})}profileUnblockedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileUnblockedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"unblock"}})}profileBlockedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileBlockedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"block"}})}profileViewedByUser({targetId:A,actorId:e,isFollowing:t}){let r=_A(A),o=_A(e);this.#A.capture("profileViewedByUser",{data:{targetId:A,targetProfileId:r,actorId:e,actorProfileId:o,isFollowing:t,type:"view"}})}profileFollowersViewedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileFollowersViewedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"viewFollowers"}})}profileFollowingViewedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileFollowingViewedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"viewFollowing"}})}profileSharedByUser({targetId:A,actorId:e}){let t=_A(A),r=_A(e);this.#A.capture("profileSharedByUser",{data:{targetId:A,targetProfileId:t,actorId:e,actorProfileId:r,type:"share"}})}};n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();n();s();var ty=v(ey(),1),ry=ty.default;var xx=ry.bind({concatArrays:!0,ignoreUndefined:!0});function Gx(j,A){let e=self.localStorage.getItem(j);if(e){let t=JSON.parse(e),r=JSON.parse(A),o=JSON.stringify(xx(t,r));self.localStorage.setItem(j,o)}else self.localStorage.setItem(j,A)}function mn(j,A){return new Promise((e,t)=>{try{let r=j();A?.(null,r),e(r)}catch(r){A?.(r),t(r)}})}function c6(j,A,e){return Promise.all(j).then(t=>{let r=e?.(t)??null;return A?.(null,r),Promise.resolve(r)},t=>(A?.(t),Promise.reject(t)))}var Us={getItem:(j,A)=>mn(()=>self.localStorage.getItem(j),A),setItem:(j,A,e)=>mn(()=>self.localStorage.setItem(j,A),e),removeItem:(j,A)=>mn(()=>self.localStorage.removeItem(j),A),mergeItem:(j,A,e)=>mn(()=>Gx(j,A),e),clear:j=>mn(()=>self.localStorage.clear(),j),getAllKeys:j=>mn(()=>{let A=self.localStorage.length,e=[];for(let t=0;t<A;t+=1){let r=self.localStorage.key(t)||"";e.push(r)}return e},j),flushGetRequests:()=>{},multiGet:(j,A)=>{let e=j.map(r=>Us.getItem(r));return c6(e,A,r=>r.map((o,i)=>[j[i],o]))},multiSet:(j,A)=>{let e=j.map(t=>Us.setItem(t[0],t[1]));return c6(e,A)},multiRemove:(j,A)=>{let e=j.map(t=>Us.removeItem(t));return c6(e,A)},multiMerge:(j,A)=>{let e=j.map(t=>Us.mergeItem(t[0],t[1]));return c6(e,A)}},p7=Us;n();s();var oy=p7;n();s();var Tx=Object.defineProperty,ny=Object.getOwnPropertySymbols,Px=Object.prototype.hasOwnProperty,Ox=Object.prototype.propertyIsEnumerable,sy=(j,A,e)=>A in j?Tx(j,A,{enumerable:!0,configurable:!0,writable:!0,value:e}):j[A]=e,Bn=(j,A)=>{for(var e in A||(A={}))Px.call(A,e)&&sy(j,e,A[e]);if(ny)for(var e of ny(A))Ox.call(A,e)&&sy(j,e,A[e]);return j},p6=j=>A=>{try{let e=j(A);return e instanceof Promise?e:{then(t){return p6(t)(e)},catch(t){return this}}}catch(e){return{then(t){return this},catch(t){return p6(t)(e)}}}},iy=(j,A)=>(e,t,r)=>{let o=Bn({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,y)=>Bn(Bn({},y),g)},A);(o.blacklist||o.whitelist)&&console.warn(`The ${o.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let i=!1,a=new Set,c=new Set,p;try{p=o.getStorage()}catch{}if(p)p.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${o.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return j((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...g)},t,r);let d=p6(o.serialize),m=()=>{let g=o.partialize(Bn({},t()));o.whitelist&&Object.keys(g).forEach(S=>{var I;!((I=o.whitelist)!=null&&I.includes(S))&&delete g[S]}),o.blacklist&&o.blacklist.forEach(S=>delete g[S]);let y,F=d({state:g,version:o.version}).then(S=>p.setItem(o.name,S)).catch(S=>{y=S});if(y)throw y;return F},B=r.setState;r.setState=(g,y)=>{B(g,y),m()};let f=j((...g)=>{e(...g),m()},t,r),k,E=()=>{var g;if(!p)return;i=!1,a.forEach(F=>F(t()));let y=((g=o.onRehydrateStorage)==null?void 0:g.call(o,t()))||void 0;return p6(p.getItem.bind(p))(o.name).then(F=>{if(F)return o.deserialize(F)}).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==o.version){if(o.migrate)return o.migrate(F.state,F.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return F.state}).then(F=>{var S;return k=o.merge(F,(S=t())!=null?S:f),e(k,!0),m()}).then(()=>{y?.(k,void 0),i=!0,c.forEach(F=>F(k))}).catch(F=>{y?.(void 0,F)})};return r.persist={setOptions:g=>{o=Bn(Bn({},o),g),g.getStorage&&(p=g.getStorage())},clearStorage:()=>{var g;(g=p?.removeItem)==null||g.call(p,o.name)},rehydrate:()=>E(),hasHydrated:()=>i,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},E(),k||f};var ay=TA(iy((j,A)=>({username:void 0,setUsername:e=>j({username:e})}),{name:"view-feed-as",getStorage:()=>oy}));n();s();var hnA=new Set([$A.feed(DA.parse(""))[1]]);n();s();var cy={uiContext:void 0,fungibleDetails:void 0,story:void 0},Mx=TA(j=>({...cy,setUiContext:A=>j({uiContext:A}),setFungibleDetails:A=>j({fungibleDetails:A}),setStory:A=>j({story:A}),reset:()=>j(cy)}));n();s();n();s();var Qs="en-US",Cx=()=>us(Qs,{maximumFractionDigits:0}),_x=()=>us(Qs,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),Rx=()=>us(Qs,{notation:"compact",compactDisplay:"short",maximumFractionDigits:0,minimumFractionDigits:0}),Dx=()=>us(Qs,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),u6=j=>{if(j<1e3)return Cx().format(j);if(j<1e5){let e=Math.floor(j/100)*100;return _x().format(e).replace(".0K","K")}if(j<1e6){let e=Math.floor(j/1e3)*1e3;return Rx().format(e)}let A=Math.floor(j/1e5)*1e5;return Dx().format(A).replace(".0M","M")};n();s();n();s();n();s();var Nx=j=>{let{data:A}=n7(j);return py(A)},py=j=>{let A={followers:j?.followers&&typeof j.followers=="object"&&j?.followers?.totalItems||0,following:j?.following&&typeof j.following=="object"&&j?.following?.totalItems||0};return{...A,formattedFollowers:u6(A.followers||0),formattedFollowing:u6(A.following||0)}};n();s();n();s();n();s();var Lx=Rt(W,j=>new u7(j)),u7=class{#A;constructor(A){this.#A=A}feedStorySeenByUser(A){let{actorId:e,storyType:t,id:r}=A,o=pn(A)?un(A):void 0;this.#A.capture("feedStorySeenByUser",{data:{storyId:r,storyType:t,actor:e,...o?{caip19:o}:{}}})}feedClickedByUser(A,e){let{actorId:t,storyType:r,id:o}=A,i=pn(A)?un(A):void 0;this.#A.capture("feedStoryClickedByUser",{data:{...e,storyId:o,storyType:r,actor:t,...i?{caip19:i}:{}}})}reactionAddedByUser(A){this.#A.capture("reactionAddedByUser",{data:A})}reactionRemovedByUser(A){this.#A.capture("reactionRemovedByUser",{data:A})}feedRefreshedManuallyByUser(){this.#A.capture("feedRefreshedManuallyByUser")}};var P7=v(Uy()),ij=v(x());n();s();n();s();n();s();var Qy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!1};n();s();var Hy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var Vy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!1};n();s();var Xy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var zy={tokenSearchEnabled:()=>UA.isFeatureEnabled("enable-monad-explore-search"),trendingTokensEnabled:()=>!1};n();s();var Wy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var Jy={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};n();s();var Yy={tokenSearchEnabled:()=>UA.isFeatureEnabled("enable-sui-explore-search"),trendingTokensEnabled:()=>!1};var MT=new To({solana:Jy,ethereum:Xy,polygon:Wy,base:Hy,arbitrum:Qy,bitcoin:Vy,monad:zy,sui:Yy}),v7=Go(MT);n();s();var Zy={fields:["domain","name","category","tags"],storeFields:["domain","name","category","tags","imageUrl"],searchOptions:{boost:{name:2},prefix:!0,fuzzy:j=>j.length>3?.2:!1}};n();s();var v6=j=>["explore-dapp",j];var b7=j=>j.addresses.map(A=>$.getMainnetNetworkID(A.networkID))??[];function A0(j){try{return Me.get(j).nonNativeFungibleTokenType}catch{return"SolanaNative"}}n();s();n();s();var Ue="@phantom/explore",dj={RecentlyViewedSearchItems:[Ue,"RecentlyViewedSearchItems"],sitesV2({sortBy:j,timeFrame:A,networkIDs:e,limit:t,locale:r,rankAlgo:o}){return[Ue,"sitesV2",vA,r,{sortBy:j,timeFrame:A,networkIDs:e,rankAlgo:o,limit:t}]},recommendedSites(j,A){return[Ue,"sites","recommended",vA,A,j]},tokensV2({sortBy:j,sortDirection:A,timeFrame:e,networkIDs:t,limit:r,rankAlgo:o}){return[Ue,"tokensV2",{sortBy:j,sortDirection:A,timeFrame:e,networkIDs:t,rankAlgo:o,limit:r}]},collectionsV2({sortBy:j,timeFrame:A,networkIDs:e,limit:t,locale:r,rankAlgo:o}){return[Ue,"collectionsV2",vA,r,{sortBy:j,timeFrame:A,networkIDs:e,rankAlgo:o,limit:t}]},featuredTransactions(j,A){return[Ue,"transactions","featured",vA,A,j]},learn(j,A){return[Ue,"learn",vA,A,j]}};var CT=10,e0="RecentlyViewedSearchItems";async function _T(j){return await j.get(e0)??[]}async function t0(j,A){await j.set(e0,A)}function q7(j){return tA({queryKey:dj.RecentlyViewedSearchItems,queryFn:async()=>_T(j),staleTime:0,enabled:!0})}function RT(j){let A=AA();return uA({mutationFn:async t=>{let r=j0(t),i=(A.getQueryData(dj.RecentlyViewedSearchItems)??[]).filter(a=>j0(a)!==r);i.unshift(t),i=i.slice(0,CT),await t0(j,i),A.setQueryData(dj.RecentlyViewedSearchItems,i),await A.refetchQueries({queryKey:dj.RecentlyViewedSearchItems})}})}function DT(j){let A=AA();return uA({mutationFn:async()=>{await t0(j,[]),A.setQueryData(dj.RecentlyViewedSearchItems,[]),await A.refetchQueries({queryKey:dj.RecentlyViewedSearchItems})}})}function j0(j){return j.type==="token"?J(V(j.data)):j.data.id}n();s();var NT=j=>{let A={isRecommended:"true"};return j.networkIds&&(A.chainIds=j.networkIds.join(",")),`/dapps/v1?${new URLSearchParams(A).toString()}`},KT=async j=>{let A=await z.api().get(NT(j));if(!sA(A))throw new Error("Error fetching recommended dapps from registry");if(!A?.data||!A?.data?.data)throw new Error("No data returned from registry");return A.data.data},x7=j=>{let A=AA();return tA({queryKey:["dapps","recommended",j],queryFn:async()=>{try{let t=await KT(j);return Qi.batch(()=>{for(let r of t??[]){let o=v6(r.domain),i=A.getQueryState(o);A.setQueryData(o,()=>r??i?.data??null)}}),t}catch(t){throw b.captureError(t,"dappRegistry"),t}},gcTime:eA({days:1}),staleTime:eA({days:1})})};n();s();n();s();var r0=async({sortBy:j,sortDirection:A,timeFrame:e,networkIDs:t,limit:r,rankAlgo:o,anonymousId:i})=>{let a=new URLSearchParams({timeFrame:e,sortBy:j,sortDirection:A,limit:r.toString(),rankAlgo:o,...i?{anonymousId:i}:{}});t.forEach(d=>{a.append("chainIds[]",d)});let c=await z.api().get("/explore/v2/trending-tokens",{params:a});if(!sA(c))throw new Error("Failed to fetch tokens");let p=Pg.safeParse(c.data);if(!p.success)throw new Error("Failed to parse tokens");return p.data};n();s();var Fn=(j,A)=>{let e=Zi(),r=j7().find(i=>i.type===A),o=[];return r&&"network"in r?r.network.forEach(i=>{i!==Ds&&e.includes(i)&&o.push(i)}):o=e,j!==Ds&&!o.includes(j)?[]:j===Ds?o:[j]};var LT=eA({minutes:1}),UT=eA({minutes:1}),QT=100,G7=({sortBy:j,sortDirection:A,timeFrame:e,network:t,limit:r,rankAlgo:o,enableQuery:i=!0})=>{let{data:a}=FA(),c=W(),p=Fn(t,"tokens"),d=QT,m=ZA(G.language)??"en";return tA({queryKey:dj.tokensV2({sortBy:j,sortDirection:A,timeFrame:e,networkIDs:p,limit:d,rankAlgo:o}),enabled:!!a&&i,async queryFn(){if(!a)throw new Error("No account found");let B=await c.getDeviceId();return r0({sortBy:j,sortDirection:A,timeFrame:e,networkIDs:p,locale:m,limit:d,rankAlgo:o,anonymousId:B})},gcTime:UT,staleTime:LT,retry:3,select:B=>r>=d?B:{...B,items:B.items.slice(0,r)}})};var zs=3,HT=15,T7=50,o0={VERIFIED:1,NOT_VERIFIED:2,POSSIBLE_SPAM:3,SPAM:4},VT=(j,A=100)=>{let[e,t]=(0,ij.useState)(!1);return(0,ij.useEffect)(()=>{let r;return j?r=setTimeout(()=>t(!0),A):t(!1),()=>clearTimeout(r)},[j,A]),e},XT=j=>{let A=A0(j.chainId),e=$.getChainDefinition(j.chainId),t={name:j.name,symbol:j.symbol,logoUri:j.logoUrl,chain:{id:j.chainId,symbol:e.tokenSymbol,name:e.name,imageUrl:e.iconUrl}};switch(A){case"SPL":return{type:A,data:{...t,mintAddress:j.address}};case"ERC20":return{type:A,data:{...t,contractAddress:j.address}};case"BRC20":return{type:A,data:{...t,firstCreatedInscriptionId:j.address}};default:return null}},zT=j=>j.reduce((A,e)=>{let t=XT(e);return t&&A.push(t),A},[]),WT=({searchQuery:j,networkIds:A,minSearchResults:e,excludePlaceholderTokens:t=!1,extraDapps:r=[]})=>{let[o,i]=(0,ij.useState)(!1),[a,c]=(0,ij.useState)(!1),[p,d]=(0,ij.useState)(!1),m=(0,ij.useMemo)(()=>A.filter(Pj=>v7.get(Pj).tokenSearchEnabled()),[A]);(0,ij.useEffect)(()=>{i(!1),c(!1),d(!1)},[j]);let{data:B=[],isPending:f}=Cr({query:j,networkIds:m,searchContext:"explore",enableQuery:!!j}),k=e7("tokens"),{data:E}=G7({sortBy:k?.sortByDefault??"rank",sortDirection:k?.sortDirectionDefault??"asc",timeFrame:k?.timeFrameDefault??"24h",network:k?.networkDefault??"solana:101",limit:10,rankAlgo:k?.rankAlgo??"default",enableQuery:!j&&!t}),g=(0,ij.useMemo)(()=>B.sort((Pj,ns)=>o0[Pj.data.spamStatus??"NOT_VERIFIED"]-o0[ns.data.spamStatus??"NOT_VERIFIED"]),[B]),y=(0,ij.useMemo)(()=>E?.items?zT(E.items):[],[E?.items]),F=e??(j.length===0?HT:zs),S=(0,ij.useMemo)(()=>g.slice(0,a?T7:F),[a,g,F]),I=(0,ij.useMemo)(()=>[...g.map(Pj=>J(V(Pj))),...y.map(Pj=>J(V(Pj)))],[g,y]),{data:O={},isPending:M}=nt({query:{data:I},enabled:I.length>0}),{data:P=[],isPending:X}=x7({networkIds:m}),_=(0,ij.useMemo)(()=>{let Pj=[...P,...r],ns=(0,P7.default)(Pj,Rw=>Vi(Rw.domain));return Object.values(ns)},[P,r]),h=Vi(j),q=Gm(_,h,Zy),C=(0,P7.default)(q,Pj=>Vi(Pj.domain)),R=Object.values(C),K=R.slice(0,o?T7:zs),{data:D,isPending:L,enabled:H}=s7({query:j}),U=H&&L,N=!!j,SA=X||f||U,dA=N&&!SA,qA=lA(),{data:fj}=q7(qA),{actorsAll:MA,actors:Ej}=(0,ij.useMemo)(()=>{let Pj=D?.actors??[],ns=Pj.slice(0,p?T7:zs);return{actorsAll:Pj,actors:ns}},[p,D?.actors]),mA=(0,ij.useMemo)(()=>({actors:Ej,dapps:P,searchedDapps:K,renderShowMoreDappsButton:N&&R.length>zs,isLoading:SA,tokens:S,trendingTokens:y,renderShowMoreTokensButton:N&&g.length>F,renderShowMoreUsersButton:N&&MA.length>zs,priceMap:O,isPriceMapLoading:M,showSearchResults:dA,showMoreTokens:a,setShowMoreTokens:c,showMoreDapps:o,setShowMoreDapps:i,showMoreUsers:p,setShowMoreUsers:d,recentlyViewedSearchItems:fj}),[Ej,P,K,N,R.length,SA,S,y,g.length,F,MA.length,O,M,dA,a,o,p,fj]),[rj,wj]=(0,ij.useState)(null),Tj=VT(SA);return(0,ij.useEffect)(()=>{mA.isLoading||wj(j?mA:null)},[mA.isLoading,j]),{...mA.isLoading&&rj?rj:mA,showSpinner:Tj&&N}};n();s();n();s();var JT=j=>`/dapps/v1?domains=${j.join(",")}`,YT=async j=>{let A=await z.api().get(JT(j));if(!sA(A))throw new Error("Error fetching recommended dapps from registry");if(!A.data||!A.data.data)throw new Error("No data returned from registry");return A.data.data},ZT=j=>{let A=AA(),e=j!=null&&Array.isArray(j)&&j.length>0&&j.filter(r=>r!=null&&r!="").length>0;return tA({queryKey:["dapps",j],enabled:e,queryFn:async()=>{try{let r=await YT(j);return Qi.batch(()=>{for(let o of r??[]){let i=v6(o.domain),a=A.getQueryState(i);A.setQueryData(i,()=>o??a?.data??null)}}),r}catch(r){throw b.captureError(r,"dappRegistry"),r}},gcTime:eA({days:1}),staleTime:eA({days:1})})};n();s();var i0=v(x());n();s();var s0=async(j,A)=>{let e=new URLSearchParams({appVersion:vA,limit:"6",locale:A,platform:oj,timeframe:"24h"});j.forEach(o=>{e.append("chainIds[]",o)});let t=await z.api().get("/explore/v1/featured-dapps",{params:e});if(!sA(t))throw new Error("Failed to fetch sites");return await t.data};var AP=eA({minutes:10}),jP=eA({minutes:10}),eP=()=>{let{data:j}=FA(),A=(0,i0.useMemo)(()=>j?b7(j):[],[j]),e=ZA(G.language)??"en",t=async()=>{if(!j)throw new Error("No account found");return s0(A,e)};return tA({queryKey:dj.recommendedSites(A,e),enabled:!!j,queryFn:t,gcTime:AP,staleTime:jP})};n();s();var tP=v(x());n();s();var DcA=eA({minutes:10}),NcA=eA({minutes:10});n();s();n();s();var rP={rank:"trending",top:"top"},a0=async({sortBy:j,timeFrame:A,networkIDs:e,limit:t,locale:r,rankAlgo:o})=>{let i=new URLSearchParams({appVersion:vA,limit:t.toString(),locale:r,platform:oj,rankAlgo:o,rankBy:rP[j],timeframe:A});e.forEach(p=>{i.append("chainIds[]",p)});let a=await z.api().get("/explore/v1/trending-dapps",{params:i});if(!sA(a))throw new Error("Failed to fetch sites");let c=Tg.safeParse(a.data);if(!c.success)throw new Error("Failed to parse sites");return c.data};var oP=eA({minutes:10}),nP=eA({minutes:10}),sP=({sortBy:j,timeFrame:A,network:e,limit:t,rankAlgo:r})=>{let{data:o}=FA(),i=Fn(e,"sites"),a=ZA(G.language)??"en";return tA({queryKey:dj.sitesV2({sortBy:j,timeFrame:A,networkIDs:i,locale:a,limit:t,rankAlgo:r}),enabled:!!o,async queryFn(){if(!o)throw new Error("No account found");return a0({sortBy:j,timeFrame:A,networkIDs:i,locale:a,limit:t,rankAlgo:r})},gcTime:nP,staleTime:oP,retry:3})};n();s();n();s();var iP={rank:"trending",top:"volume"},aP=j=>j.floorPrices.length>0&&j.marketplacePages.length>0,c0=async({sortBy:j,timeFrame:A,networkIDs:e,limit:t,locale:r,rankAlgo:o})=>{let i=new URLSearchParams({appVersion:vA,limit:t.toString(),locale:r,platform:oj,rankAlgo:o,rankBy:iP[j],timeframe:A});e.forEach(p=>{i.append("chainIds[]",p.toString())});let a=await z.api().get("/explore/v1/trending-collections",{params:i});if(!sA(a))throw new Error("Failed to fetch collections");let c=Og.safeParse(a.data);if(!c.success)throw new Error("Failed to parse collections");return{...c.data,data:c.data.data.filter(aP)}};var cP=eA({minutes:10}),pP=eA({minutes:10}),uP=({sortBy:j,timeFrame:A,network:e,limit:t,rankAlgo:r})=>{let{data:o}=FA(),i=Fn(e,"collections"),a=ZA(G.language)??"en";return tA({queryKey:dj.collectionsV2({sortBy:j,timeFrame:A,networkIDs:i,locale:a,limit:t,rankAlgo:r}),enabled:!!o,async queryFn(){if(!o)throw new Error("No account found");return c0({sortBy:j,timeFrame:A,networkIDs:i,locale:a,limit:t,rankAlgo:r})},gcTime:pP,staleTime:cP,retry:3})};n();s();n();s();var p0=async(j,A)=>{let e=new URLSearchParams({appVersion:vA,locale:A,platform:oj});j.forEach(o=>{e.append("chainIds[]",o)});let t=await z.api().get("/explore/v1/learn-grid",{params:e});if(!sA(t))throw new Error("Failed to fetch learn grid");return t.data};var lP=eA({minutes:10}),dP=eA({minutes:10}),mP=()=>{let j=Zi(),A=ZA(G.language)??"en";return tA({queryKey:dj.learn(j,A),enabled:j.length>0,async queryFn(){return p0(j,A)},gcTime:dP,staleTime:lP})};n();s();n();s();n();s();var Xj="Auto";var PA={buyFungible:void 0,buyUsdValue:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmountCryptoInput:"",amountType:"sell",quoteResponse:void 0,selectedProviderIndex:0,selectedBaseProvider:Xj,gasEstimation:{isFetching:!1,estimate:void 0,estimateWithBuffer:void 0},hasNoRoutes:!1,isFetchingQuote:!1,error:null,searchQuery:"",numSearchResults:0,primaryCurrency:"crypto",uiSellAmountLocalFiatInput:"",uiBuyAmountCryptoInput:"",uiBuyAmountLocalFiatInput:"",canInputFiatSellAmount:!1,swapFilter:void 0},w=TA(j=>({...PA,resetQuote:()=>j({quoteResponse:PA.quoteResponse,isFetchingQuote:PA.isFetchingQuote,hasNoRoutes:PA.hasNoRoutes,selectedProviderIndex:PA.selectedProviderIndex,error:PA.error,uiSellAmountLocalFiatInput:PA.uiSellAmountLocalFiatInput,selectedBaseProvider:PA.selectedBaseProvider}),resetSwapper:()=>j({quoteResponse:PA.quoteResponse,gasEstimation:PA.gasEstimation,error:PA.error,sellAmount:"",uiSellAmountCryptoInput:"",uiBuyAmountCryptoInput:PA.uiBuyAmountCryptoInput,swapFilter:PA.swapFilter,selectedBaseProvider:PA.selectedBaseProvider,selectedProviderIndex:PA.selectedProviderIndex}),setBuyFungible:A=>j({buyFungible:A}),setBuyUsdValue:A=>j({buyUsdValue:A}),setHasNoRoutes:A=>j({hasNoRoutes:A}),setIsFetchingQuote:A=>j({isFetchingQuote:A}),setQuoteResponse:A=>j({quoteResponse:A,hasNoRoutes:!1}),setSelectedProviderIndex:A=>j({selectedProviderIndex:A}),setSelectedBaseProvider:A=>j({selectedBaseProvider:A}),setGasEstimation:({estimate:A,estimateWithBuffer:e,isFetching:t})=>j(r=>({gasEstimation:{...r.gasEstimation,...A!==void 0&&{estimate:A},...e!==void 0&&{estimateWithBuffer:e},...t!==void 0&&{isFetching:t}}})),setSellAmount:A=>j({sellAmount:A}),setAmountType:A=>j({amountType:A}),setSellUsdValue:A=>j({sellUsdValue:A}),setSellFungible:A=>j({sellFungible:A}),setUiSellAmountCryptoInput:A=>j({uiSellAmountCryptoInput:A}),setError:A=>j({error:A}),setSearchQuery:A=>j({searchQuery:A}),setNumSearchResults:A=>j({numSearchResults:A}),setPrimaryCurrency:A=>j({primaryCurrency:A}),setUiSellAmountLocalFiatInput:A=>j({uiSellAmountLocalFiatInput:A}),setUiBuyAmountCryptoInput:A=>j({uiBuyAmountCryptoInput:A}),setUiBuyAmountLocalFiatInput:A=>j({uiBuyAmountLocalFiatInput:A}),setCanInputFiatSellAmount:A=>j({canInputFiatSellAmount:A}),setSwapFilter:A=>j({swapFilter:A}),switchTokensForSell:()=>{j(A=>{let e=A.sellFungible??A.buyFungible,t=A.buyFungible??A.sellFungible,r=A.uiBuyAmountCryptoInput,o=A.uiBuyAmountLocalFiatInput;return{sellFungible:t,buyFungible:e,uiSellAmountCryptoInput:r,uiSellAmountLocalFiatInput:o,uiBuyAmountCryptoInput:PA.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:PA.uiBuyAmountLocalFiatInput,sellAmount:r,swapFilter:void 0,selectedBaseProvider:A.selectedBaseProvider}})},switchTokensForBuy:()=>{j(A=>{let e=A.sellFungible??A.buyFungible,t=A.buyFungible??A.sellFungible,r=A.uiSellAmountCryptoInput,o=A.uiSellAmountLocalFiatInput;return{sellFungible:t,buyFungible:e,uiSellAmountCryptoInput:PA.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:PA.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:r,uiBuyAmountLocalFiatInput:o,sellAmount:r,swapFilter:void 0,selectedBaseProvider:A.selectedBaseProvider}})},resetUiAmounts:()=>j({uiSellAmountCryptoInput:PA.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:PA.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:PA.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:PA.uiBuyAmountLocalFiatInput,sellAmount:PA.sellAmount,selectedBaseProvider:PA.selectedBaseProvider}),setPairAndAmount:({sell:A,buy:e,swapAmount:t})=>j(r=>{let o="uiSellAmountCryptoInput";return t.perspective==="sell"?r.primaryCurrency==="crypto"?o="uiSellAmountCryptoInput":o="uiSellAmountLocalFiatInput":r.primaryCurrency==="crypto"?o="uiBuyAmountCryptoInput":o="uiBuyAmountLocalFiatInput",{...r,sellFungible:A,buyFungible:e,[o]:t.amount,sellAmount:t.amount}})}));n();s();var l0=v(x());n();s();var Ws=v(x());var u0=()=>{let[j,A]=(0,Ws.useState)(!1),{data:[e]}=BA(["enable-quote-streaming"]),t=w(p=>p.selectedProviderIndex),r=w(p=>p.selectedBaseProvider),o=w(p=>p.quoteResponse),i=(0,Ws.useMemo)(()=>o?o.quotes:[],[o]),a=(0,Ws.useMemo)(()=>{if(e){if(!o||o.quotes.length===0)return 0;let p=BP(o,r);return p===-1?(A(r!==Xj),0):(A(!1),p)}return t},[e,o,r,t]),c=i.length>0?i[a]:void 0;return{selectedQuoteIndex:a,selectedBaseProvider:e?r:"",currentQuote:c,hasDefaultedToBestQuote:j}},BP=(j,A)=>j.quotes.findIndex(e=>e.baseProvider.id===A);function aA(){let j=w(p=>p.quoteResponse),A=w(p=>p.hasNoRoutes),e=w(p=>p.isFetchingQuote),t=(0,l0.useMemo)(()=>j?j.quotes:[],[j]),r=t[0]?.buyAmount??"",{selectedQuoteIndex:o,selectedBaseProvider:i,currentQuote:a,hasDefaultedToBestQuote:c}=u0();return{bestBuyAmount:r,currentQuote:a,hasNoRoutes:A,quoteResponse:j,quotes:t,selectedProviderIndex:o,selectedBaseProvider:i,isFetchingQuote:e,hasDefaultedToBestQuote:c}}n();s();var T0=v(x());n();s();var D7=v(x());n();s();var G0=v(x());n();s();n();s();n();s();n();s();var M7=5,C7=5,d0={id:$.solana.mainnetID,imageUrl:$.solana.iconUrl,name:$.solana.name,symbol:$.solana.tokenSymbol},b6={type:"SolanaNative",data:{amount:"0",balance:new Y(0),chain:d0,decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"VERIFIED"}},_7={type:"SPL",data:{amount:"0",balance:new Y(0),chain:d0,decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",spamStatus:"VERIFIED"}},m0={type:"SuiNative",data:{chain:{id:$.sui.mainnetID,name:$.sui.name,symbol:$.sui.tokenSymbol,imageUrl:$.sui.iconUrl},walletAddress:"",decimals:18,amount:"0",logoUri:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/sui/info/logo.png",name:"Sui",symbol:"SUI",balance:new Y(0),key:"SuiNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},B0={type:"SuiCoin",data:{chain:{id:$.sui.mainnetID,name:$.sui.name,symbol:$.sui.tokenSymbol,imageUrl:$.sui.iconUrl},walletAddress:"",contractAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",decimals:6,amount:"0",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new Y(0),key:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",tokenAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},k0={type:"PolygonNative",data:{chain:{id:$.polygon.mainnetID,name:$.polygon.name,symbol:$.polygon.tokenSymbol,imageUrl:$.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:$.polygon.tokenSymbol,balance:new Y(0),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},f0={type:"BaseNative",data:{chain:{id:$.base.mainnetID,name:$.base.name,symbol:$.base.tokenSymbol,imageUrl:$.base.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Base",symbol:$.base.tokenSymbol,balance:new Y(0),key:"BaseNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},E0={type:"ArbitrumNative",data:{chain:{id:$.arbitrum.mainnetID,name:$.arbitrum.name,symbol:$.arbitrum.tokenSymbol,imageUrl:$.arbitrum.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new Y(0),key:"ArbitrumNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},g0={type:"ERC20",data:{amount:"0",balance:new Y(0),decimals:6,key:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",walletAddress:"",chain:{id:$.polygon.mainnetID,imageUrl:$.polygon.iconUrl,name:$.polygon.name,symbol:$.polygon.tokenSymbol},contractAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",spamStatus:"VERIFIED"}},y0={type:"ERC20",data:{amount:"0",balance:new Y(0),decimals:6,key:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",walletAddress:"",chain:{id:$.base.mainnetID,imageUrl:$.base.iconUrl,name:$.base.name,symbol:$.base.tokenSymbol},contractAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",spamStatus:"VERIFIED"}},F0={type:"ERC20",data:{amount:"0",balance:new Y(0),decimals:6,key:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",walletAddress:"",chain:{id:$.arbitrum.mainnetID,imageUrl:$.arbitrum.iconUrl,name:$.arbitrum.name,symbol:$.arbitrum.tokenSymbol},contractAddress:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",spamStatus:"VERIFIED"}},h0={type:"EthereumNative",data:{chain:{id:$.ethereum.mainnetID,name:$.ethereum.name,symbol:$.ethereum.tokenSymbol,imageUrl:$.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new Y(0),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},S0={type:"ERC20",data:{chain:{id:$.ethereum.mainnetID,name:$.ethereum.name,symbol:$.ethereum.tokenSymbol,imageUrl:$.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new Y(0),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},Js=_7,R7=b6;var q6="https://help.phantom.com/hc/en-us/articles/5985106844435",w0="https://help.phantom.com/hc/en-us/articles/29763090277139";var Kr=18;var hn=500,rr={amount:new Y(0),amountUsd:null,pct:0};n();s();var or={};var $0={...or,bridgeMinimumUsdAmounts:0,swapDefaultFee:new Y(15e-5*10**18),bridgeDefaultFee:new Y(.025*10**18),averageNetworkFee:new Y(15e-5*10**18),nativeFungible:E0,usdcFungible:F0};n();s();var I0={...or,bridgeMinimumUsdAmounts:0,swapDefaultFee:new Y(15e-5*10**18),bridgeDefaultFee:new Y(.025*10**18),averageNetworkFee:new Y(15e-5*10**18),nativeFungible:f0,usdcFungible:y0};n();s();var v0={...or,bridgeMinimumUsdAmounts:20,swapDefaultFee:new Y(2.5*10**16),bridgeDefaultFee:new Y(3.75*10**16),averageNetworkFee:new Y(0),nativeFungible:h0,usdcFungible:S0};n();s();var b0={...or,bridgeMinimumUsdAmounts:2,swapDefaultFee:new Y(6*10**16),bridgeDefaultFee:new Y(6*10**16),averageNetworkFee:new Y(.0015*10**18),nativeFungible:k0,usdcFungible:g0};n();s();var q0={bridgeMinimumUsdAmounts:1,swapDefaultFee:new Y(3*10**6),bridgeDefaultFee:new Y(30*10**6),averageNetworkFee:new Y(15e3),nativeFungible:b6,usdcFungible:_7};n();s();var x0={bridgeMinimumUsdAmounts:1,swapDefaultFee:new Y(50*10**6),bridgeDefaultFee:new Y(50*10**6),averageNetworkFee:new Y(50*10**6),nativeFungible:m0,usdcFungible:B0};var hlA=["solana","ethereum","polygon","base","sui","arbitrum"],kP=new To({solana:q0,ethereum:v0,polygon:b0,base:I0,sui:x0,arbitrum:$0}),JA=Go(kP);function nr(){let j=UA.isFeatureEnabled("enable-sui-swapper");return(0,G0.useMemo)(()=>JA.supportedChains.filter(A=>A==="sui"?j:!0),[j])}var sr=()=>{let{data:j}=FA(),A=nr(),e=(0,D7.useMemo)(()=>A.map(t=>$.getMainnetNetworkID(t)),[A]);return(0,D7.useMemo)(()=>fP(j,e),[j,e])},fP=(j,A)=>[...new Set((j?.addresses??[]).map(e=>e.networkID).filter(e=>A.includes(e)))];var N7=()=>{let j=sr();return(0,T0.useCallback)(A=>!!A&&j.includes(A),[j])};n();s();var AF=v(x());n();s();var O0=v(x());n();s();n();s();var K7=(r=>(r[r.Always=1/0]="Always",r[r.Short=eA({days:1})]="Short",r[r.Medium=eA({days:3})]="Medium",r[r.Long=eA({days:7})]="Long",r))(K7||{}),P0=(o=>(o[o.Immediate=0]="Immediate",o[o.Short=eA({minutes:1})]="Short",o[o.Medium=eA({minutes:2.5})]="Medium",o[o.Long=eA({minutes:60})]="Long",o[o.Never=1/0]="Never",o))(P0||{}),Ys=(t=>(t[t.Short=eA({seconds:20})]="Short",t[t.Medium=eA({minutes:2.5})]="Medium",t[t.Long=eA({minutes:5})]="Long",t))(Ys||{});var EP=l.object({swapper:l.number(),review:l.number().nullish().default(null)}),x6={swapper:Ys.Short,review:null},L7=()=>{let j=UA.getMultivariateAssignment("swapper-poll-interval-json");if(!j)return x6;try{let A=JSON.parse(j);return EP.parse(A)}catch{return x6}};var Ie=()=>{let j=Zs(r=>r.intervalMs),A=Zs(r=>r.state),e=Zs(r=>r.setState),t=(0,O0.useCallback)(r=>{e("resumed",r??M0())},[e]);return{state:A,pause:()=>e("paused"),resume:t,intervalMs:j}},Sn=j=>{Zs.getState().setState("resumed",j??M0())},G6=()=>{Zs.getState().setState("paused")},M0=()=>L7().swapper,Zs=TA(j=>({state:"resumed",intervalMs:x6.swapper,setState(A,e){j(e?{state:A,intervalMs:e}:{state:A})}}));n();s();n();s();n();s();n();s();var gP=j=>{let A=lA(),e=W(),{data:t,isPending:r}=tA({gcTime:0,queryKey:["originIsBlocklisted",j],queryFn:async()=>{let{result:o}=await cl(A,e,j);return o}});return j===void 0?{isLoading:!1,originIsBlocklisted:!1}:{isLoading:r,originIsBlocklisted:t??!1}};n();s();var U7=v(x());n();s();var Lr=class{#A;constructor(A){this.#A=A}onScannedMessageByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"message",status:"success"}}})};onFailedScannedMessageByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"message",status:"error"}}})};onScannedTransactionByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"transaction",status:"success"}}})};onFailedScannedTransactionByUser=A=>{this.#A.capture("simulation",{data:{simulation:{...A,type:"transaction",status:"error"}}})}};function yP(j,A){let{data:e}=FA(),{params:t,networkID:r}=j,[o,i]=(0,U7.useState)(null),a=["scan-message",{url:j.url,message:t.message}],c=e?.addresses.find(k=>k.networkID===r)?.address,p=ZA(G.language)??"en",d=W(),m=new Lr(d),B=_0(),f=tA({queryKey:a,queryFn:async()=>{try{let k=await pl(p,await d.getDeviceId(),{...j,userAccount:c});return i(null),m.onScannedMessageByUser({networkId:r,warnings:k.warnings.map(E=>E.severity),shouldBlock:!!k.block,errorCode:k.error??""}),k}catch(k){i(k),m.onFailedScannedMessageByUser({networkId:r,url:j.url}),b.addBreadcrumb("simulation",`networkID: ${r}, url: ${j.url}, type: message`,"info"),b.captureError(f.error,"simulation")}},enabled:!!c&&!!j.url&&!!t.message&&!A?.disabled,refetchInterval:A?.disableRefetch?!1:B,staleTime:1e3*10,...tl()});return{isFetched:f.isFetched,isFetching:f.isFetching,data:f.data,isLoading:f.isPending&&!A?.disabled,isError:f.isError||!!o,error:f.error||o}}function Ai(j,A){let{params:e}=j,[t,r]=(0,U7.useState)(null),o=W(),i=["scan-transaction",j.networkID,j.url,e?e.transactions??e.transaction:""],a=_0(),c=!1;$.isEVMNetworkID(j.networkID)||$.isSolanaNetworkID(j.networkID)?c=!!e&&e.transactions.length>0&&!!j.userAccount:$.isBitcoinNetworkID(j.networkID)?c=!!e&&!!e.transaction&&!!e.userAddresses&&e.userAddresses.length>0:$.isSuiNetworkID(j.networkID)&&(c=!!e&&!!j.userAccount);let p=ZA(G.language)??"en",d=new Lr(o),m=tA({queryKey:i,queryFn:async()=>{try{let B=await Gs(p,await o.getDeviceId(),j);return d.onScannedTransactionByUser({networkId:j.networkID,warnings:B.warnings.map(f=>f.severity),shouldBlock:!!B.block,errorCode:B.error??""}),r(null),A?.onSettled?.(B,void 0),B}catch(B){d.onFailedScannedTransactionByUser({networkId:j.networkID,url:j.url}),b.addBreadcrumb("simulation",`networkID: ${j.networkID}, url: ${j.url}, type: transaction`,"info"),r(B),A?.onSettled?.(void 0,B),b.captureError(B,"simulation")}},enabled:c&&!A?.disabled,refetchInterval:A?.disableRefetch?!1:a,staleTime:1e3*10,...tl()});return{isFetched:m.isFetched,isFetching:m.isFetching,data:m.data,isLoading:m.isPending&&!A?.disabled,isError:m.isError||!!t,error:m.error||t}}var C0=5e3;function _0(){let j=UA.getMultivariateAssignment("transactions-simulation-interval-ms");if(!j)return C0;let A=parseInt(j,10);return Number.isNaN(A)?C0:A}var pi=v(x());n();s();n();s();n();s();var T6=l.object({name:l.string(),message:l.string()}),D0=l.object({chainId:ge,name:l.string(),symbol:l.string(),decimals:l.number(),logoURI:l.optional(l.string()),includesBridge:l.optional(l.boolean())}),FP=D0.extend({address:l.string(),resourceType:l.literal("address")}),hP=D0.extend({slip44:l.string(),resourceType:l.literal("nativeToken")}),U7A=l.union([FP,hP]),N0=l.object({id:l.string(),name:l.string(),logoUri:l.string()}),SP=l.union([l.enum(["network","phantom","gasless","ata","gasless_network","tips","priority_fee"]),l.string()]),wP=l.object({name:l.string(),percentage:l.number(),amount:l.number(),type:SP}),$P=l.object({name:l.string(),proportion:l.string()}),K0=l.object({sellAmount:l.string(),buyAmount:l.string(),rfqProps:l.optional(l.object({expireAt:l.number(),quoteId:l.string()})),analyticsContext:l.optional(l.string())}),Q7=K0.extend({priceImpact:l.number(),sources:l.array($P),fees:l.array(wP),slippageTolerance:l.optional(l.number()),baseProvider:N0}),IP=l.object({success:l.boolean(),error:l.string().optional()}),H7=Q7.extend({transactionData:l.array(l.string()),gaslessSignature:l.optional(l.string()),gaslessSwapFeeResult:l.optional(IP)}),V7=Q7.extend({allowanceTarget:l.string(),exchangeAddress:l.string(),gas:l.number(),value:l.string(),transactionData:l.string()}),X7=Q7.extend({transactionData:l.array(l.string())}),R0=l.object({name:l.string(),amount:l.string(),token:rt,percentage:l.string(),included:l.boolean(),amountUSD:l.optional(l.string())}),vP=l.object({name:l.string(),key:l.string(),logoURI:l.string()}),L0=l.object({name:l.string(),symbol:l.string()}),bP=l.object({transactionData:l.string(),buyToken:rt,sellToken:rt,nonIncludedNonGasFees:l.string(),feeCosts:l.array(R0),chainId:ge,tool:vP,value:l.optional(l.string()),allowanceTarget:l.optional(l.string()),approvalMetadata:l.optional(L0),approvalExactAmount:l.optional(l.string()),exchangeAddress:l.optional(l.string()),gasCosts:l.optional(l.array(l.number())),includedFeeCosts:l.optional(l.array(R0))}),z7=K0.extend({baseProvider:N0,executionDuration:l.number(),tags:l.array(l.string()),steps:l.array(bP)}),qP=l.union([H7,V7,X7,z7]),ji=l.enum(["solana","eip155","sui","xchain"]),ei=l.object({type:ji,taker:rt,buyToken:rt,sellToken:rt,slippageTolerance:l.number(),simulationTolerance:l.optional(l.number()),gasBuffer:l.optional(l.number()),quotes:l.array(qP),tradeFee:l.optional(l.array(l.number())),estimateGasFee:l.optional(l.array(l.number())),includesAllProviders:l.optional(l.boolean())}),xP=l.enum(["swap-approval","swap","bridge-approval","bridge"]),GP=l.enum(["swap","bridge"]),TP=l.enum(["swap","bridge"]),W7=l.object({sellToken:rt,buyToken:rt,approvalMetadata:l.optional(L0)}),PP=l.object({type:l.literal("solana"),transactions:l.array(l.string()),transactionTypes:l.array(GP),transactionPairs:l.optional(l.array(W7))}),OP=l.object({type:l.literal("evm"),transactions:l.array(bo),transactionTypes:l.array(xP),transactionPairs:l.optional(l.array(W7))}),MP=l.object({type:l.literal("sui"),transactions:l.array(l.string()),transactionTypes:l.array(TP),transactionPairs:l.optional(l.array(W7))}),Q7A=l.union([PP,OP,MP]);var J7=l.object({name:l.string(),amount:l.string()}).strict(),P6=l.object({name:l.string(),feeUsd:l.number().nullish(),amount:l.string(),time:l.object({text:l.string(),isFast:l.boolean()}),logoURI:l.string()}),H7A=l.union([J7,P6]);function yA(j){return z7.safeParse(j).success}function Qe(j){return H7.safeParse(j).success}function zj(j){return V7.safeParse(j).success}function St(j){return X7.safeParse(j).success}function U0(j){return j?"gaslessSignature"in j:!1}function He(j){return Qe(j)||zj(j)||St(j)}n();s();var Wj="swapper";var Q0=[Wj,"quotes"],hA={quotesScope:()=>Q0,quotes:({sellTokenCaip19:j,buyTokenCaip19:A,taker:e,amountValue:t,amountType:r,slippageTolerance:o,priorityFee:i,tipAmount:a,takerDestination:c,enableAutoSlippage:p})=>[...Q0,{sellToken:j,buyToken:A,taker:e,takerDestination:c,amountValue:t,amountType:r,slippageTolerance:o,priorityFee:i,tipAmount:a,enableAutoSlippage:p}],transactions:j=>[Wj,"transactions",j],slippageTolerance:()=>[Wj,"slippageTolerance"],priorityFee:()=>[Wj,"priorityFee"],tipAmount:()=>[Wj,"tipAmount"],lastSubmittedPairs:()=>[Wj,"lastSubmittedPairsV2"],lastSelectedTokens:()=>[Wj,"lastSelectedTokens"],slippageSettings:()=>[Wj,"slippageSettings"],priorityFeeSettings:()=>[Wj,"priorityFeeSettings"],tipSettings:()=>[Wj,"tipSettings"],hasViewedAutoSlippageOptIn:()=>[Wj,"hasViewedAutoSlippageOptIn"],optimisticUpdates:()=>[Wj,"optimisticUpdates"],autoSlippageMigrationVersion:()=>[Wj,"autoSlippageMigrationVersion"]};var V0=async({callerAddress:j,contractAddress:A,networkId:e,sellAmount:t,allowanceTarget:r,approvalExactAmount:o,exchangeAddress:i,value:a,transactionData:c,type:p})=>{let d=[],m=[];if(A&&(await vB({callerAddress:j,spender:r,networkId:e,contractAddress:A})).lt(o??t.toString())){let k=await bB({callerAddress:j,spender:r,networkId:e,contractAddress:A,exactAmount:o});d.push(k),m.push(`${p}-approval`)}let B=bo.parse({type:"0x2",from:j,data:c,chainId:$.getEVMNetworkIDValue(e),to:i,...a==="0"?{}:{value:`0x${new Y(a).toString(16)}`}});return d.push(B),m.push(p),{transactions:d,transactionTypes:m}},ti=async({networkId:j,callerAddress:A,quote:e})=>{let{sellAmount:t,steps:r}=e,o=[],i=[],a=[];for(let c of r){let{allowanceTarget:p,exchangeAddress:d,value:m,transactionData:B,sellToken:f,buyToken:k,approvalMetadata:E}=c,g=f.resourceType==="address"?f.address:null,y=$.compareNetworkID(f.chainId,k.chainId)===0?"swap":"bridge";if(!p||!d||!B||!m)throw new Error("Missing bridge step data for EVM bridge quote.");let F=await V0({callerAddress:A,contractAddress:g,networkId:j,sellAmount:t,allowanceTarget:p,approvalExactAmount:c.approvalExactAmount,exchangeAddress:d,value:m,transactionData:B,type:y});o.push(...F.transactions),i.push(...F.transactionTypes),a.push({sellToken:f,buyToken:k,approvalMetadata:E}),F.transactionTypes.length==2&&F.transactionTypes.find(S=>S.includes("approval"))&&a.push({sellToken:f,buyToken:k,approvalMetadata:E})}return{type:"evm",transactions:o,transactionTypes:i,transactionPairs:a}},ri=async({quote:j,connection:A})=>{let e=[],t=[],r=[];for(let o of j.steps){let{transactionData:i,sellToken:a,buyToken:c}=o,p=$.compareNetworkID(a.chainId,c.chainId)===0?"swap":"bridge",d=await X0(i,A);e.push(Gp.serialize(d).transaction),t.push(p),r.push({sellToken:a,buyToken:c})}return{type:"solana",transactions:e,transactionTypes:t,transactionPairs:r}},oi=async({networkId:j,callerAddress:A,quote:e,sellFungible:t})=>{let r=t.type==="ERC20"&&t?.data.tokenAddress?t.data.tokenAddress:null,{allowanceTarget:o,exchangeAddress:i,sellAmount:a,value:c}=e;return{type:"evm",...await V0({callerAddress:A,contractAddress:r,networkId:j,sellAmount:a,allowanceTarget:o,exchangeAddress:i,value:c,transactionData:e.transactionData,type:"swap"})}},ni=async({quote:j})=>{let A=[],e=[],t=[];for(let r of j.steps){let{transactionData:o,sellToken:i,buyToken:a}=r,c=$.compareNetworkID(i.chainId,a.chainId)===0?"swap":"bridge";A.push(o),e.push(c),t.push({sellToken:i,buyToken:a})}return{type:"sui",transactions:A,transactionTypes:e,transactionPairs:t}},X0=async(j,A)=>{let e=oe(j,"bs58");return await $B(e,{connection:A,transactionType:"Swap"})},si=async({quote:j,connection:A})=>{let e=j.transactionData.map(i=>X0(i,A)),r=(await Promise.all(e)).map(i=>Gp.serialize(i).transaction);return{type:"solana",transactionTypes:r.map(()=>"swap"),transactions:r}},ii=async({quote:j})=>({type:"sui",transactionTypes:Array(j.transactionData.length).fill("swap"),transactions:j.transactionData}),Ve=({callerAddress:j,sellFungible:A,quote:e})=>{let{connection:t}=Oe(),r=hA.transactions(e);return tA({queryKey:r,enabled:!!e&&!!A,gcTime:0,staleTime:0,refetchInterval:Ys.Short,async queryFn(){try{if(!e)throw new Error("Missing quote");if(!A)throw new Error("Missing sell token");let o=A.data.chain.id;if(He(e)){if($.isEVMNetworkID(o)&&zj(e))return await oi({networkId:o,callerAddress:j,quote:e,sellFungible:A});if($.isSolanaNetworkID(o)&&Qe(e))return si({quote:e,connection:t});if($.isSuiNetworkID(o)&&St(e))return ii({quote:e});throw new Error(`Single network swap quote not supported for network ID ${o}`)}if(yA(e)){if($.isEVMNetworkID(o))return await ti({networkId:o,callerAddress:j,quote:e});if($.isSolanaNetworkID(o))return await ri({quote:e,connection:t});if($.isSuiNetworkID(o))return await ni({quote:e});throw new Error(`Bridge quote not supported for network ID ${o}`)}throw new Error("Swap quote type not supported")}catch(o){throw o instanceof Error&&b.captureError(o,"swapper"),o}}})};n();s();n();s();n();s();n();s();n();s();n();s();n();s();var wn=j=>j.steps.map(A=>A.tool);var YA=j=>j?yA(j)?wn(j):j?.sources??[]:[];n();s();function KA(j){let A=j.reduce((e,t)=>e.add(t.name),new Set);return Array.from(A).join(" + ")}var CP=10,_P=TA(j=>({transitions:[],addTransition:(A,e)=>j(t=>{let r=RP(e,A);return r?{transitions:[r,...t.transitions].slice(0,CP)}:t})}));function M6(j,A){_P.getState().addTransition(j,A)}function RP(j,A){switch(A.type){case"idle":return;case"fetchingQuote":return;case"quote":return{sell:Xe(A.response,A.sell,"sell"),buy:Xe(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:ai(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:j.type,timestamp:Date.now()};case"simulationRequestErrored":return{sell:Xe(A.response,A.sell,"sell"),buy:Xe(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:ai(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:j.type,error:A.error,quoteTransactionData:O6(A.quote),timestamp:Date.now()};case"simulated":return;case"simulationFailed":return{sell:Xe(A.response,A.sell,"sell"),buy:Xe(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:ai(A.quote),slippage:A.response.slippageTolerance,simulationError:A.simulationError,stateType:A.type,eventType:j.type,simulationWarning:A.scannedTransactionResult?.warnings,quoteTransactionData:O6(A.quote),simulationHumanReadableError:A.scannedTransactionResult?.simulationError?.humanReadableError,simulationRequestId:A.scannedTransactionResult?.advancedDetails?.requestId,timestamp:Date.now()};case"transactionSubmissionFailed":return{sell:Xe(A.response,A.sell,"sell"),buy:Xe(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:ai(A.quote),slippage:A.response.slippageTolerance,error:A.error,stateType:A.type,eventType:j.type,quoteTransactionData:O6(A.quote),timestamp:Date.now()};case"transactionNotConfirmed":return{sell:Xe(A.response,A.sell,"sell"),buy:Xe(A.response,A.buy,"buy"),sellAmount:A.quote.sellAmount,buyAmount:A.quote.buyAmount,provider:ai(A.quote),slippage:A.response.slippageTolerance,stateType:A.type,eventType:j.type,quoteTransactionData:O6(A.quote),timestamp:Date.now(),error:A.error};default:return}}var ai=j=>{let A=YA(j);return KA(A)},Xe=(j,A,e)=>{switch(e){case"sell":return{caip19:j.sellToken,symbol:A.data.symbol??void 0};case"buy":return{caip19:j.buyToken,symbol:A.data.symbol??void 0}}},O6=j=>{if(!yA(j))return j.transactionData};var C6=class{onStateChange(A,e,t){M6(t,A)}};n();s();var _6=class{constructor(A){this.listeners=A}transition(A,e){try{let t=this.detectNextState(A,e);return this.listeners.forEach(r=>r.onStateChange(e,A,t)),t}catch{return A}}detectNextState(A,e){switch(e.type){case"quoteRequestStarted":return{type:"fetchingQuote",buy:e.buy,sell:e.sell,amount:e.amount};case"quoteResponseReceived":switch(A.type){case"fetchingQuote":case"quote":case"simulated":case"simulationRequestErrored":case"transactionSubmissionFailed":case"transactionNotConfirmed":let t=e.response.quotes[e.quoteIndex];if(!t)throw new Error("Quote index out of bounds");return{type:"quote",response:e.response,buy:A.buy,sell:A.sell,quote:t};default:throw new Error("Can't transition from this state")}case"quoteSelected":switch(A.type){case"quote":let t=A.response.quotes[e.quoteIndex];if(!t)throw new Error("Quote index out of bounds");return{type:"quote",quote:t,buy:A.buy,sell:A.sell,response:A.response};default:throw new Error("Can only transition to QuoteChanged from Quote")}case"simulationResponseReceived":switch(A.type){case"quote":return e.scannedTransactionResult.error?{type:"simulationFailed",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:e.scannedTransactionResult,simulationError:e.scannedTransactionResult.error}:{type:"simulated",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:e.scannedTransactionResult};default:throw new Error("Can only transition to Simulated from Simulating")}case"simulationRequestError":switch(A.type){case"quote":return{type:"simulationRequestErrored",buy:A.buy,sell:A.sell,quote:A.quote,response:A.response,error:e.error};default:throw new Error("Can only transition to SimulationRequestErrored from Simulating")}case"transactionSubmissionFailed":switch(A.type){case"simulated":case"simulationFailed":return{type:"transactionSubmissionFailed",quote:A.quote,buy:A.buy,sell:A.sell,response:A.response,scannedTransactionResult:A.scannedTransactionResult,error:e.error};default:throw new Error("Can only transition to SwapSubmitFailed from SubmittingSwap")}case"transactionConfirmationFailed":switch(A.type){case"simulated":return{type:"transactionNotConfirmed",quote:A.quote,buy:A.buy,sell:A.sell,txReceipt:e.txReceipt,response:A.response,scannedTransactionResult:A.scannedTransactionResult,error:e.error};default:throw new Error("Can only transition to TransactionNotConfirmed from ConfirmingTransaction")}}}};var DP=new _6(new Set([new C6])),z0=TA(j=>({state:{type:"idle"},transition:A=>{j(e=>{let t=e.state;return{state:DP.transition(t,A)}})}}));var wt=()=>{let j=z0(e=>e.state),A=z0(e=>e.transition);return{state:j,transition:A}};n();s();var NP="swap-priority-fee",KP=async(j,A,e)=>{let t=oe(j,"bs58");return await Li(t,e),{networkFeeEstimation:await oa(A,[t.message])}};function W0({swapTransactions:j,chainId:A,solanaConnection:e,enabled:t=!0}){return tA({queryKey:[NP],queryFn:async()=>{if(!j)throw new Error("No swap transactions");if(j.type!=="solana")throw new Error("Trying to estimate network fee for non-solana txs");if(!A)throw new Error("Trying to execute swap with no chain id.");try{let r=j.transactions.map(a=>KP(a,A,e));return(await Promise.all(r)).map(a=>a.networkFeeEstimation.value)}catch{return[0]}},staleTime:0,enabled:t&&!!j&&j.transactions.length>0&&j.type==="solana"&&!!A})}n();s();var LP="swap-priority-fee";function J0({swapTransactions:j,chainId:A,estimatedFee:e,enabled:t=!0}){return tA({queryKey:[LP,j],queryFn:async()=>{if(!j)throw new Error("No swap transactions");if(j.type!=="sui")throw new Error("Trying to estimate network fee for non-sui txs");if(!A)throw new Error("Trying to execute swap with no chain id.");if(e&&e.length===j.transactions.length)return e;try{return(await Promise.all(j.transactions.map(o=>ta({networkID:A,transaction:Do.deserializeTransactionString(o)})))).map(o=>o.gasBudget.toNumber())}catch{return[0]}},enabled:t&&!!j&&j.transactions.length>0&&j.type==="sui"&&!!A})}n();s();var UP=1.3,QP=j=>{switch(j){case iA.Ethereum.Mainnet:case iA.Ethereum.Sepolia:return 8e5;case iA.Polygon.Mainnet:case iA.Polygon.Amoy:return 5e5;case iA.Base.Mainnet:case iA.Base.Sepolia:return 5e5;case iA.Arbitrum.Mainnet:case iA.Arbitrum.Sepolia:return 5e5;default:return 0}},HP=j=>{switch(j){case iA.Ethereum.Mainnet:case iA.Ethereum.Sepolia:return 6e4;case iA.Polygon.Mainnet:case iA.Polygon.Amoy:return 6e4;case iA.Base.Mainnet:case iA.Base.Sepolia:return 6e4;case iA.Arbitrum.Mainnet:case iA.Arbitrum.Sepolia:return 6e4;default:return 0}},VP=(j,A)=>j.steps.flatMap(t=>t.gasCosts??[QP(A)]),XP=(j,A,e)=>{let t=zj(A)?[A.gas]:VP(A,e);return j?j.transactionTypes.map(r=>r.includes("approval")?HP(e):t.shift()??0):t},ir={estimateGas:({swapTransactions:j,evmGasEstimation:A,currentQuote:e,scanResult:t,networkID:r,includeGasBuffer:o,gasBuffer:i})=>{let{maxFeePerGas:a,maxPriorityFeePerGas:c}=A,p=XP(j,e,r),d=t?.advancedDetails?.gas;return t?.advancedDetails?.gasLimit>0&&(p=d),p.map(B=>({maxFeePerGas:a,maxPriorityFeePerGas:c,networkID:r,gasLimit:new T(B).multipliedBy(o?i??UP:1).integerValue(T.ROUND_CEIL)}))}};n();s();var Y0={estimateGas:({solanaNetworkFees:j,networkID:A})=>j.map(e=>({networkID:A,value:e}))};n();s();var Z0={estimateGas:({suiGasBudget:j,networkID:A})=>j.map(e=>({networkID:A,gasBudget:new T(e)}))};var zP=2e4,Y7=({includeGasBuffer:j=!1}={})=>{let{currentQuote:A,quoteResponse:e}=aA(),t=w(h=>h.sellFungible),r=t?.data.chain.id??iA.Solana.Mainnet,{data:o}=wr(t?{address:t.data.walletAddress,networkID:t.data.chain.id}:void 0),i=o?.address??"",a=$.isEVMNetworkID(r),c=$.isSolanaNetworkID(r),p=$.isSuiNetworkID(r),d=w(h=>h.isFetchingQuote),{data:m,isFetching:B}=Ve({callerAddress:i,sellFungible:t,quote:A}),f={type:"transaction",userAccount:i,params:void 0,url:"https://phantom.com",networkID:r};m?.type==="evm"&&a&&(f.params={transactions:m.transactions});let{transition:k}=wt(),E=(0,pi.useCallback)((h,q)=>{q&&k({type:"simulationRequestError",error:q}),h&&k({type:"simulationResponseReceived",scannedTransactionResult:h})},[k]),{data:g,isFetching:y}=Ai(f,{disabled:c,onSettled:E}),{connection:F}=Oe(),{data:S}=UB({networkID:a?r:iA.Ethereum.Mainnet,transactionSpeed:"standard",gasLimit:new Y(1),refetchInterval:zP,enabled:a}),{data:I,isLoading:O}=W0({swapTransactions:m,chainId:c?r:iA.Solana.Mainnet,solanaConnection:F,enabled:c}),{data:M,isFetching:P}=J0({swapTransactions:m,chainId:p?r:iA.Sui.Mainnet,estimatedFee:e?.estimateGasFee,enabled:p}),X=(0,pi.useMemo)(()=>{if(!(d||!A)){if(a&&(zj(A)||yA(A))&&S&&m)return ir.estimateGas({swapTransactions:m,evmGasEstimation:S,currentQuote:A,scanResult:g,includeGasBuffer:j,networkID:r,gasBuffer:e?.gasBuffer});if(c&&I!==void 0)return Y0.estimateGas({solanaNetworkFees:I,networkID:r});if(p&&M!==void 0)return Z0.estimateGas({suiGasBudget:M,networkID:r})}},[d,A,S,r,I,g,j,e?.gasBuffer,a,c,p,M,m]),_=!1;return c?_=O:p?_=B||y||P:a&&(_=B||y),(0,pi.useMemo)(()=>({gasEstimation:X,isFetching:_,isError:S===void 0}),[X,_,S])};function WP(){let j=w(o=>o.setGasEstimation),{state:A}=Ie(),{gasEstimation:e}=Y7(),{gasEstimation:t,isFetching:r}=Y7({includeGasBuffer:!0});(0,AF.useEffect)(()=>{if(A==="paused"){j({isFetching:!1});return}j({isFetching:r,estimate:e,estimateWithBuffer:t})},[A,j,e,t,r])}n();s();var oF=v(x());n();s();var JP="swap",jF=j=>new MB(j,JP),Ur=Rt(W,j=>jF(j));n();s();n();s();var eF=v(x());n();s();function aj({key:j,queryKey:A,defaultValue:e=null}){let t=lA();return tA({enabled:!0,queryKey:A,gcTime:K7.Long,staleTime:1/0,async queryFn(){try{return await t.get(j)}catch(r){return r instanceof Error&&b.captureError(r,"swapper"),e}}})}function mj({key:j,queryKey:A}){let e=lA(),t=AA();return uA({async mutationFn(r){try{return await e.set(j,r)}catch(o){o instanceof Error&&b.captureError(o,"swapper");return}},async onMutate(r){await t.cancelQueries({queryKey:A});let o=t.getQueryData(A);return t.setQueryData(A,r),{previousValue:o}},onError(r,o,i){t.setQueryData(A,i?.previousValue)}})}var YP={type:"fixed"},ZP={type:"auto"},XA=()=>{let{data:[j]}=BA(["enable-swapper-default-auto"]),{slippageSetting:A,isFetched:e,save:t}=A1();return{isFetched:e,selectedSetting:A??(j?ZP:YP),setSlippageSetting:t}},A1=()=>{let{data:j,isFetched:A}=aj({key:"slippageSettings",queryKey:hA.slippageSettings()}),{mutateAsync:e}=mj({key:"slippageSettings",queryKey:hA.slippageSettings()}),t=(0,eF.useCallback)(async r=>{await e(r)},[e]);return{isFetched:A,slippageSetting:j,save:t}};function ar(j,A,e){if(!e)return;if(A==="fixed")return e.slippageTolerance;let t=e.quotes[j];if(t)return yA(t)?e.slippageTolerance:He(t)?t.slippageTolerance:e.slippageTolerance}n();s();var D6=(j,A,e)=>{if(e)return wA(j,A).times(T(e)).toNumber()},tF=(j,A)=>A&&j?A>j?A:j:A??j;function rF({buyAssetUsdValue:j,buyToken:A,sellAssetUsdValue:e,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:i,priceImpact:a,provider:c,baseProvider:p,slippageTolerance:d,slippageType:m,sellSwapFilter:B,isRetry:f,analyticsContext:k}){if(A&&t){let E=D6(r,A.data.decimals,j),g=D6(o,t.data.decimals,e),y=tF(E,g);return{networkId:t.data.chain.id,chainId:$.getChainID(t.data.chain.id),toNetworkId:A.data.chain.id,toChainId:$.getChainID(A.data.chain.id),isBridge:t.data.chain.id!==A.data.chain.id,marketName:`${t.data.symbol}/${A.data.symbol}`,tradeDirection:"sell",swapSource:c,baseProvider:p,priceImpact:a,fromAssetSymbol:t.data.symbol??"",fromAssetAddress:t.data.tokenAddress,fromAssetAmount:wA(o,t.data.decimals),fromAssetUsdPrice:e,fromAssetUsdVolume:g,toAssetSymbol:A.data.symbol??"",toAssetAddress:A.data.tokenAddress,toAssetAmount:wA(r,A.data.decimals),toAssetUsdPrice:j,toAssetUsdVolume:E,totalUsdVolume:y,feeUsd:i,slippageTolerance:d,slippageType:m,sellSwapFilter:B,isRetry:f,analyticsContext:k}}return null}function ui({buyAssetUsdValue:j,buyToken:A,sellAssetUsdValue:e,sellToken:t,quote:r,slippageTolerance:o,slippageType:i,sellSwapFilter:a,isRetry:c,analyticsContext:p,baseProvider:d}){if(A&&t){let{buyAmount:m,sellAmount:B}=r,f="priceImpact"in r?r.priceImpact:0,k="sources"in r?KA(r.sources):"",E=("fees"in r?r.fees.find(S=>S.type==="phantom")?.amount.toString():"")??"",g=D6(m,A.data.decimals,j),y=D6(B,t.data.decimals,e),F=tF(g,y);return{chainId:t.data.chain.id??A.data.chain.id,swap:{marketName:`${t.data.symbol}/${A.data.symbol}`,tradeDirection:"sell",swapSource:k,priceImpact:f,fromAssetSymbol:t.data.symbol??"",fromAssetAddress:t.data.tokenAddress??"",fromAssetAmount:wA(B,t.data.decimals),fromAssetUsdPrice:e??0,fromAssetUsdVolume:y??0,toAssetSymbol:A.data.symbol??"",toAssetAddress:A.data.tokenAddress??"",toAssetAmount:wA(m,A.data.decimals),toAssetUsdPrice:j,toAssetUsdVolume:g,totalUsdVolume:F??0,feeUsd:Number(E),slippageTolerance:o,slippageType:i,sellSwapFilter:a,isRetry:c,analyticsContext:p,baseProvider:d}}}return null}n();s();var N6=v(x());var le=()=>{let{data:j,isFetching:A}=aj({key:"lastSubmittedPairsV2",queryKey:hA.lastSubmittedPairs()}),e=(0,N6.useMemo)(()=>j??null,[j]),{mutateAsync:t}=mj({key:"lastSubmittedPairsV2",queryKey:hA.lastSubmittedPairs()}),r=(0,N6.useCallback)(async(o,i)=>{await t({sellFungible:o,buyFungible:i})},[t]);return{pairs:e,isLoading:A,storePairs:r}};var K6=({goToConfirmation:j})=>{let A=w(g=>g.sellUsdValue),e=w(g=>g.buyUsdValue),{currentQuote:t,quoteResponse:r,selectedProviderIndex:o,selectedBaseProvider:i}=aA(),a=w(g=>g.sellFungible),c=w(g=>g.buyFungible),p=w(g=>g.swapFilter),{selectedSetting:d}=XA(),{storePairs:m}=le(),B=W(),f=Ur(),{pause:k}=Ie();return(0,oF.useCallback)(()=>{if(!t||!a||!c)return;let g=ar(o,d.type,r);B.capture("swapperSwap");let y=ui({buyToken:c,sellToken:a,sellAssetUsdValue:A,buyAssetUsdValue:e,quote:t,slippageTolerance:g,slippageType:d.type,sellSwapFilter:p,baseProvider:i});y&&(b.addBreadcrumb("swapper","approved","info",Dt(y.swap)),f.approved(y)),k(),j(),$.compareNetworkID(a.data.chain.id,c.data.chain.id)===0&&m(a,c)},[t,a,c,o,d.type,r,B,A,e,k,j,f,m,p,i])};n();s();var de=v(x());n();s();n();s();function nF(j,A){if(!j||A.length===0)return null;let e=new Set(A),t=1/0,r=null;for(let o of j){let i=new T(o.data.amount??0).gt(0);if(!e.has(o.data.chain.id)||!i)continue;let a=A.indexOf(o.data.chain.id);if(a<t&&(t=a,r=o.data.chain.id,a===0))break}return r}var sF=(j,A,e)=>{let t=A.length?nF(j,A):null;return!t||!e.includes(t)?R7:JA.get(t).nativeFungible},iF=j=>j?JA.get(j).usdcFungible:Js,li=(j,A)=>{let e=st(A);return j.find(t=>{if(uj(e)&&e===t.type)return!0;if(A.resourceType==="address"){let r=XB(t);return Sr(A)?vp(A.address,r):A.address===r}})},L6=(j,A,e)=>{let t=li(e,j);if(!t){if(uj(st(j)))t=JA.get(j.chainId).nativeFungible;else if(A&&A.chainId===j.chainId){let r=uj(st(A)),{usdcFungible:o,nativeFungible:i}=JA.get(A.chainId);t=r?o:i}}return t},Z7=(j,A=!1)=>{let{usdcFungible:e,nativeFungible:t}=JA.get(j.chainId),r=J(j),o=J(V(e));return uj(st(j))?e:vp(r,o)?t:A?e:t};n();s();var aF=v(x());n();s();var Ad=v(x());n();s();function Qr(j,A){return j.data.key===A.data.key}function Hr({enablePrices:j,enableSorting:A}){let{fungibles:e,isLoadingTokens:t,tokensError:r,refetch:o}=he({enablePrices:j,enableSorting:A}),i=N7(),a=w(d=>d.sellFungible),c=e.filter(d=>i(d.data.chain.id)&&d.type!=="CompressedSPL"),p=(0,Ad.useMemo)(()=>{if(a){let d=c.findIndex(B=>Qr(B,a)),m=c[d];m&&m.data.amount!==a.data.amount&&(c[d]=a)}return c.filter(d=>d.data.amount!=="0")},[c,a]);return(0,Ad.useMemo)(()=>({assets:p,isLoading:t,error:r,refetchTokens:o}),[p,t,r,o])}var cF=j=>{let A=ps(),{pairs:e}=le(),{assets:t}=Hr({enablePrices:!1,enableSorting:!1});return(0,aF.useMemo)(()=>{let r=iF(j?.data.chain.id),a=((e?A.includes(e.buyFungible.data.chain.id):!1)?e?.buyFungible:void 0)??r;return a?li(t,V(a))??a:void 0},[j,e,A,t])};n();s();var pF=v(x());var U6=()=>{let j=ps(),A=sr(),{pairs:e}=le(),{assets:t}=Hr({enablePrices:!1,enableSorting:!1}),{fungibles:r}=he();return(0,pF.useMemo)(()=>{let o=sF(r,j,A),i=e?V(e?.sellFungible):void 0,a=e?V(e?.buyFungible):void 0;return((i?j.includes(i.chainId):!1)&&i&&a?L6(i,a,t):void 0)??o},[j,e,t,A,r])};var uF=j=>{if(j)try{return ie(j)}catch{return}},lF=j=>$r(j)??[];function j1({paramsSellFungible:j,paramsSellAmount:A,paramsBuyFungible:e,navRef:t}){let{data:[r]}=BA(["enable-swapper-default-usdc"]),{isLoading:o}=le(),i=(0,de.useMemo)(()=>uF(j),[j]),a=(0,de.useMemo)(()=>uF(e),[e]),c=A,[p,d]=(0,de.useState)(!1),[m,B]=(0,de.useState)(!1),{data:f}=FA(),{assets:k,isLoading:E}=Hr({enablePrices:!1,enableSorting:!1}),{data:g,isPending:y}=Cr({query:a?.resourceType==="address"?a.address:a?.slip44??"",enableQuery:!!a,networkIds:[a?.chainId??$.solana.mainnetID],searchContext:"swapper"}),F=(0,de.useMemo)(()=>{let L=[];return i&&L.push(...lF(i)),a&&L.push(...lF(a)),L},[i,a]),{fungibles:S,isLoadingTokens:I,isRefetchingTokens:O,tokensError:M}=he({keys:F,enablePrices:!1,enableSorting:!1}),P=U6(),X=w(L=>L.sellFungible),_=cF(X),h=w(L=>L.setBuyFungible),q=w(L=>L.setSellFungible),C=w(L=>L.setUiSellAmountCryptoInput),R=w(L=>L.setSellAmount),K=w(L=>L.setSwapFilter);return(0,de.useEffect)(()=>{q(void 0),d(!1),h(void 0),B(!1)},[i,a,q,h,f?.identifier,o,t]),(0,de.useEffect)(()=>{if(p)return;let L;if(i){if(E)return;L=L6(i,a,k)}else!i&&a?L=Z7(a):L=P;d(!0),q(L)},[i,a,P,k,q,E,p]),(0,de.useEffect)(()=>{if(m)return;let L;if(a){if(y)return;if(L=li(g??[],a),!L){let{usdcFungible:H,nativeFungible:U}=JA.get(a.chainId);L=uj(st(a))?U:H}}else!a&&i?L=Z7(i,r):L=_;if(!I&&!O&&!M&&S&&L){let H=J(V(L)),U=S.find(N=>J(V(N))===H);U&&(L=U)}B(!0),h(L)},[a,i,g,y,h,m,_,S,I,O,M,r]),(0,de.useEffect)(()=>{c?(R(c),C(c)):(R(""),C("")),K(void 0)},[c,t,C,R,K]),{isLoading:(!!i||!!a)&&(!m||!p)||o}}n();s();var Je=v(x()),gF=v(In());n();s();var mF=({sellToken:j,buyToken:A,taker:e,takerDestination:t,amount:r,slippageTolerance:o,pollInterval:i,pollerState:a,enableAutoSlippage:c,priorityFee:p,tipAmount:d,getSwapQuotesStrategy:m})=>{let B=W(),f=j?V(j):void 0,k=A?V(A):void 0,E=j?zB(j,r.value).toString():r.value,g=!!r.value&&!!A&&!!j&&!!e&&a==="resumed";g||m.stopFetching();let y=hA.quotes({sellTokenCaip19:f,buyTokenCaip19:k,taker:e,amountValue:E,amountType:r.type,takerDestination:t,slippageTolerance:o,enableAutoSlippage:c,priorityFee:p,tipAmount:d}),F=m.getFetchInterval(i);return tA({queryKey:y,enabled:g,gcTime:0,staleTime:0,refetchInterval:F,async queryFn({signal:S}){if(!r||!k||!f||!A||!j||!e)throw new Error("missing necessary args");let I=await m.fetch({sellTokenCaip19:f,buyTokenCaip19:k,taker:e,takerDestination:t,sellAmount:E,exactOut:r.type==="buy",slippageTolerance:o,signal:S,enableAutoSlippage:c,priorityFee:p,tipAmount:d,sell:j,buy:A,amount:{value:E,type:r.type},sellAmountUsd:T(E).times(j.data.price??0).toString()},y);return B.capture("swapperQuotesResult",{data:{numQuotes:I.quotes.length,sellToken:j,buyToken:A,fromNetworkId:f.chainId,toNetworkId:k.chainId}}),I}})};n();s();var BF=v(x());var kF=()=>{let j=w(r=>r.sellAmount),A=w(r=>r.sellFungible),e=w(r=>r.buyFungible),t=w(r=>r.setSelectedBaseProvider);(0,BF.useEffect)(()=>{t(Xj)},[j,A,e,t])};n();s();var HA=(j,A)=>!!j&&!!A&&$.compareNetworkID(j,A)!==0;n();s();var vn=()=>{let j=w(m=>m.sellFungible),A=w(m=>m.buyFungible),e=w(m=>m.sellAmount),t=j?V(j):null,{data:r}=$j({query:t?{data:t}:void 0}),o=j?.data.chain.id,i=A?.data.chain.id,a=r?.usd;if(!o||!i||!e||!a||$.compareNetworkID(o,i)===0)return!0;let c=Aj(Number(e),a),p=JA.get(o).bridgeMinimumUsdAmounts,d=JA.get(i).bridgeMinimumUsdAmounts;return p<=c&&d<=c};n();s();var ze=()=>aj({key:"priorityFee",queryKey:hA.priorityFee()}),fF=()=>mj({key:"priorityFee",queryKey:hA.priorityFee()});n();s();var cr=()=>aj({key:"slippageTolerance",queryKey:hA.slippageTolerance()}),Q6=()=>mj({key:"slippageTolerance",queryKey:hA.slippageTolerance()});n();s();var We=()=>aj({key:"tipAmount",queryKey:hA.tipAmount()}),EF=()=>mj({key:"tipAmount",queryKey:hA.tipAmount()});function t1({skipInitialBuyFungible:j,getSwapQuotesStrategy:A}){let e=w(N=>N.sellAmount),t=w(N=>N.amountType),o=w(N=>N.buyFungible)??(j?void 0:Js),i=w(N=>N.sellFungible),{data:a}=ze(),{data:c}=We(),{state:p,intervalMs:d}=Ie(),m=w(N=>N.resetQuote),B=w(N=>N.setHasNoRoutes),f=w(N=>N.setError),k=w(N=>N.setIsFetchingQuote),E=w(N=>N.setQuoteResponse),g=w(N=>N.setSelectedProviderIndex),{data:[y]}=BA(["enable-auto-slippage"]),{data:F}=cr(),{mutateAsync:S}=Q6(),{selectedSetting:I}=XA(),O=y&&I.type==="auto",M=vn(),P=(0,gF.default)(M),X=(0,Je.useMemo)(()=>{let N=t==="sell"?{amount:e,fungible:i}:{amount:e,fungible:o};return new Y(N.amount).isGreaterThan(0)&&N.fungible?Tm(N.amount,N.fungible.data.decimals).toString():(m(),"")},[t,o,m,e,i]),_=HA(i?.data?.chain.id,o?.data.chain.id),{data:h}=wr(i?.data?.chain.id),{data:q}=wr(o?.data.chain.id),C=(0,Je.useMemo)(()=>{if(h)return{chainId:h.networkID,address:h.address,resourceType:"address"}},[h]),R=(0,Je.useMemo)(()=>{if(_)return{chainId:q?.networkID,address:q?.address,resourceType:"address"}},[_,q?.address,q?.networkID]),{data:K,error:D,isLoading:L}=mF({sellToken:i,buyToken:o,taker:C,takerDestination:R,amount:{value:M?X:"",type:t},slippageTolerance:O?void 0:F??void 0,enableAutoSlippage:O,priorityFee:a??void 0,tipAmount:c??void 0,pollInterval:d,pollerState:p,getSwapQuotesStrategy:A}),H=(0,Je.useCallback)(N=>{f(null),g(0),k(!1),B(!1),E(N);let SA=ar(0,I.type,N);SA&&F!==SA&&S(SA)},[f,B,k,E,g,S,F,I.type]),U=(0,Je.useCallback)(N=>{m(),k(!1),B(!0),f(N)},[m,f,B,k]);(0,Je.useEffect)(()=>{p!=="paused"&&(L?k(!0):K?H(K):D&&U(D))},[D,K,L,H,U,k,p,M]),(0,Je.useEffect)(()=>{M?P===!1&&M&&(f(null),B(!1)):(f(new QA({key:"InsufficientSellAmount"})),B(!0))},[M,P,f,B]),kF()}n();s();var V6=v(x());n();s();n();s();var me=j=>{let A=Math.floor(j/3600),e=Math.floor((j-A*3600)/60),t=j%60;if(A>0)return G.t("swapProviderEstimatedTimeHM",{hours:A,minutes:e});if(e>0){let r=t>0?e+1:e;return G.t("swapProviderEstimatedTimeM",{minutes:r})}return G.t("swapProviderEstimatedTimeS",{seconds:t})};n();s();var H6=j=>j.steps.reduce((A,e)=>A.plus(new Y(e.nonIncludedNonGasFees)),new Y(0)),di=j=>j.steps.flatMap(t=>t.feeCosts).reduce((t,r)=>t.plus(r.amountUSD??0),new Y(0));n();s();function Jj(j,A,e){if(A.lte(0))return null;let t=J({chainId:j,resourceType:"nativeToken",slip44:$.getSlip44(j)}),r=$.getTokenDecimals(j),o=$.getTokenSymbol(j);if(!t||!r||!o)return null;let i=A.div(is(r)),a=e[t];return a?.usd?i.times(a.usd).toNumber():null}var r1=5*60,yF=j=>{if(yA(j))return KA(wn(j));let{sources:A}=j;return KA(A)},FF=({quotes:j,buyTokenNetworkId:A,buyTokenDecimals:e,buyTokenSymbol:t})=>j.map(r=>{let{buyAmount:o}=r,i=Me.get(A).formDisplayPrecision;return{name:yF(r),amount:`${Uj(wA(o,e),i)} ${t}`}}),hF=({quotes:j,buyTokenNetworkId:A,buyTokenDecimals:e,buyTokenSymbol:t,networkIDForFees:r,networkFee:o,priceMap:i})=>j.filter(yA).map(a=>{let{buyAmount:c,executionDuration:p,steps:d}=a,B=H6(a).plus(o),f=d.find(E=>!!E.tool.logoURI),k=Me.get(A).formDisplayPrecision;return{name:yF(a),feeUsd:r&&i?Jj(r,B,i):null,amount:`${Uj(wA(c,e),k)} ${t}`,time:{text:me(p),isFast:p<=r1},logoURI:f?.tool.logoURI??""}});n();s();var o1={aggregate(j){return j.reduce((A,e)=>({...A,gasLimit:A.gasLimit.plus(e.gasLimit)}),{networkID:$.ethereum.mainnetID,gasLimit:new Y(0),maxFeePerGas:j[0].maxFeePerGas,maxPriorityFeePerGas:j[0].maxPriorityFeePerGas})}},n1={aggregate(j){return j.reduce((A,e)=>({...A,value:A.value+e.value}),{networkID:$.solana.mainnetID,value:0})}},s1={aggregate(j){return j.reduce((A,e)=>({...A,gasBudget:A.gasBudget.plus(e.gasBudget)}),{networkID:$.sui.mainnetID,gasBudget:new Y(0)})}},mi=j=>{if(!(!j||j.length===0)){if(ja(j[0]))return o1.aggregate(j);if(FB(j[0]))return n1.aggregate(j);if(hB(j[0]))return s1.aggregate(j)}};function i1({selectQuote:j}){let{quoteResponse:A,isFetchingQuote:e,quotes:t,selectedProviderIndex:r}=aA(),o=w(S=>S.setSelectedProviderIndex),i=w(S=>S.gasEstimation.estimateWithBuffer),a=w(S=>S.sellFungible),c=w(S=>S.buyFungible),p=a?.data.chain.id,{data:d}=ds(p,mi(i)),B=nr().map(S=>_j(S)),{data:f={}}=nt({query:{data:B}}),k=A?.type==="xchain",E=(0,V6.useMemo)(()=>c?k?hF({quotes:t,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol,networkIDForFees:p,networkFee:d?.gasEstimationAmount??new Y(0),priceMap:f}):FF({quotes:t,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol}):[],[c,k,t,p,d?.gasEstimationAmount,f]),g=W(),{transition:y}=wt(),F=(0,V6.useCallback)(S=>{let I=E[S];g.capture("swapperProviderSelected",{data:{provider:I.name}}),o(S),j(t,S),y({type:"quoteSelected",quoteIndex:S})},[o,E,g,y,t,j]);return{rows:E,selectedProviderIndex:r,isLoadingProviders:e,setSelectedProviderIndex:F}}n();s();var SF=v(x());var It=()=>{let{resume:j}=Ie(),A=w(e=>e.resetSwapper);return(0,SF.useCallback)(()=>{j(),A()},[A,j])};n();s();var ao=v(x());n();s();var IA;(function(j){j.assertEqual=r=>r;function A(r){}j.assertIs=A;function e(r){throw new Error}j.assertNever=e,j.arrayToEnum=r=>{let o={};for(let i of r)o[i]=i;return o},j.getValidEnumValues=r=>{let o=j.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),i={};for(let a of o)i[a]=r[a];return j.objectValues(i)},j.objectValues=r=>j.objectKeys(r).map(function(o){return r[o]}),j.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let o=[];for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&o.push(i);return o},j.find=(r,o)=>{for(let i of r)if(o(i))return i},j.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function t(r,o=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}j.joinValues=t,j.jsonStringifyReplacer=(r,o)=>typeof o=="bigint"?o.toString():o})(IA||(IA={}));var td;(function(j){j.mergeShapes=(A,e)=>({...A,...e})})(td||(td={}));var jA=IA.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bt=j=>{switch(typeof j){case"undefined":return jA.undefined;case"string":return jA.string;case"number":return isNaN(j)?jA.nan:jA.number;case"boolean":return jA.boolean;case"function":return jA.function;case"bigint":return jA.bigint;case"symbol":return jA.symbol;case"object":return Array.isArray(j)?jA.array:j===null?jA.null:j.then&&typeof j.then=="function"&&j.catch&&typeof j.catch=="function"?jA.promise:typeof Map<"u"&&j instanceof Map?jA.map:typeof Set<"u"&&j instanceof Set?jA.set:typeof Date<"u"&&j instanceof Date?jA.date:jA.object;default:return jA.unknown}},Q=IA.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),a1=j=>JSON.stringify(j,null,2).replace(/"([^"]+)":/g,"$1:"),Yj=class j extends Error{get errors(){return this.issues}constructor(A){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};let e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=A}format(A){let e=A||function(o){return o.message},t={_errors:[]},r=o=>{for(let i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)t._errors.push(e(i));else{let a=t,c=0;for(;c<i.path.length;){let p=i.path[c];c===i.path.length-1?(a[p]=a[p]||{_errors:[]},a[p]._errors.push(e(i))):a[p]=a[p]||{_errors:[]},a=a[p],c++}}};return r(this),t}static assert(A){if(!(A instanceof j))throw new Error(`Not a ZodError: ${A}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,IA.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(A=e=>e.message){let e={},t=[];for(let r of this.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(A(r))):t.push(A(r));return{formErrors:t,fieldErrors:e}}get formErrors(){return this.flatten()}};Yj.create=j=>new Yj(j);var xn=(j,A)=>{let e;switch(j.code){case Q.invalid_type:j.received===jA.undefined?e="Required":e=`Expected ${j.expected}, received ${j.received}`;break;case Q.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(j.expected,IA.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:e=`Unrecognized key(s) in object: ${IA.joinValues(j.keys,", ")}`;break;case Q.invalid_union:e="Invalid input";break;case Q.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${IA.joinValues(j.options)}`;break;case Q.invalid_enum_value:e=`Invalid enum value. Expected ${IA.joinValues(j.options)}, received '${j.received}'`;break;case Q.invalid_arguments:e="Invalid function arguments";break;case Q.invalid_return_type:e="Invalid function return type";break;case Q.invalid_date:e="Invalid date";break;case Q.invalid_string:typeof j.validation=="object"?"includes"in j.validation?(e=`Invalid input: must include "${j.validation.includes}"`,typeof j.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${j.validation.position}`)):"startsWith"in j.validation?e=`Invalid input: must start with "${j.validation.startsWith}"`:"endsWith"in j.validation?e=`Invalid input: must end with "${j.validation.endsWith}"`:IA.assertNever(j.validation):j.validation!=="regex"?e=`Invalid ${j.validation}`:e="Invalid";break;case Q.too_small:j.type==="array"?e=`Array must contain ${j.exact?"exactly":j.inclusive?"at least":"more than"} ${j.minimum} element(s)`:j.type==="string"?e=`String must contain ${j.exact?"exactly":j.inclusive?"at least":"over"} ${j.minimum} character(s)`:j.type==="number"?e=`Number must be ${j.exact?"exactly equal to ":j.inclusive?"greater than or equal to ":"greater than "}${j.minimum}`:j.type==="date"?e=`Date must be ${j.exact?"exactly equal to ":j.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(j.minimum))}`:e="Invalid input";break;case Q.too_big:j.type==="array"?e=`Array must contain ${j.exact?"exactly":j.inclusive?"at most":"less than"} ${j.maximum} element(s)`:j.type==="string"?e=`String must contain ${j.exact?"exactly":j.inclusive?"at most":"under"} ${j.maximum} character(s)`:j.type==="number"?e=`Number must be ${j.exact?"exactly":j.inclusive?"less than or equal to":"less than"} ${j.maximum}`:j.type==="bigint"?e=`BigInt must be ${j.exact?"exactly":j.inclusive?"less than or equal to":"less than"} ${j.maximum}`:j.type==="date"?e=`Date must be ${j.exact?"exactly":j.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(j.maximum))}`:e="Invalid input";break;case Q.custom:e="Invalid input";break;case Q.invalid_intersection_types:e="Intersection results could not be merged";break;case Q.not_multiple_of:e=`Number must be a multiple of ${j.multipleOf}`;break;case Q.not_finite:e="Number must be finite";break;default:e=A.defaultError,IA.assertNever(j)}return{message:e}},vF=xn;function c1(j){vF=j}function X6(){return vF}var z6=j=>{let{data:A,path:e,errorMaps:t,issueData:r}=j,o=[...e,...r.path||[]],i={...r,path:o};if(r.message!==void 0)return{...r,path:o,message:r.message};let a="",c=t.filter(p=>!!p).slice().reverse();for(let p of c)a=p(i,{data:A,defaultError:a}).message;return{...r,path:o,message:a}},p1=[];function Z(j,A){let e=X6(),t=z6({issueData:A,data:j.data,path:j.path,errorMaps:[j.common.contextualErrorMap,j.schemaErrorMap,e,e===xn?void 0:xn].filter(r=>!!r)});j.common.issues.push(t)}var vj=class j{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(A,e){let t=[];for(let r of e){if(r.status==="aborted")return pA;r.status==="dirty"&&A.dirty(),t.push(r.value)}return{status:A.value,value:t}}static async mergeObjectAsync(A,e){let t=[];for(let r of e){let o=await r.key,i=await r.value;t.push({key:o,value:i})}return j.mergeObjectSync(A,t)}static mergeObjectSync(A,e){let t={};for(let r of e){let{key:o,value:i}=r;if(o.status==="aborted"||i.status==="aborted")return pA;o.status==="dirty"&&A.dirty(),i.status==="dirty"&&A.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(t[o.value]=i.value)}return{status:A.value,value:t}}},pA=Object.freeze({status:"aborted"}),qn=j=>({status:"dirty",value:j}),xj=j=>({status:"valid",value:j}),rd=j=>j.status==="aborted",od=j=>j.status==="dirty",Vr=j=>j.status==="valid",fi=j=>typeof Promise<"u"&&j instanceof Promise;function W6(j,A,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof A=="function"?j!==A||!t:!A.has(j))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(j):t?t.value:A.get(j)}function bF(j,A,e,t,r){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof A=="function"?j!==A||!r:!A.has(j))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?r.call(j,e):r?r.value=e:A.set(j,e),e}var oA;(function(j){j.errToObj=A=>typeof A=="string"?{message:A}:A||{},j.toString=A=>typeof A=="string"?A:A?.message})(oA||(oA={}));var Bi,ki,ke=class{constructor(A,e,t,r){this._cachedPath=[],this.parent=A,this.data=e,this._path=t,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},wF=(j,A)=>{if(Vr(A))return{success:!0,data:A.value};if(!j.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let e=new Yj(j.common.issues);return this._error=e,this._error}}};function fA(j){if(!j)return{};let{errorMap:A,invalid_type_error:e,required_error:t,description:r}=j;if(A&&(e||t))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return A?{errorMap:A,description:r}:{errorMap:(i,a)=>{var c,p;let{message:d}=j;return i.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(c=d??t)!==null&&c!==void 0?c:a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:(p=d??e)!==null&&p!==void 0?p:a.defaultError}},description:r}}var EA=class{get description(){return this._def.description}_getType(A){return bt(A.data)}_getOrReturnCtx(A,e){return e||{common:A.parent.common,data:A.data,parsedType:bt(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}_processInputParams(A){return{status:new vj,ctx:{common:A.parent.common,data:A.data,parsedType:bt(A.data),schemaErrorMap:this._def.errorMap,path:A.path,parent:A.parent}}}_parseSync(A){let e=this._parse(A);if(fi(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(A){let e=this._parse(A);return Promise.resolve(e)}parse(A,e){let t=this.safeParse(A,e);if(t.success)return t.data;throw t.error}safeParse(A,e){var t;let r={common:{issues:[],async:(t=e?.async)!==null&&t!==void 0?t:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:bt(A)},o=this._parseSync({data:A,path:r.path,parent:r});return wF(r,o)}"~validate"(A){var e,t;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:bt(A)};if(!this["~standard"].async)try{let o=this._parseSync({data:A,path:[],parent:r});return Vr(o)?{value:o.value}:{issues:r.common.issues}}catch(o){!((t=(e=o?.message)===null||e===void 0?void 0:e.toLowerCase())===null||t===void 0)&&t.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:A,path:[],parent:r}).then(o=>Vr(o)?{value:o.value}:{issues:r.common.issues})}async parseAsync(A,e){let t=await this.safeParseAsync(A,e);if(t.success)return t.data;throw t.error}async safeParseAsync(A,e){let t={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:A,parsedType:bt(A)},r=this._parse({data:A,path:t.path,parent:t}),o=await(fi(r)?r:Promise.resolve(r));return wF(t,o)}refine(A,e){let t=r=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(r):e;return this._refinement((r,o)=>{let i=A(r),a=()=>o.addIssue({code:Q.custom,...t(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(A,e){return this._refinement((t,r)=>A(t)?!0:(r.addIssue(typeof e=="function"?e(t,r):e),!1))}_refinement(A){return new Zj({schema:this,typeName:cA.ZodEffects,effect:{type:"refinement",refinement:A}})}superRefine(A){return this._refinement(A)}constructor(A){this.spa=this.safeParseAsync,this._def=A,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Be.create(this,this._def)}nullable(){return Ze.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xt.create(this)}promise(){return lr.create(this,this._def)}or(A){return Ao.create([this,A],this._def)}and(A){return jo.create(this,A,this._def)}transform(A){return new Zj({...fA(this._def),schema:this,typeName:cA.ZodEffects,effect:{type:"transform",transform:A}})}default(A){let e=typeof A=="function"?A:()=>A;return new no({...fA(this._def),innerType:this,defaultValue:e,typeName:cA.ZodDefault})}brand(){return new Ei({typeName:cA.ZodBranded,type:this,...fA(this._def)})}catch(A){let e=typeof A=="function"?A:()=>A;return new so({...fA(this._def),innerType:this,catchValue:e,typeName:cA.ZodCatch})}describe(A){let e=this.constructor;return new e({...this._def,description:A})}pipe(A){return gi.create(this,A)}readonly(){return io.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},u1=/^c[^\s-]{8,}$/i,l1=/^[0-9a-z]+$/,d1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,m1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,B1=/^[a-z0-9_-]{21}$/i,k1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,f1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,E1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,g1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ed,y1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,F1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,h1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,S1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,w1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,$1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",I1=new RegExp(`^${qF}$`);function xF(j){let A="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return j.precision?A=`${A}\\.\\d{${j.precision}}`:j.precision==null&&(A=`${A}(\\.\\d+)?`),A}function v1(j){return new RegExp(`^${xF(j)}$`)}function GF(j){let A=`${qF}T${xF(j)}`,e=[];return e.push(j.local?"Z?":"Z"),j.offset&&e.push("([+-]\\d{2}:?\\d{2})"),A=`${A}(${e.join("|")})`,new RegExp(`^${A}$`)}function b1(j,A){return!!((A==="v4"||!A)&&y1.test(j)||(A==="v6"||!A)&&h1.test(j))}function q1(j,A){if(!k1.test(j))return!1;try{let[e]=j.split("."),t=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"="),r=JSON.parse(atob(t));return!(typeof r!="object"||r===null||!r.typ||!r.alg||A&&r.alg!==A)}catch{return!1}}function x1(j,A){return!!((A==="v4"||!A)&&F1.test(j)||(A==="v6"||!A)&&S1.test(j))}var pr=class j extends EA{_parse(A){if(this._def.coerce&&(A.data=String(A.data)),this._getType(A)!==jA.string){let o=this._getOrReturnCtx(A);return Z(o,{code:Q.invalid_type,expected:jA.string,received:o.parsedType}),pA}let t=new vj,r;for(let o of this._def.checks)if(o.kind==="min")A.data.length<o.value&&(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="max")A.data.length>o.value&&(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if(o.kind==="length"){let i=A.data.length>o.value,a=A.data.length<o.value;(i||a)&&(r=this._getOrReturnCtx(A,r),i?Z(r,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&Z(r,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if(o.kind==="email")E1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"email",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="emoji")ed||(ed=new RegExp(g1,"u")),ed.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"emoji",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="uuid")m1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"uuid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="nanoid")B1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"nanoid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid")u1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"cuid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="cuid2")l1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"cuid2",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="ulid")d1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"ulid",code:Q.invalid_string,message:o.message}),t.dirty());else if(o.kind==="url")try{new URL(A.data)}catch{r=this._getOrReturnCtx(A,r),Z(r,{validation:"url",code:Q.invalid_string,message:o.message}),t.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"regex",code:Q.invalid_string,message:o.message}),t.dirty())):o.kind==="trim"?A.data=A.data.trim():o.kind==="includes"?A.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty()):o.kind==="toLowerCase"?A.data=A.data.toLowerCase():o.kind==="toUpperCase"?A.data=A.data.toUpperCase():o.kind==="startsWith"?A.data.startsWith(o.value)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):o.kind==="endsWith"?A.data.endsWith(o.value)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):o.kind==="datetime"?GF(o).test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:"datetime",message:o.message}),t.dirty()):o.kind==="date"?I1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:"date",message:o.message}),t.dirty()):o.kind==="time"?v1(o).test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.invalid_string,validation:"time",message:o.message}),t.dirty()):o.kind==="duration"?f1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"duration",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="ip"?b1(A.data,o.version)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"ip",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="jwt"?q1(A.data,o.alg)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"jwt",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="cidr"?x1(A.data,o.version)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"cidr",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="base64"?w1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"base64",code:Q.invalid_string,message:o.message}),t.dirty()):o.kind==="base64url"?$1.test(A.data)||(r=this._getOrReturnCtx(A,r),Z(r,{validation:"base64url",code:Q.invalid_string,message:o.message}),t.dirty()):IA.assertNever(o);return{status:t.value,value:A.data}}_regex(A,e,t){return this.refinement(r=>A.test(r),{validation:e,code:Q.invalid_string,...oA.errToObj(t)})}_addCheck(A){return new j({...this._def,checks:[...this._def.checks,A]})}email(A){return this._addCheck({kind:"email",...oA.errToObj(A)})}url(A){return this._addCheck({kind:"url",...oA.errToObj(A)})}emoji(A){return this._addCheck({kind:"emoji",...oA.errToObj(A)})}uuid(A){return this._addCheck({kind:"uuid",...oA.errToObj(A)})}nanoid(A){return this._addCheck({kind:"nanoid",...oA.errToObj(A)})}cuid(A){return this._addCheck({kind:"cuid",...oA.errToObj(A)})}cuid2(A){return this._addCheck({kind:"cuid2",...oA.errToObj(A)})}ulid(A){return this._addCheck({kind:"ulid",...oA.errToObj(A)})}base64(A){return this._addCheck({kind:"base64",...oA.errToObj(A)})}base64url(A){return this._addCheck({kind:"base64url",...oA.errToObj(A)})}jwt(A){return this._addCheck({kind:"jwt",...oA.errToObj(A)})}ip(A){return this._addCheck({kind:"ip",...oA.errToObj(A)})}cidr(A){return this._addCheck({kind:"cidr",...oA.errToObj(A)})}datetime(A){var e,t;return typeof A=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:A}):this._addCheck({kind:"datetime",precision:typeof A?.precision>"u"?null:A?.precision,offset:(e=A?.offset)!==null&&e!==void 0?e:!1,local:(t=A?.local)!==null&&t!==void 0?t:!1,...oA.errToObj(A?.message)})}date(A){return this._addCheck({kind:"date",message:A})}time(A){return typeof A=="string"?this._addCheck({kind:"time",precision:null,message:A}):this._addCheck({kind:"time",precision:typeof A?.precision>"u"?null:A?.precision,...oA.errToObj(A?.message)})}duration(A){return this._addCheck({kind:"duration",...oA.errToObj(A)})}regex(A,e){return this._addCheck({kind:"regex",regex:A,...oA.errToObj(e)})}includes(A,e){return this._addCheck({kind:"includes",value:A,position:e?.position,...oA.errToObj(e?.message)})}startsWith(A,e){return this._addCheck({kind:"startsWith",value:A,...oA.errToObj(e)})}endsWith(A,e){return this._addCheck({kind:"endsWith",value:A,...oA.errToObj(e)})}min(A,e){return this._addCheck({kind:"min",value:A,...oA.errToObj(e)})}max(A,e){return this._addCheck({kind:"max",value:A,...oA.errToObj(e)})}length(A,e){return this._addCheck({kind:"length",value:A,...oA.errToObj(e)})}nonempty(A){return this.min(1,oA.errToObj(A))}trim(){return new j({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(A=>A.kind==="datetime")}get isDate(){return!!this._def.checks.find(A=>A.kind==="date")}get isTime(){return!!this._def.checks.find(A=>A.kind==="time")}get isDuration(){return!!this._def.checks.find(A=>A.kind==="duration")}get isEmail(){return!!this._def.checks.find(A=>A.kind==="email")}get isURL(){return!!this._def.checks.find(A=>A.kind==="url")}get isEmoji(){return!!this._def.checks.find(A=>A.kind==="emoji")}get isUUID(){return!!this._def.checks.find(A=>A.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(A=>A.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(A=>A.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(A=>A.kind==="cuid2")}get isULID(){return!!this._def.checks.find(A=>A.kind==="ulid")}get isIP(){return!!this._def.checks.find(A=>A.kind==="ip")}get isCIDR(){return!!this._def.checks.find(A=>A.kind==="cidr")}get isBase64(){return!!this._def.checks.find(A=>A.kind==="base64")}get isBase64url(){return!!this._def.checks.find(A=>A.kind==="base64url")}get minLength(){let A=null;for(let e of this._def.checks)e.kind==="min"&&(A===null||e.value>A)&&(A=e.value);return A}get maxLength(){let A=null;for(let e of this._def.checks)e.kind==="max"&&(A===null||e.value<A)&&(A=e.value);return A}};pr.create=j=>{var A;return new pr({checks:[],typeName:cA.ZodString,coerce:(A=j?.coerce)!==null&&A!==void 0?A:!1,...fA(j)})};function G1(j,A){let e=(j.toString().split(".")[1]||"").length,t=(A.toString().split(".")[1]||"").length,r=e>t?e:t,o=parseInt(j.toFixed(r).replace(".","")),i=parseInt(A.toFixed(r).replace(".",""));return o%i/Math.pow(10,r)}var Xr=class j extends EA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(A){if(this._def.coerce&&(A.data=Number(A.data)),this._getType(A)!==jA.number){let o=this._getOrReturnCtx(A);return Z(o,{code:Q.invalid_type,expected:jA.number,received:o.parsedType}),pA}let t,r=new vj;for(let o of this._def.checks)o.kind==="int"?IA.isInteger(A.data)||(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):o.kind==="min"?(o.inclusive?A.data<o.value:A.data<=o.value)&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?A.data>o.value:A.data>=o.value)&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="multipleOf"?G1(A.data,o.value)!==0&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):o.kind==="finite"?Number.isFinite(A.data)||(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.not_finite,message:o.message}),r.dirty()):IA.assertNever(o);return{status:r.value,value:A.data}}gte(A,e){return this.setLimit("min",A,!0,oA.toString(e))}gt(A,e){return this.setLimit("min",A,!1,oA.toString(e))}lte(A,e){return this.setLimit("max",A,!0,oA.toString(e))}lt(A,e){return this.setLimit("max",A,!1,oA.toString(e))}setLimit(A,e,t,r){return new j({...this._def,checks:[...this._def.checks,{kind:A,value:e,inclusive:t,message:oA.toString(r)}]})}_addCheck(A){return new j({...this._def,checks:[...this._def.checks,A]})}int(A){return this._addCheck({kind:"int",message:oA.toString(A)})}positive(A){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oA.toString(A)})}negative(A){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oA.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oA.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oA.toString(A)})}multipleOf(A,e){return this._addCheck({kind:"multipleOf",value:A,message:oA.toString(e)})}finite(A){return this._addCheck({kind:"finite",message:oA.toString(A)})}safe(A){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oA.toString(A)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oA.toString(A)})}get minValue(){let A=null;for(let e of this._def.checks)e.kind==="min"&&(A===null||e.value>A)&&(A=e.value);return A}get maxValue(){let A=null;for(let e of this._def.checks)e.kind==="max"&&(A===null||e.value<A)&&(A=e.value);return A}get isInt(){return!!this._def.checks.find(A=>A.kind==="int"||A.kind==="multipleOf"&&IA.isInteger(A.value))}get isFinite(){let A=null,e=null;for(let t of this._def.checks){if(t.kind==="finite"||t.kind==="int"||t.kind==="multipleOf")return!0;t.kind==="min"?(e===null||t.value>e)&&(e=t.value):t.kind==="max"&&(A===null||t.value<A)&&(A=t.value)}return Number.isFinite(e)&&Number.isFinite(A)}};Xr.create=j=>new Xr({checks:[],typeName:cA.ZodNumber,coerce:j?.coerce||!1,...fA(j)});var zr=class j extends EA{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(A){if(this._def.coerce)try{A.data=BigInt(A.data)}catch{return this._getInvalidInput(A)}if(this._getType(A)!==jA.bigint)return this._getInvalidInput(A);let t,r=new vj;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?A.data<o.value:A.data<=o.value)&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?A.data>o.value:A.data>=o.value)&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="multipleOf"?A.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(A,t),Z(t,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):IA.assertNever(o);return{status:r.value,value:A.data}}_getInvalidInput(A){let e=this._getOrReturnCtx(A);return Z(e,{code:Q.invalid_type,expected:jA.bigint,received:e.parsedType}),pA}gte(A,e){return this.setLimit("min",A,!0,oA.toString(e))}gt(A,e){return this.setLimit("min",A,!1,oA.toString(e))}lte(A,e){return this.setLimit("max",A,!0,oA.toString(e))}lt(A,e){return this.setLimit("max",A,!1,oA.toString(e))}setLimit(A,e,t,r){return new j({...this._def,checks:[...this._def.checks,{kind:A,value:e,inclusive:t,message:oA.toString(r)}]})}_addCheck(A){return new j({...this._def,checks:[...this._def.checks,A]})}positive(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oA.toString(A)})}negative(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oA.toString(A)})}nonpositive(A){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oA.toString(A)})}nonnegative(A){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oA.toString(A)})}multipleOf(A,e){return this._addCheck({kind:"multipleOf",value:A,message:oA.toString(e)})}get minValue(){let A=null;for(let e of this._def.checks)e.kind==="min"&&(A===null||e.value>A)&&(A=e.value);return A}get maxValue(){let A=null;for(let e of this._def.checks)e.kind==="max"&&(A===null||e.value<A)&&(A=e.value);return A}};zr.create=j=>{var A;return new zr({checks:[],typeName:cA.ZodBigInt,coerce:(A=j?.coerce)!==null&&A!==void 0?A:!1,...fA(j)})};var Wr=class extends EA{_parse(A){if(this._def.coerce&&(A.data=!!A.data),this._getType(A)!==jA.boolean){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.boolean,received:t.parsedType}),pA}return xj(A.data)}};Wr.create=j=>new Wr({typeName:cA.ZodBoolean,coerce:j?.coerce||!1,...fA(j)});var Jr=class j extends EA{_parse(A){if(this._def.coerce&&(A.data=new Date(A.data)),this._getType(A)!==jA.date){let o=this._getOrReturnCtx(A);return Z(o,{code:Q.invalid_type,expected:jA.date,received:o.parsedType}),pA}if(isNaN(A.data.getTime())){let o=this._getOrReturnCtx(A);return Z(o,{code:Q.invalid_date}),pA}let t=new vj,r;for(let o of this._def.checks)o.kind==="min"?A.data.getTime()<o.value&&(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),t.dirty()):o.kind==="max"?A.data.getTime()>o.value&&(r=this._getOrReturnCtx(A,r),Z(r,{code:Q.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),t.dirty()):IA.assertNever(o);return{status:t.value,value:new Date(A.data.getTime())}}_addCheck(A){return new j({...this._def,checks:[...this._def.checks,A]})}min(A,e){return this._addCheck({kind:"min",value:A.getTime(),message:oA.toString(e)})}max(A,e){return this._addCheck({kind:"max",value:A.getTime(),message:oA.toString(e)})}get minDate(){let A=null;for(let e of this._def.checks)e.kind==="min"&&(A===null||e.value>A)&&(A=e.value);return A!=null?new Date(A):null}get maxDate(){let A=null;for(let e of this._def.checks)e.kind==="max"&&(A===null||e.value<A)&&(A=e.value);return A!=null?new Date(A):null}};Jr.create=j=>new Jr({checks:[],coerce:j?.coerce||!1,typeName:cA.ZodDate,...fA(j)});var Gn=class extends EA{_parse(A){if(this._getType(A)!==jA.symbol){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.symbol,received:t.parsedType}),pA}return xj(A.data)}};Gn.create=j=>new Gn({typeName:cA.ZodSymbol,...fA(j)});var Yr=class extends EA{_parse(A){if(this._getType(A)!==jA.undefined){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.undefined,received:t.parsedType}),pA}return xj(A.data)}};Yr.create=j=>new Yr({typeName:cA.ZodUndefined,...fA(j)});var Zr=class extends EA{_parse(A){if(this._getType(A)!==jA.null){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.null,received:t.parsedType}),pA}return xj(A.data)}};Zr.create=j=>new Zr({typeName:cA.ZodNull,...fA(j)});var ur=class extends EA{constructor(){super(...arguments),this._any=!0}_parse(A){return xj(A.data)}};ur.create=j=>new ur({typeName:cA.ZodAny,...fA(j)});var qt=class extends EA{constructor(){super(...arguments),this._unknown=!0}_parse(A){return xj(A.data)}};qt.create=j=>new qt({typeName:cA.ZodUnknown,...fA(j)});var ve=class extends EA{_parse(A){let e=this._getOrReturnCtx(A);return Z(e,{code:Q.invalid_type,expected:jA.never,received:e.parsedType}),pA}};ve.create=j=>new ve({typeName:cA.ZodNever,...fA(j)});var Tn=class extends EA{_parse(A){if(this._getType(A)!==jA.undefined){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.void,received:t.parsedType}),pA}return xj(A.data)}};Tn.create=j=>new Tn({typeName:cA.ZodVoid,...fA(j)});var xt=class j extends EA{_parse(A){let{ctx:e,status:t}=this._processInputParams(A),r=this._def;if(e.parsedType!==jA.array)return Z(e,{code:Q.invalid_type,expected:jA.array,received:e.parsedType}),pA;if(r.exactLength!==null){let i=e.data.length>r.exactLength.value,a=e.data.length<r.exactLength.value;(i||a)&&(Z(e,{code:i?Q.too_big:Q.too_small,minimum:a?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),t.dirty())}if(r.minLength!==null&&e.data.length<r.minLength.value&&(Z(e,{code:Q.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),t.dirty()),r.maxLength!==null&&e.data.length>r.maxLength.value&&(Z(e,{code:Q.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),t.dirty()),e.common.async)return Promise.all([...e.data].map((i,a)=>r.type._parseAsync(new ke(e,i,e.path,a)))).then(i=>vj.mergeArray(t,i));let o=[...e.data].map((i,a)=>r.type._parseSync(new ke(e,i,e.path,a)));return vj.mergeArray(t,o)}get element(){return this._def.type}min(A,e){return new j({...this._def,minLength:{value:A,message:oA.toString(e)}})}max(A,e){return new j({...this._def,maxLength:{value:A,message:oA.toString(e)}})}length(A,e){return new j({...this._def,exactLength:{value:A,message:oA.toString(e)}})}nonempty(A){return this.min(1,A)}};xt.create=(j,A)=>new xt({type:j,minLength:null,maxLength:null,exactLength:null,typeName:cA.ZodArray,...fA(A)});function bn(j){if(j instanceof Dj){let A={};for(let e in j.shape){let t=j.shape[e];A[e]=Be.create(bn(t))}return new Dj({...j._def,shape:()=>A})}else return j instanceof xt?new xt({...j._def,type:bn(j.element)}):j instanceof Be?Be.create(bn(j.unwrap())):j instanceof Ze?Ze.create(bn(j.unwrap())):j instanceof Ye?Ye.create(j.items.map(A=>bn(A))):j}var Dj=class j extends EA{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let A=this._def.shape(),e=IA.objectKeys(A);return this._cached={shape:A,keys:e}}_parse(A){if(this._getType(A)!==jA.object){let p=this._getOrReturnCtx(A);return Z(p,{code:Q.invalid_type,expected:jA.object,received:p.parsedType}),pA}let{status:t,ctx:r}=this._processInputParams(A),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof ve&&this._def.unknownKeys==="strip"))for(let p in r.data)i.includes(p)||a.push(p);let c=[];for(let p of i){let d=o[p],m=r.data[p];c.push({key:{status:"valid",value:p},value:d._parse(new ke(r,m,r.path,p)),alwaysSet:p in r.data})}if(this._def.catchall instanceof ve){let p=this._def.unknownKeys;if(p==="passthrough")for(let d of a)c.push({key:{status:"valid",value:d},value:{status:"valid",value:r.data[d]}});else if(p==="strict")a.length>0&&(Z(r,{code:Q.unrecognized_keys,keys:a}),t.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let d of a){let m=r.data[d];c.push({key:{status:"valid",value:d},value:p._parse(new ke(r,m,r.path,d)),alwaysSet:d in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let p=[];for(let d of c){let m=await d.key,B=await d.value;p.push({key:m,value:B,alwaysSet:d.alwaysSet})}return p}).then(p=>vj.mergeObjectSync(t,p)):vj.mergeObjectSync(t,c)}get shape(){return this._def.shape()}strict(A){return oA.errToObj,new j({...this._def,unknownKeys:"strict",...A!==void 0?{errorMap:(e,t)=>{var r,o,i,a;let c=(i=(o=(r=this._def).errorMap)===null||o===void 0?void 0:o.call(r,e,t).message)!==null&&i!==void 0?i:t.defaultError;return e.code==="unrecognized_keys"?{message:(a=oA.errToObj(A).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new j({...this._def,unknownKeys:"strip"})}passthrough(){return new j({...this._def,unknownKeys:"passthrough"})}extend(A){return new j({...this._def,shape:()=>({...this._def.shape(),...A})})}merge(A){return new j({unknownKeys:A._def.unknownKeys,catchall:A._def.catchall,shape:()=>({...this._def.shape(),...A._def.shape()}),typeName:cA.ZodObject})}setKey(A,e){return this.augment({[A]:e})}catchall(A){return new j({...this._def,catchall:A})}pick(A){let e={};return IA.objectKeys(A).forEach(t=>{A[t]&&this.shape[t]&&(e[t]=this.shape[t])}),new j({...this._def,shape:()=>e})}omit(A){let e={};return IA.objectKeys(this.shape).forEach(t=>{A[t]||(e[t]=this.shape[t])}),new j({...this._def,shape:()=>e})}deepPartial(){return bn(this)}partial(A){let e={};return IA.objectKeys(this.shape).forEach(t=>{let r=this.shape[t];A&&!A[t]?e[t]=r:e[t]=r.optional()}),new j({...this._def,shape:()=>e})}required(A){let e={};return IA.objectKeys(this.shape).forEach(t=>{if(A&&!A[t])e[t]=this.shape[t];else{let o=this.shape[t];for(;o instanceof Be;)o=o._def.innerType;e[t]=o}}),new j({...this._def,shape:()=>e})}keyof(){return TF(IA.objectKeys(this.shape))}};Dj.create=(j,A)=>new Dj({shape:()=>j,unknownKeys:"strip",catchall:ve.create(),typeName:cA.ZodObject,...fA(A)});Dj.strictCreate=(j,A)=>new Dj({shape:()=>j,unknownKeys:"strict",catchall:ve.create(),typeName:cA.ZodObject,...fA(A)});Dj.lazycreate=(j,A)=>new Dj({shape:j,unknownKeys:"strip",catchall:ve.create(),typeName:cA.ZodObject,...fA(A)});var Ao=class extends EA{_parse(A){let{ctx:e}=this._processInputParams(A),t=this._def.options;function r(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return e.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(a=>new Yj(a.ctx.common.issues));return Z(e,{code:Q.invalid_union,unionErrors:i}),pA}if(e.common.async)return Promise.all(t.map(async o=>{let i={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:i}),ctx:i}})).then(r);{let o,i=[];for(let c of t){let p={...e,common:{...e.common,issues:[]},parent:null},d=c._parseSync({data:e.data,path:e.path,parent:p});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:p}),p.common.issues.length&&i.push(p.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(c=>new Yj(c));return Z(e,{code:Q.invalid_union,unionErrors:a}),pA}}get options(){return this._def.options}};Ao.create=(j,A)=>new Ao({options:j,typeName:cA.ZodUnion,...fA(A)});var vt=j=>j instanceof eo?vt(j.schema):j instanceof Zj?vt(j.innerType()):j instanceof to?[j.value]:j instanceof ro?j.options:j instanceof oo?IA.objectValues(j.enum):j instanceof no?vt(j._def.innerType):j instanceof Yr?[void 0]:j instanceof Zr?[null]:j instanceof Be?[void 0,...vt(j.unwrap())]:j instanceof Ze?[null,...vt(j.unwrap())]:j instanceof Ei||j instanceof io?vt(j.unwrap()):j instanceof so?vt(j._def.innerType):[],J6=class j extends EA{_parse(A){let{ctx:e}=this._processInputParams(A);if(e.parsedType!==jA.object)return Z(e,{code:Q.invalid_type,expected:jA.object,received:e.parsedType}),pA;let t=this.discriminator,r=e.data[t],o=this.optionsMap.get(r);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(Z(e,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),pA)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(A,e,t){let r=new Map;for(let o of e){let i=vt(o.shape[A]);if(!i.length)throw new Error(`A discriminator value for key \`${A}\` could not be extracted from all schema options`);for(let a of i){if(r.has(a))throw new Error(`Discriminator property ${String(A)} has duplicate value ${String(a)}`);r.set(a,o)}}return new j({typeName:cA.ZodDiscriminatedUnion,discriminator:A,options:e,optionsMap:r,...fA(t)})}};function nd(j,A){let e=bt(j),t=bt(A);if(j===A)return{valid:!0,data:j};if(e===jA.object&&t===jA.object){let r=IA.objectKeys(A),o=IA.objectKeys(j).filter(a=>r.indexOf(a)!==-1),i={...j,...A};for(let a of o){let c=nd(j[a],A[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(e===jA.array&&t===jA.array){if(j.length!==A.length)return{valid:!1};let r=[];for(let o=0;o<j.length;o++){let i=j[o],a=A[o],c=nd(i,a);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return e===jA.date&&t===jA.date&&+j==+A?{valid:!0,data:j}:{valid:!1}}var jo=class extends EA{_parse(A){let{status:e,ctx:t}=this._processInputParams(A),r=(o,i)=>{if(rd(o)||rd(i))return pA;let a=nd(o.value,i.value);return a.valid?((od(o)||od(i))&&e.dirty(),{status:e.value,value:a.data}):(Z(t,{code:Q.invalid_intersection_types}),pA)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([o,i])=>r(o,i)):r(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};jo.create=(j,A,e)=>new jo({left:j,right:A,typeName:cA.ZodIntersection,...fA(e)});var Ye=class j extends EA{_parse(A){let{status:e,ctx:t}=this._processInputParams(A);if(t.parsedType!==jA.array)return Z(t,{code:Q.invalid_type,expected:jA.array,received:t.parsedType}),pA;if(t.data.length<this._def.items.length)return Z(t,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pA;!this._def.rest&&t.data.length>this._def.items.length&&(Z(t,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());let o=[...t.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new ke(t,i,t.path,a)):null}).filter(i=>!!i);return t.common.async?Promise.all(o).then(i=>vj.mergeArray(e,i)):vj.mergeArray(e,o)}get items(){return this._def.items}rest(A){return new j({...this._def,rest:A})}};Ye.create=(j,A)=>{if(!Array.isArray(j))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ye({items:j,typeName:cA.ZodTuple,rest:null,...fA(A)})};var Y6=class j extends EA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:e,ctx:t}=this._processInputParams(A);if(t.parsedType!==jA.object)return Z(t,{code:Q.invalid_type,expected:jA.object,received:t.parsedType}),pA;let r=[],o=this._def.keyType,i=this._def.valueType;for(let a in t.data)r.push({key:o._parse(new ke(t,a,t.path,a)),value:i._parse(new ke(t,t.data[a],t.path,a)),alwaysSet:a in t.data});return t.common.async?vj.mergeObjectAsync(e,r):vj.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(A,e,t){return e instanceof EA?new j({keyType:A,valueType:e,typeName:cA.ZodRecord,...fA(t)}):new j({keyType:pr.create(),valueType:A,typeName:cA.ZodRecord,...fA(e)})}},Pn=class extends EA{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(A){let{status:e,ctx:t}=this._processInputParams(A);if(t.parsedType!==jA.map)return Z(t,{code:Q.invalid_type,expected:jA.map,received:t.parsedType}),pA;let r=this._def.keyType,o=this._def.valueType,i=[...t.data.entries()].map(([a,c],p)=>({key:r._parse(new ke(t,a,t.path,[p,"key"])),value:o._parse(new ke(t,c,t.path,[p,"value"]))}));if(t.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let p=await c.key,d=await c.value;if(p.status==="aborted"||d.status==="aborted")return pA;(p.status==="dirty"||d.status==="dirty")&&e.dirty(),a.set(p.value,d.value)}return{status:e.value,value:a}})}else{let a=new Map;for(let c of i){let p=c.key,d=c.value;if(p.status==="aborted"||d.status==="aborted")return pA;(p.status==="dirty"||d.status==="dirty")&&e.dirty(),a.set(p.value,d.value)}return{status:e.value,value:a}}}};Pn.create=(j,A,e)=>new Pn({valueType:A,keyType:j,typeName:cA.ZodMap,...fA(e)});var On=class j extends EA{_parse(A){let{status:e,ctx:t}=this._processInputParams(A);if(t.parsedType!==jA.set)return Z(t,{code:Q.invalid_type,expected:jA.set,received:t.parsedType}),pA;let r=this._def;r.minSize!==null&&t.data.size<r.minSize.value&&(Z(t,{code:Q.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),e.dirty()),r.maxSize!==null&&t.data.size>r.maxSize.value&&(Z(t,{code:Q.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),e.dirty());let o=this._def.valueType;function i(c){let p=new Set;for(let d of c){if(d.status==="aborted")return pA;d.status==="dirty"&&e.dirty(),p.add(d.value)}return{status:e.value,value:p}}let a=[...t.data.values()].map((c,p)=>o._parse(new ke(t,c,t.path,p)));return t.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(A,e){return new j({...this._def,minSize:{value:A,message:oA.toString(e)}})}max(A,e){return new j({...this._def,maxSize:{value:A,message:oA.toString(e)}})}size(A,e){return this.min(A,e).max(A,e)}nonempty(A){return this.min(1,A)}};On.create=(j,A)=>new On({valueType:j,minSize:null,maxSize:null,typeName:cA.ZodSet,...fA(A)});var Z6=class j extends EA{constructor(){super(...arguments),this.validate=this.implement}_parse(A){let{ctx:e}=this._processInputParams(A);if(e.parsedType!==jA.function)return Z(e,{code:Q.invalid_type,expected:jA.function,received:e.parsedType}),pA;function t(a,c){return z6({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,X6(),xn].filter(p=>!!p),issueData:{code:Q.invalid_arguments,argumentsError:c}})}function r(a,c){return z6({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,X6(),xn].filter(p=>!!p),issueData:{code:Q.invalid_return_type,returnTypeError:c}})}let o={errorMap:e.common.contextualErrorMap},i=e.data;if(this._def.returns instanceof lr){let a=this;return xj(async function(...c){let p=new Yj([]),d=await a._def.args.parseAsync(c,o).catch(f=>{throw p.addIssue(t(c,f)),p}),m=await Reflect.apply(i,this,d);return await a._def.returns._def.type.parseAsync(m,o).catch(f=>{throw p.addIssue(r(m,f)),p})})}else{let a=this;return xj(function(...c){let p=a._def.args.safeParse(c,o);if(!p.success)throw new Yj([t(c,p.error)]);let d=Reflect.apply(i,this,p.data),m=a._def.returns.safeParse(d,o);if(!m.success)throw new Yj([r(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...A){return new j({...this._def,args:Ye.create(A).rest(qt.create())})}returns(A){return new j({...this._def,returns:A})}implement(A){return this.parse(A)}strictImplement(A){return this.parse(A)}static create(A,e,t){return new j({args:A||Ye.create([]).rest(qt.create()),returns:e||qt.create(),typeName:cA.ZodFunction,...fA(t)})}},eo=class extends EA{get schema(){return this._def.getter()}_parse(A){let{ctx:e}=this._processInputParams(A);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};eo.create=(j,A)=>new eo({getter:j,typeName:cA.ZodLazy,...fA(A)});var to=class extends EA{_parse(A){if(A.data!==this._def.value){let e=this._getOrReturnCtx(A);return Z(e,{received:e.data,code:Q.invalid_literal,expected:this._def.value}),pA}return{status:"valid",value:A.data}}get value(){return this._def.value}};to.create=(j,A)=>new to({value:j,typeName:cA.ZodLiteral,...fA(A)});function TF(j,A){return new ro({values:j,typeName:cA.ZodEnum,...fA(A)})}var ro=class j extends EA{constructor(){super(...arguments),Bi.set(this,void 0)}_parse(A){if(typeof A.data!="string"){let e=this._getOrReturnCtx(A),t=this._def.values;return Z(e,{expected:IA.joinValues(t),received:e.parsedType,code:Q.invalid_type}),pA}if(W6(this,Bi,"f")||bF(this,Bi,new Set(this._def.values),"f"),!W6(this,Bi,"f").has(A.data)){let e=this._getOrReturnCtx(A),t=this._def.values;return Z(e,{received:e.data,code:Q.invalid_enum_value,options:t}),pA}return xj(A.data)}get options(){return this._def.values}get enum(){let A={};for(let e of this._def.values)A[e]=e;return A}get Values(){let A={};for(let e of this._def.values)A[e]=e;return A}get Enum(){let A={};for(let e of this._def.values)A[e]=e;return A}extract(A,e=this._def){return j.create(A,{...this._def,...e})}exclude(A,e=this._def){return j.create(this.options.filter(t=>!A.includes(t)),{...this._def,...e})}};Bi=new WeakMap;ro.create=TF;var oo=class extends EA{constructor(){super(...arguments),ki.set(this,void 0)}_parse(A){let e=IA.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(A);if(t.parsedType!==jA.string&&t.parsedType!==jA.number){let r=IA.objectValues(e);return Z(t,{expected:IA.joinValues(r),received:t.parsedType,code:Q.invalid_type}),pA}if(W6(this,ki,"f")||bF(this,ki,new Set(IA.getValidEnumValues(this._def.values)),"f"),!W6(this,ki,"f").has(A.data)){let r=IA.objectValues(e);return Z(t,{received:t.data,code:Q.invalid_enum_value,options:r}),pA}return xj(A.data)}get enum(){return this._def.values}};ki=new WeakMap;oo.create=(j,A)=>new oo({values:j,typeName:cA.ZodNativeEnum,...fA(A)});var lr=class extends EA{unwrap(){return this._def.type}_parse(A){let{ctx:e}=this._processInputParams(A);if(e.parsedType!==jA.promise&&e.common.async===!1)return Z(e,{code:Q.invalid_type,expected:jA.promise,received:e.parsedType}),pA;let t=e.parsedType===jA.promise?e.data:Promise.resolve(e.data);return xj(t.then(r=>this._def.type.parseAsync(r,{path:e.path,errorMap:e.common.contextualErrorMap})))}};lr.create=(j,A)=>new lr({type:j,typeName:cA.ZodPromise,...fA(A)});var Zj=class extends EA{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cA.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(A){let{status:e,ctx:t}=this._processInputParams(A),r=this._def.effect||null,o={addIssue:i=>{Z(t,i),i.fatal?e.abort():e.dirty()},get path(){return t.path}};if(o.addIssue=o.addIssue.bind(o),r.type==="preprocess"){let i=r.transform(t.data,o);if(t.common.async)return Promise.resolve(i).then(async a=>{if(e.value==="aborted")return pA;let c=await this._def.schema._parseAsync({data:a,path:t.path,parent:t});return c.status==="aborted"?pA:c.status==="dirty"||e.value==="dirty"?qn(c.value):c});{if(e.value==="aborted")return pA;let a=this._def.schema._parseSync({data:i,path:t.path,parent:t});return a.status==="aborted"?pA:a.status==="dirty"||e.value==="dirty"?qn(a.value):a}}if(r.type==="refinement"){let i=a=>{let c=r.refinement(a,o);if(t.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(t.common.async===!1){let a=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return a.status==="aborted"?pA:(a.status==="dirty"&&e.dirty(),i(a.value),{status:e.value,value:a.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(a=>a.status==="aborted"?pA:(a.status==="dirty"&&e.dirty(),i(a.value).then(()=>({status:e.value,value:a.value}))))}if(r.type==="transform")if(t.common.async===!1){let i=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!Vr(i))return i;let a=r.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:a}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(i=>Vr(i)?Promise.resolve(r.transform(i.value,o)).then(a=>({status:e.value,value:a})):i);IA.assertNever(r)}};Zj.create=(j,A,e)=>new Zj({schema:j,typeName:cA.ZodEffects,effect:A,...fA(e)});Zj.createWithPreprocess=(j,A,e)=>new Zj({schema:A,effect:{type:"preprocess",transform:j},typeName:cA.ZodEffects,...fA(e)});var Be=class extends EA{_parse(A){return this._getType(A)===jA.undefined?xj(void 0):this._def.innerType._parse(A)}unwrap(){return this._def.innerType}};Be.create=(j,A)=>new Be({innerType:j,typeName:cA.ZodOptional,...fA(A)});var Ze=class extends EA{_parse(A){return this._getType(A)===jA.null?xj(null):this._def.innerType._parse(A)}unwrap(){return this._def.innerType}};Ze.create=(j,A)=>new Ze({innerType:j,typeName:cA.ZodNullable,...fA(A)});var no=class extends EA{_parse(A){let{ctx:e}=this._processInputParams(A),t=e.data;return e.parsedType===jA.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};no.create=(j,A)=>new no({innerType:j,typeName:cA.ZodDefault,defaultValue:typeof A.default=="function"?A.default:()=>A.default,...fA(A)});var so=class extends EA{_parse(A){let{ctx:e}=this._processInputParams(A),t={...e,common:{...e.common,issues:[]}},r=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return fi(r)?r.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Yj(t.common.issues)},input:t.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Yj(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};so.create=(j,A)=>new so({innerType:j,typeName:cA.ZodCatch,catchValue:typeof A.catch=="function"?A.catch:()=>A.catch,...fA(A)});var Mn=class extends EA{_parse(A){if(this._getType(A)!==jA.nan){let t=this._getOrReturnCtx(A);return Z(t,{code:Q.invalid_type,expected:jA.nan,received:t.parsedType}),pA}return{status:"valid",value:A.data}}};Mn.create=j=>new Mn({typeName:cA.ZodNaN,...fA(j)});var T1=Symbol("zod_brand"),Ei=class extends EA{_parse(A){let{ctx:e}=this._processInputParams(A),t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},gi=class j extends EA{_parse(A){let{status:e,ctx:t}=this._processInputParams(A);if(t.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:t.data,path:t.path,parent:t});return o.status==="aborted"?pA:o.status==="dirty"?(e.dirty(),qn(o.value)):this._def.out._parseAsync({data:o.value,path:t.path,parent:t})})();{let r=this._def.in._parseSync({data:t.data,path:t.path,parent:t});return r.status==="aborted"?pA:r.status==="dirty"?(e.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:t.path,parent:t})}}static create(A,e){return new j({in:A,out:e,typeName:cA.ZodPipeline})}},io=class extends EA{_parse(A){let e=this._def.innerType._parse(A),t=r=>(Vr(r)&&(r.value=Object.freeze(r.value)),r);return fi(e)?e.then(r=>t(r)):t(e)}unwrap(){return this._def.innerType}};io.create=(j,A)=>new io({innerType:j,typeName:cA.ZodReadonly,...fA(A)});function $F(j,A){let e=typeof j=="function"?j(A):typeof j=="string"?{message:j}:j;return typeof e=="string"?{message:e}:e}function PF(j,A={},e){return j?ur.create().superRefine((t,r)=>{var o,i;let a=j(t);if(a instanceof Promise)return a.then(c=>{var p,d;if(!c){let m=$F(A,t),B=(d=(p=m.fatal)!==null&&p!==void 0?p:e)!==null&&d!==void 0?d:!0;r.addIssue({code:"custom",...m,fatal:B})}});if(!a){let c=$F(A,t),p=(i=(o=c.fatal)!==null&&o!==void 0?o:e)!==null&&i!==void 0?i:!0;r.addIssue({code:"custom",...c,fatal:p})}}):ur.create()}var P1={object:Dj.lazycreate},cA;(function(j){j.ZodString="ZodString",j.ZodNumber="ZodNumber",j.ZodNaN="ZodNaN",j.ZodBigInt="ZodBigInt",j.ZodBoolean="ZodBoolean",j.ZodDate="ZodDate",j.ZodSymbol="ZodSymbol",j.ZodUndefined="ZodUndefined",j.ZodNull="ZodNull",j.ZodAny="ZodAny",j.ZodUnknown="ZodUnknown",j.ZodNever="ZodNever",j.ZodVoid="ZodVoid",j.ZodArray="ZodArray",j.ZodObject="ZodObject",j.ZodUnion="ZodUnion",j.ZodDiscriminatedUnion="ZodDiscriminatedUnion",j.ZodIntersection="ZodIntersection",j.ZodTuple="ZodTuple",j.ZodRecord="ZodRecord",j.ZodMap="ZodMap",j.ZodSet="ZodSet",j.ZodFunction="ZodFunction",j.ZodLazy="ZodLazy",j.ZodLiteral="ZodLiteral",j.ZodEnum="ZodEnum",j.ZodEffects="ZodEffects",j.ZodNativeEnum="ZodNativeEnum",j.ZodOptional="ZodOptional",j.ZodNullable="ZodNullable",j.ZodDefault="ZodDefault",j.ZodCatch="ZodCatch",j.ZodPromise="ZodPromise",j.ZodBranded="ZodBranded",j.ZodPipeline="ZodPipeline",j.ZodReadonly="ZodReadonly"})(cA||(cA={}));var O1=(j,A={message:`Input not instance of ${j.name}`})=>PF(e=>e instanceof j,A),OF=pr.create,MF=Xr.create,M1=Mn.create,C1=zr.create,CF=Wr.create,_1=Jr.create,R1=Gn.create,D1=Yr.create,N1=Zr.create,K1=ur.create,L1=qt.create,U1=ve.create,Q1=Tn.create,H1=xt.create,V1=Dj.create,X1=Dj.strictCreate,z1=Ao.create,W1=J6.create,J1=jo.create,Y1=Ye.create,Z1=Y6.create,A8=Pn.create,j8=On.create,e8=Z6.create,t8=eo.create,r8=to.create,o8=ro.create,n8=oo.create,s8=lr.create,IF=Zj.create,i8=Be.create,a8=Ze.create,c8=Zj.createWithPreprocess,p8=gi.create,u8=()=>OF().optional(),l8=()=>MF().optional(),d8=()=>CF().optional(),m8={string:j=>pr.create({...j,coerce:!0}),number:j=>Xr.create({...j,coerce:!0}),boolean:j=>Wr.create({...j,coerce:!0}),bigint:j=>zr.create({...j,coerce:!0}),date:j=>Jr.create({...j,coerce:!0})},B8=pA,bj=Object.freeze({__proto__:null,defaultErrorMap:xn,setErrorMap:c1,getErrorMap:X6,makeIssue:z6,EMPTY_PATH:p1,addIssueToContext:Z,ParseStatus:vj,INVALID:pA,DIRTY:qn,OK:xj,isAborted:rd,isDirty:od,isValid:Vr,isAsync:fi,get util(){return IA},get objectUtil(){return td},ZodParsedType:jA,getParsedType:bt,ZodType:EA,datetimeRegex:GF,ZodString:pr,ZodNumber:Xr,ZodBigInt:zr,ZodBoolean:Wr,ZodDate:Jr,ZodSymbol:Gn,ZodUndefined:Yr,ZodNull:Zr,ZodAny:ur,ZodUnknown:qt,ZodNever:ve,ZodVoid:Tn,ZodArray:xt,ZodObject:Dj,ZodUnion:Ao,ZodDiscriminatedUnion:J6,ZodIntersection:jo,ZodTuple:Ye,ZodRecord:Y6,ZodMap:Pn,ZodSet:On,ZodFunction:Z6,ZodLazy:eo,ZodLiteral:to,ZodEnum:ro,ZodNativeEnum:oo,ZodPromise:lr,ZodEffects:Zj,ZodTransformer:Zj,ZodOptional:Be,ZodNullable:Ze,ZodDefault:no,ZodCatch:so,ZodNaN:Mn,BRAND:T1,ZodBranded:Ei,ZodPipeline:gi,ZodReadonly:io,custom:PF,Schema:EA,ZodSchema:EA,late:P1,get ZodFirstPartyTypeKind(){return cA},coerce:m8,any:K1,array:H1,bigint:C1,boolean:CF,date:_1,discriminatedUnion:W1,effect:IF,enum:o8,function:e8,instanceof:O1,intersection:J1,lazy:t8,literal:r8,map:A8,nan:M1,nativeEnum:n8,never:U1,null:N1,nullable:a8,number:MF,object:V1,oboolean:d8,onumber:l8,optional:i8,ostring:u8,pipeline:p8,preprocess:c8,promise:s8,record:Z1,set:j8,strictObject:X1,string:OF,symbol:R1,transformer:IF,tuple:Y1,undefined:D1,union:z1,unknown:L1,void:Q1,NEVER:B8,ZodIssueCode:Q,quotelessJson:a1,ZodError:Yj});n();s();n();s();var k8=bj.enum(["pumpFun","moonshot"]),f8=bj.object({type:k8,programId:bj.string(),name:bj.string(),iconUrl:bj.string()}),E8=bj.object({programs:bj.array(f8)}),_F=j=>{try{return E8.parse(j)}catch{return}};var g8={type:"pumpFun",programId:"6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P",name:"Pump.fun",iconUrl:"https://dhc7eusqrdwa0.cloudfront.net/assets/pumpfun.svg"},sd=[],Gt=()=>{try{let j=UA.getMultivariateAssignment("enabled-ugc-programs");if(!j)return UA.isFeatureEnabled("enabled-ugc-programs")?[g8]:sd;let A=JSON.parse(j);return _F(A)?.programs??sd}catch{return sd}};var y8=bj.object({programId:bj.string(),complete:bj.boolean(),progress:bj.string()}),F8=bj.object({bondingCurves:bj.record(bj.string(),y8)});function h8(j){let A=RF(j),t=AA().getQueryData(A.queryKey),{data:r,isFetching:o,isError:i}=tA({...A,initialData:t,staleTime:0}),a=(0,ao.useMemo)(()=>Gt(),[]);return(0,ao.useMemo)(()=>{let c=t===r;if(o&&!c)return{type:"Loading"};if(i)return{type:"Error"};let p=F8.safeParse(r);if(!p.success)return{type:"Error"};let d=p.data.bondingCurves[j];if(!d)return{type:"NoBondingCurve"};let m=a.find(f=>f.programId===d.programId);if(!m)return{type:"NoBondingCurve"};let B=$8(d.progress);return B?d.complete?{type:"Graduated",ugcProgram:m}:{type:c&&o?"BondingCurveRefreshing":"BondingCurve",progressPercentage:B,ugcProgram:m}:{type:"Error"}},[t,j,r,i,o,a])}var S8=j=>{let A=AA(),e=RF(j);return(0,ao.useCallback)(async()=>{await A.refetchQueries({queryKey:e.queryKey,type:"active"})},[A,e.queryKey])},RF=j=>{let A=(0,ao.useMemo)(()=>Gt(),[]),e=(0,ao.useMemo)(()=>A.map(r=>r.programId),[A]);return{queryKey:["bonding-curve",j,e],queryFn:()=>w8(j,e)}},w8=async(j,A)=>{let e=encodeURIComponent(j),t=encodeURIComponent(A.join(","));return(await z.api().get(`/ugc/v1/bonding-curve/${e}/${t}`)).data},$8=j=>{let A=Number(j);if(!isNaN(A))return Math.round(A*100)};n();s();var I8="https://help.phantom.com/hc/en-us/articles/33745013398675";n();s();n();s();var jc=v(x());n();s();var NF=v(x());n();s();var DF=v(x());var Ac=()=>{let j=AA();return{cancelQuotes:(0,DF.useCallback)(async()=>{await j.cancelQueries({queryKey:hA.quotesScope()}),await bm(1)},[j])}};n();s();function co(j){return{chain:"solana",type:"fungible",address:j.type==="SPL"?j.data.mintAddress:void 0,symbol:j.data.symbol??""}}function id(){let j=W(),A=w(r=>r.setBuyFungible),e=w(r=>r.buyFungible),{cancelQuotes:t}=Ac();return(0,NF.useCallback)(async r=>{if(e&&Qr(r,e))return;await t();let o=co(r);j.capture("swapperUpdateToAsset",{data:o}),A(r)},[j,e,t,A])}n();s();var KF=j=>{ad.getState().setAsset(j)},ad=TA(j=>({asset:void 0,setAsset(A){j({asset:A})}}));var v8=({onClose:j})=>{let A=id(),e=ad(o=>o.asset),t=(0,jc.useMemo)(()=>Gt().find(i=>i.programId===e?.data?.ugcTokenMeta?.programId),[e]),r=(0,jc.useCallback)(async()=>{e&&(await A(e),j())},[A,e,j]);return{asset:e,program:t,handleConfirmPress:r}};n();s();n();s();var cd=()=>{let j=AA(),A=w();return{clearQuotes:async()=>{A.resetQuote(),await j.invalidateQueries({queryKey:hA.quotesScope()})}}};n();s();n();s();var b8=({networkID:j,unsignedTransaction:A,pendingActivityRows:e,accountIdentifier:t,accountSigner:r,storage:o,includeCallPayload:i})=>({accountSigner:r,accountIdentifier:t,networkID:j,unsignedTransaction:A,...i&&{callPayload:{from:A.from,to:A.to,data:A.data,value:A.value}},pendingTransactionInput:{ownerAddress:A.from,networkID:j,data:{nonce:"",unsignedTransaction:A,hash:""},type:"swap",display:{summary:e}},storage:o}),tc=async({transactions:j,transactionTypes:A,networkID:e,gasEstimation:t,pendingApprovalActivityRows:r,pendingSwapActivityRows:o,accountIdentifier:i,accountSigner:a,storage:c})=>{let p=!0,d="";for(let[m,B]of j.entries()){let f=t[m],k={gas:`0x${f.gasLimit.toString(16)}`,maxFeePerGas:`0x${f.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${f.maxPriorityFeePerGas.toString(16)}`},E=bo.parse({...B,...k}),y=A[m].includes("approval")?r:o,F=b8({networkID:e,accountIdentifier:i,pendingActivityRows:y.shift(),accountSigner:a,storage:c,unsignedTransaction:E,includeCallPayload:p});try{d="",d=await qB(F)}catch(S){return{signature:d,error:S instanceof Error?S:new Error("Failed to process EVM swap transaction")}}p&&(p=!1)}return{signature:d}};n();s();var q8=({networkID:j,transaction:A,feePayer:e,connection:t,pendingActivityRows:r,accountIdentifier:o,accountSigner:i,storage:a})=>({accountSigner:i,accountIdentifier:o,transaction:A,feePayer:e,connection:t,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:e.toBase58(),networkID:j,data:{signature:""},type:"swap",display:{summary:r}},storage:a}),rc=async({callerAddress:j,connection:A,networkID:e,transactions:t,pendingSwapActivityRows:r,accountIdentifier:o,accountSigner:i,storage:a})=>{let c=new zA.PublicKey(j),p="";for(let[d,m]of t.entries()){let B=oe(m,"bs58"),f=q8({networkID:e,transaction:B,feePayer:c,connection:A,pendingActivityRows:r[d],accountIdentifier:o,accountSigner:i,storage:a});try{p="",p=await GB(f),d!==t.length-1&&await na({connection:A,signature:p})}catch(k){return{signature:p??"",error:k instanceof Error?k:new Error("Failed to process solana swap transaction")}}}return{signature:p??""}};n();s();var x8=({networkID:j,transaction:A,feePayer:e,pendingActivityRows:t,accountIdentifier:r,accountSigner:o,storage:i})=>({accountSigner:o,accountIdentifier:r,transaction:A,pendingTransactionInput:{ownerAddress:e,networkID:j,data:{digest:""},type:"swap",display:{summary:t}},storage:i}),oc=async({callerAddress:j,networkID:A,transactions:e,pendingSwapActivityRows:t,accountIdentifier:r,accountSigner:o,storage:i})=>{let a="";for(let[c,p]of e.entries()){let d=x8({networkID:A,transaction:Do.deserializeTransactionString(p),feePayer:j,pendingActivityRows:t[c],accountIdentifier:r,accountSigner:o,storage:i});try{a=(await xB(d)).digest,c!==e.length-1&&await ra(A,a)}catch(m){return{signature:a??"",error:m instanceof Error?m:new Error("Failed to process sui swap transaction")}}}return{signature:a??""}};var pd=({accountIdentifier:j,networkID:A})=>{let e=lA(),t=Mo();return uA({mutationFn:async o=>{let{swapTransactions:i,type:a}=o;if(i.type==="evm"&&a==="eip155"){let{gasEstimation:c,pendingApprovalActivityRows:p,pendingSwapActivityRows:d}=o,{signature:m,error:B}=await b.startSpan("Process EVM Swap Txns",()=>tc({transactions:i.transactions,transactionTypes:i.transactionTypes,networkID:A,gasEstimation:c,pendingSwapActivityRows:d,pendingApprovalActivityRows:p,accountIdentifier:j,accountSigner:t,storage:e}));return{networkID:A,chainType:a,id:m,error:B}}else if(i.type==="solana"&&a==="solana"){let{callerAddress:c,connection:p,pendingSwapActivityRows:d}=o;if(!p)throw new Error("missing connection");let{signature:m,error:B}=await b.startSpan("Process Solana Swap Txns",()=>rc({callerAddress:c,connection:p,networkID:A,transactions:i.transactions,pendingSwapActivityRows:d,accountIdentifier:j,accountSigner:t,storage:e}));return{networkID:A,chainType:a,id:m,error:B}}else if(i.type==="sui"&&a==="sui"){let{callerAddress:c,pendingSwapActivityRows:p}=o,{signature:d,error:m}=await b.startSpan("Process Sui Swap Txns",()=>oc({callerAddress:c,networkID:A,transactions:i.transactions,pendingSwapActivityRows:p,accountIdentifier:j,accountSigner:t,storage:e}));return{networkID:A,chainType:a,id:d,error:m}}throw new Error("unsupported")}})};n();s();n();s();var Cn=v(x());n();s();var LF=v(x());function UF(){let j=w(r=>r.setUiBuyAmountCryptoInput),A=w(r=>r.setUiBuyAmountLocalFiatInput),e=w(r=>r.primaryCurrency),{fromUsd:t}=GA();return(0,LF.useCallback)(({amount:r,decimals:o,usdPrice:i})=>{if(e==="crypto")if(r===void 0)j("");else{let a=wA(r,o).toString(),c=Mj(a);j(c)}else if(e==="fiat"&&i)if(r===void 0)A("");else{let a=wA(r,o).toString(),c=Aj(Number(a),i),p=t(c);A(p.toString())}},[t,e,A,j])}n();s();var QF=v(x());function HF(){let j=w(a=>a.setAmountType),A=w(a=>a.setSellAmount),e=w(a=>a.sellAmount),t=w(a=>a.setUiBuyAmountCryptoInput),r=W(),[o,i]=qo(e,A,hn);return(0,QF.useCallback)(async({fungibleValue:a,shouldUpdateQuote:c,decimals:p})=>{let d=Kj(a.substring(0,Kr)),m=Mj(d,p);j("buy"),t(m),await r.capture("swapperChangeReceiveCryptoAmount",{data:{amount:m}}),c&&i(m)},[r,j,t,i])}n();s();var VF=v(x());function sc(j){return(0,VF.useMemo)(()=>j===void 0?void 0:V(j),[j])}n();s();var po=v(x());var XF=()=>{let j=W(),A=w(F=>F.primaryCurrency),e=w(F=>F.sellFungible),t=w(F=>F.buyFungible),r=w(F=>F.uiSellAmountLocalFiatInput),o=w(F=>F.uiBuyAmountLocalFiatInput),i=w(F=>F.amountType),a=w(F=>F.setUiSellAmountCryptoInput),c=w(F=>F.setUiBuyAmountCryptoInput),p=w(F=>F.switchTokensForBuy),d=w(F=>F.switchTokensForSell),{data:m}=$j({query:e?{data:V(e)}:void 0}),{data:B}=$j({query:t?{data:V(t)}:void 0}),{toUsd:f}=GA(),k=(0,po.useMemo)(()=>({localFiatValue:r,decimals:e?.data.decimals??0,usdPrice:m?.usd}),[e?.data.decimals,r,m?.usd]),E=(0,po.useMemo)(()=>({localFiatValue:o,decimals:t?.data.decimals??0,usdPrice:B?.usd}),[t?.data.decimals,B?.usd,o]),g=(0,po.useCallback)(({localFiatValue:F,decimals:S,usdPrice:I})=>{let O=F?"":Uj(0,S);if(I&&F){let M=f(F);O=Fe(Number(M),I,S).toString()}return O},[f]),y=(0,po.useCallback)(()=>{j.capture("swapperSwitchTokensClicked",{data:{sell:e?J(V(e)):"",buy:t?J(V(t)):""}})},[j,e,t]);return(0,po.useCallback)(()=>{if(A==="fiat"){let F=g(k);a(F);let S=g(E);c(S)}i==="sell"?d():p(),y()},[i,E,A,k,c,a,p,d,g,y])};var T8={chainId:iA.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"};function ud(){let j=w(O=>O.buyFungible),A=sc(j),e=w(O=>O.sellFungible),t=w(O=>O.primaryCurrency),r=w(O=>O.uiBuyAmountCryptoInput),o=w(O=>O.uiBuyAmountLocalFiatInput),i=w(O=>O.amountType),a=w(O=>O.setAmountType),c=w(O=>O.setSellAmount),p=w(O=>O.uiSellAmountCryptoInput),d=w(O=>O.uiSellAmountLocalFiatInput),m=j?.data.decimals??0,{currentQuote:B}=aA(),f=j?V(j):T8,{data:k}=$j({query:{data:f}}),E=XF(),g=UF(),y=HF(),{toUsd:F}=GA();(0,Cn.useEffect)(()=>{i==="sell"&&A&&g({amount:B?.buyAmount,decimals:m,usdPrice:k?.usd})},[i,A,B?.buyAmount,m,k?.usd,g]),(0,Cn.useEffect)(()=>{if(HA(e?.data.chain.id,j?.data.chain.id)&&i==="buy"){if(a("sell"),t==="crypto")c(p);else if(k?.usd){let O=F(d),M=Fe(O,k.usd,m);c(M.toString())}}},[i,j,m,k,t,e,a,c,F,p,d]);let S=(0,Cn.useCallback)(O=>{y({fungibleValue:O,decimals:m,shouldUpdateQuote:!0})},[m,y]),I=(0,Cn.useCallback)(()=>{E()},[E]);return{cryptoAmountInputValue:r,handleCryptoAmountInputChange:S,localFiatAmountInputValue:o,handleSwitchTokensClick:I}}n();s();var qe=v(x());n();s();function uo(j){return new T(j??0).multipliedBy(10**_m.tokenDecimals)}n();s();var P8=3,O8=new Y(356190),M8=j=>JA.get(j).averageNetworkFee.times(P8);function yi({sellFungible:j,totalFees:A,transactionSpeedsToUnitCost:e,minRequiredBalance:t,customPriorityFee:r,customTip:o,isBridge:i=!1}){let{decimals:a,amount:c,balance:p,chain:d}=j.data,m=c?new Y(c):p?new Y(p).multipliedBy(is(a)):new Y(0),B=uj(j.type),{source:f,destination:k}=t,g=C8({isNativeToken:B,network:d,totalFees:A,isBridge:i,transactionSpeedsToUnitCost:e,customPriorityFee:r,customTip:o}).plus(k),y=B?_8(m,g,f):m.toString();return Pm(y,a)}function C8({isNativeToken:j,network:A,totalFees:e,isBridge:t,transactionSpeedsToUnitCost:r,customPriorityFee:o,customTip:i}){if(!j)return e;let a=JA.get(A.id),c=t?a.bridgeDefaultFee:a.swapDefaultFee,p=r?.standard;return SB(p)&&(c=O8.multipliedBy(p.maxFeePerGas.plus(p.maxPriorityFeePerGas))),$.isSolanaNetworkID(A.id)&&o&&(c=c.plus(o)),$.isSolanaNetworkID(A.id)&&i&&(c=c.plus(i)),c.plus(M8(A.id))}function _8(j,A,e){let t=e.plus(A);return j.gt(t)?j.minus(t).toString():j.toString()}n();s();var zF=v(x());function WF(){let j=w(p=>p.primaryCurrency),A=w(p=>p.setUiSellAmountLocalFiatInput),e=w(p=>p.setUiBuyAmountLocalFiatInput),t=w(p=>p.setAmountType),r=w(p=>p.setPrimaryCurrency),o=w(p=>p.setUiSellAmountCryptoInput),i=w(p=>p.setSellAmount),a=w(p=>p.setUiBuyAmountCryptoInput),{fromUsd:c}=GA();return(0,zF.useCallback)(({buyAmountFromQuote:p,buyFungibleDecimals:d,buyFungibleUsdPrice:m,sellAmountFromQuote:B,sellFungibleUsdPrice:f})=>{if(j==="crypto"){if(t("sell"),f&&B){let k=Aj(Number(B),f),E=c(k);A(E.toString()),i(B.toString())}if(m&&p){let k=wA(p,d).toString(),E=Aj(Number(k),m),g=c(E);e(g.toString())}r("fiat")}if(j==="fiat"){if(B&&o(B),m&&p){let k=wA(p,d).toString();a(k)}r("crypto")}},[c,j,i,t,a,e,r,o,A])}n();s();var JF=v(x());function YF(){let j=w(r=>r.primaryCurrency),A=w(r=>r.setUiSellAmountCryptoInput),e=w(r=>r.setUiSellAmountLocalFiatInput),{fromUsd:t}=GA();return(0,JF.useCallback)(({amount:r,decimals:o,usdPrice:i})=>{if(j==="crypto")if(r===void 0)A("0");else{let a=wA(r,o).toString();A(a)}else if(j==="fiat"&&i)if(r===void 0)e("0");else{let a=wA(r,o).toString(),c=Aj(Number(a),i),p=t(c);e(p.toString())}},[t,j,A,e])}n();s();var ZF=v(x());function Ah(){let j=w(i=>i.setAmountType),A=w(i=>i.setUiSellAmountCryptoInput),e=w(i=>i.setSellAmount),t=w(i=>i.sellAmount),[r,o]=qo(t,e,hn);return(0,ZF.useCallback)(({fungibleValue:i,decimals:a,shouldUpdateQuote:c,shouldTrimLength:p=!0})=>{let d=Kj(p?i.substring(0,Kr):i),m=Mj(d,a);j("sell"),A(m),c&&o(m)},[j,A,o])}n();s();var jh=v(x());function eh(){let j=w(a=>a.setAmountType),A=w(a=>a.setSellAmount),e=w(a=>a.sellAmount),t=w(a=>a.setUiSellAmountLocalFiatInput),{toUsd:r}=GA(),[o,i]=qo(e,A,hn);return(0,jh.useCallback)(({localFiatValue:a,shouldUpdateQuote:c,decimals:p,priceData:d})=>{let m=Kj(a.substring(0,Kr)),B=Mj(m,2);if(j("sell"),t(B),c&&d?.usd){let f=r(a),k=Fe(f,d.usd,p);i(k.toString())}},[j,t,i,r])}n();s();var Bh=v(x());n();s();var th=v(x());var R8={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"},rh=()=>{let{currentQuote:j}=aA(),{destinationNetworkFee:A,liquidityFee:e}=(0,th.useMemo)(()=>{function t(o){return o?{amount:new T(o.amount??0),amountUsd:o.amountUSD?parseFloat(o.amountUSD):null,pct:parseFloat(o.percentage??"0")}:rr}let r=new Map([]);return j&&yA(j)&&(r=j.steps.flatMap(o=>o.includedFeeCosts).reduce((o,i)=>{if(!i)return o;let a=R8[i.name];return a&&o.set(a,i),o},r)),{destinationNetworkFee:t(r.get("destinationNetwork")),liquidityFee:t(r.get("liquidityProvider"))}},[j]);return{destinationNetworkFee:A,liquidityFee:e}};n();s();var oh=v(x());var D8={calculate({currentQuote:j,gasEstimationPriceData:A}){return{amount:(j&&A?.gasEstimationAmount)??new T(0),amountUsd:(j&&A?.gasEstimationPriceUSDNumber)??null,pct:0}}},N8={calculate({currentQuote:j,gasEstimationPriceData:A,priceMap:e,networkID:t}){let r=(j?.fees??[]).find(a=>a.type==="tips"||a.type==="network"&&a.name!=="Token account deposits"),o=(j&&A?.gasEstimationAmount)??new T(0),i=(j&&A?.gasEstimationPriceUSDNumber)??null;if(r&&r.amount&&(o=o.plus(new T(r.amount)),i)){let a=Jj(t,new T(r.amount),e);a&&(i+=a)}return{amount:o,amountUsd:i,pct:0}}},K8={calculate({currentQuote:j,gasEstimationPriceData:A,maxGasEstimationPriceData:e}){return{amount:(j&&A?.gasEstimationAmount)??new T(0),amountUsd:(j&&A?.gasEstimationPriceUSDNumber)??null,maxAmount:(j&&e?.gasEstimationAmount)??new T(0),maxAmountUsd:(j&&e?.gasEstimationPriceUSDNumber)??null,pct:0}}},nh=({priceMap:j})=>{let{currentQuote:A}=aA(),e=w(p=>p.sellFungible),t=w(p=>p.gasEstimation),r=e?.data.chain.id??iA.Solana.Mainnet,{data:o,isLoading:i}=ds(r,mi(t.estimate)),{data:a}=ds(r,mi(t.estimateWithBuffer));return{networkFee:(0,oh.useMemo)(()=>$.isEVMNetworkID(r)?K8.calculate({currentQuote:A,gasEstimationPriceData:o,maxGasEstimationPriceData:a}):$.isSolanaNetworkID(r)?N8.calculate({currentQuote:A,gasEstimationPriceData:o,networkID:r,priceMap:j}):D8.calculate({currentQuote:A,gasEstimationPriceData:o}),[A,o,a,r,j]),isFetchingGasEstimationPrice:i}};n();s();var sh=v(x());var L8={calculate(){return rr}},U8={calculate({currentQuote:j,networkID:A,priceMap:e}){let t=H6(j);return{amount:t,amountUsd:Jj(A,t,e),pct:0}}},ih=({priceMap:j})=>{let{currentQuote:A}=aA(),t=w(o=>o.sellFungible)?.data.chain.id??iA.Solana.Mainnet;return{nonIncludedFees:(0,sh.useMemo)(()=>A&&yA(A)?U8.calculate({currentQuote:A,networkID:t,priceMap:j}):L8.calculate(),[t,A,j])}};n();s();var ah=v(x());var Q8={calculate(j){let A=(j?.fees??[]).find(e=>e.type==="phantom");return{amount:new T(A?.amount??0),amountUsd:null,pct:A?.percentage??0}}},H8={calculate(j){let A=j.steps.flatMap(e=>e.feeCosts).find(e=>e.name==="phantom");return{amount:new T(A?.amount??0),amountUsd:null,pct:parseFloat(A?.percentage??"0")}}},ch=()=>{let{currentQuote:j}=aA();return{phantomFee:(0,ah.useMemo)(()=>ld(j),[j])}};function ld(j){return He(j)?Q8.calculate(j):yA(j)?H8.calculate(j):rr}n();s();var ph=v(x());var V8={calculate({currentQuote:j,networkID:A,priceMap:e}){let t=(j?.fees??[]).find(r=>r.name==="Token account deposits");return{amount:new T(t?.amount??0),amountUsd:t?.amount?Jj(A,new T(t.amount),e):null,pct:t?.percentage??0}}},X8={calculate(){return rr}},uh=({priceMap:j})=>{let{currentQuote:A}=aA(),t=w(o=>o.sellFungible)?.data.chain.id??iA.Solana.Mainnet;return{tokenAccountFee:(0,ph.useMemo)(()=>He(A)?V8.calculate({currentQuote:A,networkID:t,priceMap:j}):X8.calculate(),[A,t,j])}};n();s();var lh=v(x());var dh={calculate:({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,networkID:t,priceMap:r})=>{let o=j.amount.plus(A.amount).plus(e.amount);return{amount:o,amountUsd:Jj(t,o,r),pct:0}}},z8={calculate:({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,networkID:t,priceMap:r})=>{let o=dh.calculate({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,networkID:t,priceMap:r}),i=j.amount.plus(A.maxAmount??0).plus(e.amount);return{...o,maxAmount:i,maxAmountUsd:Jj(t,i,r)}}},mh=({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,priceMap:t})=>{let o=w(a=>a.sellFungible)?.data.chain.id??iA.Solana.Mainnet;return{totalFees:(0,lh.useMemo)(()=>$.isEVMNetworkID(o)?z8.calculate({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,networkID:o,priceMap:t}):dh.calculate({tokenAccountFee:j,networkFee:A,nonIncludedFees:e,networkID:o,priceMap:t}),[A,o,e,t,j])}};var be=()=>{let j=w(B=>B.gasEstimation.isFetching),A=nr(),{data:e={}}=nt({query:{data:A.map(B=>_j(B))}}),{networkFee:t,isFetchingGasEstimationPrice:r}=nh({priceMap:e}),o=j||r,{phantomFee:i}=ch(),{tokenAccountFee:a}=uh({priceMap:e}),{nonIncludedFees:c}=ih({priceMap:e}),{totalFees:p}=mh({tokenAccountFee:a,networkFee:t,nonIncludedFees:c,priceMap:e}),{destinationNetworkFee:d,liquidityFee:m}=rh();return(0,Bh.useMemo)(()=>({phantomFee:i,networkFee:t,tokenAccountFee:a,totalFees:p,nonIncludedFees:c,destinationNetworkFee:d,liquidityFee:m,isFetchingFees:o}),[i,t,a,p,c,d,m,o])};n();s();var W8=20;function ic(j,A){let e=hA.optimisticUpdates(),t=j.getQueryData(e)??[];j.setQueryData(e,[...t.filter(r=>r.id!==A.id),A])}function kh(j,A){let e=hA.optimisticUpdates(),t=j.getQueryState(e);if(t){let r=A??Date.now(),o=t.dataUpdatedAt,i=eA({seconds:W8});return r-o>i?(j.removeQueries({queryKey:e}),[]):t?.data??[]}else return[]}function _n(j){return`${j.type}-${j.data.key}`}n();s();var dd=v(x());var J8=.05,Y8=({sellNetworkId:j,buyNetworkId:A,destinationMinRequiredBalance:e,priceMap:t})=>{if(!j||!A||!t)return new T(0);let r=J(_j($.getChainID(j))),o=J(_j($.getChainID(A))),i=t[r]?.usd,a=t[o]?.usd;if(!i||!a)return new T(0);let c=wA(e.toNumber(),$.getTokenDecimals(A)),p=Aj(c.toNumber(),a),d=Fe(p,i,$.getTokenDecimals(j));return new T(d).times(1+J8)},lo=({sellFungible:j,buyFungible:A})=>{let e=j?.data.chain.id,t=A?.data.chain.id,r=t??e,o=HA(e,t),{fungible:i}=Ce({key:A?.data.key}),{data:a}=FA(),c=(0,dd.useMemo)(()=>a?.addresses.find(f=>f.networkID===r),[a,r]),d=nr().map(f=>_j(f)),{data:m}=nt({query:{data:d},queryOptions:{refetchInterval:!1}}),{data:B=0}=ms(c);return(0,dd.useMemo)(()=>{if(i)return new T(0);let f=new T(B);return o?Y8({sellNetworkId:e,buyNetworkId:t,destinationMinRequiredBalance:f,priceMap:m}):f},[i,B,o,e,t,m])};n();s();var md=v(x()),mo=j=>{let A=j?.data.chain.id,{data:e}=FA(),t=(0,md.useMemo)(()=>e?.addresses.find(o=>o.networkID===A),[e,A]),{data:r=0}=ms(t);return(0,md.useMemo)(()=>new T(r),[r])};function Bd(){let j=AA(),A=U6(),e=w(mA=>mA.sellFungible)??A,t=w(mA=>mA.buyFungible),r=w(mA=>mA.primaryCurrency),o=w(mA=>mA.isFetchingQuote),i=w(mA=>mA.sellAmount),a=w(mA=>mA.uiSellAmountCryptoInput),c=w(mA=>mA.setSellFungible),p=w(mA=>mA.uiSellAmountLocalFiatInput),d=w(mA=>mA.amountType),m=w(mA=>mA.setSwapFilter),{data:B}=ze(),{data:f}=We(),k=sc(e),E=e?.data.key,{fungible:g}=Ce({key:E}),y=e?.data.chain.id,F=t?.data.chain.id,{totalFees:S}=be(),{data:I}=ls({networkID:y}),O=HA(y,F),M=mo(e),P=lo({sellFungible:e,buyFungible:t}),X=e?.data.amount,_=e?e.data.decimals:0,h=(0,qe.useMemo)(()=>yi({sellFungible:e,totalFees:S.amount,transactionSpeedsToUnitCost:$.isEVMNetworkID(e.data.chain.id)?I:void 0,isBridge:O,minRequiredBalance:{source:M,destination:P},customPriorityFee:uo(B??0),customTip:uo(f??0)}),[e,S.amount,I,O,P,M,B,f]),q=(0,qe.useMemo)(()=>d==="buy"?new T(a).isLessThanOrEqualTo(new T(h)):i===""?!0:new T(i).isLessThanOrEqualTo(new T(h)),[d,h,i,a]),{currentQuote:C}=aA(),{data:R}=$j({query:{data:V(e)}}),K=R?.usd,{data:D}=$j({query:t?{data:V(t)}:void 0}),L=WF(),H=Ah(),U=eh(),N=YF(),SA=(0,qe.useCallback)(()=>{let mA=C?.sellAmount?wA(C?.sellAmount,_).toString():i,rj=C?.buyAmount,wj=t?.data.decimals??0,Tj=D?.usd;L({buyAmountFromQuote:rj,buyFungibleDecimals:wj,buyFungibleUsdPrice:Tj,sellAmountFromQuote:mA,sellFungibleUsdPrice:K})},[C?.sellAmount,C?.buyAmount,_,i,t?.data.decimals,D?.usd,L,K]),dA=(0,qe.useCallback)(mA=>{H({fungibleValue:mA,decimals:_,shouldUpdateQuote:!0})},[_,H]),qA=(0,qe.useCallback)(mA=>{U({priceData:R,localFiatValue:mA,decimals:_,shouldUpdateQuote:!0})},[_,R,U]),{fromUsd:fj}=GA(),MA=(0,qe.useCallback)(mA=>{m(mA);let rj=T(h).multipliedBy(mA);if(r==="crypto")H({fungibleValue:rj.toString(),decimals:_,shouldUpdateQuote:!0,shouldTrimLength:!1});else if(K){let wj=Aj(Number(rj),K),Tj=fj(wj).toString();U({priceData:R,localFiatValue:Tj,decimals:_,shouldUpdateQuote:!0})}},[m,h,r,K,H,_,U,R,fj]);(0,qe.useEffect)(()=>{let mA=kh(j);if(g){let rj={...g},wj=mA.find(Tj=>Tj.id===_n(g));wj&&g.data.amount!==wj.amount&&(rj.data={...rj.data,amount:wj.amount}),rj.data.amount!==X&&c(rj)}},[g,X,c,j]),(0,qe.useEffect)(()=>{d==="buy"&&k&&N({amount:C?.sellAmount,decimals:_,usdPrice:K})},[d,C?.sellAmount,_,R?.usd,k,K,N]);let Ej=vn();return{maxSellAmount:h,sellFungible:e,notEnoughAssets:!q,uiSellAmountCryptoInput:a,uiSellAmountLocalFiatInput:p,hasMinimumSellAmount:Ej,isFetchingQuote:o,handleToggleCurrencyClick:SA,handleFiatAmountInputChange:qA,handleCryptoAmountInputChange:dA,handleSwapFilterClick:MA}}n();s();var eO=v(x());n();s();n();s();var Z8=v(Qw());var JSA={network:{id:$.solana.mainnetID,name:$.solana.name,symbol:$.solana.tokenSymbol,imageUrl:$.solana.iconUrl},tokenType:"SolanaNative",symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:0};n();s();n();s();n();s();n();s();function kd(j){if(!Number.isSafeInteger(j)||j<0)throw new Error(`Wrong positive integer: ${j}`)}function tO(j){if(typeof j!="boolean")throw new Error(`Expected boolean, not ${j}`)}function fh(j,...A){if(!(j instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length>0&&!A.includes(j.length))throw new TypeError(`Expected Uint8Array of length ${A}, not of length=${j.length}`)}function rO(j){if(typeof j!="function"||typeof j.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kd(j.outputLen),kd(j.blockLen)}function oO(j,A=!0){if(j.destroyed)throw new Error("Hash instance has been destroyed");if(A&&j.finished)throw new Error("Hash#digest() has already been called")}function nO(j,A){fh(j);let e=A.outputLen;if(j.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}var sO={number:kd,bool:tO,bytes:fh,hash:rO,exists:oO,output:nO},ac=sO;n();s();n();s();var iO={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var pc=j=>new DataView(j.buffer,j.byteOffset,j.byteLength),xe=(j,A)=>j<<32-A|j>>>A,aO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!aO)throw new Error("Non little-endian hardware is not supported");var cO=Array.from({length:256},(j,A)=>A.toString(16).padStart(2,"0"));function Eh(j){if(!(j instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let e=0;e<j.length;e++)A+=cO[j[e]];return A}function fd(j){if(typeof j!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof j}`);return new TextEncoder().encode(j)}function Ed(j){if(typeof j=="string"&&(j=fd(j)),!(j instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof j})`);return j}var cc=class{clone(){return this._cloneInto()}};function gd(j){let A=t=>j().update(Ed(t)).digest(),e=j();return A.outputLen=e.outputLen,A.blockLen=e.blockLen,A.create=()=>j(),A}function pO(j,A,e,t){if(typeof j.setBigUint64=="function")return j.setBigUint64(A,e,t);let r=BigInt(32),o=BigInt(4294967295),i=Number(e>>r&o),a=Number(e&o),c=t?4:0,p=t?0:4;j.setUint32(A+c,i,t),j.setUint32(A+p,a,t)}var uc=class extends cc{constructor(A,e,t,r){super(),this.blockLen=A,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(A),this.view=pc(this.buffer)}update(A){ac.exists(this);let{view:e,buffer:t,blockLen:r}=this;A=Ed(A);let o=A.length;for(let i=0;i<o;){let a=Math.min(r-this.pos,o-i);if(a===r){let c=pc(A);for(;r<=o-i;i+=r)this.process(c,i);continue}t.set(A.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=A.length,this.roundClean(),this}digestInto(A){ac.exists(this),ac.output(A,this),this.finished=!0;let{buffer:e,view:t,blockLen:r,isLE:o}=this,{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let m=i;m<r;m++)e[m]=0;pO(t,r-8,BigInt(this.length*8),o),this.process(t,0);let a=pc(A),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=c/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<p;m++)a.setUint32(4*m,d[m],o)}digest(){let{buffer:A,outputLen:e}=this;this.digestInto(A);let t=A.slice(0,e);return this.destroy(),t}_cloneInto(A){A||(A=new this.constructor),A.set(...this.get());let{blockLen:e,buffer:t,length:r,finished:o,destroyed:i,pos:a}=this;return A.length=r,A.pos=a,A.finished=o,A.destroyed=i,r%e&&A.buffer.set(t),A}};var uO=(j,A,e)=>j&A^~j&e,lO=(j,A,e)=>j&A^j&e^A&e,dO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mr=new Uint32Array(64),lc=class extends uc{constructor(){super(64,32,8,!1),this.A=dr[0]|0,this.B=dr[1]|0,this.C=dr[2]|0,this.D=dr[3]|0,this.E=dr[4]|0,this.F=dr[5]|0,this.G=dr[6]|0,this.H=dr[7]|0}get(){let{A,B:e,C:t,D:r,E:o,F:i,G:a,H:c}=this;return[A,e,t,r,o,i,a,c]}set(A,e,t,r,o,i,a,c){this.A=A|0,this.B=e|0,this.C=t|0,this.D=r|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(A,e){for(let m=0;m<16;m++,e+=4)mr[m]=A.getUint32(e,!1);for(let m=16;m<64;m++){let B=mr[m-15],f=mr[m-2],k=xe(B,7)^xe(B,18)^B>>>3,E=xe(f,17)^xe(f,19)^f>>>10;mr[m]=E+mr[m-7]+k+mr[m-16]|0}let{A:t,B:r,C:o,D:i,E:a,F:c,G:p,H:d}=this;for(let m=0;m<64;m++){let B=xe(a,6)^xe(a,11)^xe(a,25),f=d+B+uO(a,c,p)+dO[m]+mr[m]|0,E=(xe(t,2)^xe(t,13)^xe(t,22))+lO(t,r,o)|0;d=p,p=c,c=a,a=i+f|0,i=o,o=r,r=t,t=f+E|0}t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(t,r,o,i,a,c,p,d)}roundClean(){mr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},yd=class extends lc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},gh=gd(()=>new lc),fwA=gd(()=>new yd);var Ae=v(x());n();s();n();s();var hj=[];for(let j=0;j<256;++j)hj.push((j+256).toString(16).slice(1));function yh(j,A=0){return(hj[j[A+0]]+hj[j[A+1]]+hj[j[A+2]]+hj[j[A+3]]+"-"+hj[j[A+4]]+hj[j[A+5]]+"-"+hj[j[A+6]]+hj[j[A+7]]+"-"+hj[j[A+8]]+hj[j[A+9]]+"-"+hj[j[A+10]]+hj[j[A+11]]+hj[j[A+12]]+hj[j[A+13]]+hj[j[A+14]]+hj[j[A+15]]).toLowerCase()}n();s();var Fd,mO=new Uint8Array(16);function hd(){if(!Fd){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fd=self.crypto.getRandomValues.bind(self.crypto)}return Fd(mO)}n();s();n();s();var BO=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),Sd={randomUUID:BO};function kO(j,A,e){if(Sd.randomUUID&&!A&&!j)return Sd.randomUUID();j=j||{};let t=j.random??j.rng?.()??hd();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,A){if(e=e||0,e<0||e+16>A.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let r=0;r<16;++r)A[e+r]=t[r];return A}return yh(t)}var Sj=kO;n();s();var fO=50,Fh=({includeOwnedAssets:j,sellAsset:A,sellCaip19:e,ownedAssets:t,searchAssets:r})=>{if(!j||!A)return r;let o=B=>J(V(B)),i=o(A)??e,a=A.data.chain.id??(e&&ie(e).chainId),c=t.filter(B=>o(B)!==i&&$.compareNetworkID(a,B.data.chain.id)===0&&B.type!=="CompressedSPL").slice(0,fO-1),p=c.map(B=>[o(B),B]),d=new Map(p),m=r.filter(B=>!d.has(o(B)));return[...c,...m]};function EO({enableQuery:j=!0,chainFilter:A,sellCaip19:e}={}){let t=(0,Ae.useMemo)(()=>e?ie(e):void 0,[e]),{sellFungible:r,searchQuery:o,setSearchQuery:i,setNumSearchResults:a}=w(),c=Xi(o,150),{fungibles:p,isLoadingTokens:d,isRefetchingTokens:m,tokensError:B}=he(),f=sr(),[k,E]=(0,Ae.useState)(""),{data:g}=FA(),y=(0,Ae.useMemo)(()=>g?.addresses??[],[g]),{data:F,isSuccess:S,isFetching:I,error:O}=Cr({query:c,networkIds:A?[A]:[t?.chainId??r?.data.chain.id??$.solana.mainnetID],enableQuery:j,keepPreviousData:!0,searchContext:"swapper",supportedNetworkIds:f,chainAddresses:y}),M=!S&&I,P=(0,Ae.useMemo)(()=>p.filter(R=>R.type!=="CompressedSPL").map(R=>[J(V(R)),R]),[p]),X=(0,Ae.useMemo)(()=>{let R=fd(P.map(([D])=>D).join("~")),K=gh(R);return Eh(K)},[P]),_=(0,Ae.useMemo)(()=>new Map(P),[X]),h=(0,Ae.useMemo)(()=>{if(!F||F.length===0)return[];E(Sj());let R=F.reduce((K,D)=>{let L="";if(uj(D.type)){if(r&&uj(r.type)&&D.data.chain.id===r.data.chain.id||t&&t.chainId===D.data.chain.id&&t.resourceType==="nativeToken")return K;L=J(_j($.getChainID(D.data.chain.id)))}else{if(r&&D.data.tokenAddress===r.data.tokenAddress&&!A||t&&t.chainId===D.data.chain.id&&t.resourceType==="address"&&t.address===D.data.tokenAddress)return K;L=J(V(D))}let H,U=_.get(L);return U&&U.data.balance?H=U:H=D,H&&K.push(H),K},[]);return a(R.length),R},[_,F,r,a,A,t]),q=W();(0,Ae.useEffect)(()=>{S&&h.length===0&&q.capture("swapperNullSearchResult",{data:{searchQuery:c}})},[S,h,c,q]);let C=(0,Ae.useMemo)(()=>Fh({includeOwnedAssets:!c,sellAsset:r,sellCaip19:e,ownedAssets:p,searchAssets:h}),[c,p,h,r,e]);return(0,Ae.useMemo)(()=>({assets:C,initialFilterKey:A??r?.data.chain.id??t?.chainId,isLoading:d||M,isFetching:d||M||m,error:B??O,searchRef:k,setSearchQuery:i}),[C,d,M,m,B,O,r,k,i,t?.chainId,A])}n();s();var Bj=v(x()),Sh=v(In());n();s();var dc="https://help.phantom.com/hc/en-us/articles/27085326202515";var Rn=[.3,.5,1],gO=Rn.map(j=>`${j}%`),wh=[...gO,"custom"],Dn=[.5,1,2],yO=Dn.map(j=>`${j}%`),FO=[...yO,"custom"],hO="enable-higher-slippage-options",wd=wh.length-1,SO=5,wO=2,$d=.1,Id=30,$O=2,hh=(j,A)=>{if(!j)return;let e=parseFloat(j);if(isNaN(e))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(e>Id)return{message:A("swapSlippageSettingsCustomMaxError",{maxSlippage:Id}),severity:"critical"};if(e>$O)return{message:A("swapSlippageSettingsHighSlippageWarning"),severity:"warning"};if(e<$d)return{message:A("swapSlippageSettingsCustomMinError",{minSlippage:$d}),severity:"critical"}},IO=(j,A)=>A?j&&Dn.indexOf(j)!==-1?Dn.indexOf(j):j?wd:1:j&&Rn.indexOf(j)!==-1?Rn.indexOf(j):j?wd:0,vO=(j,A)=>A?j&&Dn.indexOf(j)===-1?`${j}`:"":j&&Rn.indexOf(j)===-1?`${j}`:"",bO=({onDismiss:j})=>{let{t:A}=gA(),e=W(),{data:[t]}=BA([hO]),{data:r,isFetched:o}=cr(),{mutateAsync:i}=Q6(),{selectedSetting:a,isFetched:c,setSlippageSetting:p}=XA(),[d,m]=(0,Bj.useState)(a.type),B=(0,Sh.default)(c),[f,k]=(0,Bj.useState)(!1),[E,g]=(0,Bj.useState)(0),[y,F]=(0,Bj.useState)(),[S,I]=(0,Bj.useState)(""),[O,M]=(0,Bj.useState)(),P=d==="auto",X=E===wd,_=P?!1:O?.severity==="critical"||X&&!S;(0,Bj.useEffect)(()=>{B!==c&&d!==a.type&&m(a.type)},[B,c,a.type,d]);let h=(0,Bj.useCallback)(L=>{if(E===L)return;M(void 0),g(L);let H=t?Dn:Rn;H[L]?(F(H[L]),I("")):F(void 0)},[E,t]),q=(0,Bj.useCallback)(L=>{let H=Kj(L.substring(0,SO)),U=Mj(H,wO),N=parseFloat(U);if(isNaN(N)){M(void 0),I("");return}I(U),M(hh(U,A))},[A]),C=(0,Bj.useCallback)(()=>{if(P)e.capture("slippageChanged",{data:{slippageType:"auto"}});else if(X){let L=parseFloat(S??"");i(L),e.capture("slippageChanged",{data:{slippageValue:L,slippageType:"custom"}}),F(void 0)}else y&&(i(y),e.capture("slippageChanged",{data:{slippageValue:y,slippageType:"preset"}}),I(""));p({type:d}),j()},[P,p,d,j,X,y,S,i,e]),R=(0,Bj.useCallback)(()=>{let L=IO(r,t),H=vO(r,t),U=t?Dn:Rn;g(L),F(U[L]),I(H),M(hh(H,A)),m(a.type)},[r,A,a.type,t]),K=(0,Bj.useCallback)(()=>{m(d==="auto"?"fixed":"auto")},[d,m]),D=(0,Bj.useMemo)(()=>({title:A("swapSlippageSettingsTitle"),subtitle:A("swapSlippageSettingsSubtitle",{minSlippage:$d,maxSlippage:Id}),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapSlippageSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,Bj.useEffect)(()=>{!f&&o&&(R(),k(!0))},[o,f,R]),{options:t?FO:wh,selectedIndex:E,customSlippageValue:S,i18nStrings:D,error:O,submitDisabled:_,isAutoEnabled:P,autoLearnMoreUrl:dc,onConfirm:C,onDismiss:j,onSelectOption:h,onChangeCustomSlippage:q,onResetToDefault:R,onToggleAutoSlippage:K}};n();s();var cj=v(x()),vh=v(In());n();s();var $h=v(x());var qO={type:"auto"},vd=()=>{let{priorityFeeSetting:j,isFetched:A,save:e}=xO();return{isFetched:A,selectedSetting:j,setPriorityFeeSetting:e}},xO=()=>{let{data:j,isFetched:A}=aj({key:"priorityFeeSettings",queryKey:hA.priorityFeeSettings()}),{mutateAsync:e}=mj({key:"priorityFeeSettings",queryKey:hA.priorityFeeSettings()}),t=(0,$h.useCallback)(async r=>{await e(r)},[e]);return{isFetched:A,priorityFeeSetting:j??qO,save:t}};var bd={input:{maxLength:10,maxDecimals:6},bounds:{min:1e-6,low:5e-6,high:1,max:5}},Ih=(j,A,e)=>{let t=parseFloat(j);if(isNaN(t))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(t>e.max)return{message:A("swapPriorityFeeSettingsCustomMaxError",{maxPriorityFee:e.max}),severity:"critical"};if(t<e.min)return{message:A("swapPriorityFeeSettingsCustomMinError",{minPriorityFee:e.min}),severity:"critical"};if(t>e.high)return{message:A("swapPriorityFeeSettingsHighFeeWarning"),severity:"warning"};if(t<e.low)return{message:A("swapPriorityFeeSettingsLowFeeWarning"),severity:"warning"}},TO=()=>{let[j,A]=(0,cj.useState)(bd.bounds);return(0,cj.useEffect)(()=>{(async()=>{try{let t=await ea({accounts:[],transactionType:"Swap"});A({min:t.min,low:t.low,high:t.high,max:t.max})}catch(t){b.captureError(t instanceof Error?t:new Error("Unable to fetch priority fee bounds."),"swapper")}})()},[]),j},PO=({onDismiss:j})=>{let{t:A}=gA(),e=W(),{data:t,isFetched:r}=ze(),{mutateAsync:o}=fF(),{selectedSetting:i,isFetched:a,setPriorityFeeSetting:c}=vd(),[p,d]=(0,cj.useState)(i.type),m=(0,vh.default)(a),[B,f]=(0,cj.useState)(!1),[k,E]=(0,cj.useState)(""),[g,y]=(0,cj.useState)("$0"),[F,S]=(0,cj.useState)(),I=p==="auto",O=I?!1:F?.severity==="critical"||!k,M=TO(),P=_j("solana"),{data:X}=$j({query:{data:P}}),_=X?.usd;(0,cj.useEffect)(()=>{if(!_)return;let D=Aj(Number(k),_);y(`$${D.toString()}`)},[k,_]),(0,cj.useEffect)(()=>{m!==a&&p!==i.type&&d(i.type)},[m,a,i.type,p]);let h=(0,cj.useCallback)(D=>{let L=Kj(D.substring(0,bd.input.maxLength)),H=Mj(L,bd.input.maxDecimals);if(isNaN(parseFloat(H))){S(void 0),E("");return}E(H),S(Ih(H,A,M))},[A,M]),q=(0,cj.useCallback)(()=>{if(I)o(null),b.addBreadcrumb("swapper","Priority fee setting changed to auto.","info"),e.capture("swapperPriorityFeeChanged",{data:{priorityFeeType:"auto"}});else if(k){let D=parseFloat(k??"");o(D),b.addBreadcrumb("swapper",`Priority fee setting changed to custom: ${D} SOL`,"info"),e.capture("swapperPriorityFeeChanged",{data:{priorityFeeValue:D,priorityFeeType:"custom"}})}c({type:p}),j()},[I,c,p,j,k,o,e]),C=(0,cj.useCallback)(()=>{let D=t?`${t}`:"";E(D),S(Ih(D,A,M)),d(i.type)},[t,A,i.type,M]),R=(0,cj.useCallback)(()=>{d(p==="auto"?"fixed":"auto"),E("")},[p,d]),K=(0,cj.useMemo)(()=>({title:A("swapPriorityFeeSettingsTitle"),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapPriorityFeeSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,cj.useEffect)(()=>{!B&&r&&(C(),f(!0))},[r,B,C]),{customPriorityFeeValue:k,customPriorityFeeValueInDollars:g,i18nStrings:K,error:F,submitDisabled:O,isAutoEnabled:I,onConfirm:q,onDismiss:j,onChangeCustomPriorityFee:h,onResetToDefault:C,onToggleAutoPriorityFee:R}};n();s();var pj=v(x()),Gh=v(In());n();s();var bh=v(x());var OO={type:"auto"},qh=()=>{let{tipSetting:j,isFetched:A,save:e}=MO();return{isFetched:A,selectedSetting:j,setTipSetting:e}},MO=()=>{let{data:j,isFetched:A}=aj({key:"tipSettings",queryKey:hA.tipSettings()}),{mutateAsync:e}=mj({key:"tipSettings",queryKey:hA.tipSettings()}),t=(0,bh.useCallback)(async r=>{await e(r)},[e]);return{isFetched:A,tipSetting:j??OO,save:t}};var qd={input:{maxLength:10,maxDecimals:6},bounds:{min:1e-6,low:5e-6,high:1,max:5}},xh=(j,A,e)=>{let t=parseFloat(j);if(isNaN(t))return{message:A("swapSettingsCustomInvalidValue"),severity:"critical"};if(t>e.max)return{message:A("swapTipSettingsCustomMaxError",{maxTip:e.max}),severity:"critical"};if(t<e.min)return{message:A("swapTipSettingsCustomMinError",{minTip:e.min}),severity:"critical"};if(t>e.high)return{message:A("swapTipSettingsHighFeeWarning"),severity:"warning"};if(t<e.low)return{message:A("swapTipSettingsLowFeeWarning"),severity:"warning"}},CO=()=>{let[j,A]=(0,pj.useState)(qd.bounds);return(0,pj.useEffect)(()=>{(async()=>{try{let t=await ea({accounts:[],transactionType:"Swap"});A({min:t.min,low:t.low,high:t.high,max:t.max})}catch(t){b.captureError(t instanceof Error?t:new Error("Unable to fetch tip bounds."),"swapper")}})()},[]),j},_O=({onDismiss:j})=>{let{t:A}=gA(),e=W(),{data:t,isFetched:r}=We(),{mutateAsync:o}=EF(),{selectedSetting:i,isFetched:a,setTipSetting:c}=qh(),[p,d]=(0,pj.useState)(i.type),m=(0,Gh.default)(a),[B,f]=(0,pj.useState)(!1),[k,E]=(0,pj.useState)(""),[g,y]=(0,pj.useState)("$0"),[F,S]=(0,pj.useState)(),I=p==="auto",O=I?!1:F?.severity==="critical"||!k,M=CO(),P=_j("solana"),{data:X}=$j({query:{data:P}}),_=X?.usd;(0,pj.useEffect)(()=>{if(!_)return;let D=Aj(Number(k),_);y(`$${D.toString()}`)},[k,_]),(0,pj.useEffect)(()=>{m!==a&&p!==i.type&&d(i.type)},[m,a,i.type,p]);let h=(0,pj.useCallback)(D=>{let L=Kj(D.substring(0,qd.input.maxLength)),H=Mj(L,qd.input.maxDecimals);if(isNaN(parseFloat(H))){S(void 0),E("");return}E(H),S(xh(H,A,M))},[A,M]),q=(0,pj.useCallback)(()=>{if(I)o(null),b.addBreadcrumb("swapper","Tip setting changed to auto.","info"),e.capture("swapperTipChanged",{data:{tipType:"auto"}});else if(k){let D=parseFloat(k??"");o(D),b.addBreadcrumb("swapper",`Tip setting changed to custom: ${D} SOL`,"info"),e.capture("swapperTipChanged",{data:{tipValue:D,tipType:"custom"}})}c({type:p}),j()},[I,c,p,j,k,o,e]),C=(0,pj.useCallback)(()=>{let D=t?`${t}`:"";E(D),S(xh(D,A,M)),d(i.type)},[t,A,i.type,M]),R=(0,pj.useCallback)(()=>{d(p==="auto"?"fixed":"auto"),E("")},[p,d]),K=(0,pj.useMemo)(()=>({title:A("swapTipSettingsTitle"),custom:A("swapSettingsCustom"),auto:A("swapSettingsAuto"),autoSubtitle:A("swapTipSettingsAutoSubtitle"),learnMore:A("commandLearnMore"),button:A("commandConfirm")}),[A]);return(0,pj.useEffect)(()=>{!B&&r&&(C(),f(!0))},[r,B,C]),{customTipValue:k,customTipValueInDollars:g,i18nStrings:K,error:F,submitDisabled:O,isAutoEnabled:I,onConfirm:q,onDismiss:j,onChangeCustomTip:h,onResetToDefault:C,onToggleAutoTip:R}};n();s();var fo=v(x());n();s();n();s();var Th=()=>[{chainId:"solana:101",address:"2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo",resourceType:"address"}];var Bo=(j,A)=>{let e=[];if(DO(j)&&!NO(j)&&e.push({type:"permanentDelegate",level:"warn",titleKey:"swapAssetWarningPermanentDelegate"}),(j.data.spamStatus==="NOT_VERIFIED"||j.data.spamStatus==="SPAM"||j.data.spamStatus==="POSSIBLE_SPAM")&&e.push({type:"unverified",level:"info",titleKey:"swapAssetWarningUnverified"}),!uj(j.type)&&A&&KO(A)){let t=JA.get(j.data.chain.id).nativeFungible;e.push({type:"lowBalance",level:"info",titleKey:"swapAssetWarningLowTokenBalance",options:{token:t.data.symbol??"",network:t.data.chain.name}})}return e};function DO(j){let A=j.data;return A?.mintExtensions?A.mintExtensions.some(e=>e.extension==="permanentDelegate"):!1}function NO(j){let A=V(j),e=Th();return A.resourceType==="address"?e.some(t=>t.resourceType===A.resourceType&&t.address===A.address&&t.chainId===A.chainId):!1}function KO(j){let A=JA.get(j.data.chain.id);return new T(j.data.amount?j.data.amount:0).lt(A.swapDefaultFee)}n();s();var Oh=v(x());n();s();function Ph(){return[new Pd,new xd,new Td,new Gd]}var xd=class{isEditable({sellAsset:A}){return!!A&&$.isSolanaNetworkID(A.data.chain.id)}},Gd=class{isEditable({currencyDenomination:A}){return A==="crypto"}},Td=class{isEditable({sellAsset:A,buyAsset:e}){return!HA(A?.data.chain.id,e?.data.chain.id)}},Pd=class{isEditable(){return UA.isFeatureEnabled("enable-swapper-exact-out")}};var mc=({sellAsset:j,buyAsset:A,currencyDenomination:e})=>{let t=(0,Oh.useMemo)(()=>Ph(),[]);return A?t.every(r=>r.isEditable({sellAsset:j,buyAsset:A,currencyDenomination:e})):!1};n();s();var Mh=v(x());n();s();var Od=class{isSupported(A,e,t,r,o){switch(A){case"sell":return!!(t&&o);case"buy":return!1}}},Md=class{isSupported(A){return A!=="buy"}};function Cd(){return[new Od,new Md]}var Bc=(j,A,e,t,r)=>(0,Mh.useMemo)(()=>Cd(),[]).every(i=>i.isSupported(j,A,e,t,r));n();s();var _d=class{format(A,e){return`${Uj(A)} ${e}`}},Rd=class{format(A,e){return`${zi(A,{compact:!0})} ${e}`}},Dd=class{format(A){return zi(A,{compact:!0})}};function ko(j){switch(j){case"full":return new _d;case"compact":return new Rd;case"compactNoSymbol":return new Dd}}var Nd=class{format(A,e,t){return`${Uj(Fe(Number(A),t,e.data?.decimals??0))} ${e.data.symbol??""}`}},kc=class{format(A,e,t){return zi(Fe(Number(A),t,e.data?.decimals??0),{compact:!0})}},Kd=class{noSymbolDisplayStrategy;constructor(A){this.noSymbolDisplayStrategy=A}format(A,e,t){return`${this.noSymbolDisplayStrategy.format(A,e,t)} ${e.data?.symbol??""}`}};function Ld(j){switch(j){case"full":return new Nd;case"compact":return new Kd(new kc);case"compactNoSymbol":return new kc}}var LO=gj?[.25,.5,1]:[.5,1],Ch=gj?ko("full"):ko("compactNoSymbol"),_h=gj?Ld("full"):Ld("compact"),UO={chainId:iA.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"},QO=()=>{let A=w(MA=>MA.amountType)==="sell"?"sell":"buy",e=w(MA=>MA.primaryCurrency),{currencySymbol:t,toUsd:r}=GA(),o=e==="fiat"?t:void 0,i=w(MA=>MA.swapFilter),a=w(MA=>MA.setSwapFilter),c=xp(),{handleCryptoAmountInputChange:p,handleFiatAmountInputChange:d,sellFungible:m,uiSellAmountCryptoInput:B,isFetchingQuote:f,notEnoughAssets:k,hasMinimumSellAmount:E,handleToggleCurrencyClick:g,uiSellAmountLocalFiatInput:y,handleSwapFilterClick:F,maxSellAmount:S}=Bd(),I=w(MA=>MA.buyFungible),O=I?V(I):UO,M=Nh(O),P=Nh(V(m)),X=Bc("sell",m,P,I,M),_=(0,fo.useMemo)(()=>({fungible:m,perspective:"sell",amount:e==="crypto"?B:y,secondaryCryptoSubtitle:e==="fiat"?Rh(r(y),m,_h,P):void 0,balance:Dh(m,Ch,c,S),isAmountLoading:f&&A!=="sell",isSecondaryCryptoSubtitleLoading:f,isWarning:k||!E,isAmountEditable:!0,supportsCurrencyDenominationSwitching:X,amountPrefix:o,filters:LO,selectedFilter:i,warnings:[],usdAmount:P?Aj(Number(B),P):0}),[m,e,B,y,P,c,S,f,A,k,E,X,o,i,r]),{handleSwitchTokensClick:h,cryptoAmountInputValue:q,localFiatAmountInputValue:C,handleCryptoAmountInputChange:R}=ud(),K=Bc("buy",m,P,I,M),D=mc({sellAsset:m,buyAsset:I,currencyDenomination:e}),L=HA(m?.data.chain.id,I?.data.chain.id),H=I?.data.chain.id,{fungible:U}=Ce({key:H?Bs(H,void 0):void 0}),N=(0,fo.useMemo)(()=>{if(I)return{fungible:I,perspective:"buy",balance:Dh(I,Ch,c),amount:e==="crypto"?q:C,secondaryCryptoSubtitle:e==="fiat"?Rh(r(C),I,_h,M):void 0,isAmountLoading:f&&A!=="buy",isSecondaryCryptoSubtitleLoading:f,isWarning:!1,isAmountEditable:D,supportsCurrencyDenominationSwitching:K,amountPrefix:o,filters:[],selectedFilter:void 0,warnings:Bo(I,L?U:void 0),usdAmount:M?Aj(Number(q),M):0}},[I,c,e,q,C,M,f,A,D,K,o,r,L,U]),SA=(0,fo.useCallback)((MA,Ej)=>{switch(a(void 0),MA){case"sell":e==="crypto"?p(Ej):d(Ej);break;case"buy":if(e==="fiat")return;R(Ej);break}},[a,e,p,d,R]),dA=W(),qA=(0,fo.useCallback)(async()=>{A==="sell"&&(g(),await dA.capture("swapperToggleQuoteCurrency",{data:{value:e==="fiat"?"native":"fiat"}}))},[A,dA,e,g]),fj=(0,fo.useCallback)((MA,Ej)=>{Ej==="sell"&&F(MA)},[F]);return{switchPerspective:h,sell:_,buy:N,setAmount:SA,switchCurrencyDenomination:qA,setFilter:fj,currencyDenomination:e}};function Rh(j,A,e,t){let r=A.data?.symbol??"",o=Number(j);return t?e.format(o,A,t):`0 ${r}`}function Dh(j,A,e,t){let r=t?T(t):j.data?.balance;if(!(!r||e))return A.format(r,j.data?.symbol??"")}var Nh=j=>{let{data:A}=$j({query:{data:j}});return A?.usd};n();s();var HO=["lastSubmittedPairsV2","slippageTolerance"],Ud=j=>{let A=String(j.queryKey[1]);return HO.includes(A)};n();s();var Kh=v(x());function Qd(j){let{t:A}=gA();return(0,Kh.useMemo)(()=>{let{networkFee:e,phantomFee:t,tokenAccountFee:r,nonIncludedFees:o,destinationNetworkFee:i,liquidityFee:a}=j;return{networkFee:{label:A("swapQuoteNetwork"),valueUsd:e.amountUsd,maxValueUsd:e.maxAmountUsd},bridgeFee:{label:A("swapQuoteBridgeFee"),valueUsd:o.amountUsd,maxValueUsd:o.maxAmountUsd},tokenAccountFee:{label:A("swapQuoteOneTimeTokenAccount"),valueUsd:r.amountUsd},phantomFeePercent:{label:t.pct?A("swapQuoteFeeDisclaimer",{feePercentage:ss(t.pct)}):"",value:t.pct?`${t.pct}`:""},destinationNetworkFee:{label:A("swapQuoteDestinationNetwork"),valueUsd:i.amountUsd},liquidityProviderFee:{label:A("swapQuoteLiquidityProvider"),valueUsd:a.amountUsd}}},[j,A])}n();s();var Lh=v(x());function VO(){let j=W(),A=w(m=>m.buyFungible),e=w(m=>m.sellFungible),t=w(m=>m.setBuyFungible),r=w(m=>m.setSellFungible),o=w(m=>m.setSellAmount),i=w(m=>m.setUiSellAmountCryptoInput),a=w(m=>m.resetQuote),c=w(m=>m.setSwapFilter),p=e?.data.amount,{cancelQuotes:d}=Ac();return(0,Lh.useCallback)(async m=>{if(e&&Qr(m,e)){m&&m.data.amount!==p&&(r(m),c(void 0));return}await d();let B=co(m);j.capture("swapperUpdateFromAsset",{data:B}),r(m),c(void 0),A&&e&&Qr(m,A)&&t(e),m&&e?.data.chain.id!==m.data.chain.id&&(a(),t(void 0),o(""),i(""))},[j,A,d,p,a,e,t,o,r,c,i])}n();s();var zh=v(x());n();s();var Br=v(x());n();s();n();s();n();s();var fc=class{sections(A){let e=Gt().map(o=>o.programId),t=A.reduce((o,i)=>{if(i.data.spamStatus==="VERIFIED")return o.verified.push(i),o;if(i.type!=="SPL"||!i.data.ugcTokenMeta||i.data.ugcTokenMeta.status==="graduated"||!e.includes(i.data.ugcTokenMeta.programId))return o.unverified.push(i),o;let a=i.data.ugcTokenMeta.programId,c=o[a]??[];return c.push(i),o[a]=c,o},{verified:[],unverified:[]}),r=Gt().map(o=>{let i=t[o.programId]??[];return{id:o.programId,header:{title:G.t("swapSectionTitleTokens",{section:o.name}),iconUrl:o.iconUrl},data:i,behavior:"collapsible"}});return[{id:"verified",data:t.verified,behavior:"static"},{id:"unverified",header:{title:G.t("swapUnverifiedTokens")},data:t.unverified,behavior:"collapsible"},...r]}};function Uh(){return new fc}n();s();var Hh=v(x());n();s();var Ec=v(x());var Qh=()=>{let{data:j}=aj({key:"lastSelectedTokens",queryKey:hA.lastSelectedTokens()}),A=(0,Ec.useMemo)(()=>j?JSON.parse(j):{},[j]),{mutateAsync:e}=mj({key:"lastSelectedTokens",queryKey:hA.lastSelectedTokens()}),t=(0,Ec.useCallback)(async r=>{let o={...A,[r]:!0};await e(JSON.stringify(o))},[A,e]);return{lastSelectedTokens:A,storeSelectedToken:t}};n();s();var gc=class{constructor(A,e){this.lastSelectedTokens=A;this.storeSelectedToken=e}intercept(A){let e=J(V(A));return this.lastSelectedTokens[e]||this.storeSelectedToken(e),"continue"}};n();s();n();s();var yc=class{constructor(A){this.lastSelectedTokens=A}intercept(A,e){switch(A.type){case"SPL":{let t=J(V(A)),r=this.lastSelectedTokens[t];return A.data.ugcTokenMeta?.status==="preDeploy"&&!r?(KF(A),e("ugcWarning"),"interrupt"):"continue"}default:return"continue"}}};function JO({lastSelectedTokens:j,storeSelectedToken:A}){return[new gc(j,A),new yc(j)]}function Vh(){let{lastSelectedTokens:j,storeSelectedToken:A}=Qh();return(0,Hh.useMemo)(()=>JO({lastSelectedTokens:j,storeSelectedToken:A}),[j,A])}var Xh=(0,Br.createContext)(void 0),YO=({children:j})=>{let A=(0,Br.useMemo)(()=>Uh(),[]),e=Vh();return Br.default.createElement(Xh.Provider,{value:{buyAssetSectionAdapter:A,interceptors:e}},j)},Fi=()=>{let j=(0,Br.useContext)(Xh);if(!j)throw new Error("useSwapAssetSelect must be used within a SwapAssetSelectProvider");return j};var ZO=()=>{let{interceptors:j}=Fi();return{executeInterceptors:(0,zh.useCallback)((e,t)=>{for(let r of j)if(r.intercept(e,t)==="interrupt")return"interrupt";return"continue"},[j])}};n();s();var Eo=v(x());var Wh=3;function Hd(j){return{id:j.id,data:j.data,...j.header?{header:j.header}:{}}}var AM=j=>{let[A,e]=(0,Eo.useState)({}),t=(0,Eo.useCallback)((i,a)=>e(c=>({...c,[i]:a})),[]),{buyAssetSectionAdapter:r}=Fi(),o=(0,Eo.useMemo)(()=>r.sections(j),[r,j]);return(0,Eo.useMemo)(()=>o.map(i=>{switch(i.behavior){case"static":return Hd(i);case"collapsible":{if(i.data.length<=Wh)return Hd(i);let a=A[i.id],c=a?i.data:i.data.slice(0,Wh),p=()=>t(i.id,!a),d=Hd(i);return{...d,header:{...d.header,button:{label:a?G.t("commandShowLess"):G.t("commandShowMore"),onClick:p}},data:c}}}}),[o,A,t])};n();s();n();s();n();s();var Jh=3,Fc=()=>{let j=UA.getMultivariateAssignment("latest-terms-of-service-version-number");return j&&l.number().safeParse(Number(j)).success?Number(j):Jh};var Vd=()=>{let j=lA(),A=AA();return uA({mutationFn:async t=>{if(!t)await vf(j);else{let r=Fc();if(!r)return null;await If(j,r)}A.setQueryData(["termsHaveBeenAcknowledgedLastSeenVersion"],t)}})};n();s();n();s();var Yh=async j=>await j.get("termsHaveBeenAcknowledgedLastSeenVersion");var hi=()=>{let j=lA(),A=async()=>{let e=Fc();if(!e)return!1;let t=await Yh(j);return!(t===null||t<e)};return tA({queryKey:["termsHaveBeenAcknowledgedLastSeenVersion"],queryFn:A})};n();s();var Zh=v(x());n();s();var kr=v(x());n();s();var VqA=["firstTimeOnboarding","isResettingApp"],Xd=["seed","seedless","privateKey"];var zd=({onSuccess:j,onError:A}={})=>{let{t:e}=gA(),{data:[t]}=BA(["enable-onboarding-claim-username"]),{mutateAsync:r,isIdle:o,isPending:i,error:a}=Qm(),c=eB(_=>_.username),{refetch:p}=Po(),{data:d,error:m,refetch:B}=VA(),{data:f,refetch:k}=FA(),{data:E}=Zm(),g=(0,kr.useMemo)(()=>{if(f)switch(f.type){case"seedless":case"seed":return f.seedIdentifier;case"privateKey":return f.privateKeyIdentifier;default:return}},[f]),y=(0,kr.useMemo)(()=>{let _={};return f?.addresses.forEach(h=>{_[h.networkID]=h.address}),_},[f?.addresses]),F=f&&Xd.includes(f.type),S=!d||m instanceof Hm,I=g&&E&&y,O=t&&F&&S&&I,M=(0,kr.useCallback)(async()=>{if(Ct()||!t)return!1;let _=await k();if(!(_&&_.data&&Xd.includes(_.data.type)))return!1;let q=await p(),C=q&&q.data,R=await B(),K=R&&R.data;return!C||C&&!K},[t,k,p,B]),P=(0,kr.useMemo)(()=>a instanceof Error&&a.message!=="Unknown error"?a.message:e("settingsClaimUsernameError"),[a,e]),X=(0,kr.useCallback)(async()=>{I&&r({username:c,icon:jM(),addresses:y,accountIdentifiers:E.map(_=>_.identifier),secretIdentifiers:[g]}).then(()=>j?.()).catch(()=>A?.())},[E,r,I,A,j,y,g,c]);return(0,kr.useMemo)(()=>({handleClaimUsername:X,shouldNavigateToQuickClaimUsername:M,quickClaimUsernameAvailable:O,claimUsernameErrorMessage:P,isClaimingUsernamePending:i,isClaimUsernameIdle:o}),[P,X,o,i,O,M])},jM=()=>`https://assets.phantom.app/assets/phemojis/variant${eM(1,337)}.png`,eM=(j,A)=>(j=Math.ceil(j),A=Math.floor(A),Math.floor(Math.random()*(A-j)+j));var tM=()=>{let j=W(),{data:[A]}=BA(["enable-onboarding-claim-username-dropoff"]),{data:e}=ju("QuickClaimUsername"),{quickClaimUsernameAvailable:t}=zd();return(0,Zh.useMemo)(()=>({shouldShow:A&&e?.length&&t,showFlow:r=>{j.capture("onboardingUsernameClaimDropoff"),r?.()}}),[j,A,t,e?.length])};n();s();var rM=()=>{let{data:j,isLoading:A}=hi(),{mutate:e}=Vd(),{data:[t]}=BA(["enable-terms-of-service-update-interstitial"]);return{shouldShowTermsOfServiceUpdateInterstitial:!A&&!j&&t,setTermsAcknowledgement:e}};n();s();n();s();var iM=v(x());n();s();var AS=Rt(W,j=>new Wd(j)),Wd=class{#A;constructor(A){this.#A=A}onOpen=()=>this.#A.capture("connectHardwareOpen");onSelectedChains=A=>{let e=new Set(A),t=[];for(let o of $.getAllChainIDs())e.has(o)&&t.push(o);let r={numChains:t.length,selectedChains:t.map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(", ")};this.#A.capture("connectHardwareSelectedChains",{data:r})};onDerivedAccounts=A=>{let e={};for(let[t,r]of Object.entries(A.derivedAddresses)){if(!oM(t))continue;let o={numberOfDerivedAccounts:r.addresses.length};r.duration!==void 0&&(o.derivationDuration=r.duration),e[t]=o}this.#A.capture("connectHardwareAccountsDerived",{data:{...e}})};onDiscoveredAccounts=A=>{let{discoveredAccounts:e}=A,t={};for(let r of e){if(r.status==="undiscovered")continue;let o=r.accounts.reduce((i,{derivationPathType:a,hasAccountActivity:c})=>{let p=hr.getAddressType(a);return i[p]={derivationPathType:a,hasAccountActivity:c},i},{});for(let{hasAccountActivity:i,derivationPathType:a}of Object.values(o)){if(!i)continue;let c=t[a]??0;t[a]=c+1}}this.#A.capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:t}})};onConnectedAccounts=A=>{let e={};for(let t of A.accounts){let r=[...t.addresses,...t.publicKeys].reduce((o,i)=>{let a=hr.getAddressType(i.pathType);return o[a]=i.pathType,o},{});for(let o of Object.values(r)){let i=e[o]??0;e[o]=i+1}}this.#A.capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:A.accounts.length,numberOfAccountsImportedByDerivationPath:e}})}};function oM(j){return typeof j!="string"?!1:Object.keys(qp).includes(j)}n();s();n();s();n();s();var hc="@phantom/onboarding",Tt={firstTimeOnboarding:[`${hc}:first-time-onboarding`],isResettingApp:[`${hc}:is-resetting-app`],deriveLedgerAccounts:[`${hc}:derive-ledger-accounts`],discoverLedgerAccounts:[`${hc}:discover-ledger-accounts`]};n();s();n();s();n();s();n();s();var aM="/discover/v1",cM={Accept:"application/json"},pM=j=>{if(!j||!Array.isArray(j.accounts))return!1;for(let A of j.accounts)if(!(typeof A.address=="string"&&typeof A.amount=="string"&&(!A.lastActivityTimestamp||typeof A.lastActivityTimestamp=="number")&&A.chain&&typeof A.chain.id=="string"&&new Set($.getAllNetworkIDs()).has(A.chain.id)&&typeof A.chain.name=="string"&&typeof A.chain.symbol=="string"&&typeof A.chain.imageUrl=="string"))return!1;return!0},uM=j=>!!j&&typeof j.message=="string",Jd=async j=>{if(!j.accounts.length)throw new Error("Must send at least 1 account for discovery");let A=await z.api().headers(cM).post(aM,j),e=A.data;if(!sA(A))throw uM(e)?new Error(e.message):new Error(`Unable to discover accounts with args: ${JSON.stringify(j)}`);if(pM(e))return e;throw new Error(`Invalid discover accounts response: ${JSON.stringify(e)}`)};var lM="fetch-multi-chain-accounts-by-seed",dM=()=>["bitcoinTaproot","bitcoinNativeSegwit"],mM=()=>["bip44Change","bip44","deprecated"],BM=()=>["bip44Ethereum","bip44EthereumSecondary","bip44EthereumTertiary"],kM=()=>["bip44Sui"],fM=(j,A)=>dM().map(e=>{let t={pathType:e,index:j},{publicKey:r}=A.derivePathType(e,j),o=hr.getAddressType(e),i=as({publicKey:r,addressType:o});return{chainType:o,chainId:iA.Bitcoin.Mainnet,address:i,publicKey:Buffer.from(r).toString("hex"),pathParams:t}}),EM=(j,A)=>BM().map(e=>{let t={pathType:e,index:j},{publicKey:r}=A.derivePathType(e,j),o=hr.getAddressType(e),i=as({publicKey:r,addressType:"eip155"});return{chainType:o,pathType:e,address:i,publicKey:Buffer.from(r).toString("hex"),pathParams:t}}),gM=(j,A)=>mM().map(e=>{let t={pathType:e,index:j},r=A.derivePathType(e,j),o;switch(e){case"bip44Root":case"bip44":case"bip44Change":o=r.publicKey;break;case"deprecated":o=Cm(r.secretKey).publicKey;break}let i=as({publicKey:o,addressType:"solana"});return{chainType:"solana",chainId:iA.Solana.Mainnet,address:i,publicKey:Buffer.from(o).toString("hex"),pathParams:t}}),yM=(j,A)=>kM().map(e=>{let t={pathType:e,index:j},{publicKey:r}=A.derivePathType(e,j),o=as({publicKey:r,addressType:"sui"});return{chainType:"sui",chainId:iA.Sui.Mainnet,address:o,publicKey:Mm(r),pathParams:t}}),FM=1e4,jS=async(j,A=!0)=>{let e=Object.assign({},...j);try{let t=Object.values(e).map(({account:m})=>({address:m.address,chainId:m.chainId})),r;A?r=(await qm(async()=>Hi(Jd({accounts:t}),FM),()=>!0,2)).accounts:r=(await Jd({accounts:t})).accounts;let o={};for(let m of r){let{account:B}=e[`${m.chain.id}-${m.address}`],f=B.publicKey,k=B.chainType,E=Wi(B.pathParams),g={...m,publicKey:f,chainType:k,derivationPathType:B.pathParams.pathType,hasAccountActivity:!!m.lastActivityTimestamp||parseFloat(m.amount)>0};o[E]=[...o[E]||[],g]}Object.keys(o).forEach(m=>{o[m]=o[m].sort((B,f)=>$.compareNetworkID(B.chain.id,f.chain.id))});let i=Object.values(o),a=i.filter(m=>m.some(B=>B.hasAccountActivity)),c=!!a.length;return(c?a:i).map(m=>{let B=m[0];return{status:"discovered",seedIndex:e[`${B.chain.id}-${B.address}`].account.pathParams.index??-1,isSelectedByDefault:c,accounts:m}})}catch{let t=Object.values(e).map(({account:a})=>a),r={};for(let a of t){let{account:c}=e[`${a.chainId}-${a.address}`],p=Wi(c.pathParams),d={...a,chain:{id:a.chainId,name:$.getNetworkName(a.chainId),symbol:$.getTokenSymbol(a.chainId)},chainType:hr.getAddressType(c.pathParams.pathType),derivationPathType:c.pathParams.pathType,hasAccountActivity:!1};r[p]=[...r[p]||[],d]}return Object.keys(r).forEach(a=>{r[a]=r[a].sort((c,p)=>$.compareNetworkID(c.chain.id,p.chain.id))}),Object.values(r).map(a=>{let c=a[0];return{status:"undiscovered",seedIndex:e[`${c.chain.id}-${c.address}`].account.pathParams.index??-1,accounts:a,isSelectedByDefault:!1}})}},hM=async({hdWallet:j,startIndex:A,endIndex:e,enabledAddressTypes:t,enabledChains:r})=>{let o=[];for(let i=A;i<=e;++i){let a={};if(t.includes("bip122_p2wpkh"))for(let c of fM(i,j))a[`${iA.Bitcoin.Mainnet}-${c.address}`]={account:c};if(t.includes("eip155")){let c=EM(i,j),p=r.filter(d=>$.isEVMNetworkID($[d].mainnetID));for(let d of p){let m=$[d];for(let{address:B,publicKey:f,chainType:k,pathParams:E}of c)a[`${m.mainnetID}-${B}`]={account:{chainType:k,chainId:m.mainnetID,address:B,publicKey:f,pathParams:E}}}}if(t.includes("solana"))for(let c of gM(i,j))a[`${c.chainId}-${c.address}`]={account:c};if(t.includes("sui"))for(let c of yM(i,j))a[`${c.chainId}-${c.address}`]={account:c};o.push(a)}return jS(o)};function FGA({batchSize:j,hdWallet:A,enabledAddressTypes:e,enabledChains:t}){let r=!!A&&e.length!=0;return se({enabled:r,queryKey:[lM,j],queryFn:async({pageParam:c=0})=>{try{if(j<1)throw new Error(`Need positive batchSize: ${j}`);if(!A)throw new Error("Missing HDWallet");let p=[],d=[],m=c===0,B=c,f=!0;for(;f;){let k=B,E=B+j-1,y=(await hM({hdWallet:A,startIndex:k,endIndex:E,enabledAddressTypes:e,enabledChains:t})).flat(1);B+=j,f=!1;for(let F of y)p.push(F),(F.status==="undiscovered"||F.isSelectedByDefault)&&d.push(F),m&&F.status==="discovered"&&F.isSelectedByDefault&&(f=!0)}if(m&&d.length===0&&p.length>1){let k=p[0],E=k.accounts.map(y=>({...y,hasAccountActivity:!1})),g={status:"undiscovered",seedIndex:k.seedIndex,accounts:E,isSelectedByDefault:!1};d.push(g)}return d}catch(p){throw p instanceof Error&&b.captureError(p,"account"),p}},getNextPageParam:(c,p)=>{let d=p.length,m=d?p[0]:[],B=m.length?SM(m[m.length-1].seedIndex,j):0;return d===1?B:B+j*(d-1)},gcTime:0,staleTime:0,initialPageParam:0})}var SM=(j,A)=>Math.ceil(j/A)*A+A;n();s();n();s();var wM=()=>{let j=lA(),A=async()=>{let t=await j.get("firstTimeOnboarding");return t===null?!0:t.isFirstTimeOnboarding},{data:e}=tA({queryKey:Tt.firstTimeOnboarding,queryFn:A});return e},$M=()=>{let j=lA(),A=AA();return uA({mutationFn:async t=>{await j.set("firstTimeOnboarding",{isFirstTimeOnboarding:t}),bf(j,t?void 0:Date.now()),A.setQueryData(Tt.firstTimeOnboarding,t)}})};n();s();var IM=()=>{let j=lA(),A=async()=>{let t=await j.get("isResettingApp");return t===null?{isResettingApp:!1,isFirstTimeResettingApp:!1}:t},{data:e}=tA({queryKey:Tt.isResettingApp,queryFn:A});return e},vM=()=>{let j=lA(),A=AA();return uA({mutationFn:async t=>{let o=(await j.get("isResettingApp"))?.isFirstTimeResettingApp??!1;await j.set("isResettingApp",{isResettingApp:t,isFirstTimeResettingApp:o}),A.setQueryData(Tt.isResettingApp,{isResettingApp:t,isFirstTimeResettingApp:o})}})},bM=()=>{let j=lA(),A=AA();return uA({mutationFn:async t=>{let o=(await j.get("isResettingApp"))?.isResettingApp??!1;await j.set("isResettingApp",{isResettingApp:o,isFirstTimeResettingApp:t}),A.setQueryData(Tt.isResettingApp,{isResettingApp:o,isFirstTimeResettingApp:t})}})};n();s();var qM=v(Kw()),xM=v(x());n();s();var GM=()=>{let{data:[j]}=BA(["enable-zero-balance-nux"]),{data:A}=FA(),{data:e}=Ym(A?.identifier),t=A?.isReadOnly;return e?.value===0&&!t&&j};n();s();var TM=()=>{let{data:j}=cu(),{data:A}=ou({enabled:!!j?.expired}),{data:e=[]}=AB("recoverable-only");return{shouldShowVerifyPinPrompt:vr("SeedlessPinVerification","enable-seedless-pin-verification-interstitial",()=>!!A&&!!j&&j.expired&&e.length>0&&!Ct())}};n();s();n();s();var et=v(x());n();s();n();s();n();s();var PM=["SwapperNoQuotes","UnsupportedCountry","UnknownError"],eS=(j,A,e,t)=>{j instanceof QA&&PM.includes(j.code)||(!A||A>=400&&A<500)&&b.addBreadcrumb(e,JSON.stringify(t),"info")};n();s();var tS=async(j,A,e=void 0)=>{if(sA(j))return Promise.resolve();let t;try{t=j.data}catch{throw new QA({key:e})}let r=T6.safeParse(t);throw r.success?(b.addBreadcrumb(A,JSON.stringify(r.data),"info"),new QA({key:r.data.name})):new QA({key:e})};n();s();var rS=j=>{let A=new QA({key:"SwapperNoQuotes"});if(ji.safeParse(j?.type).success===!1)throw b.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let e=ei.safeParse(j);if(!e.success)throw b.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),A;if(e.data.quotes.length===0)throw A;return e.data};var oS="swap-quotes";async function Sc({sellTokenCaip19:j,buyTokenCaip19:A,taker:e,takerDestination:t,exactOut:r,sellAmount:o,sellAmountUsd:i,slippageTolerance:a,signal:c,enableAutoSlippage:p,priorityFee:d,tipAmount:m}){let B;try{Sr(e)&&(e.address=e.address.toLowerCase()),t&&Sr(t)&&(t.address=t.address.toLowerCase()),Sr(A)&&(A.address=A.address.toLowerCase()),Sr(j)&&(j.address=j.address.toLowerCase());let f="/swap/v2/quotes",k={sellToken:j,buyToken:A,taker:e,takerDestination:t,exactOut:r,sellAmount:o,sellAmountUsd:i,slippageTolerance:a,autoSlippage:p,priorityFee:d,tipAmount:m},E=await z.api().post(f,k,{signal:c});return B=E.status,await tS(E,oS,"SwapperNoQuotes"),rS(E.data)}catch(f){let k=f instanceof QA?f:new QA;throw eS(k,B,oS,{sellToken:j,buyToken:A,sellAmount:o,sellAmountUsd:i,slippageTolerance:a}),k}}var wc=class{getQuotes(A){return Sc({sellTokenCaip19:A.sell,buyTokenCaip19:A.buy,taker:A.taker,takerDestination:A.takerDestination,sellAmount:A.amount,sellAmountUsd:A.amountUsd,slippageTolerance:A.slippageTolerance,signal:A.signal,exactOut:A.exactOutEnabled,priorityFee:A.priorityFee,tipAmount:A.tipAmount,enableAutoSlippage:A.autoSlippageEnabled})}};n();s();n();s();var $c=class{constructor(A,e,t,r,o,i){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o;this.evmSwapCommand=i}createTransaction(){return ti({networkId:this.networkId,callerAddress:this.takerAddress,quote:this.quote})}async swap(A,e,t,r,o){return this.evmSwapCommand.swap(A,e,t,r,o)}async waitForConfirmation(A){return this.evmSwapCommand.waitForConfirmation(A)}};n();s();n();s();var iS=v(x());n();s();var nS=v(x());function Nn(j){return(0,nS.useMemo)(()=>KA(j),[j])}function aS({sender:j}){let{t:A}=gA(),{currentQuote:e}=aA(),t=w(m=>m.buyFungible),r=w(m=>m.sellFungible),o=Nn(YA(e)),{data:i}=Ve({callerAddress:j,quote:e,sellFungible:r}),a=i?.transactionPairs?.flatMap(m=>[...$r(m.sellToken)??[],...$r(m.buyToken)??[]])??[],c=[...new Set(a)],{fungibles:p}=he({keys:c});return{pendingActivityRows:(0,iS.useMemo)(()=>go({swapTransactions:i,sellFungible:r,buyFungible:t,fungibles:p,t:A,currentQuote:e,provider:o}),[i,r,t,p,A,e,o])}}function go({swapTransactions:j,sellFungible:A,buyFungible:e,fungibles:t,currentQuote:r,provider:o,t:i}){let a={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return j?j.type==="evm"?j.transactionTypes.reduce((c,p,d)=>{let m=A,B=e,f,k=j.transactionPairs;if(k&&k[d]){let E=k[d];m=Ic(E.sellToken,t)??A,B=Ic(E.buyToken,t)??e,f=E.approvalMetadata}if(p.includes("approval")){let E=m?.data.symbol??"";c.pendingApprovalActivityRows.push({topLeft:f?{text:`${i("transactionsPendingApproving")} ${f.symbol}`}:{text:`${i("transactionsPendingApproving")} ${E}`}})}else m&&B&&c.pendingSwapActivityRows.push(sS({sellFungible:m,buyFungible:B,sellAmount:r?.sellAmount,buyAmount:r?.buyAmount,provider:o,isBridge:p.includes("bridge"),t:i}));return c},a):j.transactionTypes.reduce((c,p,d)=>{let m=A,B=e,f=j.transactionPairs;if(f&&f[d]){let k=f[d];m=Ic(k.sellToken,t)??A,B=Ic(k.buyToken,t)??e}return m&&B&&c.pendingSwapActivityRows.push(sS({sellFungible:m,buyFungible:B,sellAmount:r?.sellAmount,buyAmount:r?.buyAmount,provider:o,isBridge:p.includes("bridge"),t:i})),c},a):a}var sS=({sellFungible:j,buyFungible:A,sellAmount:e,buyAmount:t,provider:r,isBridge:o,t:i})=>{let a=j.data.symbol,c=A.data.symbol,p=wA(e??0,j.data.decimals??0),d=wA(t??0,A.data.decimals??0);return{topLeft:{text:`${i(o?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${r}`},topRight:{text:`${d} ${c}`,color:"accentSuccess"},bottomLeft:{text:`${a} \u2192 ${c}`},bottomRight:{text:`${p} ${a}`}}},Ic=(j,A)=>A.find(e=>($r(j)??[]).includes(e.data.key));var cS="standard",vc=class{constructor(A,e,t,r,o,i){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o;this.gasEstimation=i}createTransaction(){return oi({quote:this.quote,callerAddress:this.takerAddress,networkId:this.networkId,sellFungible:this.executingQuote.sell})}async swap(A,e,t,r,o){let i=this.gasEstimation??await this.estimateGas(this.quote,this.executingQuote.response,cS,e,t);if(!i)throw new Error(`No gas estimation found for ${cS}`);let a=this.parsePendingActivity(this.executingQuote,e),{signature:c,error:p}=await b.startSpan("Process EVM Swap Txns",()=>tc({transactions:e.transactions,transactionTypes:e.transactionTypes,networkID:this.networkId,gasEstimation:i,pendingSwapActivityRows:a.pendingSwapActivityRows,pendingApprovalActivityRows:a.pendingApprovalActivityRows,accountIdentifier:A,accountSigner:r,storage:o}));if(p)throw p;return{networkID:this.networkId,id:c}}async waitForConfirmation(A){await yB(A.networkID,A.id)}async estimateGas(A,e,t,r,o){let i=await Ro(this.networkId,!0);if(!i)return;let a=i[t];if(!a)return;let c={networkID:this.networkId,gasLimit:new Y(1),maxFeePerGas:a.maxFeePerGas,maxPriorityFeePerGas:a.maxPriorityFeePerGas};return ir.estimateGas({swapTransactions:r,evmGasEstimation:c,currentQuote:A,scanResult:o,includeGasBuffer:!0,networkID:this.networkId,gasBuffer:e.gasBuffer})}parsePendingActivity(A,e){let t=KA(YA(A.quote));return go({swapTransactions:e,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:G.t})}};n();s();var pS=v(Lw());n();s();var At=class{constructor(A,e,t,r,o,i){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o;this.connection=i}async createTransaction(){return si({quote:this.quote,connection:this.connection})}async swap(A,e,t,r,o){let i=this.parsePendingActivity(this.executingQuote,e),{signature:a,error:c}=await rc({callerAddress:this.takerAddress,connection:this.connection,networkID:this.networkId,transactions:e.transactions,pendingSwapActivityRows:i.pendingSwapActivityRows,accountIdentifier:A,accountSigner:r,storage:o});if(c)throw c;return{networkID:this.networkId,id:a}}async waitForConfirmation(A){let e=wB(A.networkID);await na({connection:e,signature:A.id})}parsePendingActivity(A,e){let t=KA(YA(A.quote));return go({swapTransactions:e,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:G.t})}};var OM=l.object({signature:l.string()}),bc=class extends At{constructor(e,t,r,o,i,a,c){super(e,t,r,o,i,a);this.executingQuote=e;this.takerAddress=t;this.networkId=r;this.quote=o;this.executionId=i;this.connection=a;this.gaslessSignature=c}async swap(e,t,r,o,i){let a=this.quote.transactionData[0];if(!a)throw new Error("No transaction data found in quote");let c=new zA.PublicKey(this.takerAddress),d=this.parsePendingActivity(this.executingQuote,t).pendingSwapActivityRows[0];if(!d)throw new Error("Unable to create pending activity for gasless");let m=await sa({accountIdentifier:e,feePayer:c,connection:this.connection,accountSigner:o,transaction:oe(a,"bs58"),pendingTransactionInput:{ownerAddress:c.toBase58(),networkID:this.networkId,data:{signature:this.gaslessSignature},type:"swap",display:{summary:d}},storage:i,opts:{}});return{id:(await this.submitGaslessSwap(this.gaslessSignature,m)).signature,networkID:this.networkId}}async submitGaslessSwap(e,t){let r=await z.api().post("/gasless-swap/v1/submit",{quoteSignature:e,encoding:"bs58",chainId:this.networkId,transaction:pS.default.encode(t.serialize())}),o=OM.safeParse(r.data);if(!o.success)throw new Error("Failed to submit gasless swap");return o.data}};n();s();var MM="https://tp-rfq-api-staging.phantom.dev",CM=l.object({quoteId:l.string(),transactionId:l.string()}),qc=class extends At{constructor(e,t,r,o,i,a){super(e,t,r,o,i,a);this.executingQuote=e;this.takerAddress=t;this.networkId=r;this.quote=o;this.executionId=i;this.connection=a}async swap(e,t,r,o,i){let a=this.quote.transactionData[0];if(!a)throw new Error("No transaction data found in quote");let c=new zA.PublicKey(this.takerAddress),d=this.parsePendingActivity(this.executingQuote,t).pendingSwapActivityRows[0];if(!d)throw new Error("Unable to create pending activity for rfq");let m=await sa({accountIdentifier:e,feePayer:c,connection:this.connection,accountSigner:o,transaction:oe(a,"bs58"),pendingTransactionInput:{ownerAddress:c.toBase58(),networkID:this.networkId,data:{signature:""},type:"swap",display:{summary:d}},storage:i,opts:{}});return{id:(await this.submitRFQSwap(m)).transactionId,networkID:this.networkId}}async submitRFQSwap(e){let t=Buffer.from(e.serialize()).toString("base64"),r=await z.post(`${MM}/v0/rfq/swap`,{chainId:this.networkId,quoteId:this.quote.rfqProps?.quoteId,signedPayload:t},{headers:{"X-Request-Id":this.executionId}}),o=CM.safeParse(r.data);if(!o.success)throw new Error("Failed to submit rfq swap");return o.data}};n();s();var xc=class{constructor(A,e,t,r,o,i){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o;this.connection=i;this.solanaSwapCommand=new At(A,e,t,A.quote,o,i)}solanaSwapCommand;createTransaction(){return ri({quote:this.quote,connection:this.connection})}async swap(A,e,t,r,o){return this.solanaSwapCommand.swap(A,e,t,r,o)}async waitForConfirmation(A){return this.solanaSwapCommand.waitForConfirmation(A)}};n();s();n();s();var Kn=class{constructor(A,e,t,r,o){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o}async createTransaction(){return ii({quote:this.quote})}async swap(A,e,t,r,o){let i=this.parsePendingActivity(this.executingQuote,e),{signature:a,error:c}=await oc({callerAddress:this.takerAddress,networkID:this.networkId,transactions:e.transactions,pendingSwapActivityRows:i.pendingSwapActivityRows,accountIdentifier:A,accountSigner:r,storage:o});if(c)throw c;return{networkID:this.networkId,id:a}}async waitForConfirmation(A){await ra(this.networkId,A.id)}parsePendingActivity(A,e){let t=KA(YA(A.quote));return go({swapTransactions:e,sellFungible:A.sell,buyFungible:A.buy,fungibles:[],currentQuote:A.quote,provider:t,t:G.t})}};var Gc=class{constructor(A,e,t,r,o){this.executingQuote=A;this.takerAddress=e;this.networkId=t;this.quote=r;this.executionId=o;this.suiSwapCommand=new Kn(A,e,t,A.quote,o)}suiSwapCommand;async createTransaction(){return ni({quote:this.quote})}async swap(A,e,t,r,o){return this.suiSwapCommand.swap(A,e,t,r,o)}async waitForConfirmation(A){return this.suiSwapCommand.waitForConfirmation(A)}};var Tc=class{create(A,e,t,r,o){if($.isSolanaNetworkID(t)&&Qe(A.quote)){let i=new At(A,e,t,A.quote,Sj(),r);return A.quote.rfqProps?new qc(A,e,t,A.quote,Sj(),r):A.quote.gaslessSignature?new bc(A,e,t,A.quote,Sj(),r,A.quote.gaslessSignature):i}else{if($.isEVMNetworkID(t)&&zj(A.quote))return this.createEvmSwapCommand(A,e,t,o);if($.isSuiNetworkID(t)&&St(A.quote))return new Kn(A,e,t,A.quote,Sj());if(yA(A.quote)){if($.isSolanaNetworkID(t))return new xc(A,e,t,A.quote,Sj(),r);if($.isEVMNetworkID(t)){let i=this.createEvmSwapCommand(A,e,t,o);return new $c(A,e,t,A.quote,Sj(),i)}else if($.isSuiNetworkID(t))return new Gc(A,e,t,A.quote,Sj())}}throw new Error("Unsupported SwapQuote}")}createEvmSwapCommand(A,e,t,r){let o=r?r.filter(ja):void 0;return o&&o.length===0&&(o=void 0),new vc(A,e,t,A.quote,Sj(),o)}};n();s();n();s();var _M=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],Yd=class{ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(A,e={}){if(!A||typeof A!="string"&&typeof A.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof A.toString=="function"?A.toString():A,this.method=e.method||"GET",this.timeout=e.timeout??0,this.timeoutBeforeConnection=e.timeoutBeforeConnection??500,this.withCredentials=e.withCredentials||!1,this.headers=e.headers||{},this.body=e.body||void 0,this.debug=e.debug||!1,this.interval=e.pollingInterval??5e3,this.lineEndingCharacter=e.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(A,e){(A>0||e)&&(this._logDebug(`[EventSource] Will open new connection in ${A} ms.`),this._pollTimer=setTimeout(()=>{this.open()},A))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[A,e]of Object.entries(this.headers))this._xhr.setRequestHeader(A,e);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let A=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${_M[A.readyState]||"Unknown"}(${A.readyState}), status: ${A.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(A.readyState)&&(A.status>=200&&A.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(A.responseText||""),A.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):A.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:A.responseText,xhrStatus:A.status,xhrState:A.readyState}),A.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(A){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:A.message,error:A})}}_logDebug(...A){this.debug&&console.debug(...A)}_handleEvent(A){if(this.lineEndingCharacter===null){let p=this._detectNewlineChar(A);if(p!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(p).slice(1,-1)}`),this.lineEndingCharacter=p;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let e=this._getLastDoubleNewlineIndex(A);if(e<=this._lastIndexProcessed)return;let t=A.substring(this._lastIndexProcessed,e).split(this.lineEndingCharacter);this._lastIndexProcessed=e;let r,o=null,i=[],a=0,c="";for(let p=0;p<t.length;p++)if(c=t[p].trim(),c.startsWith("event"))r=c.replace(/event:?\s*/,"");else if(c.startsWith("retry"))a=parseInt(c.replace(/retry:?\s*/,""),10),isNaN(a)||(this.interval=a);else if(c.startsWith("data"))i.push(c.replace(/data:?\s*/,""));else if(c.startsWith("id"))o=c.replace(/id:?\s*/,""),o!==""?this.lastEventId=o:this.lastEventId=null;else if(c===""&&i.length>0){let d=r||"message",m={type:d,data:i.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(d,m),i=[],r=void 0}}_detectNewlineChar(A){let e=[this.CRLF,this.LF,this.CR];for(let t of e)if(A.includes(t))return t;return null}_getLastDoubleNewlineIndex(A){let e=this.lineEndingCharacter+this.lineEndingCharacter,t=A.lastIndexOf(e);return t===-1?-1:t+e.length}addEventListener(A,e){this.eventHandlers[A]===void 0&&(this.eventHandlers[A]=[]),this.eventHandlers[A].push(e)}removeEventListener(A,e){this.eventHandlers[A]!==void 0&&(this.eventHandlers[A]=this.eventHandlers[A].filter(t=>t!==e))}removeAllEventListeners(A){let e=Object.keys(this.eventHandlers);if(A===void 0)for(let t of e)this.eventHandlers[t]=[];else{if(!e.includes(A))throw Error(`[EventSource] '${A}' type is not supported event type.`);this.eventHandlers[A]=[]}}dispatch(A,e){if(Object.keys(this.eventHandlers).includes(A))for(let r of Object.values(this.eventHandlers[A]))r(e)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},Pc=Yd;n();s();var RM={"X-Phantom-Version":vA,"X-Phantom-Platform":oj},Zd={name:"SwapperNoQuotes",message:"No quotes found"},Ln=class{getOptions(A={}){return{...A,headers:{...A.headers,...RM}}}createStreamUrl({amount:A,amountUsd:e,buy:t,sell:r,taker:o,takerDestination:i,slippageTolerance:a,exactOut:c,autoSlippage:p,priorityFee:d,tipAmount:m,clientEnableGaslessSwap:B,isLedger:f}){let k=new URLSearchParams({taker:o,takerDestination:i,buyToken:J(V(t)),sellToken:J(V(r)),sellAmount:A,sellAmountUsd:e??"",exactOut:c?"true":"false",autoSlippage:p?"true":"false",clientEnableGaslessSwap:B?"true":"false"});return a&&k.set("slippageTolerance",String(a)),d&&k.set("priorityFee",String(d)),m&&k.set("tipAmount",String(m)),f!==void 0&&k.set("isLedger",String(f)),`${_t()}/swap/v2/stream/quotes?${k.toString()}`}handleNewQuoteResponse(A,e){try{if(!A)throw new Error("No data in new-quote-response");let t=JSON.parse(A),r=this.parseSwapQuotesResponse(t);e({type:"newQuoteResponse",quoteResponse:r})}catch{e({type:"error",errorResponse:Zd})}}handleErrorQuoteResponse(A,e){try{if(!A)throw new Error("No data in error-quote-response");let t=T6.safeParse(JSON.parse(A));e({type:"error",errorResponse:t.success?t.data:Zd})}catch{e({type:"error",errorResponse:Zd})}}parseSwapQuotesResponse(A){let e=new QA({key:"SwapperNoQuotes"});if(ji.safeParse(A?.type).success===!1)throw b.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let t=ei.safeParse(A);if(!t.success)throw b.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),e;if(t.data.includesAllProviders&&t.data.quotes.length===0)throw e;return t.data}};var Oc=class extends Ln{eventSource;open(A,e){this.close(),this.eventSource=new Pc(this.createStreamUrl(A),this.getOptions());let t=r=>{switch(r.type){case"new-quote-response":this.handleNewQuoteResponse(r.data,e);break;case"error-quote-response":this.handleErrorQuoteResponse(r.data,e);break;case"open":e({type:"open"});break;case"error":e({type:"error",errorResponse:{name:"UnknownError",message:r.message}});break;case"close":e({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",t),this.eventSource.addEventListener("error-quote-response",t),this.eventSource.addEventListener("open",t),this.eventSource.addEventListener("error",t),this.eventSource.addEventListener("close",t)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};n();s();var Mc=class extends Ln{eventSource;open(A,e){this.close(),this.eventSource=new Pc(this.createStreamUrl(A),this.getOptions());let t=r=>{switch(r.type){case"new-quote-response":this.handleNewQuoteResponse(r.data,e);break;case"error-quote-response":this.handleErrorQuoteResponse(r.data,e);break;case"open":e({type:"open"});break;case"error":e({type:"error",errorResponse:{name:"UnknownError",message:r.message}});break;case"close":e({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",t),this.eventSource.addEventListener("error-quote-response",t),this.eventSource.addEventListener("open",t),this.eventSource.addEventListener("error",t),this.eventSource.addEventListener("close",t)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};n();s();var Cc=class{constructor(A){this.producer=A}listeners=new Set;openStream(A){this.listeners.forEach(e=>e.onEvent({type:"openRequested"})),this.producer.close(),this.producer.open(A,e=>{this.listeners.forEach(t=>t.onEvent(e))})}closeStream(){this.producer.close()}subscribe(A){this.listeners.add(A)}unsubscribe(A){this.listeners.delete(A)}};n();s();n();s();n();s();async function Un({transactions:j,locale:A,url:e,deviceId:t,takerAddress:r,networkId:o,slippageType:i,quote:a,quoteResponse:c}){return await Gs(A,t,{type:"transaction",userAccount:r,params:DM(j),url:e,networkID:o,context:yA(a)?"bridge":U0(a)?"gaslessSwap":"swap",provider:NM(a),slippageType:i,metadata:{swapper:{quoteOutputAmount:a.buyAmount,quoteOutputToken:J(c.buyToken),quoteInputAmount:a.sellAmount,quoteInputToken:J(c.sellToken)}}})}var DM=j=>{switch(j.type){case"evm":return{transactions:j.transactions};case"solana":return{transactions:j.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}};case"sui":return{transactions:j.transactions,method:"signAndSendTransaction"}}},NM=j=>{let A=yA(j)?wn(j):j?.sources??[];return KA(A)};n();s();var KM={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"};function LM(j,A){return{type:j,amountUsd:new T(A.amountUSD??0),amount:new T(A.amount??0)}}function Qn(j){return j.steps.flatMap(e=>e.includedFeeCosts).reduce((e,t)=>{if(!t)return e;let r=KM[t.name];return r&&new T(t.amount).gt(0)&&e.push(LM(r,t)),e},[])}function Hn(j,A,e){let t=j.steps.reduce((r,o)=>r.plus(o.nonIncludedNonGasFees),new T(0));return t.isZero()?[]:[{type:"nonIncludedNonGas",amountUsd:new T(Jj(A,t,e)??0),amount:t}]}var _c=class{constructor(A,e,t,r,o){this.networkID=A;this.account=e;this.priceClient=t;this.quoteInput=r;this.quoteResponse=o}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:$.getSlip44(this.networkID)})}async processQuote(A){let e=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.calculateNetworkFee(e,A,t),o=this.appendBridgeFees([r],A,t),i=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(i),fees:i},swapTransactions:e}}createSwapTransactions(A){return ti({networkId:this.networkID,callerAddress:this.checkChainAddress().address,quote:A})}appendPhantomFee(A,e){let t=e.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new T(t.percentage),amountUsd:new T(0),amount:new T(0)}]:A}appendBridgeFees(A,e,t){let r={[this.getNativeTokenCaip19()]:t},o=Hn(e,this.networkID,r),i=Qn(e);return[...A,...i,...o]}async calculateNetworkFee(A,e,t){let r=await this.estimateGas(e,A);if(!r)throw new Error("Unable to estimate gas");if(!t.usd)throw new Error("Price data not found");let o=r[0],i=$.getTokenDecimals(this.networkID),a=o.gasLimit.times(o.maxFeePerGas);return{type:"evmGas",amountUsd:new T(a).shiftedBy(-i).times(t.usd),amount:a}}async estimateGas(A,e){let t=await Ro(this.networkID,!0);if(!t)return;let r=t.standard;if(!r)return;let o={networkID:this.networkID,gasLimit:new T(1),maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas},i=await Un({transactions:e,locale:"en-us",url:"https://phantom.app",deviceId:"123",takerAddress:this.checkChainAddress().address,networkId:this.networkID,slippageType:this.quoteInput.autoSlippage?"auto":"fixed",quote:A,quoteResponse:this.quoteResponse});return ir.estimateGas({swapTransactions:e,evmGasEstimation:o,currentQuote:A,scanResult:i,includeGasBuffer:!0,networkID:this.networkID,gasBuffer:this.quoteResponse.gasBuffer})}checkChainAddress(){let A=this.account.addresses.find(e=>e.networkID===this.networkID);if(!A)throw new Error(`No address found for chain ${this.networkID}`);return xo(A)&&(A.address=A.address.toLowerCase()),A}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};n();s();var Rc=class{constructor(A,e,t,r,o){this.networkID=A;this.account=e;this.priceClient=t;this.quoteInput=r;this.quoteResponse=o}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:$.getSlip44(this.networkID)})}async processQuote(A){let e=await this.createSwapTransactions(A),t=await this.calculateNetworkFee(e,A),r=this.appendPhantomFee([t],A);return{quote:A,fees:{totalFees:this.sumFees(r),fees:r},swapTransactions:e}}createSwapTransactions(A){return oi({networkId:this.networkID,callerAddress:this.checkChainAddress().address,quote:A,sellFungible:this.quoteInput.sell})}appendPhantomFee(A,e){let t=e.fees.find(r=>r.type==="phantom");return t?[...A,{type:"phantom",percentage:new T(t.percentage),amountUsd:new T(0),amount:new T(0)}]:A}async calculateNetworkFee(A,e){let t=await this.estimateGas(e,A);if(!t)throw new Error("Unable to estimate gas");let r=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!r.usd)throw new Error("Price data not found");let o=t[0],i=$.getTokenDecimals(this.networkID),a=o.gasLimit.times(o.maxFeePerGas);return{type:"evmGas",amountUsd:new T(a).shiftedBy(-i).times(r.usd),amount:a}}async estimateGas(A,e){let t=await Ro(this.networkID,!0);if(!t)return;let r=t.standard;if(!r)return;let o={networkID:this.networkID,gasLimit:new T(1),maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas},i=await Un({transactions:e,locale:"en-us",url:"https://phantom.app",deviceId:"123",takerAddress:this.checkChainAddress().address,networkId:this.networkID,slippageType:this.quoteInput.autoSlippage?"auto":"fixed",quote:A,quoteResponse:this.quoteResponse});return ir.estimateGas({swapTransactions:e,evmGasEstimation:o,currentQuote:A,scanResult:i,includeGasBuffer:!0,networkID:this.networkID,gasBuffer:this.quoteResponse.gasBuffer})}checkChainAddress(){let A=this.account.addresses.find(e=>e.networkID===this.networkID);if(!A)throw new Error(`No address found for chain ${this.networkID}`);return xo(A)&&(A.address=A.address.toLowerCase()),A}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};n();s();var Dc=class{constructor(A,e,t){this.networkID=A;this.priceClient=e;this.connection=t}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:$.getSlip44(this.networkID)})}async processQuote(A){let e=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.calculateNetworkFee(e,t),o=this.appendBridgeFees([r],A,t),i=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(i),fees:i},swapTransactions:e}}createSwapTransactions(A){return ri({quote:A,connection:this.connection})}appendPhantomFee(A,e){let t=e.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new T(t.percentage),amountUsd:new T(0),amount:new T(0)}]:A}appendBridgeFees(A,e,t){let r={[this.getNativeTokenCaip19()]:t},o=Hn(e,this.networkID,r),i=Qn(e);return[...A,...i,...o]}async calculateNetworkFee(A,e){if(!e.usd)throw new Error("Price data not found");let t=A.transactions.map(p=>this.processEncodedTx(p,this.networkID,this.connection)),o=(await Promise.all(t)).map(p=>p.networkFeeEstimation.value),i=new T(o[0]);return{type:"solanaNetwork",amountUsd:i.div(new T(zA.LAMPORTS_PER_SOL)).times(e.usd),amount:i}}async processEncodedTx(A,e,t){let r=oe(A,"bs58");return await Li(r,t),{networkFeeEstimation:await oa(e,[r.message])}}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};n();s();n();s();function uS(j,A){return UM(j.fees,e=>{switch(e.type){case"gasless":return{type:"gasless",amountUsd:new T(0),amount:new T(0),percentage:new T(e.percentage)};case"phantom":return{type:"phantom",percentage:new T(e.percentage),amountUsd:new T(0),amount:new T(0)};case"ata":return new T(e.amount).isZero()?void 0:{type:"ata",amountUsd:new T(e.amount),amount:new T(0)};case"gasless_network":return{type:"solanaGaslessNetwork",amountUsd:new T(e.amount),amount:new T(0)};case"network":{let{amountUsd:t,amount:r}=Am(e,A);return{type:"solanaNetwork",amountUsd:t,amount:r}}case"tips":{let{amountUsd:t,amount:r}=Am(e,A);return{type:"tips",amountUsd:t,amount:r}}case"priority_fee":{let{amountUsd:t,amount:r}=Am(e,A);return{type:"priorityFee",amountUsd:t,amount:r}}default:return}})}function Am(j,A){let e=new T(j.amount);return{amountUsd:e.div(new T(zA.LAMPORTS_PER_SOL)).times(A),amount:e}}function UM(j,A){return j.reduce((e,t,r)=>{let o=A(t,r,j);return o!=null&&e.push(o),e},[])}var lS=["solanaNetwork","tips","priorityFee"],Nc=class{constructor(A,e,t){this.networkID=A;this.priceClient=e;this.connection=t}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:$.getSlip44(this.networkID)})}async processQuote(A){let t=(await this.priceClient.getPrice(this.getNativeTokenCaip19())).usd;if(!t)throw new Error(`Price data not found for native token ${this.getNativeTokenCaip19()}`);let r=await this.createSwapTransactions(A),o=uS(A,t),i=await this.processParsedFees(o,t);return{quote:A,fees:{totalFees:this.sumFees(i),fees:i},swapTransactions:r}}async processParsedFees(A,e){if(A.find(c=>c.type==="solanaGaslessNetwork"))return A;let t=A.filter(c=>!lS.includes(c.type)),r=A.filter(c=>lS.includes(c.type)),o=A.find(c=>c.type==="priorityFee"),i=await this.calculateNetworkFee(o,e),a=this.sumNetworkFees(i,r);return[...t,a]}sumNetworkFees(A,e){return e.reduce((t,r)=>({...t,amount:t.amount.plus(r.amount),amountUsd:t.amountUsd.plus(r.amountUsd)}),A)}createSwapTransactions(A){return si({quote:A,connection:this.connection})}getAmountsFromNativeAmount(A,e){let t=new T(A.amount);return{amountUsd:t.div(new T(zA.LAMPORTS_PER_SOL)).times(e),amount:t}}async calculateNetworkFee(A,e){let t=new T(A?.amount??0);return{type:"solanaNetwork",amountUsd:t.div(new T(zA.LAMPORTS_PER_SOL)).times(e),amount:t}}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};n();s();n();s();var Vn=class{constructor(A,e){this.networkID=A;this.priceClient=e}getNativeTokenCaip19(){return J({chainId:this.networkID,resourceType:"nativeToken",slip44:$.getSlip44(this.networkID)})}async processQuote(A){let e=await this.createSwapTransactions(A),t=await this.calculateNetworkFee(e),r=this.appendPhantomFee([t],A);return{quote:A,fees:{totalFees:this.sumFees(r),fees:r},swapTransactions:e}}createSwapTransactions(A){return ii({quote:A})}appendPhantomFee(A,e){let t=e.fees.find(r=>r.type==="phantom");return t?[...A,{type:"phantom",percentage:new T(t.percentage),amountUsd:new T(0),amount:new T(0)}]:A}async calculateNetworkFee(A){let e=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!e.usd)throw new Error("Price data not found");let t=new T(0),r=new T(0);try{let o=await Promise.all(A.transactions.map(i=>ta({networkID:this.networkID,transaction:Do.deserializeTransactionString(i)})));r=new T(o.reduce((i,a)=>i+a.gasBudget.toNumber(),0)),t=r.dividedBy(1e9).multipliedBy(e.usd)}catch{return{type:"suiNetwork",amountUsd:new T(0),amount:new T(0)}}return{type:"suiNetwork",amountUsd:t,amount:r}}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};var Kc=class{constructor(A,e){this.networkID=A;this.priceClient=e;this.suiProcessQuoteCommand=new Vn(A,e)}suiProcessQuoteCommand;getNativeTokenCaip19(){return this.suiProcessQuoteCommand.getNativeTokenCaip19()}async processQuote(A){let e=await this.createSwapTransactions(A),t=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!t.usd)throw new Error("Price data not found");let r=await this.suiProcessQuoteCommand.calculateNetworkFee(e),o=this.appendBridgeFees([r],A,t),i=this.appendPhantomFee(o,A);return{quote:A,fees:{totalFees:this.sumFees(i),fees:i},swapTransactions:e}}appendBridgeFees(A,e,t){let r={[this.getNativeTokenCaip19()]:t},o=Hn(e,this.networkID,r),i=Qn(e);return[...A,...i,...o]}appendPhantomFee(A,e){let t=e.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return t?[...A,{type:"phantom",percentage:new T(t.percentage),amountUsd:new T(0),amount:new T(0)}]:A}createSwapTransactions(A){return ni({quote:A})}sumFees(A){return A.reduce((e,t)=>e.plus(t.amountUsd),new T(0))}};var Lc=class{create(A,e,t){let r=e.sell.data.chain.id,o=e.buy.data.chain.id,i=HA(r,o);if($.isSolanaNetworkID(r)){let a=HB(A).connection;return i?new Dc(r,this.priceClient,a):new Nc(r,this.priceClient,a)}else{if($.isEVMNetworkID(r))return i?new _c(r,A,this.priceClient,e,t):new Rc(r,A,this.priceClient,e,t);if($.isSuiNetworkID(r))return i?new Kc(r,this.priceClient):new Vn(r,this.priceClient)}throw new Error(`Unsupported network ID: ${r}`)}priceClient={getPrice:async A=>(await ia({tokens:[ie(A)]}))[A]};isSupportedNetwork(A){return $.isSolanaNetworkID(A)||$.isEVMNetworkID(A)}},Uc=class{create(A,e,t){return{processQuote:async r=>({quote:r,fees:{totalFees:new T(0),fees:[]}})}}};n();s();n();s();n();s();var Xn=j=>j.reduce((A,e)=>{if(!e||e.type!=="SPL")return A;let t;return e.type==="SPL"&&(t=QM(e)),t?{fees:[...A.fees,t],totalPercentFees:A.totalPercentFees+t.percentFee}:A},{fees:[],totalPercentFees:0}),QM=j=>{if(j.type!=="SPL")return;let e=(j.data.mintExtensions??[]).find(t=>t.extension==="transferFeeConfig");if(e)return{caip19:J(V(j)),fungibleKey:j.data.key,symbol:j.data.symbol??"",name:j.data.name??"",percentFee:e.state.newerTransferFee.transferFeeBasisPoints/100}};n();s();var HM=j=>j.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",yo=j=>{let A=T(j);return Om(j,HM(A))};var VM=.05,XM=5,zM=.5;function jm(j,A,e,t){let{priceImpact:r,quoteSlippageTolerance:o}=WM(j),i=A.autoSlippage?o??e.slippageTolerance:e.slippageTolerance,a={type:"slippage",slippage:i,slippageType:A.autoSlippage?"auto":"fixed",alert:i&&i>=XM?"highSlippage":void 0},c={type:"priceImpact",priceImpactPercentage:ss(r.toNumber()),alert:r&&r.gte(VM)?"highPriceImpact":void 0,warning:r&&r.gte(zM)?"veryHighPriceImpact":void 0},d=[dS(j,A.buy,A.sell),a,c],m=Xn([A.sell,A.buy]);return m.fees.length>0&&d.push({type:"transferFees",transferFees:m.totalPercentFees,transferTokenSymbol:A.sell.data.symbol??"",alert:"transferFees"}),t&&d.push({type:"fees",quoteFees:t}),d}function WM(j){return Qe(j)?{priceImpact:j.priceImpact?T(j.priceImpact):T(0),quoteSlippageTolerance:j.slippageTolerance}:zj(j)?{priceImpact:j.priceImpact?T(j.priceImpact):T(0),quoteSlippageTolerance:j.slippageTolerance}:St(j)?{priceImpact:j.priceImpact?T(j.priceImpact):T(0),quoteSlippageTolerance:j.slippageTolerance}:{priceImpact:T(0),quoteSlippageTolerance:void 0}}function dS(j,A,e){let{buyAmount:t,sellAmount:r}=j,o=new T(t).shiftedBy(-A.data.decimals).dividedBy(new T(r).shiftedBy(-e.data.decimals));return{type:"pricing",ratio:o,exchangeRate:`1 ${e.data.symbol} \u2248 ${yo(o)} ${A.data.symbol}`,exchangeRateFlipped:`1 ${A.data.symbol} \u2248 ${yo(T(1).dividedBy(o))} ${e.data.symbol}`}}n();s();var Qc=class{queue=[];processing=!1;enqueue(A){this.queue.push(A),this.processNext()}clearQueue(){this.queue=[],this.processing=!1}async processNext(){if(this.processing||this.queue.length===0)return;this.processing=!0;let A=this.queue.shift();if(A)try{await A()}catch(e){console.error("Error processing task:",e)}this.processing=!1,this.processNext()}};n();s();var Si=class{constructor(A){this.entries=A;for(let e of A)e.alert&&this.alerts.push(e.alert),e.warning&&this.warnings.push(e.warning)}alerts=[];warnings=[]};n();s();var mS=(d=>(d.SwapperNoQuotes="SwapperNoQuotes",d.InsufficientSellAmount="InsufficientSellAmount",d.CrossChainUnavailable="CrossChainUnavailable",d.TokenNotTradable="TokenNotTradable",d.NotEnoughSuiObjects="NotEnoughSuiObjects",d.FromTokenIsHoneyPotToken="FromTokenIsHoneyPotToken",d.ToTokenIsHoneyPotToken="ToTokenIsHoneyPotToken",d.InsufficientLiquidity="InsufficientLiquidity",d.SwapInitializationFailed="SwapInitializationFailed",d.pSolHighImpactError="pSolHighImpactError",d))(mS||{}),wi=class j extends Error{name;type;constructor(A,e,t){super(e),this.name=A,this.type=t}static fromErrorResponse(A,e){return(r=>Object.values(mS).includes(r))(A)?new j(A,e,A):new j(A,e)}};var JM="swap-quotes",Hc=class{constructor(A,e){this.quoteStreamer=A;this.commandFactory=e}state={type:"idle"};listeners=[];swapTransactionQueue=new Qc;start(A,e){this.setState({type:"starting",input:A,account:e}),this.quoteStreamer.subscribe(this.quoteStreamListener),this.quoteStreamer.openStream(A)}stop(){this.swapTransactionQueue.clearQueue(),this.setState({type:"idle"}),this.quoteStreamer.closeStream(),this.quoteStreamer.unsubscribe(this.quoteStreamListener)}quoteStreamListener={onEvent:A=>{switch(A.type){case"newQuoteResponse":switch(this.state.type){case"starting":let r=this.findPreferredQuote(this.state.input,A.quoteResponse);this.setState({type:"firstQuoteReceived",input:this.state.input,quote:r,response:A.quoteResponse,account:this.state.account,quoteDetails:new Si(jm(r,this.state.input,A.quoteResponse))}),this.enqueueQuoteToProcess(this.state.input,A.quoteResponse,this.state.account);break;case"quoteProcessed":this.enqueueQuoteToProcess(this.state.input,A.quoteResponse,this.state.account,this.state.prevProcessedQuote);break}break;case"error":let e=wi.fromErrorResponse(A.errorResponse.name,A.errorResponse.message),t=new QA({key:e.name});switch(b.addBreadcrumb(JM,JSON.stringify(e.name),"info"),this.state.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"error",error:t,quoteError:e,account:this.state.account,input:this.state.input});break}break;case"openRequested":break;case"close":this.setState({type:"idle"});break}}};enqueueQuoteToProcess(A,e,t,r){this.swapTransactionQueue.enqueue(()=>this.processQuote(e,A,t,r))}async processQuote(A,e,t,r){try{let o=this.findPreferredQuote(e,A),a=await this.commandFactory.create(t,e,A).processQuote(o);switch(this.state.type){case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"quoteProcessed",input:e,response:A,quote:o,prevProcessedQuote:r,nextProcessedQuote:a,account:t,quoteDetails:new Si(jm(o,e,A,a.fees))});break}return a}catch(o){throw b.captureError(o,"swapper"),o}}subscribe(A){this.listeners.push(A)}unsubscribe(A){this.listeners=this.listeners.filter(e=>e!==A)}getState(){return this.state}findPreferredQuote(A,e){let t=A.preferredProvider;return t&&e.quotes.find(r=>r.baseProvider.id===t)||e.quotes[0]}setState(A){let e=this.state;this.state=A,this.listeners.forEach(t=>t.onStateChange(e,A))}};n();s();n();s();n();s();n();s();var bA=class extends Error{code;detailMessage;constructor(A,e){super(A),this.code=A,this.detailMessage=e}};var YM="slippageToleranceExceeded",ZM="INSUFFICIENT_FUNDS",AC=gB,jC="insufficient lamports",eC="lower balance than rent-exempt minimum",tC=EB,rC="Transaction confirmation failed",oC=["Ledger App not open","Ledger not connected","Unable to connect to Ledger","Unable to connect to Ledger device","Need permission to connect to Ledger"],nC="Ledger user rejected action",sC="Ledger Sign Error";function iC(j){try{return Number(j.split('"Custom":')[1].split("}")[0])}catch{return null}}function aC(j){switch(iC(j.message)){case 301:return"slippageToleranceExceeded";case 6e3:return"EmptyRoute";case 6001:return"slippageToleranceExceeded";case 6002:return"InvalidCalculation";case 6003:return"MissingPlatformFeeAccount";case 6004:return"InvalidSlippage";case 6005:return"NotEnoughPercent";case 6006:return"InvalidInputIndex";case 6007:return"InvalidOutputIndex";case 6008:return"NotEnoughAccountKeys";case 6009:return"NonZeroMinimumOutAmountNotSupported";case 6010:return"InvalidRoutePlan";case 6011:return"InvalidReferralAuthority";case 6012:return"LedgerTokenAccountDoesNotMatch";case 6013:return"InvalidTokenLedger";case 6014:return"IncorrectTokenProgramID";case 6015:return"TokenProgramNotProvided";case 6016:return"SwapNotSupported";case 6017:return"ExactOutAmountNotMatched";case 6018:return"SourceAndDstinationMintCannotBeTheSame";default:return null}}function cC(j){return oC.some(e=>j.message.includes(e))?"LedgerConnectionError":j.message.includes(nC)?"LedgerRejectAction":j.message.includes(sC)?"LedgerUnknownSignError":j.message.toLowerCase().includes("ledger")?"LedgerUnknownError":null}function fr(j){if(j===void 0)return new bA("UnknownError","No error provided");if(j instanceof bA)return j;let A=pC(j);if(A.message.includes(ZM))return new bA("INSUFFICIENT_FUNDS");if(uC(A.message))return new bA("slippageToleranceExceeded");if(A.message==="Scan results are not valid")return new bA("Scan results are not valid");if([AC,jC,tC,eC].some(c=>A.message.includes(c)))return new bA("NotEnoughSol");let o=aC(A);if(o!==null)return new bA(o);if(A.message.includes(rC))return new bA("Transaction confirmation failed");let a=cC(A);return a!==null?new bA(a):new bA("UnknownError",A.message)}function pC(j){return typeof j=="string"?new Error(j):typeof j=="object"&&"logs"in j&&j.logs?.length?new Error(j.logs.join(`
`)):j}function uC(j){return j.includes(YM)}n();s();n();s();var BS=3;function Vc(){try{let j=UA.getMultivariateAssignment("swapper-high-slippage-threshold"),A=Number(j);return!j||isNaN(A)?BS:A}catch{return BS}}var kS=({currentQuote:j,quoteResponse:A,gasEstimation:e,swapTransactions:t,scanResults:r,isSwapSimulationDisabled:o,slippageTolerance:i})=>{if(!j)throw new bA("Trying to execute swap with no current quote");if(!A)throw new bA("Trying to execute swap with no quote response");if($.isEVMNetworkID(A.sellToken.chainId)&&(!e||e?.length===0||e?.length<(t?.transactions.length??1)))throw new bA("No gas estimation available");if(!t)throw new bA("No swap transactions available");if(r.state!=="valid"&&(b.addBreadcrumb("swapper","swapSimulationNotValid","info",Dt({scanResults:r.state})),!o)){let c=["Scan results are not valid","AccountFrozen","INSUFFICIENT_FUNDS","INSUFFICIENT_GAS","slippageToleranceExceeded","SIMULATION_TIMEOUT","MissingArgument","STALE_QUOTE","SimulationUnknownError"];if(dC(r.state)&&c.includes(r.state.code)){if(lC(r.state,i))return;throw r.state}else throw new bA("Scan results are not valid")}};function lC(j,A){return j.code==="slippageToleranceExceeded"&&A&&A>=Vc()}function dC(j){return j instanceof bA}var mC={swap:{solana:"executeSolanaSwap",evm:"executeEvmSwap",sui:"executeSuiSwap"},bridge:{solana:"executeSolanaBridge",evm:"executeEvmBridge",sui:"executeSuiBridge"}},em=(j,A)=>mC[j?"bridge":"swap"][A??"solana"],fS=async({isBridge:j,addressType:A,isSwapSimulationDisabled:e,sender:t,currentQuote:r,quoteResponse:o,gasEstimation:i,swapTransactions:a,scanResults:c,pendingActivityRows:p,connection:d,logSwapFailureNoSignature:m,logTransactionSubmitted:B,onTransactionReceiptReceived:f,onTransactionSubmissionError:k,resetToInitialState:E,slippageTolerance:g,swapFungibles:y})=>{await b.startSpan(em(j,a?.type),async()=>{E();let F;try{kS({currentQuote:r,quoteResponse:o,gasEstimation:i,swapTransactions:a,scanResults:c,isSwapSimulationDisabled:e,slippageTolerance:g});let S=await y({type:A,callerAddress:t,swapTransactions:a,pendingSwapActivityRows:p.pendingSwapActivityRows,pendingApprovalActivityRows:p.pendingApprovalActivityRows,gasEstimation:i,connection:d});if(f(S),S.error)throw S.id||m(),F=S.id,S.error;B(S)}catch(S){let I=fr(S);k(I,F)}})};n();s();n();s();n();s();n();s();var Pt=(c=>(c.SlippageExceeded="SLIPPAGE_EXCEEDED",c.InsufficientFunds="INSUFFICIENT_FUNDS",c.InsufficientGas="INSUFFICIENT_GAS",c.AccountFrozen="ACCOUNT_FROZEN",c.SimulationTimeout="SIMULATION_TIMEOUT",c.StaleQuote="STALE_QUOTE",c.UnknownError="UNKNOWN_ERROR",c.SimulationFailed="SIMULATION_FAILED",c))(Pt||{}),zn=class j extends Error{constructor(e,t,r){super(e);this.scannedTransactionResult=t;this.type=r;t&&(this.detailMessage=t.simulationError?.humanReadableError??(t.warnings.length>0?t.warnings[0].message:void 0)),this.type=r}detailMessage;static fromError(e){return e instanceof j?e:new j(e.message)}static fromScannedTransactionResult(e,t){return(o=>Object.values(Pt).includes(o))(e)?new j(e,t,e):new j(e,t)}};n();s();var Fo=class j extends Error{constructor(e,t){super(e);this.type=t}static fromError(e){return new j(e.message)}static fromType(e){return new j(e,e)}};var ES="https://phantom.com",Xc=class{constructor(A,e,t){this.swapCommand=A;this.send=e;this.executingQuote=t;this.takerAddress=A.takerAddress,this.networkId=A.networkId,this.quote=A.quote,this.executionId=A.executionId}takerAddress;networkId;quote;executionId;createTransaction(){return this.send({type:"executeSwapStarted",executionId:this.executionId,executingQuote:this.executingQuote}),this.swapCommand.createTransaction()}async simulate(A,e,t){try{this.send({type:"simulationRequestStarted",executionId:this.executionId,executingQuote:this.executingQuote,networkId:this.networkId});let r,o=ZA(G.language)??"en";switch($.isSuiNetworkID(this.networkId)?r={type:"transaction",expectedChanges:[],warnings:[],advancedDetails:void 0,error:void 0,simulationError:void 0,block:void 0}:r=await Un({transactions:A,locale:o,url:ES,deviceId:t,takerAddress:this.takerAddress,networkId:this.networkId,slippageType:this.executingQuote.slippageType,quote:this.quote,quoteResponse:this.executingQuote.response}),r.error){case void 0:break;case"SIMULATION_FAILED":break;case"SLIPPAGE_EXCEEDED":if(this.executingQuote.response.slippageTolerance>=Vc())break;default:throw zn.fromScannedTransactionResult(r.error,r)}return this.send({type:"simulationPassed",scannedTransactionResult:r,executionId:this.executionId,networkId:this.networkId}),r}catch(r){throw this.send({type:"simulationFailed",error:zn.fromError(r),executionId:this.executionId,networkId:this.networkId,url:ES}),r}}async swap(A,e,t,r,o){this.send({type:"transactionSubmissionStarted",executionId:this.executionId});try{let i=await this.swapCommand.swap(A,e,t,r,o);if(!i.id)throw Fo.fromType("noSignature");return this.send({type:"transactionSubmissionSuccess",txReceipt:i,executionId:this.executionId}),i}catch(i){let a=i instanceof Fo?i:Fo.fromError(i);throw this.send({type:"transactionSubmissionFailed",error:a,executionId:this.executionId}),a}}async waitForConfirmation(A){this.send({type:"transactionConfirmationStarted",executionId:this.executionId,txReceipt:A});try{let e=await this.swapCommand.waitForConfirmation(A);return this.send({type:"transactionConfirmed",executionId:this.executionId,txReceipt:A}),e}catch(e){throw this.send({type:"transactionConfirmationFailed",error:e,txReceipt:A,executionId:this.executionId}),e}}};n();s();n();s();var tm=class extends Error{constructor(A,e){super(`Can't transition to ${e} from ${A.type}`)}},zc=class{state=new Map;listeners=new Set;send(A){A.type==="executeSwapStarted"&&this.state.set(A.executionId,{type:"idle",executingQuote:A.executingQuote});let e=this.state.get(A.executionId);if(!e)throw new Error(`No previous state found for execution id: ${A.executionId}`);let t=e;try{return t=this.detectNextState(e,A),t.type==="transactionConfirmed"?this.state.delete(A.executionId):this.state.set(A.executionId,t),t}catch{return e}finally{this.notifyListeners(A,e,t,this.state)}}notifyListeners(A,e,t,r){try{this.listeners.forEach(o=>o.onStateChange(A,e,t,r))}catch{}}getState(){return this.state}addListener(A){this.listeners.add(A)}removeListener(A){this.listeners.delete(A)}detectNextState(A,e){switch(e.type){case"executeSwapStarted":return jt(A,"idle"),{type:"started",executingQuote:e.executingQuote};case"simulationRequestStarted":return jt(A,"started"),{type:"simulating",executingQuote:A.executingQuote};case"simulationPassed":return jt(A,"simulating"),{type:"simulated",scannedTransactionResult:e.scannedTransactionResult,executingQuote:A.executingQuote};case"simulationFailed":return jt(A,"simulating"),{type:"simulationFailed",error:e.error,executingQuote:A.executingQuote};case"transactionSubmissionStarted":return jt(A,"simulated"),{type:"submittingTransaction",executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionSubmissionFailed":return jt(A,"submittingTransaction"),{type:"transactionSubmissionFailed",error:e.error,executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionSubmissionSuccess":return jt(A,"submittingTransaction"),{type:"transactionSubmitted",txReceipt:e.txReceipt,executingQuote:A.executingQuote,scannedTransactionResult:A.scannedTransactionResult};case"transactionConfirmationStarted":return jt(A,"transactionSubmitted"),{type:"confirmingTransaction",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,executingQuote:A.executingQuote};case"transactionConfirmationFailed":return jt(A,"transactionSubmitted"),{type:"transactionNotConfirmed",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,error:e.error,executingQuote:A.executingQuote};case"transactionConfirmed":return jt(A,"confirmingTransaction"),{type:"transactionConfirmed",txReceipt:A.txReceipt,scannedTransactionResult:A.scannedTransactionResult,executingQuote:A.executingQuote}}}};function jt(j,A){if(j.type!==A)throw new tm(j,A)}n();s();function gS(j){return j.type==="quote"}n();s();n();s();var kC={"Could not find any routes":"noRoute"},Wc=class j extends Error{type;constructor(A,e){super(e??A),this.type=A}static fromMessage(A){let e=A?kC[A]??"undefinedError":"undefinedError";return new j(e,A)}};var ho=class extends Error{constructor(A,e){super(`Can't transition to ${e} from ${A.type}`)}},Jc=class{state;listeners=new Set;constructor(A){this.state=A??{type:"idle"}}send(A){let e=this.state;try{return e=this.detectNextState(this.state,A),this.state=e,e}catch{return this.state}finally{this.notifyListeners(A,this.state,e)}}getState(){return this.state}addListener(A){this.listeners.add(A)}removeListener(A){this.listeners.delete(A)}notifyListeners(A,e,t){try{this.listeners.forEach(r=>r.onStateChange(A,e,t))}catch{}}detectNextState(A,e){switch(e.type){case"setPair":return{type:"pair",buy:e.buy,sell:e.sell,amount:e.amount};case"quoteRequestStarted":switch(A.type){case"pair":case"quote":case"quoteError":return{type:"fetchingQuote",buy:A.buy,sell:A.sell,amount:e.amount,slippageType:e.slippageType};default:throw new ho(A,e.type)}case"quoteRequestError":if(A.type!=="fetchingQuote")throw new ho(A,e.type);return{type:"quoteError",buy:A.buy,sell:A.sell,amount:A.amount,error:e.error,slippageType:A.slippageType};case"quoteResponseReceived":if(A.type!=="fetchingQuote")throw new ho(A,e.type);let t=e.response.quotes[0];return t?{type:"quote",response:e.response,buy:A.buy,sell:A.sell,quote:t,amount:A.amount,slippageType:A.slippageType}:{type:"quoteError",buy:A.buy,sell:A.sell,amount:A.amount,error:new Wc("noRoute"),slippageType:A.slippageType};case"quoteResponseStreamed":switch(A.type){case"pair":case"fetchingQuote":case"quote":case"quoteError":return{type:"quote",response:e.response,buy:A.buy,sell:A.sell,quote:e.quote,amount:{amount:e.quoteInput.amount,perspective:e.quoteInput.exactOut?"buy":"sell"},slippageType:e.quoteInput.autoSlippage?"auto":"fixed"};default:throw new ho(A,e.type)}case"userSelectedQuote":if(A.type!=="quote")throw new ho(A,e.type);return{type:"quote",quote:e.quote,buy:A.buy,sell:A.sell,response:A.response,amount:A.amount,slippageType:A.slippageType}}}};n();s();n();s();var FS=l.object({buyToken:l.custom(),sellToken:l.custom(),buyTokenPrice:l.custom().optional(),sellTokenPrice:l.custom().optional()}),Ii=class j extends Error{constructor(e,t){super(t??e.name);this.type=e}static fromError(e){return new j({name:"unknown"},e.message)}};var Yc=class{async initialize(A,e){let t=e.reduce((i,a)=>(i[a.networkID]=a.address,i),{}),r=await z.api().headers({"Content-Type":"application/json"}).timeout(eA({seconds:20})).post("/swap/v2/initialize",{...A,addresses:t});if(r.status!==200)throw new QA({key:"SwapInitializationFailed"});let o=FS.safeParse(r.data);if(!o.success)throw new QA({key:"SwapInitializationFailed"});return o.data}};n();s();var Zc=class{state={type:"idle"};eventListeners=[];send(A){let e=this.state,t=e;try{return t=this.detectNextState(A),this.state=t,t}catch{return e}finally{this.eventListeners.forEach(r=>r.onStateChange(A,e,t))}}detectNextState(A){switch(A.type){case"initializeStarted":return{type:"initializing",mode:A.mode};case"initializeCompleted":if(this.state.type==="initializing")return{type:"pair",mode:this.state.mode,sellToken:A.result.sellToken,buyToken:A.result.buyToken,sellTokenPrice:A.result.sellTokenPrice,buyTokenPrice:A.result.buyTokenPrice,warnings:Bo(A.result.buyToken)};throw new Error("Invalid state");case"initializeFailed":if(this.state.type!=="initializing")throw new Error("Invalid state");return{type:"error",error:A.error};case"switchTokens":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:this.state.buyToken,buyToken:this.state.sellToken,sellTokenPrice:this.state.buyTokenPrice,buyTokenPrice:this.state.sellTokenPrice,warnings:Bo(this.state.sellToken)};case"changeToken":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:A.perspective==="sell"?A.token:this.state.sellToken,buyToken:A.perspective==="buy"?A.token:this.state.buyToken,sellTokenPrice:A.sellTokenPrice??this.state.buyTokenPrice,buyTokenPrice:A.buyTokenPrice??this.state.sellTokenPrice,warnings:Bo(this.state.buyToken)};case"updateBalances":if(this.state.type!=="pair")throw new Error("Invalid state");if(J(V(this.state.sellToken))!==A.sellTokenCaip19)throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:{...this.state.sellToken,data:{...this.state.sellToken.data,balance:A.sellTokenBalance}},buyToken:this.state.buyToken,sellTokenPrice:this.state.sellTokenPrice,buyTokenPrice:this.state.buyTokenPrice,warnings:Bo(this.state.buyToken)}}}getState(){return this.state}subscribe(A){this.eventListeners.push(A)}unsubscribe(A){this.eventListeners=this.eventListeners.filter(e=>e!==A)}};var vi=class{constructor(A,e,t,r){this.apiClient=A;this.swapCommandFactory=e;this.quoteProcessor=t;this.account=r,this.quoteProcessor.subscribe(this.quoteProcessorListener),this.tokenStateMachine.subscribe(this.tokenStateListener)}stateMachine=new Jc;executeSwapStateMachine=new zc;account;config={slippageType:"auto",slippageTolerance:1.3};swapInitializer=new Yc;tokenStateMachine=new Zc;accountChangeListeners=[];tokenStateListener={onStateChange:(A,e,t)=>{t.type==="pair"&&(this.setPair(t.buyToken,t.sellToken,{amount:"0",perspective:"sell"}),A.type==="changeToken"&&this.refreshQuoteProcessor())}};initializeSwap(A){let e=this.checkAccount();this.tokenStateMachine.send({type:"initializeStarted",mode:A}),this.swapInitializer.initialize(A,e.addresses).then(t=>{this.tokenStateMachine.send({type:"initializeCompleted",result:t})}).catch(t=>{b.captureError(t,"swapper"),t instanceof Ii?this.tokenStateMachine.send({type:"initializeFailed",error:t}):this.tokenStateMachine.send({type:"initializeFailed",error:Ii.fromError(t)})})}updateBalances({sellTokenBalance:A,sellTokenCaip19:e}){this.getTokenState().type==="pair"&&this.tokenStateMachine.send({type:"updateBalances",sellTokenBalance:A,sellTokenCaip19:e})}getTokenState(){return this.tokenStateMachine.getState()}subscribeToken(A){return this.tokenStateMachine.subscribe(A),()=>this.unsubscribeToken(A)}unsubscribeToken(A){this.tokenStateMachine.unsubscribe(A)}quoteProcessorListener={onStateChange:(A,e)=>{(e.type==="firstQuoteReceived"||e.type==="quoteProcessed")&&this.send({type:"quoteResponseStreamed",response:e.response,quoteInput:e.input,quote:e.quote})}};isValidAmount(A){try{let e=new T(A);return e.isFinite()?!e.isNegative():!1}catch{return!1}}setAmount(A,e){let{amount:t}=A;if(t===""&&(t="0"),!this.isValidAmount(t))return;this.quoteProcessor.stop();let r=this.checkAccount(),o=this.getState(),i={...this.config,...e};switch(o.type){case"pair":case"quote":case"quoteError":if(t==="0"||t===""){this.send({type:"setPair",buy:o.buy,sell:o.sell,amount:A});return}let a=this.checkChainAddress(o.sell.data.chain.id),c=this.checkChainAddress(o.buy.data.chain.id),p={chainId:a.networkID,resourceType:"address",address:a.address},d={chainId:c.networkID,resourceType:"address",address:c.address};try{let m={amount:new T(A.amount).shiftedBy(A.perspective==="buy"?o.buy.data.decimals:o.sell.data.decimals).toString(),amountUsd:T(A.amount).times(A.perspective==="buy"?o.buy.data.price??0:o.sell.data.price??0).toString(),buy:o.buy,sell:o.sell,taker:J(p),takerDestination:J(d),slippageTolerance:i.slippageTolerance,autoSlippage:i.slippageType==="auto",exactOut:A.perspective==="buy",priorityFee:i.priorityFee,tipAmount:i.tipAmount,preferredProvider:i.preferredProvider,clientEnableGaslessSwap:i.gasslessEnabled,isLedger:r.type==="ledger"};this.quoteProcessor.start(m,r)}catch(m){console.error("Error when streaming quotes",m)}break}}setPair(A,e,t){this.send({type:"setPair",buy:A,sell:e,amount:t})}switchTokens(){this.tokenStateMachine.send({type:"switchTokens"})}setAccount(A){this.account=A,this.accountChangeListeners.forEach(e=>e.onAccountChange(A))}getAccount(){return this.account}async fetchQuotes({amount:A,amountUsd:e,buy:t,sell:r,slippageTolerance:o,autoSlippageEnabled:i,priorityFee:a,tipAmount:c,signal:p}){let d=V(r),m=V(t),B=A.perspective==="buy",f=new T(A.amount).shiftedBy(A.perspective==="buy"?t.data.decimals:r.data.decimals).toString();this.send({type:"quoteRequestStarted",amount:A,slippageType:i?"auto":"fixed"});let k=this.checkChainAddress(r.data.chain.id),E={chainId:k.networkID,resourceType:"address",address:k.address},g;if(HA(r.data.chain.id,t.data.chain.id)){let y=this.checkChainAddress(t.data.chain.id);g={chainId:y.networkID,resourceType:"address",address:y.address}}try{let y=await this.apiClient.getQuotes({sell:d,buy:m,amount:f,amountUsd:e,taker:E,takerDestination:g,slippageTolerance:o??0,autoSlippageEnabled:i,exactOutEnabled:B,priorityFee:a,tipAmount:c,signal:p});return this.send({type:"quoteResponseReceived",response:y}),y}catch(y){throw this.send({type:"quoteRequestError",error:y}),y}}async swap(A,e,t,r,o,i){let a=this.getState();if(!gS(a))throw new Error(`Can't swap from ${a.type}`);this.quoteProcessor.stop();let c=this.checkAccount(),p=this.checkChainAddress(a.sell.data.chain.id),d={account:c,buy:a.buy,sell:a.sell,amount:a.amount,quote:a.quote,response:a.response,slippageType:a.slippageType},m=this.swapCommandFactory.create(d,p.address,p.networkID,o,i),B=new Xc(m,k=>this.executeSwapStateMachine.send(k),d),f=await B.createTransaction();await b.startSpan(em(yA(a.quote),f.type),async()=>{let k=await B.simulate(f,t,r),E=await B.swap(c.identifier,f,k,A,e);await B.waitForConfirmation(E)})}changeToken(A,e){let t=this.getTokenState();if(t.type!=="pair")return;let r=e==="buy"?A:t.buyToken,o=e==="sell"?A:t.sellToken;ia({tokens:[V(r),V(o)]}).then(i=>{let a=i[J(V(r))],c=i[J(V(o))];this.tokenStateMachine.send({type:"changeToken",token:A,perspective:e,buyTokenPrice:a,sellTokenPrice:c})})}selectQuote(A){this.send({type:"userSelectedQuote",quote:A})}setQuoteConfig(A){this.config={...this.config,...A},this.refreshQuoteProcessor()}refreshQuoteProcessor(){let A=this.getLastQuoteProcessorSwapAmount();A&&this.setAmount(A)}getLastQuoteProcessorSwapAmount(){let A=this.getQuoteProcessorState();switch(A.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":let e=A.input;return{amount:new T(e.amount).shiftedBy(-1*(e.exactOut?e.buy.data.decimals:e.sell.data.decimals)).toString(),perspective:e.exactOut?"buy":"sell"};default:return}}getState(){return this.stateMachine.getState()}getExecuteState(){return this.executeSwapStateMachine.getState()}stopProcessingQuotes(){this.quoteProcessor.stop()}subscribeExecution(A){return this.executeSwapStateMachine.addListener(A),()=>this.unsubscribeExecution(A)}unsubscribeExecution(A){this.executeSwapStateMachine.removeListener(A)}getQuoteProcessorState(){return this.quoteProcessor.getState()}subscribeQuoteProcessor(A){return this.quoteProcessor.subscribe(A),()=>this.unsubscribeQuoteProcessor(A)}unsubscribeQuoteProcessor(A){this.quoteProcessor.unsubscribe(A)}stopQuoteProcessor(){this.quoteProcessor.stop()}subscribeAccountChange(A){return this.accountChangeListeners.push(A),()=>this.unsubscribeAccountChange(A)}unsubscribeAccountChange(A){this.accountChangeListeners=this.accountChangeListeners.filter(e=>e!==A)}send(A){return this.stateMachine.send(A)}checkAccount(){if(!this.account)throw new Error("Must set a MultiChainAccount");return this.account}checkChainAddress(A){let t=this.checkAccount().addresses.find(r=>r.networkID===A);if(!t)throw new Error(`No address found for chain ${A}`);return xo(t)&&(t.address=t.address.toLowerCase()),t}};var hS=(0,et.createContext)(null);function EC({children:j,processorMode:A="noOp"}){let{data:e}=FA(),t=(0,et.useMemo)(()=>gC(A),[A]);return(0,et.useEffect)(()=>{e&&t.setAccount(e)},[e,t]),et.default.createElement(hS.Provider,{value:t},j)}function Gj(){let j=(0,et.useContext)(hS);if(!j)throw new Error("useSwapper must be used within a SwapperProvider");return j}function gC(j){return new vi(new wc,new Tc,new Hc(new Cc(gj?new Mc:new Oc),j==="noOp"?new Uc:new Lc))}n();s();n();s();var Ap=v(x());n();s();n();s();n();s();var FC=v(x());n();s();var yC=v(x());n();s();var rm=TA(j=>({preferredProvider:void 0,setPreferredProvider:A=>j({preferredProvider:A})}));n();s();var hC=v(x());n();s();var SS=v(x());n();s();n();s();var om=v(x());n();s();var Ot=j=>j&&yA(j)?j.executionDuration:0;n();s();var fe=v(x());n();s();n();s();n();s();n();s();function jp({buyAssetUsdValue:j,buyToken:A,sellAssetUsdValue:e,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:i,priceImpact:a,provider:c,baseProvider:p,slippageTolerance:d,transactionId:m,slippageType:B,sellSwapFilter:f,isRetry:k,analyticsContext:E}){let g=rF({buyAssetUsdValue:j,buyToken:A,sellAssetUsdValue:e,sellToken:t,buyAmount:r,sellAmount:o,phantomFeeUiAmount:i,priceImpact:a,provider:c,baseProvider:p,slippageTolerance:d,slippageType:B,sellSwapFilter:f,isRetry:k,analyticsContext:E});return g?{data:{...g,id:m}}:{}}n();s();var ep=({txReceipt:j,networkID:A,amountType:e,swapAnalytics:t})=>{let r=Nt(A);b.addBreadcrumb("swapper","submittedTransaction","info",{...r,txReceipt:j.id,method:r.chainType==="solana"?"signAndSendTransaction":r.chainType==="eip155"?"eth_sendRawTransaction":r.chainType==="sui"?"signAndExecuteTransaction":"UNKNOWN"}),r.chainType==="solana"?t.submittedTransaction(j.id,{...r,method:"signAndSendTransaction",swapType:e==="sell"?"exactIn":"exactOut"}):r.chainType==="eip155"?t.submittedTransaction(j.id,{...r,method:"eth_sendRawTransaction",swapType:e==="sell"?"exactIn":"exactOut"}):r.chainType==="sui"&&t.submittedTransaction(j.id,{...r,method:"signAndExecuteTransaction",swapType:e==="sell"?"exactIn":"exactOut"})};n();s();var gr=j=>j?yA(j)?void 0:j.priceImpact:0;n();s();var wS=TA(j=>({lastFailedSwap:void 0,setLastFailedSwap:A=>{j({lastFailedSwap:A})}}));function $S(){return wS.getState().lastFailedSwap}function nm(j){wS.getState().setLastFailedSwap(j)}var bi=class{constructor(A,e,t="swapperClassic"){this.swapAnalytics=A;this.analytics=e;this.uiContext=t}onStateChange(A,e,t,r){switch(A.type){case"executeSwapStarted":this.analytics.capture("swapperSwap",{data:{...this.createAnalyticsPayload(t.executingQuote).data,uiContext:this.uiContext}});let o=ui({buyAssetUsdValue:t.executingQuote.buy.data.usd,buyToken:t.executingQuote.buy,sellAssetUsdValue:t.executingQuote.sell.data.usd,sellToken:t.executingQuote.sell,quote:t.executingQuote.quote,slippageTolerance:this.parseSlippageTolerance(t.executingQuote.slippageType,t.executingQuote.quote,t.executingQuote.response),slippageType:t.executingQuote.slippageType,sellSwapFilter:w.getState().swapFilter,isRetry:this.isRetry(t.executingQuote),analyticsContext:t.executingQuote.quote.analyticsContext,baseProvider:t.executingQuote.quote.baseProvider?.id??""});o&&(b.addBreadcrumb("swapper","approved","info",Dt(o.swap)),this.swapAnalytics.approved(o));break;case"simulationFailed":A.error.type!=="SLIPPAGE_EXCEEDED"&&b.captureError(A.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:wC(A.error)}});break;case"transactionSubmissionFailed":b.captureError(A.error,"swapper"),A.error.type==="noSignature"&&this.analytics.capture("swapperSwapFailureNoSignature"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:A.error.message,uiContext:this.uiContext}});break;case"transactionSubmissionSuccess":ep({txReceipt:A.txReceipt,networkID:A.txReceipt.networkID,amountType:t.executingQuote.amount.perspective==="buy"?"buy":"sell",swapAnalytics:this.swapAnalytics});break;case"transactionConfirmationFailed":let i=fr(A.error);b.captureError(A.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(t.executingQuote).data,error:i.message,uiContext:this.uiContext}});let a=Nt(A.txReceipt.networkID),c={chainId:$.getChainID(A.txReceipt.networkID),networkId:A.txReceipt.networkID},p=A.txReceipt;switch(this.analytics.capture("waitForTransactionConfirmationError",{data:{...c,errorMessage:i.message}}),a.chainType){case"eip155":case"solana":case"sui":b.addBreadcrumb("swapper","transactionStatus","error",{...a,txReceipt:p.id}),this.swapAnalytics.transactionStatus(p.id,{...a,status:{type:"error"}});break}break;case"transactionConfirmed":this.analytics.capture("swapperSwapSuccess",{data:{...this.createAnalyticsPayload(t.executingQuote,A.txReceipt).data,uiContext:this.uiContext}});let d=Nt(A.txReceipt.networkID);switch(b.addBreadcrumb("swapper","transactionStatus","info",{...d,txReceipt:A.txReceipt.id}),d.chainType){case"eip155":case"solana":case"sui":this.swapAnalytics.transactionStatus(A.txReceipt.id,{...d,status:{type:"confirmed"}});break}break}this.isFailureEvent(A)?nm(t.executingQuote):A.type==="transactionSubmissionSuccess"&&nm(void 0)}createAnalyticsPayload(A,e){let t=A.quote,r=w.getState();return jp({buyToken:A.buy,sellToken:A.sell,buyAmount:t.buyAmount.toString(),sellAmount:t.sellAmount.toString(),phantomFeeUiAmount:ld(t).amountUsd?.toString()??"",priceImpact:gr(t),provider:KA(YA(t)),buyAssetUsdValue:r.buyUsdValue,sellAssetUsdValue:r.sellUsdValue,slippageTolerance:this.parseSlippageTolerance(A.slippageType,t,A.response),transactionId:e?.id??"",slippageType:A.slippageType,sellSwapFilter:r.swapFilter,isRetry:this.isRetry(A),analyticsContext:A.quote.analyticsContext,baseProvider:A.quote.baseProvider?.id??""})}parseSlippageTolerance(A,e,t){switch(A){case"fixed":return t.slippageTolerance;case"auto":return He(e)?e.slippageTolerance:t.slippageTolerance}}isRetry(A){let e=$S();if(!e)return!1;let t=J(V(e.buy)),r=J(V(e.sell)),o=J(V(A.buy)),i=J(V(A.sell));return t===o&&r===i}isFailureEvent(A){switch(A.type){case"simulationFailed":case"transactionSubmissionFailed":case"transactionConfirmationFailed":return!0;default:return!1}}};function wC(j){switch(j.type){case"SLIPPAGE_EXCEEDED":return"slippageToleranceExceeded";case"INSUFFICIENT_FUNDS":return"INSUFFICIENT_FUNDS";case"INSUFFICIENT_GAS":return"INSUFFICIENT_GAS";case"ACCOUNT_FROZEN":return"AccountFrozen";case"STALE_QUOTE":return"STALE_QUOTE";case"SIMULATION_TIMEOUT":return"SIMULATION_TIMEOUT";case"UNKNOWN_ERROR":return"SimulationUnknownError";case"SIMULATION_FAILED":return"SIMULATION_FAILED";default:return"Scan results are not valid"}}n();s();var qi=class{constructor(A){this.queryClient=A}onStateChange(A,e,t,r){let{sell:o,quote:i,account:a}=t.executingQuote;if(A.type==="transactionConfirmed"){let c=new Y(o.data.amount),p=new Y(i.sellAmount),d=c.minus(p).toString();ic(this.queryClient,{id:_n(o),amount:d}),this.queryClient.invalidateQueries({queryKey:KB.tokens(a.addresses)}),this.queryClient.invalidateQueries({queryKey:LB.tokenBalance({wallets:a.addresses,encodedCaip19:J(V(o))})})}}};n();s();var $C="swap-validation",xi=class{simulationAnalytics;constructor(A){this.simulationAnalytics=new Lr(A)}onStateChange(A,e,t){switch(A.type){case"simulationPassed":let r=A.scannedTransactionResult;this.simulationAnalytics.onScannedTransactionByUser({networkId:A.networkId,warnings:r.warnings.map(i=>i.severity),shouldBlock:!!r.block,errorCode:r.error??""});break;case"simulationFailed":let o=A.error.scannedTransactionResult;if(o){this.simulationAnalytics.onScannedTransactionByUser({networkId:A.networkId,warnings:o.warnings.map(i=>i.severity),shouldBlock:!!o.block,errorCode:o.error??""}),o?.error&&b.addBreadcrumb($C,`Simulation error: ${JSON.stringify({error:o.error})}`,"info");return}this.simulationAnalytics.onFailedScannedTransactionByUser({networkId:A.networkId,url:A.url}),b.addBreadcrumb("simulation",`networkID: ${A.networkId}, url: ${A.url}, type: transaction`,"info");break}}};n();s();var Gi=class{onStateChange(A,e,t,r){let o=this.toLegacyTransition(A,t);o&&M6(o.nextState,o.event)}toLegacyTransition(A,e){let{buy:t,sell:r,quote:o,response:i}=e.executingQuote;switch(A.type){case"simulationFailed":return{event:{type:"simulationRequestError",error:A.error},nextState:{type:"simulationFailed",buy:t,sell:r,response:i,quote:o,scannedTransactionResult:A.error.scannedTransactionResult,simulationError:A.error.message}};case"transactionSubmissionFailed":return{event:{type:"transactionSubmissionFailed",error:A.error},nextState:{type:"transactionSubmissionFailed",buy:t,sell:r,response:i,quote:o,error:A.error}};case"transactionConfirmationFailed":return{event:{type:"transactionConfirmationFailed",error:A.error,txReceipt:A.txReceipt},nextState:{type:"transactionNotConfirmed",buy:t,sell:r,response:i,quote:o,error:A.error,txReceipt:A.txReceipt}};default:return}}};n();s();n();s();var Ti=j=>{let A=Ot(j);return me(A)};n();s();n();s();var vC=3e3,Nj=TA(j=>({toast:void 0,toastId:void 0,visible:!1,currentTimer:null,hideToast(A){j(e=>A&&e.toastId!==A?e:(e.currentTimer&&clearTimeout(e.currentTimer),{visible:!1,currentTimer:null}))},removeToast(){j(A=>(A.currentTimer&&clearTimeout(A.currentTimer),{toast:void 0,toastId:void 0,visible:!1,currentTimer:null}))},success(A){j(e=>{e.currentTimer&&clearTimeout(e.currentTimer);let t=setTimeout(()=>{j({visible:!1,currentTimer:null})},vC);return{toast:{type:"Success",...A},toastId:A.id??Sj(),visible:!0,currentTimer:t}})},failed(A){j(e=>(e.currentTimer&&clearTimeout(e.currentTimer),{toast:{type:"Failed",...A},toastId:A.id??Sj(),visible:!0,currentTimer:null}))},progress(A){j(e=>(e.currentTimer&&clearTimeout(e.currentTimer),{toast:{type:"Progress",...A},toastId:A.id??Sj(),visible:!0,currentTimer:null}))},message(A){j(e=>(e.currentTimer&&clearTimeout(e.currentTimer),{toast:{type:"Default",...A},toastId:A.id??Sj(),visible:!0,currentTimer:null}))}}));n();s();n();s();function IS({sell:j,buy:A,onBuyFungiblePress:e}){let t=`${G.t("swapTxConfirmationSwapFailed")} ${j.data.symbol} \u2192 ${A.data.symbol}`,r=$.getChainDefinition(j.data.chain.id).tokenSymbol,o=G.t("buyAssetInterpolated",{tokenSymbol:r});return{title:t,message:G.t("swapTabInsufficientFunds"),onPress:e,buttonText:o}}n();s();function vS(j){switch(j.type){case"SLIPPAGE_EXCEEDED":return G.t("swapTxConfirmationSwapFailedSlippageLimit");case"INSUFFICIENT_FUNDS":return G.t("swapTxConfirmationSwapFailedInsufficientBalance");case"INSUFFICIENT_GAS":return G.t("swapTxConfirmationSwapFailedInsufficientGas");case"ACCOUNT_FROZEN":return G.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return G.t("swapTxConfirmationSwapFailedSimulationTimeout");case"STALE_QUOTE":return G.t("swapTxConfirmationSwapFailedStaleQuote");case"UNKNOWN_ERROR":return G.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return G.t("swapTxConfirmationSwapFailedTryAgain")}}function bS(j,A,e,t,r,o){let{sell:i,buy:a}=A,c=bC(j,i,a,r,t,e,o);return c||{title:`${G.t("swapTxConfirmationSwapFailed")} ${i.data.symbol} \u2192 ${a.data.symbol}`,message:vS(j),onPress:()=>{Nj.getState().hideToast(),t()},buttonText:G.t("commandRetry")}}function bC(j,A,e,t,r,o,i){if(!(j.type&&!i.includes(j.type)))switch(j.type){case"INSUFFICIENT_FUNDS":return IS({sell:A,buy:e,onBuyFungiblePress:()=>{Nj.getState().hideToast(),o()}});case"SLIPPAGE_EXCEEDED":return t.selectedSetting.type==="auto"?void 0:{title:G.t("swapEnableAutoSlippageTitleToast",{sellSymbol:A.data.symbol,buySymbol:e.data.symbol}),buttonText:G.t("swapEnableAutoSlippageButtonToast"),message:"",onPress:()=>{t.setSlippageSetting({type:"auto"}),r(),Nj.getState().hideToast()}}}}var Pi=class{constructor(A,e,t,r,o,i=GC){this.showFungibleDetails=A;this.showBuyFungibleScreen=e;this.slippageSettings=t;this.supportedCustomSimulationToastErrorTypes=r;this.retryAndNavigateToSwapper=o;this.toastMessageParser=i}onStateChange(A,e,t,r){let{sell:o,buy:i,quote:a}=t.executingQuote;switch(A.type){case"executeSwapStarted":qC(yA(a)?G.t("swapInitiatingBridgeToast",{sellSymbol:o.data.symbol,sellChain:o.data.chain.name,buySymbol:i.data.symbol,buyChain:i.data.chain.name}):G.t("swapSwappingToast",{sellSymbol:o.data.symbol,buySymbol:i.data.symbol}));break;case"transactionConfirmed":xC(this.toastMessageParser.parseTransactionConfirmed(o,i,a),()=>this.showFungibleDetails(i));break;case"simulationFailed":qS(bS(A.error,t.executingQuote,this.showBuyFungibleScreen,()=>this.handleRetryPress(t.executingQuote),this.slippageSettings,this.supportedCustomSimulationToastErrorTypes));break;case"transactionSubmissionFailed":case"transactionConfirmationFailed":qS({title:`${G.t("swapTxConfirmationSwapFailed")} ${o.data.symbol} \u2192 ${i.data.symbol}`,message:G.t("swapTxConfirmationSwapFailedUnknownError"),onPress:()=>{this.handleRetryPress(t.executingQuote)},buttonText:G.t("commandRetry")});break}}handleRetryPress(A){Nj.getState().hideToast(),this.retryAndNavigateToSwapper(A)}};function qC(j){Nj.getState().progress({message:j,onPress:()=>{Nj.getState().hideToast()}})}function xC(j,A){Nj.getState().success({id:"swap-success",message:j,onPress:()=>{Nj.getState().hideToast(),A()}})}function qS(j){Nj.getState().failed(j)}var GC={parseTransactionConfirmed(j,A,e){return yA(e)?G.t("swapBridgeInitiatedToast",{sellSymbol:j.data.symbol,sellChain:j.data.chain.name,buySymbol:A.data.symbol,buyChain:A.data.chain.name,estimatedTime:Ti(e)}):G.t("swapSwappedToast",{sellSymbol:j.data.symbol,buySymbol:A.data.symbol})}};var tp=class{intercept(A){let{swapper:e,connection:t,storage:r,vaultProxy:o,locale:i,analytics:a,resetSwapper:c,queryClient:p,showFungibleDetails:d,showBuyFungibleScreen:m,swapAnalytics:B,gasEstimation:f,slippageSettings:k,supportedCustomSimulationToastErrorTypes:E,navigateToSwapper:g,storePairs:y,isMobile:F}=A;if(!F||e.getAccount()?.type==="ledger")return"continue";let I=e.getState();if(I.type!=="quote")return"continue";let{quote:O,sell:M,buy:P}=I;return this.isSupportedQuote(O)?((async()=>{y(M,P);let X=await a.getDeviceId(),_=new Pi(d,m,k,E,K=>{g(K)}),h=new qi(p),q=new bi(B,a),C=new xi(a),R=new Gi;try{e.subscribeExecution(h),e.subscribeExecution(C),e.subscribeExecution(q),e.subscribeExecution(_),e.subscribeExecution(R),await Promise.all([e.swap(o,r,i,X,t,f),c()])}catch{}finally{e.unsubscribeExecution(h),e.unsubscribeExecution(C),e.unsubscribeExecution(q),e.unsubscribeExecution(_),e.unsubscribeExecution(R)}})(),"interrupt"):"continue"}isSupportedQuote(A){return Qe(A)||zj(A)||St(A)||yA(A)}};n();s();n();s();var rp=class{intercept({hasViewedAutoSlippageOptIn:A,selectedSetting:e,setHasViewedAutoSlippageOptIn:t,showOverlay:r}){return!A&&e!=="auto"?(r("autoSlippageOptIn"),t(!0),"interrupt"):"continue"}};function xS(j,A){let e=[];return j&&e.push(new rp),A&&e.push(new tp),e}n();s();var op=class{async fetch(A){return await Sc(A)}stopFetching(){}getFetchInterval(A){return A}};n();s();var np=class{constructor(A){this.swapper=A}async fetch(A){let e=PC(A.amount,A.sell,A.buy);return this.swapper.setPair(A.buy,A.sell,e),await this.swapper.fetchQuotes({buy:A.buy,sell:A.sell,amount:e,amountUsd:A.sellAmountUsd,slippageTolerance:A.slippageTolerance,autoSlippageEnabled:A.enableAutoSlippage,priorityFee:A.priorityFee,tipAmount:A.tipAmount})}stopFetching(){this.swapper.stopProcessingQuotes()}getFetchInterval(A){return A}};function PC(j,A,e){let t=j.type==="sell"?A:e;return{amount:new T(j.value).shiftedBy(-t.data.decimals).toString(),perspective:j.type}}n();s();var sp=class{constructor(A,e){this.swapper=A;this.queryClient=e}queryKey;quoteProcessorListener={onStateChange:(A,e)=>{if(!this.queryKey){console.error("queryKey is not set");return}e.type==="quoteProcessed"&&this.queryClient.setQueryData(this.queryKey,e.response)}};async fetch(A,e){return this.queryKey=e,this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener),new Promise((t,r)=>{let o=OC(A.amount,A.sell,A.buy),i={onStateChange:(a,c)=>{switch(c.type){case"firstQuoteReceived":t(c.response),this.swapper.unsubscribeQuoteProcessor(i);break;case"error":r(c.error),this.swapper.unsubscribeQuoteProcessor(i),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener);break}}};this.swapper.subscribeQuoteProcessor(this.quoteProcessorListener),this.swapper.subscribeQuoteProcessor(i),this.swapper.setPair(A.buy,A.sell,o),this.swapper.setAmount(o,{slippageTolerance:A.slippageTolerance,slippageType:A.enableAutoSlippage?"auto":"fixed",priorityFee:A.priorityFee,tipAmount:A.tipAmount})})}stopFetching(){this.swapper.getQuoteProcessorState().type!=="idle"&&(this.swapper.stopProcessingQuotes(),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener))}getFetchInterval(A){return!1}};function OC(j,A,e){let t=j.type==="sell"?A:e;return{amount:new T(j.value).shiftedBy(-t.data.decimals).toString(),perspective:j.type}}n();s();var sm=v(x());var GS=()=>{let j=(0,sm.useCallback)(()=>{Sn()},[]),A=(0,sm.useCallback)(()=>{G6()},[]);return{onSwapTabEnter:j,onSwapTabExit:A}};var TS=(0,fe.createContext)(void 0),MC=({children:j})=>{let{data:[A,e,t,r,o]}=BA(["enable-auto-slippage","enable-swapper-toasts","enable-swapper-toasts-auto-slippage","enable-swapper-keypad-swap","enable-quote-streaming"]),i=(0,fe.useMemo)(()=>A?["auto","fixed"]:["fixed"],[A]),a=(0,fe.useMemo)(()=>t?["SLIPPAGE_EXCEEDED"]:[],[t]),c=(0,fe.useMemo)(()=>xS(A,e),[A,e]),p=!0,d=Gj(),m=AA(),B=(0,fe.useMemo)(()=>o?new sp(d,m):e&&gj?new np(d):new op,[d,e,o,m]),{onSwapTabEnter:f,onSwapTabExit:k}=GS(),E=(0,fe.useMemo)(()=>gj?ko("full"):ko("compactNoSymbol"),[]);return fe.default.createElement(TS.Provider,{value:{slippageSettingTypes:i,reviewInterceptors:c,showStickyCTAButton:p,getSwapQuotesStrategy:B,supportedCustomSimulationToastErrorTypes:a,showKeypadSwapButton:r,onSwapTabEnter:f,onSwapTabExit:k,balanceDisplayStrategy:E}},j)},ip=()=>{let j=(0,fe.useContext)(TS);if(!j)throw new Error("useSwapTab must be used within a SwapTabProvider");return j};n();s();var CC=j=>P6.safeParse(j).success;n();s();var je=v(x());n();s();n();s();var Mt=v(x());n();s();var PS=({networkID:j,txReceipt:A,preferredExplorers:e})=>{let t=A?.id??"";if(!t)return;let r=e?.explorers[j];return tB({networkID:j,endpoint:"transaction",explorerType:r,param:t})};n();s();function OS(j,A){if(A){let e=_C(j),t=DC(j,A),r=NC(j,A);return{notEnoughSol:A.message==="NotEnoughSol",txErrorTitle:e,txErrorMessage:t,txErrorHelpButtonLink:r}}return{notEnoughSol:!1,txErrorTitle:"",txErrorMessage:"",txErrorHelpButtonLink:""}}var _C=j=>j?G.t("swapTxBridgeFailed"):G.t("swapTxConfirmationSwapFailed"),RC=j=>{switch(j.message){case"LedgerConnectionError":return G.t("swapTxConfirmationSwapFailedLedgerConnectionError");case"LedgerRejectAction":return G.t("swapTxConfirmationSwapFailedLedgerReject");case"LedgerUnknownSignError":return G.t("swapTxConfirmationSwapFailedLedgerSignError");case"LedgerUnknownError":return G.t("swapTxConfirmationSwapFailedLedgerError");default:return null}},DC=(j,A)=>{let e=RC(A);if(e!==null)return e;if(j)switch(A.message){case"slippageToleranceExceeded":return G.t("swapTxConfirmationSwapFailedSlippageLimit");default:return G.t("swapTxBridgeFailedDescription")}else switch(A.message){case"INSUFFICIENT_FUNDS":return G.t("swapTxConfirmationSwapFailedInsufficientBalance");case"slippageToleranceExceeded":return G.t("swapTxConfirmationSwapFailedSlippageLimit");case"EmptyRoute":return G.t("swapTxConfirmationSwapFailedEmptyRoute");case"AccountFrozen":return G.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return G.t("swapTxConfirmationSwapFailedSimulationTimeout");case"INSUFFICIENT_GAS":return G.t("swapTxConfirmationSwapFailedInsufficientGas");case"Scan results are not valid":return G.t("swapTxConfirmationSwapFailedUnknownError");case"STALE_QUOTE":return G.t("swapTxConfirmationSwapFailedStaleQuote");case"SimulationUnknownError":return G.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return G.t("swapTxConfirmationSwapFailedTryAgain")}},NC=(j,A)=>j?q6:A.message==="AccountFrozen"?w0:q6;n();s();var MS=({sellAmount:j,sellFungible:A,buyAmount:e,buyFungible:t,txStatus:r,txReceipt:o,swapTransactions:i,isReadyToExecute:a,uiEstimatedTime:c,isBridge:p,isLedger:d,notEnoughSol:m,txError:B,txErrorTitle:f,txErrorMessage:k,explorerUrl:E,txErrorHelpButtonLink:g,addressType:y})=>{let F=wA(j,A?.data.decimals??0).toNumber(),S=wA(e,t?.data.decimals??0).toNumber(),I=r==="success",O=r==="error",M=!!o,P=i?.transactions.length||0;return{sellAsset:{amount:F,symbol:A?.data.symbol??"",networkID:A?.data.chain.id??iA.Solana.Mainnet},buyAsset:{amount:S,symbol:t?.data.symbol??"",networkID:t?.data.chain.id??iA.Solana.Mainnet},estimatedTime:c,isBridge:p,isSuccess:I,isFailure:O,isLedger:d,isClosable:M,notEnoughSol:m,txError:B,txErrorTitle:f,txErrorMessage:B?.detailMessage?`${k}

${B?.detailMessage}`:k,txLink:E??"",txErrorHelpButtonLink:g,numberOfTransactions:P,isReadyToExecute:a,addressType:y}};var im=({sellFungible:j,txReceipt:A,swapTransactions:e,isBridge:t,txError:r,txStatus:o,isReadyToExecute:i,isLedger:a})=>{let c=j?.data.chain.id??iA.Solana.Mainnet,{notEnoughSol:p,txErrorTitle:d,txErrorMessage:m,txErrorHelpButtonLink:B}=(0,Mt.useMemo)(()=>OS(t,r),[t,r]),f=(0,Mt.useMemo)(()=>$.getAddressType(c),[c]),{currentQuote:k}=aA(),[E]=(0,Mt.useState)(k),{buyAmount:g,sellAmount:y}=E??{buyAmount:"0",sellAmount:"0"},F=w(P=>P.buyFungible),{data:S}=kB(),I=(0,Mt.useMemo)(()=>PS({txReceipt:A,networkID:c,preferredExplorers:S}),[A,c,S]),O=(0,Mt.useMemo)(()=>Ti(E),[E]);return(0,Mt.useCallback)(()=>MS({sellFungible:j,txReceipt:A,addressType:f,swapTransactions:e,isBridge:t,txError:r,sellAmount:y,buyAmount:g,buyFungible:F,txStatus:o,isReadyToExecute:i,uiEstimatedTime:O,isLedger:a,notEnoughSol:p,txErrorTitle:d,txErrorMessage:m,explorerUrl:I,txErrorHelpButtonLink:B}),[j,A,f,e,t,r,y,g,F,o,i,O,a,p,d,m,I,B])()};n();s();var Wn=v(x());var So=()=>{let j=W(),A=Ur(),{currentQuote:e,quoteResponse:t,selectedProviderIndex:r,selectedBaseProvider:o}=aA(),{analyticsContext:i}=e??{analyticsContext:void 0},a=w(P=>P.buyFungible),c=w(P=>P.sellFungible),p=w(P=>P.buyUsdValue),d=w(P=>P.sellUsdValue),m=w(P=>P.swapFilter),{selectedSetting:B}=XA(),f=w.getState().amountType,k=c?.data.chain.id??iA.Solana.Mainnet,E=be(),{transition:g}=wt(),y=(0,Wn.useCallback)(P=>{let X=ar(r,B.type,t);return jp({buyToken:a,sellToken:c,buyAmount:e?.buyAmount.toString()??"",sellAmount:e?.sellAmount.toString()??"",phantomFeeUiAmount:E.phantomFee.amountUsd?.toString()??"",priceImpact:gr(e),provider:KA(YA(e)),baseProvider:o,buyAssetUsdValue:p,sellAssetUsdValue:d,slippageTolerance:X,transactionId:P??"",slippageType:B.type,sellSwapFilter:m,analyticsContext:i})},[a,c,e,E.phantomFee.amountUsd,p,d,t,r,B.type,m,i,o]),F=(0,Wn.useCallback)(P=>{ep({txReceipt:P,networkID:k,amountType:f,swapAnalytics:A})},[k,f,A]),S=(0,Wn.useCallback)((P,X)=>{g({type:"transactionSubmissionFailed",error:P}),P.message!=="Scan results are not valid"&&P.message!=="slippageToleranceExceeded"&&b.captureError(P,"swapper");let _=y(X);j.capture("swapperSwapFailure",{data:{..._.data,error:P.message}})},[j,y,g]),I=()=>{j.capture("swapperSwapFailureNoSignature")},O=(0,Wn.useCallback)(P=>{let X=y(P.id);j.capture("swapperSwapSuccess",X);let _=Nt(P.networkID);b.addBreadcrumb("swapper","transactionStatus","info",{..._,txReceipt:P.id}),(_.chainType==="eip155"||_.chainType==="solana"||_.chainType==="sui")&&A.transactionStatus(P.id,{..._,status:{type:"confirmed"}})},[j,y,A]),M=(0,Wn.useCallback)((P,X)=>{let _=P?.networkID?Nt(P.networkID):null;(_?.chainType==="eip155"||_?.chainType==="solana"||_?.chainType==="sui")&&P?.id&&(b.addBreadcrumb("swapper","transactionStatus","error",{..._,txReceipt:P.id}),A.transactionStatus(P.id,{..._,status:{type:"error"}}),g({type:"transactionConfirmationFailed",error:X,txReceipt:P}))},[A,g]);return{logTransactionSubmitted:F,logTransactionSubmissionError:S,logSwapFailureNoSignature:I,logTransactionConfirmed:O,logTransactionConfirmationFailed:M}};n();s();var RS=v(x());n();s();var Oi=()=>{let{selectedSetting:j}=XA(),{selectedProviderIndex:A,quoteResponse:e}=aA(),t=ar(A,j.type,e),{data:r}=cr();return{slippageSetting:j,slippageTolerance:t??r??void 0}};n();s();n();s();var ap=v(x());n();s();var am="swap-validation",CS=({scanResult:j,scanResultError:A,quote:e,sellToken:t,buyToken:r})=>{if(A)return"valid";if(!e||!t||!r)return b.addBreadcrumb(am,`Missing necessary args: ${JSON.stringify({quote:!!e,scanResult:!!j,sellToken:t,buyToken:r})}`,"info"),new bA("MissingArgument");if(j?.error===Ne.SIMULATION_FAILED)return"valid";if(j?.error){if(b.addBreadcrumb(am,`Simulation error: ${JSON.stringify({error:j.error})}`,"info"),j.error===Ne.SLIPPAGE_EXCEEDED)return new bA("slippageToleranceExceeded");if(j.error===Ne.INSUFFICIENT_FUNDS)return new bA("INSUFFICIENT_FUNDS");if(j.error===Ne.INSUFFICIENT_GAS)return new bA("INSUFFICIENT_GAS");if(j.error===Ne.ACCOUNT_FROZEN)return new bA("AccountFrozen");if(j.error===Ne.SIMULATION_TIMEOUT)return new bA("SIMULATION_TIMEOUT");if(j.error===Ne.STALE_QUOTE)return new bA("STALE_QUOTE");if(j.error===Ne.UNKNOWN_ERROR){let o=KC(j);return new bA("SimulationUnknownError",o)}return new bA("Scan results are not valid")}return j?"valid":(b.addBreadcrumb(am,`Missing necessary args: ${JSON.stringify({quote:!!e,scanResult:!1,sellToken:t,buyToken:r})}`,"info"),new bA("MissingArgument"))};function KC(j){return j.simulationError?j.simulationError.humanReadableError:j.warnings[0]?.message}var _S=({swapTransactions:j})=>{let A=w(E=>E.sellFungible),e=w(E=>E.buyFungible),t=A?.data.chain.id??iA.Solana.Mainnet,{selectedSetting:r}=XA(),{currentQuote:o,quoteResponse:i}=aA(),a=KA(YA(o)),c=HA(A?.data.chain.id,e?.data.chain.id),p=i?.buyToken?J(i?.buyToken):void 0,d=i?.sellToken?J(i?.sellToken):void 0,m={type:"transaction",userAccount:A?.data.walletAddress??"",params:void 0,url:"https://phantom.com",networkID:t,context:c?"bridge":"swap",provider:a,slippageType:r.type,metadata:{swapper:{quoteOutputAmount:o?.buyAmount,quoteOutputToken:p,quoteInputAmount:o?.sellAmount,quoteInputToken:d}}};j?.type==="evm"&&$.isEVMNetworkID(t)&&(m.params={transactions:j.transactions}),j?.type==="solana"&&$.isSolanaNetworkID(t)&&(m.params={transactions:j.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}});let{transition:B}=wt(),f=(0,ap.useCallback)((E,g)=>{g&&B({type:"simulationRequestError",error:g}),E&&B({type:"simulationResponseReceived",scannedTransactionResult:E})},[B]),k=Ai(m,{disableRefetch:!0,onSettled:f,disabled:j?.type==="sui"});return(0,ap.useMemo)(()=>{if(k.isLoading)return{isLoading:!0,state:"loading"};if(j?.type==="sui")return{isLoading:!1,state:"valid"};let E=CS({scanResult:k.data,scanResultError:k.isError,quote:o,sellToken:i?.sellToken,buyToken:i?.buyToken,simulationTolerance:i?.simulationTolerance});return{isLoading:k.isLoading,state:E}},[k,o,i,j?.type])};function DS({isBridge:j,addressType:A,isSwapSimulationDisabled:e,onTransactionReceiptReceived:t,onTransactionSubmissionError:r,resetToInitialState:o,sender:i}){let{logTransactionSubmitted:a,logSwapFailureNoSignature:c}=So(),{connection:p}=Oe(),{data:d}=FA(),{currentQuote:m,quoteResponse:B}=aA(),{slippageTolerance:f}=Oi(),k=w(h=>h.gasEstimation.estimateWithBuffer),E=w(h=>h.sellFungible),g=E?.data.chain.id??iA.Solana.Mainnet,{data:y,isSuccess:F}=Ve({callerAddress:i,quote:m,sellFungible:E}),S=_S({swapTransactions:y}),{pendingActivityRows:I}=aS({sender:i}),{mutateAsync:O}=pd({accountIdentifier:d?.identifier??"",networkID:g}),[M,P]=(0,RS.useState)(!1),X=async()=>(P(!0),fS({isBridge:j,addressType:A,isSwapSimulationDisabled:e,sender:i,currentQuote:m,quoteResponse:B,gasEstimation:k,swapTransactions:y,scanResults:S,pendingActivityRows:I,connection:p,slippageTolerance:f,logSwapFailureNoSignature:c,logTransactionSubmitted:a,swapFungibles:O,onTransactionSubmissionError:r,onTransactionReceiptReceived:t,resetToInitialState:o}));return{isReadyToExecute:M||(!S.isLoading||e)&&F,executeSwap:X}}n();s();var cp=v(x());var NS=({goToSwapTab:j,goToActivityTab:A})=>{let{resume:e}=Ie(),{clearQuotes:t}=cd(),r=It(),o=(0,cp.useCallback)(()=>{e(),t(),j()},[j,e,t]),i=(0,cp.useCallback)(()=>{e()},[e]),a=(0,cp.useCallback)(()=>{r(),A()},[A,r]);return{onClose:o,onRetry:i,onSwapSuccess:a}};n();s();function KS(){let{data:[j]}=BA(["kill-swapper-simulation"]);return j}n();s();var Jn=v(x());var LS=({onTransactionConfirmationSuccess:j,onTransactionConfirmationError:A,txReceipt:e})=>{let t=AA(),{data:r}=FA(),o=(0,Jn.useMemo)(()=>r?.addresses??[],[r]),i=JB(o),a=It(),{logTransactionConfirmed:c,logTransactionConfirmationFailed:p,logTransactionSubmissionError:d}=So(),m=w(S=>S.sellFungible),{currentQuote:B}=aA(),{sellAmount:f}=B??{sellAmount:"0"},k=WB({wallets:o,encodedCaip19:m?J(V(m)):""}),E=(0,Jn.useCallback)(async S=>{if(c(S),a(),m){let I=new Y(m.data.amount),O=new Y(f),M=I.minus(O).toString();ic(t,{id:_n(m),amount:M})}i(),k()},[c,a,f,m,i,k,t]),{isSuccess:g,isError:y,error:F}=VB(E,e);(0,Jn.useEffect)(()=>{if(g)j();else if(y){let S=fr(F);A(S),p(e,S),d(S,e?.id)}},[g,y,F,e,p,j,A,d])};function US({isLedger:j,goToSwapTab:A,goToActivityTab:e}){let{currentQuote:t}=aA(),r=w(H=>H.buyFungible),o=w(H=>H.sellFungible),i=It(),a=KS(),{logTransactionSubmissionError:c}=So(),[p]=(0,je.useState)(HA(o?.data.chain.id,r?.data.chain.id)),d=o?.data.chain.id??iA.Solana.Mainnet,{data:m}=FA(),B=(0,je.useMemo)(()=>m?.addresses??[],[m]),f=(0,je.useMemo)(()=>B.find(H=>H.networkID===o?.data.chain.id)?.address??"",[B,o]),k=(0,je.useMemo)(()=>$.getAddressType(d),[d]),{data:E}=Ve({callerAddress:f,quote:t,sellFungible:o}),[g,y]=(0,je.useState)(),[F,S]=(0,je.useState)("loading"),[I,O]=(0,je.useState)(),M=()=>{S("loading"),O(void 0),y(void 0)},P=H=>{y(H)},X=(0,je.useCallback)((H,U)=>{S("error"),O(H),c(H,U)},[c]),_=(0,je.useCallback)(()=>{S("success")},[]),h=(0,je.useCallback)(H=>{S("error"),O(fr(H))},[]);LS({onTransactionConfirmationSuccess:_,onTransactionConfirmationError:h,txReceipt:F==="error"?void 0:g});let{executeSwap:q,isReadyToExecute:C}=DS({isBridge:p,addressType:k,isSwapSimulationDisabled:a,onTransactionSubmissionError:X,onTransactionReceiptReceived:P,resetToInitialState:M,sender:f}),{onClose:R,onRetry:K,onSwapSuccess:D}=NS({goToSwapTab:A,goToActivityTab:e});return{...im({sellFungible:o,txReceipt:g,swapTransactions:E,isBridge:p,txStatus:F,isReadyToExecute:C,isLedger:j,txError:I}),executeSwap:q,resetSwapper:i,onClose:R,onRetry:K,onSwapSuccess:D}}n();s();n();s();var QS=v(x()),HS=()=>{let{data:[j,A,e]}=BA(["enable-auto-slippage","enable-swapper-priority-fee-settings","enable-custom-tips"]);return(0,QS.useMemo)(()=>j?A?e?"autoWithPriorityFeesAndTips":"autoWithPriorityFees":"auto":"fixed",[j,A,e])};n();s();n();s();var VS=v(x());var LC=()=>{let{data:[j]}=BA(["enable-swapper-toasts"]),A=Gj();return{selectQuote:(0,VS.useCallback)((t,r)=>{if(j){let o=t[r];o&&A.selectQuote(o)}},[j,A])}};n();s();n();s();n();s();n();s();var Yn=class j{constructor(A,e){this.tracer=e;this.name=A.name,this.context=A.context,this.marks=j.makeMarks(A.marks),this.derivedMarks=A.derivedMarks||[],this.onlyDev=A.onlyDev||!1}name;context;marks;derivedMarks;onlyDev;get markCount(){return this.marks.length+this.derivedMarks.length}getMark(A){return this.marks.find(e=>e.name===A)}qualify(A){return`${this.id}_${A}`}static makeMarks(A){return A.map(e=>typeof e=="string"?{name:e}:{name:e.name,metric:e.metric})}};n();s();var Mi=class extends Yn{get id(){return`${this.context}_${this.name}`}startTrace(){ne()||this.tracer.startTrace(this,"start")}mark(A){ne()||this.tracer.mark(this,A)}};n();s();n();s();n();s();var pp=class{nativeTimestamp;constructor(A){this.nativeTimestamp=A.nativeEvent.timeStamp}};var up=class extends Yn{triggers;constructor(A,e){super(A,e),this.triggers=A.triggers}get id(){return`user_${this.context}_${this.name}`}startTrace(A,e){if(ne())return;let t=new pp(e);this.tracer.startTrace(this,A,t.nativeTimestamp)}mark(A){ne()||this.tracer.mark(this,A)}markFrame(A){ne()||requestAnimationFrame(()=>{this.tracer.mark(this,A)})}};n();s();n();s();n();s();var lp=class{constructor(A){this.cleanupOptions=A}cleanupInterval=null;lastActivityTimestamp=0;signalActive(){this.lastActivityTimestamp=performance.now(),this.ensureCleanup()}ensureCleanup(){this.cleanupInterval||(this.cleanupInterval=setInterval(()=>this.cleanupCycle(),this.cleanupOptions.cleanupIntervalMs))}cleanupCycle(){let{itemsRemaining:A}=this.runCleanup(),e=performance.now()-this.lastActivityTimestamp;A===0&&e>=this.cleanupOptions.maxAgeMs&&this.stopCleanup()}stopCleanup(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}};var dp=class extends lp{constructor(e){super({cleanupIntervalMs:10*60*1e3,maxAgeMs:4*60*1e3});this.perf=e}activeTraces=new Map;startTrace(e,t,r=this.perf.now()){let o=new cm(e,t,r);this.activeTraces.set(e.id,o),this.perf.mark(o.startMarkName,{timestamp:r}),this.signalActive()}mark(e,t){let r=this.activeTraces.get(e.id);if(!r||r.hasMark(t))return;let o=e.getMark(t);this.processMark(r,o),this.processDerivedMarks(r),r.numAddedMarks===e.markCount&&this.activeTraces.delete(e.id)}processMark(e,t){e.addMark(t.name);let r=e.operation.qualify(t.name);if(this.perf.mark(r),t.metric){let o=e.operation.qualify(t.metric),i=this.perf.measure(o,e.startMarkName,r);if(i===void 0){b.captureMessage(`[OperationTracer] Unexpected measure duration 'undefined' for mark ${r}, ignoring`,"performance","error");return}console.log(`[OperationTracer] Metric '${o}': ${i}ms (trigger: ${e.trigger})`)}}processDerivedMarks(e){e.operation.derivedMarks.forEach(t=>{if(e.hasMark(t.name))return;t.dependsOn.every(o=>e.hasMark(o))&&this.processMark(e,t)})}runCleanup(){let e=this.perf.now();for(let[t,r]of this.activeTraces)r&&e-r.startTime>this.cleanupOptions.maxAgeMs&&this.activeTraces.delete(t);return{itemsRemaining:this.activeTraces.size}}},cm=class{constructor(A,e,t){this.operation=A;this.trigger=e;this.startTime=t}marks=new Set;get numAddedMarks(){return this.marks.size}get startMarkName(){return this.operation.qualify(this.trigger)}addMark(A){this.marks.add(A)}hasMark(A){return this.marks.has(A)}};n();s();var mp=class{now(){return performance.now()}mark(A,e={timestamp:performance.now()}){performance.mark(A,{startTime:e.timestamp})}measure(A,e,t){try{let r=performance.measure(A,e,t).duration;return Math.round(r)}catch{return}}};var UC=new mp,pm=new dp(UC),Bp=class j{static createOperation(A){return new Mi(A,pm)}static createUserOperation(A){return new up(A,pm)}static measureFunc(A,e,t={onlyDev:!1}){if(ne())return e();let r=new Mi({name:A,context:"func",marks:[{name:"done",metric:"time"}]},pm);r.startTrace();let o=e();return o&&typeof o.then=="function"?o.then(i=>(r.mark("done"),i)):(r.mark("done"),o)}static wrapFunc(A,e,t={onlyDev:!1}){return function(...r){return j.measureFunc(A,()=>e(...r),t)}}};var QC=Bp.createUserOperation({name:"switchTokens",context:"swapTab",triggers:["switchButtonClick"],marks:["sellTokenUpdated","buyTokenUpdated"],derivedMarks:[{name:"tokensSwitched",dependsOn:["sellTokenUpdated","buyTokenUpdated"],metric:"switchTime"}],onlyDev:!0});n();s();n();s();var BUA=TA(j=>({quoteSpan:void 0,previousBuyAmount:void 0,previousSellAmount:void 0,setQuoteSpan(A){j({quoteSpan:A})},setPreviousBuyAmount(A){j({previousBuyAmount:A})},setPreviousSellAmount(A){j({previousSellAmount:A})}}));n();s();var FUA=TA(j=>({initialLoadSpan:void 0,setInitialLoadSpan(A){j({initialLoadSpan:A})}}));n();s();var VC=v(x());var vUA=["simulationRequestErrored","simulationFailed","transactionSubmissionFailed","transactionNotConfirmed"];n();s();var XC=v(x());n();s();n();s();var Zn=class{constructor(A){this.analytics=A}swapperOpen(A){this.analytics.capture("swapperOpen",{data:{uiContext:"swapperInterstitial",swapMode:A.type}})}swapperClose(A){this.analytics.capture("swapperClose",{data:{uiContext:"swapperInterstitial",reason:A}})}swapperUpdateAsset(A,e){switch(A.type){case"sell":this.analytics.capture("swapperUpdateToAsset",{data:co(e)});break;case"buy":this.analytics.capture("swapperUpdateFromAsset",{data:co(e)});break}}swapperSwapDefaultQuoteSelected(A){this.analytics.capture("swapperSwapDefaultQuoteSelected",{data:{quotePercentageValue:A}})}swapperDetailPanelClicked(){this.analytics.capture("swapperDetailPanelClicked",{data:{uiContext:"swapperInterstitial"}})}swapperToggleQuoteCurrency(){this.analytics.capture("swapperToggleQuoteCurrency",{data:{uiContext:"swapperInterstitial"}})}};var um=class{getNavigationParams({initiatingSwapMode:A,selectedToken:e,initialSwapAmount:t}){return{swapMode:{type:A.type,buyCaip19:A.type==="buy"?A.buyCaip19:J(V(e)),sellCaip19:A.type==="sell"?A.sellCaip19:J(V(e))},initialSwapAmount:t}}captureAnalytics(A,e,t){new Zn(A).swapperUpdateAsset(t,e)}},lm=class{selectToken({swapper:A,selectedToken:e,currentTokens:t,perspective:r,navigateToSwapper:o,dismiss:i}){let a=r==="sell"?t.buyCaip19:t.sellCaip19;if(this.isSameSelectedToken(a,e))return this.handleTokenSwitch(A,i);if(this.shouldNavigateToNewChain(r,t.sellCaip19,e))return o({sellFungible:e});A.changeToken(e,r),i()}shouldNavigateToNewChain(A,e,t){return A!=="sell"?!1:ie(e).chainId!==t.data.chain.id}handleTokenSwitch(A,e){A.switchTokens(),e()}isSameSelectedToken(A,e){let t=J(V(e));return A===t}},zC=new um,WC=new lm;n();s();var Ci=v(x());var iQA=(0,Ci.createContext)(void 0);n();s();n();s();var kp=v(x());var YC=["enable","reject"],ZC=({continueSwap:j,dismiss:A})=>{let e=W(),{setSlippageSetting:t}=XA(),r=(0,kp.useCallback)(i=>{switch(A(),i){case"enable":e.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),t({type:"auto"}),Sn();break;case"reject":e.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),t({type:"fixed"}),j();break}},[j,A,t,e]),o=(0,kp.useMemo)(()=>YC.map(i=>({label:G.t(i==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:i==="enable"?"primary":"secondary",onPress:()=>r(i)})),[r]);return{title:G.t("swapSlippageOptInTitle"),description:G.t("swapSlippageOptInSubtitle"),learnMoreText:G.t("commandLearnMore"),learnMoreUrl:dc,options:o}};n();s();var zS=v(x());var A_=({goToAssetSelect:j})=>{let{setSearchQuery:A}=w();return(0,zS.useCallback)(e=>{e==="buy"&&A(""),j(e)},[j,A])};n();s();var _i=v(x());var WS="auto-provider-defaulted-to-toast",j_=({showDefaultAutoProvider:j})=>{let{hasDefaultedToBestQuote:A}=aA(),{message:e,hideToast:t}=Nj(),r=w(i=>i.setSelectedBaseProvider),o=(0,_i.useRef)(A);(0,_i.useEffect)(()=>{o.current=A},[A]),(0,_i.useEffect)(()=>{A&&setTimeout(()=>{o.current&&(r(Xj),e({id:WS,message:G.t("swapProviderAutoUpdateTitle"),icon:"info",onPress:()=>{t(WS),j()}}))},2e3)},[A,e,t,j,r])};n();s();var JS=v(x());n();s();var As=v(x());var e_=Y(1);function fp(j,A,e){let t=W(),[r,o]=(0,As.useState)(!1),i=(0,As.useCallback)(async()=>{await t.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:r?"buy token":"sell token"}}),o(!r)},[t,r]),a=w(p=>p.sellFungible),c=w(p=>p.buyFungible);return(0,As.useMemo)(()=>{let p=!1,d="";if(A&&e){let m=c?.data,B=a?.data;if(m&&B){let{buyAmount:f,sellAmount:k}=e,E=wA(f,m.decimals),g=wA(k,B.decimals),y=E.dividedBy(g),F=`1 ${B.symbol} \u2248 ${yo(y)} ${m.symbol}`,S=`1 ${m.symbol} \u2248 ${yo(e_.dividedBy(y))} ${B.symbol}`;p=new Y(e.buyAmount).isEqualTo(j),d=r?S:F}}return{isBestRate:p,rate:d,flip:i}},[j,e,r,A,a,c,i])}var t_=({selectProvider:j})=>{let{currentQuote:A,quoteResponse:e}=aA(),{currencySymbol:t,fromUsd:r}=GA(),o=A?.buyAmount??"",i=fp(o,e,A),a=Nn(YA(A)),c=A?.baseProvider.name??"";return{details:(0,JS.useMemo)(()=>A?yA(A)?o_({quote:A,selectProvider:j,exchangeRate:i,currencySymbol:t,fromUsd:r}):r_({provider:c,sources:a,exchangeRate:i,selectProvider:j}):[],[A,c,a,i,j,t,r]),footnote:G.t("swapProviderPricingFootnote")}},r_=({provider:j,sources:A,exchangeRate:e,selectProvider:t})=>[{label:G.t("swapProviderPricingProvider"),value:j,icon:"chevron-right",onPress:t},{label:G.t("swapProviderPricingMarket"),value:A},{label:G.t("swapProviderPricingPrice"),value:e.rate,icon:"swap",onPress:e.flip}],o_=({quote:j,selectProvider:A,exchangeRate:e,currencySymbol:t,fromUsd:r})=>{let o=j.baseProvider.name,i=di(j).toString(),a=me(Ot(j));return[{label:G.t("swapProviderPricingProvider"),value:o,icon:"chevron-right",onPress:A},{label:G.t("swapProviderPricingPrice"),value:e.rate,icon:"swap",onPress:e.flip},{label:G.t("swapProviderPricingFees"),value:`${t}${r(Number(i),2)} ${G.t("swapProvidersFee")}`},{label:G.t("swapProviderPricingTime"),value:a}]};n();s();n();s();n();s();var js=v(x());n();s();var Aw=v(x());n();s();var YS=v(x());var n_={status:!1,timestamp:""},ZS=()=>{let{data:j}=aj({key:"hasViewedAutoSlippageOptIn",queryKey:hA.hasViewedAutoSlippageOptIn()}),{mutateAsync:A}=mj({key:"hasViewedAutoSlippageOptIn",queryKey:hA.hasViewedAutoSlippageOptIn()}),e=(0,YS.useCallback)(t=>void A({status:t,timestamp:new Date().toISOString()}),[A]);return{viewedOptInState:j??n_,setViewedOptInState:e}};var jw=()=>{let{viewedOptInState:j,setViewedOptInState:A}=ZS(),{selectedSetting:e}=XA(),{reviewInterceptors:t,supportedCustomSimulationToastErrorTypes:r}=ip(),o=Gj(),{connection:i}=Oe(),a=lA(),c=Mo(),p=G.language,d=W(),m=It(),B=AA(),f=Ur(),k=w(F=>F.gasEstimation.estimateWithBuffer),E=XA(),{storePairs:g}=le();return{executeInterceptors:(0,Aw.useCallback)((F,S,I,O)=>{for(let M of t)if(M.intercept({hasViewedAutoSlippageOptIn:j.status,selectedSetting:e.type,setHasViewedAutoSlippageOptIn:A,showOverlay:F,swapper:o,connection:i,storage:a,vaultProxy:c,locale:p,analytics:d,resetSwapper:m,queryClient:B,showFungibleDetails:S,showBuyFungibleScreen:I,swapAnalytics:f,gasEstimation:k,slippageSettings:E,navigateToSwapper:O,supportedCustomSimulationToastErrorTypes:r,storePairs:g,isMobile:gj})==="interrupt")return"interrupt";return"continue"},[t,j.status,e.type,A,o,i,a,c,p,d,m,B,f,k,E,r,g])}};n();s();var dm=v(x());n();s();var rw=v(x());n();s();function ew(j){if(j===void 0)return Lj.colors.legacy.textSecondary;let A=parseFloat(j.toFixed(2));switch(!0){case A>=5:return Lj.colors.legacy.accentAlert;case(A>=1&&j<5):return Lj.colors.legacy.accentWarning;case(j>=0&&j<1):return Lj.colors.legacy.accentSuccess;default:return Lj.colors.legacy.textSecondary}}n();s();function tw(j){if(j===void 0)return"-";switch(!0){case j>=1e3:return">1000%";case(j>=.01&&j<1e3):return`${j.toFixed(2)}%`;case(j>0&&j<.01):return"<0.01%";case j===0:return"0%";default:return"-"}}function Ep(j){return(0,rw.useMemo)(()=>{let A="",e="";if(j===void 0)return;let t=j*100;return A=ew(t),e=tw(t),{color:A,text:e,percentage:t}},[j])}n();s();var gp=({priceImpact:j,slippage:A,transferFees:e,shouldShowFees:t,shouldShowPriceImpact:r,shouldShowSlippage:o,isQuoteStreaming:i})=>{let a=i?a_:i_;return[...s_({priceImpact:j,slippage:A,transferFees:e}),...a({shouldShowSlippage:o,shouldShowFees:t,shouldShowPriceImpact:r})]},s_=({priceImpact:j,slippage:A,transferFees:e})=>{let t=[];return j&&j.percentage>M7&&t.push("highPriceImpact"),A&&A.percentage>=C7&&t.push("highSlippage"),(e?.totalPercentFees??0)>0&&t.push("transferFees"),t},i_=({shouldShowSlippage:j,shouldShowFees:A,shouldShowPriceImpact:e})=>{let t=[];return t.push("providerPressable"),t.push("exchangeRate"),j&&t.push("slippagePressable"),A&&t.push("fees"),e&&t.push("priceImpact"),t},a_=({shouldShowSlippage:j,shouldShowFees:A,shouldShowPriceImpact:e})=>{let t=[];return t.push("pricing"),A&&t.push("fees"),e&&t.push("priceImpact"),j&&t.push("slippagePressable"),t};n();s();function yp(j,A){let e="",t="";if(j===void 0)return;e=c_(j);let r=A==="auto"?`${G.t("swapSettingsAuto")} \u2022 `:"";return t=p_(j),{color:e,text:t,percentage:j,prefix:r}}function c_(j){let A=parseFloat(j.toFixed(2));switch(!0){case A>2:return Lj.colors.legacy.accentAlert;case(A>=1&&j<=2):return Lj.colors.legacy.accentWarning;default:return Lj.colors.legacy.textSecondary}}function p_(j){switch(!0){case j>=1e3:return">1000%";case(j>=.01&&j<1e3):return`${j.toFixed(2)}%`;case(j>0&&j<.01):return"<0.01%";case j===0:return"0%";default:return"-"}}var ow=()=>{let{currentQuote:j,quoteResponse:A}=aA(),e=Ep(gr(j)),{selectedSetting:t}=XA(),r=(0,dm.useMemo)(()=>yp(A?.slippageTolerance,t.type),[A?.slippageTolerance,t.type]),o=w(d=>d.sellFungible),i=w(d=>d.buyFungible),a=(0,dm.useMemo)(()=>Xn([o,i]),[o,i]),{data:[c]}=BA(["enable-quote-streaming"]);return{logSwapHomeState:()=>{let d=gp({priceImpact:e,slippage:r,transferFees:a,shouldShowFees:!0,shouldShowPriceImpact:!!e,shouldShowSlippage:!!r,isQuoteStreaming:c}),m={slippage:JSON.stringify(r),priceImpact:JSON.stringify(e),rows:d};b.addBreadcrumb("swapper","swap-home","info",Dt(m))}}};n();s();var nw=v(x());n();s();function mm({sellFungible:j,totalFees:A,minRequiredBalance:e,currentQuote:t}){let r=j?.type?uj(j?.type):!1,{source:o,destination:i}=e;if(r){let a=new T(t?.sellAmount??0);return A.plus(a)}else{let a=o.plus(i);return A.plus(a)}}var sw=()=>{let{currentQuote:j}=aA(),{totalFees:A}=be(),e=w(a=>a.sellFungible),t=w(a=>a.buyFungible),r=mo(e),o=lo({sellFungible:e,buyFungible:t});return(0,nw.useMemo)(()=>mm({sellFungible:e,totalFees:A.maxAmount??A.amount,minRequiredBalance:{source:r,destination:o},currentQuote:j}),[e,A,r,o,j])};n();s();function Bm({sellFungible:j,sellNativeFungible:A,totalNativeRequirement:e}){let t=j?.data.chain.id,r=A?Cj(A.data.amount,A.data.decimals):"-",o=A?Cj(e,A.data.decimals):"-";return{networkId:t,balance:r,required:o}}n();s();function iw({quoteResponse:j,hasInsufficientBalance:A,insufficientBalanceArgs:e,isTermsAcknowledged:t,logSwapHomeState:r,goToInsufficientBalance:o,goToSwapTermsOfService:i,onSwap:a,executeInterceptors:c}){if(j)A?o(e):(r(),t?c()==="continue"&&a():i());else return}var km=({goToSwapTermsOfService:j,goToInsufficientBalance:A,goToConfirmation:e,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:i})=>{let{quoteResponse:a}=aA(),c=w(I=>I.sellFungible),p=c?.data.chain.id,{data:d}=hi(),{logSwapHomeState:m}=ow(),{fungible:B}=Ce({key:p?Bs(p,void 0):void 0}),f=sw(),k=(0,js.useMemo)(()=>new T(B?.data.amount??0).lt(f),[B,f]),E=(0,js.useMemo)(()=>Bm({sellFungible:c,sellNativeFungible:B,totalNativeRequirement:f}),[c,B,f]),g=K6({goToConfirmation:e}),{executeInterceptors:y}=jw(),F=(0,js.useCallback)(()=>y(t,r,o,i),[y,t,r,o,i]);return{onClick:(0,js.useCallback)(()=>iw({quoteResponse:a,hasInsufficientBalance:k,insufficientBalanceArgs:E,isTermsAcknowledged:d,logSwapHomeState:m,goToInsufficientBalance:A,goToSwapTermsOfService:j,onSwap:g,executeInterceptors:F}),[a,k,E,d,m,A,j,g,F])}};n();s();var Ri=v(x()),fm=v(In());n();s();n();s();var aw=({sellFungible:j,totalFees:A,transactionSpeedsToUnitCost:e,currentQuote:t,isBridge:r,minRequiredBalance:o,customPriorityFee:i,customTip:a})=>{let c=j?yi({sellFungible:j,totalFees:A.amount,transactionSpeedsToUnitCost:$.isEVMNetworkID(j.data.chain.id)?e:void 0,isBridge:r,minRequiredBalance:o,customPriorityFee:i,customTip:a}):"0",p=j?.data.decimals;return t?.sellAmount?new Y(wA(t.sellAmount,p??0)).isLessThanOrEqualTo(new Y(c)):!0};var cw=({sellFungible:j,isFetchingQuote:A,quoteResponse:e,currentQuote:t,gasEstimation:r,maxGasEstimation:o,hasNoRoutes:i,totalFees:a,transactionSpeedsToUnitCost:c,isBridge:p,minRequiredBalance:d,shouldSkipSwapReview:m,numTransactions:B,customPriorityFee:f,customTip:k})=>{let E=aw({sellFungible:j,totalFees:a,transactionSpeedsToUnitCost:c,currentQuote:t,isBridge:p,minRequiredBalance:d,customPriorityFee:f,customTip:k});switch(l_({quoteResponse:e,sellFungible:j,currentQuote:t,hasNoRoutes:i,hasEnoughAssets:E,isFetchingQuote:A,gasEstimation:r,maxGasEstimation:o,shouldSkipSwapReview:m,numTransactions:B})){case"notSwappable":return{title:G.t("swapReviewFlowActionButtonPrimary"),type:"secondary",disabled:!0};case"swappable":return{title:G.t("swapReviewFlowActionButtonPrimary"),type:"primary",disabled:!1};case"reviewable":return{title:G.t("swapFlowActionButtonText"),type:"primary",disabled:!1};case"notReviewable":return{title:G.t("swapFlowActionButtonText"),type:"secondary",disabled:!0};case"insufficientBalance":return{title:G.t("swapReviewInsufficientBalance"),type:"alert",disabled:!0};case"noRoutes":return{title:G.t("swapNoQuotesFound"),type:"secondary",disabled:!0}}},u_=({sellFungible:j})=>{let A=j?.data.chain.id??iA.Solana.Mainnet;return $.isEVMNetworkID(A)};function l_({quoteResponse:j,sellFungible:A,currentQuote:e,hasNoRoutes:t,hasEnoughAssets:r,isFetchingQuote:o,gasEstimation:i,maxGasEstimation:a,shouldSkipSwapReview:c,numTransactions:p}){if(!r)return"insufficientBalance";if(t)return"noRoutes";let d=u_({sellFungible:A}),m=!!(i&&(i??[]).length>=p&&(a??[]).length>=p);return!j||!A||!e||d&&!m||o?c?"notSwappable":"notReviewable":c?"swappable":"reviewable"}function d_({goToInsufficientBalance:j,goToSwapTermsOfService:A,goToConfirmation:e,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:i}){let{currentQuote:a,isFetchingQuote:c,quoteResponse:p}=aA(),d=w(dA=>dA.hasNoRoutes),m=w(dA=>dA.sellFungible),B=m?.data.chain.id,{estimate:f,estimateWithBuffer:k}=w(dA=>dA.gasEstimation),E=w(dA=>dA.buyFungible),g=E?.data.chain.id,y=HA(B,g),{totalFees:F}=be(),{data:S}=ls({networkID:B}),I=mo(m),O=lo({sellFungible:m,buyFungible:E}),M=w(dA=>dA.sellAmount),P=w(dA=>dA.setIsFetchingQuote),X=vn(),_=(0,fm.default)(X),h=(0,fm.default)(M);(0,Ri.useEffect)(()=>{M!==h&&M&&X&&_&&P(!0)},[M,h,P,X,_]);let{data:q}=FA(),C=(0,Ri.useMemo)(()=>q?.addresses??[],[q]),R=(0,Ri.useMemo)(()=>C.find(dA=>dA.networkID===m?.data.chain.id)?.address??"",[C,m]),{data:K}=Ve({callerAddress:R,quote:a,sellFungible:m}),{data:D}=ze(),{data:L}=We(),{title:H,type:U,disabled:N}=cw({sellFungible:m,currentQuote:a,quoteResponse:p,isFetchingQuote:c,isBridge:y,gasEstimation:f,maxGasEstimation:k,hasNoRoutes:d,totalFees:F,transactionSpeedsToUnitCost:S,minRequiredBalance:{source:I,destination:O},shouldSkipSwapReview:!0,numTransactions:K?.transactions?.length??0,customPriorityFee:uo(D??0),customTip:uo(L??0)}),{onClick:SA}=km({goToInsufficientBalance:j,goToSwapTermsOfService:A,goToConfirmation:e,showOverlay:t,showFungibleDetails:r,showBuyFungibleScreen:o,navigateToSwapper:i});return{disabled:N,title:H,type:U,onClick:SA}}n();s();n();s();var Di=v(x());n();s();var pw=({buyNetwork:j,sellNetwork:A,executionDuration:e,priceImpact:t,slippage:r})=>{let o=[];return o.push("provider"),o.push("exchangeRate"),j&&A&&j!==A&&o.push("network"),r&&o.push("slippage"),o.push("fees"),e>0&&o.push("executionDuration"),t&&o.push("priceImpact"),o};function m_({isSwapReview:j,showProviders:A,showSwapSettings:e,showSwapPricing:t}){let{bestBuyAmount:r,currentQuote:o,hasNoRoutes:i,quoteResponse:a,quotes:c,isFetchingQuote:p}=aA(),d=fp(r,a,o),m=Ep(gr(o)),{slippageSetting:B,slippageTolerance:f}=Oi(),k=(0,Di.useMemo)(()=>yp(f,B.type),[f,B.type]),E=Nn(YA(o)),g=Ot(o),y=me(g),[F]=(0,Di.useState)(y),S=a?.sellToken?.chainId?$.getChainName(a.sellToken.chainId):void 0,I=a?.buyToken?.chainId?$.getChainName(a.buyToken.chainId):void 0,O=be(),M=Qd(O),P=w(D=>D.sellFungible),X=w(D=>D.buyFungible),_=(0,Di.useMemo)(()=>Xn([P,X]),[P,X]),{data:[h]}=BA(["enable-quote-streaming"]),q=!!O.phantomFee.pct,R={exchangeRate:d,priceImpact:m,slippage:k,provider:E,fees:O,executionDuration:g,uiEstimatedTime:F,isFetchingQuote:p,sellNetwork:S,buyNetwork:I,feeBreakdown:M,selectProviderEnabled:!j&&!!E,isSwapReview:j,showProviders:A,showSwapSettings:e,showSwapPricing:t,transferFees:_},K=j?pw({exchangeRate:d,priceImpact:m,slippage:k,buyNetwork:I,sellNetwork:S,executionDuration:g}):gp({priceImpact:m,slippage:k,transferFees:_,shouldShowFees:!0,shouldShowPriceImpact:!!m,shouldShowSlippage:!!k,isQuoteStreaming:h});return{exchangeRate:d,hasNoRoutes:i,priceImpact:m,slippage:k,provider:E,fees:O,nrOfQuotes:c.length,executionDuration:g,isFetchingQuote:p,sellNetwork:S,buyNetwork:I,rows:K,sharedRowProps:R,displayPhantomFeeRow:q}}n();s();var wo=v(x());n();s();n();s();var Fp=class{getRow({quote:A,buyToken:e}){let t=`${Uj(wA(A.buyAmount,e.decimals),Me.get(e.networkId).formDisplayPrecision)} ${e.symbol}`;return{type:"standard",key:A.baseProvider.id,logoUri:A.baseProvider.logoUri,topLeft:{text:A.baseProvider.name,color:"textPrimary",font:"body"},topRight:{text:t,color:"textSecondary",font:"body"}}}getAutoRow(){return{type:"standard",key:Xj,topLeft:{text:G.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:G.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"}}}},Em=class extends Fp{getRow(A){let{quote:e,currencySymbol:t,fromUsd:r}=A;if(!yA(e))throw new Error("Quote is not a bridge quote");let o=super.getRow(A),i=me(Ot(e)),a=di(e).toString();return{...o,type:"bridge",bottomLeft:{text:i,color:"textSecondary",font:"caption"},bottomRight:{text:`${t}${r(Number(a),2)} ${G.t("swapProvidersFee")}`,color:"textSecondary",font:"caption"}}}getAutoRow(){return{type:"bridge",key:Xj,topLeft:{text:G.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:G.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"},bottomLeft:{text:G.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"},bottomRight:{text:G.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"}}}},gm=new Fp,ym=new Em;var Fm=({quoteResponse:j,buyToken:A,currencySymbol:e,setSelectedProvider:t,fromUsd:r})=>{let o=j.type==="xchain",i=o?ym.getAutoRow():gm.getAutoRow(),a={...i,onPress:()=>t(i.key)},c=j.quotes.reduce((p,d)=>{let B=(o?ym:gm).getRow({quote:d,buyToken:A,currencySymbol:e,fromUsd:r});return[...p,{...B,onPress:()=>t(d.baseProvider.id)}]},[]);return[a,...c]};var B_=({dismiss:j})=>{let{fromUsd:A,currencySymbol:e}=GA(),t=W(),r=w(f=>f.quoteResponse),o=w(f=>f.buyFungible),i=w(f=>f.selectedBaseProvider),a=w(f=>f.setSelectedBaseProvider),[c,p]=(0,wo.useState)(i),d=(0,wo.useMemo)(()=>!r||!o?[]:Fm({quoteResponse:r,buyToken:{networkId:o.data.chain.id,decimals:o.data.decimals,symbol:o.data.symbol??""},currencySymbol:e,setSelectedProvider:p,fromUsd:A}),[r,o,e,A,p]),m=(0,wo.useCallback)(()=>{a(c),t.capture("swapperProviderSelected",{data:{provider:c}}),j()},[c,a,j,t]),B=(0,wo.useMemo)(()=>[{theme:"secondary",disabled:!1,label:G.t("commandCancel"),onPress:j},{theme:"primary",disabled:c===i,label:G.t("commandApply"),onPress:m}],[m,j,c,i]);return{selectedProvider:c,rows:d,buttons:B}};n();s();var hp=v(x());n();s();var Ni=v(x());n();s();var g_=v(x());n();s();var f_=v(x());n();s();var uw=v(x());n();s();n();s();n();s();n();s();var k_=v(x());n();s();var lw=v(x());var y_=TA(j=>({isInitializeComplete:!0,swapMode:void 0,setSwapMode:A=>j({swapMode:A,isInitializeComplete:!1}),setIsInitializeComplete:A=>j({isInitializeComplete:A})})),F_=y_.getState().setSwapMode;n();s();var $p=v(x());n();s();n();s();n();s();n();s();var Io=v(x());n();s();var es=v(x());var dw=({platform:j,version:A,onClosePress:e,onNextPress:t})=>{let r=W(),{i18n:o}=gA(),i=o.language,{setState:a}=Qj(),{data:c}=FA(),p=Array.from(new Set(c?.addresses?.map(P=>P.addressType))),{data:d=[]}=Rp(j,A,i),{data:m,isPending:B,isFetching:f,isError:k}=_p(j,A,i),E=m?.groups??[],g=B||f||k,[y,F]=(0,es.useState)(""),S=Xi(y)??"",I=y.length>0,O=xm(d,S,Pp),M=(0,es.useCallback)(({tokenWithMetadata:P,ownerPublicKey:X})=>{let{token:_}=P,{name:h,symbol:q,caip19:C}=_,{chainId:R}=C;r.capture("fiatOnrampFungibleSelected",{data:{networkId:R,chainId:$.getChainID(R),asset:{name:h,symbol:q,type:"fungible"}}}),a({...Mp,onClose:e,ownerPublicKey:X,fungible:P.token}),t()},[r,e,t,a]);return(0,es.useEffect)(()=>{r.capture("fiatOnrampInitiated")},[r]),{enabledAddressTypes:p,groupedTokens:E,isLoading:g,isSearching:I,searchedTokens:O,searchTerm:y,selectedAccount:c,onClosePress:e,onTokenPress:M,setSearchTerm:F}};n();s();var te=v(x());n();s();var rs=v(x());n();s();var $o=v(x());n();s();n();s();var mw=v(x()),Bw=({networkID:j,address:A})=>{let e=h_({networkID:j,address:A});return e?mw.default.createElement(aB,{children:e,size:"small"}):null},h_=({networkID:j,address:A})=>{let e=Wm();return Km.get(j).badge?.(j,e,A)??null};var ee=v(x());n();s();var Ge=v(x()),Sp=48,hm=Ge.default.memo(({networkId:j,logoURI:A,type:e})=>{let t=S_({disableBadge:!1,tokenType:e,chain:$.getChainID(j)});return Ge.default.createElement(kA,{size:Sp,position:"relative"},A?Ge.default.createElement(Co,{src:A,height:Sp,width:Sp,borderRadius:"circle",fallback:Ge.default.createElement(kw,null)}):Ge.default.createElement(kw,null),t?Ge.default.createElement(w_,{networkId:j}):null)}),kw=()=>Ge.default.createElement(kA,{alignItems:"center",justifyContent:"center",size:Sp,backgroundColor:"bgWallet",borderRadius:"circle"},Ge.default.createElement(Aa.Coin,{size:"50%",color:"borderPrimary"})),S_=({disableBadge:j,tokenType:A,chain:e})=>j?!1:Me.get(e).alwaysShowNetworkBadge?!0:!uj(A),w_=({networkId:j})=>Ge.default.createElement(kA,{right:"-2",bottom:"-2",position:"absolute",borderColor:"bgRow",borderStyle:"solid",borderWidth:2,style:{borderRadius:9}},Ge.default.createElement(Ak,{networkID:j,size:18}));n();s();var ts=v(x()),fw=({image:j,name:A,symbol:e,onPress:t})=>ts.default.createElement(kA,{backgroundColor:"bgRow",borderRadius:"row",padding:16,onPress:t},ts.default.createElement(kA,{gap:12},j,ts.default.createElement(kA,{gap:4,alignItems:"flex-start"},ts.default.createElement(xA,null,A),ts.default.createElement(xA,{color:"textSecondary"},e))));var Ki=ee.default.memo(({enabledAddressTypes:j,selectedAccount:A,tokenWithMetadata:e,type:t,onPress:r})=>{let{token:o,addressType:i}=e,{caip19:a,logoURI:c,name:p,symbol:d}=o,{chainId:m}=a,B=st(a),{t:f}=gA(),k=p??f("assetDetailUnknownToken"),E=(0,ee.useMemo)(()=>{let y=A?.addresses.find(F=>i?F.addressType===i&&F.networkID===m:F.networkID===m)?.address??"";return $.isEVMNetworkID(m)?y.toLowerCase():y},[A,i,m]),g=(0,ee.useCallback)(()=>{r({tokenWithMetadata:e,ownerPublicKey:E})},[r,e,E]);return i&&!j.includes(i)?ee.default.createElement(ee.default.Fragment,null):t==="card"?ee.default.createElement(fw,{onPress:g,image:ee.default.createElement(hm,{logoURI:c,networkId:a.chainId,type:B}),name:k,symbol:d}):ee.default.createElement(nB,{onPress:g,start:ee.default.createElement(hm,{logoURI:c,networkId:a.chainId,type:B}),topLeft:{text:k,after:ee.default.createElement(Bw,{networkID:a.chainId,address:E})},bottomLeft:d})});var Ew=({enabledAddressTypes:j,group:A,groupIndex:e,selectedAccount:t,onTokenPress:r})=>{let o=e===0;return $o.default.createElement(kA,{key:A.groupName,marginTop:o?8:24},$o.default.createElement(xA,{font:Fr?"bodyMedium":"title3Semibold",color:"textSecondary",marginBottom:8},A.groupName),$o.default.createElement(kA,{flexWrap:"wrap",direction:"row",gap:o?0:"list"},A.tokens.map((i,a)=>{let{token:c,addressType:p}=i,d=`${c.symbol}-${c.caip19.chainId}-${a}`;return p&&!j.includes(p)?null:o?$o.default.createElement(kA,{key:d,flexBasis:"50%",paddingLeft:a%2===0?0:4,paddingRight:a%2===0?4:0,paddingBottom:a>=A.tokens.length-2?0:8},$o.default.createElement(Ki,{enabledAddressTypes:j,selectedAccount:t,tokenWithMetadata:A.tokens[a],type:"card",onPress:r})):$o.default.createElement(Ki,{key:d,tokenWithMetadata:A.tokens[a],enabledAddressTypes:j,selectedAccount:t,type:"row",onPress:r})})))};var gw=rs.default.memo(({groupedTokens:j,enabledAddressTypes:A,selectedAccount:e,onTokenPress:t})=>rs.default.createElement(rs.default.Fragment,null,rs.default.createElement(ca,{marginBottom:16}),j.map((r,o)=>rs.default.createElement(Ew,{enabledAddressTypes:A,group:r,groupIndex:o,key:r.groupName,onTokenPress:t,selectedAccount:e}))));n();s();var os=v(x());var yw=os.default.memo(({enabledAddressTypes:j,searchedTokens:A,selectedAccount:e,onTokenPress:t})=>os.default.createElement(os.default.Fragment,null,A.map((r,o)=>os.default.createElement(kA,{key:`${r.token.symbol}-${r.token.caip19.chainId}-${o}`,marginBottom:8},os.default.createElement(Ki,{enabledAddressTypes:j,selectedAccount:e,tokenWithMetadata:r,type:"row",onPress:t})))));var Fw=j=>{let{isLoading:A,isSearching:e,searchedTokens:t,selectedAccount:r,enabledAddressTypes:o,onTokenPress:i,groupedTokens:a}=j;return te.default.createElement(te.default.Fragment,null,A?te.default.createElement($_,null):e?te.default.createElement(te.default.Fragment,null,t.length>0?te.default.createElement(yw,{searchedTokens:t,selectedAccount:r,enabledAddressTypes:o,onTokenPress:i}):te.default.createElement(I_,null)):te.default.createElement(gw,{enabledAddressTypes:o,groupedTokens:a,selectedAccount:r,onTokenPress:i}))},$_=()=>te.default.createElement(kA,{gap:"list",paddingTop:"screen"},[...Array(3)].map((j,A)=>te.default.createElement(_o,{key:A,topRight:!1,bottomRight:!1}))),I_=()=>{let{t:j}=gA();return te.default.createElement(kA,{flex:1,alignItems:"center",justifyContent:"center"},te.default.createElement(xA,{font:"body",color:"textSecondary",align:"center"},j("noBuyOptionsAvailableInCountry")))};var hw=({platform:j,navigateToForm:A,onBackPress:e})=>{let{t}=gA(),r=dw({platform:j,version:vA,onClosePress:e,onNextPress:A});return Io.default.createElement(kA,{flex:1},Io.default.createElement(cB,{id:"search",label:"Search",showLabel:!1,placeholder:t("assetListSearch"),setValue:r.setSearchTerm,value:r.searchTerm||""},Io.default.createElement(Aa.Search,{size:16,color:"textSecondary"})),Io.default.createElement(kA,{flex:1,key:r.searchTerm},Io.default.createElement(uB.ScrollView,{contentContainerStyle:{marginTop:Lj.paddingScreen,marginBottom:Lj.paddingScreen,minHeight:"100%"}},Io.default.createElement(Fw,{...r}))))};n();s();var ww=v(x());n();s();var LA=v(x());var Sw=({platform:j,navigateToAllProviders:A,navigateToForm:e})=>{let{t}=gA(),r=W(),o=Qj(),i=Qj(S=>S.setState),{provider:a,paymentMethod:c,fungible:p}=o,{currencyCode:d}=GA(),{data:m,isFetching:B,isPending:f}=Dp(j,vA,G.language,{token:p?.caip19,fiatCurrencyCode:d,providerId:a?.id}),{provider:k,paymentMethods:E}=m??{},g=k||a,y=(0,LA.useCallback)(S=>{i({paymentMethod:S,provider:g,checkoutQuoteType:"selected"}),r.capture("fiatOnrampPaymentMethodSelected",{data:{paymentMethodId:S.id}}),e()},[r,e,g,i]),F=(0,LA.useMemo)(()=>B||f?LA.default.createElement(LA.default.Fragment,null,[...Array(3)].map((S,I)=>LA.default.createElement(_o,{key:I,topRight:!1,bottomRight:!1}))):E?.length===0?LA.default.createElement(v_,null):LA.default.createElement(LA.default.Fragment,null,E?.map(S=>LA.default.createElement(pa,{key:S.id,isSelected:c?.id===S.id,onClick:()=>y(S),...S}))),[B,f,y,c?.id,E]);return LA.default.createElement(kA,{gap:32},LA.default.createElement(kA,{gap:12},LA.default.createElement(xA,{font:"title2Semibold",color:"textPrimary",children:t("swapFeesProvider")}),LA.default.createElement(pB,{rows:[{type:"drawer",id:"selected-provider",onPress:A,start:g?.logo?LA.default.createElement(Co,{width:24,height:24,src:g.logo}):void 0,topLeft:g?.name||t("selectSwapProviderTitle"),topRight:!a&&g?{text:"Default"}:void 0}]})),LA.default.createElement(kA,{gap:12},LA.default.createElement(kA,{gap:4},LA.default.createElement(xA,{font:"title2Semibold",color:"textPrimary",children:t("buyThirdPartyScreenPaymentMethodTitle")}),LA.default.createElement(xA,{font:"label",color:"textSecondary",children:t("buyThirdPartyScreenPaymentMethodDescription")}),LA.default.createElement(kA,{marginTop:8,gap:8},F))))},v_=()=>{let{t:j}=gA();return LA.default.createElement(kA,{flex:1,alignItems:"center",justifyContent:"center"},LA.default.createElement(xA,{font:"body",color:"textSecondary",align:"center"},j("buyThirdPartyScreenPaymentMethodEmptyState")))};var $w=({platform:j,navigateToAllProviders:A,navigateToForm:e})=>ww.default.createElement(Sw,{platform:j,navigateToAllProviders:A,navigateToForm:e});n();s();var vw=v(x());n();s();var OA=v(x());var Iw=({platform:j,navigateToPaymentMethods:A,onQuoteExpiry:e})=>{let{t}=gA(),r=W(),o=AA(),i=Qj(),a=Qj(R=>R.setState),{paymentMethod:c,purchaseType:p,purchaseAmount:d,fungible:m,ownerPublicKey:B}=i,{currencyCode:f}=GA(),{data:[k,E,g]}=BA(["enable-fiat-ramp-optimize-defaults","enable-fiat-ramp-optimize-default-payment-method","enable-fiat-ramp-enhancements"]),{data:y,isFetching:F,isPending:S}=Np(j,vA,G.language,{...p==="currency"?{fiatAmount:d}:{tokenAmount:d},token:m?.caip19,fiatCurrencyCode:f,destinationAddress:B&&m?{address:B,chainId:m?.caip19.chainId,resourceType:"address"}:void 0,optimizeDefaults:k,optimizeDefaultPaymentMethod:E,enableFiatRampEnhancements:g}),I=y?.paymentMethod||c,O=(0,OA.useCallback)(R=>{r.capture("fiatOnrampProviderSelected",{data:{chainId:y?.token?.chainId,providerId:R.id,paymentMethodId:I?.id,destinationAmount:R.quote?.displayDestinationAmount,sourceAmount:R.quote?.displaySourceAmount,asset:y?.token,tag:R.tag}}),a({provider:R,paymentMethod:I,checkoutQuoteType:"selected"}),A()},[r,y?.token,a,I,A]),M=parseFloat(d)>0,[P,X]=(0,OA.useState)(aa);(0,OA.useEffect)(()=>{let R=setInterval(()=>{S||y?.providers.length===0||!M||(P===0?(X(aa),o.invalidateQueries({queryKey:[ZB],refetchType:"active"}),e?.()):X(P-1))},1e3);return()=>clearInterval(R)},[S,e,y?.providers.length,o,P,M]);let _=P<10?`0:0${P}`:`0:${P}`,h=P<=10?"accentWarning":"textPrimary",q=(0,OA.useMemo)(()=>F||S?OA.default.createElement(OA.default.Fragment,null,[...Array(3)].map((R,K)=>OA.default.createElement(_o,{key:K,topRight:!1,bottomRight:!1}))):y?.providers.length===0?OA.default.createElement(b_,null):OA.default.createElement(OA.default.Fragment,null,y?.providers.map((R,K)=>OA.default.createElement(ua,{key:`${R.id}-${K}`,index:K,onClick:O,...R}))),[F,S,O,y?.providers]),C=OA.default.createElement(kA,{direction:"row",gap:4},OA.default.createElement(xA,{font:"captionMedium",color:"textSecondary",children:`${t("fiatRampNewQuote")}:`}),OA.default.createElement(xA,{className:oB({width:36}),font:"captionMedium",color:h,children:_}));return OA.default.createElement(kA,{gap:32},OA.default.createElement(xA,{font:"label",color:"textSecondary",children:t("buyThirdPartyScreenProvidersDescription")}),OA.default.createElement(kA,{gap:12},OA.default.createElement(kA,{direction:"row",justifyContent:"space-between"},OA.default.createElement(xA,{font:"title2Semibold",color:"textPrimary",children:t("buyThirdPartyScreenProviders")}),M&&C),q))},b_=()=>{let{t:j}=gA();return OA.default.createElement(kA,{flex:1,alignItems:"center",justifyContent:"center"},OA.default.createElement(xA,{font:"body",color:"textSecondary",align:"center"},j("buyThirdPartyScreenProvidersEmptyState")))};var bw=({platform:j,navigateToPaymentMethods:A,onQuoteExpiry:e})=>vw.default.createElement(Iw,{platform:j,navigateToPaymentMethods:A,onQuoteExpiry:e});n();s();var wp=v(x()),Gw=v(Uw());n();s();var re=v(x());n();s();var vo=v(x());var qw=({platform:j,openProviderUrl:A})=>{let e=W(),t=ye(),{i18n:r}=gA(),{currencyCode:o}=GA(),{provider:i,paymentMethod:a,ownerPublicKey:c,fungible:p,purchaseAmount:d,purchaseType:m}=Qj(),{data:[B]}=BA(["enable-fiat-ramp-enhancements"]),[f,k]=(0,vo.useState)(!1),E=(0,vo.useMemo)(()=>({...m==="currency"?{fiatAmount:d}:{tokenAmount:d},token:p?.caip19,fiatCurrencyCode:o,destinationAddress:p?{address:c,chainId:p?.caip19?.chainId,resourceType:"address"}:void 0,paymentMethodId:a?.id||"",providerId:i?.id||"",redirectURL:j==="ios"||j==="android"?"phantom://fiatramp/success":void 0,enableFiatRampEnhancements:B}),[o,p,c,a?.id,j,i?.id,d,m,B]),g=(0,vo.useCallback)(async()=>{e.capture("fiatOnrampBuyClickedByUser",{data:{...E}}),k(!0);try{let{url:y}=await Kp(j,vA,r.language,E,t);k(!1),A(y)}catch(y){b.addBreadcrumb("onRamp",`Error getting provider url: ${JSON.stringify(E)}`,"error"),b.captureError(y,"onRamp"),k(!1)}},[t,e,r.language,A,j,E]);return(0,vo.useMemo)(()=>({isLoading:f,onPress:g}),[f,g])};var xw=({platform:j,openProviderUrl:A})=>{let{t:e}=gA(),{provider:t}=Qj(),{isLoading:r,onPress:o}=qw({platform:j,openProviderUrl:A});return re.default.createElement(kA,{flex:1,justifyContent:"space-between",alignItems:"stretch",marginTop:32},re.default.createElement(kA,{gap:32},re.default.createElement(kA,{direction:"row",justifyContent:"center",alignItems:"center",gap:4},re.default.createElement(ce,{icon:"LogoFill",shape:"square",size:80,color:"textPrimary"}),re.default.createElement(sB,{autoPlay:!0,size:32}),re.default.createElement(Co,{src:t?t.logo:"",width:80,height:80,borderRadius:20,fallback:re.default.createElement(ce,{icon:"Image",shape:"square",size:80,backgroundColor:"bgRow",color:"bgWallet"})})),re.default.createElement(kA,{gap:16,alignItems:"center",justifyContent:"center"},re.default.createElement(xA,{align:"center",font:Fr?"title1Semibold":"heading4Bold"},e("fiatRampTransferringToProvider",{provider:t?.name})),re.default.createElement(xA,{align:"center",font:"body",color:"textSecondary",maxWidth:320},e("fiatRampLeavingPhantomApp",{provider:t?.name})))),re.default.createElement(kA,{direction:"row"},re.default.createElement(iB,{theme:"primary",onClick:async({start:i,stop:a})=>{i();try{await o?.()}finally{a()}},disabled:r},e("fiatRampOpen",{provider:t?.name}))))};var Tw=()=>{let j=(0,wp.useCallback)(A=>{Gw.default.tabs.create({url:A})},[]);return wp.default.createElement(xw,{platform:"web",openProviderUrl:j})};n();s();var x_=v(x());n();s();var q_=v(x());n();s();var kj=v(x());var T_=kj.default.lazy(()=>import("./FiatRampFlow-NTA2OIKM.js").then(j=>({default:j.FiatRampFlow}))),P_=kj.default.lazy(()=>import("./FiatRampPaymentMethodsPage-LALPWTX7.js").then(j=>({default:j.FiatRampPaymentMethodsPage}))),Pw=kj.default.lazy(()=>import("./FiatRampProvidersPage-VW33KZCS.js").then(j=>({default:j.FiatRampProvidersPage}))),O_=kj.default.lazy(()=>import("./FiatRampFlowPreselectedToken-4EHEU7VK.js").then(j=>({default:j.FiatRampFlowPreselectedToken}))),M_=kj.default.lazy(()=>import("./FiatRampFlowPreselectedToken-4EHEU7VK.js").then(j=>({default:j.WrappedFiatRampFormPage}))),C_=kj.default.lazy(()=>import("./FiatRampWaitingOnRamp-E5URPTM5.js").then(j=>({default:j.FiatRampWaitingOnRamp}))),__=kj.default.lazy(()=>import("./FiatRampRedirectToProvider-GNDOIVQA.js").then(j=>({default:j.FiatRampRedirectToProvider}))),Ow=la({id:"fiat-ramp-detail",initialViewId:"fiat-ramp-detail-providers",views:[{id:"fiat-ramp-detail-providers",element:kj.default.createElement(Pw,null)},{id:"fiat-ramp-detail-payment-methods",element:kj.default.createElement(P_,null)}],display:"modal",stacks:[]}),R_=la({id:"fiat-ramp-redirect-to-provider",initialViewId:"main",views:[{id:"main",element:kj.default.createElement(kj.default.Fragment,null)},{id:"fiat-ramp-redirect-to-provider",element:kj.default.createElement(__,null),params:{url:l.string().url(),provider:Op.extend({tag:l.string().optional()}),sessionId:l.string(),caip19:l.string()}},{id:"fiat-ramp-waiting-on-ramp",element:kj.default.createElement(C_,null),params:{sessionId:l.string(),caip19:l.string()}}],display:"modal",stacks:[]}),D_=la({id:"fiat-ramp",initialViewId:"fiat-ramp-fungible-selection",views:[{id:"fiat-ramp-fungible-selection",element:kj.default.createElement(T_,null)},{id:"fiat-ramp-fungible-selected",element:kj.default.createElement(O_,null),params:{buy:l.string(),amount:l.number().optional(),redirectURL:l.string().url().optional()}},{id:"fiat-ramp-form",element:kj.default.createElement(M_,null)},{id:"fiat-ramp-providers",element:kj.default.createElement(Pw,null)}],display:"modal",stacks:[Ow,R_]});var yr=()=>!0,Mw={tokens:yr,prices:QB,collectibles:YB,currency:rB,staking:jk,swapper:Ud,transferFungibleLoggingContext:yr,user:Lm,[fB]:yr,[Kt]:yr,[Cp]:yr,[ek]:yr,[Os]:yr,[Ue]:yr,"test-debug-query":Ui},Cw=j=>{if(j.queryKey.length===0)return!1;let A=String(j.queryKey[0]);return j.state.status!=="success"?!1:Mw[A]?Mw[A](j):!1};var _w=new Im({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),N_=wm({underlyingStorage:new OB,throttleMs:1e3,enableDebugLogs:Ui()}),K_=({children:j})=>(_E([[RB,_w]]),j),Sjj=j=>$p.default.createElement(vm,{client:_w,persistOptions:{persister:N_,dehydrateOptions:{shouldDehydrateQuery:Cw},buster:L_,maxAge:1/0}},$p.default.createElement(_B,null,$p.default.createElement(K_,null,j.children))),L_="25.2.0";n();s();var U_=(U=>(U.HasOnboarded="hasOnboarded",U.ResetHasOnboarded="resetHasOnboarded",U.LockExtension="lockExtension",U.UnlockExtension="unlockExtension",U.IsExtensionUnlocked="IsExtensionUnlocked",U.SetPassword="setPassword",U.VerifyPassword="verifyPassword",U.UpdatePassword="updatePassword",U.ImportPrivateKeyAccount="importPrivateKeyAccount",U.ImportReadOnlyAccount="importReadOnlyAccount",U.ImportSeedAccount="importSeedAccount",U.ImportSeedlessAccount="importSocialSeedAccount",U.IsExistingSeed="isExistingSeed",U.AddAccountForSeed="addAccountForSeed",U.AddAccountForSeedless="addAccountForSeedless",U.AddLedgerAccounts="addLedgerAccounts",U.DeriveAddresses="deriveAddresses",U.ExportPrivateKey="exportPrivateKey",U.ExportEntropy="exportEntropy",U.SetAccountIcon="setAccountIcon",U.RemoveAccount="removeAccount",U.ReorderAccount="reorderAccount",U.GetAllAccounts="getAllAccounts",U.GetAllSeeds="getAllSeeds",U.GetAllSeedless="getAllSeedlessSeeds",U.GetAuthenticationPublicKey="getAuthenticationPublicKey",U.Sign="sign",U.SyncAccounts="syncAccounts",U.CheckVaultIntegrity="checkVaultIntegrity",U.LogMessage="logMessage",U.DownloadLogs="downloadLogs",U.ProviderInjectionOptions="providerInjectionOptions",U.ServiceWorkerMutexAcquire="serviceWorkerMutexAcquire",U.ServiceWorkerMutexRelease="serviceWorkerMutexRelease",U))(U_||{});export{VqA as a,jS as b,FGA as c,it as d,Qp as e,zw as f,Ww as g,i$ as h,a$ as i,Jw as j,Vp as k,c$ as l,sk as m,Ir as n,p$ as o,A$ as p,j$ as q,Zp as r,o$ as s,f$ as t,E$ as u,hk as v,tu as w,u$ as x,ou as y,g$ as z,nu as A,wk as B,y$ as C,$k as D,su as E,hs as F,Re as G,Bu as H,$s as I,_$ as J,Eu as K,gu as L,yu as M,R$ as N,Is as O,vI as P,Vu as Q,TM as R,KI as S,nv as T,ZI as U,Ne as V,Av as W,Da as X,cl as Y,iv as Z,av as _,pl as $,Gs as aa,Ij as ba,Ml as ca,Tr as da,xl as ea,lv as fa,dv as ga,mv as ha,$E as ia,$v as ja,fv as ka,OE as la,ZT as ma,eP as na,n7 as oa,Hq as pa,Nx as qa,Ds as ra,A7 as sa,j7 as ta,e7 as ua,RT as va,DT as wa,G7 as xa,WT as ya,sP as za,uP as Aa,mP as Ba,hw as Ca,$w as Da,bw as Ea,Tw as Fa,Xj as Ga,w as Ha,cd as Ia,aA as Ja,sr as Ka,N7 as La,Hr as Ma,gP as Na,yP as Oa,Ai as Pa,WP as Qa,K6 as Ra,j1 as Sa,EO as Ta,bO as Ua,PO as Va,_O as Wa,t1 as Xa,QO as Ya,i1 as Za,Qd as _a,It as $a,id as ab,VO as bb,h8 as cb,S8 as db,I8 as eb,YO as fb,ZO as gb,v8 as hb,AM as ib,wM as jb,$M as kb,IM as lb,vM as mb,bM as nb,Vd as ob,hi as pb,zd as qb,tM as rb,GM as sb,rM as tb,EC as ub,Nj as vb,MC as wb,ip as xb,d_ as yb,CC as zb,QC as Ab,US as Bb,HS as Cb,LC as Db,m_ as Eb,ZC as Fb,A_ as Gb,j_ as Hb,B_ as Ib,t_ as Jb,Cw as Kb,_w as Lb,Sjj as Mb,U_ as Nb};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-ZTXKK5SN.js.map
