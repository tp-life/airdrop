import{a as M}from"./chunk-JYORC2QX.js";import{a as g}from"./chunk-RQLATSAD.js";import{a as _,e as U}from"./chunk-UMB7TYLX.js";import{e as K,f as F,g as B}from"./chunk-4HMU6WOI.js";import"./chunk-HV4BNC77.js";import"./chunk-DLKGATEC.js";import"./chunk-P7AH56UI.js";import"./chunk-UDB3GXAG.js";import"./chunk-ZDSEL3RH.js";import"./chunk-PB6PA2EI.js";import"./chunk-RP4HT6XN.js";import{a as H}from"./chunk-AK42W2OZ.js";import"./chunk-26VAF3RA.js";import{b as A}from"./chunk-NAWTYQ77.js";import"./chunk-7ZVEM3WY.js";import"./chunk-H7ATUB7C.js";import{db as f}from"./chunk-7N5UY74L.js";import"./chunk-ORJUPAX4.js";import{u as z}from"./chunk-HIWDTKJJ.js";import"./chunk-3XC45JK7.js";import"./chunk-GDBECYVT.js";import"./chunk-US2EC2AF.js";import"./chunk-MWXM4F4N.js";import"./chunk-7F2GBYX5.js";import"./chunk-7XSNALQR.js";import"./chunk-HYOCMEEG.js";import{Ea as N,Fa as O,i as L,j as I}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{L as u,Ya as w,wd as E}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{j as x,s as y}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as X}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as W,h as T,n as P}from"./chunk-3KENBVE7.js";T();P();var e=W(X());var Z=n=>{let r={stakePubkey:n.stakeAccountPubkey,stakeAuthorityPubkey:n.stakeAuthorityPubkey,onClose:n.onClose},{t}=x(),{deactivateStake:c,needsLedgerApproval:l,txHash:i,confirmationStatus:s,isError:k,error:d,onDeny:a}=$(r);if(l)return e.default.createElement(F,{ledgerAction:c,cancel:a});if(k){let o=d,S=o?.message,m=K(o),D=o?.message.includes(I),b=o?.message.includes(L);return m?e.default.createElement(B,{ledgerActionError:o,onRetryClick:c,onCancelClick:a}):D||b?e.default.createElement(M,{onCancelClick:a}):e.default.createElement(A,{icon:"error",title:t("stakeAccountDeactivateStakeUnstakingFailed"),onClose:a,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:y.colors.legacy.textSecondary,size:16,lineHeight:20.8},S??t("stakeAccountDeactivateStakeUnstakingFailedDescription")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction")))}return s==="confirmed"||s==="finalized"?e.default.createElement(A,{icon:"success",title:t("stakeAccountDeactivateStakeSolUnstaked"),onClose:n.onClose,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:y.colors.legacy.textSecondary,size:16,lineHeight:20.8},e.default.createElement(H,{i18nKey:"stakeAccountDeactivateStakeSolUnstakedDescriptionInterpolated"},"You will be able to withdraw your stake",e.default.createElement("br",null)," in the next couple days once the stake account becomes inactive.")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction"))):e.default.createElement(A,{icon:"loading",title:t("stakeAccountDeactivateStakeUnstakingSol"),onClose:n.onClose,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:y.colors.legacy.textSecondary,size:16,lineHeight:20.8},t("stakeAccountDeactivateStakeUnstakingSolDescription")),e.default.createElement(g,{txHash:i},t("stakeAccountDeactivateStakeViewTransaction")))},De=Z,$=({onClose:n,...r})=>{let{data:t,isSuccess:c}=E(),{accountIdentifier:l,isLedgerAccount:i,solanaChainAddress:s,solanaPublicKey:k,connection:d,networkID:a}=(0,e.useMemo)(()=>{let Y=t?.identifier??"",p=(t?.addresses??[]).find(J=>w.isSolanaNetworkID(J.networkID)),j=new u.PublicKey(p?.address??""),q=t?.type==="ledger",C=p?.networkID,G=N(O(C));return{accountIdentifier:Y,isLedgerAccount:q,solanaChainAddress:p,solanaPublicKey:j,connection:G,networkID:C}},[t]),o=_(d),S=(0,e.useCallback)(()=>{o.mutate({...r,accountIdentifier:l,senderAddress:s,stakePubkey:new u.PublicKey(r.stakePubkey),stakeAuthorityPubkey:new u.PublicKey(r.stakeAuthorityPubkey),authorizedPubkey:k})},[l,r,o,s,k]),m=z(),D=(0,e.useCallback)(()=>{m.denied({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(a),type:"undelegate"}),n()},[a,n,m]);(0,e.useEffect)(()=>{if(c){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");i||S()}},[c]);let v=o.data?.id,h=U(d,2e3,v),V=i&&(o.isIdle||o.isPending),Q=h.data?.value?.confirmationStatus;return{deactivateStake:S,onDeny:D,needsLedgerApproval:V,txHash:v,confirmationStatus:Q,isError:o.isError??h.isError,error:o.error??h.error}};export{Z as StakeAccountDeactivateStakeStatusPage,De as default};
//# sourceMappingURL=StakeAccountDeactivateStakeStatusPage-TLFZUM6D.js.map
