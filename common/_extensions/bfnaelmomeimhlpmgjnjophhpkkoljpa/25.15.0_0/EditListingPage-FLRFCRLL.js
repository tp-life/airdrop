import{a as K,b as pe,c as ge,e as fe,f as be}from"./chunk-V5ZBVYB7.js";import"./chunk-AY7JCRFQ.js";import"./chunk-5YDSFBVN.js";import{i as ue}from"./chunk-YQDBMSRB.js";import{a as H}from"./chunk-5RY5S5F7.js";import{a as ce}from"./chunk-H6OI2N7M.js";import"./chunk-TMG2ZPKO.js";import"./chunk-MDZMKEZM.js";import"./chunk-ZJHRYWCW.js";import"./chunk-752G45NS.js";import{a as me,e as de}from"./chunk-SQR6EK5U.js";import"./chunk-4HMU6WOI.js";import"./chunk-HV4BNC77.js";import{b as R}from"./chunk-E67GFDH7.js";import"./chunk-YN37DKRO.js";import{a as S}from"./chunk-R2LHCBUO.js";import{b as $,f as ae}from"./chunk-DLKGATEC.js";import"./chunk-P7AH56UI.js";import"./chunk-UDB3GXAG.js";import"./chunk-ZDSEL3RH.js";import"./chunk-PB6PA2EI.js";import"./chunk-RP4HT6XN.js";import"./chunk-AK42W2OZ.js";import"./chunk-26VAF3RA.js";import"./chunk-NAWTYQ77.js";import"./chunk-7ZVEM3WY.js";import{c as le,d as O}from"./chunk-H7ATUB7C.js";import{Y as ne,db as J}from"./chunk-7N5UY74L.js";import{f as r}from"./chunk-ORJUPAX4.js";import"./chunk-3XC45JK7.js";import{X as u,_ as re,m as ie}from"./chunk-G7OTLN34.js";import"./chunk-GDBECYVT.js";import{ba as se}from"./chunk-US2EC2AF.js";import"./chunk-MWXM4F4N.js";import{c as oe}from"./chunk-7F2GBYX5.js";import"./chunk-7XSNALQR.js";import"./chunk-HYOCMEEG.js";import{Fa as Z,Fc as D,Lb as ee,ad as q}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import{i as te}from"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{H as L,L as N,Vd as _,Ya as X,wd as Y}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{j as T,s as w}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as G}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as j,h,n as x}from"./chunk-3KENBVE7.js";h();x();var e=j(G());h();x();var s=j(G());h();x();var k=j(G());var Le=()=>{let t=u(a=>a.unlistCollectible);return t?k.default.createElement(xe,{unlistCollectible:t}):null},xe=({unlistCollectible:t})=>{let{closeAllModals:a}=R(),{t:o}=T(),{data:g}=Y(),{solanaPublicKey:C,cluster:l}=(0,k.useMemo)(()=>{let B=(g?.addresses??[]).find(p=>X.isSolanaNetworkID(p.networkID)),U=B?.networkID,V=new N.PublicKey(B?.address??""),W=Z(U);return{solanaPublicKey:V,cluster:W}},[g]),E="magic_eden",i=t.asset.name,y=(0,k.useMemo)(()=>({errorTitle:o("removeListStatusErrorTitle"),successTitle:o("removeListStatusSuccessTitle"),loadingTitle:o("removeListStatusLoadingTitle"),errorMessage:o("removeListStatusErrorMessage",{name:i}),successMessage:o("removeListStatusSuccessMessage",{name:i}),loadingMessage:o("removeListStatusLoadingMessage",{name:i})}),[o,i]),{errorTitle:f,successTitle:b,loadingTitle:c,errorMessage:I,successMessage:F,loadingMessage:n}=y,{unlist:m,error:v,transaction:P}=re(),M=pe({collectible:t,action:()=>m(l,C),actionType:"remove",actionError:v,transaction:P,errorTitle:f,successTitle:b,loadingTitle:c,errorMessage:I,successMessage:F,loadingMessage:n,marketplace:E,onClose:a});return k.default.createElement(ge,{...M})};var we=r(S).attrs({justify:"space-between"})`
  height: 100%;
`,ke=r(S).attrs({align:"center"})``,Ee=r(O)`
  width: 100%;
`,Ie=r.div`
  width: 100%;
  overflow: hidden;
`,Fe=r.div`
  border-bottom: 1px solid ${w.colors.legacy.bgWallet};
  border-bottom-width: 1px;
`,Se=({artistRoyalties:t,marketplaceFee:a})=>{let{t:o}=T(),g=ue(),{pushDetailView:C,popDetailView:l}=$(),E=(0,s.useCallback)(()=>{l()},[l]),i=u(P=>P.unlistCollectible),y=(0,s.useMemo)(()=>!!i?.listings?.magic_eden,[i?.listings?.magic_eden]);if((0,s.useEffect)(()=>{y||l()},[y,l]),!i)return null;let{data:f}=_("solana");se(f,"REMOVE_LISTING");let{cluster:b}=D(),c=L(ee),I=i.asset.collectibleImage,F=i.asset.name,n=i.asset.collectionName??null,m=(0,s.useCallback)(()=>{oe.capture("listCollectibleRemoveListing",{data:{mint:i.asset.mintPubKey}}),g.approved({chainId:te(b),type:"remove",list:{type:"remove",tokenId:i.asset.mintPubKey}}),C(s.default.createElement(Le,null))},[C,i.asset.mintPubKey,b,g]),v=[{label:o("collectiblesListPrice"),value:i.listings?.magic_eden?.listingPrice!==void 0?`${L(parseInt(i.listings.magic_eden.listingPrice,10))} SOL`:"\u2014"},{label:o("collectiblesMagicEdenFee"),value:a===null?"\u2014":`${a}%`},{label:o("collectiblesArtistRoyalties"),value:t===null?"\u2014":`${t}%`},{label:o("sendConfirmationNetworkFee"),value:`${c} SOL`}];return s.default.createElement(we,null,s.default.createElement(ke,null,s.default.createElement(ae,null,o("collectiblesRemoveListing")),s.default.createElement(K,{uri:I,collectibleName:F,collectionName:n,borderRadius:"6px 6px 0px 0px"}),s.default.createElement(Fe,null),s.default.createElement(Ie,null,s.default.createElement(H,{rows:v,borderRadius:"0px 0px 6px 6px"}))),s.default.createElement(Ee,{primaryText:o("collectiblesRemoveListing"),secondaryText:o("commandCancel"),onPrimaryClicked:m,onSecondaryClicked:E}))};var Me=r(S).attrs({justify:"space-between"})`
  height: 100%;
`,Ne=r(S).attrs({align:"center"})``,Ae=r.div`
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  margin: 0px 33px;
`,Be=r(O)`
  width: 100%;
`,_e=r.div`
  width: 100%;
  padding: 10px 10px 10px 0px;
`,De=r.div`
  width: 100%;
  overflow: hidden;
  margin-bottom: 10px;
`,Oe=r.div`
  display: flex;
  align-items: center;
`,Re=r(J).attrs({size:14})`
  padding: 4px;
  margin-left: 4px;
  text-align: left;
`,$e=r(S)`
  width: 100%;
  margin-top: 12px;
`,He=r.div`
  border-bottom: 1px solid ${w.colors.legacy.bgWallet};
  border-bottom-width: 1px;
`,Ke=()=>{let{t}=T(),{pushDetailView:a}=$(),{hideEditCollectibleListingModal:o}=R(),g=(0,e.useCallback)(()=>{o()},[o]),{cluster:C}=D(),l=u(d=>d.listCollectible);if(!l)return null;let E=u(d=>d.listCollectiblePrice),i=u(d=>d.setEditListPrice),y=u(d=>d.setUnlistCollectible),[f,b]=(0,e.useState)(E?.toString()??""),c=parseFloat(f),{data:I}=_("solana"),F=I?.address??void 0,{data:n}=ie(C,l?.asset.mintPubKey,F),m=n?.magic_eden?.floorPrice!==void 0?L(n?.magic_eden?.floorPrice):null,v=n?.magic_eden?.lastPurchasePrice!==void 0?L(n?.magic_eden?.lastPurchasePrice):null,P=n?.magic_eden?.feeInBasisPoints!==void 0?q(n?.magic_eden?.feeInBasisPoints):null,M=n?.magic_eden?.marketplaceFee!==void 0?Math.abs(q(n?.magic_eden?.marketplaceFee)):null,A=n?.magic_eden?.minListPrice!==void 0?L(n?.magic_eden?.minListPrice):null,B=l.asset.collectibleImage,U=l.asset.name,V=l.asset.collectionName??null,W=()=>{b(`${m??""}`)},[p,z]=(0,e.useState)();(0,e.useEffect)(()=>{t&&(A&&c<A.toNumber()?z({errorMessage:t("collectiblesMinimumListingPrice"),errorColor:w.colors.legacy.accentAlert,isBlocking:!0}):m&&c<m.toNumber()?z({errorMessage:t("collectiblesBelowFloorPrice"),errorColor:w.colors.brand.yellowMoon,isBlocking:!1}):z(void 0))},[m,A,t,c]);let Ce=d=>{b(d)},Q=f.length>0&&Number.isFinite(c)&&c>0&&!p?.isBlocking,ye=()=>{i(c),p?.errorMessage===t("collectiblesBelowFloorPrice")?a(e.default.createElement(be,{artistRoyalties:P,marketplaceFee:M,isEditing:!0})):a(e.default.createElement(fe,{artistRoyalties:P,marketplaceFee:M}))},ve=()=>{y(l),a(e.default.createElement(Se,{artistRoyalties:P,marketplaceFee:M}))},he=[{label:t("collectiblesFloorPrice"),value:m===null?"\u2014":`${m} SOL`,tooltipContent:t("collectiblesFloorPriceTooltip")},{label:t("collectiblesOriginalPurchasePrice"),value:v===null?"\u2014":`${v} SOL`,tooltipContent:t("collectiblesOriginalPurchasePriceTooltip")}];return e.default.createElement(Me,null,e.default.createElement(Ne,null,e.default.createElement(Ae,null,e.default.createElement(J,{weight:500,size:22},t("collectiblesEditListing"))),e.default.createElement(_e,null,e.default.createElement(de,{tooltipAlignment:"topLeft",iconSize:12,lineHeight:17,fontWeight:500,fontSize:16,info:e.default.createElement(me,null,t("collectiblesListPriceTooltip"))},t("collectiblesListPrice"))),e.default.createElement(De,null,e.default.createElement(ce,{value:f,symbol:"SOL",alignSymbol:"right",buttonText:t("collectiblesUseFloor"),width:80,maxLength:16,onSetTarget:W,onUserInput:Ce}),p&&e.default.createElement(Oe,null,e.default.createElement(ne,{fill:p.errorColor}),e.default.createElement(Re,{color:p.errorColor},p.errorMessage))),e.default.createElement(K,{uri:B,collectibleName:U,collectionName:V}),e.default.createElement(He,null),e.default.createElement(H,{rows:he,borderRadius:"0px 0px 8px 8px"}),e.default.createElement($e,null,e.default.createElement(le,{theme:"warning",onClick:ve},t("collectiblesRemoveListing")))),e.default.createElement(Be,{primaryText:t("commandSave"),secondaryText:t("commandCancel"),onPrimaryClicked:ye,onSecondaryClicked:g,primaryTheme:Q?"primary":"default",primaryDisabled:!Q}))},qt=Ke;export{Ke as EditListingPage,qt as default};
//# sourceMappingURL=EditListingPage-FLRFCRLL.js.map
