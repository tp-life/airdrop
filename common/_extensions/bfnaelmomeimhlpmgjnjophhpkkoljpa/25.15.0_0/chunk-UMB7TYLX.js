import{A as Po,B as Jr,C as wo,E as $t,F as To,a as So,d as ko,g as go,j as yo,k as ct,l as lt,m as Yt,n as Ao,o as bo,p as vo,q as _,r as ve,s as ho,t as Jt,u as We,v as b,x as dt,y as ze}from"./chunk-HIWDTKJJ.js";import{F as mo,V as fo,ba as Xt}from"./chunk-US2EC2AF.js";import{Cb as Fe,Da as Kt,Ed as Qt,Fb as co,Fc as W,Gc as Ve,Gd as Ht,Id as je,Ja as jt,Jb as Tt,Ka as Wt,Lb as xe,Ma as le,Uc as Dt,ld as Ke,od as H,p as ce,q as st,rc as lo,sc as po,wd as Gt,xd as ut}from"./chunk-EIQDOUTB.js";import{d as zt}from"./chunk-3IV4Y5QP.js";import{h as so}from"./chunk-65FAE5DM.js";import{C as eo,H as Et,I as to,K as ne,L as A,Tc as uo,Vd as B,Ya as v,_a as it,db as ao,eb as at,r as ye,wd as Oe,yc as Vt}from"./chunk-D7Z6MPRS.js";import{f as no,g as Ae,j as be}from"./chunk-E2H5RB2U.js";import{d as P,j as Ue}from"./chunk-27TD4NX4.js";import{L as xt,b as Yr,q as oo,w as wt}from"./chunk-YJV3X2ON.js";import{D as Q,u as j,w as ue,z as q}from"./chunk-FBDT5S2M.js";import{T as ro,U as io,Y as Le,Z as Ut,a as G,b as C,ba as Ot,ca as oe,da as Ft,w as rt}from"./chunk-TKSJVOQZ.js";import{a as I,h as Bt}from"./chunk-UA6ADLWZ.js";import{c as N,f as M,h as i,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var tr=N(Sn=>{"use strict";i();a();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.deserialize=ji;Sn.serialize=Wi;var er=kn();function ji(e,t=0){return er.depositReceiptBeet.deserialize(e,t+8)}function Wi(e){return er.depositReceiptBeet.serialize(e)}});var kn=N(x=>{"use strict";i();a();var zi=x&&x.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Gi=x&&x.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yn=x&&x.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&zi(o,t,n[r]);return Gi(o,t),o}}();Object.defineProperty(x,"__esModule",{value:!0});x.depositReceiptBeet=x.DepositReceipt=void 0;var Qi=yn(ye()),Qe=yn(ce()),Lt=yn(st()),Hi=yn(tr()),gn=class e{constructor(t,o,n,r,s,l,u,c,d,p){this.base=t,this.owner=o,this.stakePool=n,this.stakePoolDepositStakeAuthority=r,this.depositTime=s,this.lstAmount=l,this.coolDownSeconds=u,this.initialFeeBps=c,this.bumpSeed=d,this.reserved=p}static fromArgs(t){return new e(t.base,t.owner,t.stakePool,t.stakePoolDepositStakeAuthority,t.depositTime,t.lstAmount,t.coolDownSeconds,t.initialFeeBps,t.bumpSeed,t.reserved)}static fromAccountInfo(t,o=0){return e.deserialize(t.data,o)}static async fromAccountAddress(t,o,n){let r=await t.getAccountInfo(o,n);if(r==null)throw new Error(`Unable to find DepositReceipt account at ${o}`);return e.fromAccountInfo(r,0)[0]}static gpaBuilder(t=new Qi.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return Lt.GpaBuilder.fromStruct(t,x.depositReceiptBeet)}static deserialize(t,o=0){return Ji(t,o)}serialize(){return Yi(this)}static get byteSize(){return x.depositReceiptBeet.byteSize}static async getMinimumBalanceForRentExemption(t,o){return t.getMinimumBalanceForRentExemption(e.byteSize,o)}static hasCorrectByteSize(t,o=0){return t.byteLength-o===e.byteSize}pretty(){return{base:this.base.toBase58(),owner:this.owner.toBase58(),stakePool:this.stakePool.toBase58(),stakePoolDepositStakeAuthority:this.stakePoolDepositStakeAuthority.toBase58(),depositTime:this.depositTime,lstAmount:this.lstAmount,coolDownSeconds:this.coolDownSeconds,initialFeeBps:this.initialFeeBps,bumpSeed:this.bumpSeed,reserved:this.reserved}}};x.DepositReceipt=gn;x.depositReceiptBeet=new Qe.BeetStruct([["base",Lt.publicKey],["owner",Lt.publicKey],["stakePool",Lt.publicKey],["stakePoolDepositStakeAuthority",Lt.publicKey],["depositTime",Qe.u64],["lstAmount",Qe.u64],["coolDownSeconds",Qe.u64],["initialFeeBps",Qe.u32],["bumpSeed",Qe.u8],["reserved",Qe.uniformFixedSizeArray(Qe.u8,256)]],gn.fromArgs,"DepositReceipt");var At=Hi,Yi=typeof At.serialize=="function"?At.serialize.bind(At):x.depositReceiptBeet.serialize.bind(x.depositReceiptBeet),Ji=typeof At.deserialize=="function"?At.deserialize.bind(At):x.depositReceiptBeet.deserialize.bind(x.depositReceiptBeet)});var or=N(An=>{"use strict";i();a();Object.defineProperty(An,"__esModule",{value:!0});An.deserialize=$i;An.serialize=Xi;var nr=bn();function $i(e,t=0){return nr.stakePoolDepositStakeAuthorityBeet.deserialize(e,t+8)}function Xi(e){return nr.stakePoolDepositStakeAuthorityBeet.serialize(e)}});var bn=N(V=>{"use strict";i();a();var Zi=V&&V.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),ea=V&&V.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hn=V&&V.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&Zi(o,t,n[r]);return ea(o,t),o}}();Object.defineProperty(V,"__esModule",{value:!0});V.stakePoolDepositStakeAuthorityBeet=V.StakePoolDepositStakeAuthority=void 0;var ta=hn(ye()),bt=hn(ce()),He=hn(st()),na=hn(or()),vn=class e{constructor(t,o,n,r,s,l,u,c,d,p,m){this.base=t,this.stakePool=o,this.poolMint=n,this.authority=r,this.vault=s,this.stakePoolProgramId=l,this.coolDownSeconds=u,this.initalFeeBps=c,this.feeWallet=d,this.bumpSeed=p,this.reserved=m}static fromArgs(t){return new e(t.base,t.stakePool,t.poolMint,t.authority,t.vault,t.stakePoolProgramId,t.coolDownSeconds,t.initalFeeBps,t.feeWallet,t.bumpSeed,t.reserved)}static fromAccountInfo(t,o=0){return e.deserialize(t.data,o)}static async fromAccountAddress(t,o,n){let r=await t.getAccountInfo(o,n);if(r==null)throw new Error(`Unable to find StakePoolDepositStakeAuthority account at ${o}`);return e.fromAccountInfo(r,0)[0]}static gpaBuilder(t=new ta.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){return He.GpaBuilder.fromStruct(t,V.stakePoolDepositStakeAuthorityBeet)}static deserialize(t,o=0){return ra(t,o)}serialize(){return oa(this)}static get byteSize(){return V.stakePoolDepositStakeAuthorityBeet.byteSize}static async getMinimumBalanceForRentExemption(t,o){return t.getMinimumBalanceForRentExemption(e.byteSize,o)}static hasCorrectByteSize(t,o=0){return t.byteLength-o===e.byteSize}pretty(){return{base:this.base.toBase58(),stakePool:this.stakePool.toBase58(),poolMint:this.poolMint.toBase58(),authority:this.authority.toBase58(),vault:this.vault.toBase58(),stakePoolProgramId:this.stakePoolProgramId.toBase58(),coolDownSeconds:this.coolDownSeconds,initalFeeBps:this.initalFeeBps,feeWallet:this.feeWallet.toBase58(),bumpSeed:this.bumpSeed,reserved:this.reserved}}};V.StakePoolDepositStakeAuthority=vn;V.stakePoolDepositStakeAuthorityBeet=new bt.BeetStruct([["base",He.publicKey],["stakePool",He.publicKey],["poolMint",He.publicKey],["authority",He.publicKey],["vault",He.publicKey],["stakePoolProgramId",He.publicKey],["coolDownSeconds",bt.u64],["initalFeeBps",bt.u32],["feeWallet",He.publicKey],["bumpSeed",bt.u8],["reserved",bt.uniformFixedSizeArray(bt.u8,256)]],vn.fromArgs,"StakePoolDepositStakeAuthority");var vt=na,oa=typeof vt.serialize=="function"?vt.serialize.bind(vt):V.stakePoolDepositStakeAuthorityBeet.serialize.bind(V.stakePoolDepositStakeAuthorityBeet),ra=typeof vt.deserialize=="function"?vt.deserialize.bind(vt):V.stakePoolDepositStakeAuthorityBeet.deserialize.bind(V.stakePoolDepositStakeAuthorityBeet)});var ir=N(we=>{"use strict";i();a();var ia=we&&we.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),rr=we&&we.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&ia(t,e,o)};Object.defineProperty(we,"__esModule",{value:!0});we.accountProviders=void 0;rr(kn(),we);rr(bn(),we);var aa=bn(),sa=kn();we.accountProviders={StakePoolDepositStakeAuthority:aa.StakePoolDepositStakeAuthority,DepositReceipt:sa.DepositReceipt}});var cr=N(J=>{"use strict";i();a();var ua=J&&J.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),ca=J&&J.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ur=J&&J.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&ua(o,t,n[r]);return ca(o,t),o}}();Object.defineProperty(J,"__esModule",{value:!0});J.changeDepositReceiptOwnerInstructionDiscriminator=J.ChangeDepositReceiptOwnerStruct=void 0;J.createChangeDepositReceiptOwnerInstruction=la;var ar=ur(ce()),sr=ur(ye());J.ChangeDepositReceiptOwnerStruct=new ar.BeetArgsStruct([["instructionDiscriminator",ar.u8]],"ChangeDepositReceiptOwnerInstructionArgs");J.changeDepositReceiptOwnerInstructionDiscriminator=4;function la(e,t=new sr.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[o]=J.ChangeDepositReceiptOwnerStruct.serialize({instructionDiscriminator:J.changeDepositReceiptOwnerInstructionDiscriminator}),n=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.currentOwner,isWritable:!1,isSigner:!0},{pubkey:e.newOwner,isWritable:!1,isSigner:!1}];return new sr.TransactionInstruction({programId:t,keys:n,data:o})}});var dr=N($=>{"use strict";i();a();var da=$&&$.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),pa=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nn=$&&$.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&da(o,t,n[r]);return pa(o,t),o}}();Object.defineProperty($,"__esModule",{value:!0});$.claimPoolTokensInstructionDiscriminator=$.ClaimPoolTokensStruct=void 0;$.createClaimPoolTokensInstruction=fa;var ma=Nn(Tt()),lr=Nn(ce()),Rn=Nn(ye());$.ClaimPoolTokensStruct=new lr.BeetArgsStruct([["instructionDiscriminator",lr.u8]],"ClaimPoolTokensInstructionArgs");$.claimPoolTokensInstructionDiscriminator=5;function fa(e,t=new Rn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[o]=$.ClaimPoolTokensStruct.serialize({instructionDiscriminator:$.claimPoolTokensInstructionDiscriminator}),n=[{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.owner,isWritable:!0,isSigner:!0},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.destination,isWritable:!0,isSigner:!1},{pubkey:e.feeWallet,isWritable:!0,isSigner:!1},{pubkey:e.depositAuthority,isWritable:!1,isSigner:!1},{pubkey:e.poolMint,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??ma.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Rn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Rn.TransactionInstruction({programId:t,keys:n,data:o})}});var Bn=N(Te=>{"use strict";i();a();var Sa=Te&&Te.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),ka=Te&&Te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pr=Te&&Te.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&Sa(o,t,n[r]);return ka(o,t),o}}();Object.defineProperty(Te,"__esModule",{value:!0});Te.depositStakeArgsBeet=void 0;var ga=pr(st()),ya=pr(ce());Te.depositStakeArgsBeet=new ya.BeetArgsStruct([["owner",ga.publicKey]],"DepositStakeArgs")});var fr=N(X=>{"use strict";i();a();var Aa=X&&X.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),ba=X&&X.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Un=X&&X.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&Aa(o,t,n[r]);return ba(o,t),o}}();Object.defineProperty(X,"__esModule",{value:!0});X.depositStakeInstructionDiscriminator=X.DepositStakeStruct=void 0;X.createDepositStakeInstruction=Pa;var va=Un(Tt()),mr=Un(ce()),En=Un(ye()),ha=Bn();X.DepositStakeStruct=new mr.BeetArgsStruct([["instructionDiscriminator",mr.u8],["depositStakeArgs",ha.depositStakeArgsBeet]],"DepositStakeInstructionArgs");X.depositStakeInstructionDiscriminator=2;function Pa(e,t,o=new En.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=X.DepositStakeStruct.serialize({instructionDiscriminator:X.depositStakeInstructionDiscriminator,...t}),r=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??va.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??En.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new En.TransactionInstruction({programId:o,keys:r,data:n})}});var On=N(De=>{"use strict";i();a();var wa=De&&De.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Ta=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kr=De&&De.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&wa(o,t,n[r]);return Ta(o,t),o}}();Object.defineProperty(De,"__esModule",{value:!0});De.depositStakeWithSlippageArgsBeet=void 0;var Sr=kr(ce()),Da=kr(st());De.depositStakeWithSlippageArgsBeet=new Sr.BeetArgsStruct([["owner",Da.publicKey],["minimumPoolTokensOut",Sr.u64]],"DepositStakeWithSlippageArgs")});var yr=N(Z=>{"use strict";i();a();var Ca=Z&&Z.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Ma=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xn=Z&&Z.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&Ca(o,t,n[r]);return Ma(o,t),o}}();Object.defineProperty(Z,"__esModule",{value:!0});Z.depositStakeWithSlippageInstructionDiscriminator=Z.DepositStakeWithSlippageStruct=void 0;Z.createDepositStakeWithSlippageInstruction=qa;var Ia=xn(Tt()),gr=xn(ce()),Fn=xn(ye()),_a=On();Z.DepositStakeWithSlippageStruct=new gr.BeetArgsStruct([["instructionDiscriminator",gr.u8],["depositStakeWithSlippageArgs",_a.depositStakeWithSlippageArgsBeet]],"DepositStakeWithSlippageInstructionArgs");Z.depositStakeWithSlippageInstructionDiscriminator=3;function qa(e,t,o=new Fn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=Z.DepositStakeWithSlippageStruct.serialize({instructionDiscriminator:Z.depositStakeWithSlippageInstructionDiscriminator,...t}),r=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.depositReceipt,isWritable:!0,isSigner:!1},{pubkey:e.stakePool,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeList,isWritable:!0,isSigner:!1},{pubkey:e.depositStakeAuthority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePoolWithdrawAuthority,isWritable:!1,isSigner:!1},{pubkey:e.stake,isWritable:!0,isSigner:!1},{pubkey:e.validatorStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.reserveStakeAccount,isWritable:!0,isSigner:!1},{pubkey:e.vault,isWritable:!0,isSigner:!1},{pubkey:e.managerFeeAccount,isWritable:!0,isSigner:!1},{pubkey:e.referrerPoolTokensAccount,isWritable:!0,isSigner:!1},{pubkey:e.poolMint,isWritable:!0,isSigner:!1},{pubkey:e.clock,isWritable:!1,isSigner:!1},{pubkey:e.stakeHistory,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Ia.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.stakeProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??Fn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new Fn.TransactionInstruction({programId:o,keys:r,data:n})}});var Kn=N(Ce=>{"use strict";i();a();var La=Ce&&Ce.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Ra=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ar=Ce&&Ce.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&La(o,t,n[r]);return Ra(o,t),o}}();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.initStakePoolDepositStakeAuthorityArgsBeet=void 0;var Vn=Ar(ce()),Na=Ar(st());Ce.initStakePoolDepositStakeAuthorityArgsBeet=new Vn.BeetArgsStruct([["feeWallet",Na.publicKey],["coolDownSeconds",Vn.u64],["initialFeeBps",Vn.u32]],"InitStakePoolDepositStakeAuthorityArgs")});var vr=N(ee=>{"use strict";i();a();var Ba=ee&&ee.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Ea=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wn=ee&&ee.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&Ba(o,t,n[r]);return Ea(o,t),o}}();Object.defineProperty(ee,"__esModule",{value:!0});ee.initStakePoolDepositStakeAuthorityInstructionDiscriminator=ee.InitStakePoolDepositStakeAuthorityStruct=void 0;ee.createInitStakePoolDepositStakeAuthorityInstruction=Fa;var Ua=Wn(Tt()),br=Wn(ce()),jn=Wn(ye()),Oa=Kn();ee.InitStakePoolDepositStakeAuthorityStruct=new br.BeetArgsStruct([["instructionDiscriminator",br.u8],["initStakePoolDepositStakeAuthorityArgs",Oa.initStakePoolDepositStakeAuthorityArgsBeet]],"InitStakePoolDepositStakeAuthorityInstructionArgs");ee.initStakePoolDepositStakeAuthorityInstructionDiscriminator=0;function Fa(e,t,o=new jn.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=ee.InitStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:ee.initStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),r=[{pubkey:e.payer,isWritable:!0,isSigner:!0},{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.vaultAta,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!1},{pubkey:e.base,isWritable:!1,isSigner:!0},{pubkey:e.stakePool,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolMint,isWritable:!1,isSigner:!1},{pubkey:e.stakePoolProgram,isWritable:!1,isSigner:!1},{pubkey:e.tokenProgram??Ua.TOKEN_PROGRAM_ID,isWritable:!1,isSigner:!1},{pubkey:e.associatedTokenProgram,isWritable:!1,isSigner:!1},{pubkey:e.systemProgram??jn.SystemProgram.programId,isWritable:!1,isSigner:!1}];return new jn.TransactionInstruction({programId:o,keys:r,data:n})}});var zn=N(Me=>{"use strict";i();a();var xa=Me&&Me.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Va=Me&&Me.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hr=Me&&Me.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&xa(o,t,n[r]);return Va(o,t),o}}();Object.defineProperty(Me,"__esModule",{value:!0});Me.updateStakePoolDepositStakeAuthorityArgsBeet=void 0;var ht=hr(ce()),Ka=hr(st());Me.updateStakePoolDepositStakeAuthorityArgsBeet=new ht.FixableBeetArgsStruct([["feeWallet",ht.coption(Ka.publicKey)],["coolDownSeconds",ht.coption(ht.u64)],["initialFeeBps",ht.coption(ht.u32)]],"UpdateStakePoolDepositStakeAuthorityArgs")});var Dr=N(te=>{"use strict";i();a();var ja=te&&te.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Wa=te&&te.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Tr=te&&te.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(o){var n=[];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[n.length]=r);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var o={};if(t!=null)for(var n=e(t),r=0;r<n.length;r++)n[r]!=="default"&&ja(o,t,n[r]);return Wa(o,t),o}}();Object.defineProperty(te,"__esModule",{value:!0});te.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=te.UpdateStakePoolDepositStakeAuthorityStruct=void 0;te.createUpdateStakePoolDepositStakeAuthorityInstruction=Ga;var Pr=Tr(ce()),wr=Tr(ye()),za=zn();te.UpdateStakePoolDepositStakeAuthorityStruct=new Pr.FixableBeetArgsStruct([["instructionDiscriminator",Pr.u8],["updateStakePoolDepositStakeAuthorityArgs",za.updateStakePoolDepositStakeAuthorityArgsBeet]],"UpdateStakePoolDepositStakeAuthorityInstructionArgs");te.updateStakePoolDepositStakeAuthorityInstructionDiscriminator=1;function Ga(e,t,o=new wr.PublicKey("5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV")){let[n]=te.UpdateStakePoolDepositStakeAuthorityStruct.serialize({instructionDiscriminator:te.updateStakePoolDepositStakeAuthorityInstructionDiscriminator,...t}),r=[{pubkey:e.depositStakeAuthority,isWritable:!0,isSigner:!1},{pubkey:e.authority,isWritable:!1,isSigner:!0},{pubkey:e.newAuthority??o,isWritable:!1,isSigner:!1}];return new wr.TransactionInstruction({programId:o,keys:r,data:n})}});var Cr=N(pe=>{"use strict";i();a();var Qa=pe&&pe.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Pt=pe&&pe.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&Qa(t,e,o)};Object.defineProperty(pe,"__esModule",{value:!0});Pt(cr(),pe);Pt(dr(),pe);Pt(fr(),pe);Pt(yr(),pe);Pt(vr(),pe);Pt(Dr(),pe)});var Mr=N(Ie=>{"use strict";i();a();var Ha=Ie&&Ie.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Pn=Ie&&Ie.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&Ha(t,e,o)};Object.defineProperty(Ie,"__esModule",{value:!0});Pn(Bn(),Ie);Pn(On(),Ie);Pn(Kn(),Ie);Pn(zn(),Ie)});var Qn=N(ie=>{"use strict";i();a();var Ya=ie&&ie.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),Gn=ie&&ie.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&Ya(t,e,o)};Object.defineProperty(ie,"__esModule",{value:!0});ie.PROGRAM_ID=ie.PROGRAM_ADDRESS=void 0;var Ja=ye();Gn(ir(),ie);Gn(Cr(),ie);Gn(Mr(),ie);ie.PROGRAM_ADDRESS="5TAiuAh3YGDbwjEruC1ZpXTJWdNDS7Ur7VeqNNiHMmGV";ie.PROGRAM_ID=new Ja.PublicKey(ie.PROGRAM_ADDRESS)});var Ir=N(wn=>{"use strict";i();a();Object.defineProperty(wn,"__esModule",{value:!0});wn.depositStake=void 0;var se=ye(),Hn=Qn(),Yn=Tt(),ae=Jr(),Jn=new se.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy"),$a=(0,ae.struct)([(0,ae.u8)("accountType"),(0,ae.publicKey)("manager"),(0,ae.publicKey)("staker"),(0,ae.publicKey)("stakeDepositAuthority"),(0,ae.u8)("stakeWithdrawBumpSeed"),(0,ae.publicKey)("validatorList"),(0,ae.publicKey)("reserveStake"),(0,ae.publicKey)("poolMint"),(0,ae.publicKey)("managerFeeAccount"),(0,ae.publicKey)("tokenProgramId"),(0,ae.u64)("totalLamports"),(0,ae.u64)("poolTokenSupply"),(0,ae.u64)("lastUpdateEpoch")]),Xa=async(e,t)=>{let o=await e.getAccountInfo(t);if(!o)throw new Error("Stake pool account not found");let n=$a.decode(o.data);return{pubkey:t,account:{data:n}}},Za=async(e,t,o,n,r,s,l,u)=>{let c=await Xa(e,o),d=await Hn.StakePoolDepositStakeAuthority.fromAccountAddress(e,c.account.data.stakeDepositAuthority),p=await es(Jn,o),m=await ts(Jn,r,o),f=[],k=[],g=se.Keypair.generate(),y=c.account.data.poolMint;if(k.push(g),!l){let E=(0,Yn.getAssociatedTokenAddressSync)(y,n);f.push((0,Yn.createAssociatedTokenAccountIdempotentInstruction)(n,E,n,y)),l=E}f.push(...se.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:n,newAuthorizedPubkey:c.account.data.stakeDepositAuthority,stakeAuthorizationType:se.StakeAuthorizationLayout.Staker}).instructions),f.push(...se.StakeProgram.authorize({stakePubkey:s,authorizedPubkey:n,newAuthorizedPubkey:c.account.data.stakeDepositAuthority,stakeAuthorizationType:se.StakeAuthorizationLayout.Withdrawer}).instructions);let[h]=se.PublicKey.findProgramAddressSync([Buffer.from("deposit_receipt"),o.toBuffer(),g.publicKey.toBuffer()],Hn.PROGRAM_ID),w={depositStakeArgs:{owner:n}},D={payer:t,stakePoolProgram:Jn,depositReceipt:h,stakePool:o,validatorStakeList:c.account.data.validatorList,depositStakeAuthority:c.account.data.stakeDepositAuthority,base:g.publicKey,stakePoolWithdrawAuthority:p,stake:s,validatorStakeAccount:m,reserveStakeAccount:c.account.data.reserveStake,vault:d.vault,managerFeeAccount:c.account.data.managerFeeAccount,referrerPoolTokensAccount:l,poolMint:y,clock:se.SYSVAR_CLOCK_PUBKEY,stakeHistory:se.SYSVAR_STAKE_HISTORY_PUBKEY,tokenProgram:Yn.TOKEN_PROGRAM_ID,stakeProgram:se.StakeProgram.programId,systemProgram:se.SystemProgram.programId},T=(0,Hn.createDepositStakeInstruction)(D,w);return u?.length&&T.keys.push(...u),f.push(T),{instructions:f,signers:k}};wn.depositStake=Za;var es=(e,t)=>{let[o]=se.PublicKey.findProgramAddressSync([t.toBuffer(),Buffer.from("withdraw")],e);return o},ts=(e,t,o)=>{let[n]=se.PublicKey.findProgramAddressSync([t.toBuffer(),o.toBuffer(),Buffer.alloc(0)],e);return n}});var qr=N(Ye=>{"use strict";i();a();var ns=Ye&&Ye.__createBinding||(Object.create?function(e,t,o,n){n===void 0&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){n===void 0&&(n=o),e[n]=t[o]}),_r=Ye&&Ye.__exportStar||function(e,t){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&ns(t,e,o)};Object.defineProperty(Ye,"__esModule",{value:!0});_r(Qn(),Ye);_r(Ir(),Ye)});i();a();i();a();var Ge=new Error("Missing sender address for staking fungibles."),Do=new Error("Missing signature from waiting for staking transaction confirmation."),Co=new Error("PublicKey is required");var tt=class extends Error{constructor(t){super(t)}};function $r({stakePubkey:e,stakeAuthorityPubkey:t,authorizedPubkey:o,transaction:n=new ne.Transaction}){return t.equals(o)||n.add(A.StakeProgram.authorize({authorizedPubkey:o,newAuthorizedPubkey:o,stakeAuthorizationType:A.StakeAuthorizationLayout.Staker,stakePubkey:e})),n.add(A.StakeProgram.deactivate({stakePubkey:e,authorizedPubkey:o})),n}var Xr=e=>{let{t}=Ue(),o=j(),n=We(),{mutateAsync:r}=Ve(e);return ue({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:d,stakeAuthorityPubkey:p,authorizedPubkey:m})=>{if(!c)throw Ge;let{networkID:f,address:k}=c,g=$r({stakePubkey:d,stakeAuthorityPubkey:p,authorizedPubkey:m}),y=await le(g,{connection:e}),h={ownerAddress:k??"",networkID:f,data:{signature:""},type:"deactivateState",display:{summary:{topLeft:{text:t("transactionsPendingDeactivatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),type:"undelegate"});let w=await r({accountIdentifier:u,feePayer:new A.PublicKey(k),transaction:y,pendingTransactionInput:h});return n.submittedTransaction(w,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}),n.deactivateStake(),{networkID:f,id:w??""}},onSuccess:u=>{Fe({connection:e,signature:u.id}).then(()=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ve(o)()}).catch(c=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();function In({stakePubkey:e,authorizedPubkey:t,votePubkey:o}){return A.StakeProgram.delegate({stakePubkey:e,authorizedPubkey:t,votePubkey:o})}var Zr=e=>{let{t}=Ue(),o=j(),n=We(),{mutateAsync:r}=Ve(e);return ue({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:d,authorizedPubkey:p,votePubkey:m})=>{if(!c)throw Ge;let{networkID:f,address:k}=c,g=In({stakePubkey:d,authorizedPubkey:p,votePubkey:m}),y=await le(g,{connection:e}),h={ownerAddress:k??"",networkID:f,data:{signature:""},type:"delegateStake",display:{summary:{topLeft:{text:t("transactionsPendingDelegatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),type:"delegate"});let w=await r({accountIdentifier:u,feePayer:new A.PublicKey(k),transaction:y,pendingTransactionInput:h});return n.submittedTransaction(w,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}),{networkID:f,id:w??""}},onSuccess:u=>{Fe({connection:e,signature:u.id}).then(()=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ve(o)()}).catch(c=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();i();a();var Mo=({numSignatures:e,lamportsPerSignature:t,lamportBalance:o,rentExemptionMinimum:n})=>{let r=G(t).multipliedBy(e),s=o.minus(r);return G.max(s.minus(n),0)};var ei=({balance:e,rentExemptionMinimum:t})=>{let o=Mo({numSignatures:11,lamportsPerSignature:xe,lamportBalance:G(e),rentExemptionMinimum:to(t)});return parseFloat(Et(o).toFixed(9))};i();a();i();a();var ti="https://keybase.io/_/api/1.0/user/pic_url.json",en=async e=>{let t=await Ae.get(`${ti}?username=${encodeURIComponent(e)}`);if(!be(t)||t.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return t.data.pic_url};var ni=e=>{let t=_.keybaseUserAvatar(e);return q({enabled:!!e,queryKey:t,async queryFn(){if(!e)throw new Error("Keybase username is required");return en(e)},placeholderData:"",staleTime:1/0})};i();a();var oi=async(e,t)=>await e.getSignatureStatuses([t],{searchTransactionHistory:!0});function ri(e,t,o){let n=j(),r=_.signatureStatus(o),s=async()=>{if(!o)throw Do;let d=await oi(e,o);return{...d,value:d.value[0]}},u=n.getQueryData(r)?.value?.confirmationStatus;return q({queryKey:r,queryFn:s,enabled:!!o&&u!=="finalized",refetchInterval:t,staleTime:1/0})}i();a();var ii=e=>async()=>await e.getMinimumBalanceForRentExemption(A.StakeProgram.space);function ai(e){let t=_.stakeAccountMinBalance(),o=ii(e);return q({queryKey:t,queryFn:o,placeholderData:0,staleTime:1/0})}i();a();var si=async(e,t,o,n="confirmed")=>await e.getInflationReward(t,o,n),ui=async(e,t)=>{let o=[];t.ownerPublicKey&&o.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&o.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});let n=await e.getParsedProgramAccounts(A.StakeProgram.programId,{filters:o}),r=[];if(t.fetchInflationRewards)try{r=await si(e,n.map(({pubkey:s})=>s))}catch(s){let l=s;!l.message.includes("RPC request timed out")&&Q.captureError(l,"staking")}return n.map((s,l)=>({pubkey:s.pubkey.toString(),lamports:s.account.lamports,inflationReward:r[l]?.amount,...s.account.data.parsed}))},ci=(e,t)=>_.stakeAccounts(e,t),li=(e,t)=>()=>ui(e,{ownerPublicKey:t,fetchInflationRewards:!0});function tn(e,t){let o=ci(t,e.rpcEndpoint),n=li(e,t);return q({queryKey:o,queryFn:n,placeholderData:[],staleTime:1/0})}i();a();i();a();i();a();i();a();function nn(e,t){for(let o of t)if(o.epoch===e)return o;return null}var Io=.09;function di(e,t,o){if(e.activationEpoch===e.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(t===e.activationEpoch)return{effective:BigInt(0),activating:e.stake};if(t<e.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let n=e.activationEpoch,r=nn(n,o);if(r!==null){let s=BigInt(0);for(;r!==null;){n++;let l=e.stake-s,u=Number(l)/Number(r.activating),c=Number(r.effective)*Io,d=BigInt(Math.max(1,Math.round(u*c)));if(s+=d,s>=e.stake){s=e.stake;break}if(n>=t||n>=e.deactivationEpoch)break;r=nn(n,o)}return{effective:s,activating:e.stake-s}}else return{effective:e.stake,activating:BigInt(0)}}function _o(e,t,o){let{effective:n,activating:r}=di(e,t,o);if(t<e.deactivationEpoch)return{effective:n,activating:r,deactivating:BigInt(0)};if(t==e.deactivationEpoch)return{effective:n,activating:BigInt(0),deactivating:n};let s=e.deactivationEpoch,l=nn(s,o);if(l!==null){let u=n;for(;l!==null&&(s++,l.deactivating!==BigInt(0));){let c=Number(u)/Number(l.deactivating),d=Number(l.effective)*Io,p=BigInt(Math.max(1,Math.round(c*d)));if(u-=p,u<=0){u=BigInt(0);break}if(s>=t)break;l=nn(s,o)}return{effective:u,deactivating:u,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}i();a();var qo=function(e){if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");let t=[];return e.value.data.parsed.info.forEach(o=>{t.push({epoch:BigInt(o.epoch),effective:BigInt(o.stakeHistory.effective),activating:BigInt(o.stakeHistory.activating),deactivating:BigInt(o.stakeHistory.deactivating)})}),t},Lo=function(e){let t=BigInt(0);if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");return e.value.data.parsed.type==="delegated"&&(t=BigInt(1)),{discriminant:t,meta:{rentExemptReserve:BigInt(e.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:e.value.data.parsed.info.meta.authorized.staker,withdrawer:e.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(e.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(e.value.data.parsed.info.meta.lockup.epoch),custodian:e.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:e.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(e.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(e.value.data.parsed.info.stake.creditsObserved)}}};async function Mt(e,t){let o=new A.PublicKey("SysvarStakeHistory1111111111111111111111111"),n=await e.getParsedAccountInfo(t);if(n===null||n.value===null)throw new Error("Account not found");let r=await e.getParsedAccountInfo(o);if(r===null)throw new Error("StakeHistory not found");let s=qo(r),l=await e.getEpochInfo(),u=Lo(n),{effective:c,activating:d,deactivating:p}=_o(u.stake.delegation,BigInt(l.epoch),s),m;p>0?m="deactivating":d>0?m="activating":c>0?m="active":m="inactive";let f=BigInt(n.value.lamports)-c-u.meta.rentExemptReserve;return{state:m,active:Number(c),inactive:Number(f)}}function pi(e,t){let o=_.stakeActivationData(t);return q({queryKey:o,queryFn:async()=>{if(!t)throw Co;return await Mt(e,new A.PublicKey(t))},enabled:!!t,staleTime:1/0})}i();a();i();a();var Ro=new Error("Failed to fetch staking APY");async function No(){try{let e=await Ae.api().get("/staking/v1/apy");if(!be(e))throw Ro;let t=e.data;return Yt.parse(t).apy}catch{throw Ro}}var _n=()=>{let e=_.stakeApy();return q({enabled:!0,queryKey:e,gcTime:dt.Short,staleTime:1/0,async queryFn(){return No()}})};i();a();function mi({stakePubkey:e,authorizedPubkey:t,amount:o,transaction:n=new ne.Transaction}){return n.add(A.StakeProgram.withdraw({stakePubkey:e,authorizedPubkey:t,toPubkey:t,lamports:o})),n}var fi=e=>{let{t}=Ue(),o=j(),n=We(),{mutateAsync:r}=Ve(e);return ue({mutationFn:async({accountIdentifier:u,senderAddress:c,stakePubkey:d,authorizedPubkey:p,amount:m})=>{if(!c)throw Ge;let{networkID:f,address:k}=c,g=mi({stakePubkey:d,authorizedPubkey:p,amount:m}),y=await le(g,{connection:e}),h={ownerAddress:k??"",networkID:f,data:{signature:""},type:"withdrawStake",display:{summary:{topLeft:{text:t("transactionsPendingWithdrawingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),type:"withdraw"});let w=await r({accountIdentifier:u,feePayer:new A.PublicKey(k),transaction:y,pendingTransactionInput:h});return n.submittedTransaction(w,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(f),method:"signAndSendTransaction"}),{networkID:f,id:w??""}},onSuccess:u=>{Fe({connection:e,signature:u.id}).then(()=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ve(o)()}).catch(c=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();function Si({ownerPublicKey:e,lamports:t,transaction:o=new ne.Transaction}){let n=A.Keypair.generate();return o.add(A.StakeProgram.createAccount({fromPubkey:e,stakePubkey:n.publicKey,authorized:new A.Authorized(e,e),lamports:t})),[o,n]}function ki({lamports:e,votePubkey:t,authorizedPubkey:o}){let[n,r]=Si({ownerPublicKey:o,lamports:e});return n.add(In({stakePubkey:r.publicKey,authorizedPubkey:o,votePubkey:t})),[n,r]}var gi=e=>{let{t}=Ue(),o=j(),n=We(),{mutateAsync:r}=Ve(e);return ue({mutationFn:async({accountIdentifier:u,senderAddress:c,lamports:d,votePubkey:p,authorizedPubkey:m,usdPerSol:f})=>{if(!c)throw Ge;let{networkID:k,address:g}=c,[y,h]=ki({accountIdentifier:u,senderAddress:c,lamports:d,votePubkey:p,authorizedPubkey:m}),w=await le(y,{connection:e}),D={ownerAddress:g??"",networkID:k,data:{signature:""},type:"createAccountAndDelegateStake",display:{summary:{topLeft:{text:t("transactionsPendingCreatingAndDelegatingStake")}}}};n.approved({chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(k),type:"delegate"});let T=await r({accountIdentifier:u,feePayer:new A.PublicKey(g),transaction:w,pendingTransactionInput:D,opts:{additionalSignerAccounts:[h]}});n.submittedTransaction(T,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(k),method:"signAndSendTransaction"});let E=Et(d),me=f?E.times(f):void 0;return n.createStakeAccountAndDelegateStake({sol:E.toNumber(),usd:me?.toNumber(),voteAccountPubkey:p}),{networkID:k,id:T??""}},onSuccess:u=>{Fe({connection:e,signature:u.id}).then(()=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"confirmed"}}),ve(o)()}).catch(c=>{n.transactionStatus(u.id,{chainType:"solana",chainName:"solana",networkId:v.getSolanaNetworkIDValue(u.networkID),status:{type:"error"}}),Q.captureError(c,"staking")})}})};i();a();var It=M(I());i();a();var Bo=M(I());var yi=e=>{let t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t},Eo=async(e,t,o)=>{let n=yi(t),r=await e.getParsedProgramAccounts(A.StakeProgram.programId,{filters:n}),l=(await Promise.allSettled(r.map(d=>Mt(e,d.pubkey)))).map(d=>{if(d.status==="fulfilled")return d.value.state}),c=(await Promise.allSettled(r.map(d=>{let p=d.account.data.parsed.info?.stake.delegation.voter,m=o.get(p),f=m?.info?.keybaseUsername,k=m?.info?.iconUrl;return k?new Promise(g=>g(k)):f?en(f):new Promise(g=>g(null))}))).map(d=>{if(d.status==="fulfilled"&&d.value!==null)return d.value});return r.map((d,p)=>({pubkey:d.pubkey.toString(),lamports:d.account.lamports,activationState:l[p],imageUri:c[p],...d.account.data.parsed}))},Uo=(e,t)=>_.convertStakeAccountList(e,t),Ai=(e,t,o)=>()=>Eo(e,{ownerPublicKey:t},o);function Oo(e,t,o,n=!0){let r=Uo(t,e.rpcEndpoint),s=Ai(e,t,o);return q({queryKey:r,queryFn:s,enabled:!!t&&n,staleTime:1/0})}var Fo=(e,t,o,n)=>{let r=j();return(0,Bo.useCallback)(async()=>{n&&await r.prefetchQuery({queryKey:Uo(t,e.rpcEndpoint),queryFn:()=>Eo(e,{ownerPublicKey:t},o)})},[r,t,e,o,n])};i();a();var de=M(I()),on=null,bi=e=>{if(!on&&e){let t="liquidStake";on=new zt(e,t)}if(!on)throw new Error("liquidStakeAnalytics was not properly configured");return on},fe=()=>{let e=Vt(),t=bi(e),o=(0,de.useCallback)((k,g)=>{e.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:k,stakeAccountBalance:g}}})},[e]),n=(0,de.useCallback)(k=>{e.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:k}}})},[e]),r=(0,de.useCallback)(()=>{e.capture("liquidStakingConvertBannerClicked")},[e]),s=(0,de.useCallback)(()=>{e.capture("liquidStakingConvertBannerSeen")},[e]),l=(0,de.useCallback)(()=>{e.capture("liquidStakingConvertModalContinue")},[e]),u=(0,de.useCallback)(()=>{e.capture("liquidStakingConvertModalNotNow")},[e]),c=(0,de.useCallback)(({provider:k,convertDetails:g,amount:y,fromAmount:h,toAmount:w,fromAmountUSD:D,toAmountUSD:T})=>{e.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:k?.stakePoolAddress,token:k?.stakePoolTokenMetadata.metadata.name,fromAmount:h,toAmount:w,fromAmountUSD:D,toAmountUSD:T,apy:k?.apy,convertRatio:k?.convertRatio,caip19:k?.stakePoolTokenMetadata.caip19,validatorName:g?.validatorName,stakeAccountBalance:y}}})},[e]),d=(0,de.useCallback)(k=>{t.submittedTransaction(k,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),p=(0,de.useCallback)(({amount:k,convertDetails:g,provider:y})=>{e.capture("liquidStakingConvertSuccess",{data:{stake:{apy:y?.apy,convertRatio:y?.convertRatio,caip19:y?.stakePoolTokenMetadata.caip19,stakePoolAddress:y?.stakePoolAddress,token:y?.stakePoolTokenMetadata.metadata.name,totalAmount:k,validatorName:g?.validatorName}}})},[e]),m=(0,de.useCallback)(({amount:k,convertDetails:g})=>{e.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:g?.validatorName,stakeAccountBalance:k}}})},[e]),f=(0,de.useCallback)(()=>{e.capture("liquidStakingConvertMoreClicked")},[e]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:n,trackConvertBannerClicked:r,trackConvertBannerSeen:s,trackConvertModalContinue:l,trackConvertModalNotNow:u,trackConvertApprovedByUser:c,trackConvertFailed:m,trackConvertSubmitted:d,trackConvertSuccess:p,trackConvertMoreClicked:f}};var vi=e=>{let{connection:t}=W(),{data:o}=B("solana"),n=b(p=>p.setSkipDismissRouting),{trackConvertModalContinue:r,trackConvertModalNotNow:s}=fe(),{results:l,isFetched:u}=ze(t),c=(0,It.useMemo)(()=>new Map(l.map(p=>[p.voteAccountPubkey,p])),[l]),d=Fo(t,o?.address??"",c,u);return(0,It.useEffect)(()=>{d()},[d]),(0,It.useEffect)(()=>{n(e)},[e,n]),{trackConvertModalContinue:r,trackConvertModalNotNow:s}};i();a();i();a();var _t=M(I());i();a();i();a();var xo=new Error("Failed to fetch Average Validator APY");async function Vo(){let e=await Ae.api().get("/staking/v1/avg-validator-apy");if(!be(e))throw xo;let t=Yt.safeParse(e.data);if(t.success)return t.data.apy;throw xo}var Ko=()=>{let e=_.averageValidatorApy();return q({enabled:!0,queryKey:e,gcTime:rt({hours:1}),staleTime:1/0,async queryFn(){return Vo()}})};i();a();i();a();var jo=new Error("Failed to fetch liquid staking supported tokens"),hi=new Error("Missing supported tokens in response");async function Wo(){try{let e=await Ae.api().get("/liquid-staking/v1/supported-tokens");if(!be(e))throw jo;let t=bo.safeParse(e.data.supportedTokens);if(!t.success)throw hi;return t.data}catch{throw jo}}var rn=()=>{let e=_.liquidStakingSupportedTokens();return q({queryKey:e,staleTime:rt({minutes:15}),async queryFn(){return await Wo()}})};var an=e=>{let t=b(g=>g.provider),o=b(g=>g.setProvider),n=b(g=>g.setFungibleToStake),r=b(g=>g.setSkipDismissRouting),s=(0,_t.useMemo)(()=>e?at(Ke(e)):"",[e]),{data:l,isPending:u}=Ko(),c=l?l/100:null,{data:d={},isPending:p}=rn(),m=(0,_t.useMemo)(()=>d[s]??[],[s,d]),f=m?m[0]:void 0,k=(0,_t.useCallback)((g,y)=>{if(!e||!f)return;let h=m.find(w=>w.stakePoolTokenMetadata.caip19===y);if(y){h&&(o(h),n(e),r(g));return}o(f),n(e),r(g)},[e,f,n,o,r,m]);return{isLoading:p||u,isSupported:m.length>0,providers:m,initLiquidStake:k,defaultProvider:f,avgValidatorApy:c,activeProvider:t}};var Pe=e=>{let t=ko.get(e);return an(t)};i();a();var St=M(I());i();a();var mt=M(I());var ft=e=>{let{data:[t]}=xt(["kill-liquid-staking-convert"]),o=e?.validators,n=(0,mt.useMemo)(()=>o?new Map(o.map(T=>[T.vote_account,T])):new Map,[o]),{connection:r}=W(),{data:s}=B("solana"),{results:l,isFetched:u,isError:c}=ze(r),d=(0,mt.useMemo)(()=>new Map(l.map(T=>[T.voteAccountPubkey,T])),[l]),{data:p,isLoading:m,isFetching:f,error:k,refetch:g}=Oo(r,s?.address??"",d,u||c),y=m||f,h=(0,mt.useMemo)(()=>y||!p?[]:p.map(T=>wi(T,d,n)).sort((T,E)=>T.lamports>E.lamports?-1:1),[y,p,d,n]),w=(0,mt.useMemo)(()=>h.filter(T=>T.eligible),[h]),D=(0,mt.useMemo)(()=>h.filter(T=>!T.eligible),[h]);return e?.stakePoolTokenMetadata.caip19===Gt?{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:!1,error:null,refetch:()=>{}}:{hasConvertibleStakeAccounts:!t&&w.length>0,eligibleStakeAccounts:w,inelegibleStakeAccounts:D,isLoadingList:y,error:k,refetch:g}},wi=(e,t,o)=>{let n=Po(e,o),r=Ti(e,t),s=e.lamports;return{...e,amount:s,eligible:n,title:r,imageUri:e.imageUri}},Ti=(e,t)=>{let o="";if(e.type==="delegated"){let{voter:n}=e.info.stake.delegation,r=t.get(n),s=r?.info?.keybaseUsername;o=r?.info?.name??s??so(n)}else e.type==="initialized"&&(o=e.pubkey);return o};var Di=e=>{let t=b(y=>y.setConvertStakeAccount),o=b(y=>y.setAmount),n=b(y=>y.fungibleToStake),r=b(y=>y.provider),{initLiquidStake:s}=Pe(v.solana.mainnetID);(0,St.useEffect)(()=>{s()},[s]);let{trackConvertStakeAccountClicked:l,trackConvertStakeAccountListSeen:u}=fe(),{error:c,refetch:d,isLoadingList:p,eligibleStakeAccounts:m,inelegibleStakeAccounts:f}=ft(r);(0,St.useEffect)(()=>{p||u([...m,...f].map(y=>({title:y.title,amount:y.amount,eligible:y.eligible})))},[u,m,f,p]);let k=(0,St.useCallback)(y=>{let h=y?.info?.stake?.delegation?.voter??"",w=`${y?.lamports??"0"}`,D=y?.title??"";t({validatorVote:h,stakeAccount:y.pubkey,validatorName:D,eligibleAccountsCount:m.length}),o(w),l(D,w),e()},[l,m.length,e,t,o]),g=(0,St.useCallback)(()=>{d()},[d]);return{isLoading:p,error:c,eligibleStakeAccounts:m,inelegibleStakeAccounts:f,onReload:g,onSelectStakeAccount:k,tokenSymbol:n?.data.symbol??"",tokenDecimals:n?.data.decimals??0}};i();a();var z=M(I());i();a();function sn(e){return e instanceof tt?e:new tt("UnknownError")}i();a();var zo=M(I());var un=({txReceipt:e,isTxError:t,poolTokenFungible:o,invalidateQueries:n,dismissLiquidStaking:r})=>{let s=b(d=>d.resetStaking),l=b(d=>d.setNavigateTo),u=b(d=>d.setSkipDismissRouting),c=b(d=>d.skipDismissRouting);return(0,zo.useCallback)(()=>{if(s(),!e||t)return r();if(n(),c)return u(void 0),r();l(o?{screen:"FungibleDetail",fungible:o}:{screen:"Activity"}),r()},[e,t,o,n,r,l,s,c,u])};i();a();var cn=M(I());i();a();var Go=({connection:e})=>{let t=wt(),o=uo();return ue({mutationFn:async({accountIdentifier:r,ownerAddress:s,pendingActivityRow:l,activityType:u,transactionData:{networkID:c,transaction:d,signers:p}})=>{if(v.isSolanaNetworkID(c)){await eo(d,e);let m={ownerAddress:s,networkID:c,data:{signature:""},type:u,display:{summary:l}};return{id:await co({accountIdentifier:r,feePayer:new A.PublicKey(s),connection:e,accountSigner:o,transaction:d,pendingTransactionInput:m,storage:t,opts:{additionalSignerAccounts:p}}),networkID:c}}throw new Error(`Unsupported network for liquid staking: ${c}`)}})};function ln({isLoadingPoolToken:e,pendingActivityRow:t,onTransactionSubmitted:o,onTransactionFailed:n}){let{connection:r}=W(),s=b(y=>y.transactionData),l=b(y=>y.fungibleToStake),{data:u,isLoading:c}=Oe(),{mutateAsync:d}=Go({connection:r}),m=(0,cn.useMemo)(()=>(u?.addresses??[]).find(y=>y.networkID===l?.data.chain.id),[l?.data.chain.id,u?.addresses])?.address??"",f=u?.identifier??"";return{executeLiquidStake:(0,cn.useCallback)(async()=>{try{if(!s)throw new tt("MissingTransactionData");let y=await d({accountIdentifier:f,ownerAddress:m,pendingActivityRow:t,activityType:"convertStake",transactionData:s});o(y)}catch(y){n(y)}},[f,m,t,s,d,o,n]),isReadyToExecute:!c&&!e}}i();a();var Qo=M(I());var dn=()=>{let e=j();return(0,Qo.useCallback)(()=>ve(e)(),[e])};i();a();var pn=M(I());i();a();function Ho({key:e,queryKey:t,defaultValue:o=null}){let n=wt();return q({enabled:!0,queryKey:t,gcTime:dt.Long,staleTime:1/0,async queryFn(){try{return await n.get(e)}catch(r){return r instanceof Error&&Q.captureError(r,"staking"),o}}})}function Yo({key:e,queryKey:t}){let o=wt(),n=j();return ue({async mutationFn(r){try{return await o.set(e,r)}catch(s){s instanceof Error&&Q.captureError(s,"staking");return}},async onMutate(r){await n.cancelQueries({queryKey:t});let s=n.getQueryData(t);return n.setQueryData(t,r),{previousValue:s}},onError(r,s,l){n.setQueryData(t,l?.previousValue)}})}var Mi=Bt.object({convert:Bt.boolean(),mint:Bt.boolean()}),qn={convert:!1,mint:!1},Ii=JSON.stringify(qn),kt=()=>{let{data:e}=Ho({key:"featureUsed",queryKey:_.featureUsed(),defaultValue:Ii}),t=(0,pn.useMemo)(()=>{if(!e)return qn;let r=Mi.safeParse(JSON.parse(e));return r.success?r.data:qn},[e]),{mutateAsync:o}=Yo({key:"featureUsed",queryKey:_.featureUsed()}),n=(0,pn.useCallback)(async r=>{let s={...t,...r};await o(JSON.stringify(s))},[o,t]);return{usageState:t,setUsageState:n}};var qi="https://www.jito.network/defi/";function Li({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:o,txError:n,confirmationStatus:r,eligibleAccountsCount:s,onDismiss:l,onConvertMore:u}){let c={title:P.t("commandClose"),onPress:l},d={title:P.t("convertStakeStatusConvertMore"),onPress:u},p={txHash:o,txHashTitle:P.t("commandViewTransaction")};return n?{type:"error",title:P.t("convertStakeStatusErrorTitle"),message:P.t("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),...p,primaryButton:c}:r==="confirmed"?{type:"success",title:P.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),message:"",...p,...s>1?{primaryButton:d,secondaryButton:c}:{primaryButton:c}}:{type:"loading",title:P.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:P.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),...p,primaryButton:c}}var Ri=({dismissConvertFlow:e,goToConvertAccountList:t})=>{let o=dn(),[n,r]=(0,z.useState)("loading"),[s,l]=(0,z.useState)(),[u,c]=(0,z.useState)(),{trackConvertSubmitted:d,trackConvertSuccess:p,trackConvertFailed:m,trackConvertMoreClicked:f}=fe(),{usageState:k,setUsageState:g}=kt(),y=b(F=>F.fungibleToStake),h=b(F=>F.provider),w=b(F=>F.convert),D=b(F=>F.amount),[T]=(0,z.useState)(w?.eligibleAccountsCount??0),E=b(F=>F.setConvertStakeAccount),me=b(F=>F.setTransactionData),R=y?.data.symbol??"",K=h?.stakePoolTokenMetadata.metadata.symbol??"",Je=h?.stakePoolTokenMetadata.metadata.address??"",{data:_e}=Oe(),$e=_e?.type==="ledger",Re=(0,z.useMemo)(()=>(_e?.addresses??[]).find(F=>F.networkID===y?.data.chain.id),[y?.data.chain.id,_e?.addresses])?.addressType??"solana",{fungible:Ze,isLoadingTokens:et}=H({key:Je}),Ne=(0,z.useCallback)(F=>{d(F.id),l(F),k.convert||g({convert:!0})},[g,d,k.convert]),qe=(0,z.useCallback)(F=>{m({amount:D,convertDetails:w});let Hr=sn(F);c(Hr)},[m,D,w]),Be=(0,z.useMemo)(()=>({topLeft:{text:P.t("convertStakePendingTitle",{symbol:K})}}),[K]),{executeLiquidStake:U,isReadyToExecute:O}=ln({isLoadingPoolToken:et,pendingActivityRow:Be,onTransactionSubmitted:Ne,onTransactionFailed:qe}),L=(0,z.useCallback)(()=>{p({amount:D,convertDetails:w,provider:h}),E(void 0),me(void 0),o()},[D,p,E,me,o,h,w]),{isSuccess:ge,isError:Ee,error:nt}=Dt(L,s);(0,z.useEffect)(()=>{ge?r("confirmed"):Ee&&(r("error"),c(nt),m({amount:D,convertDetails:w}))},[D,w,ge,Ee,m,nt,s]);let ot=un({txReceipt:s,isTxError:Ee,poolTokenFungible:Ze,invalidateQueries:o,dismissLiquidStaking:e}),Nt=(0,z.useCallback)(()=>{f(),t()},[f,t]),Qr=(0,z.useMemo)(()=>Li({stakedTokenSymbol:R,poolTokenSymbol:K,txHash:s?.id,txError:u,confirmationStatus:n,eligibleAccountsCount:T,onDismiss:ot,onConvertMore:Nt}),[R,K,s?.id,u,n,T,ot,Nt]);return{addressType:Re,isLedger:$e,isReadyToExecute:O,statusPageProps:Qr,txError:u,executeLiquidStake:U,learnMoreLink:qi,isJitoSOL:!0,isPSOL:!1}};i();a();var gt=M(I()),mn=null,Ni=e=>{if(!mn&&e){let t="liquidStake";mn=new zt(e,t)}if(!mn)throw new Error("liquidStakeAnalytics was not properly configured");return mn},qt=()=>{let e=Vt(),t=Ni(e),o=(0,gt.useCallback)(()=>{e.capture("liquidStakingMintModalContinueClicked")},[e]),n=(0,gt.useCallback)(({provider:u,payAmount:c,receiveAmount:d,payAmountUSD:p,receiveAmountUSD:m,payAssetTitle:f,providerName:k,receiveAssetTitle:g})=>{e.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:u?.stakePoolAddress,token:u?.stakePoolTokenMetadata.metadata.name,apy:u?.apy,convertRatio:u?.convertRatio,caip19:u?.stakePoolTokenMetadata.caip19,payAmount:c,receiveAmount:d,payAmountUSD:p,receiveAmountUSD:m,payAssetTitle:f,receiveAssetTitle:g,providerName:k}}})},[e]),r=(0,gt.useCallback)(u=>{t.submittedTransaction(u,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),s=(0,gt.useCallback)(({provider:u,amount:c})=>{e.capture("liquidStakingMintSuccess",{data:{stake:{apy:u?.apy,convertRatio:u?.convertRatio,caip19:u?.stakePoolTokenMetadata.caip19,stakePoolAddress:u?.stakePoolAddress,token:u?.stakePoolTokenMetadata.metadata.name,totalAmount:c}}})},[e]),l=(0,gt.useCallback)(u=>{e.capture("liquidStakingMintFailed",{data:{stake:{amount:u}}})},[e]);return{trackMintModalContinue:o,trackMintSubmitted:r,trackMintSuccess:s,trackMintFailed:l,trackMintApprovedByUser:n}};i();a();var Se=M(I());i();a();var Bi=2,Jo=({networkID:e,poolTokenMintAddress:t})=>{let o=v.getAddressType(e),{data:n}=B(e),{fungible:r}=H({key:t}),s=Qt(e,o),{fungible:l}=H({key:s}),u=C(l?.data.amount??""),{data:c=0}=ut(n),d=C(lt).plus(C(xe).multipliedBy(ct)),p=C(c),m=C(c),f=C(Bi).plus(d),k=r?C(f).plus(p):C(m).plus(f).plus(p),g=C(u).minus(k),y=C.max(g,0);return{minAmount:k,maxAmount:y,balance:u}};var Ui=({goBack:e,goToReviewPage:t,showInfoPage:o,lstCaip19:n})=>{let r=b(U=>U.fungibleToStake),s=b(U=>U.provider),l=b(U=>U.amount),u=b(U=>U.setAmount),c=r?.data.symbol??"",d=r?.data.chain.id??v.solana.mainnetID,p=r?.data.decimals??0,m=s?.stakePoolTokenMetadata.metadata.address??"",[f,k]=(0,Se.useState)(l?Ft(l,p):""),{data:g}=B("solana"),{initLiquidStake:y}=Pe(v.solana.mainnetID);(0,Se.useEffect)(()=>{y(void 0,n)},[y,n]),Xt(g,"STAKE_FUNGIBLE");let{minAmount:h,maxAmount:w,balance:D}=Jo({networkID:d,poolTokenMintAddress:m}),T=oe(w,p),E=oe(h,p),me=oe(D,p),R=Ot(f,p).toString(),K=C(R),Je=K.isLessThan(h),_e=K.isGreaterThan(w),$e=K.isFinite(),Xe=R&&Je?P.t("mintLiquidStakeAmountMinRequired",{symbol:c,amount:E}):R&&_e?P.t("mintLiquidStakeAmountInsufficientBalance"):void 0,Re=$e&&!Xe,Ze=(0,Se.useMemo)(()=>{if(!s)return;let U=Le(Number.parseFloat(s.apy)),{address:O,name:L,symbol:ge,logoURI:Ee}=s.stakePoolTokenMetadata.metadata,nt=C(1).dividedBy(C(s.convertRatio)),ot=`1 ${c} \u2248 ${je(nt)} ${ge}`;return{identifier:O,apy:U,name:L,symbol:ge,rate:ot,logoURI:Ee}},[s,c]),et=(0,Se.useCallback)(()=>{k(String(T))},[T]),Ne=(0,Se.useCallback)(U=>{let O=Ut(U);Jt(O,p??9)&&k(O)},[p]),qe=(0,Se.useCallback)(()=>{u(R),t()},[R,t,u]),Be=(0,Se.useCallback)(()=>{u(""),e()},[u,e]);return{amount:f,amountError:Xe,balance:me,symbol:c,poolToken:Ze,canSubmit:Re,onBack:Be,onContinue:qe,onChangeAmount:Ne,onSetMax:et,onInfoPress:o}};i();a();var re=M(I());i();a();function fn(e){return e?e.stakePoolTokenMetadata.caip19===yo:!1}var Oi="https://www.jito.network/defi/";function Fi({poolTokenSymbol:e,txHash:t,txError:o,confirmationStatus:n,onDismiss:r}){let s={title:P.t("commandClose"),onPress:r},l={txHash:t,txHashTitle:P.t("commandViewTransaction")};return o?{type:"error",title:P.t("mintStakeStatusErrorTitle"),message:P.t("mintStakeStatusErrorMessage",{poolTokenSymbol:e}),...l,primaryButton:s}:n==="confirmed"?{type:"success",title:P.t("mintStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...l,primaryButton:s}:{type:"loading",title:P.t("mintStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:P.t("mintStakeStatusLoadingMessage",{poolTokenSymbol:e}),...l,primaryButton:s}}var xi=e=>{let t=dn(),[o,n]=(0,re.useState)("loading"),[r,s]=(0,re.useState)(),[l,u]=(0,re.useState)(),{trackMintSubmitted:c,trackMintSuccess:d,trackMintFailed:p}=qt(),{usageState:m,setUsageState:f}=kt(),k=b(L=>L.fungibleToStake),g=b(L=>L.provider),y=b(L=>L.setTransactionData),h=b(L=>L.amount),w=g?.stakePoolTokenMetadata.metadata.symbol??"",D=g?.stakePoolTokenMetadata.metadata.address??"",{data:T}=Oe(),E=T?.type==="ledger",R=(0,re.useMemo)(()=>(T?.addresses??[]).find(L=>L.networkID===k?.data.chain.id),[k?.data.chain.id,T?.addresses])?.addressType??"solana",{fungible:K,isLoadingTokens:Je}=H({key:D}),_e=(0,re.useCallback)(L=>{c(L.id),s(L),m.mint||f({mint:!0})},[f,c,m.mint]),$e=(0,re.useCallback)(L=>{p(h);let ge=sn(L);u(ge)},[p,h]),Xe=(0,re.useMemo)(()=>({topLeft:{text:P.t("mintLiquidStakePendingTitle",{symbol:w})}}),[w]),{executeLiquidStake:Re,isReadyToExecute:Ze}=ln({isLoadingPoolToken:Je,pendingActivityRow:Xe,onTransactionSubmitted:_e,onTransactionFailed:$e}),et=(0,re.useCallback)(()=>{d({amount:h,provider:g}),y(void 0),t()},[d,h,g,y,t]),{isSuccess:Ne,isError:qe,error:Be}=Dt(et,r);(0,re.useEffect)(()=>{Ne?n("confirmed"):qe&&(n("error"),u(Be),p(h))},[Ne,p,h,qe,Be,r]);let U=un({txReceipt:r,isTxError:qe,poolTokenFungible:K,invalidateQueries:t,dismissLiquidStaking:e}),O=(0,re.useMemo)(()=>Fi({poolTokenSymbol:w,txHash:r?.id,txError:l,confirmationStatus:o,onDismiss:U}),[w,r?.id,l,o,U]);return{addressType:R,isLedger:E,isReadyToExecute:Ze,statusPageProps:O,learnMoreLink:Oi,txError:l,executeLiquidStake:Re,isJitoSOL:fn(g),isPSOL:$t(g)}};i();a();var $o=M(I());var Vi=({onLiquidStake:e,onNativeStake:t})=>{let o=go,{avgValidatorApy:n,activeProvider:r}=Pe(it.Solana.Mainnet);return{options:(0,$o.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:P.t("stakeMethodSelectionLiquidStakingTitle"),description:P.t("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:r?.stakePoolTokenMetadata?.metadata?.symbol}),apy:r?P.t("stakeMethodEstApy",{apy:Le(parseFloat(r.apy))}):null,onClick:e??(()=>{})},{type:"native",isRecommended:!1,title:P.t("stakeMethodSelectionNativeStakingTitle"),description:P.t("stakeMethodSelectionNativeStakingDescription"),apy:n?P.t("stakeMethodEstApy",{apy:Le(n)}):null,onClick:t}],[n,r,e,t]),learnMoreLink:o}};i();a();var yt=M(I());i();a();i();a();var Xo=new Error("Failed to fetch recommended staking validators.");async function Zo(){try{let e=await Ae.api().get("/staking/v1/recommended");if(!be(e))throw Xo;let t=e.data;return Ao.parse(t).validators}catch{throw Xo}}var Ln=()=>{let e=_.recommendedValidators();return q({enabled:!0,queryKey:e,gcTime:dt.Long,staleTime:1/0,async queryFn(){return Zo()}})};function Ki(){let{connection:e}=W(),t=ze(e),{results:o=[]}=t,n=Ln(),{data:r=null,isFetched:s}=_n(),l=oo.isFeatureEnabled("kill-phantom-validator"),[u,c]=(0,yt.useState)(""),d=ro(u),p=(0,yt.useMemo)(()=>{let h=o.map(T=>({...T,totalApy:r?vo(r,T?.commission):null})),w=n.data??[];if(w.length===0)return h;let D=h.sort(ho(w));return l?D.filter(T=>T.identityPubkey!==To.identityPublicKey):D},[o,n.data,r,l]),m=io(p,d||"",So),f=(0,yt.useCallback)(()=>{t.isError&&!t.isFetching&&t.refetch(),n.isError&&!n.isFetching&&n.refetch()},[n,t]),k=!t.isFetched||!s||!n.isFetched,g=t.isError||n.isError,y=t.isSuccess;return{isLoading:k,isSuccess:y,hasError:g,searchResults:m,showApy:r!==null,onRefetch:f,searchTerm:u,setSearchTerm:c}}i();a();i();a();var xr=M(I());i();a();i();a();i();a();var Rr=M(qr());i();a();var Lr=M(Yr()),os=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],Tn=e=>{let t=`${String.fromCharCode(...os)}||${e}`,o=no(Buffer.from(t));return Lr.default.encode(o)};var $n=async({connection:e,stakePoolAddress:t,ownerAddress:o,validatorVoteAddress:n,stakeAccountAddress:r,poolTokenAccountAddress:s})=>{let l=new A.PublicKey(t),u=new A.PublicKey(o),c=new A.PublicKey(n),d=new A.PublicKey(r),p=s?new A.PublicKey(s):void 0,m=new A.PublicKey(Tn(o)),{instructions:f,signers:k}=await(0,Rr.depositStake)(e,u,l,u,c,d,p,[{pubkey:m,isSigner:!1,isWritable:!1}]),g=(await e.getLatestBlockhash("confirmed")).blockhash,y=new ne.VersionedTransaction(new ne.TransactionMessage({instructions:f,payerKey:u,recentBlockhash:g}).compileToV0Message());return{transaction:await le(y,{connection:Kt(it.Solana.Mainnet),calculators:{cost:Wt,budget:new jt(2e5,2e5)}}),signers:k}};i();a();var Xn=async({connection:e,stakePoolAddress:t,ownerAddress:o,amount:n,poolTokenAccountAddress:r})=>{let s=new A.PublicKey(t),l=new A.PublicKey(o),u=r?new A.PublicKey(r):void 0,c=new A.PublicKey(Tn(o)),{instructions:d,signers:p}=await wo(e,s,l,n,u,c),m=(await e.getLatestBlockhash("confirmed")).blockhash,f=new ne.VersionedTransaction(new ne.TransactionMessage({instructions:d,payerKey:l,recentBlockhash:m}).compileToV0Message());return{transaction:await le(f,{connection:Kt(it.Solana.Mainnet),calculators:{cost:Wt,budget:new jt(2e5,2e5)}}),signers:p}};var Nr=e=>{let t=_.getConvertStakeTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,validatorVoteAddress:e.validatorVoteAddress,stakeAccountAddress:e.stakeAccountAddress,poolTokenAccountAddress:e.poolTokenAccountAddress}),o=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.validatorVoteAddress&&!!e.stakeAccountAddress;return q({enabled:o,queryKey:t,staleTime:1/0,async queryFn(){if(v.isSolanaNetworkID(e.networkId)){let{transaction:n,signers:r}=await $n(e);return{networkID:e.networkId,transaction:n,signers:r}}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};i();a();var Fr=M(I());i();a();var Br=(e,t)=>{let o=[],n=e?Ke(e):void 0,r=ao(t?.stakePoolTokenMetadata.caip19??"");return n&&r&&(o.push(n),o.push(r)),{query:{data:o}}};i();a();var Zn=M(I());var rs=(e,t)=>{if(t===void 0)return;let o=Ke(e),n=at(o);return t[n]},is=(e,t)=>{if(!t)return C(0);let o=new C(t.convertRatio);return oe(e,t.stakePoolTokenMetadata.metadata.decimals).div(o)},as=(e,t,o)=>{if(!e)return null;let n=oe(t,e.data.decimals),r=rs(e,o),s=r?.usd?n.multipliedBy(r.usd):null;return{amount:je(n),amountUsd:s?s.toNumber():null,border:!1,logoUri:e.data.logoUri??null,network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:e.type??"SolanaNative",title:P.t("liquidStakeReviewYouPay")}},ss=(e,t,o,n)=>{if(!t||!e)return null;let r=is(o,t),s=n?n[t.stakePoolTokenMetadata.caip19]:void 0,l=s?.usd?r.multipliedBy(s.usd):null;return{amount:je(r),amountUsd:l?l.toNumber():null,border:!1,network:{id:t.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},logoUri:t.stakePoolTokenMetadata.metadata.logoURI??null,symbol:t.stakePoolTokenMetadata.metadata.symbol,title:P.t("liquidStakeReviewYouReceive"),tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}},Er=({process:e,fungibleToStake:t,amount:o,provider:n,selectedChainAddress:r,transactionFees:s,isLoading:l,canSubmit:u,priceMap:c,networkFeeErrorMsg:d})=>{let p=(0,Zn.useMemo)(()=>as(t,o,c),[t,o,c]),m=(0,Zn.useMemo)(()=>ss(t,n,o,c),[t,n,o,c]),f=n?.name??"",k=r?.address??"",g=n?.apy!==void 0?Le(Number.parseFloat(n.apy)):"",y=`${je(oe(s,t?.data.decimals??0))} ${t?.data.symbol}`,h=fn(n),w=$t(n),D=P.t("stakeReviewAccount"),T=P.t("liquidStakeReviewProvider"),E=P.t("stakeReviewAPY"),me=P.t("stakeReviewAPYTooltip"),R=P.t("liquidStakeReviewNetworkFee"),K=P.t(e==="convert"?"commandConvert":"commandStake");return{process:e,payAsset:p,receiveAsset:m,account:k,providerName:f,apy:g,networkFee:y,accountLabelText:D,providerLabelText:T,apyLabelText:E,apyLabelTextTooltip:me,networkFeeLabelText:R,primaryButtonText:K,isLoading:l,canSubmit:u,networkFeeErrorMsg:d,isJitoSOL:h,isPSOL:w}};i();a();var Ur=M(I());var us=rt({seconds:10}),Or=({hasPoolTokenAccount:e,chainAddress:t,transactionData:o})=>{let{data:n,isPending:r,isFetched:s,isSuccess:l}=lo({networkID:o?.networkID??v.solana.mainnetID,multichainTransaction:ls(o),queryOptions:{refetchInterval:us}}),{data:u=0}=ut(t),c=G(lt).plus(G(xe).multipliedBy(ct)),d=e?G(c):G(u).plus(c),{hasSufficientFunds:p,isLoading:m,nativeTokenSymbol:f}=fo({networkID:o?.networkID??v.solana.mainnetID,addressType:t?.addressType,gasEstimation:n,transactionValue:d}),k=ds({hasSufficientFunds:p,hasGasEstimationFailed:s&&!l,nativeTokenSymbol:f}),g=cs(n),y=d.plus(g),h=r||m;return(0,Ur.useMemo)(()=>({isLoading:h,hasSufficientFunds:p,transactionFees:y,networkFeeErrorMsg:k,nativeTokenSymbol:f}),[h,p,y,k,f])},cs=e=>e?v.isSolanaNetworkID(e.networkID)?new G(e.value):new G(0):new G(0),ls=e=>{if(e&&v.isSolanaNetworkID(e.networkID)){let{networkID:t,transaction:o}=e;return{networkID:t,transaction:[o]}}},ds=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:o})=>t?P.t("transactionGasEstimationError"):e==="insufficient"?P.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0;var Dn=({process:e,transactionData:t,isLoadingTransactionData:o})=>{let n=b(D=>D.provider),r=b(D=>D.fungibleToStake),s=b(D=>D.amount),{data:l}=B("solana"),{fungible:u,isLoadingTokens:c}=H({key:n?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:d,hasSufficientFunds:p,transactionFees:m,networkFeeErrorMsg:f}=Or({hasPoolTokenAccount:!!u,chainAddress:l,transactionData:t}),k=(0,Fr.useMemo)(()=>Br(r,n),[r,n]),{data:g}=po(k),y=o||d||c;return Er({process:e,fungibleToStake:r,amount:s,provider:n,selectedChainAddress:l,transactionFees:m,isLoading:y,canSubmit:!y&&!!t&&p!=="insufficient"&&!f,priceMap:g,networkFeeErrorMsg:f})};var ps=e=>{let{data:t}=B("solana"),{trackConvertApprovedByUser:o}=fe(),n=b(g=>g.convert),r=b(g=>g.provider),s=b(g=>g.amount),l=b(g=>g.setTransactionData),{connection:u}=W(),{fungible:c}=H({key:r?.stakePoolTokenMetadata.metadata.address||""}),d=c?Ht(c):void 0,{data:p,isLoading:m}=Nr({connection:u,networkId:r?.chainId??v.solana.mainnetID,stakePoolAddress:r?.stakePoolAddress??"",ownerAddress:t?.address??"",validatorVoteAddress:n?.validatorVote??"",stakeAccountAddress:n?.stakeAccount??"",poolTokenAccountAddress:d}),f=Dn({process:"convert",transactionData:p,isLoadingTransactionData:m}),k=(0,xr.useCallback)(()=>{o({provider:r,convertDetails:n,amount:s,fromAmount:f.payAsset?.amount,toAmount:f.receiveAsset?.amount,fromAmountUSD:f.payAsset?.amountUsd,toAmountUSD:f.receiveAsset?.amountUsd}),l(p),e()},[e,l,p,o,n,r,f,s]);return{...f,onPrimaryButtonPress:k}};i();a();var Cn=M(I());var ms=({fungible:e,goToConvertStake:t})=>{let{connection:o}=W(),{data:n}=B("solana"),{isLoading:r}=tn(o,n?.address??""),{trackConvertBannerClicked:s,trackConvertBannerSeen:l}=fe(),{isLoading:u,isSupported:c,initLiquidStake:d,activeProvider:p}=an(e),{hasConvertibleStakeAccounts:m}=ft(p),k=!(r||u)&&c&&m,g=(0,Cn.useCallback)(()=>{if(!k)throw new Error("Not eligible to convert stake");s(),d(),t()},[k,s,d,t]);return(0,Cn.useEffect)(()=>{k&&l()},[k]),{title:P.t("convertStakeBannerTitle"),canConvertStake:k,onPress:g}};i();a();var Kr=M(I());i();a();var Vr=e=>{let t=_.getMintTokenTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,amount:e.amount,poolTokenAccountAddress:e.poolTokenAccountAddress}),o=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.amount;return q({enabled:o,queryKey:t,staleTime:1/0,async queryFn(){if(v.isSolanaNetworkID(e.networkId))try{let{transaction:n,signers:r}=await Xn(e);return{networkID:e.networkId,transaction:n,signers:r}}catch(n){throw Q.captureError(n,"staking"),n}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};var fs=e=>{let t=b(k=>k.provider),o=b(k=>k.amount),n=b(k=>k.setTransactionData),{data:r}=B("solana"),{connection:s}=W(),{fungible:l}=H({key:t?.stakePoolTokenMetadata.metadata.address||""}),u=l?Ht(l):void 0,{trackMintApprovedByUser:c}=qt(),{data:d,isPending:p}=Vr({amount:G(o).toNumber(),connection:s,networkId:t?.chainId??v.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:r?.address??"",poolTokenAccountAddress:u}),m=Dn({process:"mint",transactionData:d,isLoadingTransactionData:p}),f=(0,Kr.useCallback)(()=>{c({provider:t,payAmount:m.payAsset?.amount,receiveAmount:m.receiveAsset?.amount,payAmountUSD:m.payAsset?.amountUsd,receiveAmountUSD:m.receiveAsset?.amountUsd,payAssetTitle:m.payAsset?.title,receiveAssetTitle:m.receiveAsset?.title,providerName:m.providerName}),n(d),e()},[c,t,m.payAsset?.amount,m.payAsset?.amountUsd,m.payAsset?.title,m.receiveAsset?.amount,m.receiveAsset?.amountUsd,m.receiveAsset?.title,m.providerName,n,d,e]);return{...m,onPrimaryButtonPress:f}};i();a();var jr=M(I());function Ss(e){return typeof e=="string"?e:e?at(Ke(e)):""}var ks=e=>{let t=Ss(e),{data:[o]}=xt(["enable-psol-staking"]),{data:n={}}=rn(),r=(0,jr.useMemo)(()=>!!Object.values(n).flat().find(l=>l.stakePoolTokenMetadata.caip19===t),[t,n]);return t===Gt?o&&r:r};i();a();var Wr=M(I());var gs=({method:e,goToInfoPage:t,goToInitFlowPage:o})=>{let{usageState:n}=kt();return(0,Wr.useCallback)(()=>{n[e]?o():t()},[t,o,e,n])};i();a();var zr=M(I());i();a();var ke=M(I());i();a();var ys=1,Gr=({caip19:e,networkID:t})=>{let{data:o}=mo({encodedCaip19:e,legacyKey:null}),{data:n}=B(t),{data:r=0}=ut(n),s=v.getAddressType(t),l=Qt(t,s),{fungible:u}=H({key:l}),c=C(o?.totalQuantityString??""),d=C(ys),p=C(c),m=C.max(p,0),f=C(lt).plus(C(xe).multipliedBy(ct)),k=C(r),g=C(k).plus(f),y=C(u?.data.amount??"");return{minAmount:d,maxAmount:m,balance:c,minNativeBalance:g,nativeBalance:y}};var As=({goBack:e,goToStatusPage:t,lstCaip19:o})=>{let n=b(O=>O.provider),r=b(O=>O.amount),s=b(O=>O.setAmount),l=n?.stakePoolTokenMetadata.metadata,u=l?.symbol??"",c=l?.decimals??0,[d,p]=(0,ke.useState)(r?Ft(r,c):""),{data:m}=B("solana"),{initLiquidStake:f}=Pe(v.solana.mainnetID);(0,ke.useEffect)(()=>{f(void 0,o)},[f,o]),Xt(m,"STAKE_FUNGIBLE");let{minAmount:k,maxAmount:g,balance:y,nativeBalance:h,minNativeBalance:w}=Gr({caip19:o??"",networkID:v.solana.mainnetID}),D=oe(g,c),T=oe(k,c),E=oe(y,c),me=oe(w,v.getTokenDecimals(v.solana.mainnetID)),R=Ot(d,c).toString(),K=C(R),Je=K.isLessThan(k),_e=K.isGreaterThan(g),$e=K.isFinite(),Xe=h.isLessThan(w),Re=R&&Je?P.t("unstakeLiquidStakeAmountMinRequired",{symbol:u,amount:T}):R&&_e?P.t("unstakeLiquidStakeAmountInsufficientBalance"):R&&Xe?P.t("unstakeLiquidStakeAmountInsufficientNativeBalance",{symbol:v.getTokenSymbol(v.solana.mainnetID),amount:me}):void 0,Ze=$e&&!Re,et=(0,ke.useMemo)(()=>{if(!n)return;let O=Le(Number.parseFloat(n.apy)),{address:L,name:ge,symbol:Ee,logoURI:nt}=n.stakePoolTokenMetadata.metadata,ot=C(1).dividedBy(C(n.convertRatio)),Nt=`1 ${u} \u2248 ${je(ot)} ${Ee}`;return{identifier:L,apy:O,name:ge,symbol:Ee,rate:Nt,logoURI:nt}},[n,u]),Ne=(0,ke.useCallback)(()=>{p(String(D))},[D]),qe=(0,ke.useCallback)(O=>{let L=Ut(O);Jt(L,c??9)&&p(L)},[c]),Be=(0,ke.useCallback)(()=>{s(R),t(R)},[R,t,s]),U=(0,ke.useCallback)(()=>{s(""),e()},[s,e]);return{amount:d,amountError:Re,balance:E,symbol:u,poolToken:et,canSubmit:Ze,onBack:U,onContinue:Be,onChangeAmount:qe,onSetMax:Ne}};i();a();var Mn=M(I());i();a();i();a();export{Xr as a,Zr as b,ei as c,ni as d,ri as e,ai as f,tn as g,pi as h,_n as i,fi as j,gi as k,fe as l,vi as m,ft as n,Pe as o,Di as p,ps as q,Ri as r,ms as s,qt as t,Ui as u,fs as v,xi as w,ks as x,gs as y,Vi as z,Ki as A,As as B};
//# sourceMappingURL=chunk-UMB7TYLX.js.map
