import{$b as vr,$c as Fr,A as Ne,Ad as dt,B as lr,Ba as dr,C as mr,D as Be,Da as pr,Fb as Le,Fc as Qe,Jc as Pr,Kb as wr,Kc as lt,Mb as Er,Nb as xr,Ob as Ve,Ua as fr,Wa as gr,Xa as yr,Xc as xe,Yb as Ke,Zb as $,Zc as ve,ac as kr,bb as Ar,id as Ir,mb as Ce,nd as mt,ob as br,pb as Tr,rb as hr,tb as Sr,uc as Cr,y as cr,z as ur}from"./chunk-EIQDOUTB.js";import{U as ar,a as at,c as ct,j as ut,x as sr}from"./chunk-O3RSUGZX.js";import{s as io}from"./chunk-65FAE5DM.js";import{K as $t,L as z,Tc as ge,Ua as rr,Ya as N,Zd as Ee,bb as nr,c as oo,cb as or,db as Te,eb as ie,hb as he,r as so,sb as De,wd as ce,yc as _e}from"./chunk-D7Z6MPRS.js";import{n as jt}from"./chunk-NZAWO25Q.js";import{g as ne,j as fe}from"./chunk-E2H5RB2U.js";import{j as ae,s as ir}from"./chunk-27TD4NX4.js";import{w as se}from"./chunk-YJV3X2ON.js";import{D,p as Ht,q as zt,r as Jt,s as Yt,u as J,w as oe,z as Y}from"./chunk-FBDT5S2M.js";import{B as er,a as L,aa as tr,k as Zt,w as M,z as Xt}from"./chunk-TKSJVOQZ.js";import{a as W,b as pe,h as m}from"./chunk-UA6ADLWZ.js";import{c as no,f as _,h as s,i as p,m as Buffer,n as i}from"./chunk-3KENBVE7.js";var An=no((Ut,yn)=>{s();i();(function(e,t){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],t);else if(typeof Ut<"u")t(yn);else{var r={exports:{}};t(r),e.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ut,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let t="The message port closed before a response was received.",r=n=>{let o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(x,P=void 0){super(P),this.createItem=x}get(x){return this.has(x)||this.set(x,this.createItem(x)),super.get(x)}}let l=S=>S&&typeof S=="object"&&typeof S.then=="function",d=(S,x)=>(...P)=>{n.runtime.lastError?S.reject(new Error(n.runtime.lastError.message)):x.singleCallbackArg||P.length<=1&&x.singleCallbackArg!==!1?S.resolve(P[0]):S.resolve(P)},u=S=>S==1?"argument":"arguments",c=(S,x)=>function(F,...B){if(B.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${u(x.minArgs)} for ${S}(), got ${B.length}`);if(B.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${u(x.maxArgs)} for ${S}(), got ${B.length}`);return new Promise((q,K)=>{if(x.fallbackToNoCallback)try{F[S](...B,d({resolve:q,reject:K},x))}catch(g){console.warn(`${S} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,g),F[S](...B),x.fallbackToNoCallback=!1,x.noCallback=!0,q()}else x.noCallback?(F[S](...B),q()):F[S](...B,d({resolve:q,reject:K},x))})},f=(S,x,P)=>new Proxy(x,{apply(F,B,q){return P.call(B,S,...q)}}),y=Function.call.bind(Object.prototype.hasOwnProperty),b=(S,x={},P={})=>{let F=Object.create(null),B={has(K,g){return g in S||g in F},get(K,g,A){if(g in F)return F[g];if(!(g in S))return;let T=S[g];if(typeof T=="function")if(typeof x[g]=="function")T=f(S,S[g],x[g]);else if(y(P,g)){let w=c(g,P[g]);T=f(S,S[g],w)}else T=T.bind(S);else if(typeof T=="object"&&T!==null&&(y(x,g)||y(P,g)))T=b(T,x[g],P[g]);else if(y(P,"*"))T=b(T,x[g],P["*"]);else return Object.defineProperty(F,g,{configurable:!0,enumerable:!0,get(){return S[g]},set(w){S[g]=w}}),T;return F[g]=T,T},set(K,g,A,T){return g in F?F[g]=A:S[g]=A,!0},defineProperty(K,g,A){return Reflect.defineProperty(F,g,A)},deleteProperty(K,g){return Reflect.deleteProperty(F,g)}},q=Object.create(S);return new Proxy(q,B)},h=S=>({addListener(x,P,...F){x.addListener(S.get(P),...F)},hasListener(x,P){return x.hasListener(S.get(P))},removeListener(x,P){x.removeListener(S.get(P))}}),C=new a(S=>typeof S!="function"?S:function(P){let F=b(P,{},{getContent:{minArgs:0,maxArgs:0}});S(F)}),O=new a(S=>typeof S!="function"?S:function(P,F,B){let q=!1,K,g=new Promise(k=>{K=function(E){q=!0,k(E)}}),A;try{A=S(P,F,K)}catch(k){A=Promise.reject(k)}let T=A!==!0&&l(A);if(A!==!0&&!T&&!q)return!1;let w=k=>{k.then(E=>{B(E)},E=>{let I;E&&(E instanceof Error||typeof E.message=="string")?I=E.message:I="An unexpected error occurred",B({__mozWebExtensionPolyfillReject__:!0,message:I})}).catch(E=>{console.error("Failed to send onMessage rejected reply",E)})};return w(T?A:g),!0}),G=({reject:S,resolve:x},P)=>{n.runtime.lastError?n.runtime.lastError.message===t?x():S(new Error(n.runtime.lastError.message)):P&&P.__mozWebExtensionPolyfillReject__?S(new Error(P.message)):x(P)},H=(S,x,P,...F)=>{if(F.length<x.minArgs)throw new Error(`Expected at least ${x.minArgs} ${u(x.minArgs)} for ${S}(), got ${F.length}`);if(F.length>x.maxArgs)throw new Error(`Expected at most ${x.maxArgs} ${u(x.maxArgs)} for ${S}(), got ${F.length}`);return new Promise((B,q)=>{let K=G.bind(null,{resolve:B,reject:q});F.push(K),P.sendMessage(...F)})},te={devtools:{network:{onRequestFinished:h(C)}},runtime:{onMessage:h(O),onMessageExternal:h(O),sendMessage:H.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:H.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},re={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":re},services:{"*":re},websites:{"*":re}},b(n,te,o)};e.exports=r(chrome)}})});s();i();s();i();s();i();s();i();var Di="userExplorerPreferenceV2";s();i();s();i();var zi="isAnalyticsOptedOut";s();i();s();i();s();i();s();i();var Rr=e=>{let{accountIdentifier:t,autoConfirmEnabled:r=!1,trustedAppsByAccount:n}=e;if(!t||!n)return;let o=Object.values(n),a=[],l=[];r?(o.forEach(u=>{u.autoConfirm&&sr(u.autoConfirm)?a.push(u):l.push(u)}),a.sort((u,c)=>(c.autoConfirm?.sessionStartTime??0)-(u.autoConfirm?.sessionStartTime??0))):l=o;let d=Xt(l.map(u=>{let c=u.lastConnectedTimestamp??0;return{timestamp:c,data:{...u,lastConnectedTimestamp:c}}}));return{autoConfirmEnabledApps:a,timeBucketedApps:d}};s();i();var Mr=(e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;let r=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return er(r).format("h:mm A")};s();i();var fo=0;function v(e,t){let r=`atom${++fo}`,n={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof e=="function"?n.read=e:(n.init=e,n.read=go,n.write=yo),t&&(n.write=t),n}function go(e){return e(this)}function yo(e,t,r){return t(this,typeof r=="function"?r(e(this)):r)}var Ur=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,At=e=>"init"in e,yt=e=>!!e.write,qe=new WeakMap,bt=e=>{var t;return Tt(e)&&!((t=qe.get(e))!=null&&t[1])},Ao=(e,t)=>{let r=qe.get(e);if(r)r[1]=!0,r[0].forEach(n=>n(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},bo=e=>{if(qe.has(e))return;let t=[new Set,!1];qe.set(e,t);let r=()=>{t[1]=!0};e.then(r,r),e.onCancel=n=>{t[0].add(n)}},Tt=e=>typeof e?.then=="function",Dr=e=>"v"in e||"e"in e,We=e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},_r=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},To=(e,t,r,n)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&r===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(r,n.n),bt(t.v)&&_r(e,t.v,n),(o=n.m)==null||o.t.add(e)},ho=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Nr=(...e)=>{let[t,r,n,o,a,l]=e,d=g=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!g)throw new Error("Atom is undefined or null");let A=t(g);return A||(A={d:new Map,p:new Set,n:0},r(g,A),a?.(g,K)),A},u=new WeakMap,c=new Map,f=new Set,y=new Set,b=()=>{var g;let A=[],T=w=>{try{w()}catch(k){A.push(k)}};do{(g=K[ho])==null||g.call(K);let w=new Set,k=w.add.bind(w);c.forEach(E=>{var I;return(I=E.m)==null?void 0:I.l.forEach(k)}),c.clear(),f.forEach(k),f.clear(),y.forEach(k),y.clear(),w.forEach(T),c.size&&te()}while(c.size||f.size||y.size);if(A.length)throw A[0]},h=(g,A,T)=>{let w="v"in A,k=A.v,E=bt(A.v)?A.v:null;if(Tt(T)){bo(T);for(let I of A.d.keys())_r(g,T,d(I));A.v=T}else A.v=T;delete A.e,(!w||!Object.is(k,A.v))&&(++A.n,E&&Ao(E,T))},C=g=>{var A;let T=d(g);if(Dr(T)&&(T.m&&u.get(g)!==T.n||Array.from(T.d).every(([R,le])=>C(R).n===le)))return T;T.d.clear();let w=!0,k=()=>{T.m&&(x(g,T),te(),b())},E=R=>{if(Ur(g,R)){let it=d(R);if(!Dr(it))if(At(R))h(R,it,R.init);else throw new Error("no atom init");return We(it)}let le=C(R);try{return We(le)}finally{To(g,T,R,le),w||k()}},I,U,j={get signal(){return I||(I=new AbortController),I.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!yt(g)&&console.warn("setSelf function cannot be used with read-only atom"),!U&&yt(g)&&(U=(...R)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&w&&console.warn("setSelf function cannot be called in sync"),!w)return S(g,...R)}),U}};try{let R=n(g,E,j);return h(g,T,R),Tt(R)&&((A=R.onCancel)==null||A.call(R,()=>I?.abort()),R.then(k,k)),T}catch(R){return delete T.v,T.e=R,++T.n,T}finally{w=!1}},O=g=>We(C(g)),G=g=>{var A;let T=new Map;for(let w of((A=g.m)==null?void 0:A.t)||[]){let k=d(w);k.m&&T.set(w,k)}for(let w of g.p)T.set(w,d(w));return T},H=g=>{let A=[g];for(;A.length;){let T=A.pop();for(let[w,k]of G(T))u.has(w)||(u.set(w,k.n),A.push(k))}},te=()=>{var g;let A=[],T=new WeakSet,w=new WeakSet,k=Array.from(c);for(;k.length;){let[E,I]=k[k.length-1];if(w.has(E)){k.pop();continue}if(T.has(E)){u.get(E)===I.n?A.push([E,I,I.n]):(u.delete(E),c.set(E,I)),w.add(E),k.pop();continue}T.add(E);for(let[U,j]of G(I))T.has(U)||k.push([U,j])}for(let E=A.length-1;E>=0;--E){let[I,U,j]=A[E],R=!1;for(let le of U.d.keys())if(le!==I&&c.has(le)){R=!0;break}R&&(C(I),x(I,U),j!==U.n&&(c.set(I,U),(g=U.u)==null||g.call(U))),u.delete(I)}},re=(g,...A)=>{let T=!0,w=E=>We(C(E)),k=(E,...I)=>{var U;let j=d(E);try{if(Ur(g,E)){if(!At(E))throw new Error("atom not writable");let R=j.n,le=I[0];h(E,j,le),x(E,j),R!==j.n&&(c.set(E,j),(U=j.u)==null||U.call(j),H(j));return}else return re(E,...I)}finally{T||(te(),b())}};try{return o(g,w,k,...A)}finally{T=!1}},S=(g,...A)=>{try{return re(g,...A)}finally{te(),b()}},x=(g,A)=>{var T;if(A.m&&!bt(A.v)){for(let[w,k]of A.d)if(!A.m.d.has(w)){let E=d(w);P(w,E).t.add(g),A.m.d.add(w),k!==E.n&&(c.set(w,E),(T=E.u)==null||T.call(E),H(E))}for(let w of A.m.d||[])if(!A.d.has(w)){A.m.d.delete(w);let k=F(w,d(w));k?.t.delete(g)}}},P=(g,A)=>{var T;if(!A.m){C(g);for(let w of A.d.keys())P(w,d(w)).t.add(g);if(A.m={l:new Set,d:new Set(A.d.keys()),t:new Set},(T=A.h)==null||T.call(A),yt(g)){let w=A.m,k=()=>{let E=!0,I=(...U)=>{try{return re(g,...U)}finally{E||(te(),b())}};try{let U=l(g,I);U&&(w.u=()=>{E=!0;try{U()}finally{E=!1}})}finally{E=!1}};y.add(k)}}return A.m},F=(g,A)=>{var T;if(A.m&&!A.m.l.size&&!Array.from(A.m.t).some(w=>{var k;return(k=d(w).m)==null?void 0:k.d.has(g)})){let w=A.m.u;w&&f.add(w),delete A.m,(T=A.h)==null||T.call(A);for(let k of A.d.keys()){let E=F(k,d(k));E?.t.delete(g)}return}return A.m},K={get:O,set:S,sub:(g,A)=>{let T=d(g),k=P(g,T).l;return k.add(A),b(),()=>{k.delete(A),F(g,T),b()}},unstable_derive:g=>Nr(...g(...e))};return K},So=e=>{let t=new Set,r,n=0,o=e.unstable_derive((...d)=>{let[u,c,,f]=d;return r=u,d[1]=function(b,h){c(b,h);let C=h.h;h.h=()=>{C?.(),h.m?t.add(b):t.delete(b)}},d[3]=function(b,h,C,...O){return n?C(b,...O):f(b,h,C,...O)},d}),a=o.set;return Object.assign(o,{dev4_get_internal_weak_map:()=>({get:d=>{let u=r(d);if(!(!u||u.n===0))return u}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:d=>{a({read:()=>null,write:(c,f)=>{++n;try{for(let[y,b]of d)At(y)&&f(y,b)}finally{--n}}})}})},ht=()=>{let e=new WeakMap,t=Nr(r=>e.get(r),(r,n)=>e.set(r,n).get(r),(r,...n)=>r.read(...n),(r,...n)=>r.write(...n),(r,...n)=>{var o;return(o=r.unstable_onInit)==null?void 0:o.call(r,...n)},(r,...n)=>{var o;return(o=r.onMount)==null?void 0:o.call(r,...n)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?So(t):t},Pe,Br=()=>(Pe||(Pe=ht(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=Pe),globalThis.__JOTAI_DEFAULT_STORE__!==Pe&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),Pe);s();i();var V=_(W(),1);var Vr=(0,V.createContext)(void 0),Kr=e=>{let t=(0,V.useContext)(Vr);return e?.store||t||Br()},fc=({children:e,store:t})=>{let r=(0,V.useRef)(void 0);return!t&&!r.current&&(r.current=ht()),(0,V.createElement)(Vr.Provider,{value:t||r.current},e)},wt=e=>typeof e?.then=="function",Qr=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},wo=V.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(Qr(e),e)}),St=new WeakMap,Lr=e=>{let t=St.get(e);return t||(t=new Promise((r,n)=>{let o=e,a=u=>c=>{o===u&&r(c)},l=u=>c=>{o===u&&n(c)},d=u=>{"onCancel"in u&&typeof u.onCancel=="function"&&u.onCancel(c=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&c===u)throw new Error("[Bug] p is not updated even after cancelation");wt(c)?(St.set(c,t),o=c,c.then(a(c),l(c)),d(c)):r(c)})};e.then(a(e),l(e)),d(e)}),St.set(e,t)),t};function we(e,t){let r=Kr(t),[[n,o,a],l]=(0,V.useReducer)(c=>{let f=r.get(e);return Object.is(c[0],f)&&c[1]===r&&c[2]===e?c:[f,r,e]},void 0,()=>[r.get(e),r,e]),d=n;(o!==r||a!==e)&&(l(),d=r.get(e));let u=t?.delay;if((0,V.useEffect)(()=>{let c=r.sub(e,()=>{if(typeof u=="number"){let f=r.get(e);wt(f)&&Qr(Lr(f)),setTimeout(l,u);return}l()});return l(),c},[r,e,u]),(0,V.useDebugValue)(d),wt(d)){let c=Lr(d);return wo(c)}return d}function Eo(e,t){let r=Kr(t);return(0,V.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return r.set(e,...o)},[r,e])}function gc(e,t){return[we(e,t),Eo(e,t)]}s();i();var vo=m.object({data:m.string(),from:m.string(),to:m.string()}),ko=m.object({transaction:vo});async function Co({caip19:e,amount:t,owner:r}){let n=await ne.api().post("/tokens/v1/unwrap",{owner:r,caip19:e,amount:t.toNumber()}),o=ko.safeParse(n.data);if(!o.success){let{error:a}=o;throw D.captureError(a,"fungibles"),new Ke(`Failed to get unwrap transaction: ${a.message}`)}return o.data.transaction}var Po=({caip19:e,amount:t,owner:r})=>Y({gcTime:Ve.Medium,staleTime:1/0,enabled:r!==""&&t.isGreaterThan(0),queryKey:$.unwrapTransaction({caip19:e,amount:t,owner:r}),async queryFn(){return await Co({caip19:e,amount:t,owner:r})}});s();i();s();i();var Fo="25.13.0",Ie=`fungible-tokens-${Fo}`,Gr=[Ie,"token-updates"],Wr=[Ie,"portfolio-value"],Io=[Ie,"token-balance"],Oo=[Ie,"infinite-token-balances"],Ro=[Ie,"visibility-overrides"],Z={infiniteTokenBalances:({walletCaip19s:e})=>[...Oo,{walletCaip19s:e}],tokenBalance:({wallets:e,encodedCaip19:t,isSplCompressed:r})=>{let n=e.map(o=>typeof o=="string"?o:ie({chainId:o.networkID,address:o.address,resourceType:"address"})).sort();return[...Io,{walletCaip19s:n,encodedCaip19:t,isSplCompressed:r}]},tokenUpdates:({walletCaip19s:e,from:t})=>[...Gr,{walletCaip19s:e,from:t}],portfolioValue:({walletCaip19s:e,include:t,exclude:r,isMainnet:n})=>[...Wr,{walletCaip19s:e,include:t,exclude:r,isMainnet:n}],visibilityOverrides:({accountId:e})=>[...Ro,{accountId:e}]};function Mo(){let e=se(),t=_e(),r=J();return oe({async mutationFn({accountId:n,mutations:o}){await kr(e,t,{accountId:n,mutations:o})},async onSuccess(n,o){await Promise.all([r.invalidateQueries({queryKey:$.hiddenMints(o.accountId)}),r.invalidateQueries({queryKey:Z.visibilityOverrides({accountId:o.accountId})})])}})}s();i();var Ct=_(io());s();i();s();i();var Q=[];for(let e=0;e<256;++e)Q.push((e+256).toString(16).slice(1));function qr(e,t=0){return(Q[e[t+0]]+Q[e[t+1]]+Q[e[t+2]]+Q[e[t+3]]+"-"+Q[e[t+4]]+Q[e[t+5]]+"-"+Q[e[t+6]]+Q[e[t+7]]+"-"+Q[e[t+8]]+Q[e[t+9]]+"-"+Q[e[t+10]]+Q[e[t+11]]+Q[e[t+12]]+Q[e[t+13]]+Q[e[t+14]]+Q[e[t+15]]).toLowerCase()}s();i();var Et,Uo=new Uint8Array(16);function xt(){if(!Et){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Et=self.crypto.getRandomValues.bind(self.crypto)}return Et(Uo)}s();i();s();i();var Do=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),vt={randomUUID:Do};function _o(e,t,r){if(vt.randomUUID&&!t&&!e)return vt.randomUUID();e=e||{};let n=e.random??e.rng?.()??xt();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return qr(n)}var kt=_o;s();i();var je={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new L(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},jr=class extends Error{constructor(t){super(t),this.name="SendFungibleFlowError"}};var $r={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:je,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Pt=Ee((e,t)=>({...(0,Ct.default)($r),resetSendSlice:()=>{let r=(0,Ct.default)($r);r.sendSessionId=kt(),e(r)},setAnalyticsRecipient:r=>{e({analyticsRecipient:r})},setSendFungibleKey:(r,n,o)=>{e({fungibleKey:r,splTokenAccount:n,encodedCaip19:o})},setSendFormValues:r=>{e({sendFormValues:r})},setInputAmount:r=>{let n=t();e({sendFormValues:{...n.sendFormValues,inputAmount:r}})},setShouldShowFiatValues:r=>{e({shouldShowFiatValues:r})},setRetryArgs:r=>{e({retryArgs:r})},setGasEstimation:r=>{e({gasEstimation:r})}}));s();i();var Hr={collectible:void 0,sendFormValues:je,shouldRequireAmount:!1},No=Ee(e=>({...Hr,resetSendSlice:()=>{e({...Hr})},setSendCollectible:t=>{e({collectible:t})},setSendFormValues:t=>{e({sendFormValues:t})},setShouldRequireAmount:t=>{e({shouldRequireAmount:t})}}));s();i();s();i();var Bo={query:""},Lo=Ee(e=>({...Bo,setQuery:t=>{e({query:t})}}));s();i();s();i();s();i();var $e=_(oo(),1),Jr=_(so(),1);var zr=(0,$e.struct)([(0,$e.u8)("instruction")]);function Yr(e,t,r,n=[],o=Ce){let a=Sr([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,n),l=Buffer.alloc(zr.span);return zr.encode({instruction:hr.CloseAccount},l),new Jr.TransactionInstruction({keys:a,programId:o,data:l})}var en=_(W());s();i();function Zr(e,t,r){return z.PublicKey.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],br)[0]}var Vo=new Ke("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function Ko(){let{connection:e}=Qe(),{data:t}=ce(),{solanaChainAddress:r,accountIdentifier:n}=(0,en.useMemo)(()=>({solanaChainAddress:t?.addresses.find(he),accountIdentifier:t?.identifier??""}),[t]),o=se(),a=ge(),{t:l}=ae();return oe({mutationFn:async()=>{if(!r)return Promise.reject("solanaChainAddress not loaded");let{networkID:d,address:u}=r,c=new z.PublicKey(u),f=Zr(c,Tr,Ce);if(!await e.getAccountInfo(f))throw Vo;let b=Yr(f,c,c,[],Ce),h=new $t.Transaction().add(b),C={ownerAddress:u,networkID:d,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:l("assetDetailUnwrappingSOL")}}}},O=await Le({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new z.PublicKey(u),pendingTransactionInput:C,storage:o,transaction:h,useSubmissionService:!1});return{networkID:d,id:O}}})}s();i();var tn=_(W());var Qo=()=>{let{connection:e}=Qe(),{data:t}=ce(),{solanaChainAddress:r,accountIdentifier:n}=(0,tn.useMemo)(()=>({solanaChainAddress:t?.addresses.find(he),accountIdentifier:t?.identifier??""}),[t]),o=se(),a=ge(),{t:l}=ae();return oe({mutationFn:async d=>{if(!r)throw new Error("solanaChainAddress not loaded");if(d.type!=="CompressedSPL")throw new Error("SPL is not compressed");let u=await wr({owner:d.data.walletAddress,mint:d.data.mintAddress,amount:d.data.amount,programId:d.data.programId,connection:e}),{networkID:c,address:f}=r,y={ownerAddress:f,networkID:c,data:{signature:""},type:"decompress",display:{summary:{topLeft:{text:l("assetDetailClaiming")}}}};await Le({accountIdentifier:n,accountSigner:a,connection:e,feePayer:new z.PublicKey(f),pendingTransactionInput:y,storage:o,transaction:u,useSubmissionService:!1})}})};s();i();var dn=_(W());s();i();s();i();var Go=v(null),He=Go;var Wo=v(e=>{let t=e(He);return t?t.addresses.map(r=>ie({chainId:r.networkID,address:r.address,resourceType:"address"})).sort():[]}),ke=Wo;s();i();s();i();s();i();var qo=e=>Fr(e)?.[0],Oe=qo;var jo=e=>N.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType==="nativeToken"?e.queriedWalletBalances.map(n=>{let o=De(e.decodedCaip19.chainId,n.address);return{...e,queriedWalletBalances:[n],totalQuantity:n.quantity,totalQuantityString:n.quantityString,walletAddress:n.address,legacyKey:xe.get(e.decodedCaip19.chainId).nativeTokenFungibleBalanceKey(e.decodedCaip19.chainId,o)}}):e,rn=e=>t=>t.flatMap(r=>{let n=e(r);return jo(n)}),$o=e=>{let{caip19:t,...r}=e,n=Te(t);return{...r,type:t.includes("/nativeToken:")?"native":"fungible",chainName:N.getChainName(n.chainId),encodedCaip19:t,decodedCaip19:n,legacyKey:Oe(n)}},Ho=e=>{let{caip19:t,timestamp:r,...n}=e,o=Te(t);return{...n,type:t.includes("/nativeToken:")?"native":"fungible",encodedCaip19:t,decodedCaip19:o,chainName:N.getChainName(o.chainId),timestamp:r??void 0,legacyKey:Oe(o),totalQuantity:e.postQuantity,totalQuantityString:e.postQuantityString}},nn=rn($o),on=rn(Ho);s();i();var zo=m.object({account:m.string(),quantity:m.number(),quantityString:m.string()}),Jo=m.object({address:m.string(),quantity:m.number(),quantityString:m.string(),lastTransferredDate:m.coerce.date().nullish(),subaccounts:m.array(zo).optional()}),Yo=m.object({price:m.number(),priceChange24h:m.number().optional(),lastUpdatedAt:m.coerce.date()}).nullish(),Zo=m.object({price:m.number(),priceChange24h:m.number().optional(),lastUpdatedAt:m.coerce.date()}),It={name:m.string().nullish(),symbol:m.string().nullish(),decimals:m.number(),spamStatus:m.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish(),logoUri:m.string().nullish(),price:Yo,livePrice:Zo.nullish().optional(),queriedWalletBalances:m.array(Jo),extraMetadata:m.object({compression:m.object({compressed:m.boolean()}).optional(),tokenProgram:m.string().nullish(),extensions:m.array(m.unknown()).nullish()}).optional()},ze=m.object({...It,type:m.enum(["native","fungible"]),totalQuantity:m.number(),totalQuantityString:m.string(),encodedCaip19:m.string(),decodedCaip19:or,chainName:m.string(),legacyKey:m.string().nullish(),timestamp:m.string().optional(),walletAddress:m.string().optional()}),Xo=m.object({...It,caip19:m.string(),totalQuantity:m.number(),totalQuantityString:m.string()}),an=m.object({items:m.array(Xo),cursor:m.string().nullish().default(null)}).transform(e=>{let{items:t,cursor:r,...n}=e;return{...n,nextCursor:r,tokens:t,updatedAt:Date.now()}}),es=m.object({...It,caip19:m.string(),timestamp:m.string().nullish(),postQuantityString:m.string(),postQuantity:m.number()}),cn=m.object({cursor:m.string().nullish().default(null),items:m.array(es)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),Wl=m.object({totalValueUsdCentsCurrent:m.number(),totalValueUsdStringCurrent:m.string(),totalValueUsdCents24h:m.number(),totalValueUsdString24h:m.string(),totalPercentChange24h:m.number()}),ql=m.object({totalValueUsdCentsCurrent:m.number().optional(),totalValueUsdStringCurrent:m.string().optional(),totalValueUsdCents24h:m.number().optional(),totalValueUsdString24h:m.string().optional(),totalPercentChange24h:m.number().optional()}),sn=m.object({caip19:m.string(),name:m.string(),symbol:m.string(),decimals:m.number(),logoUri:m.string().nullish().default(null),spamStatus:m.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish().transform(e=>e??"NOT_VERIFIED"),createdDate:m.coerce.date().nullish().default(null),extraMetadata:m.object({isMutable:m.boolean().nullish().default(null),creators:m.array(m.object({address:m.string(),share:m.number(),verified:m.boolean()})).nullish(),tokenProgram:m.string().nullish(),extensions:m.array(m.unknown()).nullish()})}),ts=sn.extend({extraMetadata:sn.shape.extraMetadata.extend({id:m.string().nullish().default(null),description:m.string().nullish().default(null),marketCap:m.coerce.number().optional(),circulatingSupply:m.coerce.number().optional(),totalSupply:m.coerce.number().optional(),liquidity:m.coerce.number().optional(),holders:m.coerce.number().optional(),links:m.array(m.object({type:m.string(),url:m.string()})).optional(),volume24hUSD:m.coerce.number().optional(),volume24hUSDChangePercentage:m.coerce.number().optional(),trades24h:m.coerce.number().optional(),trades24hChangePercentage:m.coerce.number().optional(),uniqueWallets24h:m.coerce.number().optional(),uniqueWallets24hChangePercentage:m.coerce.number().optional(),top10HoldersPercent:m.coerce.number().optional(),mintable:m.boolean().optional(),freezable:m.boolean().optional(),mutableMetadata:m.boolean().optional(),ownershipRenounced:m.boolean().optional(),updateAuthority:m.string().optional()})}),un=ts.transform(({caip19:e,...t})=>{let r=Te(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:N.getChainName(r.chainId),encodedCaip19:e,decodedCaip19:r,legacyKey:Oe(r)??e}});var rs=M({minutes:10});async function Ot({walletCaip19s:e,fungibleCaip19s:t,cursor:r}){let n={walletAddresses:e.join(","),includePrices:"true"};r&&(n.cursor=r),t&&t.length>0&&(n.fungibleAddresses=t.sort().join(","));try{let o=await ne.api().timeout(M({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:n}).then(l=>{if(fe(l))return l.data;throw new Error(l.data?.message||l.data?.error||l.statusText,{cause:l.data?.code})}),a=an.parse(o);return{...a,tokens:nn(a.tokens)}}catch(o){throw o instanceof Error&&(D.addBreadcrumb("tokens","getTokenBalances","error",{...n,message:o.message,...typeof o.cause=="string"||typeof o.cause=="number"?{cause:o.cause}:{}}),D.captureError(o,"tokens")),o}}function ln({walletCaip19s:e,isEnabled:t=!0}){return{staleTime:rs,gcTime:M({days:3}),queryKey:Z.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:async({pageParam:r})=>Ot({walletCaip19s:e,cursor:r}),initialPageParam:"",getNextPageParam:r=>r?.nextCursor||void 0}}function mn(e){let{walletCaip19s:t,encodedCaip19:r,queryOptions:n={enabled:!0}}=e;return{staleTime:M({seconds:10}),gcTime:M({days:3}),queryKey:Z.tokenBalance({wallets:t,encodedCaip19:r}),enabled:n.enabled&&!!t.length,queryFn:async()=>(await Ot({walletCaip19s:t,fungibleCaip19s:[r]})).tokens}}var ns=(e,t,r)=>{let n=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(n!==o)return r?n?-1:1:n?1:-1},os=(e,t,r)=>{let n=e.legacyKey===r,o=t.legacyKey===r;if(n!==o)return n?-1:1},ss=({isSplCompressed:e,legacyKey:t},r)=>r.length?r.length===1?r[0]:[...r].sort((o,a)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||a.encodedCaip19.includes("solana:"))){let l=ns(o,a,e);if(l)return l}if(t){let l=os(o,a,t);if(l)return l}return a.totalQuantity-o.totalQuantity})[0]:null,pn=e=>{let t=we(ke),r=mn({...e,walletCaip19s:t});return r.refetchInterval||(r.refetchInterval=M({seconds:5})),Y({...r,select:n=>ss(e,n)})},Je=({networkID:e,queryOptions:t,addressType:r})=>{let n={chainId:e,slip44:N.getSlip44(e),resourceType:"nativeToken"},o=xe.get(e).nativeTokenFungibleBalanceKey(e,r)??null,a=ie(n);return pn({encodedCaip19:a,legacyKey:o,queryOptions:t})},is=()=>{let{data:e}=ce(),t=(0,dn.useMemo)(()=>e?.addresses.find(r=>N.isSolanaNetworkID(r.networkID)),[e]);return Je({networkID:t?.networkID||"solana:101",addressType:t?.addressType})};s();i();s();i();s();i();s();i();var ye=v(new zt);function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rt.apply(this,arguments)}p.NODE_ENV!=="production"&&(ye.debugPrivate=!0);var as=(e,t,r)=>e?.suspense&&cs(t,r),cs=(e,t)=>e.isPending&&!t,us=({result:e,throwOnError:t,query:r})=>e.isError&&!e.isFetching&&ls(t,[e.error,r]);function ls(e,t){return typeof e=="function"?e(...t):!!e}var ms=e=>e.suspense&&typeof e.staleTime!="number"?Rt({},e,{staleTime:1e3}):e;function fn(e,t,r=n=>n(ye)){let n=v(0),o=v(r);p.NODE_ENV!=="production"&&(o.debugPrivate=!0);let a=v(()=>new WeakMap);p.NODE_ENV!=="production"&&(a.debugPrivate=!0);let l=v(c=>{let f=c(o),y=e(c),b=f.defaultQueryOptions(y),h=c(a).get(f);return b._optimisticResults="optimistic",h&&h.setOptions(b,{listeners:!1}),ms(b)});p.NODE_ENV!=="production"&&(l.debugPrivate=!0);let d=v(c=>{let f=c(o),y=c(l),b=c(a),h=b.get(f);if(h)return h;let C=new t(f,y);return b.set(f,C),C});p.NODE_ENV!=="production"&&(d.debugPrivate=!0);let u=v(c=>{let f=c(d),y=c(l),b=f.getOptimisticResult(y),h=v(b);return p.NODE_ENV!=="production"&&(h.debugPrivate=!0),h.onMount=C=>{let O=f.subscribe(Ht.batchCalls(C));return()=>{f.getCurrentResult().isError&&f.getCurrentQuery().reset(),O()}},h});return p.NODE_ENV!=="production"&&(u.debugPrivate=!0),v(c=>{c(n);let f=c(d),y=c(l),b=c(c(u));if(as(y,b,!1))return f.fetchOptimistic(y);if(us({result:b,query:f.getCurrentQuery(),throwOnError:y.throwOnError}))throw b.error;return b},(c,f)=>{f(n,y=>y+1)})}function Ye(e,t=r=>r(ye)){return fn(e,Jt,t)}function gn(e,t=r=>r(ye)){return fn(e,Yt,t)}s();i();var xm=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Mt=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),ds=new WeakMap,ps=(e,t,r,n)=>{let o=Mt(()=>new WeakMap,ds,t),a=Mt(()=>new WeakMap,o,r);return Mt(e,a,n)};function X(e,t,r=Object.is){return ps(()=>{let n=Symbol(),o=([l,d])=>{if(d===n)return t(l);let u=t(l,d);return r(d,u)?d:u},a=v(l=>{let d=l(a),u=l(e);return o([u,d])});return a.init=n,a},e,t,r)}var fs=e=>typeof e?.then=="function";function gs(e=()=>{try{return self.localStorage}catch(r){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(r);return}},t){var r;let n,o,a={getItem:(u,c)=>{var f,y;let b=C=>{if(C=C||"",n!==C){try{o=JSON.parse(C,t?.reviver)}catch{return c}n=C}return o},h=(y=(f=e())==null?void 0:f.getItem(u))!=null?y:null;return fs(h)?h.then(b):b(h)},setItem:(u,c)=>{var f;return(f=e())==null?void 0:f.setItem(u,JSON.stringify(c,t?.replacer))},removeItem:u=>{var c;return(c=e())==null?void 0:c.removeItem(u)}},l=u=>(c,f,y)=>u(c,b=>{let h;try{h=JSON.parse(b||"")}catch{h=y}f(h)}),d;try{d=(r=e())==null?void 0:r.subscribe}catch{}return!d&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(d=(u,c)=>{if(!(e()instanceof self.Storage))return()=>{};let f=y=>{y.storageArea===e()&&y.key===u&&c(y.newValue)};return self.addEventListener("storage",f),()=>{self.removeEventListener("storage",f)}}),d&&(a.subscribe=l(d)),a}var vm=gs();s();i();s();i();s();i();function ee(e){let t=v(0),r=v(()=>({i:0}),(u,c)=>{let f=u(r);return Object.assign(f,{m:!0,peek:u,set:c}),c(t,y=>y+1),()=>{f.m=!1,l(f),d(f)}});r.onMount=u=>u();let n=v(u=>{u(t);let c=u(r);if(!c.m||c.irc||c.i&&!c.irf)return c.p;d(c);let f=new Map,y=O=>{let G=u(O);return f.set(O,G),G};y.peek=c.peek;let b=(...O)=>{try{return++c.i,c.set(...O)}finally{Array.from(f.keys(),u),--c.i}};b.recurse=(O,...G)=>{if(c.fc){if(p.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return c.irc=!0,c.set(O,...G)}finally{c.irc=!1,Array.from(f).some(h)&&a(c)}};function h([O,G]){return u(O)!==G}++c.i;function C(){try{if(c.irf=!1,!c.m)return;l(c),c.c=o.effect(y,b)}catch(O){c.e=O,a(c)}finally{c.p=void 0,--c.i}}return c.irf?C():c.p=Promise.resolve().then(C)});if(p.NODE_ENV!=="production"){let u=function(c,f){Object.defineProperty(c,"debugLabel",{get:()=>`${o.debugLabel??"effect"}:${f}`}),c.debugPrivate=!0};u(t,"refresh"),u(r,"ref"),u(n,"base")}let o=v(u=>void u(n));return o.effect=e,o;function a(u){try{u.irf=!0,u.set(t,c=>c+1)}finally{u.irf=!1}}function l(u){if(typeof u.c=="function")try{u.fc=!0,u.c()}finally{u.fc=!1,u.c=void 0}}function d(u){if("e"in u){let c=u.e;throw delete u.e,c}}}s();i();var de=_(An()),Dt=class{async get(t){try{let n=(await de.default.storage.local.get(t))[t];return n==null||typeof n!="string"?null:JSON.parse(n)}catch{return null}}async getAll(t){try{let r=await de.default.storage.local.get(t),n={};for(let o in r)if(Object.prototype.hasOwnProperty.call(r,o)){let a=r[o];if(a==null||typeof a!="string")n[o]=null;else try{n[o]=JSON.parse(a)}catch{n[o]=null}}return n}catch(r){let n=`[LocalStorage.getAll] Error getting keys (${t}): ${r}`;throw new Error(n)}}async remove(t){try{await de.default.storage.local.remove(t)}catch(r){let n=`[LocalStorage.remove] Error removing key(s) (${t}): ${r}`;throw new Error(n)}}async set(t,r){try{let n=JSON.stringify(r);await de.default.storage.local.set({[t]:n})}catch(n){let o=`[LocalStorage.set] Error setting/stringifying key (${t}): ${n}`;throw new Error(o)}}async setAll(t){try{let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=JSON.stringify(t[n]));await de.default.storage.local.set(r)}catch(r){let o=`[LocalStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${r}`;throw new Error(o)}}async clear(){try{await de.default.storage.local.clear()}catch(t){let r=`[LocalStorage.clear] Error clearing storage: ${t}`;throw new Error(r)}}subscribe(t){let r=n=>{let o=Object.keys(n);for(let a of o)t(a)};return de.default.storage.onChanged.addListener(r),()=>{de.default.storage.onChanged.removeListener(r)}}async update(t,r){try{await navigator.locks.request(`storage.${t}`,async n=>{let o=await this.get(t),a=await r(o);a===null?await this.remove(t):await this.set(t,a)})}catch(n){let o=`[LocalStorage.update] Error updating key (${t}): ${n}`;throw new Error(o)}}},_t=new Dt;s();i();s();i();var Re=class{namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(r=>{console.error("Failed to load data",r)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,JSON.parse(JSON.stringify(this.data)))}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),r=!1;for(let n in this.data)Object.prototype.hasOwnProperty.call(this.data,n)&&this.data[n].expiresAt<=t&&(delete this.data[n],r=!0);return r}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,r){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:r,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,r){this.isLoaded||await this._load();let n=this._cleanupExpired(),o=this.data[t];if(!o)return n&&await this._save(),null;let a=this._updateExpiration(t),l=r.safeParse(o.value);return l.success?((n||a)&&await this._save(),l.data):(this.onError?.(new pe(l.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let r=this._cleanupExpired(),n=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],n=!0),(r||n)&&await this._save()}async clear(){this.data={},await this._save()}};var bn=new Map;function ys({storage:e,namespaceKey:t,ttlMs:r}){let n=bn.get(t);if(n)return n;if(!e)throw new Error("Storage is required");let o=new Re({storage:e,namespaceKey:t,ttlMilliseconds:r,onError:(a,l)=>{console.error(`[PersistentStore Error - ${l}]:`,a.message),a instanceof pe&&console.error("Zod Issues:",a.issues)}});return bn.set(t,o),o}var Nt=ys;function As({atomToStoreOffline:e,namespaceKey:t,ttlMs:r,initialValue:n,schema:o,...a}){let l=v({status:"pending",value:n}),d=v(y=>{if("offlineKey"in a)return y(a.offlineKey);let b=y(e);if("offlineKey"in b&&typeof b.offlineKey=="string")return b.offlineKey;throw new Error("No key provided")}),u=ee((y,b)=>{Nt({storage:_t,namespaceKey:`.offline.${t}`,ttlMs:r}).get(y(d),o).then(h=>{h&&b(l,{status:"offline",value:h})}).catch(h=>{console.error(h)})}),c=ee((y,b)=>{y(d),b(l,{status:"pending",value:n})}),f=ee((y,b)=>{let h=y(e),C=y(d);h.status==="success"&&h.data&&h.data!==y(l).value&&Nt({storage:_t,namespaceKey:`.offline.${t}`,ttlMs:r}).set(C,h.data).then(()=>{h.data&&b(l,{status:"live",value:h.data})}).catch(O=>{console.error(O)})});return X(v(y=>{let b=y(e);y(c),y(u),y(f);let h=y(l);return b.data?{status:"live",value:b.data}:{status:"offline",value:h.value}}),y=>y.value)}var Ze=As;s();i();async function bs(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let r=await ne.api().timeout(M({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(n=>{if(fe(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText,{cause:n.data?.code})}).catch(n=>{throw D.addBreadcrumb("tokens","getTokenBalanceUpdates","error",{message:n.message,cause:n.cause,...t}),D.captureError(n,"tokens"),n});try{return cn.parse(r)}catch(n){throw n instanceof pe&&D.addBreadcrumb("tokens","getTokenBalanceUpdates parse error","error",{message:n.message,...n.issues?{issues:JSON.stringify(n.issues)}:{},result:JSON.stringify(r)}),n}}async function Tn(e){let t=[],r=()=>t.at(-1)?.nextCursor;do{let n=r(),o=await bs(n?{walletCaip19s:e.walletCaip19s,cursor:n}:e);t.push(o)}while(r());return on(t.flatMap(n=>n.transfers))}s();i();function Bt({newUpdates:e,existingUpdates:t={}}){return e.reduce((r,n)=>r[n.encodedCaip19]?.totalQuantityString===n.totalQuantityString?r:{...r,[n.encodedCaip19]:n},t)}s();i();function Ts(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let r=new Date(e).getTime(),a=t.groups.fraction.padEnd(6,"0").slice(-3);return r*1e3+parseInt(a,10)}var Lt=Ts;s();i();var hs=v(!1),hn=hs;s();i();s();i();var Ss=gn(e=>{let t=e(ke);return ln({walletCaip19s:t})}),ue=Ss;var ws=v(e=>{let{data:t}=e(ue),r=t?.pages[0];return!r||!r.tokens.length?0:r.updatedAt}),Sn=ws;s();i();var Es=X(He,e=>e?.identifier),Ae=Es;var xs=1e3,wn=5e3,En=Math.ceil(wn*2.25);function xn(e){return M(e)*1e3}function vs(e){if(!e?.length)return null;let t=new Date(Date.now()-En).toISOString();return Math.floor(Math.max(...e.map(({timestamp:r})=>Lt(r||t))))}function ks(e){let t=vs(e);return t?t-xn({seconds:1}):null}var Cs=Ye(e=>{let t=e(ye),r=e(Sn),n=Math.floor(r-M({minutes:10})),o=e(ke),a=e(hn),l=n>Date.now()-M({days:10}),d=Z.tokenUpdates({walletCaip19s:o,from:n}),u=async()=>{let c=t.getQueryData(d)?.lastTimestamp;if(!c){let h=new Date(n-En).toISOString();return{updates:{},lastTimestamp:Lt(h)}}let f=await Tn({walletCaip19s:o,fromMicroseconds:c-xn({seconds:30})}),y=t.getQueryData(d)?.updates??{};return{updates:Bt({newUpdates:f,existingUpdates:y}),lastTimestamp:Math.max(ks(f)??0,c)}};return{meta:{fetchCount:0},enabled:l&&!a&&o.length>0,queryKey:d,refetchInterval:c=>{let f=Number(c.meta?.fetchCount??0);return c.meta&&(c.meta.fetchCount=f+1),Math.min(Math.max(f*250,xs),wn)},queryFn:u}}),Ps=Ze({atomToStoreOffline:Cs,offlineKey:v(e=>`${e(Ae)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:M({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:m.object({updates:m.record(m.string(),ze),lastTimestamp:m.number()})}),Fs=X(Ps,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Xe=Fs;s();i();s();i();function et(e){return t=>{let r=!1,n={...t};for(let[o,a]of Object.entries(e)){let l=a?.price,d=a?.lastUpdatedAt?new Date(a.lastUpdatedAt):null;if(!l||!d)continue;let u=t[o]?.price!==l&&(!t[o]?.lastUpdatedAt||d>t[o].lastUpdatedAt);r=r||u,u&&(n[o]={price:a.price,priceChange24h:a.priceChange24h,lastUpdatedAt:d})}return r?n:t}}s();i();var Is=v(e=>{let{data:t,status:r}=e(ue);return{data:t?.pages.flatMap(n=>n.tokens),status:r}}),Os=Ze({atomToStoreOffline:Is,offlineKey:v(e=>`${e(Ae)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:M({days:10}),initialValue:[],schema:m.array(ze)}),be=Os;var Me=v({}),Rs=ee((e,t)=>{let n=e(ye).getQueryCache().subscribe(o=>{if(!o||o.type!=="updated")return;let a=o.query;a.queryKey[0]==="prices"&&t(Me,l=>{let d=a.queryKey[1].id,u=a.state.data,c=l[d];return!u||c?.price===u?.price||!(!c?.lastUpdatedAt||u.lastUpdatedAt&&new Date(u.lastUpdatedAt)>c.lastUpdatedAt)?l:{...l,[d]:{price:u.price,priceChange24h:u.priceChange24h??u.usd_24h_change,lastUpdatedAt:new Date(u.lastUpdatedAt)}}})});return()=>{n()}}),Ms=v(e=>e(be).slice(-100).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})),Us=ee((e,t)=>{let r=e(Ms);!r||Object.keys(r).length===0||t(Me,et(r))}),Ds=v(e=>{let t=e(Xe);return Object.values(t).reduce((n,o)=>(o.price&&(n[o.encodedCaip19]=o.price),n),{})}),_s=ee((e,t)=>{let r=e(Ds);!r||Object.keys(r).length===0||t(Me,et(r))}),Ns=v(e=>(e(Us),e(_s),e(Rs),e(Me)),(e,t,r)=>{t(Me,r)}),tt=Ns;s();i();s();i();var Bs=X(ue,e=>e.hasNextPage),rt=Bs;var Ue=v(1/0),nt=v(e=>(e(Ls),e(Vs),e(rt)?e(Ue):0),(e,t,r)=>{if(r===null){t(Ue,1/0);return}let n=Math.min(e(Ue),r);n!==e(Ue)&&t(Ue,n)}),vn=nt,Ls=ee((e,t)=>{let{hasNextPage:r}=e(ue),n=e(be),o=e(tt);if(n.length>0&&!r){t(nt,0);return}let a=n.slice(-100).filter(l=>l.type==="fungible").map(l=>{let d=o[l.encodedCaip19]??l.price;return d?l.totalQuantity*d.price/10**l.decimals:1/0});t(nt,Math.min(...a))}),Vs=ee((e,t)=>{e(Ae)&&t(nt,1/0)});function Ks(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}function Qs(e,t){if(!e&&t)return 1;if(e&&!t)return-1}function kn(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}function Cn(e,t){if(e!==t)return t-e}function Gs(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}var Ws=v(e=>{let t=e(be),r=e(Xe),n=new Set(Object.keys(r));if(t.length===0)return[];let o=t.map(a=>{let l=r[a.encodedCaip19];return l&&!a.extraMetadata?.compression?.compressed?(n.delete(a.encodedCaip19),{...a,...Gs(l)}):a});return n.forEach(a=>{let l=r[a];l&&o.push({...l,queriedWalletBalances:[]})}),o}),qs=v(e=>{let t=e(tt),r=e(Ws),n=e(vn),o=r.filter(a=>a.totalQuantity>0||a.type==="native").map(a=>({...a,livePrice:t[a.encodedCaip19]??a.price})).sort((a,l)=>{let d=a.livePrice?.price,u=l.livePrice?.price,c=Qs(d,u);if(c)return c;let f=a.totalQuantity/10**a.decimals,y=l.totalQuantity/10**l.decimals;if(!d&&!u){let O=Ks(a,l);if(O)return O;let G=Cn(f,y);if(G)return G;let H=kn(a.name,l.name);return H||0}let b=(d??0)*f,h=(u??0)*y,C=Cn(b,h);return C||(kn(a.name,l.name)??0)});return n?o.filter(a=>{let l=a.livePrice?.price,d=a.totalQuantity/10**a.decimals;return(l??0)*d>=n}):o}),Pn=qs;s();i();s();i();s();i();function Vt(e,t){return{gcTime:Ve.Long,staleTime:1/0,enabled:!!t&&!!e,queryKey:Z.visibilityOverrides({accountId:t??""}),async queryFn(){return!t||!e?new Map:await vr(e,t)}}}s();i();var js=v(null),Fn=js;var $s=new Map,In=Ye(e=>{let t=e(Fn),r=e(Ae);return Vt(t,r)}),On=X(In,e=>e.status),Hs=v(e=>e(In).data??$s),df=Hs;var zs=v(e=>{let{isLoading:t}=e(ue),r=e(be),n=e(On);return t&&r.length===0||n==="pending"}),Rn=X(zs,e=>e);function Mn(){let e=we(Pn),t=we(Rn),r=we(rt);return{isLoading:t,hasNextPage:r,fungibleTokens:e}}s();i();s();i();var Un=_(W());var Js=({wallets:e,encodedCaip19:t,isSplCompressed:r=!1})=>{let n=J();return(0,Un.useCallback)(()=>n.invalidateQueries({queryKey:Z.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:r})}),[n,e,t,r])},Ys=Js;s();i();s();i();s();i();s();i();function Zs(e){let t={message:"Failed to parse token details response"};if(e instanceof pe)try{t.zodIssuesJson=JSON.stringify(e.issues.map(r=>({path:r.path.join("."),message:r.message,code:r.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}var Dn=Zs;function _n(e){return e.resourceType==="nativeToken"?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}function Xs(e){return _n(Te(e))}function ei(e){let t=new URLSearchParams,r="encodedCaip19"in e?Xs(e.encodedCaip19):_n(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[r,{params:t}]}async function Kt(e){let t=await ne.api().timeout(M({seconds:10})).get(...ei(e)).then(r=>{if(fe(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText,{cause:r.data?.code})}).catch(r=>{throw D.addBreadcrumb("tokens","getTokenDetails","error",{message:r.message,cause:r.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:ie(e.decodedCaip19)}}),D.captureError(r,"tokens"),r});try{return un.parse(t)}catch(r){let n=Dn(r);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?n.caip19=e.encodedCaip19:"decodedCaip19"in e&&(n.caip19=ie(e.decodedCaip19)),D.addBreadcrumb("tokens","getTokenDetails.ParseError","error",n),r}}function ti({caip19:e,includePrice:t}){return Y({queryKey:["fungibleDetails",e],queryFn:async()=>Kt(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t})})}var ri=ti;s();i();var Wt=_(W());s();i();var Qt=new L(0),Gt=({chainAddress:e,type:t,balance:r,decimals:n,recipient:o,gasEstimation:a,clampToZero:l=!0})=>{let{data:d,isPending:u}=lt(e);if(!t||!r)return Qt;let c=new L(r).multipliedBy(tr(n));if(!ve(t))return c;if(!a)return;let f=new L(0);if(Ne(a))f=c.minus(new L(a.value));else if(mr(a)){let{gasLimit:y,maxFeePerGas:b,l1Fee:h=new L(0)}=a,C=y.times(b).plus(h);f=c.minus(C)}else if(Be(a)){if(!e||u)return;let y=e.addressType,b=d?.safeToSendUtxos??[],h=ur(a.btcPerKilobyte),C=o&&rr.safeParse(o).success?o:"bc1p",G=[{value:b.reduce((te,re)=>te.plus(new L(re.value)),new L(0)).toNumber(),address:C}],H=fr(y,b,G,h.toNumber(),[]);if(H.type==="error")f=new L(H.maxAmount).integerValue(L.ROUND_DOWN);else{let{inputs:te,fee:re}=H;f=te.reduce((x,P)=>x.plus(new L(P.value)),new L(0)).minus(re).integerValue(L.ROUND_DOWN)}}else if(lr(a))f=c.minus(a.gasBudget);else return Zt(a);return f.isGreaterThan(Qt)?f:l?Qt:f};var ni=({networkID:e,addressType:t,gasEstimation:r,transactionValue:n=new L(0),recipient:o})=>{let{data:a,isLoading:l,isError:d}=Je({networkID:e,addressType:t}),u=xe.get(e).nativeFungibleTokenType,c="unknown",f="",y=(0,Wt.useMemo)(()=>{let h=a?.queriedWalletBalances[0]?.address;if(!h)return;let C=De(e,h);return{networkID:e,address:h,addressType:C}},[a?.queriedWalletBalances,e]),b=Gt({chainAddress:y,type:u,balance:a?.totalQuantityString?new L(a?.totalQuantityString):void 0,decimals:a?.decimals??0,recipient:o,gasEstimation:r,clampToZero:!1});return!d&&a&&b&&(b.gte(n)?c="sufficient":c="insufficient",f=a?.symbol||""),(0,Wt.useMemo)(()=>({hasSufficientFunds:c,nativeTokenSymbol:f,isLoading:l,isError:d}),[c,f,l,d])};s();i();var Kn=_(W());s();i();var qt=_(W());s();i();var Nn=({chainAddresses:e=[]})=>{let t=$.tokensErrorCount(e);return Y({queryKey:t,initialData:0})};s();i();var oi=({errors:e})=>e;function Bn({chainAddresses:e,queryOptions:t}){return Ir({select:oi,chainAddresses:e,queryOptions:t})}var Ln=3,si=1,Vn=({networkID:e,chainAddresses:t=[]})=>{let{data:r=[]}=Bn({chainAddresses:t}),{data:n=0}=Nn({chainAddresses:t}),o=n>=Ln,{data:a=0}=Cr(),l=a>=Ln,d=r.length===si&&r.some(f=>f.code==="TokensTrimmed"),{t:u}=ae(),c=(0,qt.useMemo)(()=>{if(o)return u("partialErrorGeneric");let f=r.filter(b=>e?b.details.chainId===e:!0),y=f.length+(l?1:0);return y?y>1?u("partialErrorGeneric"):l?u("partialErrorTokenPrices"):d?u("partialErrorTokensTrimmed"):e?u("partialErrorTokenDetail"):u("partialErrorBalanceChainName",{chainName:N.getChainName(f[0].details.chainId)}):""},[o,r,l,e,d,u]);return(0,qt.useMemo)(()=>({partialErrorMessage:c,shouldShowPartialError:c!==""}),[c])};function ii(e){let{onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o,account:a}=e,{shouldShowPartialError:l,partialErrorMessage:d}=Vn({chainAddresses:a?.addresses});return{ctaActions:ai({onTappingBuy:t,onTappingReceive:r,onTappingSend:n,onTappingSwap:o}),shouldShowPartialError:l,partialErrorMessage:d}}function ai(e){let{t}=ae();return(0,Kn.useMemo)(()=>{let n=[];return n.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),n.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),n.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),n.sort((o,a)=>(dt.get(o.type)??100)-(dt.get(a.type)??100)),{primary:n,more:[]}},[t,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}s();i();var Qn=_(W());var ci=({networkID:e,unsignedTransaction:t,pendingActivityRows:r,accountIdentifier:n,accountSigner:o,storage:a,includeCallPayload:l})=>({accountSigner:o,accountIdentifier:n,networkID:e,unsignedTransaction:t,...l&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:r}},storage:a}),ui=async({t:e,fungible:t,unsignedUnwrapTx:r,gasEstimation:n,storage:o,accountMetadata:a,accountSigner:l})=>{if(!r)throw new Error("Unsigned unwrap transaction is required");if(!n)throw new Error("Gas estimation is required");let{chain:d,balance:u}=t.data;if(!N.isEthereumNetworkID(d.id))throw new Error(`Chain is not supported: ${d.id}`);let c=d.id,f={topRight:{text:`+${u} ${d.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${u} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},y=jt.parse({type:"0x2",chainId:N.getEVMNetworkIDValue(c),gas:`0x${n.gasLimit.toString(16)}`,maxFeePerGas:`0x${n.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${n.maxPriorityFeePerGas.toString(16)}`,...r}),b=ci({storage:o,accountSigner:l,pendingActivityRows:f,includeCallPayload:!1,networkID:c,unsignedTransaction:y,accountIdentifier:a.accountIdentifier});return Ar(b)},li=()=>{let{data:e}=ce();return(0,Qn.useMemo)(()=>{let r=e?.type,n=e?.name??"",o=e?.identifier??"";return{accountName:n,accountType:r,accountIdentifier:o}},[e])},mi=e=>{let t=se(),r=J(),{t:n}=ae(),o=li(),a=ge();return oe({async mutationFn({fungible:l,unsignedUnwrapTx:d,gasEstimation:u}){return await ui({t:n,fungible:l,unsignedUnwrapTx:d,gasEstimation:u,accountMetadata:o,storage:t,accountSigner:a})},async onSuccess(){await r.invalidateQueries({queryKey:$.tokens(e)})}})};s();i();s();i();s();i();var Gn=()=>{let{setRetryArgs:e}=Pt();return t=>{if(t instanceof yr){let{successfulTxIds:r}=t,[n,o]=r;e({type:"BRC20",commitTxId:n,revealTxId:o})}}};function di(){let e=se(),{data:t}=ce({select:l=>l.identifier}),r=Gn(),n=Pr(),o=ge();return oe({mutationFn:async({multichainTransaction:l,pendingTransactionInput:d,senderAddress:u,gasEstimation:c})=>{if(!t)throw new Error("No account identifier found");let{networkID:f}=l,y=await dr.get(f).onBeforeSend({multichainTransaction:l,gasEstimation:c}),b=await xr({accountIdentifier:t,accountSigner:o,multichainTransaction:y,networkID:f,pendingTransactionInput:d,senderAddress:u,storage:e,utxoManager:n});return Er(f,b)},onError(l){l instanceof Error&&(D.captureError(l,"fungibles"),l instanceof gr&&r(l))}})}s();i();var Wn=_(W());var pi=(e,t,r)=>{let n=J(),{fungibles:o}=mt({keys:[e]}),a=o.length===1?o[0]:void 0;(0,Wn.useEffect)(()=>{if(!a)return;let{type:l,data:d}=a,{balance:u,decimals:c,chain:f}=d,{id:y}=f,b=ve(l)===!0;if(!r||!u||b||u.isEqualTo(t))return;let h=$.transferFungibleLoggingContext(e),C={transactionId:r,decimals:c,chainId:y,isNativeToken:b,previousBalance:u,fungibleKey:e};n.setQueryData(h,C)},[r])};s();i();var qn=M({minutes:1}),fi=(e,t=!0)=>{let r=$.solanaBalance(e);return Y({enabled:!!e&&t&&he(e),gcTime:qn,staleTime:qn,queryKey:r,async queryFn(){if(!e)throw new Error("No chain address provided");if(he(e))return pr(e.networkID).getBalance(new z.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})};s();i();s();i();var jn=_(W());var gi=e=>{let{data:t}=ar();return(0,jn.useMemo)(()=>{if(!e||!t)return;let r=e.data.chain.id,n=t.explorers[r]??at.get(r).defaultExplorer,o,a;if(ve(e.type))a="address",o=e.data.walletAddress;else switch(e.type){case"SuiCoin":{a="token",o=e.data.contractAddress;break}case"ERC20":{a="address",o=e.data.contractAddress;break}case"SPL":case"CompressedSPL":{a="address",o=e.data.mintAddress;break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let l=ut({networkID:r,endpoint:a,explorerType:n,param:o});return{explorerName:ct[n],explorerUrl:l}},[e,t])};s();i();var $n=_(W());var yi=e=>{let t=J();return(0,$n.useCallback)(()=>t.invalidateQueries({queryKey:$.tokens(e)}),[t,e])};s();i();var Hn=_(W()),Ai=(e,t)=>(0,Hn.useMemo)(()=>{if(e)if(Be(e)){let r=cr(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:r.toString()})}}else return Ne(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:ir.colors.legacy.accentWarning,rightSubtext:""}:void 0},[e,t]);s();i();var bi=_(W());s();i();s();i();var ro=_(W());s();i();var st=(o=>(o.FAIL_SEVERE="FAIL_SEVERE",o.FAIL_HIGH="FAIL_HIGH",o.NO_ACTION="NO_ACTION",o.DATA_NOT_FOUND="DATA_NOT_FOUND",o))(st||{}),Ti=m.object({action:m.nativeEnum(st),address:nr,expirationUnixtimeInSec:m.number().nullish().default(null)}),zn=m.object({addressScreenResults:m.array(Ti)}),ot=class extends Error{constructor(t){super(t),this.name="WalletScreenError"}};s();i();s();i();var hi="@phantom/wallet-screening",Jn=`${hi}:wallet-screen-action`,Yn={walletScreenAction(e){return[Jn,e]}};s();i();var Zn=new Error("Failed to fetch wallet screen action.");async function Xn(e){try{let t=await ne.api().post("/wallet_screen/v1",e);if(!fe(t))throw Zn;let r=t.data;return zn.parse(r)}catch{throw Zn}}var eo=M({days:7}),to=e=>{let t=e!==void 0&&N.isMainnetNetworkID(e.networkID),r=[];if(e!==void 0){let d=N.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;r=[{chainId:e.networkID,address:d,resourceType:"address"}]}let n={addresses:r},o=J(),a=Yn.walletScreenAction(n),l=[a[0]];return Y({enabled:t,queryKey:a,gcTime:eo,staleTime:eo,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(Si(o,l))return"FAIL_SEVERE";let u=await Xn(n);return wi(u)}})},Si=(e,t)=>{let r=e.getQueriesData({queryKey:t,exact:!1}),n=!1;for(let[o,a]of r){let l=a;if(l&&l==="FAIL_SEVERE"){n=!0;break}}return n},wi=e=>{let t=e.addressScreenResults;return t.some(r=>r.action==="FAIL_SEVERE")?"FAIL_SEVERE":t.some(r=>r.action==="FAIL_HIGH")?"FAIL_HIGH":t.some(r=>r.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var Ei=(e,t)=>{let r=_e(),{data:n}=to(e);switch((0,ro.useEffect)(()=>{n&&e&&r.capture("walletScreened",{data:{walletScreen:{action:n.toString(),surface:t},chainId:N.getChainID(e.networkID),networkId:e.networkID}})},[n,e,t,r]),n){case"FAIL_SEVERE":case"FAIL_HIGH":throw new ot(`Transaction disabled: ${t}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};s();i();s();i();export{Rr as a,Mr as b,Yr as c,v as d,Kr as e,fc as f,we as g,Eo as h,gc as i,ye as j,Ye as k,X as l,Po as m,Z as n,Mo as o,jr as p,Pt as q,No as r,di as s,pi as t,Gt as u,Ko as v,Qo as w,fi as x,gi as y,Ys as z,Wl as A,ql as B,rs as C,He as D,ke as E,pn as F,is as G,ee as H,Ze as I,hn as J,ue as K,Ae as L,Cs as M,tt as N,rt as O,Pn as P,Fn as Q,df as R,Rn as S,Mn as T,ri as U,ni as V,Vn as W,ii as X,yi as Y,Ai as Z,mi as _,ot as $,Jn as aa,Ei as ba};
//# sourceMappingURL=chunk-US2EC2AF.js.map
