import{b as $}from"./chunk-MEDQOUBN.js";import"./chunk-PLQQKT2M.js";import{c as W}from"./chunk-UDB3GXAG.js";import{b as O}from"./chunk-KQPLPV6X.js";import"./chunk-ORJUPAX4.js";import{a as N}from"./chunk-LTDRBNZN.js";import{a as L}from"./chunk-QY3T2P2H.js";import"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import{b as Q}from"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{b as S,j as v,n as q}from"./chunk-5W7YPRT3.js";import{yc as M}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{a as x}from"./chunk-CWJVYWRL.js";import{Ea as D,d as C,j as I,q as A,v as z,w as i,x as c}from"./chunk-27TD4NX4.js";import{L as w}from"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as V,x as k}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as R,h as b,n as E}from"./chunk-3KENBVE7.js";b();E();var e=R(V());var ye=()=>{let{t}=I(),r=x(),{onProviderSelected:u,isLoading:n,providers:m,paymentMethod:s,quoteTimeToExpiry:l,quoteTimeToExpiryColor:h,context:g}=X();return e.default.createElement(i,{margin:16,maxHeight:"100%",height:"100%"},e.default.createElement($,{isLoading:n,isEmpty:m.length===0,emptyStateText:t("buyThirdPartyScreenProvidersEmptyState"),header:e.default.createElement(i,{direction:"row",alignContent:"center",position:"relative"},e.default.createElement(i,{position:"absolute",left:0,zIndex:10,cursor:"pointer"},e.default.createElement(z.ArrowLeft,{size:24,color:"textSecondary",onClick:()=>void r.popStack()})),e.default.createElement(c,{flex:1,font:"heading3",align:"center"},t("fiatRampQuotes"))),content:e.default.createElement(e.default.Fragment,null,e.default.createElement(i,{gap:8,marginBottom:96,marginTop:12,flex:1},e.default.createElement(L,{marginBottom:12}),e.default.createElement(D,{rows:[{type:"drawer",id:"selected-payment-method",onClick:()=>void r.to("fiat-ramp-detail-payment-methods"),start:s?.assets?.icon&&e.default.createElement(O,{image:{type:"fungible",src:s.assets.icon},size:24}),topLeft:s?.name||t("buyThirdPartyScreenPaymentMethod")}]}),e.default.createElement(i,{direction:"row",justifyContent:"space-between"},e.default.createElement(c,{font:"bodyMedium",color:"textSecondary",children:t("buyThirdPartyScreenProviders")}),e.default.createElement("div",null,e.default.createElement(c,{font:"captionMedium",color:"textSecondary",children:`${t("fiatRampNewQuote")}:`})," ",e.default.createElement(c,{className:A({width:32}),font:"captionMedium",color:h,children:l}))),e.default.createElement(i,{gap:8,flex:1,overflow:"scroll"},m.map((d,y)=>e.default.createElement(N,{key:`${d.id}-${y}`,index:y,onClick:u,...d}))))),context:g}))},X=()=>{let t=x(),r=v(),u=v(o=>o.setState),{fungible:n,purchaseAmount:m,purchaseType:s,paymentMethod:l,ownerPublicKey:h,context:g}=r,d=M();if(!n)throw new Error("No fungible asset selected");let{data:[y,_,B]}=w(["enable-fiat-ramp-optimize-defaults","enable-fiat-ramp-optimize-default-payment-method","enable-fiat-ramp-enhancements"]),{currencyCode:U}=Q(),{data:p,isPending:T}=q("web-embedded",k,C.language,{...s==="currency"?{fiatAmount:m}:{tokenAmount:m},token:n.caip19,fiatCurrencyCode:U,paymentMethodId:l?.id,destinationAddress:{address:h,chainId:n.caip19.chainId,resourceType:"address"},optimizeDefaults:y,optimizeDefaultPaymentMethod:_,enableFiatRampEnhancements:B}),f=l||p?.paymentMethod,P=p?.providers||[],j=(0,e.useCallback)(o=>{d.capture("fiatOnrampProviderSelected",{data:{chainId:p?.token?.chainId,providerId:o.id,paymentMethodId:f?.id,destinationAmount:o.quote?.displayDestinationAmount,sourceAmount:o.quote?.displaySourceAmount,asset:p?.token,tag:o.tag}}),u({...r,provider:o,paymentMethod:f,checkoutQuoteType:"selected"}),t.popStack()},[r,p?.token,f,u,d,t]),[a,F]=(0,e.useState)(S);W(()=>{T||P.length===0||F(a===0?S:a-1)},T?null:1e3);let H=a<10?`0:0${a}`:`0:${a}`,K=a<=10?"accentWarning":"textPrimary";return{providers:P,paymentMethod:f,onProviderSelected:j,closeModal:()=>!0,isLoading:T,quoteTimeToExpiry:H,quoteTimeToExpiryColor:K,context:g}};export{ye as FiatRampProvidersPage};
//# sourceMappingURL=FiatRampProvidersPage-VW33KZCS.js.map
