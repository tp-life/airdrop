import{g as H}from"./chunk-ZDSEL3RH.js";import{a as F}from"./chunk-UA6ADLWZ.js";import{f as A,h as S,i as R,n as h}from"./chunk-3KENBVE7.js";S();h();var g;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(g||(g={}));var D={type:"xstate.init"};function J(n){return n===void 0?[]:[].concat(n)}function U(n){return{type:"xstate.assign",assignment:n}}function K(n,t){return typeof(n=typeof n=="string"&&t&&t[n]?t[n]:n)=="string"?{type:n}:typeof n=="function"?{type:n.name,exec:n}:n}function V(n){return function(t){return n===t}}function W(n){return typeof n=="string"?{type:n}:n}function L(n,t){return{value:n,context:t,actions:[],changed:!1,matches:V(n)}}function I(n,t){t===void 0&&(t={});var e={config:n,_options:t,initialState:{value:n.initial,actions:J(n.states[n.initial].entry).map(function(r){return K(r,t.actions)}),context:n.context,matches:V(n.initial)},transition:function(r,i){var a,v,c=typeof r=="string"?{value:r,context:n.context}:r,l=c.value,d=c.context,m=W(i),p=n.states[l];if(p.on){var f=J(p.on[m.type]),_=function(o){if(o===void 0)return{value:L(l,d)};var y=typeof o=="string"?{target:o}:o,b=y.target,N=b===void 0?l:b,P=y.actions,Y=P===void 0?[]:P,$=y.cond,E=d;if(($===void 0?function(){return!0}:$)(d,m)){var Z=n.states[N],k=!1,q=[].concat(p.exit,Y,Z.entry).filter(function(s){return s}).map(function(s){return K(s,e._options.actions)}).filter(function(s){if(s.type==="xstate.assign"){k=!0;var C=Object.assign({},E);return typeof s.assignment=="function"?C=s.assignment(E,m):Object.keys(s.assignment).forEach(function(j){C[j]=typeof s.assignment[j]=="function"?s.assignment[j](E,m):s.assignment[j]}),E=C,!1}return!0});return{value:{value:N,context:E,actions:q,changed:N!==l||q.length>0||k,matches:V(N)}}}};try{for(var O=function(o){var y=typeof Symbol=="function"&&o[Symbol.iterator],b=0;return y?y.call(o):{next:function(){return o&&b>=o.length&&(o=void 0),{value:o&&o[b++],done:!o}}}}(f),x=O.next();!x.done;x=O.next()){var z=_(x.value);if(typeof z=="object")return z.value}}catch(o){a={error:o}}finally{try{x&&!x.done&&(v=O.return)&&v.call(O)}finally{if(a)throw a.error}}}return L(l,d)}};return e}var Q=function(n,t){return n.actions.forEach(function(e){var r=e.exec;return r&&r(n.context,t)})};function T(n){var t=n.initialState,e=g.NotStarted,r=new Set,i={_machine:n,send:function(a){e===g.Running&&(t=n.transition(t,a),Q(t,W(a)),r.forEach(function(v){return v(t)}))},subscribe:function(a){return r.add(a),a(t),{unsubscribe:function(){return r.delete(a)}}},start:function(){return e=g.Running,Q(t,D),i},stop:function(){return e=g.Stopped,r.clear(),i},get state(){return t},get status(){return e}};return i}S();h();var u=A(F());S();h();var X=A(F());function w(n){var t=(0,X.useRef)();return t.current||(t.current={v:n()}),t.current.v}function M(){return M=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},M.apply(this,arguments)}var B=function(t){var e;return t.subscribe(function(r){e=r}).unsubscribe(),e};function fn(n,t,e){var r=(0,u.useRef)(n),i=w(function(){return T(r.current).start()}),a=(0,u.useRef)(null),v=(0,u.useState)(function(){return B(i)}),c=v[0],l=v[1],d=(0,u.useCallback)(function(p){var f=H(p)?{type:p}:p,_=G(t);i.send(M({},f,{lastEventType:a.current,refs:_})),a.current=f.type,R.NODE_ENV!=="production"&&e&&(console.group("Event Sent"),console.log("Event:",f),console.groupEnd())},[e]);(0,u.useEffect)(function(){return i.subscribe(function(f){f.changed&&l(f)}),function(){i.stop()}},[i]),(0,u.useEffect)(function(){R.NODE_ENV!=="production"&&e&&c.changed&&(console.group("State Updated"),console.log("State:",c),console.groupEnd())},[e,c]);var m=(0,u.useMemo)(function(){return M({},c,{matches:function(f){return f===c.value}})},[c.changed,c.context,c.value]);return[m,d,i]}function G(n){return Object.entries(n).reduce(function(t,e){var r=e[0],i=e[1];return t[r]=i.current,t},{})}function pn(n,t){return w(function(){return I(n,t)})}export{U as a,fn as b,pn as c};
/*! Bundled license information:

@xstate/fsm/es/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
//# sourceMappingURL=chunk-JB6B3MIH.js.map
