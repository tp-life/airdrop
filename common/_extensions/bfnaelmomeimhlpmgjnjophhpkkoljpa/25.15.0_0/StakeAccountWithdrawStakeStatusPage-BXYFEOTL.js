import{a as K}from"./chunk-JYORC2QX.js";import{a as A}from"./chunk-RQLATSAD.js";import{e as _,j as z}from"./chunk-UMB7TYLX.js";import{e as v,f as B,g as F}from"./chunk-4HMU6WOI.js";import"./chunk-HV4BNC77.js";import"./chunk-DLKGATEC.js";import"./chunk-P7AH56UI.js";import"./chunk-UDB3GXAG.js";import"./chunk-ZDSEL3RH.js";import"./chunk-PB6PA2EI.js";import"./chunk-RP4HT6XN.js";import{b as f}from"./chunk-NAWTYQ77.js";import"./chunk-7ZVEM3WY.js";import"./chunk-H7ATUB7C.js";import{db as m}from"./chunk-7N5UY74L.js";import"./chunk-ORJUPAX4.js";import{u as H}from"./chunk-HIWDTKJJ.js";import"./chunk-GDBECYVT.js";import"./chunk-US2EC2AF.js";import"./chunk-MWXM4F4N.js";import"./chunk-HYOCMEEG.js";import{Ea as N,Fa as O,i as I,j as P}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import"./chunk-65FAE5DM.js";import{L as w,Ya as C,wd as L}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{j as x,s as h}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import"./chunk-TKSJVOQZ.js";import{a as X}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as J,h as E,n as b}from"./chunk-3KENBVE7.js";E();b();var t=J(X());var Y=r=>{let s={stakePubkey:r.stakeAccountPubkey,amount:r.amount,usdPerSol:r.usdPerSol,onClose:r.onClose},{t:e}=x(),{withdrawStake:c,needsLedgerApproval:d,txHash:n,confirmationStatus:i,isError:l,error:u,onDeny:a}=Z(s);if(d)return t.default.createElement(B,{ledgerAction:c,cancel:a});if(l){let o=u,k=o?.message,S=v(o),g=o?.message.includes(P),W=o?.message.includes(I);return S?t.default.createElement(F,{ledgerActionError:o,onRetryClick:c,onCancelClick:a}):g||W?t.default.createElement(K,{onCancelClick:a}):t.default.createElement(f,{icon:"error",title:e("stakeAccountWithdrawStakeWithdrawalFailed"),onClose:a,showButton:!!n},t.default.createElement(m,{wordBreak:"break-word",color:h.colors.legacy.textSecondary,size:16,lineHeight:20.8},k??e("stakeAccountWithdrawStakeWithdrawalFailedDescription")),t.default.createElement(A,{txHash:n},e("stakeAccountWithdrawStakeViewTransaction")))}return i==="confirmed"||i==="finalized"?t.default.createElement(f,{icon:"success",title:e("stakeAccountWithdrawStakeSolWithdrawn"),onClose:r.onClose,iconSize:"large"},t.default.createElement(m,{wordBreak:"break-word",color:h.colors.legacy.textSecondary,size:16,lineHeight:20.8},e("stakeAccountWithdrawStakeSolWithdrawnDescription.part1"),t.default.createElement("br",null)," ",e("stakeAccountWithdrawStakeSolWithdrawnDescription.part2")),t.default.createElement(A,{txHash:n},e("stakeAccountWithdrawStakeViewTransaction"))):t.default.createElement(f,{icon:"loading",title:e("stakeAccountWithdrawStakeWithdrawingSol"),onClose:r.onClose,iconSize:"large"},t.default.createElement(m,{wordBreak:"break-word",color:h.colors.legacy.textSecondary,size:16,lineHeight:20.8},e("stakeAccountWithdrawStakeWithdrawingSolDescription")),t.default.createElement(A,{txHash:n},e("stakeAccountWithdrawStakeViewTransaction")))},ft=Y,Z=({onClose:r,...s})=>{let{data:e,isSuccess:c}=L(),{accountIdentifier:d,isLedgerAccount:n,solanaChainAddress:i,solanaPublicKey:l,connection:u,networkID:a}=(0,t.useMemo)(()=>{let Q=e?.identifier??"",y=(e?.addresses??[]).find(G=>C.isSolanaNetworkID(G.networkID)),U=new w.PublicKey(y?.address??""),j=e?.type==="ledger",D=y?.networkID,q=N(O(D));return{accountIdentifier:Q,isLedgerAccount:j,solanaChainAddress:y,solanaPublicKey:U,connection:q,networkID:D}},[e]),o=z(u),k=(0,t.useCallback)(()=>{o.mutate({...s,accountIdentifier:d,senderAddress:i,stakePubkey:new w.PublicKey(s.stakePubkey),authorizedPubkey:l})},[d,s,i,l,o]),S=H(),g=(0,t.useCallback)(()=>{S.denied({chainType:"solana",chainName:"solana",networkId:C.getSolanaNetworkIDValue(a),type:"withdraw"}),r()},[a,r,S]);(0,t.useEffect)(()=>{if(c){if(!e||!i)throw new Error("Selected account undefined when trying to perform stake transaction.");n||k()}},[c]);let T=o.data?.id,p=_(u,2e3,T),M=n&&(o.isIdle||o.isPending),V=p.data?.value?.confirmationStatus;return{withdrawStake:k,onDeny:g,needsLedgerApproval:M,txHash:T,confirmationStatus:V,isError:o.isError||p.isError,error:o.error||p.error}};export{Y as StakeAccountWithdrawStakeStatusPage,ft as default};
//# sourceMappingURL=StakeAccountWithdrawStakeStatusPage-BXYFEOTL.js.map
