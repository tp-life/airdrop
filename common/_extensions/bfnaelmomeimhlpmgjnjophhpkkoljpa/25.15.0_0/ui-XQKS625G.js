import{g as D,z as h}from"./chunk-E2H5RB2U.js";import{Q as x,W as _,ca as O,q as N,w as p,x as m}from"./chunk-27TD4NX4.js";import{o as I,z as A}from"./chunk-FBDT5S2M.js";import{w as k}from"./chunk-TKSJVOQZ.js";import{a as g,h as t}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as E,h as r,n}from"./chunk-3KENBVE7.js";r();n();r();n();var d=E(g());r();n();r();n();r();n();var y=(o=>(o.PENDING="pending",o.ACCEPTED="accepted",o))(y||{}),T=(i=>(i.NOT_SUBMITTED="not_submitted",i.PENDING_REVIEW="pending",i.APPROVED="approved",i.REJECTED="rejected",i))(T||{}),R=["accepted"],w=["approved","rejected","pending"],v=["not_submitted"];r();n();var f="cash",b={account:e=>[f,"account",{user:e}],addressBook:e=>[f,"address-book",e?.userID],cashAddress:e=>[f,"cash-address",{accountIdentifier:e}],enrollment:e=>[f,"enrollment",e?.userID],transfers:(e,s)=>[f,"transfers",{user:e,params:s}]};var J=t.object({id:t.string(),balance:t.string(),addressDetails:t.object({address:t.string()}),enrollmentDetails:t.object({kycStatus:t.nativeEnum(T),kycUrl:t.string(),tosStatus:t.nativeEnum(y),tosUrl:t.string()}),bankDetails:t.object({sourceCurrency:t.string(),destinationCurrency:t.string(),destinationBlockchain:t.string(),destinationAddress:t.string(),accountNumber:t.string(),routingNumber:t.string()}).optional()}),S=(e,s)=>{let{accessToken:o,userID:c}=e??{};return A({...s,queryKey:b.account(e),queryFn:c?async()=>{let i=await D.api().bearer(o).get(`/cash/v1/users/${c}/cash-account`),l=J.safeParse(i.data);if(l.success)return l.data;throw new L("Failed to parse cash account data")}:I})},L=class extends Error{constructor(s){super(s),this.name="CashAccountError"}};r();n();var K=e=>{if(!e)return!1;let{kycStatus:s,tosStatus:o}=e;return w.includes(s)&&R.includes(o)},B=e=>{if(!e)return!1;let{kycStatus:s}=e;return v.includes(s)};var F=()=>{let{data:e,isLoading:s}=h(),{data:o,isLoading:c}=S(e);return s||c?"loading":o?B(o.enrollmentDetails)?"enrolling":K(o.enrollmentDetails)?"enrolled":"not-enrolled":"not-enrolled"};r();n();var $=()=>{throw new Error("Not yet implemented")},j=$;r();n();var C=E(g());r();n();var u=E(g());r();n();var U=E(g());r();n();r();n();var H=t.object({name:t.string().optional(),type:t.string().optional()}),W=t.object({party:H.optional(),amount:t.string()}),Z=t.object({id:t.string(),status:t.enum(["pending","completed","failed","canceled"]),type:t.string(),createdAt:t.string(),description:t.string().optional(),entries:t.array(W)}),jt=t.object({items:t.array(Z),pagination:t.object({total:t.number(),page:t.number(),limit:t.number(),hasMore:t.boolean()})});var q=k({seconds:5}),zt={items:[{id:"transfer_123456789",status:"completed",type:"send",createdAt:"2023-11-15T14:30:45Z",description:"Payment for dinner",entries:[{party:{name:"John Smith",type:"external"},amount:"25.50"}]},{id:"transfer_987654321",status:"pending",type:"deposit",createdAt:"2023-11-20T09:15:30Z",description:"Direct deposit",entries:[{party:{name:"ACH Transfer",type:"bank"},amount:"1250.00"}]}],pagination:{total:2,page:1,limit:5,hasMore:!1}};var M=e=>{let{data:s}=h(),{data:o}=S(s,{refetchInterval:q}),{tosStatus:c,tosUrl:i="",kycStatus:l,kycUrl:P=""}=o?.enrollmentDetails||{},Q=(0,U.useMemo)(()=>({text:X(c),url:i,disabled:c==="accepted",onPress:()=>e(i)}),[c,i,e]),z=(0,U.useMemo)(()=>({text:tt(l),url:P,disabled:l!=="not_submitted",onPress:()=>e(P)}),[l,P,e]);return{tosButton:Q,kycButton:z,title:"Complete enrollment",description:"To start using Cash on Phantom, just accept the terms of service and complete KYC verification.",imageProps:{src:"https://assets.phantom.app/assets/nux-illustration-gm.webp",width:249,height:96}}},X=e=>{switch(e){case"accepted":return"TOS Accepted";case"pending":return"Accept TOS";default:return"TOS Unavailable"}},tt=e=>{switch(e){case"not_submitted":return"Start KYC";case"approved":return"KYC Approved";case"pending":return"KYC Under Review";case"rejected":return"KYC Rejected"}};var et=({openUrl:e})=>{let{tosButton:s,kycButton:o,title:c,description:i,imageProps:l}=M(e);return u.default.createElement(p,{className:N({display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"})},u.default.createElement(p,{className:N({flex:1,justifyContent:"center",alignItems:"center",paddingX:"screen",gap:16})},u.default.createElement(O,{...l}),u.default.createElement(m,{align:"center",font:"heading3"},c),u.default.createElement(m,{font:"body",color:"textSecondary",align:"center",style:{marginBottom:24}},i)),u.default.createElement(_,null,s&&u.default.createElement(x,{disabled:s.disabled,onPress:s.onPress},s.text),o&&u.default.createElement(x,{theme:"primary",disabled:o.disabled,onPress:o.onPress},o.text)))},G=et;var rt=()=>{let e=(0,C.useCallback)(s=>self.open(s,"_blank"),[]);return C.default.createElement(G,{openUrl:e})},Y=rt;r();n();var nt=()=>{throw new Error("Not yet implemented")},V=nt;var st=()=>{let e=F(),s=(()=>{switch(e){case"loading":return d.default.createElement(m,null,"Loading...");case"not-enrolled":return d.default.createElement(V,null);case"enrolling":return d.default.createElement(Y,null);case"enrolled":return d.default.createElement(j,null)}})();return d.default.createElement(p,null,s)};export{st as CashTabPage};
//# sourceMappingURL=ui-XQKS625G.js.map
