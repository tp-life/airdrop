import{a as ge}from"./chunk-TU2LGBZK.js";import{a as be,b as Te}from"./chunk-MEDQOUBN.js";import"./chunk-PLQQKT2M.js";import{d as ke}from"./chunk-ZO4HQTNS.js";import{b as he}from"./chunk-UDB3GXAG.js";import"./chunk-NUJWAPIJ.js";import{b as ye}from"./chunk-KQPLPV6X.js";import"./chunk-ORJUPAX4.js";import{a as fe}from"./chunk-QY3T2P2H.js";import"./chunk-DZ3GQOT6.js";import{Id as le,Yc as de}from"./chunk-EIQDOUTB.js";import"./chunk-WFPABEAU.js";import"./chunk-3IV4Y5QP.js";import"./chunk-NEKSPHVV.js";import"./chunk-O3RSUGZX.js";import{h as U}from"./chunk-65FAE5DM.js";import{a as pe,b as ue}from"./chunk-DBO6DP4Z.js";import{a as me,i as ce,j as R}from"./chunk-5W7YPRT3.js";import{Cb as Z,Qb as ee,Ya as A,ob as Y,sb as J,wd as ae,yc as te}from"./chunk-D7Z6MPRS.js";import"./chunk-NZAWO25Q.js";import"./chunk-E2H5RB2U.js";import{a as N}from"./chunk-CWJVYWRL.js";import{Ga as se,Q as ne,aa as K,d as H,da as ie,j as oe,q as h,s as I,v as re,w as L,x}from"./chunk-27TD4NX4.js";import"./chunk-YJV3X2ON.js";import"./chunk-FBDT5S2M.js";import{T as q,U as X,b as z,ha as G}from"./chunk-TKSJVOQZ.js";import{a as E,x as V}from"./chunk-UA6ADLWZ.js";import"./chunk-TVMPABNZ.js";import"./chunk-4M6V6BRQ.js";import"./chunk-UNDMYLJW.js";import{f as B,h as k,n as w}from"./chunk-3KENBVE7.js";k();w();var _=B(E());k();w();var o=B(E());k();w();var $=B(E());k();w();var c=B(E());var xe=s=>{if(!s)return I.colors.legacy.textTertiary;if(s>0)return I.colors.legacy.accentSuccess;if(s<0)return I.colors.legacy.accentAlert},Ce=c.default.memo(s=>{let{tokenAddress:n,walletAddress:r,balance:p,chainMetadata:a,currencyValue:f,currencyChange:t,isLoadingPrices:u,logoUri:e,name:d,onClick:C,onMouseEnter:b,showCurrencyValues:i=!0,hideEmptyCurrency:l=!1,showBalance:m=!0,symbol:T,type:y,tooltip:D}=s,P=n?U(n):void 0,M=T??P??"",W=f!==void 0?G(f):l?"":"\u2013",O=t!==void 0?G(t,{includePlusPrefix:!0}):l?"":"-",F=m?`${le(p)} ${M}`:M,v=`${T??(n&&U(n))}`,S=`fungible-token-row-${A.getChainName(a.id).toLowerCase()}-${v}`;return r&&ee(a.id,r)&&(S+=`-${J(a.id,r)}`),c.default.createElement("div",{className:g.container,"data-testid":S,onMouseEnter:b,onClick:C,role:"button"},c.default.createElement(ye,{image:{type:"fungible",src:e,fallback:T||n},tokenType:y,chainMeta:a}),c.default.createElement("div",{className:g.tokenDetailContainer},c.default.createElement("div",{className:g.styledRowTop},c.default.createElement(x,{className:g.textLeft,font:"body",style:g.textLeftStyles},d),i?u?c.default.createElement(K,{font:"caption",width:75,height:8,borderRadius:8}):c.default.createElement(x,{font:"caption",className:g.formattedCurrencyValueText},W):null),c.default.createElement("div",{className:g.styledRowBottom},c.default.createElement(x,{font:"caption",className:g.textLeft,style:{...g.textLeftStyles,color:I.colors.legacy.textSecondary}},F),i?u?c.default.createElement(K,{font:"caption",width:35,height:8,borderRadius:8}):c.default.createElement(x,{font:"caption",className:g.formattedCurrencyChangeText,style:{color:xe(t)}},O):null)))}),we={display:"flex",flexDirection:"row",justifyContent:"space-between",gap:16},g={container:h({backgroundColor:{base:"bgRow",hover:"bgButton"},cursor:"pointer",borderRadius:16,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"row",gap:12,padding:"base"}),tokenDetailContainer:h({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"hidden"}),styledRow:h({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:16}),styledRowTop:h({...we,marginBottom:2}),styledRowBottom:h({...we,marginTop:2}),textLeft:h({textAlign:"left",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"}),textLeftStyles:{WebkitLineClamp:1,WebkitBoxOrient:"vertical",textOverflow:"ellipsis"},formattedCurrencyValueText:h({textAlign:"right",fontWeight:"medium"}),formattedCurrencyChangeText:h({textAlign:"right"})};var j=$.default.memo(s=>{let{data:n,index:r,style:p}=s,{listItems:a,moveToNextPage:f,availableAddresses:t}=n,u=a[r],{token:e,addressType:d}=u,{caip19:C}=e,{chainId:b}=C,i=e.caip19.resourceType==="address"?e.caip19.address:void 0,l=t?.find(m=>d?m.addressType===d&&m.networkID===b:m.networkID===b)?.address??"";return $.default.createElement("div",{key:`${e.symbol}-${e.caip19.chainId}-${i}-${r}`,style:p?{...p,top:`${parseFloat(p.top)+be}px`}:void 0},$.default.createElement(Ce,{chainMetadata:Y(e.caip19.chainId),logoUri:e.logoURI,name:e.name??"",symbol:e.symbol,tokenAddress:i,walletAddress:l,onClick:()=>f(u),type:de(e.caip19),showBalance:!1,showCurrencyValues:!1,balance:new z(0),currencyValue:void 0,currencyChange:void 0}))},ke);var Se=({onSelect:s})=>{let{t:n}=oe(),{fiatRampGroupedTokens:r,isSearching:p,searchResults:a,handleSearch:f,moveToNextPage:t,isLoading:u,availableAddresses:e,enabledAddressTypes:d}=ve({onSelect:s}),C=N(),b=(0,o.useMemo)(()=>p?o.default.createElement(L,{gap:8,marginTop:16,marginBottom:96},a.map(({token:i,addressType:l},m)=>l&&!d.includes(l)?null:o.default.createElement(j,{key:`${i.symbol}-${i.caip19.chainId}-${m}`,index:m,data:{listItems:a,moveToNextPage:t,availableAddresses:e}}))):o.default.createElement(o.default.Fragment,null,o.default.createElement(fe,null),r?.groups?.map((i,l)=>o.default.createElement(L,{key:`${i.groupName}-${l}`,gap:8,marginTop:l===0?16:24,marginBottom:l===r.groups.length-1?96:0},o.default.createElement(x,{font:"bodyMedium",color:"textSecondary",align:"left",children:i.groupName}),i.tokens.map(({token:m,addressType:T},y)=>T&&!d.includes(T)?null:o.default.createElement(j,{key:`${m.symbol}-${m.caip19.chainId}-${y}`,index:y,data:{listItems:i.tokens,moveToNextPage:t,availableAddresses:e}}))))),[e,d,r?.groups,p,t,a]);return o.default.createElement(Te,{isLoading:u,isEmpty:a.length===0,emptyStateText:n("noBuyOptionsAvailableInCountry"),header:o.default.createElement(ie,{id:"search",label:"Search",showLabel:!1,placeholder:n("assetListSearch"),onChange:f,maxLength:Z},o.default.createElement(re.Search,{size:16,color:"textSecondary"})),content:b,footer:o.default.createElement(L,null,o.default.createElement(ne,{onClick:()=>void C.popStack()},n("commandClose")))})},Fe=Se,ve=({onSelect:s})=>{let{setState:n}=R(),{data:r}=ae(),p=Array.from(new Set(r?.addresses?.map(y=>y.addressType))),a=te(),{data:f,isLoading:t,isError:u}=pe("web-embedded",V,H.language),{data:e=[]}=ue("web-embedded",V,H.language),[d,C]=(0,o.useState)(""),b=q(d)??"",i=y=>C(y.currentTarget.value),l=d.length>0,m=X(e,b,me),T=y=>{let{token:D,addressType:P}=y,{name:M,symbol:W,caip19:O}=D,{chainId:F}=O,v=r?.addresses.find(S=>P?S.addressType===P&&S.networkID===F:S.networkID===F)?.address??"";A.isEVMNetworkID(F)&&(v=v.toLowerCase()),a.capture("fiatOnrampFungibleSelected",{data:{networkId:F,chainId:A.getChainID(F),asset:{name:M,symbol:W,type:"fungible"}}}),n({...ce,ownerPublicKey:v,fungible:D}),s()};return he(()=>void a.capture("fiatOnrampInitiated")),{fiatRampGroupedTokens:f,isSearching:l,searchResults:m,handleSearch:i,moveToNextPage:T,isLoading:t||u,availableAddresses:r?.addresses,enabledAddressTypes:p}};var gt=()=>{let s=N(),n=N(),r=R(t=>t.fungible),p=R(t=>t.reset),a=()=>{p(),s.popStack()},f=(t,u,e,d)=>{s.toStack("fiat-ramp-redirect-to-provider"),n.to("fiat-ramp-redirect-to-provider",{params:{sessionId:u,caip19:e,url:t,provider:d}})};return _.default.createElement(se,{onClose:a,initialStep:r==null?0:1},[({nextStep:t})=>_.default.createElement(Fe,{onSelect:t}),()=>_.default.createElement(ge,{onClose:a,onClickBuy:f})])};export{gt as FiatRampFlow};
//# sourceMappingURL=FiatRampFlow-NTA2OIKM.js.map
