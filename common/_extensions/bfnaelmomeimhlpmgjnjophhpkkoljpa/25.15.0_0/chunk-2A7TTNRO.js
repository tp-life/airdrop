import{a as q}from"./chunk-OIWCHA5L.js";import{T as he,V as ue,W as ge}from"./chunk-QY52VKIT.js";import{a as A}from"./chunk-ZJHRYWCW.js";import{b as me}from"./chunk-DLKGATEC.js";import{a as pe}from"./chunk-P7AH56UI.js";import{a as de}from"./chunk-NUJWAPIJ.js";import{b as B}from"./chunk-KQPLPV6X.js";import{f as D}from"./chunk-ORJUPAX4.js";import{va as ce,wa as le}from"./chunk-ZTXKK5SN.js";import{ld as j}from"./chunk-EIQDOUTB.js";import{eb as W,wd as re}from"./chunk-D7Z6MPRS.js";import{C as R,E as se,ca as z,j as ne,q as d,s as y,v as ae,w as ie,x as h}from"./chunk-27TD4NX4.js";import{w as oe}from"./chunk-YJV3X2ON.js";import{L as Z,Q as ee,ga as te,v as K}from"./chunk-TKSJVOQZ.js";import{a as O}from"./chunk-UA6ADLWZ.js";import{f as F,h as E,n as P}from"./chunk-3KENBVE7.js";E();P();var t=F(O());E();P();var i=F(O());E();P();var w=F(O());var ye=e=>{if(typeof e=="number")return e;switch(e??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},Ne=e=>{switch(e){case"square":return 6;case"circle":default:return 0}},He=D.div`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${e=>ee(e.color,e.alpha??.1)};
`,$=({src:e,fallback:o,alt:r,size:n="normal",shape:a="circle",style:s,onDragStart:m})=>{let p=o??w.default.createElement(Be,null,"?"),l=ye(n),g=ye(n),S=Ne(a);return a==="circle"?w.default.createElement(pe,{color:y.colors.legacy.bgWallet,diameter:l,style:s},w.default.createElement(z,{src:e,fallback:p,alt:r||void 0,width:l,height:g,borderRadius:S,onDragStart:m,loader:w.default.createElement(A,{borderRadius:`${S}px`,width:`${l}px`,height:`${g}px`})})):w.default.createElement(He,{color:y.colors.legacy.bgWallet,width:l,height:g,style:s},w.default.createElement(z,{src:e,fallback:p,alt:r||"",width:l,height:g,borderRadius:S,onDragStart:m,loader:w.default.createElement(A,{borderRadius:`${S}px`,width:`${l}px`,height:`${g}px`})}))},Be=D.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var $e=({item:e,index:o,onClick:r})=>{let n=e.type==="token"?e.data.data.symbol:e.data.name,a=(0,i.useCallback)(p=>{p.preventDefault()},[]),s=e.type==="token"?i.default.createElement(B,{image:{type:"fungible",src:e.data.data.logoUri,fallback:e.data.data.symbol??""},tokenType:e.data.type,chainMeta:e.data.data.chain,size:36}):e.type==="dapp"?i.default.createElement($,{src:e.data.imageUrl,size:36,shape:"square",onDragStart:a}):null,m=(0,i.useCallback)(()=>{r(o,e)},[o,r,e]);return i.default.createElement("div",{className:U.buttonContainer},i.default.createElement("div",{className:U.button,onClick:m},s,i.default.createElement(h,{className:U.text,color:"white",children:n??""})))},Se=({items:e,onClick:o})=>{let r=se(0),n=(0,i.useRef)(null),[a,s]=(0,i.useState)(0),m=(0,i.useMemo)(()=>{let p=self.innerWidth-a;return Math.min(0,p)},[a]);return(0,i.useEffect)(()=>{n.current&&s(n.current.scrollWidth)},[e]),i.default.createElement(ie,{overflow:"hidden"},i.default.createElement(R.div,{ref:n},i.default.createElement(R.div,{className:U.scrollView,style:{x:r},drag:"x",dragConstraints:{left:m,right:0}},e.map((p,l)=>i.default.createElement($e,{key:l,item:p,index:l,onClick:o})))))},U={scrollView:d({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:d({paddingRight:10}),button:d({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"bgRow",hover:"bgButton"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:d({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var Ue=D.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${e=>e.isLast?y.colors.legacy.bgWallet:y.colors.legacy.borderSecondary};
`,C={searchResultsContainer:d({marginTop:16,width:"100%"}),searchResultsHeaderContainer:d({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:d({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:d({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:d({cursor:"pointer"}),picturePlaceholder:d({borderRadius:6,height:32,width:32}),noResultsContainer:d({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:d({display:"flex",gap:4,alignItems:"center"}),dotContainer:d({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:d({backgroundColor:"textSecondary",width:4,height:4,borderRadius:"circle"}),secondaryAction:d({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},xe=(e,o,{priceMap:r,isPriceMapLoading:n,isReadOnlyAccount:a,entryPoint:s,navigateToSwapper:m,handleHideModalVisibility:p,addRecentlySearchedItem:l,dappsItems:g,pushDetailView:S})=>{let c=W(j(e)),v=r[c],M=v?.price,f=M!==void 0,x=v?.usd_24h_change,T=x!==void 0,k=f||T;return{type:"generic",key:c,"data-testid":`search-result-token-${e.data.symbol}`,image:t.default.createElement(B,{image:{type:"fungible",src:e.data.logoUri,fallback:e.data.symbol??""},tokenType:e.type,chainMeta:e.data.chain,size:32}),textMain:t.default.createElement(h,{children:K(e.data.name||"",25),font:"body"}),textSecondary:t.default.createElement("div",{className:C.tokenSecondaryContainer},t.default.createElement(h,{children:e.data.symbol||"",font:"caption",color:"textSecondary"}),n?t.default.createElement(t.default.Fragment,null,t.default.createElement(A,{width:"36px",height:"14px",borderRadius:"8px"}),t.default.createElement(A,{width:"48px",height:"14px",borderRadius:"8px"})):t.default.createElement(t.default.Fragment,null,k?t.default.createElement("div",{className:C.dotContainer},t.default.createElement("div",{className:C.dot})):null,f?t.default.createElement(de,{value:M,font:"caption",color:"textSecondary"}):null,T?t.default.createElement(h,{children:`${te(x,{includePlusPrefix:!0})}%`,font:"caption",color:x>=0?"accentSuccess":"accentAlert",truncate:"ellipsis"}):null)),secondaryAction:a?void 0:{icon:t.default.createElement(ae.Swap,null),onClick:N=>{N.stopPropagation(),m({buyFungibleCaip19:c}),s==="home"&&setTimeout(()=>{p("searchPage")},50)}},onClick:async()=>{ve({addRecentlySearchedItem:l,token:e,position:g.length+o+1,entryPoint:s,handleHideModalVisibility:p,pushDetailView:S})}}},Ct=({searchedDapps:e,tokens:o,trendingTokens:r,priceMap:n,isPriceMapLoading:a,showMoreDapps:s,setShowMoreDapps:m,renderShowMoreDappsButton:p,showMoreTokens:l,setShowMoreTokens:g,renderShowMoreTokensButton:S,entryPoint:c,recentlyViewedSearchItems:v=[],searchQuery:M})=>{let{t:f}=ne(),{pushDetailView:x}=me(),T=he(),{handleHideModalVisibility:k}=ge(),N=c==="home",X=oe(),{mutate:I}=ce(X),{mutate:J}=le(X),{data:Ie}=re(),H=!!Ie?.isReadOnly,L=(0,t.useMemo)(()=>e.map((u,b)=>({type:"generic",key:u.id,"data-testid":`search-result-dapp-${u.name}`,image:t.default.createElement($,{src:u.imageUrl,size:"small",shape:"square"}),textMain:t.default.createElement(h,{children:u.name,font:"body"}),textSecondary:t.default.createElement(h,{children:u.category||"",font:"caption",color:"textSecondary"}),onClick:async()=>{Ce({addRecentlySearchedItem:I,dapp:u,position:b+1,entryPoint:c})}})),[e,I,c]),G=(0,t.useMemo)(()=>o.map((u,b)=>xe(u,b,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:H,entryPoint:c,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:I,dappsItems:L,pushDetailView:x})),[o,n,a,H,c,T,k,I,L,x]),Y=(0,t.useMemo)(()=>r.map((u,b)=>xe(u,b,{priceMap:n,isPriceMapLoading:a,isReadOnlyAccount:H,entryPoint:c,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:I,dappsItems:L,pushDetailView:x})),[r,n,a,H,c,T,k,I,L,x]),ke=(0,t.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:v,onClick:async(u,b)=>{if(b.type==="token")ve({addRecentlySearchedItem:I,token:b.data,position:u,entryPoint:c,handleHideModalVisibility:k,pushDetailView:x});else if(b.type==="dapp")Ce({addRecentlySearchedItem:I,dapp:b.data,position:u,entryPoint:c});else throw new Error("Unknown item type")}}),[I,k,c,x,v]),we=v.length?f("commandClear"):void 0,Te=(0,t.useCallback)(()=>{J()},[J]),Le=S?f(l?"exploreShowLess":"exploreShowMore"):void 0,Ee=(0,t.useCallback)(()=>{g(!l)},[g,l]),Pe=p?f(s?"exploreShowLess":"exploreShowMore"):void 0,Ae=(0,t.useCallback)(()=>{m(!s)},[m,s]);if(!e.length&&!o.length)return t.default.createElement("div",{className:C.noResultsContainer,"data-testid":"explore-search-results-nodata"},t.default.createElement(h,{children:f("dappBrowserSearchNoAppsTokens"),font:"bodyMedium",color:"textSecondary"}));let _=M==null||M.length===0,Me=v.length&&_?t.default.createElement(V,{testId:"explore-search-results",title:t.default.createElement(h,{children:f("dAppBrowserRecents"),font:"title1Semibold"}),items:[ke],accessoryText:we,accessoryOnPress:Te}):null,Q=L.length?t.default.createElement(V,{testId:"explore-search-results",title:t.default.createElement(h,{children:f("exploreSites"),font:"title1Semibold"}),items:L,accessoryText:Pe,accessoryOnPress:Ae}):null,Re=G.length?t.default.createElement(V,{testId:"explore-search-results",title:t.default.createElement(h,{children:f("exploreTokens"),font:"title1Semibold"}),items:G,accessoryText:Le,accessoryOnPress:Ee}):null,De=_&&Y.length?t.default.createElement(V,{testId:"explore-search-results",title:t.default.createElement(h,{children:f("exploreTrendingTokens"),font:"title1Semibold"}),items:Y}):null;return t.default.createElement(t.default.Fragment,null,Me,N?void 0:Q,De,Re,N?Q:void 0)},be=({hoverColor:e,baseColor:o,...r})=>t.default.createElement(R.div,{...r,whileHover:{background:e},style:{background:o},transition:{ease:[.5,1,.89,1],duration:.1}}),V=({items:e,title:o,testId:r,accessoryText:n,accessoryOnPress:a})=>t.default.createElement("div",{className:C.searchResultsContainer,"data-testid":r},t.default.createElement("div",{className:C.searchResultsHeaderContainer},o,n?t.default.createElement(h,{className:C.hover,children:n,font:"caption",color:"textSecondary",onPress:a}):null),e.map((s,m)=>t.default.createElement(Ve,{...s,isLast:m===e.length-1}))),Ve=e=>{let[o,r]=(0,t.useState)(!1),[n,a]=(0,t.useState)(!1);if(e.type==="recentSearchItems")return t.default.createElement(Se,{items:e.items,onClick:e.onClick});let{onClick:m,image:p,isLast:l,textMain:g,textSecondary:S,secondaryAction:c,"data-testid":v}=e;return t.default.createElement(be,{className:C.searchResult,onClick:m,"data-testid":v,baseColor:y.colors.legacy.bgWallet,hoverColor:n?y.colors.legacy.bgWallet:y.colors.legacy.bgButton,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},t.default.createElement("div",null,p),t.default.createElement(Ue,{isLast:l},t.default.createElement("div",{className:C.searchResultTextContainer},g,S),c?t.default.createElement(be,{className:C.secondaryAction,onClick:c.onClick,baseColor:o?y.colors.legacy.borderPrimary:y.colors.legacy.bgButton,hoverColor:y.colors.legacy.borderPrimary,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},c.icon):null))};function Ce({addRecentlySearchedItem:e,dapp:o,position:r,entryPoint:n}){e({type:"dapp",data:o}),self.open(Z(o.domain).origin),q.searchItemClickedByUser({itemDetails:{position:r,title:o.name,id:o.id,type:"site",uiContext:n}})}function ve({addRecentlySearchedItem:e,token:o,position:r,entryPoint:n,pushDetailView:a}){let s=W(j(o));q.searchItemClickedByUser({itemDetails:{position:r,title:o.data.name||o.data.symbol||s,id:s,type:"token",uiContext:n}}),a(t.default.createElement(ue,{caip19:s,title:o.data.name??void 0,entryPoint:"exploreSearch"})),e({type:"token",data:o})}export{Ct as a};
//# sourceMappingURL=chunk-2A7TTNRO.js.map
