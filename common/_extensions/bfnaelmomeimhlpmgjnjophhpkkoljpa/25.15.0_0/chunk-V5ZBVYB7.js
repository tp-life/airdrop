import{a as Se}from"./chunk-AY7JCRFQ.js";import{a as Kt}from"./chunk-5YDSFBVN.js";import{i as it}from"./chunk-YQDBMSRB.js";import{a as ht}from"./chunk-5RY5S5F7.js";import{a as ut}from"./chunk-752G45NS.js";import{e as fe,f as ye,g as Ce}from"./chunk-4HMU6WOI.js";import{b as V}from"./chunk-E67GFDH7.js";import{a as d}from"./chunk-R2LHCBUO.js";import{b as J,f as Pt}from"./chunk-DLKGATEC.js";import{a as ge}from"./chunk-P7AH56UI.js";import{a as ue}from"./chunk-AK42W2OZ.js";import{a as pe,c as z,d as ot}from"./chunk-H7ATUB7C.js";import{c as ce,db as K,la as me,na as de}from"./chunk-7N5UY74L.js";import{f as i}from"./chunk-ORJUPAX4.js";import{X as v,Y as ae,Z as le,b as oe,n as ie,o as re,p as ne,y as se}from"./chunk-G7OTLN34.js";import{ba as xt}from"./chunk-US2EC2AF.js";import{c as Q}from"./chunk-7F2GBYX5.js";import{Cb as te,Ea as Rt,Fa as et,Fc as wt,Gc as ee,Lb as bt}from"./chunk-EIQDOUTB.js";import{h as Lt,i as Tt}from"./chunk-3IV4Y5QP.js";import{U as Zt,j as Qt}from"./chunk-O3RSUGZX.js";import{H as Ct,L as $,Vd as St,Ya as R,wd as tt}from"./chunk-D7Z6MPRS.js";import{C as Xt,D as Yt,j as A,s as a}from"./chunk-27TD4NX4.js";import{D as Bt}from"./chunk-FBDT5S2M.js";import{Q as pt}from"./chunk-TKSJVOQZ.js";import{a as q}from"./chunk-UA6ADLWZ.js";import{f as G,h as w,n as x}from"./chunk-3KENBVE7.js";w();x();var U=G(q());var Oe=i(d)`
  background: ${a.colors.legacy.bgRow};
  padding: 12px 12px;
  border-radius: ${e=>e.borderRadius?e.borderRadius:"6px"};
`,$e=i.div`
  margin-top: 10px;
`,kt=U.default.memo(({uri:e,collectibleName:t,collectionName:o,borderRadius:r})=>U.default.createElement(Oe,{borderRadius:r},U.default.createElement(ut,null,U.default.createElement(d,null,U.default.createElement(de,null),U.default.createElement($e,null,U.default.createElement(K,{weight:500,size:16,color:a.colors.legacy.textPrimary,textAlign:"left"},t),U.default.createElement(K,{weight:400,size:16,color:a.colors.legacy.textSecondary,textAlign:"left"},o))),e&&U.default.createElement(Se,{uri:e,width:75,height:75,borderRadius:"6px"}))));w();x();var C=G(q());w();x();var rt=G(q());w();x();var s=G(q());w();x();var c=G(q());var Et=e=>{let{collectible:t,action:o,actionType:r,actionError:u,transaction:l,errorTitle:b,successTitle:n,loadingTitle:g,errorMessage:m,successMessage:y,loadingMessage:D,marketplaceUrl:L,marketplace:F,onClose:B}=e,T=it(),M=t.asset.name,h=ce(),{closeAllModals:I}=V(),{popDetailView:H}=J(),{t:p}=A(),P=(0,c.useMemo)(()=>({viewTransactionText:p("listStatusViewTransaction"),retryText:p("commandRetry"),cancelText:p("commandCancel"),viewOnMEText:p("listStatusViewOnMagicEden"),dismissText:p("listStatusLoadingDismiss")}),[p]),{viewTransactionText:O,retryText:st,cancelText:at,viewOnMEText:lt,dismissText:vt}=P,[gt,Y]=(0,c.useState)("loading"),Mt=gt==="error",he=gt==="loading",It=gt==="success",[k,ke]=(0,c.useState)(void 0),[Ot,$t]=(0,c.useState)("needApproval"),[Ee,Ht]=(0,c.useState)(),{data:ft}=tt(),{accountIdentifier:_t,chainAddresses:Nt,networkID:E,solanaPublicKey:yt,isLedger:ct,cluster:Vt,connection:Ut}=(0,c.useMemo)(()=>{let f=ft?.identifier??"",_=ft?.type==="ledger",W=ft?.addresses??[],Z=W.find(Ke=>R.isSolanaNetworkID(Ke.networkID)),j=Z?.networkID,Fe=Z?.address??"",Jt=et(j),Be=Rt(Jt);return{accountIdentifier:f,chainAddresses:W,networkID:j,solanaPublicKey:Fe,isLedger:_,cluster:Jt,connection:Be}},[ft]),Wt=v(f=>f.setTransactionURL),{mutateAsync:zt}=ee(Ut),mt,dt;switch(r){case"list":mt="createListing",dt=p("transactionsPendingCreateListingInterpolated",{name:M??p("tokenRowUnknownToken")});break;case"edit":mt="editListing",dt=p("transactionsPendingEditListingInterpolated",{name:M??p("tokenRowUnknownToken")});break;case"remove":mt="removeListing",dt=p("transactionsPendingRemoveListingInterpolated",{name:M??p("tokenRowUnknownToken")});break}let Ae=Mt?b:It?n:g,ve=Mt?m:It?y:D,Me=(0,c.useCallback)(()=>{L&&self.open(L)},[L]),{data:Dt}=Zt(),Ie=(0,c.useCallback)(()=>{if(!E||!Dt||!k)return;let f=Dt.explorers[E],_=Qt({networkID:E,endpoint:"transaction",explorerType:f,param:k});Wt(_),self.open(_)},[E,Dt,Wt,k]),jt=(0,c.useCallback)(()=>{B(),h("/notifications")},[h,B]),Gt=(0,c.useCallback)(async()=>{if(!(!l||!E))try{let f={ownerAddress:yt,networkID:E,data:{signature:""},type:mt,display:{summary:{topLeft:{text:dt}}}},_=await zt({accountIdentifier:_t,feePayer:new $.PublicKey(yt),transaction:l,pendingTransactionInput:f}),W=Lt(E);W.chainType==="solana"&&T.submittedTransaction(_,{...W,method:"signAndSendTransaction"}),ke(_)}catch(f){Bt.captureError(f,"collectibles"),Y("error"),fe(f)&&Ht(c.default.createElement(Ce,{ledgerActionError:f,onRetryClick:()=>{H()},onCancelClick:I}))}},[_t,E,I,dt,mt,H,zt,yt,l,T]);(0,c.useEffect)(()=>{l&&(ct?Ht(c.default.createElement(ye,{ledgerAction:Gt,cancel:I})):Gt())},[l]);let qt=se(Nt);(0,c.useEffect)(()=>{k&&(async()=>{try{$t("mining"),await te({connection:Ut,signature:k}),await ie(t.asset.mintPubKey,Vt,F,k),r==="remove"&&(await re(yt,t.asset.mintPubKey,Vt,F),await ne(Nt,t.asset.mintPubKey)),await qt(),Y("success"),Ne(r),ct&&($t("confirmed"),jt())}catch{Y("error"),Ft(r)}})()},[k,Nt,qt]);let Ne=(0,c.useCallback)(f=>{let W={list:"listCollectibleConfirmationSuccess",edit:"editCollectibleConfirmationSuccess",remove:"unlistCollectibleConfirmationSuccess"}[f],{mintPubKey:Z}=t.asset;if(Q.capture(W,{data:{mint:Z}}),E&&k){let j=Lt(E);j.chainType==="solana"&&T.transactionStatus(k,{...j,status:{type:"confirmed"}})}},[t.asset,k,E,T]),Ft=(0,c.useCallback)(f=>{let W={list:"listCollectibleConfirmationError",edit:"editCollectibleConfirmationError",remove:"unlistCollectibleConfirmationError"}[f],{mintPubKey:Z}=t.asset;if(Q.capture(W,{data:{mint:Z}}),E&&k){let j=Lt(E);j.chainType==="solana"&&T.transactionStatus(k,{...j,status:{type:"error"}})}},[t.asset,k,E,T]);(0,c.useEffect)(()=>{u&&Y("error")},[u]);let De=(0,c.useCallback)(async()=>{try{Y("loading"),await o()}catch(f){Bt.captureError(f,"collectibles"),Y("error"),Ft(r)}},[o,Ft,r]);return(0,c.useEffect)(()=>{(!ct||ct&&Ot==="needApproval")&&De()},[]),{viewTransactionText:O,cancelText:at,retryText:st,viewOnMEText:lt,dismissText:vt,status:gt,isError:Mt,isLoading:he,isSuccess:It,title:Ae,message:ve,txHash:k,isLedger:ct,step:Ot,ledgerContent:Ee,onTransactionLinkClick:Ie,onMELinkClick:Me,onRetry:H,onCancel:H,onDismiss:jt}};var At=s.default.memo(e=>{let{viewTransactionText:t,cancelText:o,retryText:r,viewOnMEText:u,dismissText:l,status:b,isError:n,isLoading:g,isSuccess:m,title:y,message:D,txHash:L,isLedger:F,step:B,ledgerContent:T,onTransactionLinkClick:M,onMELinkClick:h,onRetry:I,onCancel:H,onDismiss:p}=e,{t:P}=A(),O=null;return F&&B==="needApproval"?O=T:O=s.default.createElement(He,null,s.default.createElement(_e,null,s.default.createElement(Yt,{mode:"wait",initial:!0},s.default.createElement(Xt.div,{key:b,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},n?s.default.createElement(Kt,{type:"failure"}):m?s.default.createElement(Kt,{type:"success"}):s.default.createElement(Ve,null,s.default.createElement(pe,{diameter:54,color:a.colors.legacy.accentPrimary,trackColor:a.colors.legacy.bgArea})))),s.default.createElement(Ue,null,y),D&&s.default.createElement(We,null,`${D} ${g&&L?P("listStatusLoadingSafelyDismiss"):""}`),L&&s.default.createElement(ze,{onClick:M},t)),n?s.default.createElement(ot,{primaryText:r,onPrimaryClicked:I,secondaryText:o,onSecondaryClicked:H}):g&&L&&y!==P("removeListStatusLoadingTitle")?s.default.createElement(d,null,s.default.createElement(Le,{theme:"primary",disabled:!0},u),s.default.createElement(z,{onClick:p},l)):g&&L&&y===P("removeListStatusLoadingTitle")?s.default.createElement(ut,null,s.default.createElement(z,{onClick:p},l)):m&&y!==P("removeListStatusSuccessTitle")?s.default.createElement(d,null,s.default.createElement(Le,{theme:"primary",onClick:h},u),s.default.createElement(z,{onClick:p},l)):m&&y===P("removeListStatusSuccessTitle")?s.default.createElement(ut,null,s.default.createElement(z,{onClick:p},l)):null),s.default.createElement(s.default.Fragment,null,O)}),He=i(d).attrs({justify:"space-between",align:"center"})`
  height: 100%;
`,_e=i(d).attrs({align:"center",justify:"center"})`
  flex: 1;
  flex-grow: 1;
`,Ve=i(d).attrs({align:"center",justify:"center",margin:"0 0 15px 0"})`
  position: relative;
  border-radius: 50%;
  background-color: ${pt(a.colors.legacy.accentPrimary,.2)};
  box-shadow: 0 0 0 20px ${pt(a.colors.legacy.accentPrimary,.2)};
`,Ue=i(K).attrs({size:28,lineHeight:33.89,weight:500,margin:"20px 0 10px 0"})``,We=i(K).attrs({size:16,lineHeight:19,weight:400,color:a.colors.legacy.textSecondary,margin:"0 0 10px 0"})`
  padding: 0px 20px;
`,ze=i(K).attrs({size:16,lineHeight:20.8,weight:500,color:a.colors.legacy.accentPrimary})``,Le=i(z)`
  margin-bottom: 10px;
`;var Te=()=>{let e=v(t=>t.listCollectible);return e?rt.default.createElement(je,{listCollectible:e}):null},je=({listCollectible:e})=>{let{closeAllModals:t}=V(),{data:o}=tt(),{solanaPublicKey:r,cluster:u}=(0,rt.useMemo)(()=>{let P=o?.addresses.find(lt=>R.isSolanaNetworkID(lt.networkID)),O=P?.networkID,st=new $.PublicKey(P?.address??""),at=et(O);return{chainId:O,solanaPublicKey:st,cluster:at}},[o]),l=v(P=>P.listCollectiblePrice),b="magic_eden",n=`https://magiceden.io/item-details/${e.asset.mintPubKey}`,g=e.asset.name??null,{t:m}=A(),y=(0,rt.useMemo)(()=>({errorTitle:m("listStatusErrorTitle"),successTitle:m("listStatusSuccessTitle"),loadingTitle:m("listStatusLoadingTitle"),errorMessage:m("listStatusErrorMessage",{name:g}),successMessage:m("listStatusSuccessMessage",{name:g,listCollectiblePrice:l}),loadingMessage:m("listStatusLoadingMessage",{name:g,listCollectiblePrice:l})}),[m,g,l]),{errorTitle:D,successTitle:L,loadingTitle:F,errorMessage:B,successMessage:T,loadingMessage:M}=y,{list:h,error:I,transaction:H}=le(),p=Et({collectible:e,action:()=>h(u,r),actionType:"list",actionError:I,transaction:H,errorTitle:D,successTitle:L,loadingTitle:F,errorMessage:B,successMessage:T,loadingMessage:M,marketplaceUrl:n,marketplace:b,onClose:t});return e?rt.default.createElement(At,{...p}):null};var qe=i(d).attrs({justify:"space-between"})`
  height: 100%;
`,Je=i(d).attrs({align:"center"})``,Qe=i(ot)`
  width: 100%;
`,Xe=i.div`
  width: 100%;
  overflow: hidden;
`,Ye=i(K).attrs({size:12,lineHeight:18,weight:400,textAlign:"center",color:a.colors.legacy.textSecondary,wordBreak:"break-word"})`
  padding: 0 48px;
  width: 100%;
`,Ze=i.div`
  border-bottom: 1px solid ${a.colors.legacy.bgWallet};
  border-bottom-width: 1px;
`,we=({artistRoyalties:e,marketplaceFee:t})=>{let{t:o}=A(),r=it(),{pushDetailView:u}=J(),{hideCollectibleListingModal:l}=V(),b=(0,C.useCallback)(()=>{l()},[l]),n=v(I=>I.listCollectible);if(!n)return null;let g=v(I=>I.listCollectiblePrice),{data:m}=St("solana");xt(m,"CREATE_LISTING");let{cluster:y}=wt(),D=Ct(bt),L=n.asset.collectibleImage,F=n.asset.name,B=n.asset.collectionName??null,T=(0,C.useCallback)(()=>{Q.capture("listCollectibleCreateListing",{data:{mint:n.asset.mintPubKey}}),r.approved({chainId:Tt(y),type:"create",list:{type:"create",tokenId:n.asset.mintPubKey}}),g&&u(C.default.createElement(Te,null))},[n?.asset.mintPubKey,g,u,y,r]),M=()=>{self.open(oe,"_blank")},h=[{label:o("collectiblesListPrice"),value:`${g} SOL`,color:a.colors.legacy.accentSuccess,tooltipContent:o("collectiblesListPriceTooltip")},{label:o("collectiblesMagicEdenFee"),value:t===null?"\u2014":`${t}%`,tooltipContent:o("collectiblesMagicEdenFeeTooltip",{marketplaceFee:t})},{label:o("collectiblesArtistRoyalties"),value:e===null?"\u2014":`${e}%`,tooltipContent:o("collectiblesArtistRoyaltiesTooltip")},{label:o("sendConfirmationNetworkFee"),value:`${D} SOL`}];return C.default.createElement(qe,null,C.default.createElement(Je,null,C.default.createElement(Pt,null,o("collectiblesListOnMagicEden")),C.default.createElement(kt,{uri:L,collectibleName:F,collectionName:B,borderRadius:"6px 6px 0px 0px"}),C.default.createElement(Ze,null),C.default.createElement(Xe,null,C.default.createElement(ht,{rows:h,borderRadius:"0px 0px 6px 6px"}))),C.default.createElement(Ye,null,C.default.createElement(ue,{i18nKey:"collectiblesCreateListingTermsOfService"},"By tapping ",C.default.createElement("span",{style:{color:a.colors.legacy.textSecondary}},'"List Now"')," you agree to Magic Eden's",C.default.createElement("label",{onClick:M,style:{color:a.colors.legacy.accentPrimary,cursor:"pointer"}},"Terms of Service"))),C.default.createElement(Qe,{primaryText:o("collectiblesListNowButton"),secondaryText:o("commandCancel"),onPrimaryClicked:T,onSecondaryClicked:b}))};w();x();var N=G(q());w();x();var nt=G(q());var xe=()=>{let e=v(t=>t.listCollectible);return e?nt.default.createElement(Re,{listCollectible:e}):null},Re=({listCollectible:e})=>{let{t}=A(),{closeAllModals:o}=V(),{data:r}=tt(),{solanaPublicKey:u,cluster:l}=(0,nt.useMemo)(()=>{let O=(r?.addresses??[]).find(vt=>R.isSolanaNetworkID(vt.networkID)),st=O?.networkID,at=new $.PublicKey(O?.address??""),lt=et(st);return{solanaPublicKey:at,cluster:lt}},[r]),b=v(P=>P.editListCollectiblePrice),n="magic_eden",g=`https://magiceden.io/item-details/${e.asset.mintPubKey}`,m=e.asset.name,y=(0,nt.useMemo)(()=>({errorTitle:t("editListStatusErrorTitle"),successTitle:t("editListingStatusSuccessTitle"),loadingTitle:t("editListingStatusLoadingTitle"),errorMessage:t("listStatusErrorMessage",{name:m}),successMessage:t("editListingStatusSuccessMessage",{name:m,editListCollectiblePrice:b}),loadingMessage:t("editListingStatusLoadingMessage",{name:m,editListCollectiblePrice:b})}),[t,m,b]),{errorTitle:D,successTitle:L,loadingTitle:F,errorMessage:B,successMessage:T,loadingMessage:M}=y,{editList:h,error:I,transaction:H}=ae(),p=Et({collectible:e,action:()=>h(l,u),actionType:"edit",actionError:I,transaction:H,errorTitle:D,successTitle:L,loadingTitle:F,errorMessage:B,successMessage:T,loadingMessage:M,marketplaceUrl:g,marketplace:n,onClose:o});return nt.default.createElement(At,{...p})};var to=i(d).attrs({justify:"space-between"})`
  height: 100%;
`,eo=i(d).attrs({align:"center"})``,oo=i(ot)`
  width: 100%;
`,io=i.div`
  width: 100%;
  overflow: hidden;
`,ro=i.div`
  border-bottom: 1px solid ${a.colors.legacy.bgWallet};
  border-bottom-width: 1px;
`,Pe=({artistRoyalties:e,marketplaceFee:t})=>{let{t:o}=A(),r=it(),{pushDetailView:u}=J(),{hideEditCollectibleListingModal:l}=V(),b=(0,N.useCallback)(()=>{l()},[l]),n=v(h=>h.listCollectible);if(!n)return null;let g=v(h=>h.editListCollectiblePrice),{data:m}=St("solana");xt(m,"EDIT_LISTING");let{cluster:y}=wt(),D=Ct(bt),L=n.asset.collectibleImage,F=n.asset.name,B=n.asset.collectionName??null,T=(0,N.useCallback)(()=>{Q.capture("listCollectibleEditListing",{data:{mint:n.asset.mintPubKey}}),r.approved({chainId:Tt(y),type:"update",list:{type:"update",tokenId:n.asset.mintPubKey}}),u(N.default.createElement(xe,null))},[n.asset.mintPubKey,u,y,r]),M=[{label:o("collectiblesListPrice"),value:`${g} SOL`,color:a.colors.legacy.accentSuccess},{label:o("collectiblesMagicEdenFee"),value:t===null?"\u2014":`${t}%`},{label:o("collectiblesArtistRoyalties"),value:e===null?"\u2014":`${e}%`},{label:o("sendConfirmationNetworkFee"),value:`${D} SOL`}];return N.default.createElement(to,null,N.default.createElement(eo,null,N.default.createElement(Pt,null,o("collectiblesEditListing")),N.default.createElement(kt,{uri:L,collectibleName:F,collectionName:B,borderRadius:"6px 6px 0px 0px"}),N.default.createElement(ro,null),N.default.createElement(io,null,N.default.createElement(ht,{rows:M,borderRadius:"0px 0px 6px 6px"}))),N.default.createElement(oo,{primaryText:o("collectiblesListNowButton"),secondaryText:o("commandCancel"),onPrimaryClicked:T,onSecondaryClicked:b}))};w();x();var S=G(q());var no=i(d).attrs({align:"center",justify:"space-between"})`
  height: 100%;
`,so=i(d).attrs({align:"center",justify:"center"})`
  height: 100%;
`,ao=i(ge)`
  svg {
    fill: ${a.colors.brand.yellowMoon};
  }
`,lo=i(z)`
  margin-bottom: 10px;
`,zr=({artistRoyalties:e,marketplaceFee:t,isEditing:o=!1})=>{let{t:r}=A(),{pushDetailView:u,popDetailView:l}=J(),b=o?"EditListing":"CreateListing",n=(0,S.useCallback)(()=>{u(b==="EditListing"?S.default.createElement(Pe,{artistRoyalties:e,marketplaceFee:t}):S.default.createElement(we,{artistRoyalties:e,marketplaceFee:t}))},[e,t,b,u]);return S.default.createElement(no,null,S.default.createElement(so,null,S.default.createElement(d,{align:"center",margin:"0 0 20px 0"},S.default.createElement(ao,{color:pt(a.colors.legacy.accentWarning,.1),diameter:94},S.default.createElement(me,{fill:a.colors.brand.yellowMoon}))),S.default.createElement(d,{align:"center",margin:"0 0 10px 0"},S.default.createElement(K,{size:26,weight:500,lineHeight:34},r("collectiblesBelowFloorPrice"))),S.default.createElement(d,{align:"center",padding:"0 20px"},S.default.createElement(K,{size:16,color:a.colors.legacy.textSecondary,lineHeight:22},r("collectiblesBelowFloorPriceMessage")))),S.default.createElement(d,null,S.default.createElement(lo,{theme:"primary",onClick:n},r("collectiblesListAnywayButton")),S.default.createElement(z,{onClick:l},r("commandCancel"))))};export{kt as a,Et as b,At as c,we as d,Pe as e,zr as f};
//# sourceMappingURL=chunk-V5ZBVYB7.js.map
